var notBulma=function(t){"use strict";"undefined"!=typeof window&&(window.__svelte||={v:new Set}).v.add("5");const e=Symbol();var i=Array.isArray,r=Array.from,n=Object.defineProperty,s=Object.getOwnPropertyDescriptor,o=Object.getOwnPropertyDescriptors,a=Object.prototype,l=Array.prototype,c=Object.getPrototypeOf;function u(t){return"function"==typeof t}const d=()=>{};const h=32,g=128,f=256,p=512,v=1024,m=2048,b=4096,y=8192,O=32768,$=1<<19,w=Symbol("$state"),k=Symbol("legacy props"),I=Symbol("");function A(t){return t===this.v}function _(t,e){return t!=t?e==e:t!==e||null!==t&&"object"==typeof t||"function"==typeof t}function C(t){return!_(t,this.v)}let E=!1;function S(t){return{f:0,v:t,reactions:null,equals:A,version:0}}function L(t){return function(t){null!==bt&&2&bt.f&&(null===wt?wt=[t]:wt.push(t));return t}(S(t))}function N(t,e=!1){const i=S(t);return e||(i.equals=C),E&&null!==Et&&null!==Et.l&&(Et.l.s??=[]).push(i),i}function F(t,e){return null!==bt&&Lt()&&18&bt.f&&(null===wt||!wt.includes(t))&&function(){throw new Error("state_unsafe_mutation")}(),T(t,e)}function T(t,e){return t.equals(e)||(t.v=e,t.version=St(),M(t,v),Lt()&&null!==Ot&&Ot.f&p&&!(Ot.f&h)&&(null!==kt&&kt.includes(t)?(Vt(Ot,v),Pt(Ot)):null===At?function(t){At=t}([t]):At.push(t))),e}function M(t,e){var i=t.reactions;if(null!==i)for(var r=Lt(),n=i.length,s=0;s<n;s++){var o=i[s],a=o.f;a&v||(r||o!==Ot)&&(Vt(o,e),640&a&&(2&a?M(o,m):Pt(o)))}}function D(t){var e=1026;null===Ot?e|=g:Ot.f|=$;const i={children:null,ctx:Et,deps:null,equals:A,f:e,fn:t,reactions:null,v:null,version:0,parent:Ot};if(null!==bt&&2&bt.f){var r=bt;(r.children??=[]).push(i)}return i}function U(t){const e=D(t);return e.equals=C,e}function x(t){var e=t.children;if(null!==e){t.children=null;for(var i=0;i<e.length;i+=1){var r=e[i];2&r.f?j(r):Z(r)}}}function R(t){var e,i=Ot;$t(t.parent);try{x(t),e=Ft(t)}finally{$t(i)}return e}function P(t){var e=R(t);Vt(t,(Ct||t.f&g)&&null!==t.deps?m:p),t.equals(e)||(t.v=e,t.version=St())}function j(t){x(t),Mt(t,0),Vt(t,y),t.v=t.children=t.deps=t.ctx=t.reactions=null}function W(t){null===Ot&&null===bt&&function(){throw new Error("effect_orphan")}(),null!==bt&&bt.f&g&&function(){throw new Error("effect_in_unowned_derived")}(),gt&&function(){throw new Error("effect_in_teardown")}()}function B(t,e,i,r=!0){var n=!!(64&t),s=Ot,o={ctx:Et,deps:null,deriveds:null,nodes_start:null,nodes_end:null,f:t|v,first:null,fn:e,last:null,next:null,parent:n?null:s,prev:null,teardown:null,transitions:null,version:0};if(i){var a=ht;try{ft(!0),Dt(o),o.f|=16384}catch(t){throw Z(o),t}finally{ft(a)}}else null!==e&&Pt(o);if(!(i&&null===o.deps&&null===o.first&&null===o.nodes_start&&null===o.teardown&&!(o.f&$))&&!n&&r&&(null!==s&&function(t,e){var i=e.last;null===i?e.last=e.first=t:(i.next=t,t.prev=i,e.last=t)}(o,s),null!==bt&&2&bt.f)){var l=bt;(l.children??=[]).push(o)}return o}function z(t){if(W(),!(null!==Ot&&!!(Ot.f&h)&&null!==Et&&!Et.m))return H(t);var e=Et;(e.e??=[]).push({fn:t,effect:Ot,reaction:bt})}function V(t){return W(),q(t)}function H(t){return B(4,t,!1)}function q(t){return B(8,t,!0)}function G(t){return J(t)}function J(t,e=0){return B(24|e,t,!0)}function K(t,e=!0){return B(40,t,!0,e)}function Y(t){var e=t.teardown;if(null!==e){const t=gt,i=bt;pt(!0),yt(null);try{e.call(null)}finally{pt(t),yt(i)}}}function Q(t){var e=t.deriveds;if(null!==e){t.deriveds=null;for(var i=0;i<e.length;i+=1)j(e[i])}}function X(t,e=!1){var i=t.first;for(t.first=t.last=null;null!==i;){var r=i.next;Z(i,e),i=r}}function Z(t,e=!0){var i=!1;if((e||262144&t.f)&&null!==t.nodes_start){for(var r=t.nodes_start,n=t.nodes_end;null!==r;){var s=r===n?null:ee(r);r.remove(),r=s}i=!0}X(t,e&&!i),Q(t),Mt(t,0),Vt(t,y);var o=t.transitions;if(null!==o)for(const t of o)t.stop();Y(t);var a=t.parent;null!==a&&null!==a.first&&tt(t),t.next=t.prev=t.teardown=t.ctx=t.deps=t.parent=t.fn=t.nodes_start=t.nodes_end=null}function tt(t){var e=t.parent,i=t.prev,r=t.next;null!==i&&(i.next=r),null!==r&&(r.prev=i),null!==e&&(e.first===t&&(e.first=r),e.last===t&&(e.last=i))}function et(t,e){var i=[];rt(t,i,!0),it(i,(()=>{Z(t),e&&e()}))}function it(t,e){var i=t.length;if(i>0){var r=()=>--i||e();for(var n of t)n.out(r)}else e()}function rt(t,e,i){if(!(t.f&b)){if(t.f^=b,null!==t.transitions)for(const r of t.transitions)(r.is_global||i)&&e.push(r);for(var r=t.first;null!==r;){var n=r.next;rt(r,e,!!(!!(r.f&O)||!!(r.f&h))&&i),r=n}}}function nt(t){st(t,!0)}function st(t,e){if(t.f&b){Nt(t)&&Dt(t),t.f^=b;for(var i=t.first;null!==i;){var r=i.next;st(i,!!(!!(i.f&O)||!!(i.f&h))&&e),i=r}if(null!==t.transitions)for(const i of t.transitions)(i.is_global||e)&&i.in()}}let ot=!1,at=[];function lt(){ot=!1;const t=at.slice();at=[],function(t){for(var e=0;e<t.length;e++)t[e]()}(t)}function ct(t){ot||(ot=!0,queueMicrotask(lt)),at.push(t)}function ut(t){throw new Error("lifecycle_outside_component")}let dt=!1,ht=!1,gt=!1;function ft(t){ht=t}function pt(t){gt=t}let vt=[],mt=0,bt=null;function yt(t){bt=t}let Ot=null;function $t(t){Ot=t}let wt=null;let kt=null,It=0,At=null;let _t=0,Ct=!1,Et=null;function St(){return++_t}function Lt(){return!E||null!==Et&&null===Et.l}function Nt(t){var e=t.f;if(e&v)return!0;if(e&m){var i=t.deps,r=!!(e&g);if(null!==i){var n;if(e&f){for(n=0;n<i.length;n++)(i[n].reactions??=[]).push(t);t.f^=f}for(n=0;n<i.length;n++){var s=i[n];if(Nt(s)&&P(s),!r||null===Ot||Ct||s?.reactions?.includes(t)||(s.reactions??=[]).push(t),s.version>t.version)return!0}}r||Vt(t,p)}return!1}function Ft(t){var e=kt,i=It,r=At,n=bt,s=Ct,o=wt,a=Et,l=t.f;kt=null,It=0,At=null,bt=96&l?null:t,Ct=!ht&&!!(l&g),wt=null,Et=t.ctx;try{var c=(0,t.fn)(),u=t.deps;if(null!==kt){var d;if(Mt(t,It),null!==u&&It>0)for(u.length=It+kt.length,d=0;d<kt.length;d++)u[It+d]=kt[d];else t.deps=u=kt;if(!Ct)for(d=It;d<u.length;d++)(u[d].reactions??=[]).push(t)}else null!==u&&It<u.length&&(Mt(t,It),u.length=It);return c}finally{kt=e,It=i,At=r,bt=n,Ct=s,wt=o,Et=a}}function Tt(t,e){let i=e.reactions;if(null!==i){var r=i.indexOf(t);if(-1!==r){var n=i.length-1;0===n?i=e.reactions=null:(i[r]=i[n],i.pop())}}null===i&&2&e.f&&(null===kt||!kt.includes(e))&&(Vt(e,m),384&e.f||(e.f^=f),Mt(e,0))}function Mt(t,e){var i=t.deps;if(null!==i)for(var r=e;r<i.length;r++)Tt(t,i[r])}function Dt(t){var e=t.f;if(!(e&y)){Vt(t,p);var i=Ot;Ot=t;try{16&e?function(t){for(var e=t.first;null!==e;){var i=e.next;e.f&h||Z(e),e=i}}(t):X(t),Q(t),Y(t);var r=Ft(t);t.teardown="function"==typeof r?r:null,t.version=_t}catch(t){!function(t){throw t}(t)}finally{Ot=i}}}function Ut(){mt>1e3&&(mt=0,function(){throw new Error("effect_update_depth_exceeded")}()),mt++}function xt(t){var e=t.length;if(0!==e)for(var i=0;i<e;i++){var r=t[i];12288&r.f||!Nt(r)||(Dt(r),null===r.deps&&null===r.first&&null===r.nodes_start&&(null===r.teardown?tt(r):r.fn=null))}}function Rt(){if(dt=!1,mt>1001)return;const t=vt;vt=[],function(t){var e=t.length;if(0!==e){Ut();var i=ht;ht=!0;try{for(var r=0;r<e;r++){var n=t[r];n.f&p||(n.f^=p);var s=[];jt(n,s),xt(s)}}finally{ht=i}}}(t),dt||(mt=0)}function Pt(t){dt||(dt=!0,queueMicrotask(Rt));for(var e=t;null!==e.parent;){var i=(e=e.parent).f;if(96&i){if(!(i&p))return;e.f^=p}}vt.push(e)}function jt(t,e){var i=t.first,r=[];t:for(;null!==i;){var n=i.f,s=!!(n&h);if(!(s&&!!(n&p)||n&b))if(8&n){s?i.f^=p:Nt(i)&&Dt(i);var o=i.first;if(null!==o){i=o;continue}}else 4&n&&r.push(i);var a=i.next;if(null===a){let e=i.parent;for(;null!==e;){if(t===e)break t;var l=e.next;if(null!==l){i=l;continue t}e=e.parent}}i=a}for(var c=0;c<r.length;c++)o=r[c],e.push(o),jt(o,e)}function Wt(t){var e=t.f,i=!!(2&e);if(i&&e&y){var r=R(t);return j(t),r}if(null!==bt){null!==wt&&wt.includes(t)&&function(){throw new Error("state_unsafe_local_read")}();var n=bt.deps;null===kt&&null!==n&&n[It]===t?It++:null===kt?kt=[t]:kt.push(t),null!==At&&null!==Ot&&Ot.f&p&&!(Ot.f&h)&&At.includes(t)&&(Vt(Ot,v),Pt(Ot))}else if(i&&null===t.deps){var s=t,o=s.parent;null===o||o.deriveds?.includes(s)||(o.deriveds??=[]).push(s)}return i&&Nt(s=t)&&P(s),t.v}function Bt(t){const e=bt;try{return bt=null,t()}finally{bt=e}}const zt=-3585;function Vt(t,e){t.f=t.f&zt|e}function Ht(t,e=!1,i){Et={p:Et,c:null,e:null,m:!1,s:t,x:null,l:null},E&&!e&&(Et.l={s:null,u:null,r1:[],r2:S(!1)})}function qt(t){const e=Et;if(null!==e){void 0!==t&&(e.x=t);const o=e.e;if(null!==o){var i=Ot,r=bt;e.e=null;try{for(var n=0;n<o.length;n++){var s=o[n];$t(s.effect),yt(s.reaction),H(s.fn)}}finally{$t(i),yt(r)}}Et=e.p,e.m=!0}return t||{}}function Gt(t,r=null,n){if("object"!=typeof t||null===t||w in t)return t;const o=c(t);if(o!==a&&o!==l)return t;var u,d=new Map,h=i(t),g=S(0);return h&&d.set("length",S(t.length)),new Proxy(t,{defineProperty(t,e,i){"value"in i&&!1!==i.configurable&&!1!==i.enumerable&&!1!==i.writable||function(){throw new Error("state_descriptors_fixed")}();var r=d.get(e);return void 0===r?(r=S(i.value),d.set(e,r)):F(r,Gt(i.value,u)),!0},deleteProperty(t,i){var r=d.get(i);if(void 0===r)i in t&&d.set(i,S(e));else{if(h&&"string"==typeof i){var n=d.get("length"),s=Number(i);Number.isInteger(s)&&s<n.v&&F(n,s)}F(r,e),Jt(g)}return!0},get(i,r,n){if(r===w)return t;var o=d.get(r),a=r in i;if(void 0!==o||a&&!s(i,r)?.writable||(o=S(Gt(a?i[r]:e,u)),d.set(r,o)),void 0!==o){var l=Wt(o);return l===e?void 0:l}return Reflect.get(i,r,n)},getOwnPropertyDescriptor(t,i){var r=Reflect.getOwnPropertyDescriptor(t,i);if(r&&"value"in r){var n=d.get(i);n&&(r.value=Wt(n))}else if(void 0===r){var s=d.get(i),o=s?.v;if(void 0!==s&&o!==e)return{enumerable:!0,configurable:!0,value:o,writable:!0}}return r},has(t,i){if(i===w)return!0;var r=d.get(i),n=void 0!==r&&r.v!==e||Reflect.has(t,i);if((void 0!==r||null!==Ot&&(!n||s(t,i)?.writable))&&(void 0===r&&(r=S(n?Gt(t[i],u):e),d.set(i,r)),Wt(r)===e))return!1;return n},set(t,i,r,n){var o=d.get(i),a=i in t;if(h&&"length"===i)for(var l=r;l<o.v;l+=1){var c=d.get(l+"");void 0!==c?F(c,e):l in t&&(c=S(e),d.set(l+"",c))}void 0===o?a&&!s(t,i)?.writable||(F(o=S(void 0),Gt(r,u)),d.set(i,o)):(a=o.v!==e,F(o,Gt(r,u)));var f=Reflect.getOwnPropertyDescriptor(t,i);if(f?.set&&f.set.call(n,r),!a){if(h&&"string"==typeof i){var p=d.get("length"),v=Number(i);Number.isInteger(v)&&v>=p.v&&F(p,v+1)}Jt(g)}return!0},ownKeys(t){Wt(g);var i=Reflect.ownKeys(t).filter((t=>{var i=d.get(t);return void 0===i||i.v!==e}));for(var[r,n]of d)n.v===e||r in t||i.push(r);return i},setPrototypeOf(){!function(){throw new Error("state_prototype_fixed")}()}})}function Jt(t,e=1){F(t,t.v+e)}function Kt(t){return null!==t&&"object"==typeof t&&w in t?t[w]:t}var Yt,Qt,Xt;function Zt(t=""){return document.createTextNode(t)}function te(t){return Qt.call(t)}function ee(t){return Xt.call(t)}function ie(t,e){return te(t)}function re(t,e){var i=te(t);return i instanceof Comment&&""===i.data?ee(i):i}function ne(t,e=1,i=!1){let r=t;for(;e--;)r=ee(r);return r}let se=!1;function oe(t,e){if(e){const e=document.body;t.autofocus=!0,ct((()=>{document.activeElement===e&&t.focus()}))}}let ae=!1;function le(t){var e=bt,i=Ot;yt(null),$t(null);try{return t()}finally{yt(e),$t(i)}}function ce(t,e,i,r=i){t.addEventListener(e,(()=>le(i)));const n=t.__on_r;t.__on_r=n?()=>{n(),r()}:r,ae||(ae=!0,document.addEventListener("reset",(t=>{Promise.resolve().then((()=>{if(!t.defaultPrevented)for(const e of t.target.elements)e.__on_r?.()}))}),{capture:!0}))}const ue=new Set,de=new Set;function he(t,e,i,r){function n(t){if(r.capture||fe.call(e,t),!t.cancelBubble)return le((()=>i.call(this,t)))}return t.startsWith("pointer")||t.startsWith("touch")||"wheel"===t?ct((()=>{e.addEventListener(t,n,r)})):e.addEventListener(t,n,r),n}function ge(t){for(var e=0;e<t.length;e++)ue.add(t[e]);for(var i of de)i(t)}function fe(t){var e=this,r=e.ownerDocument,s=t.type,o=t.composedPath?.()||[],a=o[0]||t.target,l=0,c=t.__root;if(c){var u=o.indexOf(c);if(-1!==u&&(e===document||e===window))return void(t.__root=e);var d=o.indexOf(e);if(-1===d)return;u<=d&&(l=u)}if((a=o[l]||t.target)!==e){n(t,"currentTarget",{configurable:!0,get:()=>a||r});var h=bt,g=Ot;yt(null),$t(null);try{for(var f,p=[];null!==a;){var v=a.assignedSlot||a.parentNode||a.host||null;try{var m=a["__"+s];if(void 0!==m&&!a.disabled)if(i(m)){var[b,...y]=m;b.apply(a,[t,...y])}else m.call(a,t)}catch(t){f?p.push(t):f=t}if(t.cancelBubble||v===e||null===v)break;a=v}if(f){for(let t of p)queueMicrotask((()=>{throw t}));throw f}}finally{t.__root=e,delete t.currentTarget,yt(h),$t(g)}}}function pe(t){var e=document.createElement("template");return e.innerHTML=t,e.content}function ve(t,e){var i=Ot;null===i.nodes_start&&(i.nodes_start=t,i.nodes_end=e)}function me(t,e){var i,r=!!(1&e),n=!!(2&e),s=!t.startsWith("<!>");return()=>{void 0===i&&(i=pe(s?t:"<!>"+t),r||(i=te(i)));var e=n?document.importNode(i,!0):i.cloneNode(!0);r?ve(te(e),e.lastChild):ve(e,e);return e}}function be(t=""){var e=Zt(t+"");return ve(e,e),e}function ye(){var t=document.createDocumentFragment(),e=document.createComment(""),i=Zt();return t.append(e,i),ve(e,i),t}function Oe(t,e){null!==t&&t.before(e)}function $e(t){return t.endsWith("capture")&&"gotpointercapture"!==t&&"lostpointercapture"!==t}const we=["beforeinput","click","change","dblclick","contextmenu","focusin","focusout","input","keydown","keyup","mousedown","mousemove","mouseout","mouseover","mouseup","pointerdown","pointermove","pointerout","pointerover","pointerup","touchend","touchmove","touchstart"];function ke(t){return we.includes(t)}const Ie={formnovalidate:"formNoValidate",ismap:"isMap",nomodule:"noModule",playsinline:"playsInline",readonly:"readOnly",srcobject:"srcObject"};function Ae(t){return t=t.toLowerCase(),Ie[t]??t}const _e=["touchstart","touchmove"];function Ce(t){return _e.includes(t)}let Ee=!0;function Se(t){Ee=t}function Le(t,e){var i=null==e?"":"object"==typeof e?e+"":e;i!==(t.__t??=t.nodeValue)&&(t.__t=i,t.nodeValue=null==i?"":i+"")}function Ne(t,e){return function(t,{target:e,anchor:i,props:n={},events:o,context:a,intro:l=!0}){!function(){if(void 0===Yt){Yt=window;var t=Element.prototype,e=Node.prototype;Qt=s(e,"firstChild").get,Xt=s(e,"nextSibling").get,t.__click=void 0,t.__className="",t.__attributes=null,t.__styles=null,t.__e=void 0,Text.prototype.__t=void 0}}();var c=new Set,u=t=>{for(var i=0;i<t.length;i++){var r=t[i];if(!c.has(r)){c.add(r);var n=Ce(r);e.addEventListener(r,fe,{passive:n});var s=Fe.get(r);void 0===s?(document.addEventListener(r,fe,{passive:n}),Fe.set(r,1)):Fe.set(r,s+1)}}};u(r(ue)),de.add(u);var d=void 0,h=function(t){const e=B(64,t,!0);return()=>{Z(e)}}((()=>{var r=i??e.appendChild(Zt());return K((()=>{a&&(Ht({}),Et.c=a);o&&(n.$$events=o),Ee=l,d=t(r,n)||{},Ee=!0,a&&qt()})),()=>{for(var t of c){e.removeEventListener(t,fe);var n=Fe.get(t);0==--n?(document.removeEventListener(t,fe),Fe.delete(t)):Fe.set(t,n)}de.delete(u),Te.delete(d),r!==i&&r.parentNode?.removeChild(r)}}));return Te.set(d,h),d}(t,e)}const Fe=new Map;let Te=new WeakMap;function Me(t){const e=Te.get(t);e&&e()}function De(t,e,i,r=null,n=!1){var s=t,o=null,a=null,l=null;J((()=>{l!==(l=!!e())&&(l?(o?nt(o):o=K((()=>i(s))),a&&et(a,(()=>{a=null}))):(a?nt(a):r&&(a=K((()=>r(s)))),o&&et(o,(()=>{o=null}))))}),n?O:0)}function Ue(t,e){return e}function xe(t,e,n,s,o,a=null){var l=t,c={flags:e,items:new Map,first:null};!(4&e)||(l=t.appendChild(Zt()));var u=null,d=!1;J((()=>{var t=n(),h=i(t)?t:null==t?[]:r(t),g=h.length;d&&0===g||(d=0===g,function(t,e,i,n,s,o,a){var l,c,u,d,h,g,f=!!(8&s),p=!!(3&s),v=t.length,m=e.items,y=e.first,O=y,$=null,w=[],k=[];if(f)for(g=0;g<v;g+=1)d=a(u=t[g],g),void 0!==(h=m.get(d))&&(h.a?.measure(),(c??=new Set).add(h));for(g=0;g<v;g+=1)if(d=a(u=t[g],g),void 0!==(h=m.get(d))){if(p&&Re(h,u,g,s),h.e.f&b&&(nt(h.e),f&&(h.a?.unfix(),(c??=new Set).delete(h))),h!==O){if(void 0!==l&&l.has(h)){if(w.length<k.length){var I,A=k[0];$=A.prev;var _=w[0],C=w[w.length-1];for(I=0;I<w.length;I+=1)je(w[I],A,i);for(I=0;I<k.length;I+=1)l.delete(k[I]);We(e,_.prev,C.next),We(e,$,_),We(e,C,A),O=A,$=C,g-=1,w=[],k=[]}else l.delete(h),je(h,O,i),We(e,h.prev,h.next),We(e,h,null===$?e.first:$.next),We(e,$,h),$=h;continue}for(w=[],k=[];null!==O&&O.k!==d;)!o&&O.e.f&b||(l??=new Set).add(O),k.push(O),O=O.next;if(null===O)continue;h=O}w.push(h),$=h,O=h.next}else{$=Pe(O?O.e.nodes_start:i,e,$,null===$?e.first:$.next,u,d,g,n,s),m.set(d,$),w=[],k=[],O=$.next}if(null!==O||void 0!==l){for(var E=void 0===l?[]:r(l);null!==O;)!o&&O.e.f&b||E.push(O),O=O.next;var S=E.length;if(S>0){var L=4&s&&0===v?i:null;if(f){for(g=0;g<S;g+=1)E[g].a?.measure();for(g=0;g<S;g+=1)E[g].a?.fix()}!function(t,e,i,r){for(var n=[],s=e.length,o=0;o<s;o++)rt(e[o].e,n,!0);var a=s>0&&0===n.length&&null!==i;if(a){var l=i.parentNode;l.textContent="",l.append(i),r.clear(),We(t,e[0].prev,e[s-1].next)}it(n,(()=>{for(var i=0;i<s;i++){var n=e[i];a||(r.delete(n.k),We(t,n.prev,n.next)),Z(n.e,!a)}}))}(e,E,L,m)}}f&&ct((()=>{if(void 0!==c)for(h of c)h.a?.apply()}));Ot.first=e.first&&e.first.e,Ot.last=$&&$.e}(h,c,l,o,e,!!(bt.f&b),s),null!==a&&(0===g?u?nt(u):u=K((()=>a(l))):null!==u&&et(u,(()=>{u=null}))),n())}))}function Re(t,e,i,r){1&r&&T(t.v,e),2&r?T(t.i,i):t.i=i}function Pe(t,e,i,r,n,s,o,a,l){var c=!!(1&l)?!(16&l)?N(n):S(n):n,u=2&l?S(o):o,d={i:u,v:c,k:s,a:null,e:null,prev:i,next:r};try{return d.e=K((()=>a(t,c,u)),se),d.e.prev=i&&i.e,d.e.next=r&&r.e,null===i?e.first=d:(i.next=d,i.e.next=d.e),null!==r&&(r.prev=d,r.e.prev=d.e),d}finally{}}function je(t,e,i){for(var r=t.next?t.next.e.nodes_start:i,n=e?e.e.nodes_start:i,s=t.e.nodes_start;s!==r;){var o=ee(s);n.before(s),s=o}}function We(t,e,i){null===e?t.first=i:(e.next=i,e.e.next=i&&i.e),null!==i&&(i.prev=e,i.e.prev=e&&e.e)}function Be(t,e,i,r,n){var s,o=t,a="";J((()=>{a!==(a=e()??"")&&(void 0!==s&&(Z(s),s=void 0),""!==a&&(s=K((()=>{var t=pe(a+"");ve(te(t),t.lastChild),o.before(t)}))))}))}function ze(t,e,...i){var r,n=t,s=d;J((()=>{s!==(s=e())&&(r&&(Z(r),r=null),r=K((()=>s(n,...i))))}),O)}function Ve(t,e,i){var r,n,s=t;J((()=>{r!==(r=e())&&(n&&(et(n),n=null),r&&(n=K((()=>i(s,r)))))}),O)}function He(t,e,i,r){var n=t.__attributes??={};n[e]!==(n[e]=i)&&("style"===e&&"__styles"in t&&(t.__styles={}),"loading"===e&&(t[I]=i),null==i?t.removeAttribute(e):"string"!=typeof i&&Je(t).includes(e)?t[e]=i:t.setAttribute(e,i))}function qe(t,e,i,r,n=!1,s=!1,o=!1){var a=e||{},l="OPTION"===t.tagName;for(var c in e)c in i||(i[c]=null);var u=Je(t),d=t.__attributes??={},h=[];for(const m in i){let b=i[m];if(l&&"value"===m&&null==b)t.value=t.__value="",a[m]=b;else{var g=a[m];if(b!==g){a[m]=b;var f=m[0]+m[1];if("$$"!==f){if("on"===f){const y={},O="$$"+m;let $=m.slice(2);var p=ke($);if($e($)&&($=$.slice(0,-7),y.capture=!0),!p&&g){if(null!=b)continue;t.removeEventListener($,a[O],y),a[O]=null}if(null!=b)if(p)t[`__${$}`]=b,ge([$]);else{function w(t){a[m].call(this,t)}e?a[O]=he($,t,w,y):h.push([m,b,()=>a[O]=he($,t,w,y)])}}else if("style"===m&&null!=b)t.style.cssText=b+"";else if("autofocus"===m)oe(t,Boolean(b));else if("__value"===m||"value"===m&&null!=b)t.value=t[m]=t.__value=b;else{var v=m;n||(v=Ae(v)),null!=b||s?u.includes(v)&&(s||"string"!=typeof b)?t[v]=b:"function"!=typeof b&&He(t,v,b):(d[m]=null,t.removeAttribute(m))}"style"===m&&"__styles"in t&&(t.__styles={})}}}}return e||ct((()=>{if(t.isConnected)for(const[t,e,i]of h)a[t]===e&&i()})),a}var Ge=new Map;function Je(t){var e,i=Ge.get(t.nodeName);if(i)return i;Ge.set(t.nodeName,i=[]);for(var r=c(t),n=Element.prototype;n!==r;){for(var s in e=o(r))e[s].set&&i.push(s);r=c(r)}return i}function Ke(t,e){var i=t.__className,r=function(t){return null==t?"":t}(e);i!==r&&(null==e?t.removeAttribute("class"):t.className=r,t.__className=r)}function Ye(t,e,i){if(i){if(t.classList.contains(e))return;t.classList.add(e)}else{if(!t.classList.contains(e))return;t.classList.remove(e)}}const Qe={tick:t=>requestAnimationFrame(t),now:()=>performance.now(),tasks:new Set};function Xe(t){Qe.tasks.forEach((e=>{e.c(t)||(Qe.tasks.delete(e),e.f())})),0!==Qe.tasks.size&&Qe.tick(Xe)}function Ze(t,e){t.dispatchEvent(new CustomEvent(e))}function ti(t){if("float"===t)return"cssFloat";if("offset"===t)return"cssOffset";if(t.startsWith("--"))return t;const e=t.split("-");return 1===e.length?e[0]:e[0]+e.slice(1).map((t=>t[0].toUpperCase()+t.slice(1))).join("")}function ei(t){const e={},i=t.split(";");for(const t of i){const[i,r]=t.split(":");if(!i||void 0===r)break;e[ti(i.trim())]=r.trim()}return e}const ii=t=>t;function ri(t,e,i,r,n){var s=1===r;if(u(e)){var o,a=!1;return ct((()=>{if(!a){var l=e({direction:s?"in":"out"});o=ri(t,l,i,r,n)}})),{abort:()=>{a=!0,o?.abort()},deactivate:()=>o.deactivate(),reset:()=>o.reset(),t:()=>o.t()}}if(i?.deactivate(),!e?.duration)return n(),{abort:d,deactivate:d,reset:d,t:()=>r};const{delay:l=0,css:c,tick:h,easing:g=ii}=e;var f=[];if(s&&void 0===i&&(h&&h(0,1),c)){var p=ei(c(0,1));f.push(p,p)}var v=()=>1-r,m=t.animate(f,{duration:l});return m.onfinish=()=>{var s=i?.t()??1-r;i?.abort();var o=r-s,a=e.duration*Math.abs(o),l=[];if(a>0){if(c)for(var u=Math.ceil(a/(1e3/60)),d=0;d<=u;d+=1){var f=s+o*g(d/u),p=c(f,1-f);l.push(ei(p))}v=()=>{var t=m.currentTime;return s+o*g(t/a)},h&&function(t){let e;0===Qe.tasks.size&&Qe.tick(Xe),new Promise((i=>{Qe.tasks.add(e={c:t,f:i})}))}((()=>{if("running"!==m.playState)return!1;var t=v();return h(t,1-t),!0}))}(m=t.animate(l,{duration:a,fill:"forwards"})).onfinish=()=>{v=()=>r,h?.(r,1-r),n()}},{abort:()=>{m&&(m.cancel(),m.effect=null,m.onfinish=d)},deactivate:()=>{n=d},reset:()=>{0===r&&h?.(1,0)},t:()=>v()}}function ni(t,e,i=e){var r=Lt();ce(t,"input",(()=>{var n=oi(t)?ai(t.value):t.value;i(n),r&&n!==(n=e())&&(t.value=n??"")})),q((()=>{var i=e();oi(t)&&i===ai(t.value)||("date"!==t.type||i||t.value)&&i!==t.value&&(t.value=i??"")}))}function si(t,e,i=e){ce(t,"change",(()=>{var e=t.checked;i(e)})),null==e()&&i(!1),q((()=>{var i=e();t.checked=Boolean(i)}))}function oi(t){var e=t.type;return"number"===e||"range"===e}function ai(t){return""===t?null:+t}function li(t,e,i){if(t.multiple)return function(t,e){for(var i of t.options)i.selected=~e.indexOf(ci(i))}(t,e);for(var r of t.options){var n=ci(r);if(s=n,o=e,Object.is(Kt(s),Kt(o)))return void(r.selected=!0)}var s,o;i&&void 0===e||(t.selectedIndex=-1)}function ci(t){return"__value"in t?t.__value:t.value}function ui(t,e){return t===e||t?.[w]===e}function di(t={},e,i,r){return H((()=>{var r,n;return q((()=>{r=n,n=[],Bt((()=>{t!==i(...n)&&(e(t,...n),r&&ui(i(...r),t)&&e(null,...r))}))})),()=>{ct((()=>{n&&ui(i(...n),t)&&e(null,...n)}))}})),t}function hi(t,e){var r=t.$$events?.[e.type],n=i(r)?r.slice():null==r?[]:[r];for(var s of n)s.call(this,e)}function gi(t){var e,i;null===Et&&ut(),E&&null!==Et.l?(e=Et,i=e.l,i.u??={a:[],b:[],m:[]}).m.push(t):z((()=>{const e=Bt(t);if("function"==typeof e)return e}))}function fi(){const t=Et;return null===t&&ut(),(e,r,n)=>{const s=t.s.$$events?.[e];if(s){const o=i(s)?s.slice():[s],a=function(t,e,{bubbles:i=!1,cancelable:r=!1}={}){return new CustomEvent(t,{detail:e,bubbles:i,cancelable:r})}(e,r,n);for(const e of o)e.call(t.x,a);return!a.defaultPrevented}return!0}}let pi=!1;function vi(t,e,i){const r=i[e]??={store:null,source:N(void 0),unsubscribe:d};if(r.store!==t)if(r.unsubscribe(),r.store=t??null,null==t)r.source.v=void 0,r.unsubscribe=d;else{var n=!0;r.unsubscribe=function(t,e,i){if(null==t)return e(void 0),d;const r=Bt((()=>t.subscribe(e,i)));return r.unsubscribe?()=>r.unsubscribe():r}(t,(t=>{n?r.source.v=t:F(r.source,t)})),n=!1}return Wt(r.source)}function mi(){const t={};return function(t){const e=B(8,null,!1);Vt(e,p),e.teardown=t}((()=>{for(var e in t){t[e].unsubscribe()}})),t}const bi={get(t,e){if(!t.exclude.includes(e))return t.props[e]},set:(t,e)=>!1,getOwnPropertyDescriptor(t,e){if(!t.exclude.includes(e))return e in t.props?{enumerable:!0,configurable:!0,value:t.props[e]}:void 0},has:(t,e)=>!t.exclude.includes(e)&&e in t.props,ownKeys:t=>Reflect.ownKeys(t.props).filter((e=>!t.exclude.includes(e)))};function yi(t,e,i){return new Proxy({props:t,exclude:e},bi)}const Oi={get(t,e){let i=t.props.length;for(;i--;){let r=t.props[i];if(u(r)&&(r=r()),"object"==typeof r&&null!==r&&e in r)return r[e]}},set(t,e,i){let r=t.props.length;for(;r--;){let n=t.props[r];u(n)&&(n=n());const o=s(n,e);if(o&&o.set)return o.set(i),!0}return!1},getOwnPropertyDescriptor(t,e){let i=t.props.length;for(;i--;){let r=t.props[i];if(u(r)&&(r=r()),"object"==typeof r&&null!==r&&e in r){const t=s(r,e);return t&&!t.configurable&&(t.configurable=!0),t}}},has(t,e){if(e===w||e===k)return!1;for(let i of t.props)if(u(i)&&(i=i()),null!=i&&e in i)return!0;return!1},ownKeys(t){const e=[];for(let i of t.props){u(i)&&(i=i());for(const t in i)e.includes(t)||e.push(t)}return e}};function $i(...t){return new Proxy({props:t},Oi)}function wi(t){for(var e=Ot,i=Ot;null!==e&&!(96&e.f);)e=e.parent;try{return $t(e),t()}finally{$t(i)}}function ki(t,e,i,r){var n,o=!!(1&i),a=!E||!!(2&i),l=!!(8&i),c=!!(16&i),u=!1;l?[n,u]=function(t){var e=pi;try{return pi=!1,[t(),pi]}finally{pi=e}}((()=>t[e])):n=t[e];var d,h=w in t||k in t,g=s(t,e)?.set??(h&&l&&e in t?i=>t[e]=i:void 0),f=r,p=!0,v=!1,m=()=>(v=!0,p&&(p=!1,f=c?Bt(r):r),f);if(void 0===n&&void 0!==r&&(g&&a&&function(){throw new Error("props_invalid_value")}(),n=m(),g&&g(n)),a)d=()=>{var i=t[e];return void 0===i?m():(p=!0,v=!1,i)};else{var b=wi((()=>(o?D:U)((()=>t[e]))));b.f|=65536,d=()=>{var t=Wt(b);return void 0!==t&&(f=void 0),void 0===t?f:t}}if(!(4&i))return d;if(g){var y=t.$$legacy;return function(t,e){return arguments.length>0?(a&&e&&!y&&!u||g(e?d():t),t):d()}}var O=!1,$=N(n),I=wi((()=>D((()=>{var t=d(),e=Wt($);return O?(O=!1,e):$.v=t}))));return o||(I.equals=C),function(t,e){if(arguments.length>0){const i=e?Wt(I):a&&l?Gt(t):t;return I.equals(i)||(O=!0,F($,i),v&&void 0!==f&&(f=i),Bt((()=>Wt(I)))),t}return Wt(I)}}function Ii(t){V((()=>{t();var e=Ot;e.f&v&&(console.warn("legacy_recursive_reactive_block"),Vt(e,m))}))}function Ai(){const t=Et;return null===t&&ut(),e=>r=>{const n=t.s.$$events?.[e];if(n){const e=i(n)?n.slice():[n];for(const i of e)i.call(t.x,r);return!r.defaultPrevented}return!0}}function _i(t,e,i){if("function"==typeof t?t===e:t.has(e))return arguments.length<3?e:i;throw new TypeError("Private element is not present on this object")}function Ci(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Ei(t,e){return t.get(_i(t,e))}function Si(t,e,i){Ci(t,e),e.set(t,i)}function Li(t,e,i){return t.set(_i(t,e),i),i}function Ni(t,e){Ci(t,e),e.add(t)}function Fi(t,e,i){return(e=function(t){var e=function(t,e){if("object"!=typeof t||!t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var r=i.call(t,e||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:e+""}(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}const Ti=Object.freeze({checkbox:function(t,e=void 0){return"object"==typeof e&&Object.hasOwn(e,"checked")&&Object.hasOwn(e,"unchecked")?t.checked?e.checked:e.unchecked:Object.hasOwn(t,"value")&&void 0!==t.value?!!t.checked&&t.value:t.checked}});let Mi=class t{static get inputValuesExtractors(){return Ti}static extractValueFromInput(e,i=void 0){return Object.hasOwn(t.inputValuesExtractors,e.type)?t.inputValuesExtractors[e.type](e,i):e.value}static onInput(e,i,r=void 0){return function(n){const s=t.extractValueFromInput(n.currentTarget,r);return i({field:e,value:s},n)}}static isEnterEvent(t){return"Enter"===t.key&&!t.altKey&&!t.ctrlKey&&!t.shiftKey}static onlyOnEnter(e){return function(i){return!t.isEnterEvent(i)||e(i)}}static isMobile(){const t=window.matchMedia||window.msMatchMedia;if(t){let e="(pointer:coarse)";if(arguments.length){e=`only screen and (max-width: ${"boolean"==typeof arguments[0]?this.MOBILE_WIDTH_BREAK_POINT:arguments[0]}px)`}return t(e).matches}return!1}static removeBodyScroll(){document.body.classList.add(this.SCROLL_DISABLER_CLASS)}static restoreBodyScroll(){document.body.classList.remove(this.SCROLL_DISABLER_CLASS)}static formatPhone(t,e=this.FILLER){const i=[1,2,2,2,3,3,3,4,4,5,5];let r=t.replace(/\D/g,"");if(r.length>11){let t=r.length-11;for(;t>0;)t--,i.unshift(1)}let n=["","","","",""];Array.from(r).forEach((function(t,e){let r=i[e];n[r-1]=n[r-1]+t}));const s=i.reduce((function(t,e){return void 0===t[e]?t[e]=1:t[e]+=1,t}),{});for(let t in n){let i=s[parseInt(t)+1]-n[t].length;for(;i>0;)n[t]=n[t]+e,i--}return`+${n[0]} (${n[1]}) ${n[2]}-${n[3]}-${n[4]}`}static setMoneySign(t){this.MONEY_SIGN=t}static formatPrice(t){let e=Math.floor(t/100),i=t%100;return`${this.MONEY_SIGN}${e.toString()}.${i.toString()}`}static formatLocaleDatetime(t,e={date:!0,time:!0}){const i=t.toLocaleDateString(window.navigator.language),r=t.toLocaleTimeString(window.navigator.language);return e.date&&e.time?`${i} ${r}`:e.date&&!e.time?i:r}static tryFormatLocaleDateTime(e,i={date:!0,time:!0}){if("string"==typeof e||"number"==typeof e){const r=new Date(e);return t.formatLocaleDatetime(r,i)}return"object"==typeof e?t.formatLocaleDatetime(e,i):""}static formatTimestamp(t,e=0){let i=60*((new Date).getTimezoneOffset()-e)*1e3;return new Date(parseInt(t)-i).toLocaleString(window.navigator.language)}static declOfNum(t,e){let i=(t=Math.abs(t)%100)%10;return t>10&&t<20?e[2]:i>1&&i<5?e[1]:1==i?e[0]:e[2]}static humanizedTimeDiff(t){let e,i=(new Date).getTime(),r=Math.round((i-t)/1e3);if(r<60)return e=this.declOfNum(r,this.TIME.SECONDS),`${r} ${e} назад`;if(r<3600){let t=Math.floor(r/60);return e=this.declOfNum(t,this.TIME.MINUTES),`${t} ${e} назад`}{let t=Math.floor(r/3600);return e=this.declOfNum(t,this.TIME.HOURS),`${t} ${e} назад`}}};Fi(Mi,"CLEAR_MACRO","__CLEAR__"),Fi(Mi,"ERROR_DEFAULT","Что пошло не так."),Fi(Mi,"DEFAULT_REDIRECT_TIMEOUT",3e3),Fi(Mi,"CLASS_OK","is-success"),Fi(Mi,"CLASS_ERR","is-danger"),Fi(Mi,"SCROLL_DISABLER_CLASS","remove-scroll"),Fi(Mi,"FILLER","_"),Fi(Mi,"SCROLL_OPTIONS",{top:0,behavior:"smooth"}),Fi(Mi,"MOBILE_WIDTH_BREAK_POINT",760),Fi(Mi,"MONEY_SIGN","&#8381;"),Fi(Mi,"TIME",{SECONDS:["секунду","секунды","секунд"],MINUTES:["минуту","минуты","минут"],HOURS:["час","часа","часов"]});var Di=me('<div role="button" tabindex="0"><!></div>');function Ui(t,e){Ht(e,!0);let i=ki(e,"id",3,""),r=ki(e,"classes",3,""),n=ki(e,"onclick",3,(()=>!0));var s=Di();s.__click=function(...t){n()?.apply(this,t)};var o=D((()=>Mi.onlyOnEnter(n())));s.__keyup=function(...t){Wt(o)?.apply(this,t)},ze(ie(s),(()=>e.children??d)),G((()=>{He(s,"id",i()),Ke(s,`block ${r()??""}`)})),Oe(t,s),qt()}ge(["click","keyup"]);var xi=me('<div role="button" tabindex="0"><!></div>');function Ri(t,e){Ht(e,!0);let i=ki(e,"id",3,""),r=ki(e,"classes",3,""),n=ki(e,"onclick",3,(()=>!0));var s=xi();s.__click=function(...t){n()?.apply(this,t)};var o=D((()=>Mi.onlyOnEnter(n())));s.__keyup=function(...t){Wt(o)?.apply(this,t)},ze(ie(s),(()=>e.children??d)),G((()=>{He(s,"id",i()),Ke(s,`box ${r()??""} `)})),Oe(t,s),qt()}ge(["click","keyup"]);var Pi=me('<div role="button" tabindex="0"><!></div>');function ji(t,e){Ht(e,!0);let i=ki(e,"id",3,""),r=ki(e,"classes",3,""),n=ki(e,"onclick",3,(()=>!0));var s=Pi();s.__click=function(...t){n()?.apply(this,t)};var o=D((()=>Mi.onlyOnEnter(n())));s.__keyup=function(...t){Wt(o)?.apply(this,t)},ze(ie(s),(()=>e.children??d)),G((()=>{He(s,"id",i()),Ke(s,`content ${r()??""}`)})),Oe(t,s),qt()}ge(["click","keyup"]);var Wi=Object.freeze({__proto__:null,UIBlock:Ui,UIBlockInnerVertical:function(t,e){Ht(e,!0);let i=ki(e,"id",11,""),r=ki(e,"classes",3,""),n=ki(e,"onclick",3,(()=>!0)),s=L("block-inner-vertical");z((()=>{F(s,`block-inner-vertical ${r()}`)})),Ui(t,{get id(){return i()},get classes(){return Wt(s)},get onclick(){return n()},children:(t,i)=>{var r=ye();ze(re(r),(()=>e.children??d)),Oe(t,r)},$$slots:{default:!0}}),qt()},UIBox:Ri,UIContent:ji});const Bi=[];function zi(t,e=d){let i=null;const r=new Set;function n(e){if(_(t,e)&&(t=e,i)){const e=!Bi.length;for(const e of r)e[1](),Bi.push(e,t);if(e){for(let t=0;t<Bi.length;t+=2)Bi[t][0](Bi[t+1]);Bi.length=0}}}function s(e){n(e(t))}return{set:n,update:s,subscribe:function(o,a=d){const l=[o,a];return r.add(l),1===r.size&&(i=e(n,s)||d),o(t),()=>{r.delete(l),0===r.size&&i&&(i(),i=null)}}}}function Vi(t={}){const e={get:function(t,e){return Object.hasOwn(t,e)?Reflect.get(...arguments):e}};return new Proxy(t,e)}const Hi=function(){const{subscribe:t,set:e,update:i}=zi(Vi());return{subscribe:t,update:i,set:function(t){e(Vi(t))},reset:function(){return e(Vi())}}}();function qi(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Gi,Ji={exports:{}};
/*!
	 * EventEmitter v5.2.9 - git.io/ee
	 * Unlicense - http://unlicense.org/
	 * Oliver Caldwell - https://oli.me.uk/
	 * @preserve
	 */var Ki,Yi,Qi,Xi,Zi,tr=(Gi||(Gi=1,Ki=Ji,function(t){function e(){}var i=e.prototype,r=t.EventEmitter;function n(t,e){for(var i=t.length;i--;)if(t[i].listener===e)return i;return-1}function s(t){return function(){return this[t].apply(this,arguments)}}function o(t){return"function"==typeof t||t instanceof RegExp||!(!t||"object"!=typeof t)&&o(t.listener)}i.getListeners=function(t){var e,i,r=this._getEvents();if(t instanceof RegExp)for(i in e={},r)r.hasOwnProperty(i)&&t.test(i)&&(e[i]=r[i]);else e=r[t]||(r[t]=[]);return e},i.flattenListeners=function(t){var e,i=[];for(e=0;e<t.length;e+=1)i.push(t[e].listener);return i},i.getListenersAsObject=function(t){var e,i=this.getListeners(t);return i instanceof Array&&((e={})[t]=i),e||i},i.addListener=function(t,e){if(!o(e))throw new TypeError("listener must be a function");var i,r=this.getListenersAsObject(t),s="object"==typeof e;for(i in r)r.hasOwnProperty(i)&&-1===n(r[i],e)&&r[i].push(s?e:{listener:e,once:!1});return this},i.on=s("addListener"),i.addOnceListener=function(t,e){return this.addListener(t,{listener:e,once:!0})},i.once=s("addOnceListener"),i.defineEvent=function(t){return this.getListeners(t),this},i.defineEvents=function(t){for(var e=0;e<t.length;e+=1)this.defineEvent(t[e]);return this},i.removeListener=function(t,e){var i,r,s=this.getListenersAsObject(t);for(r in s)s.hasOwnProperty(r)&&-1!==(i=n(s[r],e))&&s[r].splice(i,1);return this},i.off=s("removeListener"),i.addListeners=function(t,e){return this.manipulateListeners(!1,t,e)},i.removeListeners=function(t,e){return this.manipulateListeners(!0,t,e)},i.manipulateListeners=function(t,e,i){var r,n,s=t?this.removeListener:this.addListener,o=t?this.removeListeners:this.addListeners;if("object"!=typeof e||e instanceof RegExp)for(r=i.length;r--;)s.call(this,e,i[r]);else for(r in e)e.hasOwnProperty(r)&&(n=e[r])&&("function"==typeof n?s.call(this,r,n):o.call(this,r,n));return this},i.removeEvent=function(t){var e,i=typeof t,r=this._getEvents();if("string"===i)delete r[t];else if(t instanceof RegExp)for(e in r)r.hasOwnProperty(e)&&t.test(e)&&delete r[e];else delete this._events;return this},i.removeAllListeners=s("removeEvent"),i.emitEvent=function(t,e){var i,r,n,s,o=this.getListenersAsObject(t);for(s in o)if(o.hasOwnProperty(s))for(i=o[s].slice(0),n=0;n<i.length;n++)!0===(r=i[n]).once&&this.removeListener(t,r.listener),r.listener.apply(this,e||[])===this._getOnceReturnValue()&&this.removeListener(t,r.listener);return this},i.trigger=s("emitEvent"),i.emit=function(t){var e=Array.prototype.slice.call(arguments,1);return this.emitEvent(t,e)},i.setOnceReturnValue=function(t){return this._onceReturnValue=t,this},i._getOnceReturnValue=function(){return!this.hasOwnProperty("_onceReturnValue")||this._onceReturnValue},i._getEvents=function(){return this._events||(this._events={})},e.noConflict=function(){return t.EventEmitter=r,e},Ki.exports?Ki.exports=e:t.EventEmitter=e}("undefined"!=typeof window?window:Ji.exports||{})),Ji.exports),er=qi(tr);var ir,rr=(Zi||(Zi=1,Xi=function(){if(Qi)return Yi;Qi=1;const t=".",e=":",i="::",r="()";return Yi=class{static get SUB_PATH_START(){return"{"}static get SUB_PATH_END(){return"}"}static get PATH_SPLIT(){return t}static get PATH_START_OBJECT(){return e}static get PATH_START_HELPERS(){return i}static get FUNCTION_MARKER(){return r}static get MAX_DEEP(){return 10}static findNextSubPath(t){let e="",i=!1;for(let r=0;r<t.length;r++)if("{"===t[r])i=!0,e="";else{if("}"===t[r]&&i)return e;e+=t[r]}return i?e:null}static replaceSubPath(t,e,i){let r="{"+e+"}",n=0;for(;t.indexOf(r)>-1&&n<10;)t=t.replace(r,i),n++;return t}static parseSubs(t,e,r){let n,s=this.findNextSubPath(t),o=0;for(;s&&(n=this.getValueByPath(s.indexOf(i)>-1?r:e,s,e,r),t=this.replaceSubPath(t,s,n),o++,!(o>10));)s=this.findNextSubPath(t);return t}static get(t,r,n=void 0){switch(t){case e:return r;case i:return n}return t=this.parseSubs(t,r,n),this.getValueByPath(t.indexOf(i)>-1?n:r,t,r,n)}static set(t,e,r,n=void 0){3===arguments.length&&(n=r,r=void 0);let s,o=this.findNextSubPath(t),a=0;for(;o&&(s=this.getValueByPath(o.indexOf(i)>-1?r:e,o,e,r),t=this.replaceSubPath(t,o,s),!(a>10));)o=this.findNextSubPath(t),a++;this.setValueByPath(e,t,n),e.isRecord&&this.normilizePath(t).length>1&&e.__isActive&&e.trigger("change",e,t,n)}static unset(t,e,i){this.set(t,e,i,null)}static parsePathStep(t,n,s){let o=null;if(0===t.indexOf(i)&&s){if(o=t.replace(i,""),o.indexOf(r)!==o.length-2)return s[o];if(o=o.replace(r,""),Object.prototype.hasOwnProperty.call(s,o))return s[o](n,void 0)}else if(0===t.indexOf(e)&&n){if(o=t.replace(e,""),o.indexOf(r)!==o.length-2)return n[o];if(o=o.replace(r,""),Object.prototype.hasOwnProperty.call(n,o))return n[o](n,void 0)}return t}static parsePath(e,i,r){Array.isArray(e)||(e=e.split(t));for(var n=0;n<e.length;n++)e[n]=this.parsePathStep(e[n],i,r);return e}static normilizePath(i){if(Array.isArray(i))return i;for(;i.indexOf(e)>-1;)i=i.replace(e,"");return i.split(t)}static ifFullSubPath(t,e){if(t.length<e.length)return!1;for(let i=0;i<e.length;i++)if(e[i]!==t[i])return!1;return!0}static getValueByPath(t,e,i,n){let s=(e=this.normilizePath(e)).shift(),o=s.indexOf(r)>-1;if(o&&(s=s.replace(r,"")),("object"==typeof t||"function"==typeof t)&&null!=t&&void 0!==t[s]&&null!==t[s]){let r=o?t[s]({item:i,helpers:n}):t[s];return e.length>0?this.getValueByPath(r,e,i,n):r}}static setValueByPath(t,e,i){let r=(e=this.normilizePath(e)).shift();e.length>0?(Object.prototype.hasOwnProperty.call(t,r)||(t[r]={}),this.setValueByPath(t[r],e,i)):t[r]=i}static join(){return Array.prototype.slice.call(arguments).join(t)}},Yi}()),Xi),nr=qi(rr);let sr=function(t){return function(t){return!!t&&"object"==typeof t}(t)&&!function(t){var e=Object.prototype.toString.call(t);return"[object RegExp]"===e||"[object Date]"===e||function(t){return t.$$typeof===or}(t)}(t)};var or="function"==typeof Symbol&&Symbol.for?Symbol.for("react.element"):60103;function ar(t,e){return(!e||!1!==e.clone)&&sr(t)?cr((i=t,Array.isArray(i)?[]:{}),t,e):t;var i}function lr(t,e,i){return t.concat(e).map((function(t){return ar(t,i)}))}function cr(t,e,i){const r=Array.isArray(e);if(r===Array.isArray(t)){if(r){return((i||{arrayMerge:lr}).arrayMerge||lr)(t,e,i)}return function(t,e,i){const r={};return sr(t)&&Object.keys(t).forEach((function(e){r[e]=ar(t[e],i)})),Object.keys(e).forEach((function(n){sr(e[n])&&t[n]?r[n]=cr(t[n],e[n],i):r[n]=ar(e[n],i)})),r}(t,e,i)}return ar(e,i)}cr.all=function(t,e){if(!Array.isArray(t))throw new Error("first argument should be an array");return t.reduce((function(t,i){return cr(t,i,e)}),{})};let ur=class t{static isError(t){return t instanceof Error||Object.hasOwn(t,"status")&&"error"===t.status}static mute(){t.ENV_TYPE="production"}static pad(t){return t<10?"0"+t:t}static getTodayDate(){let t=new Date;return new Date(t.getFullYear(),t.getMonth(),t.getDate()).getTime()}static objHas(t,e){return Object.hasOwn(t,e)}static copyObj(t){return JSON.parse(JSON.stringify(t))}static partCopyObj(t,e){let i=Object.keys(t).reduce((function(i,r){return e.includes(r)&&(i[r]=t[r]),i}),{});return JSON.parse(JSON.stringify(i))}static compareTwoArrays(t,e){return t.length===e.length&&t.every((function(t,i){return t===e[i]}))}static isFunc(t){return"function"==typeof t}static isAsync(t){return"AsyncFunction"===t.constructor.name}static async executeObjectFunction(e,i,r){if(e){const n=nr.get(":"+i,e);if(t.isFunc(n))return t.isAsync(n)?await n(...r):n(...r)}}static mapBind(t,e,i){i.forEach((function(i){"function"==typeof t[i]&&(e[i]=t[i].bind(t))}))}static isClass(t){return/^\s*class/.test(t.toString())}static detectType(e){return"function"!=typeof e?typeof e:t.isClass(e)?"class":"function"}static isArray(t){return"object"==typeof t&&t instanceof Array}static localIsoDate(e){return(e=e||new Date).getFullYear()+"-"+t.pad(e.getMonth()+1)+"-"+t.pad(e.getDate())+"T"+t.pad(e.getHours())+":"+t.pad(e.getMinutes())+":"+t.pad(e.getSeconds())}static getToday(){let e=new Date;return e.getFullYear()+"-"+t.pad(e.getMonth()+1)+"-"+t.pad(e.getDate())}static backlogAdd(e,i="log"){!0===t.get("backlog")&&t.backlog.push({msg:e,type:i})}static dumpBacklog(){for(;t.backlog.length;){let e=t.backlog.shift();window[t.LOG][e.type](...e.msg)}}static logMsg(){let e=t.localIsoDate();window[t.LOG].log(`[${e}]: `,...arguments),t.backlogAdd([`[${e}]: `,...arguments],"log")}static log(){t.logMsg(...arguments)}static createLogger(e){return{log:t.genLogMsg(e),error:t.genLogError(e),debug:t.genLogDebug(e),report:t.report}}static genLogMsg(e){return function(){let i=t.localIsoDate();window[t.LOG].log(`[${i}]: ${e}::`,...arguments),t.backlogAdd([`[${i}]: ${e}::`,...arguments],"log")}}static isDev(){return t.ENV_TYPE===t.DEV_ENV}static debug(){return t.isDev()?t.logMsg(...arguments):t.NOOP}static genLogDebug(e){return t.isDev()?t.genLogMsg(e):t.NOOP}static error(){t.logError(...arguments)}static logError(){let e=t.localIsoDate();window[t.LOG].error(`[${e}]: `,...arguments),t.backlogAdd([`[${e}]: `,...arguments],"error")}static genLogError(e){return function(){let i=t.localIsoDate();window[t.LOG].error(`[${i}]: ${e}::`,...arguments),t.backlogAdd([`[${i}]: ${e}::`,...arguments],"error")}}static report(e){if(t.getApp()){let i=t.getApp().getService("nsErrorReporter");i&&i.report(e).catch(t.error)}else t.get("production")||t.error(...arguments)}static trace(){t.get("production")||t.trace(...arguments)}static trimBackslash(t){return 0===t.indexOf("/")&&(t=t.substring(1)),"/"===t[t.length-1]&&(t=t.substring(0,t.length-1)),t}static buildURL({prefix:e,module:i,model:r,id:n,action:s}={prefix:"",module:"",model:"",id:"",action:""}){let o=["/"];return e&&o.push(encodeURIComponent(t.trimBackslash(e))),i&&o.push(encodeURIComponent(t.trimBackslash(i))),r&&o.push(encodeURIComponent(t.trimBackslash(r))),n&&o.push(encodeURIComponent(t.trimBackslash(n))),s&&o.push(encodeURIComponent(t.trimBackslash(s))),o=o.filter((function(t){return""!==t})),o.join("/").replace(/\/\//g,"/")}static capitalizeFirstLetter(t){return t.charAt(0).toUpperCase()+t.slice(1)}static lowerFirstLetter(t){return t.charAt(0).toLowerCase()+t.slice(1)}static strLengthCap(t,e=50,i="..."){return"string"==typeof t&&t.length>e?t.substr(0,e)+i:t}static escapeHtml(t){return t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")}static startApp(t){document.addEventListener("DOMContentLoaded",t)}static getApp(){return t.get("app")}static extendAppConfig(e,i){return t.deepMerge(e,i)}static absorbModule(){let e,i,r={};1==arguments.length?(r={...arguments[0]},Object.hasOwnProperty.call(arguments[0],"defaultConf")&&(e=arguments[0].defaultConf,delete r.defaultConf),Object.hasOwnProperty.call(arguments[0],"mod")&&(i=arguments[0].mod,delete r.mod)):(t.log("WARNING: absorbModule format obsoleted, use object {defaultConf, mod, services, uis, wsc, etc}"),e=arguments[0],i=arguments[1],arguments.length>2&&(r.services=arguments[2]),arguments.length>3&&(r.uis=arguments[3]),arguments.length>4&&(r.wcs=arguments[4]));for(let n in i)"manifest"!==n?"function"==typeof t.get(`absorb.${n}`)?(Object.hasOwn(r,n)||(r[n]={},t.log(`WARNING: no accamulator object provided for '${n}' collection`)),t.get(`absorb.${n}`)(r[n],i[n])):0===n.indexOf("nc")?(Object.hasOwn(e,"controllers")||(e.controllers={}),e.controllers[n]=i[n]):(Object.hasOwn(window,"notEnv")||(window.notEnv={}),window.notEnv[n]=i[n]):e=t.extendAppConfig(e,i.manifest);return e}static defineIfNotExists(t,e,i){Object.hasOwn(t,e)||(t[e]=i)}static register(e,i){t.registry[e]=i}static get(e){return Object.hasOwn(t.registry,e)?t.registry[e]:null}static moveItem(t,e,i){const r=function(e){return e<t.length&&e>-1};r(i)&&r(e)&&t.splice(i,0,t.splice(e,1)[0])}static stripProxy(e){if(null!=e&&e.isProxy){e=Array.isArray(e)?Array.from(e):Object.assign({},e);for(let i in e)Object.hasOwn(e,i)&&(e[i]=t.stripProxy(e[i]))}return e}static pipe(t,e){let i;for(let r of e)i=r(i||t);return i}static getAPI(e){return t.getManager()?.getAPI(e)??null}static setManager(e){t.MANAGER=e}static getManager(){return t.MANAGER}static getJSON(t){return fetch(t).then((function(t){return t.json()}))}static wait(t){return new Promise((function(e){setTimeout(e,1e3*t)}))}static registerWidgetEvents(e){t.getApp()&&Object.keys(e).forEach((function(i){t.getApp().on(i,e[i])}))}static navigate(e){t.getApp()&&t.getApp().getWorking("router").navigate(e)}static select(e,i,r){return e&&"object"==typeof e&&t.objHas(e,i)&&void 0!==e[i]&&null!==e[i]?e[i]:r}};function dr(t,e,i){Object.hasOwn(t,e)||(t[e]={connection:{},router:{routes:{}},messenger:{}});let r=t[e];if(Object.hasOwn(i,"router")&&Object.hasOwn(i.router,"routes"))for(let t in i.router.routes)Object.hasOwn(r.router.routes,t)||(r.router.routes[t]={}),Object.assign(r.router.routes[t],{...i.router.routes[t]});Object.hasOwn(i,"messenger")&&Object.assign(r.messenger,{...i.messenger}),Object.hasOwn(i,"connection")&&Object.assign(r.connection,{...i.connection});for(let t of["name","getToken","logger","identity","credentials"])Object.hasOwn(i,t)&&(r[t]=i[t])}ir=ur,Fi(ur,"MANAGER",null),Fi(ur,"LOG","console"),Fi(ur,"deepMerge",cr),Fi(ur,"TZ_OFFSET",(new Date).getTimezoneOffset()/60*-1),Fi(ur,"DEV_ENV","production"),Fi(ur,"ENV_TYPE",window.NOT_ENV_TYPE??ir.DEV_ENV),Fi(ur,"NOOP",(function(){})),Fi(ur,"backlog",[]),Fi(ur,"registry",{}),ur.register("absorb.wsc",(function(t,e){if(t)for(let i in e)dr(t,i,e[i])})),ur.register("absorb.services",(function(t,e){if(t)for(let i in e)Object.hasOwn(t,i)&&ur.logError(`services property duplication ${i}`),t[i]=e[i]})),ur.register("absorb.uis",(function(t,e){if(t)for(let i in e)Object.hasOwn(t,i)&&ur.logError(`uis property duplication ${i}`),t[i]=e[i]})),ur.register("absorb.uis",(function(t,e){if(t)for(let i in e)Object.hasOwn(t,i)&&ur.logError(`fields property duplication ${i}`),t[i]=e[i]}));var hr=new class extends er{constructor(){super(),this.dict={},this.helpers={};let t=this.restoreFromStorage();t&&this.set(t)}format(t,e){return nr.parseSubs(t,e,this.helpers)}say(t,e=!1){try{if(ur.objHas(this.dict,t)){let i=this.dict[t],r="";return r=e?this.format(i,e):i,r}throw new Error(`Unknown locale phrase: ${t}`)}catch(e){return ur.debug(e),t}}set(t){Hi.set(t),this.saveToStorage(t),this.dict=Object.assign({},{...t}),this.emit("change")}saveToStorage(t){if(window.localStorage)try{return window.localStorage.setItem("dictionary",JSON.stringify(t))}catch(t){return ur.debug(t),!1}return!1}restoreFromStorage(){if(window.localStorage)try{let t=window.localStorage.getItem("dictionary");if(t){return JSON.parse(t)}return!1}catch(t){return ur.debug(t),!1}return!1}vocabulary(){return Hi}};const gr=hr.say.bind(hr);var fr=me('<span role="button" tabindex="0"> </span>');function pr(t,e){Ht(e,!0);const i=mi();let r=L(!1),n=ki(e,"id",3,"tagId"),s=ki(e,"title",15,"tag"),o=ki(e,"color",3,"info"),a=ki(e,"size",3,"normal"),l=ki(e,"padding",3,"normal"),c=ki(e,"bold",3,!1),u=ki(e,"right",3,!1),d=ki(e,"left",3,!1),h=ki(e,"top",3,!1),g=ki(e,"bottom",3,!1),f=ki(e,"classes",3,""),p=ki(e,"events",31,(()=>Gt({}))),v=ki(e,"register",19,(()=>ur.registerWidgetEvents.bind(ur))),m=ki(e,"onUpdate",3,(t=>{Object.hasOwn(t,"title")&&s(t.title)})),b=ki(e,"action",3,(()=>!0));function y(){return`tag-${n()}:update`}gi((()=>{Object.hasOwn(p(),y())||p(p()[y()]=m(),!0),v()(p()),F(r,Gt(u()||d()||h()||g()))}));var O=ye();De(re(O),s,(t=>{var e=fr();e.__keydown=function(...t){(b()?b():void 0)?.apply(this,t)},e.__click=function(...t){(b()?b():void 0)?.apply(this,t)};var p=ie(e);G((()=>{He(e,"id",`tag-${n()??""}`),Ke(e,`\n  tag\n  ${(c()?"has-text-weight-bold":"")??""}\n  ${("normal"!==l()?`is-padded-${l()}`:"")??""}\n  is-${a()??""}\n  is-${o()??""}\n  ${(Wt(r)?"is-sided":"")??""}\n  ${(u()?"is-sided-right":"")??""}\n  ${(d()?"is-sided-left":"")??""}\n  ${(h()?"is-sided-top":"")??""}\n  ${(g()?"is-sided-bottom":"")??""}\n  ${f()??""}`),Le(p,vi(Hi,"$LOCALE",i)[s()])})),Oe(t,e)})),Oe(t,O),qt()}function vr(t,e){let i=ki(e,"LC_TRUE",3,"not-node:booleans_true"),r=ki(e,"LC_FALSE",3,"not-node:booleans_false"),n=ki(e,"inverted",3,!1);const s={title:r(),color:n()?"success":"danger"},o={title:i(),color:n()?"danger":"success"};let a=D((()=>e.value?o:s));pr(t,$i((()=>Wt(a))))}ge(["keydown","click"]);var mr=me('<span class="label"> <!></span>');function br(t,e){Ht(e,!0);let i=ki(e,"values",19,(()=>[])),r=ki(e,"inverted",3,!1),n=ki(e,"componentConstructor",3,vr),s=L(Gt([]));gi((()=>{"boolean"==typeof i()?F(s,Gt([{value:i()}])):Array.isArray(i())&&(i().every((t=>"boolean"==typeof t))?F(s,Gt(i().map((t=>({value:t}))))):F(s,Gt([...i()])))}));var o=ye();De(re(o),(()=>Wt(s).length),(t=>{var e=ye();xe(re(e),17,(()=>Wt(s)),Ue,((t,e)=>{var i=ye();const s=D(n);var o=re(i),a=D((()=>r()||Wt(e).inverted));Ve(o,(()=>Wt(s)),((t,i)=>{i(t,$i((()=>Wt(e)),{get inverted(){return Wt(a)}}))})),Oe(t,i)})),Oe(t,e)})),Oe(t,o),qt()}function yr(t,e){e(!e())}async function Or(t,e,i,r,n,s,o){try{await navigator.clipboard.writeText(e()),i()&&(F(r,!0),Wt(n).dataset.tooltip=s(),setTimeout((()=>{F(r,!1),Wt(n).removeAttribute("data-tooltip")}),o()))}catch(t){console.error("Failed to copy: ",t)}}var $r=me('<span role="button" tabindex="0"><i></i></span>'),wr=me('<span class="icon is-small is-right is-clickable is-vertical-middle" role="button" tabindex="0"><i></i></span>'),kr=me("<span> </span> <!> <!>",1);ge(["click","keydown"]);var Ir=me("<span> </span>");function Ar(t,e){Ht(e,!0);let i=L(!1),r=ki(e,"id",3,"tagId"),n=ki(e,"state",15,"light"),s=ki(e,"size",3,"normal"),o=ki(e,"labels",19,(()=>({black:"black",dark:"dark",light:"light",white:"white",primary:"primary",link:"link",info:"info",success:"success",warning:"warning",danger:"danger"}))),a=ki(e,"classes",3,"mx-1"),l=ki(e,"padding",3,"normal"),c=ki(e,"bold",3,!1),u=ki(e,"right",3,!1),d=ki(e,"left",3,!1),h=ki(e,"top",3,!1),g=ki(e,"bottom",3,!1),f=ki(e,"events",31,(()=>Gt({}))),p=ki(e,"register",19,(()=>ur.registerWidgetEvents.bind(ur))),v=ki(e,"onUpdate",3,(t=>{Object.hasOwn(t,"state")&&n(t.state)}));function m(){return`indicator-${r()}:update`}gi((()=>{Object.hasOwn(f(),m())||f(f()[m()]=v(),!0),p()(f())})),run((()=>{F(i,Gt(u()||d()||h()||g()))}));var b=Ir(),y=ie(b);G((()=>{Ke(b,`tag\nis-${s()??""}\n${(c()?"has-text-weight-bold":"")??""}\n${("normal"!==l()?`is-padded-${l()}`:"")??""}\n${(Wt(i)?"is-sided":"")??""}\n${(u()?"is-sided-right":"")??""}\n${(d()?"is-sided-left":"")??""}\n${(h()?"is-sided-top":"")??""}\n${(g()?"is-sided-bottom":"")??""}\n  is-${n()??""} ${a()??""}\n  `),Le(y,o()[n()])})),Oe(t,b),qt()}var _r=me('<div><span class="title"> </span></div>');function Cr(t,e){Ht(e,!0);const i=mi();let r=ki(e,"loading",3,!1),n=ki(e,"size",3,"container"),s=ki(e,"title",3,"Waiting...");var o=ye();De(re(o),(()=>"hidden"!==n()),(t=>{var e=_r(),o=ie(e),a=ie(o);G((()=>{Ke(e,`${("page"===n()?"pageloader":"containerloader")??""} ${(r()?"is-active":"")??""}`),Le(a,vi(Hi,"$LOCALE",i)[s()])})),Oe(t,e)})),Oe(t,o),qt()}var Er=me("<option> </option>");function Sr(t,e){Ht(e,!0);const i=mi();var r=Er(),n={},s=ie(r);G((()=>{n!==(n=e.value)&&(r.value=null==(r.__value=e.value)?"":e.value),r.selected=e.selected,Le(s,vi(Hi,"$LOCALE",i)[e.title])})),Oe(t,r),qt()}var Lr=me('<span class="mr-2"> </span>'),Nr=me('<span class="mr-2"> </span>'),Fr=me("<div><select><!><!></select></div>");function Tr(t,e){Ht(e,!0);const i=mi(),r=()=>vi(Hi,"$LOCALE",i);let n,s=ki(e,"value",15,""),o=ki(e,"variants",19,(()=>[])),a=ki(e,"placeholder",3,""),l=ki(e,"emptyValueTitle",3,""),c=ki(e,"fieldname",3,"select"),u=ki(e,"required",3,!0),d=ki(e,"readonly",3,!1),h=ki(e,"multiple",3,!1),g=ki(e,"size",3,8),f=ki(e,"valid",3,!0),p=ki(e,"class",3,""),v=ki(e,"onchange",3,(()=>!0)),m=yi(e,["$$slots","$$events","$$legacy","value","variants","placeholder","emptyValueTitle","fieldname","required","readonly","multiple","size","valid","class","onchange"]),b=L(Gt([]));function y(t){return Array.isArray(s())&&h()?s().indexOf(t.id)>-1:!!s()&&s()==t.id}function O(t){let e={field:c(),value:t.currentTarget.value};return n===e.value||Array.isArray(e.value)&&ur.compareTwoArrays(n,e.value)||(h()?(s(Array.from(t.target.selectedOptions).map((t=>t.value))),s().indexOf(Mi.CLEAR_MACRO)>-1&&s([]),e.value=s()):e.value===Mi.CLEAR_MACRO?s(""):s(e.value),v()(e)),!0}function $(t){let e={field:c(),value:t.currentTarget.value};return h()?(s(Array.from(t.target.selectedOptions).map((t=>t.value))),s().indexOf(Mi.CLEAR_MACRO)>-1&&s([]),e.value=s()):e.value===Mi.CLEAR_MACRO?s(""):s(e.value),n=e.value,v()(e),!0}let w=D((()=>h()?" is-multiple ":""));z((()=>{s(),F(b,Gt(Array.isArray(o())?o().filter(y):[]))}));let k=D((()=>!f()));var I=ye();De(re(I),d,(t=>{var e=ye();De(re(e),s,(t=>{var e=ye();xe(re(e),17,(()=>Wt(b)),Ue,((t,e)=>{var i=Lr(),n=ie(i);G((()=>Le(n,r()[Wt(e).title]))),Oe(t,i)})),Oe(t,e)}),(t=>{var e=Nr(),i=ie(e);G((()=>Le(i,r()[l()]))),Oe(t,e)})),Oe(t,e)}),(t=>{var e=Fr(),i=ie(e);let r;!function(t,e){let i=!0;H((()=>{e&&li(t,Bt(e),i),i=!1;var r=new MutationObserver((()=>{var e=t.__value;li(t,e)}));return r.observe(t,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),()=>{r.disconnect()}}))}(i,(()=>r.value));var n=ie(i);De(n,(()=>a().length>0),(t=>{var e=ye();De(re(e),s,(t=>{Sr(t,{get value(){return Mi.CLEAR_MACRO},get title(){return a()}})}),(t=>{Sr(t,{get value(){return Mi.CLEAR_MACRO},selected:"selected",get title(){return a()}})})),Oe(t,e)})),xe(ne(n),17,o,Ue,((t,e)=>{var i=ye();De(re(i),h,(t=>{var i=D((()=>s()&&s().indexOf(Wt(e).id)>-1));Sr(t,{get value(){return Wt(e).id},get selected(){return Wt(i)},get title(){return Wt(e).title}})}),(t=>{var i=D((()=>s()==Wt(e).id));Sr(t,{get value(){return Wt(e).id},get selected(){return Wt(i)},get title(){return Wt(e).title}})})),Oe(t,i)})),G((()=>{Ke(e,`select ${p()??""} ${Wt(w)??""}`),r=qe(i,r,{id:`form-field-select-${c()??""}`,name:c(),onblur:O,oninput:$,readonly:d(),required:u(),multiple:h(),invalid:Wt(k),size:!!h()&&g(),...m}),"value"in r&&li(i,r.value)})),Oe(t,e)})),Oe(t,I),qt()}function Mr(t,e,i,r){return t.stopPropagation(),e()&&e()({event:t,value:i.value}),r()&&r()(t,i.value)}var Dr=me('<span class="icon"><i></i></span>'),Ur=me("<span> </span>"),xr=me('<span class="icon"><i></i></span>'),Rr=me("<!> <!> <!>",1),Pr=me("<button><!></button>");function jr(t,e){Ht(e,!0);const i=mi(),r=()=>vi(Hi,"$LOCALE",i);let n=ki(e,"title",3,""),s=ki(e,"light",3,!1),o=ki(e,"loading",3,!1),a=ki(e,"raised",3,!1),l=ki(e,"outlined",3,!1),c=ki(e,"inverted",3,!1),u=ki(e,"rounded",3,!1),d=ki(e,"disabled",3,!1),h=ki(e,"state",3,""),g=ki(e,"type",3,""),f=ki(e,"color",3,""),p=ki(e,"size",3,""),v=ki(e,"classes",3,""),m=ki(e,"icon",3,!1),b=ki(e,"iconSide",3,"right"),y=ki(e,"onclick",3,(()=>!0)),O=ki(e,"action",3,(()=>!0));var $=Pr();$.__click=[Mr,y,e,O],De(ie($),(()=>e.children),(t=>{var i=ye();ze(re(i),(()=>e.children)),Oe(t,i)}),(t=>{var e=ye();De(re(e),m,(t=>{var e=Rr(),i=re(e);De(i,(()=>"left"===b()),(t=>{var e=Dr(),i=ie(e);G((()=>Ke(i,`fas fa-${m()??""} ${(p()?`is-${p()}`:"")??""}`))),Oe(t,e)}));var s=ne(i,2);De(s,n,(t=>{var e=Ur(),i=ie(e);G((()=>Le(i,r()[n()]))),Oe(t,e)})),De(ne(s,2),(()=>"right"===b()),(t=>{var e=xr(),i=ie(e);G((()=>Ke(i,`fas fa-${m()??""} ${(p()?`is-${p()}`:"")??""}`))),Oe(t,e)})),Oe(t,e)}),(t=>{var e=be();G((()=>Le(e,r()[n()]))),Oe(t,e)}),!0),Oe(t,e)})),G((()=>{$.disabled=d(),He($,"type",g()?g():""),Ke($,`\n  button\n  ${v()??""}\n  ${(h()?`is-${h()}`:"")??""}\n  ${(c()?"is-inverted":"")??""}\n  ${(l()?"is-outlined":"")??""}\n  ${(a()?"is-raised":"")??""}\n  ${(u()?"is-rounded":"")??""}\n  ${(s()?"is-light":"")??""}\n  ${(o()?"is-loading":"")??""}\n  ${(f()?`is-${f()}`:"")??""}\n  ${(p()?`is-${p()}`:"")??""}\n  `)})),Oe(t,$),qt()}ge(["click"]);var Wr=me("<div></div>");function Br(t,e){let i=ki(e,"values",19,(()=>[])),r=ki(e,"centered",3,!1),n=ki(e,"right",3,!1),s=ki(e,"classes",3,""),o=ki(e,"buttonComponent",3,jr),a=ki(e,"action",3,(()=>!0)),l=ki(e,"onclick",3,(()=>!0));var c=Wr();xe(c,21,i,(t=>t.id),((t,e)=>{var i=ye();const r=D(o);Ve(re(i),(()=>Wt(r)),((t,i)=>{i(t,$i({get action(){return a()},get onclick(){return l()}},(()=>Wt(e)),{get value(){return Wt(e).value},set value(t){Wt(e).value=t}}))})),Oe(t,i)})),G((()=>Ke(c,`buttons has-addons ${(r()?"is-centered":"")??""} ${(n()?"is-right":"")??""} ${s()??""}`))),Oe(t,c)}var zr=me('<div><div class="column"><!></div> <div class="column"><!></div> <div class="column"><!></div></div>');function Vr(t,e){let i=ki(e,"classes",3,""),r=ki(e,"left",19,(()=>[])),n=ki(e,"center",19,(()=>[])),s=ki(e,"right",19,(()=>[]));var o=zr(),a=ie(o);Br(ie(a),{get values(){return r()}});var l=ne(a,2);Br(ie(l),{get values(){return n()},centered:!0}),Br(ie(ne(l,2)),{get values(){return s()},right:!0}),G((()=>Ke(o,`columns ${i()??""}`))),Oe(t,o)}function Hr(t,e){Ht(e,!0);let i=ki(e,"title",3,""),r=ki(e,"light",3,!1),n=ki(e,"loading",3,!1),s=ki(e,"raised",3,!1),o=ki(e,"outlined",3,!1),a=ki(e,"inverted",3,!1),l=ki(e,"rounded",3,!1),c=ki(e,"disabled",3,!1),u=ki(e,"state",3,""),d=ki(e,"type",3,""),h=ki(e,"color",3,""),g=ki(e,"size",3,""),f=ki(e,"classes",3,""),p=ki(e,"icon",3,!1),v=ki(e,"iconSide",3,"right"),m=ki(e,"uiOff",3,(()=>({color:""}))),b=ki(e,"uiOn",3,(()=>({color:"success"}))),y=ki(e,"action",3,(()=>!w())),O=ki(e,"onclick",3,(()=>{})),$=ki(e,"onchange",3,(()=>{})),w=ki(e,"selected",15,!1);let k=L(void 0);V((()=>{Wt(k)&&(w()?Wt(k).$set(b()()):Wt(k).$set(m()()))})),di(jr(t,{get title(){return i()},get light(){return r()},get loading(){return n()},get raised(){return s()},get outlined(){return o()},get inverted(){return a()},get rounded(){return l()},get disabled(){return c()},get state(){return u()},get type(){return d()},get color(){return h()},get size(){return g()},get classes(){return f()},get icon(){return p()},get iconSide(){return v()},get value(){return e.value},onclick:function(t){w(y()(t,e.value,w())),O()({value:e.value,selected:w()}),$()({value:e.value,selected:w()})}}),(t=>F(k,Gt(t))),(()=>Wt(k))),qt()}var qr=me("<div></div>");function Gr(t,e){function i(){return s().filter((t=>t.selected)).length}function r(t,e){let i=d()-t;if(i)for(let t in s())if(t!==e&&!s()[t].selected&&(s(s()[t].selected=!0,!0),i-=1,!i))break}function n(t,e){let i=t-h();if(i)for(let t in s())if(t!==e&&s()[t].selected&&(s(s()[t].selected=!1,!0),i-=1,!i))break}Ht(e,!0),gi((()=>{d()&&r(0,-1)}));let s=ki(e,"values",31,(()=>Gt([]))),o=ki(e,"centered",3,!1),a=ki(e,"right",3,!1),l=ki(e,"classes",3,""),c=ki(e,"buttonComponent",3,Hr),u=ki(e,"action",3,((t,e,o)=>{let a=!o;const l=s().indexOf((t=>t.value===e)),c=i()+(a?1:-1);return d()&&c<d()&&(r(c,l),s(s())),h()&&h()<c&&(n(c,l),s(s())),a})),d=ki(e,"min",3,0),h=ki(e,"max",3,100);var g=qr();return xe(g,21,s,(t=>t.id),((t,e)=>{var i=ye();const r=D(c);Ve(re(i),(()=>Wt(r)),((t,i)=>{i(t,$i({get action(){return u()}},(()=>Wt(e)),{get value(){return Wt(e).value},set value(t){Wt(e).value=t},get selected(){return Wt(e).selected},set selected(t){Wt(e).selected=t},onclick:onclick,onchange:onchange}))})),Oe(t,i)})),G((()=>Ke(g,`buttons has-addons ${(o()?"is-centered":"")??""} ${(a()?"is-right":"")??""} ${l()??""}`))),Oe(t,g),qt({selectAll:function(){s().forEach((t=>{t.selected=!0})),s(s())},deselectAll:function(){s().forEach((t=>{t.selected=!1})),s(s())},addToHistory:function(t){},countSelected:i,toggleFirstSuited:function(t){const e=s().findIndex((e=>e.selected=!t));e>-1&&s(s()[e].selected=t,!0)},selectUpToMin:r,deselectDownToMin:n})}var Jr=Object.freeze({__proto__:null,UIButton:jr,UIButtonSwitch:Hr,UIButtons:Br,UIButtonsRow:Vr,UIButtonsSwitchers:Gr});const Kr="ok",Yr={SHORT:500,NORMAL:1500,LONG:5e3},Qr=1500;var Xr=me('<div class="field has-addons"><!></div> <div class="control"><!></div>',1);var Zr=me('<div class="control"><!></div>');var tn=me("<progress> </progress>");var en=me("<div><!> <!> <!></div>");var rn=me("<!> <!>",1);function nn(t,e){Ht(e,!0);const i=mi(),r=()=>vi(Hi,"$LOCALE",i);let n=ki(e,"id",19,(()=>`title-${Math.random()}`)),s=ki(e,"title",3,""),o=ki(e,"size",3,1),a=ki(e,"spaced",3,!1),l=ki(e,"align",3,"left");let c=D((()=>e.subsize?e.subsize:parseInt(o())<6?parseInt(o())+1:o())),u=D((()=>a()?"is-spaced":"")),d=D((()=>`<h${o()} id="${n()}" style="text-align: ${l()};" class="title ${Wt(u)} is-${o()}">${r()[s()]}</h${o()}>`)),h=D((()=>`<h${Wt(c)} id="${n()}" style="text-align: ${l()};" class="subtitle is-${Wt(c)}">${r()[e.subtitle]}</h${Wt(c)}>`));var g=rn(),f=re(g);return De(f,s,(t=>{var e=ye();Be(re(e),(()=>Wt(d))),Oe(t,e)})),De(ne(f,2),(()=>e.subtitle),(t=>{var e=ye();Be(re(e),(()=>Wt(h))),Oe(t,e)})),Oe(t,g),qt({scrollToTop:(t=Mi.SCROLL_OPTIONS)=>{setTimeout((()=>{document.getElementById(n()).scrollIntoView(t)}),100)}})}var sn=me("<span> </span>"),on=me("<p><!></p>");function an(t,e){Ht(e,!0);const i=mi();let r=ki(e,"errors",19,(()=>[])),n=ki(e,"show",3,!1),s=ki(e,"classes",3,""),o=ki(e,"id",3,"errors-list");var a=ye();De(re(a),(()=>Array.isArray(r())&&r().length),(t=>{var e=on();De(ie(e),n,(t=>{var e=ye();xe(re(e),17,r,Ue,((t,e)=>{var r=sn(),n=ie(r);G((()=>Le(n,vi(Hi,"$LOCALE",i)[Wt(e)]))),Oe(t,r)})),Oe(t,e)}),(t=>{Oe(t,be(" "))})),G((()=>{Ke(e,`help ${s()??""}`),He(e,"id",o())})),Oe(t,e)})),Oe(t,a),qt()}var ln=me('<article class="media"><figure class="media-left"><p class="image is-32x32"><img></p></figure> <div class="media-content"><div class="content"><p><strong> </strong> <small>@</small> <strong> </strong></p></div></div></article>');var cn=me("<p> </p>"),un=me("<input>");var dn=me('<div class="columns"><div class="column"><div class="field"><!></div></div></div>');function hn(t,e){Ht(e,!0);const i=mi(),r=fi();let n=ki(e,"placeholder",19,(()=>vi(Hi,"$LOCALE",i)["not-node:field_search_placeholder"])),s=ki(e,"term",15,"");var o=dn(),a=ie(o),l=ie(a);!function(t,e){Ht(e,!0);const i=mi();let r=ki(e,"value",15,""),n=ki(e,"placeholder",3,""),s=ki(e,"fieldname",3,"textfield"),o=ki(e,"required",3,!0),a=ki(e,"disabled",3,!1),l=ki(e,"readonly",3,!1),c=ki(e,"valid",3,!0),u=ki(e,"class",3,""),d=ki(e,"onchange",3,(()=>!0)),h=yi(e,["$$slots","$$events","$$legacy","value","placeholder","fieldname","required","disabled","readonly","valid","class","onchange"]),g=D((()=>!c()));const f=Mi.onInput(s(),d());var p=ye();De(re(p),l,(t=>{var e=cn(),i=ie(e);G((()=>Le(i,r()))),Oe(t,e)}),(t=>{var e=un();let c;G((()=>c=qe(e,c,{id:`form-field-textfield-${s()??""}`,class:`input ${u()??""}`,type:"text",name:s(),invalid:Wt(g),disabled:a(),required:o(),readonly:l(),placeholder:vi(Hi,"$LOCALE",i)[n()],autocomplete:s(),onchange:f,oninput:f,"aria-controls":`input-field-helper-${s()??""}`,"aria-describedby":`input-field-helper-${s()??""}`,...h}))),ni(e,r),Oe(t,e)})),Oe(t,p),qt()}(ie(l),{get value(){return s()},set value(t){s(t)},get placeholder(){return n()},fieldname:"searchTermInput",icon:"magnifying-glass",$$events:{change:function({detail:t}){r("termChange",t)}}}),Oe(t,o),qt()}var gn=Object.freeze({__proto__:null,UIBoolean:vr,UIBooleanLabeled:function(t,e){Ht(e,!0);const i=mi();let r=ki(e,"inverted",3,!1);var n=mr(),s=ie(n);vr(ne(s),{get value(){return e.value},get inverted(){return r()}}),G((()=>Le(s,`${vi(Hi,"$LOCALE",i)[e.label]??""}: `))),Oe(t,n),qt()},UIBooleans:br,UICensored:function(t,e){let i=ki(e,"hidden",15,!0),r=ki(e,"showable",3,!0),n=ki(e,"copiable",3,!0),s=ki(e,"copyIcon",3,"copy"),o=ki(e,"showIcon",3,"eye"),a=ki(e,"hideIcon",3,"eye-slash"),l=ki(e,"maxLength",3,20),c=ki(e,"shadowClass",3,"has-background-primary-90"),u=ki(e,"tooltip",3,!0),d=ki(e,"tooltipTTL",3,2e3),h=ki(e,"tooltipText",3,"Скопировано в буфер"),g=ki(e,"tooltipClass",3,"has-tooltip-info"),f=ki(e,"value",3,""),p=L(!1),v=D((()=>u()&&Wt(p))),m=L(void 0);var b=kr(),y=re(b),O=ie(y),$=ne(y,2);De($,n,(t=>{var e=$r();e.__click=[Or,f,u,p,m,h,d],e.__keydown=[Or,f,u,p,m,h,d];var i=ie(e);di(e,(t=>F(m,t)),(()=>Wt(m))),G((()=>{Ke(e,"icon is-small is-right is-clickable "+(Wt(v)?` ${g()} `:"")+" is-vertical-middle"),Ke(i,`fas fa-${s()??""}`)})),Oe(t,e)})),De(ne($,2),r,(t=>{var e=wr();e.__click=[yr,i],e.__keydown=[yr,i];var r=ie(e);G((()=>Ke(r,`fas fa-${(i()?o():a())??""}`))),Oe(t,e)})),G((()=>{Ke(y,(i()?"is-censored "+c():"")+" is-vertical-middle "),He(y,"style",`display:inline-block; width: ${l()}rem; height: var(--bulma-size-medium); overflow-x:hidden;`),Le(O,i()?"":f())})),Oe(t,b)},UIErrorsList:an,UIIndicator:Ar,UILoader:Cr,UIProgress:function(t,e){let i=ki(e,"max",3,100),r=ki(e,"color",3,""),n=ki(e,"size",3,""),s=ki(e,"classes",3,"");var o=tn(),a=ie(o);G((()=>{Ke(o,`\n  progress\n  ${s()??""}\n  ${(r()?`is-${r()}`:"")??""}\n  ${(n()?`is-${n()}`:"")??""}`),function(t,e){var i=t.__attributes??={};i.value!==(i.value=e)&&(t.value!==e||0===e&&"PROGRESS"===t.nodeName)&&(t.value=e)}(o,e.value),He(o,"max",i()),Le(a,`${e.value??""}%`)})),Oe(t,o)},UISelectFromModelOnDemandInline:function(t,e){Ht(e,!0);let i,r=ki(e,"variants",31,(()=>Gt([]))),n=ki(e,"placeholder",3,"empty select item"),s=ki(e,"fieldname",3,"selectFromModel"),o=ki(e,"modelName",3,""),a=ki(e,"actionName",3,""),l=ki(e,"actionFilter",19,(()=>({}))),c=ki(e,"actionSorter",19,(()=>({}))),u=ki(e,"actionPager",19,(()=>({}))),d=ki(e,"actionSearch",3,void 0),h=ki(e,"optionId",3,":_id"),g=ki(e,"optionTitle",3,":title"),f=ki(e,"required",3,!0),p=ki(e,"readonly",3,!1),v=ki(e,"multiple",3,!1),m=ki(e,"size",3,8),b=ki(e,"valid",3,!0),y=ki(e,"onreject",3,(()=>!1)),O=ki(e,"onresolve",3,(()=>!0)),$=ki(e,"onerror",3,(()=>!0)),w=D((()=>!0)),k=L("hidden"),I=[];function A({value:t}){i=I.find((e=>nr.get(h(),e)===t))}gi((async()=>{if(o()&&a()&&l()){const t=ur.getApp().getModel(o()).setFilter(l()).setSorter(c()).setPager(u()).setSearch(d()),e=await t["$"+a()]();e.status===Kr?(I=e.result,r(I.map((t=>({id:nr.get(h(),t),title:nr.get(g(),t)}))))):$()(e.errors||[e.message])}}));const _={add:{color:"primary",icon:"plus",action(){F(k,"show")}},resolve:{icon:"check",color:"primary",action(){F(k,"hidden"),O()(i)}},reject:{icon:"close",color:"danger",action(){F(k,"hidden"),y()()}}};var C=ye();De(re(C),(()=>"hidden"===Wt(k)),(t=>{jr(t,$i((()=>_.add)))}),(t=>{var i=ye();De(re(i),(()=>"show"==Wt(k)),(t=>{var i=Xr(),o=re(i);Tr(ie(o),{get value(){return e.value},get variants(){return r()},get placeholder(){return n()},get fieldname(){return s()},get required(){return f()},get readonly(){return p()},get disabled(){return Wt(w)},get multiple(){return v()},get size(){return m()},get valid(){return b()},onchange:A});var a=ie(ne(o,2)),l=D((()=>[_.resolve,_.reject]));Br(a,{get values(){return Wt(l)}}),Oe(t,i)}),null,!0),Oe(t,i)})),Oe(t,C),qt()},UISelectFromModelWithSearchModal:function(t,e){Ht(e,!0);let i=ki(e,"value",15),r=ki(e,"icon",3,!1),n=ki(e,"fieldname",3,""),s=ki(e,"readonly",3,!1),o=ki(e,"serviceName",3,""),a=ki(e,"serviceOpenSelectorMethod",3,"openSelector"),l=ki(e,"serviceLoadDataMethod",3,"loadData"),c=ki(e,"modelData",15,null),u=ki(e,"loading",15,!1),d=ki(e,"selectedModelTitleFormatter",3,(t=>`${t._id}`)),h=ki(e,"loadingLabel",3,"not-node:loading_label"),g=ki(e,"isEmptyLabel",3,"not-node:field_value_is_empty_placeholder"),f=ki(e,"onchange",3,(()=>!0));function p(){if(!o())throw new Error("serviceName is not set");return ur.getApp().getService(o())}function v(){if(!a())throw new Error("serviceOpenSelectorMethod is not set");p()[a()]().then((t=>(i(t._id),c(t),i()))).then((t=>{f()({field:n(),value:t})})).catch((t=>{ur.report(t)}))}gi((()=>{!async function(){try{i()&&(u(!0),c(await p()[l()](i())))}catch(t){ur.report(t)}finally{u(!1)}}()}));const m=[{id:1,action:v,icon:r(),color:"warning"},{id:2,action:function(){i(void 0),c(null),f()({field:n(),value:i()})},icon:"times",color:"danger"}];function b(){return u()?{disabled:!0,loading:u(),title:h()}:c()?{disabled:s(),action:v,title:d()(c())}:{disabled:!0,title:g()}}let y=L(Gt([]));run((()=>{i()?F(y,Gt([b(),...s()?[]:m])):F(y,Gt([b(),...s()?[]:[m[0]]]))}));var O=Zr();Br(ie(O),{get values(){return Wt(y)},classes:"is-no-flex-wrap"}),Oe(t,O),qt()},UIShowOneFromList:function(t,e){Ht(e,!0);const i=t=>t[s()]===e.id;let r=ki(e,"values",19,(()=>[])),n=ki(e,"active",15),s=ki(e,"idFieldName",3,"_id"),o=ki(e,"filter",3,i);Ii((()=>{n(Array.isArray(r())&&r().length&&void 0!==e.id?r().find(o()||i):void 0)}));var a=ye();De(re(a),n,(t=>{var i=ye();Ve(re(i),(()=>e.UIComponent),((t,e)=>{e(t,$i(n))})),Oe(t,i)}),(t=>{var i=ye();De(re(i),(()=>e.UIPlaceholder),(t=>{var i=ye();Ve(re(i),(()=>e.UIPlaceholder),((t,e)=>{e(t,{})})),Oe(t,i)}),null,!0),Oe(t,i)})),Oe(t,a),qt()},UISimpleSearchInput:hn,UITag:pr,UITagValue:function(t,e){Ht(e,!0);let i=ki(e,"id",3,"taggedValueId"),r=ki(e,"actions",19,(()=>[])),n=ki(e,"classes",3,""),s=ki(e,"actionsGroupContructor",3,Br),o=ki(e,"actionsGroupProps",19,(()=>({}))),a=ki(e,"readonly",3,!1);var l=en(),c=ie(l);De(c,(()=>e.title),(t=>{pr(t,$i((()=>e.title)))}));var u=ne(c,2);De(u,(()=>e.value),(t=>{pr(t,$i((()=>e.value)))})),De(ne(u,2),(()=>!a()&&r()&&r().length),(t=>{var e=ye();const i=D(s);Ve(re(e),(()=>Wt(i)),((t,e)=>{e(t,$i({get values(){return r()}},o))})),Oe(t,e)})),G((()=>{Ke(l,`tags has-addons ${n()??""}`),He(l,"id",i())})),Oe(t,l),qt()},UITitle:nn,UIUserCard:function(t,e){Ht(e,!0);let i=ki(e,"id",3,"userCard"),r=ki(e,"image",3,"https://bulma.io/images/placeholders/32x32.png"),n=ki(e,"username",15,"John Doe"),s=ki(e,"role",15,"admin"),o=ki(e,"events",31,(()=>Gt({}))),a=ki(e,"register",19,(()=>ur.registerWidgetEvents)),l=ki(e,"onUpdate",3,(t=>{Object.hasOwn(t,"username")&&n(t.username),Object.hasOwn(t,"role")&&s(t.role)}));function c(){return`usercard-${i()}`}function u(){return`${c()}:update`}gi((()=>{Object.hasOwn(o(),u())||o(o()[u()]=l(),!0),a()(o())}));var d=ln();G((()=>He(d,"id",c())));var h=ie(d),g=ie(h),f=ie(g),p=ie(ne(h,2)),v=ie(p),m=ie(v),b=ie(m),y=ie(ne(m,4));G((()=>{He(f,"src",r()),He(f,"alt",n()),Le(b,n()),Le(y,s())})),Oe(t,d),qt()}});function fn(t,e){Ht(e,!0);let i=ki(e,"id",3,"generic-field"),r=L(Gt([])),n=L(!0);V((()=>{F(r,Gt([].concat(e.errors?e.errors:[],e.formErrors?e.formErrors:[]))),F(n,Gt(!(e.validated&&e.valid)&&e.inputStarted))})),an(t,{get show(){return Wt(n)},get errors(){return Wt(r)},get classes(){return""},get id(){return i()}}),qt()}var pn=me("<label><!></label>");function vn(t,e){Ht(e,!0);const i=mi();let r=ki(e,"label",3,"label"),n=ki(e,"class",3,"label"),s=ki(e,"disabled",3,!1);var o=pn();De(ie(o),(()=>e.children),(t=>{var i=ye();ze(re(i),(()=>e.children)),Oe(t,i)}),(t=>{var e=be();G((()=>Le(e,vi(Hi,"$LOCALE",i)[r()]))),Oe(t,e)})),G((()=>{o.disabled=s(),Ke(o,n()),He(o,"for",e.for)})),Oe(t,o),qt()}var mn=me("<!> <!>",1);var bn=me('<div class="is-fab svelte-1haul9u"><!></div>');var yn=me("<span><span><i></i> <span> </span></span></span>"),On=me("<span><i></i></span>");function $n(t,e){Ht(e,!0);const i=mi();let r=ki(e,"title",3,""),n=ki(e,"font",3,""),s=ki(e,"side",3,""),o=ki(e,"size",3,""),a=ki(e,"pointable",3,!1);var l=ye();De(re(l),r,(t=>{var e=yn(),s=ie(e),l=ie(s),c=ie(ne(l,2));G((()=>{Ke(e,`icon-text ${(a()?"is-clickable":"")??""}`),Ke(s,`icon ${(o()?`is-${o()}`:"")??""}`),Ke(l,`is-title-icon fas\n      fa-${n()??""}\n      ${("medium"==o()?"fa-lg":"")??""}\n      ${("large"==o()?"fa-2x":"")??""}\n      `),Le(c,vi(Hi,"$LOCALE",i)[r()])})),Oe(t,e)}),(t=>{var e=On(),i=ie(e);G((()=>{Ke(e,`\n        ${(a()?"is-clickable":"")??""}\n        ${(s()?`is-${s()}`:"")??""}\n        icon ${(o()?`is-${o()}`:"")??""} ${("medium"==o()?"fa-lg":"")??""}\n${("large"==o()?"fa-2x":"")??""}`),Ke(i,`fas fa-${n()??""}`)})),Oe(t,e)})),Oe(t,l),qt()}var wn=me('<span class="icon"><!></span>'),kn=me("<figure><img></figure>");function In(t,e){let i=ki(e,"title",3,""),r=ki(e,"size",3,""),n=ki(e,"font",3,""),s=ki(e,"svg",3,""),o=ki(e,"src",3,"");var a=ye();De(re(a),n,(t=>{$n(t,{get font(){return n()},get size(){return r()},get title(){return i()}})}),(t=>{var r=ye();De(re(r),s,(t=>{var e=wn();Be(ie(e),s),Oe(t,e)}),(t=>{var r=ye();De(re(r),o,(t=>{var r=kn(),n=ie(r);G((()=>{Ke(r,`image ${(e.width&&e.height?`is-${e.width}x${e.height}`:"")??""} `),He(n,"src",o()),He(n,"title",i()),He(n,"alt",i()),He(n,"width",e.width),He(n,"height",e.height)})),Oe(t,r)}),null,!0),Oe(t,r)}),!0),Oe(t,r)})),Oe(t,a)}var An=Object.freeze({__proto__:null,UIIcon:In,UIIconButtonWithTag:function(t,e){let i=ki(e,"button",19,(()=>({}))),r=ki(e,"tag",19,(()=>({})));var n=mn(),s=re(n);jr(s,$i(i)),pr(ne(s,2),$i(r,{classes:"is-top-right"})),Oe(t,n)},UIIconFloating:function(t,e){Ht(e,!0);let i=ki(e,"trigger",19,(()=>({title:"Click me!",icon:"plus",color:"primary",size:"medium"}))),r=L("");gi((()=>{F(r,"")}));var n=bn();jr(ie(n),$i({action:function(){}},i)),G((()=>He(n,"style",Wt(r)))),Oe(t,n),qt()},UIIconFont:$n});function _n(t,e){let i=ki(e,"side",3,"right"),r=ki(e,"size",3,"small");var n=ye();De(re(n),(()=>!0===e.validated),(t=>{var n=D((()=>e.valid?"check":"exclamation-triangle"));$n(t,{get font(){return Wt(n)},get side(){return i()},get size(){return r()}})})),Oe(t,n)}var Cn=me("<!> <!> <!>",1);function En(t,e){const i=t=>{var i=Cn(),n=re(i);Ve(n,(()=>e.UIInput),((t,i)=>{i(t,$i({get fieldtype(){return e.fieldtype},get fieldname(){return e.fieldname},get valid(){return o()},get disabled(){return e.disabled},get readonly(){return e.readonly},get value(){return r()},set value(t){r(t)}},(()=>l)))}));var c=ne(n,2);De(c,s,(t=>{$n(t,{get font(){return s()},side:"left",size:"small"})})),De(ne(c,2),(()=>!e.readonly),(t=>{_n(t,{get validated(){return a()},get valid(){return o()}})})),Oe(t,i)};let r=ki(e,"value",15,""),n=ki(e,"fieldnamePrefix",3,"form-field-"),s=ki(e,"icon",3,!1),o=ki(e,"valid",3,!0),a=ki(e,"validated",3,!1),l=yi(e,["$$slots","$$events","$$legacy","value","disabled","readonly","UIInput","label","fieldtype","fieldname","fieldnamePrefix","icon","valid","validated"]);var c=ye();De(re(c),(()=>e.label),(t=>{vn(t,{get class(){return e.fieldtype},get disabled(){return e.disabled},get for(){return`${n()??""}${e.fieldtype??""}-${e.fieldname??""}`},children:(t,e)=>{i(t)},$$slots:{default:!0}})}),(t=>{i(t)})),Oe(t,c)}var Sn=me("<div><!></div>");var Ln=me("<!> <!>",1);var Nn=Object.freeze({__proto__:null,UIFormControl:function(t,e){let i=ki(e,"value",15,""),r=ki(e,"inputStarted",3,!1),n=ki(e,"placeholder",3,""),s=ki(e,"fieldnamePrefix",3,"form-field-"),o=ki(e,"icon",3,!1),a=ki(e,"required",3,!0),l=ki(e,"readonly",3,!1),c=ki(e,"disabled",3,!1),u=ki(e,"valid",3,!0),h=ki(e,"validated",3,!1),g=ki(e,"errors",3,!1),f=ki(e,"onchange",3,(()=>!0)),p=ki(e,"onerror",3,(()=>!0)),v=ki(e,"formErrors",3,!1),m=yi(e,["$$slots","$$events","$$legacy","value","UIInput","inputStarted","label","placeholder","fieldtype","fieldname","fieldnamePrefix","icon","required","readonly","disabled","valid","validated","errors","onchange","onerror","formErrors"]),b=D((()=>(o()?" has-icons-left ":"")+" has-icons-right "));var y=Ln(),O=re(y);!function(t,e){Ht(e,!0);let i=ki(e,"class",3,"");var r=Sn();ze(ie(r),(()=>e.children??d)),G((()=>Ke(r,`control ${i()??""}`))),Oe(t,r),qt()}(O,{get class(){return Wt(b)},children:(t,r)=>{En(t,$i({get value(){return i()},set value(t){i(t)},get UIInput(){return e.UIInput},get label(){return e.label},get placeholder(){return n()},get fieldtype(){return e.fieldtype},get fieldname(){return e.fieldname},get fieldnamePrefix(){return s()},get icon(){return o()},get required(){return a()},get readonly(){return l()},get disabled(){return c()},get valid(){return u()},get onchange(){return f()},get onerror(){return p()}},(()=>m)))},$$slots:{default:!0}}),fn(ne(O,2),{get inputStarted(){return r()},get validated(){return h()},get valid(){return u()},get errors(){return g()},get formErrors(){return v()},get id(){return`input-field-helper-${e.fieldname??""}`}}),Oe(t,y)},UIFormInput:En,UIFormInputErrors:fn,UIValidatedIcon:_n}),Fn=me("<a><figure><img></figure></a>"),Tn=me("<figure><img></figure>");function Mn(t,e){let i=ki(e,"cors",3,"anonymous"),r=ki(e,"size",3,64),n=ki(e,"contained",3,!0),s=ki(e,"covered",3,!0),o=ki(e,"classes",3,""),a=ki(e,"onclick",3,(()=>!0)),l=ki(e,"onkeyup",3,(()=>!0)),c=D((()=>isNaN(r())?`is-${r()}`:`is-${r()}x${r()}`)),u=D((()=>n()?"is-contained":"")),d=D((()=>s()?"is-covered":""));var h=ye();De(re(h),(()=>e.urlFull),(t=>{var r=Fn();r.__click=function(...t){a()?.apply(this,t)};var n=ie(r),s=ie(n);G((()=>{He(r,"href",e.urlFull),He(r,"alt",e.title),Ke(n,`image ${Wt(c)??""} ${Wt(u)??""} ${Wt(d)??""} ${o()??""}`),He(s,"alt",e.title),He(s,"src",e.url),He(s,"crossorigin",i())})),Oe(t,r)}),(t=>{var r=Tn(),n=ie(r);n.__click=function(...t){a()?.apply(this,t)},n.__keyup=function(...t){l()?.apply(this,t)},G((()=>{Ke(r,`image ${Wt(c)??""} ${Wt(u)??""} ${Wt(d)??""} ${o()??""}`),He(n,"alt",e.title),He(n,"src",e.url),He(n,"crossorigin",i())})),Oe(t,r)})),Oe(t,h)}function Dn(t,e){let i=ki(e,"values",19,(()=>[]));var r=ye();xe(re(r),17,i,(t=>t.url),((t,i)=>{Mn(t,$i((()=>Wt(i)),{$$events:{click(t){hi.call(this,e,t)}}}))})),Oe(t,r)}ge(["click","keyup"]);var Un=Object.freeze({__proto__:null,UIImage:Mn,UIImages:Dn}),xn=me('<div role="button" tabindex="0"><!></div>');ge(["click","keyup"]);var Rn=me('<div role="button" tabindex="0"><!></div>');ge(["click","keyup"]);var Pn=me('<div role="button" tabindex="0"><!></div>');function jn(t,e){Ht(e,!0);const i=Ai();let r=ki(e,"id",3,""),n=ki(e,"classes",3,""),s=ki(e,"widescreen",3,!1),o=ki(e,"fullhd",3,!1),a=ki(e,"maxDesktop",3,!1),l=ki(e,"maxWidescreen",3,!1),c=ki(e,"fluid",3,!1);var u=Pn(),h=D((()=>i("click")));u.__click=function(...t){Wt(h)?.apply(this,t)};var g=D((()=>i("keyup")));u.__keyup=function(...t){Wt(g)?.apply(this,t)},ze(ie(u),(()=>e.children??d)),G((()=>{He(u,"id",r()),Ke(u,`container ${n()??""}`),Ye(u,"is-widescreen",s()),Ye(u,"is-fullhd",o()),Ye(u,"is-max-desktop",a()),Ye(u,"is-max-widescreen",l()),Ye(u,"is-fluid",c())})),Oe(t,u),qt()}ge(["click","keyup"]);var Wn=me("<footer><!></footer>");var Bn=me('<section role="button"><!></section>');ge(["click","keyup"]);var zn=me('<nav class="level"><div class="level-left"><!></div> <div class="level-right"><!></div></nav>');var Vn=Object.freeze({__proto__:null,UIColumn:function(t,e){Ht(e,!0);const i=Ai();let r=ki(e,"class",3,""),n=ki(e,"title",3,""),s=ki(e,"narrow",3,!1);var o=xn(),a=D((()=>i("click")));o.__click=function(...t){Wt(a)?.apply(this,t)};var l=D((()=>i("keyup")));o.__keyup=function(...t){Wt(l)?.apply(this,t)},ze(ie(o),(()=>e.children??d)),G((()=>{He(o,"title",n()),Ke(o,`column ${r()??""} ${(s()?"is-narrow":"")??""}`)})),Oe(t,o),qt()},UIColumns:function(t,e){Ht(e,!0);const i=Ai();let r=ki(e,"classes",3,"");var n=Rn(),s=D((()=>i("click")));n.__click=function(...t){Wt(s)?.apply(this,t)};var o=D((()=>i("keyup")));n.__keyup=function(...t){Wt(o)?.apply(this,t)},ze(ie(n),(()=>e.children??d)),G((()=>Ke(n,`columns ${r()??""}`))),Oe(t,n),qt()},UIContainer:jn,UIFooter:function(t,e){Ht(e,!0);let i=ki(e,"id",3,""),r=ki(e,"classes",3,"");var n=Wn();ze(ie(n),(()=>e.children??d)),G((()=>{He(n,"id",i()),Ke(n,`footer  ${r()??""} `)})),Oe(t,n),qt()},UILevel:function(t,e){Ht(e,!0);var i=zn(),r=ie(i);ze(ie(r),(()=>e.left??d)),ze(ie(ne(r,2)),(()=>e.right??d)),Oe(t,i),qt()},UILevelItem:function(t,e){Ht(e,!0);let i=ki(e,"tag",3,"div");var r=ye();!function(t,e,i,r){var n,s,o,a=null,l=t;J((()=>{const t=e()||null;var i="svg"===t?"http://www.w3.org/2000/svg":null;t!==n&&(o&&(null===t?et(o,(()=>{o=null,s=null})):t===s?nt(o):(Z(o),Se(!1))),t&&t!==s&&(o=K((()=>{if(ve(a=i?document.createElementNS(i,t):document.createElement(t),a),r){var e=a.appendChild(Zt());r(a,e)}Ot.nodes_end=a,l.before(a)}))),(n=t)&&(s=n),Se(!0))}),O)}(re(r),i,0,((t,i)=>{var r=ye();De(re(r),(()=>e.children),(t=>{var i=ye();ze(re(i),(()=>e.children)),Oe(t,i)}),(t=>{})),Oe(i,r)})),Oe(t,r),qt()},UISection:function(t,e){Ht(e,!0);const i=Ai();let r=ki(e,"id",3,""),n=ki(e,"classes",3,""),s=ki(e,"tabindex",3,0);var o=Bn(),a=D((()=>i("click")));o.__click=function(...t){Wt(a)?.apply(this,t)};var l=D((()=>i("keyup")));o.__keyup=function(...t){Wt(l)?.apply(this,t)},ze(ie(o),(()=>e.children??d)),G((()=>{He(o,"id",r()),Ke(o,`section ${(e.size?"is-"+e.size:"")??""}  ${n()??""}`),He(o,"tabindex",s())})),Oe(t,o),qt()}}),Hn=me('<span class="icon"><i></i></span>'),qn=me("<span> </span>"),Gn=me('<span class="icon"><i></i></span>'),Jn=me("<!> <!> <!> <!>",1),Kn=me(" <!>",1),Yn=me("<a><!></a>");function Qn(t,e){Ht(e,!0);const i=mi(),r=()=>vi(Hi,"$LOCALE",i);let n=ki(e,"title",3,""),s=ki(e,"url",3,""),o=ki(e,"target",3,"_blank"),a=ki(e,"light",3,!1),l=ki(e,"loading",3,!1),c=ki(e,"raised",3,!1),u=ki(e,"outlined",3,!1),h=ki(e,"inverted",3,!1),g=ki(e,"rounded",3,!1),f=ki(e,"button",3,!0),p=ki(e,"state",3,""),v=ki(e,"type",3,""),m=ki(e,"color",3,""),b=ki(e,"size",3,""),y=ki(e,"classes",15,""),O=ki(e,"icon",3,!1),$=ki(e,"iconSide",3,"right"),w=ki(e,"action",3,(()=>!0));Ii((()=>{y((f()?"button ":"")+(p()&&p().length>0?` is-${p()} `:"")+(a()?" is-light ":"")+(v()&&v().length>0?` is-${v()} `:"")+(b()&&b().length>0?` is-${b()} `:""))}));var k=Yn();k.__click=function(...t){w()?.apply(this,t)},De(ie(k),O,(t=>{var i=Jn(),s=re(i);De(s,(()=>"left"===$()),(t=>{var e=Hn(),i=ie(e);G((()=>Ke(i,`fas fa-${O()??""} ${(b()?`is-${b()}`:"")??""}`))),Oe(t,e)}));var o=ne(s,2);De(o,n,(t=>{var e=qn(),i=ie(e);G((()=>Le(i,r()[n()]))),Oe(t,e)}));var a=ne(o,2);ze(a,(()=>e.children??d)),De(ne(a,2),(()=>"right"===$()),(t=>{var e=Gn(),i=ie(e);G((()=>Ke(i,`fas fa-${O()??""} ${(b()?`is-${b()}`:"")??""}`))),Oe(t,e)})),Oe(t,i)}),(t=>{var i=Kn(),s=re(i);ze(ne(s),(()=>e.children??d)),G((()=>Le(s,`${r()[n()]??""} `))),Oe(t,i)})),G((()=>{He(k,"target",o()),He(k,"href",s()),He(k,"download",e.download),He(k,"rel",e.rel),Ke(k,`${y()??""} ${(p()?`is-${p()}`:"")??""} ${(h()?"is-inverted":"")??""} ${(u()?"is-outlined":"")??""} ${(c()?"is-raised":"")??""} ${(g()?"is-rounded":"")??""} ${(a()?"is-light":"")??""} ${(l()?"is-loading":"")??""} ${(m()?`is-${m()}`:"")??""} ${(v()?`is-${v()}`:"")??""} ${(b()?`is-${b()}`:"")??""}`)})),Oe(t,k),qt()}ge(["click"]);var Xn=me('<div><p class="control"></p></div>'),Zn=me("<div></div>");function ts(t,e){let i=ki(e,"values",19,(()=>[])),r=ki(e,"classes",3,""),n=ki(e,"centered",3,!1),s=ki(e,"right",3,!1),o=ki(e,"joined",3,!0);var a=ye();De(re(a),o,(t=>{var e=Xn();xe(ie(e),21,i,(t=>t.id),((t,e)=>{Qn(t,$i((()=>Wt(e))))})),G((()=>Ke(e,`field has-addons ${(n()?"is-centered":"")??""} ${(s()?"is-right":"")??""} ${r()??""}`))),Oe(t,e)}),(t=>{var e=Zn();xe(e,21,i,(t=>t.id),((t,e)=>{Qn(t,$i((()=>Wt(e))))})),G((()=>Ke(e,`buttons ${(n()?"is-centered":"")??""} ${(s()?"is-right":"")??""} ${r()??""}`))),Oe(t,e)})),Oe(t,a)}var es=Object.freeze({__proto__:null,UILink:Qn,UILinks:ts}),is=me('<div class="column box"> </div>'),rs=me('<div class="columns"><div class="column"><!></div> <!> <div class="column"><!></div></div>');function ns(t,e){Ht(e,!0);const i=mi(),r=()=>vi(Hi,"$LOCALE",i),n=fi();let s=ki(e,"page",3,0),o=ki(e,"pages",3,0),a=ki(e,"buttonComponent",3,jr),l=ki(e,"buttonComponentProps",19,(()=>({})));var c=ye();De(re(c),(()=>o()>0),(t=>{var e=rs(),i=ie(e);De(ie(i),(()=>s()>1),(t=>{var e=ye();const i=D(a);Ve(re(e),(()=>Wt(i)),((t,e)=>{e(t,$i(l,{action:()=>n("prev"),children:(t,e)=>{var i=be();G((()=>Le(i,r()["not-node:list_navigation_prev_button_label"]))),Oe(t,i)},$$slots:{default:!0}}))})),Oe(t,e)}));var c=ne(i,2);De(c,(()=>o()>1),(t=>{var e=is(),i=ie(e);G((()=>Le(i,`${s()??""} / ${o()??""}`))),Oe(t,e)})),De(ie(ne(c,2)),(()=>s()<o()),(t=>{var e=ye();const i=D(a);Ve(re(e),(()=>Wt(i)),((t,e)=>{e(t,$i(l,{action:()=>n("next"),children:(t,e)=>{var i=be();G((()=>Le(i,r()["not-node:list_navigation_next_button_label"]))),Oe(t,i)},$$slots:{default:!0}}))})),Oe(t,e)})),Oe(t,e)})),Oe(t,c),qt()}var ss=me('<div class="box list-item-selectable svelte-ialyiy" role="button" tabindex="0"><span> </span></div>');function os(t,e){Ht(e,!0);const i=fi();function r(){i("click",{_id:e._id,id:e.id,title:e.title})}var n=ss(),s=D((()=>{return t=r,function(...e){return e[0].preventDefault(),t?.apply(this,e)};var t}));n.__click=function(...t){Wt(s)?.apply(this,t)},n.__keyup=r;var o=ie(n),a=ie(o);G((()=>Le(a,e.title))),Oe(t,n),qt()}function as(t){nn(t,{title:"not-node:empty_list_placeholder",size:4,align:"center"})}ge(["click","keyup"]),E=!0;var ls=me("<div><!></div> <!>",1);function cs(t,e){Ht(e,!0);const i=fi();let r=ki(e,"data",31,(()=>Gt({list:[],skip:0,count:0,page:0,pages:0}))),n=ki(e,"itemComponent",3,os),s=ki(e,"itemComponentProps",19,(()=>({}))),o=ki(e,"emptyListPlaceholderComponent",3,as),a=ki(e,"emptyListPlaceholderComponentProps",19,(()=>({}))),l=ki(e,"listNavigationComponent",3,ns),c=ki(e,"listNavigationComponentProps",19,(()=>({})));function u({detail:t}){i("select",t)}const d=D(l);var h=ls(),g=re(h);De(ie(g),(()=>r().list.length),(t=>{var e=ye();xe(re(e),17,(()=>r().list),(t=>t.id),((t,e)=>{var i=ye();const r=D(n);Ve(re(i),(()=>Wt(r)),((t,i)=>{i(t,$i(s,(()=>Wt(e)),{$$events:{click:u}}))})),Oe(t,i)})),Oe(t,e)}),(t=>{var e=ye();const i=D(o);Ve(re(e),(()=>Wt(i)),((t,e)=>{e(t,$i(a))})),Oe(t,e)})),Ve(ne(g,2),(()=>Wt(d)),((t,i)=>{i(t,$i(c,{get page(){return r().page},set page(t){r(r().page=t,!0)},get pages(){return r().pages},set pages(t){r(r().pages=t,!0)},get skip(){return r().skip},set skip(t){r(r().skip=t,!0)},get count(){return r().count},set count(t){r(r().count=t,!0)},$$events:{prev(t){hi.call(this,e,t)},next(t){hi.call(this,e,t)}}}))})),Oe(t,h),qt()}var us=(t,e)=>{t&&"Enter"==t.key&&e()},ds=(t,e,i,r)=>{t.preventDefault(),t&&"Enter"==t.key&&(e(),i()(r.value))},hs=(t,e,i,r)=>{t.preventDefault(),e(),i()(r.value)},gs=me('<figure class="image is-64x64"><img class="is-rounded"></figure>'),fs=me('<div role="button" tabindex="0" class="list-item-image"><!></div>'),ps=(t,e,i,r)=>{t.preventDefault(),e(),i()(r.value)},vs=(t,e,i,r)=>{t.preventDefault(),t&&"Enter"==t.key&&(e(),i()(r.value))},ms=(t,e,i,r)=>{t.preventDefault(),t&&"Enter"==t.key&&(e(),i()(r.value))},bs=(t,e,i,r)=>{t.preventDefault(),e(),i()(r.value)},ys=me('<div class="list-item-title" role="button" tabindex="0"><!></div>'),Os=(t,e,i,r)=>{t.preventDefault(),t&&"Enter"==t.key&&(e(),i()(r.value))},$s=(t,e,i,r)=>{t.preventDefault(),e(),i()(r.value)},ws=me('<div role="button" tabindex="0" class="list-item-description"><!></div>'),ks=me('<div class="list-item-controls"><!> <!></div>'),Is=me('<div role="button" tabindex="0"><!> <div role="button" tabindex="0" class="list-item-content"><!> <!></div> <!></div>');function As(t,e){Ht(e,!0);let i=ki(e,"actions",19,(()=>[])),r=ki(e,"links",19,(()=>[])),n=ki(e,"listActions",19,(()=>[])),s=ki(e,"listLinks",19,(()=>[])),o=ki(e,"classes",3,""),a=ki(e,"commonClasses",3,""),l=ki(e,"image",3,""),c=ki(e,"index",19,(()=>-1)),u=ki(e,"first",3,!1),d=ki(e,"last",3,!1),h=ki(e,"titleComponent",3,nn),g=ki(e,"titleComponentProps",19,(()=>({size:6}))),f=ki(e,"descriptionComponentProps",19,(()=>({}))),p=ki(e,"imageComponentProps",19,(()=>({}))),v=ki(e,"onclickImage",3,(()=>!1)),m=ki(e,"onclickContent",3,(()=>!1)),b=ki(e,"onclickTitle",3,(()=>!1)),y=ki(e,"onclickDescription",3,(()=>!1));function O(){onclick(e.value)}let $=L(Gt([])),w=L(Gt([]));gi((()=>{F($,Gt([...i(),...n()].map((t=>({...t,action:()=>t.action(e.value)}))))),F(w,Gt([...r(),...s()]))}));var k=Is();k.__click=O,k.__keyup=[us,O];var I=ie(k);De(I,l,(t=>{var i=fs();i.__keyup=[ds,O,v,e],i.__click=[hs,O,v,e],De(ie(i),(()=>e.imageComponent),(t=>{var i=ye();De(re(i),(()=>"string"==typeof l()),(t=>{var i=ye();const r=D((()=>e.imageComponent));Ve(re(i),(()=>Wt(r)),((t,e)=>{e(t,$i({get value(){return l()}},p))})),Oe(t,i)}),(t=>{var i=ye();const r=D((()=>e.imageComponent));Ve(re(i),(()=>Wt(r)),((t,e)=>{e(t,$i(l,p))})),Oe(t,i)})),Oe(t,i)}),(t=>{var i=gs(),r=ie(i);G((()=>{He(r,"src",l()),He(r,"alt",e.title)})),Oe(t,i)})),Oe(t,i)}));var A=ne(I,2);A.__click=[ps,O,m,e],A.__keyup=[vs,O,m,e];var _=ie(A);De(_,(()=>e.title),(t=>{var i=ys();i.__keyup=[ms,O,b,e],i.__click=[bs,O,b,e],De(ie(i),h,(t=>{var i=ye();De(re(i),(()=>"string"==typeof e.title),(t=>{var i=ye();const r=D(h);Ve(re(i),(()=>Wt(r)),((t,i)=>{i(t,$i({get title(){return e.title}},g,{onchange:onchange}))})),Oe(t,i)}),(t=>{var i=ye();const r=D(h);Ve(re(i),(()=>Wt(r)),((t,i)=>{i(t,$i((()=>e.title),g,{onchange:onchange}))})),Oe(t,i)})),Oe(t,i)}),(t=>{var i=be();G((()=>Le(i,e.title))),Oe(t,i)})),Oe(t,i)})),De(ne(_,2),(()=>e.description),(t=>{var i=ws();i.__keyup=[Os,O,y,e],i.__click=[$s,O,y,e],De(ie(i),(()=>e.descriptionComponent),(t=>{var i=ye();De(re(i),(()=>"string"==typeof e.description),(t=>{var i=ye();const r=D((()=>e.descriptionComponent));Ve(re(i),(()=>Wt(r)),((t,i)=>{i(t,$i({get value(){return e.description}},f,{onchange:onchange,onclick:onclick}))})),Oe(t,i)}),(t=>{var i=ye();const r=D((()=>e.descriptionComponent));Ve(re(i),(()=>Wt(r)),((t,i)=>{i(t,$i((()=>e.description),f,{onchange:onchange,onclick:onclick}))})),Oe(t,i)})),Oe(t,i)}),(t=>{var i=be();G((()=>Le(i,e.description))),Oe(t,i)})),Oe(t,i)})),De(ne(A,2),(()=>Wt($)&&Wt($).length||Wt(w)&&Wt(w).length),(t=>{var e=ks(),i=ie(e);De(i,(()=>Wt($)&&Wt($).length),(t=>{Br(t,{get values(){return Wt($)},right:!0})})),De(ne(i,2),(()=>Wt(w)&&Wt(w).length),(t=>{ts(t,{get values(){return Wt(w)},right:!0})})),Oe(t,e)})),G((()=>Ke(k,`list-item ${o()??""} ${a()??""} ${(d()?"list-item-last":"")??""} ${(u()?"list-item-first":"")??""}  ${`list-item-at-${c()}`??""} ${"list-item-"+(c()%2?"odd":"even")??""}`))),Oe(t,k),qt()}ge(["click","keyup"]);var _s=me("<div><!></div>");function Cs(t,e){Ht(e,!0);let i=ki(e,"classes",3,""),r=ki(e,"items",31,(()=>Gt([]))),n=ki(e,"actions",19,(()=>[])),s=ki(e,"links",19,(()=>[])),o=ki(e,"actionsVisible",3,!1),a=ki(e,"itemsHoverable",3,!1),l=ki(e,"overflowEllipsis",3,!1),c=ki(e,"hiddenImages",3,!1),u=ki(e,"itemClasses",3,""),d=ki(e,"idFieldName",3,"id"),h=ki(e,"emptyListPlaceholderComponent",3,as),g=ki(e,"emptyListPlaceholderComponentProps",19,(()=>({}))),f=ki(e,"listItemComponent",3,As),p=ki(e,"listItemComponentProps",19,(()=>({}))),v=ki(e,"titleComponent",3,nn),m=ki(e,"titleComponentProps",19,(()=>({size:6}))),b=ki(e,"descriptionComponentProps",19,(()=>({}))),y=ki(e,"imageComponentProps",19,(()=>({})));var O=ye();De(re(O),(()=>r().length),(t=>{var h=_s();!function(t,e){Ht(e,!0);let i=ki(e,"idFieldName",3,"id"),r=ki(e,"items",23,(()=>[])),n=ki(e,"actions",19,(()=>[])),s=ki(e,"links",19,(()=>[])),o=ki(e,"itemClasses",3,""),a=ki(e,"listItemComponent",3,As),l=ki(e,"listItemComponentProps",19,(()=>({}))),c=ki(e,"titleComponent",3,nn),u=ki(e,"titleComponentProps",19,(()=>({size:6}))),d=ki(e,"descriptionComponentProps",19,(()=>({}))),h=ki(e,"imageComponentProps",19,(()=>({})));var g=ye();De(re(g),r,(t=>{var g=ye();const f=D(a);xe(re(g),19,r,(t=>t[i()]),((t,i,a)=>{var g=ye(),p=re(g),v=D((()=>0===Wt(a))),m=D((()=>Wt(a)===r().length-1));Ve(p,(()=>Wt(f)),((t,g)=>{g(t,$i(l,{get titleComponent(){return c()},get titleComponentProps(){return u()},get descriptionComponent(){return e.descriptionComponent},get descriptionComponentProps(){return d()},get imageComponent(){return e.imageComponent},get imageComponentProps(){return h()}},(()=>Wt(i)),{get listActions(){return n()},get listLinks(){return s()},get commonClasses(){return o()},get value(){return r()[Wt(a)]},set value(t){r()[Wt(a)]=t},get index(){return Wt(a)},get first(){return Wt(v)},get last(){return Wt(m)},$$events:{click(t){hi.call(this,e,t)},clickContent(t){hi.call(this,e,t)},clickDescription(t){hi.call(this,e,t)},clickImage(t){hi.call(this,e,t)},clickTitle(t){hi.call(this,e,t)}}}))})),Oe(t,g)})),Oe(t,g)})),Oe(t,g),qt()}(ie(h),{get items(){return r()},set items(t){r(t)},get itemClasses(){return u()},get listItemComponent(){return f()},get listItemComponentProps(){return p()},get idFieldName(){return d()},get titleComponent(){return v()},get titleComponentProps(){return m()},get descriptionComponent(){return e.descriptionComponent},get descriptionComponentProps(){return b()},get imageComponent(){return e.imageComponent},get imageComponentProps(){return y()},get actions(){return n()},get links(){return s()},$$events:{change(t){hi.call(this,e,t)},click(t){hi.call(this,e,t)},clickContent(t){hi.call(this,e,t)},clickDescription(t){hi.call(this,e,t)},clickImage(t){hi.call(this,e,t)},clickTitle(t){hi.call(this,e,t)}}}),G((()=>{He(h,"style",e.itemLength?`--length: ${e.itemLength};`:""),Ke(h,`list ${i()??""} ${(o()?"has-visible-pointer-controls":"")??""} ${(a()?"has-hoverable-list-items":"")??""} ${(l()?"has-overflow-ellipsis":"")??""} ${(c()?"has-hidden-images":"")??""}`)})),Oe(t,h)}),(t=>{var e=ye();const i=D(h);Ve(re(e),(()=>Wt(i)),((t,e)=>{e(t,$i(g))})),Oe(t,e)})),Oe(t,O),qt()}var Es=me("<!> <!>",1);var Ss=Object.freeze({__proto__:null,UIEndlessList:cs,UIEndlessListNavigation:ns,UIEndlessListSimpleItem:os,UIList:Cs,UIListEmptyPlaceholder:as,UIListItem:As,UIListSelect:function(t,e){Ht(e,!0);const i=fi();let r=ki(e,"fieldname",3,"list-select"),n=ki(e,"multiple",3,!1),s=ki(e,"atLeastOne",3,!0),o=ki(e,"variants",31,(()=>Gt([]))),a=ki(e,"value",15),l=ki(e,"selectedVariantsIds",31,(()=>Gt([]))),c=ki(e,"titleComponent",3,nn),u=ki(e,"titleComponentProps",19,(()=>({size:5}))),d=ki(e,"imageComponent",3,Mn),h=ki(e,"imageComponentProps",19,(()=>({covered:!0}))),g=ki(e,"descriptionComponent",3,Br),f=ki(e,"descriptionComponentProps",19,(()=>({}))),p=ki(e,"listComponent",3,Cs),v=ki(e,"listComponentProps",19,(()=>({}))),m=ki(e,"sublimeValue",3,(t=>t.id)),b=ki(e,"getItem",3,(({valueId:t})=>o().find((e=>e.value.id===t)))),y=ki(e,"getItemValue",3,(({valueId:t})=>b()({valueId:t}).value)),O=ki(e,"getDefaultItemSublime",3,(()=>o()[0].id)),$=ki(e,"uiOn",3,(t=>{t.color="success",t.outlined=!1})),w=ki(e,"uiOff",3,(t=>{t.color=!1,t.outlined=!0}));function k(){return Array.isArray(a())?l().length:0}gi((()=>{a()&&Array.isArray(a())?s()&&a().length&&a().forEach((t=>{C(A(t))})):function(){if(s()&&o().length>0){_({id:O()()})}}()}));const I=()=>!(s()&&1===k());function A(t){const e=m()(t);let i={on:void 0,off:void 0};return Array.isArray(l())||l([]),n()?l().includes(e)?I()&&(l().splice(l().indexOf(e),1),i.off={valueId:e}):(l().push(e),i.on={valueId:e}):s()?l().includes(e)||(k()>0&&(i.off={valueId:l().pop()}),i.on={valueId:e},l([e])):l().includes(e)?(i.off={valueId:e},l().splice(l().indexOf(e),1)):(i.on={valueId:e},l().push(e)),l(l()),i}function _(t){C(A(t)),function(){let t=[];void 0!==l()&&Array.isArray(l())&&(t=l().filter((t=>void 0!==t)).map((t=>y()({valueId:t}))));a(t)}(),i("change",{field:r(),value:a()})}function C(t){t.off&&w()(b()(t.off)),t.on&&$()(b()(t.on)),o(o())}const E=D(p);var S=ye(),L=re(S),N=D((()=>({...f(),action(t,e){_(e)}})));Ve(L,(()=>Wt(E)),((t,e)=>{e(t,$i(v,{get items(){return o()},set items(t){o(t)},get titleComponent(){return c()},get titleComponentProps(){return u()},get descriptionComponent(){return g()},get descriptionComponentProps(){return Wt(N)},get imageComponent(){return d()},get imageComponentProps(){return h()}}))})),Oe(t,S),qt()},UIListSelectButtonsWithGroups:function(t,e){Ht(e,!0);let i=ki(e,"onchange",3,(()=>!0)),r=ki(e,"fieldname",3,"list-select-tags"),n=ki(e,"variants",31,(()=>Gt([]))),s=ki(e,"value",15),o=ki(e,"titleComponent",3,nn),a=ki(e,"titleComponentProps",19,(()=>({size:5}))),l=ki(e,"imageComponent",3,Mn),c=ki(e,"imageComponentProps",19,(()=>({covered:!0}))),u=ki(e,"descriptionComponent",3,Gr),d=ki(e,"descriptionComponentProps",19,(()=>({}))),h=ki(e,"listComponent",3,Cs),g=ki(e,"listComponentProps",19,(()=>({}))),f=ki(e,"actionsList",19,(()=>["selectAll","deselectAll"])),p=ki(e,"sublimeValue",3,(t=>({groupId:t.group,valueId:t.id})));const v={selectAll:{title:"Выбрать все",color:"success",action(){b()}},deselectAll:{title:"Снять выделение со всех",color:"",action(){y()}}};let m=L(Gt([]));gi((()=>{f().forEach((t=>{Object.hasOwn(v,t)&&Wt(m).push(v[t])})),F(m,Gt(Wt(m)))}));const b=()=>{$(!0)},y=()=>{$(!1)},O=(t,e)=>{n().forEach((i=>{t===i.id&&i.description.values.forEach((t=>{t.selected=e}))})),n(n()),k()},$=t=>{n().forEach((e=>{e.description.values.forEach((e=>{e.selected=t}))})),n(n()),k()};function w(){let t={};return n().forEach((e=>{Object.hasOwn(t,e.id)||(t[e.id]=[]),e.description.values.forEach((i=>{i.selected&&t[e.id].push(p()(i.value))}))})),t}function k(){s(w()),i()({fieldname:r(),value:s()})}const I=D(h);var A=Es(),_=re(A);Br(_,{get values(){return Wt(m)},centered:!0});var C=ne(_,2),E=D((()=>({action:(t,e,i)=>(setTimeout(k,0),!i),...d()})));return Ve(C,(()=>Wt(I)),((t,e)=>{e(t,$i(g,{get items(){return n()},set items(t){n(t)},get titleComponent(){return o()},get titleComponentProps(){return a()},get descriptionComponent(){return u()},get descriptionComponentProps(){return Wt(E)},get imageComponent(){return l()},get imageComponentProps(){return c()}}))})),Oe(t,A),qt({selectAll:b,deselectAll:y,selectGroup:t=>{O(t,!0)},deselectGroup:t=>{O(t,!1)},setSelectionOfGroup:O,setSelectionOfAll:$,getSelectedItems:w})},UIListSelectWithGroups:function(t,e){Ht(e,!0);let i=ki(e,"onchange",3,(()=>!0)),r=ki(e,"fieldname",3,"list-select-tags"),n=ki(e,"multiple",3,!1),s=ki(e,"onlyOneInGroup",3,!0),o=ki(e,"atLeastOne",3,!0),a=ki(e,"variants",31,(()=>Gt([]))),l=ki(e,"variantsSelected",31,(()=>Gt({}))),c=ki(e,"value",15),u=ki(e,"titleComponent",3,nn),d=ki(e,"titleComponentProps",19,(()=>({size:5}))),h=ki(e,"imageComponent",3,Mn),g=ki(e,"imageComponentProps",19,(()=>({covered:!0}))),f=ki(e,"descriptionComponent",3,Br),p=ki(e,"descriptionComponentProps",19,(()=>({}))),v=ki(e,"listComponent",3,Cs),m=ki(e,"listComponentProps",19,(()=>({}))),b=ki(e,"sublimeValue",3,(t=>({groupId:t.group,valueId:t.id}))),y=ki(e,"getItem",3,(({groupId:t,valueId:e})=>a().find((e=>e.id===t)).description.values.find((t=>t.value.id===e)))),O=ki(e,"getItemValue",3,(({groupId:t,valueId:e})=>y()({groupId:t,valueId:e}).value)),$=ki(e,"getDefaultItemSublime",3,(()=>({groupId:a()[0].id,valueId:a()[0].description.values[0].value.id}))),w=ki(e,"uiOn",3,(t=>{t.color="success",t.outlined=!1})),k=ki(e,"uiOff",3,(t=>{t.color=!1,t.outlined=!1}));function I(t){const{valueId:e,groupId:i}=b()(t);let r={on:void 0,off:void 0};return n()?(s()?(void 0!==l()[i]&&(r.off={groupId:i,valueId:l()[i]}),l(l()[i]=e,!0),r.on={groupId:i,valueId:e}):(Array.isArray(l()[i])||l(l()[i]=[],!0),l()[i].includes(e)?function(){let t=0;if(n())for(let e of Object.values(l()))s()?void 0!==e&&(t+=1):void 0!==e&&Array.isArray(e)&&(t+=e.length);else void 0!==l()&&void 0!==l().value&&void 0!==l().group&&(t+=1);return t}()>1&&(l()[i].splice(l()[i].indexOf(e),1),r.off={groupId:i,valueId:e}):(l()[i].push(e),r.on={groupId:i,valueId:e}),l(l()[i]=l()[i],!0)),l(l())):l()&&l().groupId===i&&l().valueId===e?o()||(l(void 0),r.off={groupId:i,valueId:e}):(l()&&void 0!==l().groupId&&(r.off={groupId:l().groupId,valueId:l().valueId}),r.on={groupId:i,valueId:e},l({groupId:i,valueId:e})),r}function A(t){_(I(t)),function(){if(n()){let t={};if(s())for(let e in l())void 0!==l()[e]&&(t[e]=O()({groupId:e,valueId:l()[e]}));else for(let e in l())void 0!==l()[e]&&Array.isArray(l()[e])&&(t[e]=l()[e].filter((t=>void 0!==t)).map((t=>O()({groupId:e,valueId:t}))));0==Object.keys(t).length?c(void 0):c(t)}else l()?c(O()(l())):c(void 0)}(),i()({field:r(),value:c()})}function _(t){t.off&&k()(y()(t.off)),t.on&&w()(y()(t.on)),a(a())}gi((()=>{if(c())if(n())if(s())for(let t of Object.keys(c())){_(I(c()[t]))}else for(let t of Object.keys(c()))c()[t].forEach((t=>{_(I(t))}));else{_(I(c()))}else!function(){if(o()&&a().length>0){const t=$()();A({id:t.valueId,group:t.groupId})}}()}));const C=D(v);var E=ye(),S=re(E),L=D((()=>({...p(),action(t,e){A(e)}})));Ve(S,(()=>Wt(C)),((t,e)=>{e(t,$i(m,{get items(){return a()},set items(t){a(t)},get titleComponent(){return u()},get titleComponentProps(){return d()},get descriptionComponent(){return f()},get descriptionComponentProps(){return Wt(L)},get imageComponent(){return h()},get imageComponentProps(){return g()}}))})),Oe(t,E),qt()}});const Ls=t=>t;function Ns(t,{delay:e=0,duration:i=400,easing:r=Ls}={}){const n=+getComputedStyle(t).opacity;return{delay:e,duration:i,easing:r,css:t=>"opacity: "+t*n}}function Fs(t,e,i){e()&&i(t)}function Ts(t,e){e()}var Ms=me('<button aria-label="delete button"></button>'),Ds=me('<div role="button" tabindex="0"><!> <!></div>');function Us(t,e){Ht(e,!0);let i=L("");let r=ki(e,"closeButton",3,!1),n=ki(e,"show",3,!0),s=ki(e,"closeOnClick",3,!0),o=ki(e,"closeSize",3,"normal"),a=ki(e,"layer",3,1),l=ki(e,"classes",3,""),c=ki(e,"onreject",3,(()=>!1));function u(t){try{if(t&&t.originalTarget){const e=t.originalTarget;e.classList&&e.classList.contains("is-overlay")&&h()}}catch{}}function h(t={}){c()(t)}var g;gi((()=>{F(i,Gt(document.body.style.overflow)),n()?document.body.style.overflow="hidden":document.body.style.overflow=Wt(i)})),g=()=>{document.body.style.overflow=Wt(i)},null===Et&&ut(),gi((()=>()=>Bt(g)));var f=ye();De(re(f),n,(t=>{var i=Ds();i.__click=[Fs,s,u],i.__keyup=[Fs,s,u];var n=ie(i);De(n,r,(t=>{var e=Ms();e.__click=[Ts,h],G((()=>Ke(e,`delete is-${o()??""}`))),Oe(t,e)})),ze(ne(n,2),(()=>e.children??d)),G((()=>{Ke(i,`is-overlay not-overlay ${l()??""}`),He(i,"style",`z-index: ${1e3*a()??""};`)})),function(t,e,i,r){var n,s,o,a=!!(4&t),l=e.inert;function c(){var t=bt,s=Ot;yt(null),$t(null);try{return n??=i()(e,r?.()??{},{direction:"both"})}finally{yt(t),$t(s)}}var u={is_global:a,in(){e.inert=l,Ze(e,"introstart"),s=ri(e,c(),o,1,(()=>{Ze(e,"introend"),s?.abort(),s=n=void 0}))},out(t){e.inert=!0,Ze(e,"outrostart"),o=ri(e,c(),s,0,(()=>{Ze(e,"outroend"),t?.()}))},stop:()=>{s?.abort(),o?.abort()}},d=Ot;if((d.transitions??=[]).push(u),Ee){var h=a;if(!h){for(var g=d.parent;g&&g.f&O;)for(;(g=g.parent)&&!(16&g.f););h=!g||!!(16384&g.f)}h&&H((()=>{Bt((()=>u.in()))}))}}(3,i,(()=>Ns)),Oe(t,i)})),Oe(t,f),qt()}ge(["click","keyup"]);var xs=me('<div><span class="title"> </span></div> <!> <!> <!>',1),Rs=me("<!> <!>",1);var Ps=me("<div><!> <!> <!></div>");function js(t,e){Ht(e,!0);const i=mi();let r=fi(),n=ki(e,"show",3,!0),s=ki(e,"term",15,""),o=ki(e,"size",3,"narrow"),a=ki(e,"inputComponent",3,hn),l=ki(e,"inputComponentProps",19,(()=>({}))),c=ki(e,"outputComponent",3,cs),u=ki(e,"outputComponentProps",19,(()=>({}))),d=ki(e,"results",31,(()=>Gt({list:[],page:0,pages:0,skip:0,count:0})));gi((()=>{}));const h=[{title:vi(Hi,"$LOCALE",i)["not-node:button_cancel_label"],action:()=>{r("reject")}}];function g({detail:t}){console.log("selected user",t),r("resolve",t)}Us(t,{get show(){return n()},closeOnClick:!0,closeButton:!1,$$events:{reject:function(){r("reject")}},children:(t,i)=>{var r=Ps();const n=D(a),f=D(c);var p=ie(r);Ve(p,(()=>Wt(n)),((t,i)=>{i(t,$i({get term(){return s()},set term(t){s(t)}},l,{$$events:{termChange(t){hi.call(this,e,t)}}}))}));var v=ne(p,2);Ve(v,(()=>Wt(f)),((t,i)=>{i(t,$i({get data(){return d()},set data(t){d(t)}},u,{$$events:{prev(t){hi.call(this,e,t)},next(t){hi.call(this,e,t)},select:g}}))})),Br(ne(v,2),{values:h,centered:!0,classes:"mt-5"}),G((()=>Ke(r,`paper box block ${o()??""} svelte-1gllhdk`))),Oe(t,r)},$$slots:{default:!0}}),qt()}var Ws=Object.freeze({__proto__:null,UIGenericSelector:js,UIModal:function(t,e){Ht(e,!0);const i=mi(),r=()=>vi(Hi,"$LOCALE",i);let n=ki(e,"buttonsPosition",3,"bottom"),s=ki(e,"closeButton",3,!1),o=ki(e,"applyButton",3,!1),a=ki(e,"titleSize",3,2),l=ki(e,"show",3,!1),c=ki(e,"loading",3,!1),u=ki(e,"title",3,"Modal window"),h=ki(e,"subtitle",3,""),g=ki(e,"classes",3,""),f=ki(e,"overlayClasses",3,""),p=ki(e,"buttonsClasses",3,""),v=ki(e,"WAITING_TEXT",3,"Обработка");Us(t,{get show(){return l()},closeOnClick:!1,closeButton:!1,get classes(){return f()},children:(t,i)=>{Ri(t,{get classes(){return g()},children:(t,i)=>{var l=Rs(),g=re(l);nn(g,{get size(){return a()},get title(){return r()[u()]},get subtitle(){return r()[h()]}}),ji(ne(g,2),{children:(t,i)=>{var a=xs(),l=re(a),u=ie(l),h=ie(u),g=ne(l,2);De(g,(()=>"top"===n()),(t=>{var e=D((()=>s()?[s()]:[])),i=D((()=>o()?[o()]:[]));Vr(t,{get classes(){return p()},get left(){return Wt(e)},get right(){return Wt(i)}})}));var f=ne(g,2);ze(f,(()=>e.children??d)),De(ne(f,2),(()=>"bottom"===n()),(t=>{var e=D((()=>p()||"is-footer is-mobile")),i=D((()=>s()?[s()]:[])),r=D((()=>o()?[o()]:[]));Vr(t,{get classes(){return Wt(e)},get left(){return Wt(i)},get right(){return Wt(r)}})})),G((()=>{Ke(l,`pageloader ${(c()?"is-active":"")??""}`),Le(h,r()[v()])})),Oe(t,a)},$$slots:{default:!0}}),Oe(t,l)},$$slots:{default:!0}})},$$slots:{default:!0}}),qt()},UIOverlay:Us}),Bs=me('<article class="message is-danger"><div class="message-header"><p> </p></div> <div class="message-body"> </div></article>');function zs(t,e){Ht(e,!0);const i=mi(),r=()=>vi(Hi,"$LOCALE",i);var n=Bs(),s=ie(n),o=ie(s),a=ie(o),l=ie(ne(s,2));G((()=>{Le(a,r()[e.title]),Le(l,r()[e.message])})),Oe(t,n),qt()}var Vs=me('<article class="message is-success"><div class="message-header"><p> </p></div> <div class="message-body"> </div></article>');function Hs(t,e){Ht(e,!0);const i=mi(),r=()=>vi(Hi,"$LOCALE",i);var n=Vs(),s=ie(n),o=ie(s),a=ie(o),l=ie(ne(s,2));G((()=>{Le(a,r()[e.title]),Le(l,r()[e.message])})),Oe(t,n),qt()}function qs(t,e){localStorage.setItem("cookie_date",Date.now()),e(!1)}var Gs=me('<div id="cookie_notification" class="svelte-19d5xat"><p class="svelte-19d5xat"> </p> <button class="button is-success cookie_accept svelte-19d5xat"> </button></div>');ge(["click"]);var Js=Object.freeze({__proto__:null,UICookieNotification:function(t,e){Ht(e,!0);const i=mi(),r=()=>vi(Hi,"$LOCALE",i);let n=ki(e,"show",15,!1),s=ki(e,"message",3,"Для улучшения работы сайта и его взаимодействия с пользователями мы используем файлы cookie. Продолжая работу с сайтом, Вы разрешаете использование cookie-файлов. Вы всегда можете отключить файлы cookie в настройках Вашего браузера."),o=ki(e,"agree",3,"Хорошо");gi((()=>{let t=localStorage.getItem("cookie_date");(!t||+t+31536e6<Date.now())&&n(!0)}));var a=ye();De(re(a),n,(t=>{var e=Gs(),i=ie(e),a=ie(i),l=ne(i,2);l.__click=[qs,n];var c=ie(l);G((()=>{Le(a,r()[s()]),Le(c,r()[o()])})),Oe(t,e)})),Oe(t,a),qt()},UIError:zs,UISuccess:Hs}),Ks=Object.freeze({__proto__:null,Blocks:Wi,Buttons:Jr,Forms:Nn,Icons:An,Images:Un,Layouts:Vn,Links:es,Lists:Ss,Modals:Ws,Notifications:Js,UICommon:Mi,Various:gn});const Ys=Symbol("init"),Qs=Symbol("data"),Xs=Symbol("working"),Zs=Symbol("options");class to extends er{constructor(t){return super(),this[Qs]={},this[Xs]={},this[Zs]={},this[Ys](t),this}[Ys](t){t||(t={}),Object.hasOwn(t,"data")&&this.setData(t.data),Object.hasOwn(t,"working")&&this.setWorking(t.working),Object.hasOwn(t,"options")&&this.setOptions(t.options),this.log=ur.genLogMsg(this.getWorking("name")),this.info=this.log,this.debug=ur.genLogDebug(this.getWorking("name")),this.error=ur.genLogError(this.getWorking("name"))}setCommon(t,e){switch(e.length){case 1:t=e[0];break;case 2:nr.set(e[0],t,void 0,e[1])}return this}getCommon(t,e){switch(e.length){case 1:return nr.get(e[0],t);case 2:{let i=nr.get(e[0],t);return void 0===i?e[1]:i}default:return t}}setData(){return 1===arguments.length?this[Qs]=arguments[0]:this.setCommon(this.getData(),arguments),this.emit("change"),this}getData(){return this.getCommon(this[Qs],arguments)}setOptions(){return 1===arguments.length?this[Zs]=arguments[0]:this.setCommon(this.getOptions(),arguments),this}getOptions(){return this.getCommon(this[Zs],arguments)}setWorking(){return 1===arguments.length?this[Xs]=arguments[0]:this.setCommon(this.getWorking(),arguments),this}getWorking(){return this.getCommon(this[Xs],arguments)}report(t){ur.report&&ur.report(t)}getApp(){return ur.getApp()}destroy(){this.removeEvent(),this.setOptions(null),this.setWorking(null),this.setData(null),this.emit("destroy")}}const eo=Symbol("history"),io=Symbol("hash");var ro=new class extends to{constructor(){return super({working:{routes:[],mode:eo,root:"/",initialized:!1,delays:Yr,delay_default:Qr}}),Fi(this,"host",""),this}setDelays(t){return this.setWorking("delays",t),this}setDefaultNavigationDelay(t){return this.setWorking("delay_default",this.delayAsMs(t)),this}getDefaultNavigationDelay(){return this.getWorking("delay_default",Qr)}delayAsMs(t){return"number"==typeof t?t:"string"==typeof t&&t.length>0?this.getWorking(`delays.${t}`,this.getDefaultNavigationDelay()):this.getDefaultNavigationDelay()}navigateWithDelay(t,e,i){var r=this;return setTimeout((function(){"function"==typeof i&&i(),r.navigate(t)}),this.delayAsMs(e))}history(){this.setWorking("mode",eo)}hash(){this.setWorking("mode",io)}setRoot(t){return this.setWorking("root",t&&"/"!==t?"/"+this.clearSlashes(t)+"/":"/"),this}clearSlashes(t){return t.toString().replace(/\/$/,"").replace(/^\//,"")}add(t,e){"function"==typeof t&&(e=t,t="");let i={re:t,handler:e};return this.getWorking("routes").push(i),this}addList(t){for(let e in t)this.add(e,t[e]);return this}remove(t){for(var e,i=0;this.getWorking("routes").length,e=this.getWorking("routes")[i];i++)if(e.handler===t||e.re===t)return this.getWorking("routes").splice(i,1),this;return this}flush(){return this.setWorking({routes:[],mode:eo,root:"/"}),this}isInitialized(){return this.getWorking("initialized")}setInitialized(t=!0){return this.setWorking("initialized",t)}getFragment(){var t="";if(this.getWorking("mode")===eo){if(!location)return"";t=(t=this.clearSlashes(decodeURI(location.pathname+location.search))).replace(/\?(.*)$/,""),t="/"!=this.getWorking("root")?t.replace(this.getWorking("root"),""):t}else{if(!window)return"";var e=window.location.href.match(/#(.*)$/);t=e?e[1]:""}return this.clearSlashes(t)}checkLocation(){let t=this.getWorking("current"),e=this.getFragment(),i=this.isInitialized();t===e&&i||(this.setWorking("current",e),this.check(e),this.setInitialized(!0))}hrefClick(){}getRoot(){return this.getWorking("root")}listen(t=50){return this.setWorking("current","notInitialized"),clearInterval(this.getWorking("interval")),this.setWorking("interval",setInterval(this.checkLocation.bind(this),t)),window.addEventListener("popstate",this.hrefClick.bind(this)),this}check(t){let e=t||this.getFragment(),i=null;for(let t=0;t<this.getWorking("routes").length;t++){let r=this.getWorking("root")+this.getWorking("routes")[t].re,n=this.clearSlashes(decodeURI(r)),s=e.match(n);if(s&&s.length){if(""!==n)return s.shift(),this.getWorking("routes")[t].handler.apply(this.host||{},s),this.emit("afterRoute",this.getWorking("routes")[t]),this;s.shift(),i={route:this.getWorking("routes")[t],match:s}}}return i&&(i.route.handler.apply(this.host||{},i.match),this.emit("afterRoute",i.route)),this}refresh(t=0){var e=this;t>0?setTimeout((function(){return e.refresh()}),t):this.check(this.getWorking("current"))}navigate(t){switch(t=t||"",this.getWorking("mode")){case eo:{const e=this.getFullRoute(t);e===this.lastRoute?this.refresh():(this.lastRoute=e,history.pushState(null,"",this.lastRoute));break}case io:window.location.href.match(/#(.*)$/),window.location.href=window.location.href.replace(/#(.*)$/,"")+"#"+t}return this}getFullRoute(t=""){t=this.clearSlashes(t);const e=this.getWorking("root");return"/"!==e&&0===t.indexOf(e.substring(1))?"/"+t:this.getWorking("root")+this.clearSlashes(t)}getAllLinks(){const t=document.body.querySelectorAll("a");let e=[];for(let i=0;i<t.length;i++)for(let r=0,n=t[i].attributes,s=n.length;r<s;r++)if(0===n[r].nodeName.indexOf("n-href")){e.push(t[i]);break}return e}reRouteExisted(){const t=this.getAllLinks();for(let e=0;e<t.length;e++)this.initRerouting(t[e],t[e].getAttribute("n-href"));return this}initRerouting(t,e){var i=this;if(!t.notRouterInitialized){let r=this.getFullRoute(e);t.setAttribute("href",r),t.addEventListener("click",(function(t){return t.preventDefault(),i.navigate(e),!1})),t.notRouterInitialized=!0}return this}};class no extends to{constructor(t={}){return super({working:{name:t.name?t.name:"APIQuee"},options:t}),this.busy=!1,this.queue=[],this.busySince=-1,this.afterEmpty=void 0,this.start(),this}stop(){this.interval&&(clearInterval(this.interval),this.interval=void 0,this.busy=!1,this.busySince=-1)}start(){this.stop(),this.interval=setInterval(this.checkQueue.bind(this),this.QUEUE_CHECK_INTERVAL)}checkQueue(){var t=this;if(this.isEmpty()||this.isBusy()){if(!this.isBusy()&&this.afterEmpty){let t=this.afterEmpty;this.afterEmpty=void 0,t()}}else this.setBusy().runNext().then(this.setFree.bind(this)).catch((function(e){t.error&&t.error(e),t.setFree()}))}addToQueue(t){this.queue.push(t)}runNext(){let t=this.queue.map((function(t){return t.title})).join(", ");this.debug&&this.debug(`tasks [${t}]`);let e=this.queue.shift();return ur.isFunc(e.action)?ur.isFunc(e.resolve)?e.action().then(e.resolve):(this.error&&this.error("В задании нет возвратной части, resolve не функция",e.title),e.action()):(this.error&&this.error("В задании нет исполнимой части, action не функция",e.title),Promise.resolve())}isBusy(){let t=!!this.busy,e=Date.now()/1e3;return!!(t&&this.busySince>-1)&&(!(e-this.busySince>no.MAX_BUSY_TIME)||(this.setFree(),!1))}setBusy(){return this.busy=!0,this.busySince=Date.now()/1e3,this}setFree(){return this.busy=!1,this.busySince=-1,this}isEmpty(){return 0===this.queue.length}run(t,e=void 0,i=""){var r=this;return e&&void 0===this.afterEmpty&&(this.afterEmpty=e),new Promise((function(e,n){try{r.addToQueue({action:t,resolve:e,title:i})}catch(t){r.error&&r.error(t),n(t)}}))}actionIsQueued(t){return this.queue.some((function(e){return e.title==t}))}runIfNotQueued(t,e=void 0,i=""){return this.actionIsQueued(i)?Promise.resolve():this.run(t,e,i)}}Fi(no,"QUEUE_CHECK_INTERVAL",100),Fi(no,"MAX_BUSY_TIME",300);class so extends to{constructor(t){return super({options:t,working:{name:t.name?t.name:"APIConnection"}}),this.online=null,this.run(),this}run(){this.int=window.setInterval(this.check.bind(this),1e3)}pause(){window.clearInterval(this.int)}resume(){this.run()}isOnline(){return window.navigator.onLine}check(){let t=this.isOnline();null!==this.online&&this.online!==t&&this.changeState(t),this.online=t}changeState(t=!1){t?this.emit("online"):this.emit("offline")}}Fi(so,"int",void 0),Fi(so,"online",void 0);var oo=Object.freeze({__proto__:null,notAPIConnection:so,notAPIOptions:{rps:50,protocol:"http",host:"localhost",port:9e3},notAPIQueue:no});const ao={};function lo(t){return ur.objHas(ao,t)}var co=Object.freeze({__proto__:null,create:function(t,e={raw:[],filtered:[],selected:{}}){if(!lo(t)){if(!(Object.keys(e).length>0))throw new Error("store's props wasn't specified");ao[t]={},Object.keys(e).forEach((function(i){ao[t][i]=zi(e[i])}))}return ao[t]},fake:function(t){return{subscribe:e=>(e(t),function(){}),set(){}}},get:function(t){return!!lo(t)&&ao[t]}}),uo=new WeakMap;class ho{constructor(t){Si(this,uo,{}),t instanceof ho&&this.import(t.getContent())}add(t,e,i="replace"){this.contains(t)?"replace"===i?Ei(uo,this)[t]=e:"add"===i&&(Ei(uo,this)[t]=Object.assign(Ei(uo,this)[t],e)):Ei(uo,this)[t]=e}get(t){return Ei(uo,this)[t]}contains(t){return Object.hasOwn(Ei(uo,this),t)}import(t,e="replace"){for(let i in t)this.add(i,t[i],e)}isEmpty(){return 0===Object.keys(Ei(uo,this)).length}getContent(){return{...Ei(uo,this)}}}const go=new ho,fo=new ho,po=new ho,vo=Symbol("interface"),mo=["getActionsCount","getActions","setFindBy","resetFilter","setFilter","getFilter","setSorter","getSorter","resetSorter","setPageNumber","setPageSize","setPager","setReturn","setSearch","getSearch","resetSearch","resetPager","getPager","addFormFieldType","addFormField","getFieldTypes","getActionFormFields"],bo=["_id","id","ID"],yo={},Oo={};class $o extends to{constructor(t,e){return super({working:{name:"network interface for: "+(t.model?t.model:"unknown"),filter:yo,search:"",return:Oo,pager:{size:10,page:0}},options:e}),this.manifest=t,this.initActions(),this}initActions(){if(this.getActionsCount()>0){let t=this.getActions();for(let e in t)this.initAction(e)}}initAction(t){var e=this;ur.objHas(this,"$"+t)||(this["$"+t]=function(i,r,n=!1,s){return e.request(e,t,i,r,n,s)})}requestHTTP(t,e,i,r={},n=!1,s){try{let o=Object.assign({},t.getData&&"function"==typeof t.getData?t.getData():t,i),a=this.getActionData(e),l=this.collectRequestData(a),c=this.encodeRequest(l),u=this.getServerURL(),d=this.getURL(o,a,e),h={};if(n){d=this.getURL(i,a,e);const t=new FormData;t.append("file",s),h.body=t}else-1===["OPTIONS","GET"].indexOf(a.method.toUpperCase())&&(h={method:a.method,body:JSON.stringify(t.getData&&"function"==typeof t.getData?t.getData():t),headers:{Accept:"application/json","Content-Type":"application/json"}});return h.method=a.method.toUpperCase(),r&&Object.keys(r).length&&(h.headers=r),fetch(u+d+c,h).then((function(t){return t.json()}))}catch(t){ur.error(t),ur.report(t)}}requestWS(t,e){try{let i=this.getActionData(e),r=this.collectRequestData(i);const n=ur.getApp().getWSClient(),s=this.getWSRequestName(e),o=Object.assign({},r,t.getData());return ur.objHas(i,"type")&&"string"==typeof i.type&&i.type.length&&"request"!==i.type?n.message(i.type,s,o).then((function(t){return t.payload})):n.request(s,o).then((function(t){return t.payload}))}catch(t){ur.error(t),ur.report(t)}}request(){let t=this.getActionData(arguments[1]);switch(this.selectTransport(t)){case"ws":return this.requestWS(...arguments);case"http":return this.requestHTTP(...arguments);default:throw new Error("Offline")}}wsIsUp(t){if(!0===t.ws){let e;if(e=ur.objHas(t,"wsClient")&&t.wsClient?ur.getApp().getWSClient(t.wsClient):ur.getApp().getWSClient(),e)return!0}return!1}selectTransport(t){return this.wsIsUp(t)?"ws":!!ur.objHas(t,"method")&&"http"}getModelName(){return this&&this.manifest?this.manifest.model:null}getActionData(t){return this.getActions()&&this.getActions()[t]?this.getActions()[t]:null}getActionsCount(){return this.getActions()?Object.keys(this.getActions()).length:0}getActions(){return this.manifest&&this.manifest.actions?this.manifest.actions:{}}parseParams(t,e,i,r){let n="",s=t.length;for(;i.indexOf(t)>-1;){let o=i.indexOf(t),a=o+s,l=i.indexOf(e);if(o>l)break;if(n=i.slice(a,l),""==n)break;this.log&&this.log(t+n+e,nr.get(n,r)),i=i.replace(t+n+e,nr.get(n,r))}return i}parseLine(t,e,i){return t=(t=t.replace(":modelName",this.manifest.model)).replace(":actionName",i),t=this.parseParams(":record[","]",t,e),t=this.parseParams(":","?",t,e)}getURL(t,e,i){return this.parseLine(this.manifest.url,t,i)+(ur.objHas(e,"postFix")?this.parseLine(e.postFix,t,i):"")}getServerURL(){return ur.getApp()?ur.getApp().getOptions("api.server.url",""):""}getWSRequestName(t){return`${this.manifest.model}//${t}`}encodeRequest(t){let e="?";for(let i in t)void 0!==t[i]&&null!==t[i]&&(e+=encodeURIComponent(i)+"="+encodeURIComponent(t[i].constructor===Object?JSON.stringify(t[i]):t[i])+"&");return this.getOptions("test")&&(e+="&test=1",this.getOptions("test.session")&&(e+="&session="+this.getOptions("test.session")),this.getOptions("test.session")&&(e+="&role="+this.getOptions("test.role"))),e}collectRequestData(t){let e={};if(ur.objHas(t,"data")&&Array.isArray(t.data))for(let i=0;i<t.data.length;i++){let r="get"+ur.capitalizeFirstLetter(t.data[i]);if(this[r]&&"function"==typeof this[r]){let n=this[r](),s={};["pager","sorter","filter","search","return"].indexOf(t.data[i])>-1?s[t.data[i]]=n:s=n,e=Object.assign(e,s)}}return e}getID(t,e){let i,r=bo,n=["",this.manifest.model];ur.objHas(e,"index")&&e.index&&(r=[e.index].concat(bo));for(let e of n)for(let n of r)if(ur.objHas(t,e+n)){i=t[e+n];break}return i}setFindBy(t,e){var i={};return i[t]=e,this.setFilter(i)}setFilter(t=yo){return this.setWorking("filter",t),this}resetFilter(){return this.setFilter()}getFilter(){return this.getWorking("filter")}setSearch(t=""){return this.setWorking("search",t),this}resetSearch(){return this.setSearch()}getSearch(){return this.getWorking("search")}setSorter(t){return this.setWorking("sorter",t),this}resetSorter(){return this.setSorter({})}getSorter(){return this.getWorking("sorter")}setReturn(t=Oo){return this.setWorking("return",t),this}resetReturn(){return this.setReturn({})}getReturn(){return this.getWorking("return")}setPageNumber(t){return this.setWorking("pager.page",t),this}setPageSize(t){return this.setWorking("pager.size",t),this}setPager(){if((arguments.length<2||isNaN(arguments[0])||isNaN(arguments[1]))&&arguments[0].constructor===Object&&ur.objHas(arguments[0],"page")&&ur.objHas(arguments[0],"size")){const t=arguments[0];this.setWorking("pager",{size:t.size||10,page:t.page||0})}else 2!==arguments.length||isNaN(arguments[0])||isNaN(arguments[1])||this.setWorking("pager",{size:arguments[0]||10,page:arguments[1]||0});return this}resetPager(){return this.setPager()}getPager(){return this.getWorking("pager")}getRecord(){this.getData()}getDefaultAsPlainObject(){if(!this.manifest||!this.manifest.fields)return{};const t={};for(const e of Object.keys(this.manifest.fields))if(Object.hasOwn(this.manifest.fields[e],"default")){const i=this.manifest.fields[e].default;Array.isArray(i)?t[e]=[...i]:t[e]="object"==typeof i?{...i}:i}return t}}class wo extends to{constructor(t,e){return super(),null==e||"object"!=typeof e?e:e&&e.isProxy?(ur.error("this is Proxy item"),e):e&&(e.isRecord||e.isProperty)?e:Array.isArray(e)?this.createCollection(t,e):(this.setOptions({}),this[vo]=new $o(t,{}),this.setData(e),this.interfaceUp(),this.mapToInterface(),this.mapToMethods(),this)}toDefault(){return this.setData(this[vo].getDefaultAsPlainObject())}mapToInterface(){let t=this;for(let e of mo)this[vo][e]&&"function"==typeof this[vo][e]&&(this[e]=function(){let i=t[vo][e](...arguments);return i==t[vo]?t:i})}mapToMethods(){let t=this[vo].manifest,e=ur.getApp(),i={};if(t.methods?i=t.methods:e&&(i=e.getOptions(["models",this[vo].manifest.model].join("."),{})),i)for(let t in i)Object.hasOwn(i,t)&&(this[t]=i[t])}createCollection(t,e){for(var i=[],r=0;r<e.length;r++)i.push(new wo(t,e[r]));return i}interfaceUp(){if(this[vo].getActionsCount()>0){let t=this[vo].getActions();for(let e in t)this.actionUp(e,t[e])}}actionUp(t){var e=this;Object.hasOwn(this,["$"+t])||(this["$"+t]=function(...i){return e[vo].request(e,t,...i)})}setAttr(t,e){return this.setData(t,e)}setAttrs(t){if(t&&"object"==typeof t&&Object.keys(t).length>0)for(let e in t)this.setAttr(e,t[e])}getAttr(t,e=!1){let i=this.getData(t,{});return e?ur.stripProxy(i):i}getAttrs(t){let e=[];if(t&&t.length>0)for(let i of t)e.push(this.getAttr(i));return e}getManifest(){return this[vo]?this[vo].manifest:{}}setItem(t){return this.setData(t),this}}const ko="main";class Io extends to{constructor(t){return super({working:{name:t.name,interfaces:{},controllers:ur.objHas(t,"controllers")?t.controllers:{},initController:null,currentController:null,uis:{},wsc:{},wss:{},services:{}},options:t}),this?.log&&this.log("start app"),ur.register("app",this),this.initManifest(),this}initManifest(){var t=this;ur.getJSON(this.getOptions("manifestURL")).then((function(e){return t.setInterfaceManifest(e)})).catch((function(t){return ur.report(t)}))}initRouter(){this.setWorking("router",ro),this.getWorking("router").setRoot(this.getOptions("router.root")),ro.reRouteExisted()}execRouter(){var t={};for(let e=0;e<this.getOptions("router.manifest").length;e++){let i=this.getOptions("router.manifest")[e],r=i.paths,n=i.schemes,s=i.controller;for(let e=0;e<r.length;e++){let i=!!(n&&Array.isArray(n)&&n.length>e)&&n[e];t[r[e]]=this.bindController(s,i)}}this.getWorking("router").addList(t).listen()}setInterfaceManifest(t){Object.freeze(t),this.setOptions("interfaceManifest",t),this.initRouter(),this.update()}getInterfaceManifest(t){return t?this.getOptions("interfaceManifest")[t]:this.getOptions("interfaceManifest")}update(){this.updateInterfaces(),this.initController(),this.startApp()}startApp(){this.initServices(),this.execRouter(),this.emit("afterStarted",this)}bindController(t,e){let i=this;return function(){new t(i,arguments,e)}}initController(){if(void 0!==this.getOptions("initController")){let t=this.getOptions("initController");this.setWorking("initController",new t(this))}}getCurrentController(){return this.getWorking("currentController")}setCurrentController(t){let e=this.getCurrentController();return e&&e.destroy&&e.destroy(),this.setWorking("currentController",t),this}createInterfaceModelFactory(t){return function(e){return new wo(t,e)}}updateInterfaces(){this.clearInterfaces();let t=this.getOptions("interfaceManifest");if(t)for(let e in t){let i=t[e],r=this.getOptions(["models",e].join("."),{});i.methods=r;const n=this.createInterfaceModelFactory(i);this.setInterface(e,n)}}getRecordName(t){return"nr"+ur.capitalizeFirstLetter(t)}getControllerName(t){return"nc"+ur.capitalizeFirstLetter(t)}setInterface(t,e){return this.setWorking(`interfaces.${t}`,e)}getInterfaces(){return this.getWorking("interfaces")}clearInterfaces(){return this.setWorking("interfaces",{}),this}setWSClient(t=ko,e){return this.setWorking(`wsc.${t}`,e)}getWSClient(t=ko){return this.getWorking(`wsc.${t}`)}getInterface(t){return this.getInterfaces()[t]}getModel(t,e={}){return this.getInterface(t)(e)}setService(t,e){return this.setWorking(`services.${t}`,e)}getService(t){return this.getWorking(`services.${t}`)}initServices(){if(this.getOptions("services"))for(let t in this.getOptions("services"))try{let e=this.getOptions(`services.${t}`);switch(ur.detectType(e)){case"function":case"class":this.setService(t,new e(this));break;default:this.setService(t,e)}}catch(e){this?.error&&this.error(`Service (${t}) init error`,e)}}getConfigReaderForModule(t=""){var e=this;const i=["modules",t].join(".");return{get:function(t,r){return t&&"string"==typeof t&&t.length?e.getOptions([i,t].join("."),r):e.getOptions(i,r)}}}moduleConfig(t=""){return this.getConfigReaderForModule(t)}}Fi(Io,"DEFAULT_WS_CLIENT_NAME",ko);const Ao="default",_o="main";class Co extends to{static get MODULE_NAME(){return _o}static get MODEL_NAME(){return"ModelName"}static get LABELS(){return{plural:`${_o}:model_label_plural`,single:`${_o}:model_label_single`}}constructor(t,e){var i;super({}),i=this,Fi(this,"els",void 0),Fi(this,"make",void 0),Fi(this,"app",void 0),this.app=t,this.app.setCurrentController(this),this.setWorking({name:e,ready:!1,views:{},libs:{},helpers:{}}),this.ui={},this.els={},this.setData({}),this.setOptions({moduleName:_o,containerSelector:"main.content",prefix:t.getOptions("paths.module"),names:{plural:"Models",single:"Model"}}),this.setURLPrefix(t.getOptions("router.root"));let r=t.getInterfaces();this.make={};for(let t in r)Object.hasOwn(r,t)&&(this.make[t]=r[t]);return this.on("destroy",(function(){i.app=null;for(let t in i.ui)i.ui[t].destroy&&i.ui[t].destroy(),i.ui[t].$destroy&&i.ui[t].$destroy(),i.ui[t]=null;i.els=null,i.make=null})),this}getApp(){return ur.getApp()}setModel(t){return this.setWorking("model",t),this}getModel(t,e){if("string"==typeof t){const i=this.getInterface(t);return i&&i(e||{})}{const e=this.getInterface();return e&&e(t||{})}}getInterface(t=""){return this.app?.getInterface(t||this.getModelName())}getModelName(){return this.getWorking("modelName")}setModelName(t){return this.setWorking("modelName",ur.lowerFirstLetter(t)),this}getModelIDFieldName(){return this.getWorking("modelIDFieldName","_id")}setModelIDFieldName(t="_id"){return this.setWorking("modelIDFieldName",t)}setReady(t=!0){this.setWorking("ready",t),t?this.emit("ready"):this.emit("busy")}setURLPrefix(t){return this.setOptions("urlPrefix",t),this.updateAutoName(),this}getURLPrefix(){return this.getOptions("urlPrefix")}setModuleName(t){return this.setOptions("moduleName",ur.lowerFirstLetter(t)),this.updateAutoName(),this}getModuleName(){return this.getOptions("moduleName")}getModulePrefix(){return[ur.getApp().getOptions("paths.modules"),this.getModuleName()].join("/")}getModelURL(){return ur.buildURL({prefix:this.getURLPrefix(),module:this.getModuleName(),model:this.getModelName()})}getModelActionURL(t,e=""){return ur.buildURL({prefix:this.getURLPrefix(),module:this.getModuleName(),model:this.getModelName(),id:t,action:e})}buildURL(t){return ur.buildURL(t)}updateAutoName(){return this.getOptions("autoName",true),this}setName(t){return this.setWorking("name",t),this.setOptions("autoName",!1),this}getName(){return this.getWorking("name")}preloadLib(t={}){var e=this;return new Promise((function(i,r){if("object"!=typeof t)i(void 0);else{e.setWorking("loading",[]);for(let n in t)e.getWorking("loading").push(t[n]),e.make[t[n]]({}).$listAll().then((function(r){e.getOptions("libs")||e.setOptions("libs",{}),e.getOptions("libs")[n]=r,e.getWorking("loading").indexOf(t[n])>-1&&e.getWorking("loading").splice(e.getWorking("loading").indexOf(t[n]),1),0===e.getWorking("loading").length&&i(void 0)})).catch((function(t){e.report(t),r()}));0===e.getWorking("loading").length&&i(void 0)}}))}onAfterRender(){this.emit("afterRender")}getActionName(t=Ao){return"run"+ur.capitalizeFirstLetter(t)}getDefaultActionName(){return this.getActionName(this.getOptions("defaultAction",Ao))}route(t){let[e,...i]=t,r=this.getActionName(e||Ao);"function"==typeof this[r]?(this.setCurrentAction(r),this[r](i)):this[this.getDefaultActionName()]?(this.setCurrentAction(this.getDefaultActionName()),this[this.getDefaultActionName()](i)):(this.setCurrentAction(void 0),this.error&&this.error("No action in router",t))}setCurrentAction(t){this.setWorking("action",t)}getCurrentAction(){return this.getWorking("action")}getAppOptions(){try{return this.getApp().getOptions()}catch(t){this.error&&this.error(t)}}getModuleOptions(t){try{return this.getApp().getOptions(["modules",t||this.getModuleName()].join("."))}catch(t){this.error&&this.error(t)}}getServices(t){try{return this.getApp().getOptions(["services",t||this.getModuleName()].join("."))}catch(t){this.error&&this.error(t)}}getComponents(t){try{return this.getApp().getOptions(["components",t||this.getModuleName()].join("."))}catch(t){this.error&&this.error(t)}}refresh(t=0){this.app?.getWorking("router").refresh(t)}static getControllerRoute(t=0){let e=[];this.MODULE_NAME&&this.MODULE_NAME.length>0&&e.push(ur.lowerFirstLetter(this.MODULE_NAME)),this.MODEL_NAME&&this.MODEL_NAME.length>0&&e.push(ur.lowerFirstLetter(this.MODEL_NAME)),e=[e.join("/")];for(let i=0;i<t;i++)e.push("/([^/]+)");return e.join("")}static getControllerRoutes(t=0){let e=[this.getControllerRoute(0)];for(let i=0;i<t;i++)e.unshift(this.getControllerRoute(i+1));return e}static getRoutes(){return{paths:this.getControllerRoutes(this.PARAMS_LENGTH),controller:this}}getRouter(){return this.app?.getWorking("router")}navigateWithDelay(t,e=1500,i=function(){}){return this.getRouter().navigateWithDelay(t,e,i)}navigate(t){return this.getRouter().navigate(t)}navigateAction(t,e="",i=0,r=function(){}){return this.navigateModuleAction(this.getModuleName(),this.getModelName(),t,e,i,r)}navigateModelAction(t,e,i="",r=0,n=function(){}){return this.navigateModuleAction(this.getModuleName(),t,e,i,r,n)}navigateModuleAction(t,e,i,r="",n=0,s=function(){}){return n?this.getRouter().navigateWithDelay(ur.buildURL({prefix:this.getURLPrefix(),module:t,model:e,id:i,action:r}),n,s):this.getRouter().navigate(ur.buildURL({prefix:this.getURLPrefix(),module:t,model:e,id:i,action:r}))}static getCommonMenu(t){return[{section:t.MODULE_NAME,title:t.LABELS.plural,url:`/${ur.lowerFirstLetter(t.MODULE_NAME)}/${ur.lowerFirstLetter(t.MODEL_NAME)}`}]}static getMenu(){}}Fi(Co,"PARAMS_LENGTH",2);const Eo={};function So(t){return Object.hasOwn(Eo,t)}function Lo(t){return!!So(t)&&Eo[t]}function No(t,e,i,r){return r("change",{id:e(),field:i(),value:"checkbox"===t.target.type?t.target.checked:t.target.value}),!0}var Fo=me('<input type="checkbox"> <label class="label"></label>',1);ge(["input"]);var To=me("<a> </a>"),Mo=me('<div class="mx-1 tags has-addons svelte-38rpfk"><span class="tag"> </span> <span><!></span></div>'),Do=me("<a> </a>"),Uo=me("<span><!></span>");var xo=me("<td><!></td>");function Ro(t,e){Ht(e,!0);const i=mi();let r=L("");gi((()=>{void 0===s().type&&(Object.hasOwn(s(),"titlePath")?F(r,Gt(nr.get(s().titlePath,o(),a()))):Object.hasOwn(s(),"titleComposer")&&"function"==typeof s().titleComposer?F(r,Gt(s().titleComposer(o(),a()))):F(r,Gt(nr.get(s().path,o(),a()))))}));let n=ki(e,"getItemId",3,(t=>t._id)),s=ki(e,"field",19,(()=>({}))),o=ki(e,"item",19,(()=>({}))),a=ki(e,"helpers",19,(()=>({})));var l=xo();De(ie(l),(()=>"link"===s().type),(t=>{var e=D((()=>nr.get(s().path,o(),a())));ts(t,{get values(){return Wt(e)}})}),(t=>{var e=ye();De(re(e),(()=>"button"===s().type),(t=>{var e=D((()=>nr.get(s().path,o(),a())));Br(t,{get values(){return Wt(e)}})}),(t=>{var e=ye();De(re(e),(()=>"image"===s().type),(t=>{var e=D((()=>nr.get(s().path,o(),a())));Dn(t,{get values(){return Wt(e)}})}),(t=>{var e=ye();De(re(e),(()=>"boolean"===s().type),(t=>{var e=D((()=>nr.get(s().path,o(),a())));br(t,{get values(){return Wt(e)}})}),(t=>{var e=ye();De(re(e),(()=>"tag"===s().type),(t=>{var e=D((()=>nr.get(s().path,o(),a())));!function(t,e){let i=ki(e,"values",19,(()=>[]));var r=ye();xe(re(r),17,i,(t=>t.id),((t,e)=>{var i=ye();De(re(i),(()=>Object.hasOwn(Wt(e),"value")),(t=>{var i=Mo(),r=ie(i),n=ie(r),s=ne(r,2);De(ie(s),(()=>Wt(e).url),(t=>{var i=To(),r=ie(i);G((()=>{He(i,"href",Wt(e).url),Ke(i,`${Wt(e).urlCustomClasses??""} svelte-38rpfk`),Le(r,Wt(e).value)})),Oe(t,i)}),(t=>{var i=be();G((()=>Le(i,Wt(e).value))),Oe(t,i)})),G((()=>{Le(n,Wt(e).title),Ke(s,`tag is-${Wt(e).color??""} ${Wt(e).customClasses??""} svelte-38rpfk`)})),Oe(t,i)}),(t=>{var i=Uo();De(ie(i),(()=>Wt(e).url),(t=>{var i=Do(),r=ie(i);G((()=>{He(i,"href",Wt(e).url),Ke(i,`${Wt(e).urlCustomClasses??""} svelte-38rpfk`),Le(r,Wt(e).title)})),Oe(t,i)}),(t=>{var i=be();G((()=>Le(i,Wt(e).title))),Oe(t,i)})),G((()=>Ke(i,`mx-1 tag is-${Wt(e).color??""} ${Wt(e).customClasses??""} svelte-38rpfk`))),Oe(t,i)})),Oe(t,i)})),Oe(t,r)}(t,{get values(){return Wt(e)}})}),(t=>{var e=ye();De(re(e),(()=>"switch"===s().type),(t=>{var e=D((()=>n()(o()))),i=D((()=>nr.get(s().path,o(),a())));!function(t,e){Ht(e,!0);let i=fi(),r=ki(e,"id",3,""),n=ki(e,"value",15,!1),s=ki(e,"fieldname",3,"switch"),o=ki(e,"disabled",3,!1),a=ki(e,"readonly",3,!1),l=ki(e,"styling",3," is-rounded is-success ");var c=Fo(),u=re(c);u.__input=[No,r,s,i];var d=ne(u,2);G((()=>{Ke(u,`switch ${l()??""}`),He(u,"id",`edit-table-row-cell-inline-switch-${s()??""}-${r()??""}`),He(u,"name",s()),u.readOnly=a(),u.disabled=o(),He(d,"for",`edit-table-row-cell-inline-switch-${s()??""}-${r()??""}`)})),si(u,n),Oe(t,c),qt()}(t,{get id(){return Wt(e)},get fieldname(){return s().path},get value(){return Wt(i)},get disabled(){return s().disabled},get readonly(){return s().readonly},$$events:{change(...t){s().onChange?.apply(this,t)}}})}),(t=>{var e=ye();De(re(e),(()=>s().component),(t=>{var e=ye(),i=re(e),r=D((()=>n()(o()))),l=D((()=>nr.get(s().path,o(),a())));Ve(i,(()=>s().component),((t,e)=>{e(t,$i({get id(){return Wt(r)},get fieldname(){return s().path},get disabled(){return s().disabled},get readonly(){return s().readonly},get value(){return Wt(l)}},(()=>s().options),{$$events:{change(...t){s().onChange?.apply(this,t)}}}))})),Oe(t,e)}),(t=>{var e=ye();De(re(e),(()=>s()&&void 0!==s()&&!isNaN(s().maxLength)&&s().maxLength),(t=>{var e=be();G((()=>Le(e,ur.strLengthCap(nr.get(s().path,o(),a()),s().maxLength)))),Oe(t,e)}),(t=>{var e=be();G((()=>Le(e,vi(Hi,"$LOCALE",i)[nr.get(s().path,o(),a())]))),Oe(t,e)}),!0),Oe(t,e)}),!0),Oe(t,e)}),!0),Oe(t,e)}),!0),Oe(t,e)}),!0),Oe(t,e)}),!0),Oe(t,e)}),!0),Oe(t,e)})),G((()=>{Ke(l,(s().hideOnMobile?" is-hidden-touch ":"")+(s().classes?` ${s().classes} `:"")),He(l,"title",Wt(r))})),Oe(t,l),qt()}function Po(t,e,i,r,n){return t.preventDefault(),e("rowSelectChange",{id:Wt(i),selected:r()[Wt(i)]}),!1}var jo=me('<td><input type="checkbox" placeholder=""></td>'),Wo=me("<tr><!><!></tr>");function Bo(t,e){Ht(e,!0);const i=mi(),r=()=>vi(n,"$selectedList",i);let n,s=fi(),o=L(void 0);gi((()=>{F(o,Gt(d()(a()))),n=Lo(e.id).selected}));let a=ki(e,"item",19,(()=>({}))),l=ki(e,"helpers",19,(()=>({}))),c=ki(e,"fields",19,(()=>[])),u=ki(e,"showSelect",3,!1),d=ki(e,"getItemId",3,(()=>{}));var h=Wo(),g=ie(h);De(g,(()=>u()&&r()),(t=>{var e=jo(),i=ie(e);G((()=>He(i,"id",`table-row-select-${d()(a())??""}`))),G((()=>He(i,"data-id",d()(a())))),G((()=>He(i,"name",`row_selected_${d()(a())??""}`))),i.__change=[Po,s,o,r,n],si(i,(()=>r()[Wt(o)]),(t=>{return e=n,i=Bt(r)[Wt(o)]=t,s=Bt(r),e.set(s),i;var e,i,s})),Oe(t,e)})),xe(ne(g),17,c,Ue,((t,e)=>{Ro(t,{get field(){return Wt(e)},get helpers(){return l()},get item(){return a()},get getItemId(){return d()}})})),Oe(t,h),qt()}function zo(t,e){try{e("searchChange",t.currentTarget.value.trim())}catch{return}}function Vo(t,e){e("goToPrevPage")}function Ho(t,e){e("goToNextPage")}function qo(t,e){t.preventDefault();let i=t.target;return e("goToPage",parseInt(i.dataset.page)),!1}function Go(t,e,i,r,n){Lo(e.id).selected.update((t=>(i().forEach((e=>{t[r()(e)]=n()})),t)))}ge(["change"]);var Jo=me('<div class="field is-grouped"><!></div>'),Ko=me('<div class="field is-grouped"><!></div>'),Yo=me('<div class="field"><div class="control"><input class="input" type="text" placeholder="Поиск"></div></div>'),Qo=me('<th><input type="checkbox" id="table-row-select-page" placeholder="" name="row_selected_all"></th>'),Xo=me("<th><!></th>"),Zo=me('<a href="" class="pagination-link is-current" aria-current="page"> </a>'),ta=me('<a href="" class="pagination-link"> </a>'),ea=me("<li><!></li>"),ia=me('<nav class="pagination is-centered" aria-label="pagination"><a href="" class="pagination-previous">Назад</a> <a href="" class="pagination-next">Вперед</a> <ul class="pagination-list"><!></ul></nav>'),ra=me('<!> <!> <!> <table class="table"><thead><tr><!><!></tr></thead><tbody></tbody></table> <!>',1);ge(["input","change","click"]);const na="__dublicate__",sa={},oa=!1,aa="listAndCount",la="count",ca="preprocessor",ua={ui:function(t,e){Ht(e,!0);const i=mi();let r=fi(),n=ki(e,"helpers",19,(()=>({}))),s=ki(e,"state",31,(()=>Gt({}))),o=ki(e,"filter",31,(()=>Gt({}))),a=ki(e,"sorter",31,(()=>Gt({}))),l=ki(e,"fields",19,(()=>[])),c=ki(e,"selected",31,(()=>Gt({}))),u=ki(e,"items",31,(()=>Gt([]))),d=ki(e,"actions",19,(()=>[])),h=ki(e,"links",19,(()=>[])),g=ki(e,"search",15,""),f=ki(e,"showSearch",3,!0),p=ki(e,"showSelect",3,!0),v=ki(e,"selectAll",15,!1),m=ki(e,"getItemId",3,(t=>t._id));function b({detail:t}){try{r("searchChange",t)}catch{return}}function y({detail:t}){try{r("filterChange",t)}catch{return}}gi((()=>{p()&&Lo(e.id).selected.subscribe((t=>{c(t)})),Lo(e.id).refined.subscribe((t=>{if(u(t),p()){for(let t in c())u().some((e=>m()(e)===t))?Object.hasOwn(c(),t)||c(c()[t]=!1,!0):delete c()[t];c(c())}})),Lo(e.id).state.subscribe((t=>{s(t)}))}));var O=ra(),$=re(O);De($,(()=>h().length),(t=>{var e=Jo();ts(ie(e),{get values(){return h()}}),Oe(t,e)}));var w=ne($,2);De(w,(()=>d().length),(t=>{var e=Ko();Br(ie(e),{get values(){return d()}}),Oe(t,e)}));var k=ne(w,2);De(k,f,(t=>{var i=ye();De(re(i),(()=>e.filterUI),(t=>{var i=ye();const r=D((()=>e.filterUI));Ve(re(i),(()=>Wt(r)),((t,e)=>{e(t,{get filter(){return o()},set filter(t){o(t)},$$events:{change:y,searchChange:b}})})),Oe(t,i)}),(t=>{var e=Yo(),i=ie(e),n=ie(i);n.__input=[zo,r],ni(n,g),Oe(t,e)})),Oe(t,i)}));var I=ne(k,2),A=ie(I),_=ie(A),C=ie(_);De(C,p,(t=>{var i=Qo(),r=ie(i);r.__change=[Go,e,u,m,v],si(r,v),Oe(t,i)})),xe(ne(C),17,l,Ue,((t,e)=>{var n=Xo();const s=D((()=>Wt(e).path.substring(1)));var o=D((()=>function(t){const e=t.path.substring(1);Object.hasOwn(a(),e)?a(a()[e]=-1*parseInt(a()[e]),!0):a({[e]:1}),r("sorterChange",a())}(Wt(e))));n.__click=function(...t){Wt(o)?.apply(this,t)},De(ie(n),(()=>Wt(e).sortable&&Object.hasOwn(a(),Wt(s))),(t=>{var i=D((()=>a()[Wt(s)]>0?"sort-up":"sort-down"));$n(t,{get font(){return Wt(i)},get title(){return Wt(e).title},pointable:!0})}),(t=>{var r=be();G((()=>Le(r,vi(Hi,"$LOCALE",i)[Wt(e).title]))),Oe(t,r)})),G((()=>Ke(n,(Wt(e).hideOnMobile?" is-hidden-touch":"")+(Wt(e).sortable?" is-clickable":"")))),Oe(t,n)})),xe(ne(A),21,u,(t=>t._id),((t,i)=>{Bo(t,{get id(){return e.id},get item(){return Wt(i)},get fields(){return l()},get helpers(){return n()},get showSelect(){return p()},get getItemId(){return m()},$$events:{rowSelectChange(t){hi.call(this,e,t)}}})})),De(ne(I,2),(()=>s()?.pagination?.pages?.list.length>1),(t=>{var e=ia(),i=ie(e);i.__click=[Vo,r];var n=ne(i,2);n.__click=[Ho,r],De(ie(ne(n,2)),(()=>s().pagination&&s().pagination.pages&&s().pagination.pages.list),(t=>{var e=ye();xe(re(e),17,(()=>s().pagination.pages.list),Ue,((t,e)=>{var i=ea();De(ie(i),(()=>Wt(e).active),(t=>{var i=Zo(),r=ie(i);G((()=>{He(i,"aria-label",`Страница ${Wt(e).index??""}`),Le(r,Wt(e).index+1)})),Oe(t,i)}),(t=>{var i=ta();i.__click=[qo,r];var n=ie(i);G((()=>{He(i,"aria-label",`Страница ${Wt(e).index??""}`),He(i,"data-page",Wt(e).index),Le(n,Wt(e).index+1)})),Oe(t,i)})),Oe(t,i)})),Oe(t,e)})),Oe(t,e)})),Oe(t,O),qt()},links:[],actions:[],endless:!1,idField:"_id",getItemId:function(t){return t._id}};class da extends er{constructor(t={}){return super(),this.id="table-"+Math.random(),this.options={...ua,...t.options?t.options:{}},this.ui={},this.data={raw:[],filtered:[],refined:[],selected:{}},this.state={pagination:{items:{count:0,from:0,to:0},pages:{count:0,from:0,to:0,current:0,list:[]}}},this.working={},this.stores=function(t,e={raw:[],filtered:[],selected:{}}){if(!So(t)){if(!(Object.keys(e).length>0))throw new Error("store's props wasn't specified");Eo[t]={},Object.keys(e).forEach((function(i){Eo[t][i]=zi(e[i])}))}return Eo[t]}(this.id,{raw:[],filtered:[],refined:[],selected:{},state:this.state,working:this.working}),this.stores.working.subscribe(this.onWorkingUpdate.bind(this)),this.stores.raw.subscribe(this.onRawUpdate.bind(this)),this.stores.filtered.subscribe(this.onFilteredUpdate.bind(this)),this.stores.refined.subscribe(this.onRefinedUpdate.bind(this)),this.stores.selected.subscribe(this.onSelectedUpdate.bind(this)),this.stores.state.subscribe(this.onStateUpdate.bind(this)),ur.objHas(t,"data")&&Array.isArray(t.data)&&this.stores.raw.update((function(e){return t.data})),this.setCombinedActionName(this.getOptions("interface.combinedAction",aa)),ur.objHas(this.options,"filter")?this.setFilter(this.options.filter,!0):this.resetFilter(),ur.objHas(this.options,"pager")?this.setPager(this.options.pager,!0):this.resetPager(),ur.objHas(this.options,"sorter")?this.setSorter(this.options.sorter,!0):this.resetSorter(!0),ur.objHas(this.options,"return")?this.setReturn(this.options.return):this.setReturn(),ur.objHas(this.options,"search")?this.setSearch(this.options.search,!0):this.setSearch(),this.render(),this.updateData(),this}onWorkingUpdate(t){return this.working=t,t}onRawUpdate(t){return this.data.raw=t,t}onFilteredUpdate(t){return this.data.filtered=t,this.refineFiltered(),t}onRefinedUpdate(t){return this.data.refined=t,this.clearSelected(),t}onStateUpdate(t){return this.state=t,t}onSearchChange(t){t.length>3?this.setSearch(t):this.setSearch()}onSorterChange(t){t?this.setSorter(t):this.resetSorter()}onFilterChange({filter:t,actionName:e}){0===e.indexOf(aa)&&this.setCombinedActionName(e),t?this.setFilter(t):this.resetFilter()}onSelectedUpdate(t){this.data.selected=t}clearSelected(){this.data.selected={}}getSelected(t=!1,e="refined"){let i=[];for(let r in this.data.selected)if(this.data.selected[r])if(t){let t=this.data[e].findIndex((function(t){return t._id===r}));t>-1&&i.push(this.data[e][t])}else i.push(r);return i}getItemId(t){return this.getOptions("getItemId",ua.getItemId)(t)}selectAll(){var t=this;this.stores.selected.update((function(){let e={};return t.data.filtered.forEach((function(i){e[t.getItemId(i)]=!0})),e}))}selectNone(){var t=this;this.stores.selected.update((function(){let e={};return t.data.filtered.forEach((function(i){e[t.getItemId(i)]=!1})),e}))}render(){var t=this;this.ui.table||(this.ui.table=new this.options.ui({target:this.options.targetEl,props:{filterUI:this.getOptions("filterUI",void 0),id:this.id,helpers:Object.assign({},this.getHelpers()),fields:this.getOptions("fields"),actions:this.getActions(),links:this.getLinks(),search:"",showSelect:this.getOptions("showSelect"),showSearch:this.getOptions("showSearch"),showSort:this.getOptions("showSort"),idField:this.getOptions("idField"),getItemId:this.getOptions("getItemId"),filter:this.getFilter()}})),this.ui.table.$on("searchChange",(function(e){return t.onSearchChange(e.detail)})),this.ui.table.$on("sorterChange",(function(e){return t.onSorterChange(e.detail)})),this.ui.table.$on("filterChange",(function(e){return t.onFilterChange(e.detail)})),this.ui.table.$on("goToPage",(function(e){return t.goToPage(e.detail)})),this.ui.table.$on("goToNextPage",(function(){return t.goToNext()})),this.ui.table.$on("goToPrevPage",(function(){return t.goToPrev()}))}getActions(){return this.getOptions("actions",[])}getLinks(){return this.getOptions("links",[])}getHelpers(){return this.options.helpers||{}}setWorking(t,e){var i=this;return this.stores.working.update((function(r){return nr.set(t,r,i.getHelpers(),e),r})),this}getWorking(t,e){let i=nr.get(t,this.working,this.getHelpers());return void 0===i?e:i}setState(t,e){var i=this;return this.stores.state.update((function(r){return nr.set(t,r,i.getHelpers(),e),r})),this}getState(t,e){let i=nr.get(t,this.state,this.getHelpers());return void 0===i?e:i}setOptions(t,e){return nr.set(t,this.options,this.getHelpers(),e),this}getOptions(t,e){let i=nr.get(t,this.options,this.getHelpers());return void 0===i?e:i}setFilter(t,e=!1){return this.setState("filter",t),e||(this.invalidateData(),this.updateData()),this}resetFilter(){return this.setState("filter",{}),this}getFilter(){return this.getState("filter")}setPager(t,e=!1){return this.setState("pager",t),e||this.updateData(),this}getDefaultPageNumber(){return isNaN(this.getOptions("pager.page"))?0:this.getOptions("pager.page")}getDefaultPageSize(){return isNaN(this.getOptions("pager.size"))?20:this.getOptions("pager.size")}resetPager(){this.setState("pager",{size:this.getDefaultPageSize(),page:this.getDefaultPageNumber()})}getPager(){return this.getState("pager")}setSorter(t,e=!1){return this.setWorking("sorter",t),e||(this.invalidateData(),this.updateData()),this}resetSorter(t=!1){let e={_id:1};return this.setSorter(e,t)}getSorter(){return this.getWorking("sorter")}getSorterDirection(){try{let t=Object.keys(this.getSorter());return this.getSorter()[t[0]]}catch{return 1}}getSearch(){return void 0!==this.getWorking("search")&&null!==this.getWorking("search")?this.getWorking("search"):""}setSearch(t="",e=!1){return this.setWorking("search",t),e||(this.invalidateData(),this.updateData()),this}getReturn(){return this.getWorking("return")}setReturn(t=sa){return this.setWorking("return",t),this}clearFilteredData(){this.stores.filtered.update((function(t){return t.splice(0,t.length),t}))}clearRawData(){this.stores.raw.update((function(t){return t.splice(0,t.length),t}))}clearRefinedData(){this.stores.refined.update((function(t){return t.splice(0,t.length),t}))}invalidateData(){this.clearFilteredData(),this.isLive()&&this.clearRawData(),this.resetPager()}isLive(){return this.getOptions("interface")&&this.getOptions("interface.factory")}setUpdating(){this.setState("updating",!0)}setUpdated(){this.setState("updating",!1)}ifUpdating(){return this.getState("updating")}getDataInterface(){let t=this.getOptions("interface.factory");return"function"==typeof t?t({}):t}getLoadDataActionName(){return this.getOptions("interface.listAction")?this.getOptions("interface.listAction"):"list"}setCombinedActionName(t=la){this.setWorking("interface.combinedAction",t)}getCombinedActionName(){return this.getWorking("interface.combinedAction")?this.getWorking("interface.combinedAction"):aa}getCountActionName(){return this.getOptions("interface.countAction")?this.getOptions("interface.countAction"):la}loadData(){let t,e=this.getDataInterface().setFilter(this.getFilter()).setSorter(this.getSorter()).setReturn(this.getReturn()).setSearch(this.getSearch()).setPager(this.getPager());return t=this.getOptions("interface.combined",oa)?this.getCombinedActionName():this.getLoadDataActionName(),e["$"+t]()}goToNext(){let t=isNaN(this.getState("pager.page"))?this.getDefaultPageNumber():this.getState("pager.page")+1;this.setState("pager.page",Math.min(t,this.getState("pagination.pages.to"))),this.updateData()}goToPrev(){let t=isNaN(this.getState("pager.page"))?this.getDefaultPageNumber():this.getState("pager.page")-1;this.setState("pager.page",Math.max(t,this.getState("pagination.pages.from"))),this.updateData()}goToFirst(){this.setState("pager.page",this.getState("pagination.pages.from")),this.updateData()}goToLast(){this.setState("pager.page",this.getState("pagination.pages.to")),this.updateData()}goToPage(t){this.setState("pager.page",t),this.updateData()}testDataItem(t){var e=this.getSearch().toLowerCase();for(var i in t){if(t[i].toString().toLowerCase().indexOf(e)>-1)return!0}return!1}getRowsCount(){var t=this;return this.getDataInterface().setFilter(this.getFilter())["$"+this.getCountActionName()]().then((function(e){t.updatePagination(e.count)})).catch((function(e){t.error(e)}))}updatePagination(t){var e=this;this.log("update pagination",t),this.state.pagination.pages.list.splice(0,this.state.pagination.pages.list.length);let i=(this.getPager().page-0)*this.getPager().size+1,r=t%this.getPager().size?Math.floor(t/this.getPager().size)+1:Math.round(t/this.getPager().size),n=Math.max(0,this.getPager().page-6),s=Math.min(r-1,this.getPager().page+6),o=[],a=Math.min(i+this.getPager().size-1,t);for(let t=n;t<=s;t++)o.push({index:t,active:t===this.getPager().page});this.stores.state.update((function(l){return e.log("update pagination",l),l.pagination.items.count=t,l.pagination.items.from=i,l.pagination.items.to=a,l.pagination.pages.count=r,l.pagination.pages.from=n,l.pagination.pages.to=s,l.pagination.pages.current=e.getPager().page,l.pagination.pages.list.splice(0,l.pagination.pages.list.length,...o),l}))}updateData(){var t=this;if(this.isLive()){if(this.ifUpdating())return;this.getOptions("endless",!1)||this.clearRawData(),this.setUpdating(),this.getOptions("interface.combined",oa)?this.loadData().then((function(e){let i=ur.objHas(e,"status")&&ur.objHas(e,"result");t.stores.filtered.update((function(r){return t.getOptions("endless",!1)||t.clearFilteredData(),i?r.push(...e.result.list):ur.objHas(e,"list")&&Array.isArray(e.list)?r.push(...e.list):Array.isArray(e)&&r.push(...e),r})),t.setWorking("lastCount",i?e.result.count:e.count)})).then((function(){t.updatePagination(t.getWorking("lastCount"))})).catch(this.error.bind(this)).then(this.setUpdated.bind(this)):this.loadData().then((function(e){t.stores.filtered.update((function(t){return t.push(...e),t}))})).then(this.getRowsCount.bind(this)).catch(this.error.bind(this)).then(this.setUpdated.bind(this))}else this.setUpdating(),this.processData(),this.setUpdated()}getData(){return this.data}processData(){var t=this;let e=this.getFilter();this.log(this.getData()),null!=e&&void 0!==e.filterSearch&&null!==e.filterSearch&&e.filterSearch.length>0?this.stores.filtered.update((function(e){return e.splice(0,e.length,...t.data.raw.filter(t.testDataItem.bind(t))),e})):this.stores.filtered.update((function(e){return e.splice(0,e.length,...t.data.raw),e}));let i=this.getSorter();null!=i&&this.stores.filtered.update((function(t){return t.sort((function(t,e){let r=nr.get(i.sortByField,t,{}),n=nr.get(i.sortByField,e,{});return isNaN(r)?void 0!==r&&void 0!==n&&r.localeCompare?r.localeCompare()*-i.sortDirection:0:(r<n?1:-1)*i.sortDirection})),t}))}error(){this.options.logger&&this.options.logger.error(...arguments)}log(){this.options.logger&&this.options.logger.log(...arguments)}checkFieldsNames(){const t=":"+this.getOptions("idField");this.getOptions("fields",[]).forEach((function(e){t===e.path&&(e.path=e.path+na)}))}readFieldValue(t,e,i){if(t.indexOf(na)>-1){const t=":"+this.getOptions("idField");return nr.get(t,e,i)}return nr.get(t,e,i)}refineFiltered(){var t=this;let e=[];this.checkFieldsNames(),this.data.filtered.forEach((function(i,r){let n={};t.getOptions("idField")&&(n[t.getOptions("idField")]=i[t.getOptions("idField")]),t.getOptions("fields",[]).forEach((function(e){let s=null,o=t.readFieldValue(e.path,i,t.getOptions("helpers"));if(ur.objHas(e,ca)){try{s=e[ca](o,i,r)}catch(e){t.error("Error while preprocessing cell value",o,i,r),t.error(e)}nr.set(e.path,n,s)}else nr.set(e.path,n,o)})),e.push(n)})),this.stores.refined.update((function(t){return t.splice(0,t.length,...e),t}))}$destroy(){for(let t in this.ui)this.ui[t].$destroy&&this.ui[t].$destroy(),delete this.ui[t]}}var ha=me("<!> <!>",1),ga=me("<!> <!>",1);function fa(t,e){Ht(e,!0);let i=L(!1),r=L(!1),n=ki(e,"container",19,(()=>({}))),s=ki(e,"loaderTitle",15,"Отправка данных на сервер"),o=ki(e,"loaderActive",15,!1),a=ki(e,"loaderSize",15,"container"),l=ki(e,"successTitle",15,"OK"),c=ki(e,"successMessage",15,""),u=ki(e,"errorTitle",15,"Error"),d=ki(e,"errorMessage",15,"");var h=ga(),g=re(h);return Cr(g,{get loading(){return o()},set loading(t){o(t)},get title(){return s()},set title(t){s(t)},get size(){return a()},set size(t){a(t)}}),jn(ne(g,2),$i(n,{children:(t,e)=>{var n=ha(),s=re(n);De(s,(()=>Wt(r)),(t=>{zs(t,{get title(){return u()},set title(t){u(t)},get message(){return d()},set message(t){d(t)}})})),De(ne(s,2),(()=>Wt(i)),(t=>{Hs(t,{get title(){return l()},set title(t){l(t)},get message(){return c()},set message(t){c(t)}})})),Oe(t,n)},$$slots:{default:!0}})),Oe(t,h),qt({showSuccess:function(t,e){F(r,!1),F(i,!0),null!=e&&c(e),null!=t&&l(t)},showError:function(t,e){F(i,!1),F(r,!0),null!=e&&d(e),null!=t&&u(t)},setLoading:function(){o(!0),F(i,!1),F(r,!1)},resetLoading:function(){o(!1)},hideAll:function(){o(!1),F(i,!1),F(r,!1)}})}var pa=new WeakMap,va=new WeakMap;class ma extends to{constructor({target:t=null,name:e="Default",options:i={},working:r={},data:n={},ui:s=fa}){super({working:{name:`${e}ActionUI`,...r},options:i,data:n}),Si(this,pa,null),Si(this,va,null),t&&this.setOptions("target",t),Li(pa,this,s),this.initUI()}initUI(){try{const t=this.getTargetEl();for(;t.children.length;)t.removeChild(t.firstChild);Li(va,this,new(Ei(pa,this))({target:t,props:this.getOptions()}))}catch(t){this.error(t)}}setLoading(){this.emit("loading"),Ei(va,this).setLoading()}resetLoading(){this.emit("loaded"),Ei(va,this).resetLoading()}destroy(){this.emit("destroy"),Ei(va,this)&&(Ei(va,this).$destroy&&Ei(va,this).$destroy(),Ei(va,this).destroy&&Ei(va,this).destroy(),Li(va,this,null)),this.setOptions(null),this.setWorking(null),this.setData(null)}processResult(t){return t.status===Kr?(this.setFormSuccess(),!0):(this.setFormErrors(t),!1)}setFormSuccess(){Ei(va,this).showSuccess(),this.emit("success")}setFormErrors(t){const e={form:[],fields:{}};t.message&&e.form.push(t.message),t.errors&&Object.keys(t.errors).length>0&&(e.fields={...t.errors}),Ei(va,this).showError(e),this.emit("error",e)}getTargetEl(){const t=this.getOptions("target",".container");if(t instanceof HTMLElement)return t;if("string"==typeof t)return document.querySelector(t);throw new Error("ActionUI parent element is not defined")}}let ba=class{static addComponent(t,e){go.add(t,e)}static addVariants(t,e){po.add(t,e)}static addField(t,e){fo.add(t,e)}static actionFieldsInit(t,e,i){var r=this;Array.isArray(t)?t.forEach((function(t){r.actionFieldsInit(t,e,i)})):(ur.objHas(e,"fields")||(e.fields={}),ur.objHas(e.fields,t)||(e.fields[t]={}),null!=i&&void 0!==i[t]&&null!==i[t]&&(e.fields[t].value=i[t]))}};Fi(ba,"validator",null);const ya={label:"",placeholder:"",enabled:!0,visible:!0,required:!0,validated:!1,valid:!1,errors:!1};function Oa(t,e={},i,r){let n={...ya};return r.contains(t)&&(n={...n,...r.get(t)}),e&&(n={...n,...e}),ur.objHas(n,"variantsSource")&&i.contains(n.variantsSource)?n.variants=i.get(n.variantsSource):n.variants&&0!==n.variants.length||(n.variants=[]),n}function $a(t,e,i){return t[e].formErrors=[...i],t[e].validated=!0,t[e].inputStarted=!0,t[e].valid=!1,t[e].formLevelError=!0,t}function wa(t,e){return t[e].formErrors=!1,t[e].validated=!0,t[e].valid=!0,t[e].formLevelError=!1,t}function ka(t,e){return ur.objHas(t,e)&&t[e].enabled&&t[e].visible&&void 0!==t[e].value}var Ia,Aa,_a,Ca,Ea,Sa,La,Na,Fa,Ta,Ma,Da,Ua,xa,Ra,Pa,ja,Wa,Ba,za,Va={fieldInit:Oa,initFormByField:function t(e={},i=[],r,n,s,o){if(Array.isArray(i))i.forEach((function(i){return t(e,i,r,n,s,o)}));else{let t={};s&&ur.objHas(s,"mutations")&&ur.objHas(s.mutations,i)&&(t=s.mutations[i]),o&&ur.objHas(o,i)&&(t.value=o[i]),e[i]=Oa(i,t,r,n),s&&s.readonly&&(e[i].readonly=!0)}return e},setFieldInvalid:function(t,e,i,r){return t[e].errors=[...r],t[e].validated=!0,t[e].valid=!1,t[e].value=i,t},setFieldValid:function(t,e,i){t[e].errors=!1,t[e].validated=!0,t[e].valid=!0,t[e].value=i;for(let i in t)if(i!==e&&(Array.isArray(t[i].errors)&&0===t[i].errors.length&&(t[i].errors=!1),!1!==t[i].errors))break;return t},isFieldValid:function(t,e){return!Array.isArray(t[e].errors)},setFormFieldInvalid:$a,setFormFieldValid:wa,updateFormValidationStatus:function({form:t,formErrors:e,validationStatus:i}){if(Array.isArray(i.form)&&i.form.length?e.splice(0,e.length,...i.form):e.splice(0,e.length),i.fields)for(let e in i.fields)Array.isArray(i.fields[e])&&i.fields[e].length?$a(t,e,i.fields[e]):wa(t,e)},fieldIsVisibleAndFilled:ka,setFieldsVisibility:function(t,e,i){return!!Array.isArray(e)&&(Object.keys(t).forEach((function(r){t[r].visible=e.includes(r)?i:!i})),!0)},setFieldValue:function(t,e,i){return!!ur.objHas(t,e)&&(t[e].value=i,!0)},collectData:function(t,e){let i={};return t.flat().forEach((function(t){ka(e,t)&&(i[t]=e[t].value)})),i}};function Ha(){if(Aa)return Ia;Aa=1;const t=t=>Object.keys(t).reduce(((t,e)=>(t[e]=[],t)),{}),e=["fields","form"];return Ia=class{#t=!0;#e;constructor(t){this.#e=JSON.parse(JSON.stringify(t)),Object.keys(this.#e).forEach((t=>{e.includes(t)||delete this.#e[t]})),this.#t=0===this.#e.form.errors.length;const i=this.#i();for(let t of i)this.isFieldDirty(t)&&(this.#t=!1)}destroy(){this.#e=void 0}get clean(){return this.#t}static getDefaultResult(e){return{fields:t(e),form:{fields:t(e),errors:[],exceptions:[]}}}getReport(){return JSON.parse(JSON.stringify(this.#r()))}getDetailedReport(){return"object"==typeof this.#e?JSON.parse(JSON.stringify(this.#e)):void 0}isFieldDirty(t){return!(!Array.isArray(this.#e.fields[t])||!this.#e.fields[t].length)||!(!Array.isArray(this.#e.form.fields[t])||!this.#e.form.fields[t].length)}getCompleteResultForField(t){const e=[];return Array.isArray(this.#e.fields[t])&&e.push(...this.#e.fields[t]),Array.isArray(this.#e.form.fields[t])&&e.push(...this.#e.form.fields[t]),e}#r(){const t={clean:this.#t,fields:{},form:[]},e=this.#i();for(let i of e){const e=this.getCompleteResultForField(i);e.length&&(t.fields[i]=e)}return t.form=[...this.#e.form.errors],0===t.form.length&&delete t.form,t}#i(){const t=Object.keys(this.#e.fields),e=Object.keys(this.#e.form.fields);return[...new Set([...e,...t])]}}}function qa(){if(Sa)return Ea;Sa=1;const t=function(){if(Ca)return _a;Ca=1;class t extends Error{constructor(t,e={},i=null){return super(t),this.options=e,this.adopt(i),this.fill(),this.getTime(),this}adopt(t){return t instanceof Error&&(this.parent=t),this}getStack(){return this.parent?this.parent.stack:this.stack}getDetails(){let t=this;return this.parent&&(t=this.parent),{columnNumber:t.columnNumber,fileName:t.fileName,lineNumber:t.lineNumber,name:t.name,message:t.message,stack:t.stack}}getTime(){let t=new Date;return this.env.date={timestamp:t.getTime(),offset:t.getTimezoneOffset()},this.env.date}filterEnv(t,e){let i={};for(let r of e)Object.prototype.hasOwnProperty.call(t,r)&&(i[r]=t[r]);return i}fill(){return this.env={browser:!1,node:!0,versions:Object.assign({},process.versions),vars:this.filterEnv(process.env,this.options.whitelist||["NODE_ENV"])},this}}return _a=t}();return Ea=class extends t{constructor(t,e={},i=null,r={}){return super(t,{fields:e,params:r},i),this}setFieldsErrors(t){this.options.fields=t}getFieldsErrors(){return this.options.fields}}}function Ga(){if(Ta)return Fa;Ta=1;const t=Ha(),e=qa(),i=Na?La:(Na=1,La=async(t,e)=>{if("function"==typeof t)return"AsyncFunction"===t.constructor.name?await t(...e):t(...e)});Fa=async(e,i)=>{const n=t.getDefaultResult(i);return await r({validators:e,data:i,result:n}),await l({validators:e,data:i,result:n}),new t(n)};const r=async({validators:t,data:e,result:i})=>{for(let r in e)await n(r,e[r],t,i)},n=async(t,e,i,r)=>{const n=s(t,i);return await o(t,e,n,r)},s=(t,e)=>e&&e.fields&&e.fields[t]?e.fields[t]:[],o=async(t,r,n,s)=>{for(let o of n)try{await i(o.validator,[r])||a(t,o.message,s)}catch(i){i instanceof e||!o.message?a(t,i.message,s):a(t,o.message,s)}},a=(t,e,i)=>{i.fields[t].includes(e)||i.fields[t].push(e)},l=async({validators:t,data:e,result:i})=>{const r=c(t);await u(e,r,i)},c=t=>t&&t.form?t.form:[],u=async(t,e,i)=>{for(let r of e)try{await r(t)}catch(t){if(!t||"function"!=typeof t.getFieldsErrors)throw t;{const e=t.getFieldsErrors();Array.isArray(e.form)&&d(e.form,i),e.fields&&g(e.fields,i)}}},d=(t,e)=>{t.forEach((t=>{h(t,e)}))},h=(t,e)=>{e.form.errors.includes(t)||e.form.errors.push(t)},g=(t,e)=>{for(let i in t)f(i,t[i],e)},f=(t,e,i)=>{e.forEach((e=>{p(t,e,i)}))},p=(t,e,i)=>{Array.isArray(i.form.fields[t])||(i.form.fields[t]=[]),i.form.fields[t].includes(e)||i.form.fields[t].push(e)};return Fa}function Ja(){if(xa)return Ua;xa=1;const{composeFieldsValidators:t,composeFormValidators:e}=(Da||(Da=1,Ma={composeFieldsValidators:(t,e)=>{if(e&&e.fields){const i=Object.keys(t),r={};return i.forEach((t=>{Array.isArray(e.fields[t])&&(r[t]=e.fields[t])})),r}return{}},composeFormValidators:(t,e)=>e?e.forms&&Array.isArray(e.forms[t])?e.forms[t]:Array.isArray(e.form)?e.form:[]:[]}),Ma),i=Ga();return Ua=r=>(n,s)=>{const o={fields:t(n,r),form:e(s,r)};return i(o,n)}}function Ka(){if(Wa)return ja;Wa=1;const t=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),{augmentFieldsValidators:e,augmentFormValidators:i}=function(){if(Pa)return Ra;Pa=1;const t=(t,e)=>{if(t.validator&&"function"==typeof t.validator){const i=t.validator,r={...t};return delete r.validator,r.validator=t=>i(t,e()),r}return t},e=(t,e)=>i=>t(i,e());return Ra={augmentFieldsValidators:(e,i)=>e.map((e=>t(e,i))),augmentFieldValidator:t,augmentFormValidators:(t,i)=>t.map((t=>e(t,i))),augmentFormValidator:e}}();ja=(e,s)=>{if(null==e)return{fields:{},forms:{}};const o={};return t(e,"fields")&&(o.fields=r(e.fields,s)),t(e,"forms")?o.forms=n(e.forms,s):t(e,"form")&&(o.form=i(e.form,s)),o};const r=(t,i)=>{const r={};for(let n in t)Array.isArray(t[n])&&(r[n]=e(t[n],i));return r},n=(t,e)=>{const r={};for(let n in t)Array.isArray(t[n])&&(r[n]=i(t[n],e));return r};return ja}var Ya=function(){if(za)return Ba;za=1;const t=Ga(),e=Ja(),i=Ka(),r=Ha();return Ba={name:"not-validation",Session:t,Runner:e,Builder:i,Result:r}}(),Qa=me('<div><div class="field-label is-normal"><!></div> <div class="field-body"></div></div>'),Xa=me("<!> <!>",1),Za=me("<div></div>");function tl(t,e){Ht(e,!0);let i=ki(e,"label",3,""),r=ki(e,"name",3,"generic field"),n=ki(e,"readonly",3,!1),s=ki(e,"horizontal",3,!1),o=ki(e,"controls",19,(()=>[])),a=ki(e,"classes",3,""),l=ki(e,"addons",3,!1),c=ki(e,"addonsCentered",3,!1),u=ki(e,"addonsRight",3,!1),d=ki(e,"grouped",3,!1),h=ki(e,"groupedMultiline",3,!1),g=ki(e,"groupedRight",3,!1),f=ki(e,"groupedCentered",3,!1),p=ki(e,"onchange",3,(()=>!0)),v=ki(e,"formFieldPrefix",3,"form-field-"),m=L(""),b=L(!1),y=L(void 0);gi((()=>{F(m,Wt(m)+" "+a()),F(m,Wt(m)+(l()?" has-addons ":"")),F(m,Wt(m)+(c()?" has-addons-centered ":"")),F(m,Wt(m)+(u()?" has-addons-right ":"")),F(m,Wt(m)+(d()?" is-grouped ":"")),F(m,Wt(m)+(h()?" is-grouped-multiline ":"")),F(m,Wt(m)+(g()?" is-grouped-right ":"")),F(m,Wt(m)+(f()?" is-grouped-centered ":"")),n()&&o().forEach((t=>{t.readonly=!0}));let t=o().filter((t=>"UIHidden"!==t.component));F(b,0===t.length);let e=o().map((t=>t.component)).join("_");F(y,`${v()}${e}-${r()}`)}));var O=ye();De(re(O),(()=>Wt(b)),(t=>{var e=ye();xe(re(e),17,o,Ue,((t,e)=>{var i=ye();const n=D((()=>go.get(Wt(e).component)));Ve(re(i),(()=>Wt(n)),((t,i)=>{i(t,$i((()=>Wt(e)),{get onchange(){return p()},get fieldname(){return r()}}))})),Oe(t,i)})),Oe(t,e)}),(t=>{var e=ye();De(re(e),s,(t=>{var e=Qa(),n=ie(e),s=ie(n),a=D((()=>i()||o()[0].label));vn(s,{get for(){return Wt(y)},get label(){return Wt(a)}});var l=ne(n,2);xe(l,21,o,Ue,((t,e)=>{var i=ye();const n=D((()=>go.get(Wt(e).component)));Ve(re(i),(()=>Wt(n)),((t,i)=>{i(t,$i((()=>Wt(e)),{get onchange(){return p()},get fieldname(){return r()}}))})),Oe(t,i)})),G((()=>{Ke(e,`field is-horizontal ${Wt(m)??""} ${Wt(y)??""}`),He(l,"id",Wt(y))})),Oe(t,e)}),(t=>{var e=Za();xe(e,21,o,Ue,((t,e)=>{var i=Xa();const n=D((()=>go.get(Wt(e).component)));var s=re(i);vn(s,{get for(){return`form-field-${Wt(e).component??""}-${r()??""}`},get label(){return Wt(e).label}}),Ve(ne(s,2),(()=>Wt(n)),((t,i)=>{i(t,$i((()=>Wt(e)),{get onchange(){return p()},get fieldname(){return r()}}))})),Oe(t,i)})),G((()=>Ke(e,`field ${Wt(m)??""} ${Wt(y)??""}`))),Oe(t,e)}),!0),Oe(t,e)})),Oe(t,O),qt()}function el(t,e,i){return t&&t.preventDefault(),e("submit",i()),!1}function il(t,e){e("reject")}var rl=me('<div><span class="title"> </span></div>'),nl=me('<div class="notification is-success"><h3 class="form-success-message"> </h3></div>'),sl=me('<h5 class="title is-5"> </h5>'),ol=me('<h6 class="subtitle is-6"> </h6>'),al=me("<button> </button>"),ll=me("<button> </button>"),cl=me('<div class="edit-form-error notification is-danger"> </div>'),ul=me('<div class="buttons is-grouped is-centered"><!> <!></div> <!>',1),dl=me("<div><!></div>"),hl=me('<div class="column notification is-danger"> </div>'),gl=me('<div class="columns"></div>'),fl=me('<div class="notification is-danger"> </div>'),pl=me("<span> </span>"),vl=me('<div class="edit-form-error notification is-danger"></div>'),ml=me("<button> </button>"),bl=me("<button> </button>"),yl=me('<!> <div class="buttons is-grouped is-centered"><!> <!></div>',1),Ol=me("<!> <!> <!> <!> <!>",1),$l=me('<div class="form-container"><!> <!></div>');function wl(t,e){Ht(e,!0);const i=mi(),r=()=>vi(Hi,"$LOCALE",i);let n=fi(),s=L(Gt([])),o=L(!1),a=L(!1),l=L(!1),c=ki(e,"form",31,(()=>Gt({}))),u=ki(e,"loading",15,!1),d=ki(e,"loader",3,"container"),h=ki(e,"fields",19,(()=>[])),g=ki(e,"SUCCESS_TEXT",3,"Операция завершена"),f=ki(e,"WAITING_TEXT",3,"Отправка данных на сервер"),p=ki(e,"title",3,""),v=ki(e,"description",3,""),m=ki(e,"buttonsFirst",3,!1),b=ki(e,"horizontal",3,!1),y=ki(e,"submit",19,(()=>({caption:"Отправить",enabled:!0}))),O=ki(e,"cancel",19,(()=>({caption:"Назад",enabled:!0}))),$=D((()=>Wt(o)||Wt(a)));function w(){return Va.collectData(h(),c())}function k(t,e){Va.setFieldsVisibility(c(),t,e)&&c(c())}function I(t){let e=t.detail;c(c()[e.field].value=e.value,!0),c(c()),n("change",e)}var A=$l(),_=ie(A);return De(_,(()=>"hidden"!==d()),(t=>{var e=rl(),i=ie(e),n=ie(i);G((()=>{Ke(e,`${("page"===d()?"pageloader":"containerloader")??""} ${(u()?"is-active":"")??""}`),Le(n,r()[f()])})),Oe(t,e)})),De(ne(_,2),(()=>Wt(l)),(t=>{var e=nl(),i=ie(e),n=ie(i);G((()=>Le(n,r()[g()]))),Oe(t,e)}),(t=>{var e=Ol(),i=re(e);De(i,p,(t=>{var e=sl(),i=ie(e);G((()=>Le(i,r()[p()]))),Oe(t,e)}));var o=ne(i,2);De(o,v,(t=>{var e=ol(),i=ie(e);G((()=>Le(i,r()[v()]))),Oe(t,e)}));var a=ne(o,2);De(a,m,(t=>{var e=ul(),i=re(e),o=ie(i);De(o,(()=>O().enabled),(t=>{var e=al();e.__click=[il,n];var i=ie(e);G((()=>{Ke(e,`button is-outlined ${O().classes??""}`),Le(i,r()[O().caption])})),Oe(t,e)})),De(ne(o,2),(()=>y().enabled),(t=>{var e=ll();e.__click=[el,n,w];var i=ie(e);G((()=>{e.disabled=Wt($),Ke(e,`button is-primary is-hovered ${y().classes??""}`),Le(i,r()[y().caption])})),Oe(t,e)})),De(ne(i,2),(()=>Wt(s).length>0),(t=>{var e=cl(),i=ie(e);G((()=>Le(i,Wt(s).join(", ")))),Oe(t,e)})),Oe(t,e)}));var l=ne(a,2);xe(l,17,h,Ue,((t,e)=>{var i=ye();De(re(i),(()=>Array.isArray(Wt(e))),(t=>{var i=gl();xe(i,21,(()=>Wt(e)),Ue,((t,e)=>{var i=ye();De(re(i),(()=>c()[Wt(e)]&&c()[Wt(e)].component),(t=>{var i=ye();De(re(i),(()=>c()[Wt(e)].visible),(t=>{var i=dl(),r=ie(i),n=D((()=>[c()[Wt(e)]]));tl(r,{get controls(){return Wt(n)},get name(){return Wt(e)},get horizontal(){return b()},get label(){return c()[Wt(e)].label},$$events:{change:I}}),G((()=>Ke(i,`column ${(c()[Wt(e)].fieldSize?"is-"+c()[Wt(e)].fieldSize:"")??""} `))),Oe(t,i)})),Oe(t,i)}),(t=>{var i=hl(),r=ie(i);G((()=>Le(r,`Subfield '${Wt(e)??""}' is not registered`))),Oe(t,i)})),Oe(t,i)})),Oe(t,i)}),(t=>{var i=ye();De(re(i),(()=>c()[Wt(e)]&&c()[Wt(e)].component),(t=>{var i=ye();De(re(i),(()=>c()[Wt(e)].visible),(t=>{var i=D((()=>[c()[Wt(e)]]));tl(t,{get controls(){return Wt(i)},get name(){return Wt(e)},get horizontal(){return b()},get label(){return c()[Wt(e)].label},$$events:{change:I}})})),Oe(t,i)}),(t=>{var i=fl(),r=ie(i);G((()=>Le(r,`Field '${Wt(e)??""}' is not registered`))),Oe(t,i)}),!0),Oe(t,i)})),Oe(t,i)})),De(ne(l,2),(()=>!m()),(t=>{var e=yl(),i=re(e);De(i,(()=>Wt(s).length>0),(t=>{var e=vl();xe(e,21,(()=>Wt(s)),Ue,((t,e)=>{var i=pl(),n=ie(i);G((()=>Le(n,r()[Wt(e)]))),Oe(t,i)})),Oe(t,e)}));var o=ie(ne(i,2));De(o,(()=>O().enabled),(t=>{var e=ml();e.__click=[il,n];var i=ie(e);G((()=>{Ke(e,`button ${(O().classes?O().classes:"")??""}`),Le(i,r()[O().caption])})),Oe(t,e)})),De(ne(o,2),(()=>y().enabled),(t=>{var e=bl();e.__click=[el,n,w];var i=ie(e);G((()=>{e.disabled=Wt($),Ke(e,`button is-primary is-hovered ${(y().classes?y().classes:"")??""}`),Le(i,r()[y().caption])})),Oe(t,e)})),Oe(t,e)})),Oe(t,e)})),Oe(t,A),qt({collectData:w,setFieldInvalid:function(t,e,i){c(Va.setFieldInvalid(c(),t,e,i)),F(a,!0)},setFieldValid:function(t,e){c(Va.setFieldValid(c(),t,e))},isFieldValid:function(t){return Va.isFieldValid(c(),t)},setFormFieldInvalid:function(t,e){c(Va.setFormFieldInvalid(c(),t,e)),n("field.invalid",{fieldName:t})},setFormFieldValid:function(t){c(Va.setFormFieldValid(c(),t)),n("field.valid",{fieldName:t})},updateFormValidationStatus:function(t){if(F(o,!1),F(a,!1),Array.isArray(t.form)&&t.form.length?(Wt(s).splice(0,Wt(s).length,...t.form),F(o,!0)):Wt(s).splice(0,Wt(s).length),F(s,Gt(Wt(s))),t.fields)for(let e of Object.keys(c()))Array.isArray(t.fields[e])&&t.fields[e].length?(Va.setFormFieldInvalid(c(),e,t.fields[e]),F(a,!0)):Va.setFormFieldValid(c(),e)},showSuccess:function(){F(l,!0)},setLoading:function(){u(!0)},resetLoading:function(){u(!1)},setFieldsVisibility:k,setVisibleFields:function(t){k(t,!0)},setInvisibleFields:function(t){k(t,!1)},setFieldValue:function(t,e){Va.setFieldValue(c(),t,e)&&I({detail:{field:t,value:e}})},updateField:function(t,e){c(c()[t]={...c()[t],...e},!0),c(c())}})}ge(["click"]);const kl={notReadonly:t=>({readonly:!t}),readonly:t=>({readonly:t}),enable:t=>({disabled:!t}),disable:t=>({disabled:t})};class Il{static add(t,e){ur.objHas(_i(Il,this,Al)._,t)||(_i(Il,this,Al)._[t]=e)}static remove(t){ur.objHas(_i(Il,this,Al)._,t)&&!Object.keys(kl).includes(t)&&delete _i(Il,this,Al)._[t]}static exec(t,e,i,r,n){return _i(Il,this,Al)._[t](r,e,i,n)}}var Al={_:{...kl}};var _l=new WeakMap,Cl=new WeakMap,El=new WeakMap,Sl=new WeakMap,Ll=new WeakMap,Nl=new WeakMap,Fl=new WeakSet;class Tl extends to{constructor({target:t=null,name:e="Default",options:i={},working:r={},data:n={},ui:s=wl}){super({working:{name:`${e}Form`,...r},options:i,data:n}),Ni(this,Fl),Si(this,_l,null),Si(this,Cl,null),Si(this,El,null),Si(this,Sl,"default"),Si(this,Ll,new ho),Si(this,Nl,null),Li(Nl,this,new ho(po.getContent())),t&&this.setOptions("target",t),Li(_l,this,s),ur.objHas(i,"action")&&Li(Sl,this,i.action),this.initForm()}initForm(){this.getOptions("autoInit",!0)&&this.initLibs(),this.getOptions("autoRender",!0)&&this.initUI()}initLibs(){this.initFields(),this.initVariants(),this.initValidator()}reInit(){this.initLibs(),this.updateUI(),this.resetLoading()}initFields(){const t=this.getFormManifest();ur.objHas(t,"fields")&&Ei(Ll,this).isEmpty()&&Ei(Ll,this).import(t.fields)}initVariants(){this.getOptions("variants")&&Ei(Nl,this).import(this.getOptions("variants"))}initValidator(){Li(Cl,this,Ya.Runner(this.getFormValidators()))}initUI(){try{const t=_i(Fl,this,Rl).call(this,{manifest:this.getFormManifest(),formOptions:this.getFormOptions(),data:this.getFormData(),injectedProps:this.getFormInjectedProps()}),e=this.getFormTargetEl();for(;e.children.length;)e.removeChild(e.firstChild);Li(El,this,new(Ei(_l,this))({target:e,props:t})),_i(Fl,this,Ml).call(this),this.validateForm()}catch(t){this.error(t)}}updateUI(){try{const t=_i(Fl,this,Rl).call(this,{manifest:this.getFormManifest(),formOptions:this.getFormOptions(),data:this.getFormData(),injectedProps:this.getFormInjectedProps()});Ei(El,this).$set(t),this.validateForm()}catch(t){this.error(t)}}async validateForm(){if(!this.getOptions("readonly",!1))try{const t=await Ei(Cl,this).call(this,Ei(El,this).collectData(),this.getFormAction());Ei(El,this).updateFormValidationStatus(t.getReport()),t.clean||this.emit("error",t.getReport())}catch(t){const e={form:[Mi.ERROR_DEFAULT,t.message]};Ei(El,this)&&Ei(El,this).updateFormValidationStatus(e),this.emit("error",e),ur.report(t)}}submit(t){this.emit("submit",t)}reject(){this.emit("reject")}$on(){Ei(El,this)&&Ei(El,this).$on(...arguments)}setLoading(){this.emit("loading"),Ei(El,this).setLoading()}resetLoading(){this.emit("loaded"),Ei(El,this).resetLoading()}destroy(){this.emit("destroy"),Ei(El,this)&&(Ei(El,this).$destroy&&Ei(El,this).$destroy(),Ei(El,this).destroy&&Ei(El,this).destroy(),Li(El,this,null)),Li(Cl,this,null),Li(Sl,this,null),Li(Ll,this,null),Li(Nl,this,null),this.setOptions(null),this.setWorking(null),this.setData(null)}getName(){return this.getWorking("name")}getFormAction(){return Ei(Sl,this)}setFormAction(t){t&&t!==Ei(Sl,this)&&(Li(Sl,this,t),Ei(El,this)&&Ei(El,this).$destroy(),this.initForm())}processResult(t){return t.status===Kr?(this.setFormSuccess(),!0):(this.setFormErrors(t),!1)}setFormSuccess(){Ei(El,this).showSuccess(),this.emit("success")}setFormErrors(t){if(this.getOptions("readonly",!1))return;const e={form:[],fields:{}};t.message&&e.form.push(t.message),t.errors&&Object.keys(t.errors).length>0&&(e.fields={...t.errors}),Ei(El,this).updateFormValidationStatus(e),this.emit("error",e)}getVariant(t,e){let i=Ei(Nl,this).get(t).find((function(t){return t.id===e}));return i||null}getFormTargetEl(){const t=this.getOptions("target",".form");if(t instanceof HTMLElement)return t;if("string"==typeof t)return document.querySelector(t);throw new Error("Form parent element is not defined")}getFormValidators(){return this.getOptions("validators")?this.getOptions("validators",{}):(_i(Fl,this,Pl).call(this,"validators"),{})}getFormManifest(){const t=this.getModelName();return t&&ur.getApp()?ur.getApp().getInterfaceManifest(t):this.getOptions("manifest",void 0)?this.getOptions("manifest",{}):(_i(Fl,this,Pl).call(this,"manifest"),{})}getFormData(){return this.getData()?this.getData():(_i(Fl,this,Pl).call(this,"data"),{})}getFormOptions(){return this.getOptions("ui",void 0)||this.getOptions("fields",void 0)?{ui:this.getOptions("ui",{}),fields:this.getOptions("fields",{})}:(_i(Fl,this,Pl).call(this,"options"),{ui:{},fields:{}})}getFormInjectedProps(){return this.getOptions("injected",{})}collectData(){if(this.getOptions("readonly",!1))return this.getData();const t=Ei(El,this).collectData();return this.setData({...t}),t}updateField(t,e){Ei(El,this).updateField(t,e)}getModel(t,e){return"string"==typeof t?this.getInterface(t)(e||{}):this.getInterface()(t||{})}getInterface(t=!1){return ur.getApp().getInterface(t||this.getModelName())}getModelName(){return this.getOptions("model")}}function Ml(){var t=this;Ei(El,this).$on("change",(function(){return t.validateForm()})),Ei(El,this).$on("change",(function(e){t.emit("change",e.detail),t.emit(`change.${e.detail.field}`,e.detail.value)})),Ei(El,this).$on("submit",(function(e){return t.submit(e.detail)})),Ei(El,this).$on("reject",(function(){return t.reject()})),Ei(El,this).$on("error",(function({detail:e}){return t.emit("error",e)})),_i(Fl,this,Dl).call(this)}function Dl(){const t=this.getOptions("masters",!1);if(t)for(let e in t){const i=t[e];for(let t in i){const r=i[t];_i(Fl,this,Ul).call(this,t,e,r)}}}function Ul(t,e,i=[]){var r=this;this.on(`change.${e}`,(function(n){_i(Fl,r,xl).call(r,t,e,i,n)})),this.emit(`change.${e}`,this.getFormData()[e])}function xl(t,e,i,r){var n=this;const s=Il.exec(t,e,i,r,this);i.forEach((function(t){n.updateField(t,s)}))}function Rl({manifest:t,formOptions:e={ui:{},fields:{}},data:i=null,injectedProps:r={}}){const n=Ei(Sl,this);null==e&&(e={ui:{},fields:{}});const s=Va.initFormByField({},t.actions[n].fields,Ei(Nl,this),Ei(Ll,this),e.fields,i);return{loading:!this.getOptions("autoInit",!0),title:t.actions[n].title,description:t.actions[n].description,fields:t.actions[n].fields,form:s,...e.ui,...r}}function Pl(t){this.error(`${t} for ${this.getWorking("name")} form is not defined`)}var jl=me('<div class="block-container"><div class="form-paper"></div> <!></div>');function Wl(t,e){Ht(e,!0);let i=fi(),r=ki(e,"name",3,"default-form"),n=ki(e,"showModes",3,!1),s=ki(e,"mode",15,"default"),o=ki(e,"forms",19,(()=>[]));let a=L(Gt([]));function l(){F(a,Gt(o().filter((t=>s()!==t.mode)).map((t=>({title:t.title,outlined:!0,type:"link",action(){var e;e=t.mode,s(e),i("mode",e),l()}})))))}gi((()=>{l()}));var c=jl(),u=ie(c);De(ne(u,2),n,(t=>{Br(t,{centered:!0,get values(){return Wt(a)},set values(t){F(a,Gt(t))},classes:"mt-4"})})),G((()=>{He(c,"id",`${r()??""}-form-set`),He(u,"id",`${r()??""}-form-set-container`)})),Oe(t,c),qt()}const Bl="form-set";var zl=new WeakMap,Vl=new WeakMap,Hl=new WeakMap,ql=new WeakMap,Gl=new WeakSet;function Jl(){return{showModes:this.getOptions("showModes",!0),mode:this.getFormMode(),forms:this.getOptions("forms",[]),name:this.getOptions("name",Bl)}}function Kl(t,e){return"function"!=typeof e()||(t.preventDefault(),e()(t.currentTarget.dataset.href),!1)}var Yl,Ql=me('<li class="is-active"><a aria-current="page"> </a></li>'),Xl=me('<li class="is-plain-crumb"> </li>'),Zl=me("<li><a> </a></li>"),tc=me('<nav class="breadcrumb" aria-label="breadcrumbs"><ul></ul></nav>');ge(["click"]);class ec{static render({target:t,root:e="",navigate:i}){this.remove(),ec.UIConstructor&&(this.ui=new ec.UIConstructor({target:t,props:{items:this.getBreadcrumbs(),root:e,go:i}}))}static setHead(t){return this.head.splice(0,this.head.length,...t),this}static setTail(t){return this.tail.splice(0,this.tail.length,...t),this}static getBreadcrumbs(){let t=[];return t.push(...this.head),t.push(...this.tail),t}static update(){this.ui&&this.ui.$set({items:this.getBreadcrumbs()})}static remove(){return this.ui&&(this.ui.$destroy(),this.ui=null),this}}Fi(ec,"UIConstructor",null),Fi(ec,"ui",null),Fi(ec,"head",[]),Fi(ec,"tail",[]),ec.UIConstructor=function(t,e){Ht(e,!0);const i=mi(),r=()=>vi(Hi,"$LOCALE",i);let n=ki(e,"root",3,""),s=ki(e,"items",19,(()=>[])),o=ki(e,"go",3,null);var a=tc();xe(ie(a),21,s,Ue,((t,e,i)=>{var a=ye();De(re(a),(()=>s().length===i+1),(t=>{var i=Ql(),s=ie(i),o=ie(s);G((()=>{He(s,"href",`${n()??""}${Wt(e).url??""}`),He(s,"data-href",Wt(e).url),Le(o,r()[Wt(e).title])})),Oe(t,i)}),(t=>{var i=ye();De(re(i),(()=>!1===Wt(e).url),(t=>{var i=Xl(),n=ie(i);G((()=>Le(n,r()[Wt(e).title]))),Oe(t,i)}),(t=>{var i=Zl(),s=ie(i);s.__click=[Kl,o];var a=ie(s);G((()=>{He(s,"href",`${n()??""}${Wt(e).url??""}`),He(s,"data-href",Wt(e).url),Le(a,r()[Wt(e).title])})),Oe(t,i)})),Oe(t,i)})),Oe(t,a)})),Oe(t,a),qt()};class ic{static hide(){}static setApp(t){return this.app||(this.app=t),this}static setOptions(t){return this.options={...this.options,...t},this}static getOptionsPathTo(t){return`menu.${this.options.type}.${t}`}static isDirectNavigation(){return this.app?this.app.getOptions(this.getOptionsPathTo("directNavigation"),this.options.directNavigation):this.options.directNavigation}static getOptions(){return this.app?{brand:this.app.getOptions("brand",this.options.brand),items:this.app.getOptions(this.getOptionsPathTo("items"),this.options.items),sections:this.app.getOptions(this.getOptionsPathTo("sections"),this.options.sections),targetSelector:this.app.getOptions(this.getOptionsPathTo("targetSelector"),this.options.targetSelector),toggleSelector:this.app.getOptions(this.getOptionsPathTo("toggleSelector"),this.options.toggleSelector),open:this.app.getOptions(this.getOptionsPathTo("open"),this.options.open),directNavigation:this.app.getOptions(this.getOptionsPathTo("directNavigation"),this.options.directNavigation),root:this.app.getOptions("router.root",this.options.root),navigate:this.options.navigate.bind(this),getComponent:this.getComponent.bind(this)}:this.options}static getComponent(t){return!!go.contains(t)&&go.get(t)}static initField(t,e=[]){var i=this;t.forEach((function(t){e.forEach((function(e){Object.hasOwn(t,e)||(t[e]=i.DEFAULT[e])})),Object.hasOwn(t,"items")&&i.initField(t.items,e)}))}static sortList(t){var e=this;t.sort((function(t,i){return Object.hasOwn(t,"items")&&e.sortList(t.items),Object.hasOwn(i,"items")&&e.sortList(i.items),t.priority===i.priority?t.title>i.title?1:-1:t.priority<i.priority?1:-1}))}static removeDublicates(t){for(let e=0;e<t.length;e++){let i=t[e].priority;t.filter((function(i){return i.id===t[e].id})).forEach((function(e,r){0!==r&&(e.priority<i&&(i=e.priority),t.splice(t.indexOf(e),1))})),t[e].priority=i}return t}static prepareData(){let t=[];t.push(...this.getOptions().items);let e=[];e.push(...this.getOptions().sections),this.initField(e,["priority"]),this.removeDublicates(e),this.initField(t,["priority","section","type"]),this.sortList(e),e.push({id:this.DEFAULT.section,title:this.DEFAULT.sectionTitle}),this.sortList(t),this.sections=e,this.items=t}static remove(){this.menu&&(this.menu.$destroy(),this.menu=null,clearInterval(this.interval))}static updateIndicator(t,e,i){this.updateSection(t,(function(t){t.indicator.state=i})),this.updateItem(e,(function(t){t.indicator.state=i}))}static updateTag(t,e,i){this.updateSection(t,(function(t){t.tag=i})),this.updateItem(e,(function(t){t.tag=i}))}static updateSectionTag(t,e){this.updateSection(t,(function(t){t.tag={...t.tag,...e}}))}static updateItemTag(t,e){this.updateItem(t,(function(t){t.tag={...t.tag,...e}}))}static updateSection(t,e){if(this.sections&&t){for(let i in this.sections)this.sections[i].id===t&&e(this.sections[i]);this.menu&&this.menu.$set({sections:this.sections})}}static updateSectionItems(t,e){if(this.sections&&t){let i=this.items.filter((function(e){return e.section===t}));for(let t of i)this.items.splice(this.items.indexOf(t),1);this.items.push(...e(i)),this.menu&&this.menu.$set({items:this.items})}}static updateItem(t,e){t&&this.items&&(this.items.forEach((function(i){i.id===t&&e(i)})),this.menu&&this.menu.$set({items:this.items}))}static isTouch(){return Mi.isMobile(!0)}static getSectionComponent(){}}function rc(t,e){return t.preventDefault(),e("navigate",{full:t.target.getAttribute("href"),short:t.target.dataset.href}),!1}Yl=ic,Fi(ic,"MAX_TOUCH_WIDTH",1023),Fi(ic,"DEFAULT",{section:"any",sectionTitle:"Меню",priority:0,type:"link",open:!1}),Fi(ic,"app",null),Fi(ic,"directNavigation",!1),Fi(ic,"menu",void 0),Fi(ic,"options",{directNavigation:!1,navigate:function(t){if(Yl.hide(),!Yl.isDirectNavigation()&&Yl.app){let e=Yl.app.getWorking("router");if(e)return e.navigate(t.short)}document.location.assign(t.full)}}),Fi(ic,"items",[]),Fi(ic,"sections",[]),Fi(ic,"location",void 0),Fi(ic,"interval",void 0);var nc=me("<li><a> <!> <!></a></li>"),sc=me("<li> <!> <!></li>");function oc(t,e,i){return t&&t.preventDefault()&&t.stopPropagation(),e(!e()),i("toggle",{closed:e()}),!1}ge(["click"]);var ac=me('<span class="icon is-small is-toggle-submenu is-pulled-right" role="button" tabindex="0"><i aria-hidden="true"></i></span>');function lc(t,e){Ht(e,!0);const i=fi(),r="fa-angle-down",n="fa-angle-up";let s=ki(e,"icon_opened",19,(()=>r)),o=ki(e,"icon_closed",19,(()=>n)),a=ki(e,"closed",15,!1);var l=ac();l.__click=[oc,a,i],l.__keyup=[oc,a,i];var c=ie(l);G((()=>Ke(c,`fas ${(a()?o():s())??""}`))),Oe(t,l),qt()}ge(["click","keyup"]);var cc=me('<span class="is-no-link"> </span>'),uc=me("<!> <!> <!> <!>",1);function dc(t,e){Ht(e,!0);const i=mi();let r=ki(e,"item",19,(()=>({})));var n=uc(),s=re(n);De(s,(()=>r().icon),(t=>{$n(t,$i((()=>r().icon)))}),(t=>{var e=ye();De(re(e),(()=>"component"===r().type&&r().component&&go.contains(r().component)),(t=>{var e=ye();const i=D((()=>go.get(r().component)));Ve(re(e),(()=>Wt(i)),((t,e)=>{e(t,$i({get id(){return r().id}},(()=>r().props)))})),Oe(t,e)}),(t=>{var e=cc(),n=ie(e);G((()=>Le(n,vi(Hi,"$LOCALE",i)[r().title]))),Oe(t,e)}),!0),Oe(t,e)}));var o=ne(s,2);De(o,(()=>r().tag),(t=>{pr(t,$i({get id(){return r().id}},(()=>r().tag)))}));var a=ne(o,2);De(a,(()=>r().indicator),(t=>{Ar(t,$i({get id(){return r().id}},(()=>r().indicator)))})),ze(ne(a,2),(()=>e.children??d)),Oe(t,n),qt()}function hc(t,e){return t.preventDefault(),e("navigate",{full:t.target.getAttribute("href"),short:t.target.dataset.href}),!1}var gc=me('<a class="has-subitems"><!></a>'),fc=me("<li><!> <!></li>"),pc=me("<ul></ul>");function vc(t,e){Ht(e,!0);const i=fi();let r=Gt({}),n=ki(e,"root",3,""),s=ki(e,"items",19,(()=>[])),o=ki(e,"closed",3,!1);var a=pc();xe(a,21,s,Ue,((t,s,o)=>{var a=ye();De(re(a),(()=>Wt(s).items&&Wt(s).items.length),(t=>{var a=fc(),l=ie(a);De(l,(()=>void 0!==Wt(s).url&&!1!==Wt(s).url),(t=>{var e=gc();e.__click=[hc,i],dc(ie(e),{get item(){return Wt(s)},children:(t,e)=>{lc(t,{$$events:{toggle:({detail:t})=>{r[o]=t.closed}}})},$$slots:{default:!0}}),G((()=>{He(e,"href",`${n()??""}${Wt(s).url??""}`),He(e,"data-href",Wt(s).url)})),Oe(t,e)}),(t=>{dc(t,{get item(){return Wt(s)},children:(t,e)=>{lc(t,{$$events:{toggle:({detail:t})=>{r[o]=t.closed}}})},$$slots:{default:!0}})})),vc(ne(l,2),{get root(){return n()},get items(){return Wt(s).items},get closed(){return r[o]},set closed(t){r[o]=t},$$events:{navigate(t){hi.call(this,e,t)}}}),G((()=>Ke(a,`is-no-follow-subtitle ${Wt(s).classes??""}`))),Oe(t,a)}),(t=>{!function(t,e){Ht(e,!0);const i=mi(),r=()=>vi(Hi,"$LOCALE",i),n=fi();let s=ki(e,"root",3,""),o=ki(e,"item",19,(()=>({})));var a=ye();De(re(a),(()=>void 0!==o().url&&!1!==o().url),(t=>{var e=nc(),i=ie(e);i.__click=[rc,n];var a=ie(i),l=ne(a);De(l,(()=>o().tag),(t=>{Ar(t,$i({get id(){return o().id}},(()=>o().tag)))})),De(ne(l,2),(()=>o().indicator),(t=>{Ar(t,$i({get id(){return o().id}},(()=>o().indicator)))})),G((()=>{Ke(e,o().classes),He(i,"href",`${s()??""}${o().url??""}`),He(i,"data-href",o().url),Le(a,`${r()[o().title]??""} `)})),Oe(t,e)}),(t=>{var e=sc(),i=ie(e),n=ne(i);De(n,(()=>o().tag),(t=>{Ar(t,$i({get id(){return o().id}},(()=>o().tag)))})),De(ne(n,2),(()=>o().indicator),(t=>{Ar(t,$i({get id(){return o().id}},(()=>o().indicator)))})),G((()=>{Ke(e,`is-no-follow-subtitle ${o().classes??""}`),Le(i,`${r()[o().title]??""} `)})),Oe(t,e)})),Oe(t,a),qt()}(t,{get root(){return n()},get item(){return Wt(s)},$$events:{navigate(t){hi.call(this,e,t)}}})})),Oe(t,a)})),G((()=>Ke(a,`menu-list ${(o()?"is-closed":"")??""}`))),Oe(t,a),qt()}ge(["click"]);var mc=me("<p><!> <!> <!></p>"),bc=me("<!> <!>",1);function yc(t,e){Ht(e,!0);const i=mi();let r=ki(e,"items",19,(()=>[])),n=ki(e,"root",3,""),s=D((()=>r().filter((t=>e.section.id===t.section))));var o=bc(),a=re(o);De(a,(()=>e.section),(t=>{var r=ye();De(re(r),(()=>Wt(s).length||e.section.component||e.section.tag||e.section.indicator),(t=>{var r=mc(),n=ie(r);De(n,(()=>"component"===e.section.type&&e.section.component&&go.contains(e.section.component)),(t=>{var i=ye();const r=D((()=>go.get(e.section.component)));Ve(re(i),(()=>Wt(r)),((t,i)=>{i(t,$i({get id(){return e.section.id}},(()=>e.section.props)))})),Oe(t,i)}),(t=>{var r=be();G((()=>Le(r,vi(Hi,"$LOCALE",i)[e.section.title]))),Oe(t,r)}));var s=ne(n,2);De(s,(()=>e.section.tag),(t=>{Ar(t,$i({get id(){return e.section.id}},(()=>e.section.tag)))})),De(ne(s,2),(()=>e.section.indicator),(t=>{Ar(t,$i({get id(){return e.section.id}},(()=>e.section.indicator)))})),G((()=>Ke(r,`menu-label ${e.section.classes??""}`))),Oe(t,r)})),Oe(t,r)})),De(ne(a,2),(()=>Wt(s).length),(t=>{vc(t,{get root(){return n()},get items(){return Wt(s)},$$events:{navigate(t){hi.call(this,e,t)}}})})),Oe(t,o),qt()}function Oc(t,e){Ht(e,!0);let i=ki(e,"root",3,""),r=ki(e,"items",19,(()=>[])),n=ki(e,"sections",19,(()=>[])),s=ki(e,"navigate",3,null);function o(t){"function"==typeof s()&&s()(t.detail)}var a=ye();xe(re(a),17,n,Ue,((t,e)=>{yc(t,{get section(){return Wt(e)},get items(){return r()},get root(){return i()},$$events:{navigate:o}})})),Oe(t,a),qt()}const $c=zi({open:!0});var wc;const kc="side";class Ic extends ic{static render(t){t&&this.setApp(t),this.prepareData(),this.menu||this.createUI()}static update(){this.menu&&(this.menu.$destroy(),this.createUI())}static createUI(){let t=document.querySelector(this.getOptions().targetSelector);t&&(this.menu=Ne(Oc,{target:t,props:{items:this.items,sections:this.sections,root:this.getOptions().root,navigate:this.getOptions().navigate}}),this.initSizeResponse(),this.interval=setInterval(this.updateMenuActiveItem.bind(this),200),this.bindToggle())}static itemIsActive(t){return(this.location+"/").indexOf(t+"/")>-1}static updateMenu(){var t=this;Array.from(document.querySelectorAll(this.getOptions().targetSelector+" a")).forEach((function(e){t.itemIsActive(e.getAttribute("href"))?e.classList.add("is-active"):e.classList.remove("is-active")}))}static updateMenuActiveItem(){let t=window.location.toString(),e=this.location;e?t!==e&&(this.location=t,this.updateMenu()):(this.location=t,this.updateMenu())}static initSizeResponse(){this.nav=document.querySelector("nav.navbar"),this.aside=document.querySelector("aside"),this.main=document.querySelector("main"),this.resizeAsideAndMain(this.aside,this.main,this.nav),this.resizeMain(this.main,this.aside),window.addEventListener("resize",this.resizeMain.bind(this)),this.isTouch()&&(this.getOptions().open?this.show():this.hide())}static resizeMain(){if(this.isTouch())this.aside.classList.contains("is-active")?this.main.style.display="none":(this.main.style.display="block",this.main.style.marginLeft="0px");else{let t=this.aside.getBoundingClientRect();this.main.style.display="block","0px"===this.main.style.height&&(this.main.style.height="auto"),this.main.style.marginLeft=t.width+t.left+"px"}}static resizeAside(){if("none"!==this.aside.style.display){let t=this.nav.getBoundingClientRect();this.aside.style.height=window.innerHeight-t.height+"px",this.aside.style.marginTop=t.height+"px"}}static resizeAsideAndMain(){let t=this.nav.getBoundingClientRect();this.aside.style.height=window.innerHeight-t.height+"px"}static bindToggle(){var t=this;let e=document.querySelectorAll(this.getOptions().toggleSelector);Array.from(e).forEach((function(e){e.removeEventListener("click",t.toggle.bind(t)),e.addEventListener("click",t.toggle.bind(t))}))}static toggle(t){return t&&t.preventDefault(),this.aside&&(this.isTouch()?this.aside.classList.toggle("is-active"):this.aside.classList.toggle("is-closed"),this.resizeMain()),!1}static hide(t){return t&&t.preventDefault(),this.aside&&(this.isTouch()?this.aside.classList.remove("is-active"):this.aside.classList.add("is-closed"),this.resizeMain()),$c.update((function(t){return t.open=!1,t})),!1}static show(t){return t&&t.preventDefault(),this.aside&&(this.isTouch()?this.aside.classList.add("is-active"):this.aside.classList.remove("is-closed"),this.resizeMain()),$c.update((function(t){return t.open=!0,t})),!1}static isOpen(){return!this.aside||(this.isTouch()?this.aside.classList.contains("is-active"):!this.aside.classList.contains("is-closed"))}}wc=Ic,Fi(Ic,"nav",void 0),Fi(Ic,"main",void 0),Fi(Ic,"aside",void 0),Fi(Ic,"DEFAULT",{section:"any",sectionTitle:"Меню",priority:0,open:!0,type:"link"}),Fi(Ic,"options",{directNavigation:!1,type:kc,items:[],sections:[],targetSelector:`#${kc}-menu`,toggleSelector:`.${kc}-menu-toggle`,root:"/",open:!0,navigate:function(t){if(wc.isTouch()&&(wc.hide(),wc.app&&wc.app.emit("top-navbar-burger:update",{closed:!0})),!wc.isDirectNavigation()&&wc.app){let e=wc.app.getWorking("router");if(e)return e.navigate(t.short)}document.location.assign(t.full)}});var Ac=me('<a class="navbar-item"><!> <!></a>');var _c=me("<!> <!> <!>",1);function Cc(t,e){Ht(e,!0);const i=mi();var r=_c(),n=re(r);De(n,(()=>e.item.icon),(t=>{In(t,$i((()=>e.item.icon)))}),(t=>{var r=ye();De(re(r),(()=>"component"===e.item.type&&e.item.component&&go.contains(e.item.component)),(t=>{var i=ye();const r=D((()=>go.get(e.item.component)));Ve(re(i),(()=>Wt(r)),((t,i)=>{i(t,$i({get id(){return e.item.id}},(()=>e.item.props)))})),Oe(t,i)}),(t=>{var r=be();G((()=>Le(r,vi(Hi,"$LOCALE",i)[e.item.title]))),Oe(t,r)}),!0),Oe(t,r)}));var s=ne(n,2);De(s,(()=>e.item.tag),(t=>{pr(t,$i({top:!0,right:!0,size:"small",get id(){return e.item.id}},(()=>e.item.tag)))})),De(ne(s,2),(()=>e.item.indicator),(t=>{Ar(t,$i({get id(){return e.item.id}},(()=>e.item.indicator)))})),Oe(t,r),qt()}function Ec(t,e,i){e("click",{event:t,element:i()})}var Sc=me("<hr>"),Lc=me("<a><!></a>"),Nc=me('<div role="button" tabindex="0"><!></div>'),Fc=me("<!> <!>",1);function Tc(t,e){Ht(e,!0);const i=fi();let r=ki(e,"root",3,""),n=ki(e,"item",19,(()=>({}))),s=ki(e,"hidden",3,""),o=ki(e,"classes",3,"");var a=Fc(),l=re(a);De(l,(()=>n().break),(t=>{var e=Sc();G((()=>Ke(e,`navbar-divider ${(s()?`is-hidden-${s()}`:"")??""} `))),Oe(t,e)})),De(ne(l,2),(()=>n().url),(t=>{var e=Lc();e.__click=[Ec,i,n],Cc(ie(e),{get item(){return n()}}),G((()=>{Ke(e,`navbar-item ${(s()?`is-hidden-${s()}`:"")??""} ${n().classes??""} ${o()??""} `),He(e,"href",`${r()??""}${n().url??""}`),He(e,"data-href",n().url)})),Oe(t,e)}),(t=>{var e=Nc();e.__click=[Ec,i,n],e.__keyup=[Ec,i,n],Cc(ie(e),{get item(){return n()}}),G((()=>Ke(e,`navbar-item ${(s()?`is-hidden-${s()}`:"")??""} ${n().classes??""} ${o()??""}`))),Oe(t,e)})),Oe(t,a),qt()}function Mc(t,e,i){e("click",{event:t,element:i()})}ge(["click","keyup"]);var Dc=me('<div><a href=""><!></a> <div></div></div>'),Uc=me("<a><!></a>"),xc=me('<div role="button" tabindex="0"><!></div>');function Rc(t,e){Ht(e,!0);const i=fi();let r=ki(e,"root",3,""),n=ki(e,"section",19,(()=>({}))),s=ki(e,"items",19,(()=>[])),o=ki(e,"hidden",3,""),a=ki(e,"hoverable",3,!0),l=ki(e,"arrowless",3,!1),c=ki(e,"right",3,!1);var u=ye();De(re(u),(()=>s().length),(t=>{var u=Dc(),d=ie(u);d.__click=[Mc,i,n],Cc(ie(d),{get item(){return n()}});var h=ne(d,2);xe(h,21,s,(t=>t.id),((t,i)=>{Tc(t,{get root(){return r()},get item(){return Wt(i)},$$events:{click(t){hi.call(this,e,t)}}})})),G((()=>{Ke(u,`navbar-item has-dropdown ${(a()?"is-hoverable":"")??""} ${(o()?`is-hidden-${o()}`:"")??""} `),Ke(d,`navbar-link ${(l()?"is-arrowless":"")??""}`),Ke(h,`navbar-dropdown ${(c()?"is-right":"")??""}`)})),Oe(t,u)}),(t=>{var e=ye();De(re(e),(()=>n().url),(t=>{var e=Uc();e.__click=[Mc,i,n],Cc(ie(e),{get item(){return n()}}),G((()=>{Ke(e,`navbar-item ${(o()?`is-hidden-${o()}`:"")??""} `),He(e,"href",`${r()??""}${n().url??""}`),He(e,"data-href",n().url)})),Oe(t,e)}),(t=>{var e=xc();e.__click=[Mc,i,n],e.__keyup=[Mc,i,n],Cc(ie(e),{get item(){return n()}}),G((()=>Ke(e,`navbar-item ${(o()?`is-hidden-${o()}`:"")??""} `))),Oe(t,e)}),!0),Oe(t,e)})),Oe(t,u),qt()}function Pc(t,e,i){return t.preventDefault(),e(!e()),i("toggle",{closed:e()}),!1}ge(["click","keyup"]);var jc=me('<a href="" role="button" aria-label="menu" aria-expanded="false" data-target="navbar"><span aria-hidden="true"></span> <span aria-hidden="true"></span> <span aria-hidden="true"></span></a>');function Wc(t,e){Ht(e,!0);const i=fi();let r=ki(e,"events",31,(()=>Gt({}))),n=ki(e,"register",19,(()=>ur.registerWidgetEvents.bind(ur))),s=ki(e,"closed",15,!0),o=ki(e,"onUpdate",3,(t=>{s(t.closed)}));gi((()=>{ur.objHas(r(),"top-navbar-burger:update")||r(r()["top-navbar-burger:update"]=o(),!0),n()(r())})),$c.subscribe((t=>(s(!t.open),t)));var a=jc();a.__click=[Pc,s,i],G((()=>Ke(a,`navbar-burger ${(s()?"":"is-active")??""}`))),Oe(t,a),qt()}ge(["click"]);var Bc,zc=me('<div class="navbar-brand"><!> <!> <!> <!></div> <div id="navbar"><div class="navbar-start"></div> <div class="navbar-end"></div></div>',1);function Vc(t,e){Ht(e,!0);const i=fi();let r=ki(e,"sections",19,(()=>[])),n=ki(e,"items",19,(()=>[])),s=ki(e,"root",3,""),o=ki(e,"navigate",3,null),a=ki(e,"brand",3,!1),l=ki(e,"showBurger",3,!0),c=ki(e,"burgerControlsSidemenu",3,!0),u=L(!0);function d({detail:t}){let{event:e,element:i}=t;return Object.hasOwn(i,"action")?i.action(e,i):(e.preventDefault(),"function"==typeof o()&&o()({full:e.currentTarget.getAttribute("href"),short:e.currentTarget.dataset.href}),!1)}let h={},g={};function f({detail:t}){c()?Ic.toggle():(i("toggleBurger",t),F(u,Gt(t.closed)))}var p=zc(),v=re(p),m=ie(v);De(m,a,(t=>{!function(t,e){let i=ki(e,"url",3,"/"),r=ki(e,"title",3,""),n=ki(e,"icon",19,(()=>({src:"https://via.placeholder.com/56x28",width:28,height:56})));var s=Ac(),o=ie(s);In(o,$i(n)),De(ne(o,2),r,(t=>{var e=ye();Be(re(e),(()=>`<span class="navbar-item-brand-title">${r()}</span>`)),Oe(t,e)})),G((()=>He(s,"href",i()))),Oe(t,s)}(t,$i(a))}));var b=ne(m,2);xe(b,17,r,(t=>t.id),((t,e)=>{var i=ye();De(re(i),(()=>Wt(e).showOnTouch),(t=>{Tc(t,{hidden:"desktop",get item(){return Wt(e)},get root(){return s()},$$events:{click:d}})})),Oe(t,i)}));var y=ne(b,2);xe(y,17,n,(t=>t.id),((t,e)=>{var i=ye();De(re(i),(()=>Wt(e).showOnTouch),(t=>{Tc(t,{hidden:"desktop",get item(){return Wt(e)},get root(){return s()},$$events:{click:d}})})),Oe(t,i)})),De(ne(y,2),l,(t=>{Wc(t,{$$events:{toggle:f}})}));var O=ne(v,2),$=ie(O);xe($,21,n,Ue,((t,e)=>{var i=ye();De(re(i),(()=>"start"===Wt(e).place),(t=>{Tc(t,{hidden:"touch",get item(){return Wt(e)},$$events:{click:d}})})),Oe(t,i)})),xe(ne($,2),21,r,(t=>t.id),((t,e)=>{var i=ye();De(re(i),(()=>(h[Wt(e).id]||Wt(e).indicator||Wt(e).tag)&&"end"==Wt(e).place),(t=>{Rc(t,{right:!0,get hidden(){return Wt(e).hidden},get root(){return s()},get section(){return Wt(e)},get items(){return g[Wt(e).id]},$$events:{click:d}})})),Oe(t,i)})),G((()=>Ke(O,`navbar-menu ${(Wt(u)?"":"is-active")??""}`))),Oe(t,p),qt()}class Hc extends ic{static render(t){if(t&&this.setApp(t),this.prepareData(),!this.menu){let t=document.querySelector(this.getOptions().targetSelector);if(!t)return;this.menu=Ne(Vc,{target:t,props:{brand:this.getOptions().brand,items:this.items,sections:this.sections,root:this.getOptions().root,navigate:this.getOptions().navigate}}),this.interval=setInterval(this.updateMenuActiveItem.bind(this),200)}}static updateMenu(t){Array.from(document.querySelectorAll(this.getOptions().targetSelector+" aside.menu a")).forEach((function(e){e.href==t||t.href&&0==t.href.indexOf(e.href)?e.classList.add("is-active"):e.classList.remove("is-active")}))}static updateMenuActiveItem(){let t=window.location.toString(),e=this.location;e?t!==e&&(this.location=t,this.updateMenu(t)):(this.location=t,this.updateMenu(t))}static toggle(){document.querySelector(this.getOptions().targetSelector).classList.toggle("is-active")}static hide(){document.querySelector(this.getOptions().targetSelector).classList.remove("is-active")}static setBurgerState(t){this.menu.$set({menuClosed:t})}}Bc=Hc,Fi(Hc,"DEFAULT",{section:"any",sectionTitle:"Меню",priority:0,type:"link",place:"main"}),Fi(Hc,"options",{brand:!1,type:"top",items:[],sections:[],targetSelector:"#top-menu",root:"/",directNavigation:!1,navigate:function(t){if(Bc.hide(),!Bc.isDirectNavigation()&&Bc.app){let e=Bc.app.getWorking("router");if(e)return e.navigate(t.short)}document.location.assign(t.full)}});const qc=function(t){return Object.hasOwn(t,"status")&&Object.hasOwn(t,"result")?t.result:t};const Gc=["create","update","list","delete","details"];class Jc{static async preload(t,e="list"){try{if(!Gc.includes(e))return;let i=t.getOptions(`${e}.preload`,{});if(0==Object.keys(i).length&&(i=t.getOptions("preload",{})),Object.keys(i).length>0){let r=Object.keys(i),n=[];r.forEach((function(e){let r=ur.lowerFirstLetter(i[e]),s=t.make[r]({});n.push(s.$listAll())}));let s=await Promise.all(n);for(let i=0;i<r.length;i++){const n=r[i];if("ok"===s[i].status&&Array.isArray(s[i].result)){const r=s[i].result.map((function(t){return{id:t._id,title:t.title}}));t.setOptions(`variants.${e}.${n}`,r)}}}t.log("preload finished")}catch(e){t.report(e),t.showErrorMessage(e)}}}class Kc{static extractActionName(t,e){let i="list";return 1===e.length?i="create"===e[0]?"create":t.actionHandlerExists(e[0])?e[0]:"details":e.length>1&&(i="delete"===e[1]?"delete":"update"===e[1]?"update":e[1]),i}static route(t,e){try{const i=Kc.extractActionName(t,e);return t.setCurrentAction(i),t.runAction(i,e)}catch(e){t.report(e),t.showErrorMessage(e)}}}class Yc{static error(t,e,i){t.setUI("__message__",new zs({target:t.getContainerInnerElement(),props:{title:e,message:i}}))}static success(t,e,i){t.setUI("__message__",new Hs({target:t.getContainerInnerElement(),props:{title:e,message:i}}))}}const Qc="Просмотр";class Xc{static get NAVIGATION_DELAY(){return Qr}static get deafultBreadcrumbsTail(){return Qc}static get breadcrumbsTails(){return{preset:Qc,set:'Просмотр, "{:title}"'}}static getBreadcrumbsTail(t){return this.breadcrumbsTails?ur.select(this.breadcrumbsTails,t,this.deafultBreadcrumbsTail):""}static get ACTION(){return"details"}static get MODEL_ACTION_GET(){return"get"}static get MODEL_ACTION_PUT(){return"get"}static get UIConstructor(){return Tl}static get TRANSFORMER(){return qc}static getIdField(t){return t.getOptions(`${this.ACTION}.idField`,"_id")}static loadDataQuery(t,e){const i=this.getIdField(t);return{[i]:e[0]}}static async loadData(t,e){const i=this.loadDataQuery(t,e),r=this.getModelActionName(t);return await t.getModel(i)[`$${r}`]()}static getModelActionName(t){return t.getOptions(`${this.ACTION}.actionName`,this.MODEL_ACTION_GET)}static presetBreadcrumbs(t,e){t.setBreadcrumbs([{title:this.getBreadcrumbsTail("preset"),url:t.getModelActionURL(e[0],!1)}])}static getTitle(t,e,i){return t.getItemTitle(i.result)}static setBreadcrumbs(t,e,i){const r=this.getTitle(t,e,i),n=this.getBreadcrumbsTail("set");t.setBreadcrumbs([{title:n?hr.format(n,{title:r}):r,url:t.getModelActionURL(e[0],!1)}])}static isResponseBad(t){return!t||"ok"!==t.status}static getValidators(t){return t.getValidators&&t.getValidators()||t.getOptions("Validators")}static prepareUIOptions(t,e){const i=this.getModelActionName(t);return{options:{target:t.getContainerInnerElement(),model:t.getModelName(),action:i,name:`${t.getName()}.${this.ACTION}Form`,fields:{readonly:!0},validators:this.getValidators(t),variants:t.getOptions(`variants.${this.ACTION}`,{}),masters:t.getOptions(`${this.ACTION}.masters`,{}),injected:t.getOptions(`${this.ACTION}.injected`,{})},data:this.TRANSFORMER(e.result)}}static getUI(t){return t.getUI(this.ACTION)}static setUI(t,e){t.setUI(this.ACTION,e)}static setUILoading(t){this.getUI(t).$set({loading:!0})}static setUILoaded(t){this.getUI(t).$set({loading:!1})}static setUIError(t,e){this.getUI(t).$set({error:e})}static bindUIEvents(t,e,i){ur.isFunc(t.goBack)&&this.bindUIEvent(t,"reject",(function(){return t.goBack()}))}static bindUIEvent(t,e,i){const r=this.getUI(t);return r.$on?r.$on(e,i):r.on?r.on(e,i):void 0}static isUIRendered(t){return!!this.getUI(t)||(t.$destroyUI(),!1)}static tweakUIOptions(t){return t}static createUI(t,e,i){return ur.isFunc(t)?Ne(t,this.tweakUIOptions(this.prepareUIOptions(e,i))):new t(this.tweakUIOptions(this.prepareUIOptions(e,i)))}static async run(t,e){try{if(t.emit(`before:render:${this.ACTION}`,e),this.isUIRendered(t))return;t.renderLoadingScreen&&t.renderLoadingScreen(),await t.preloadVariants(this.ACTION),this.presetBreadcrumbs(t,e);const i=await this.loadData(t,e);if(this.isResponseBad(i))return t.showErrorMessage(i);this.setBreadcrumbs(t,e,i);this.UIConstructor,this.createUI();this.setUI(t),this.bindUIEvents(t,e,i),t.emit(`after:render:${this.ACTION}`,e,i)}catch(i){t.emit(`exception:render:${this.ACTION}`,e,i),t.report(i),t.showErrorMessage(i)}finally{t.removeLoadingScreen&&t.removeLoadingScreen()}}static goBackAfterDelay(t){t.goBack(this.NAVIGATION_DELAY)}static goBack(t){t.goBack(0)}}const Zc="create";class tu extends Xc{static get deafultBreadcrumbsTail(){return"Создание"}static get breadcrumbsTails(){}static get ACTION(){return Zc}static get MODEL_ACTION_GET(){return Zc}static get MODEL_ACTION_PUT(){return Zc}static loadData(t,e={}){let i=t.createDefault();return i.getData&&(i=i.getData()),{status:"ok",result:i}}static getTitle(t,e,i){return t.getItemTitle(i)}static prepareUIOptions(t,e){const i=this.getModelActionName(t);return{options:{target:t.getContainerInnerElement(),model:t.getModelName(),action:i,name:`${t.getName()}.${this.ACTION}Form`,validators:this.getValidators(t),variants:t.getOptions(`variants.${this.ACTION}`,{}),masters:t.getOptions(`${this.ACTION}.masters`,{})},data:this.TRANSFORMER(e)}}static bindUIEvents(t,e,i){var r=this;ur.isFunc(t.goBack)&&this.bindUIEvent(t,"reject",(function(){return r.goBack(t)})),ur.isFunc(t.onActionSubmit)&&this.bindUIEvent(t,"submit",(async function(i){await t.onActionSubmit(r.ACTION,{...r.loadDataQuery(t,e),...i.detail})&&r.goBackAfterDelay(t)}))}}class eu extends Xc{static tweakUIOptions(t){return t.options.ui={submit:{enabled:!1}},t}static async run(t,e){try{if(t.emit(`before:render:${this.ACTION}`,e),this.isUIRendered(t))return;t.renderLoadingScreen&&t.renderLoadingScreen(),await t.preloadVariants(this.ACTION),this.presetBreadcrumbs(t,e);const i=await this.loadData(t,e);if(this.isResponseBad(i))return t.showErrorMessage(i);this.setBreadcrumbs(t,e,i);const r=this.UIConstructor;this.setUI(t,new r(this.tweakUIOptions(this.prepareUIOptions(t,i)))),this.bindUIEvents(t,e,i),t.emit(`after:render:${this.ACTION}`,e,i)}catch(i){t.emit(`exception:render:${this.ACTION}`,e,i),t.report(i),t.showErrorMessage(i)}finally{t.removeLoadingScreen&&t.removeLoadingScreen()}}}const iu="Редактирование";class ru extends Xc{static get deafultBreadcrumbsTail(){return iu}static get breadcrumbsTails(){return{preset:iu,set:`${iu}: "{:title}"`}}static get ACTION(){return"update"}static get MODEL_ACTION_GET(){return"getRaw"}static get MODEL_ACTION_PUT(){return"update"}static prepareUIOptions(t,e){return{options:{target:t.getContainerInnerElement(),model:t.getModelName(),action:this.MODEL_ACTION_PUT,name:`${t.getName()}.${this.ACTION}Form`,validators:this.getValidators(t),variants:t.getOptions(`variants.${this.ACTION}`,{}),ui:t.getOptions(`${this.ACTION}.ui`,{}),fields:t.getOptions(`${this.ACTION}.fields`,{}),masters:t.getOptions(`${this.ACTION}.masters`,{})},data:this.TRANSFORMER(ur.stripProxy(e.result))}}static bindUIEvents(t,e,i){var r=this;ur.isFunc(t.goBack)&&this.bindUIEvent(t,"reject",(function(){return r.goBack(t)})),ur.isFunc(t.onActionSubmit)&&this.bindUIEvent(t,"submit",(async function(i){await t.onActionSubmit(r.ACTION,{...r.loadDataQuery(t,e),...i.detail})&&r.goBackAfterDelay(t)}))}static isUIRendered(t){return!!this.getUI(t)||(t.$destroyUI(),!1)}static async run(t,e){try{if(t.emit(`before:render:${this.ACTION}`,[e]),this.isUIRendered(t))return;t.renderLoadingScreen&&t.renderLoadingScreen(),await t.preloadVariants(this.ACTION),this.presetBreadcrumbs(t,e);const i=await this.loadData(t,e);if(this.isResponseBad(i))return t.showErrorMessage(i);this.setBreadcrumbs(t,e,i);const r=this.UIConstructor;this.setUI(t,new r(this.tweakUIOptions(this.prepareUIOptions(t,i)))),this.bindUIEvents(t,e,i),t.emit(`after:render:${this.ACTION}`,e)}catch(i){t.emit(`exception:render:${this.ACTION}`,e,i),t.report(i),t.showErrorMessage(i)}finally{t.removeLoadingScreen&&t.removeLoadingScreen()}}}const nu="delete";const su="list";class ou{static tweakActionsList(t,e){return t.getOptions(`${su}.createAction`,!0)&&e.push({title:"Создать",action:function(){return t.goCreate()}}),e}static tweakUIOptions(t){return t}static createActionsButtons(t,e,i=0,r=["details","update","delete"],n=[],s=[],o=!0){const a={details:{action:function(){return t.goDetails(e,i)},...o?{icon:"circle-info"}:{title:"Подробнее"},size:"small"},update:{action:function(){return t.goUpdate(e,i)},...o?{icon:"edit"}:{title:"Изменить"},color:"warning",size:"small"},delete:{action:function(){return t.goDelete(e,i)},color:"danger",...o?{icon:"trash"}:{title:"Удалить"},size:"small",style:"outlined"}},l=[...n];return Array.isArray(r)&&r.forEach((function(t){return l.push(a[t])})),l.push(...s),l}static async run(t,e){try{if(t.renderLoadingScreen&&t.renderLoadingScreen(),await t.preloadVariants(su),t.setBreadcrumbs([{title:"Список",url:t.getModelURL()}]),t.ui[su])return;t.$destroyUI(),t.ui[su]=new da(this.tweakUIOptions(ou.prepareOptions(t))),t.emit(`after:render:${su}`,e,t.ui[su])}catch(i){t.emit(`exception:render:${su}`,e,i),t.report(i),t.showErrorMessage(i)}finally{t.removeLoadingScreen&&t.removeLoadingScreen()}}static prepareOptions(t){const e={interface:t.getOptions(`${su}.interface`,{combined:!0,factory:t.getInterface()}),fields:void 0,showSelect:void 0,getItemId:void 0,idField:void 0,preload:{},filterUI:t.getOptions(`${su}.filterUI`),pager:{size:50,page:0},sorter:{id:-1},filter:void 0,ui:void 0};let i=[...t.getOptions(`${su}.actions`,[])];i=this.tweakActionsList(t,i);const r={options:{targetEl:t.getContainerInnerElement(),endless:!1,actions:i}};return Object.keys(e).forEach((function(i){let n=t.getOptions(`${su}.${i}`,e[i]);void 0!==n&&(r.options[i]=n)})),r}}var au={create:class extends tu{},details:class extends eu{},update:class extends ru{},delete:class{static async run(t,e){try{if(t.ui[nu])return;if(t.$destroyUI(),t.ui[nu]=new ma({name:"CRUDDelete",target:t.getContainerInnerElement(),options:{loaderActive:!0,loaderStyle:"container",loaderTitle:"not-node:crud_delete_action_waiting",container:{id:`crud-delete-action-${e[0]}`}}}),t.setBreadcrumbs([{title:"Удаление",url:t.getModelActionURL(e[0],nu)}]),confirm("Удалить запись?")){const i=t.getOptions(`${nu}.actionName`,"delete");return void(await t.onActionSubmit(i,{_id:e[0]})&&t.goList())}t.goList()}catch(e){t.report(e),t.showErrorMessage(e)}}},list:ou};const lu=[],cu=["title","label","id","name"],uu="loading_screen";var du=new WeakMap,hu=new WeakMap,gu=new WeakMap;class fu extends Co{static get LABELS(){return Object.freeze({plural:`${this.MODULE_NAME}:${this.MODEL_NAME}_label_plural`,single:`${this.MODULE_NAME}:${this.MODEL_NAME}_label_single`})}static getMenu(t={}){return[{section:this.MODULE_NAME,title:this.LABELS.plural,url:`/${ur.lowerFirstLetter(this.MODULE_NAME)}/${ur.lowerFirstLetter(this.MODEL_NAME)}`,...t}]}constructor(t,e,{actions:i,router:r,preloader:n}={actions:void 0,router:void 0,preloader:void 0}){return super(t,`CRUD.${e}`),Si(this,du,{...au}),Si(this,hu,Kc),Si(this,gu,Jc),Fi(this,"TITLE_FIELDS_PRIORITY",cu),Fi(this,"TOP_CLASS",["box"]),Fi(this,"MAIN_CLASS",["box"]),Fi(this,"BOTTOM_CLASS",["box"]),Fi(this,"WS_CHECK_INTERVAL",200),i&&Li(du,this,{...Ei(du,this),...i}),r&&Li(hu,this,r),n&&Li(gu,this,n),this.ui={},this.els={},this.setOptions("names",{module:"",plural:"plural",single:"single"}),this.setOptions("containerSelector",this.app?.getOptions("crud.containerSelector")),this.buildFrame(),this}setValidators(t){const e=this.getModuleName().split("-"),i=`ns${("not"===e[0]?e.splice(1):e).map(ur.capitalizeFirstLetter).join("")}Common`,r=this.app?.getService(i);this.setWorking("validators",r.augmentValidators(t))}getValidators(){return this.getWorking("validators")}start(){var t=this;let e=[];this.getModuleName()&&this.getOptions("names.module")&&e.push({title:this.getOptions("names.module"),url:!1}),e.push({title:this.getOptions("names.plural"),url:this.getModelURL()}),lu.splice(0,lu.length,...e),ec.setHead(lu).render({root:"",target:this.els.top,navigate:function(e){return t.app?.getWorking("router").navigate(e)}}),this.route(this.getOptions("params"))}startWhenWSClientReady(){var t=this;this.app?.getWSClient()?this.app?.getWSClient().isConnected()?this.start():this.app.getWSClient().once("connected",this.startWhenWSClientReady.bind(this)):setTimeout((function(){return t.startWhenWSClientReady()}),this.WS_CHECK_INTERVAL)}setBreadcrumbs(t){ec.setTail(t).update()}backToList(){this.navigate(this.linkBackToList())}linkBackToList(){return this.getModelURL()}afterAction(t="list"){let e=this.app?.getOptions("crud.navigateBackAfter",[]);e&&Array.isArray(e)&&e.indexOf(t)>-1?window.history.back():this.backToList()}buildFrame(){var t=this;let e=document.querySelector(this.app?.getOptions("crud.containerSelector","body"));for(;e.firstChild;)e.removeChild(e.firstChild);this.els.top=document.createElement("div"),this.els.top.id="crud-top",this.getFrameClasses().TOP_CLASS.forEach((function(e){return t.els.top.classList.add(e)})),e.appendChild(this.els.top),this.els.main=document.createElement("div"),this.els.main.id="crud-main",this.getFrameClasses().MAIN_CLASS.forEach((function(e){return t.els.main.classList.add(e)})),e.appendChild(this.els.main),this.els.bottom=document.createElement("div"),this.els.bottom.id="crud-bottom",this.getFrameClasses().BOTTOM_CLASS.forEach((function(e){return t.els.bottom.classList.add(e)})),e.appendChild(this.els.bottom)}getFrameClasses(){return{TOP_CLASS:this.TOP_CLASS,MAIN_CLASS:this.MAIN_CLASS,BOTTOM_CLASS:this.BOTTOM_CLASS}}getContainerTopElement(){return this.els.top}getContainerInnerElement(){return this.els.main}getContainerBottomElement(){return this.els.bottom}async preloadVariants(t="list"){await Ei(gu,this).preload(this,t)}getTitleFromLib(t,e){const i=this.getCurrentAction();return this.debug&&this.debug("notCRUD.getTitleFromLib is obsolete, use notCRUD.getPreloadedVariantTitle(actionName, propName, id)"),this.getPreloadedVariantTitle(i,t,e)}getPreloadedVariants(t,e){return this.getOptions(`variants.${t}.${e}`,[])}getPreloadedVariantTitle(t,e,i){const r=this.getPreloadedVariants(t,e).find((function(t){return t.id===i}));return r?r.title:i}getItemTitle(t){const e=this.TITLE_FIELDS_PRIORITY.find((function(e){return ur.objHas(t,e)}));return e?t[e]:""}createDefault(){return this.getModel({}).toDefault()}route(t=[]){try{return Ei(hu,this).route(this,t)}catch(t){this.report(t),this.showErrorMessage(t)}}actionHandlerExists(t){return!!Object.keys(Ei(du,this)).includes(t)||"function"==typeof this["run"+ur.capitalizeFirstLetter(t)]}runAction(t,e){if(Object.keys(Ei(du,this)).includes(t))return Ei(du,this)[t].run(this,e);if("function"==typeof this["run"+ur.capitalizeFirstLetter(t)])return this["run"+ur.capitalizeFirstLetter(t)](e);throw new Error(`No such action: ${t} in contoller ${this.getWorking("name")}`)}goCreate(t=0){this.goAfterDelay(this.getModelActionURL("","create"),t)}goDetails(t,e=0){this.goAfterDelay(this.getModelActionURL(t,""),e)}goUpdate(t,e=0){this.goAfterDelay(this.getModelActionURL(t,"update"),e)}goDelete(t,e=0){this.goAfterDelay(this.getModelActionURL(t,"delete"),e)}goList(t=0){this.goAfterDelay(this.getModelURL(),t)}goAfterDelay(t,e=0){var i=this;this.navigateWithDelay(t,e,(function(){return i.$destroyUI()}))}goBack(t=0){this.goList(t)}async onActionSubmit(t,e){let i=!0;const r=this.ui[t];if(!r)throw new Error("Action UI doesnt exist");try{r.setLoading();let n=await this.getModel(e)[`$${t}`]();i=r.processResult(n)}catch(t){i=r.processResult(t)}finally{return r.resetLoading(),i}}$destroyUI(){for(let t in this.ui)this.destroyUIByName(t)}destroyUIByName(t){Object.hasOwn(this.ui,t)&&(this.ui[t].$destroy&&this.ui[t].$destroy(),this.ui[t].destroy&&this.ui[t].destroy(),delete this.ui[t])}showErrorMessage(t){this.error&&this.error(t),this.app&&this.app.emit("error",{title:"Произошла ошибка",message:t.message?t.message:Mi.ERROR_DEFAULT}),Yc.error(this,"Произошла ошибка",t.message?t.message:Mi.ERROR_DEFAULT)}showSuccessMessage(t,e){this.app&&this.app.emit("success",{title:t,message:e}),Yc.success(this,t,e)}setUI(t,e,i=!0){i&&this.$destroyUI(),this.ui[t]=e}getUI(t){return this.ui[t]}getActionUI(){return this.ui[this.getCurrentAction()]}renderLoadingScreen(){this.setUI(uu,this.createLoaderUI())}removeLoadingScreen(){this.destroyUIByName(uu)}createLoaderUI(){return Ne(Cr,{target:this.getContainerInnerElement(),props:{loading:!0,title:""}})}}Fi(fu,"ERROR_DEFAULT",Mi.ERROR_DEFAULT);class pu{static extractActionName(t){return t.length>0?t[0]:this.DEFAULT_ROUTE}static route(t,e){try{const i=this.extractActionName(e);return t.setCurrentAction(i),t.runAction(i,e)}catch(e){t.report(e),t.showErrorMessage(e)}}}Fi(pu,"DEFAULT_ROUTE","list");const vu=fu;var mu=Object.freeze({__proto__:null,COMPONENTS:go,FIELDS:fo,UIForm:wl,VARIANTS:po,createCRUDActionUIView:function({ACTION:t,TITLE:e,UIConstructor:i,dataProvider:r,goBack:n}){return class{static async run(s,o){try{if(s.setBreadcrumbs([{title:`Просмотр "${e}"`}]),await s.preloadVariants(t),s.ui[t])return;s.$destroyUI();let a={};r&&(a=ur.isFunc(r)?ur.isAsync(r)?await r(o):r(o):{...r});const l=s.getOptions(`${t}.transformer`,qc);s.ui[t]=new i({target:s.getContainerInnerElement(),props:{params:o,...l(a)}}),s.emit(`after:render:${t}`),n&&ur.isFunc(n)&&s.ui[t].on("reject",(function(){return n()}))}catch(t){s.report(t),s.showErrorMessage(t)}}}},ncCRUD:vu,notAPI:oo,notApp:Io,notBase:to,notBreadcrumbs:ec,notCRUD:fu,notCRUDRouter:Kc,notCRUDRouterPlain:pu,notCRUDRouterSwitch:class{static get routesVariants(){return{}}static isRouteVariantValid(t){return""!==t&&ur.objHas(this.routesVariants,t)}static async determineRoute(t,e=[]){return""}static async route(t,e){try{const i=await this.determineRoute(t,e);if(!this.isRouteVariantValid(i))throw new Error(`No such action: ${i} in contoller ${t.getWorking("name")}`);{t.setCurrentAction(i);const r=this.routesVariants[i];ur.isAsync(r.run)?await r.run(t,e):r.run(t,e)}}catch(e){t.report(e),t.showErrorMessage(e)}}},notCommon:ur,notController:Co,notForm:Tl,notFormHelpers:Va,notFormRules:Il,notFormSet:class extends to{constructor({options:t={},formComponent:e=wl,formSetComponent:i=Wl}){super({options:{name:Bl,mode:"default",showModes:!0,...t}}),Ni(this,Gl),Si(this,zl,null),Si(this,Vl,null),Si(this,Hl,null),Si(this,ql,null),Li(Vl,this,e),Li(zl,this,i),this.setFormMode(this.getOptions("mode")),this.initUI()}initUI(){var t=this;const e=this.getFrameTargetEl();for(;e.children.length;)e.removeChild(e.firstChild);Li(ql,this,new(Ei(zl,this))({target:e,props:_i(Gl,this,Jl).call(this)})),Ei(ql,this).$on("mode",(function(e){t.setFormMode(e.detail),t.updateForm()})),this.updateForm()}setFormMode(t){this.isModeExists(t)?this.setWorking("mode",t):(this.setWorking("mode",this.getFirstMode()),this.updateFormModeInUI())}updateFormModeInUI(){Ei(ql,this)&&null!==this.getWorking("mode")&&Ei(ql,this).$set({mode:this.getWorking("mode")})}getFormMode(){return this.getWorking("mode")}updateForm(){this.destroyForm(),null!==this.getWorking("mode")&&this.renderForm()}renderForm(){var t=this;const e=this.getFormTargetEl(),i=this.getFormConfig();if(!(e instanceof HTMLElement&&i))throw new Error("error while form rendering");const r=function(e){t.setFormMode(e),t.updateForm()};if(i.form){for(;e.children.length;)e.removeChild(e.firstChild);Li(Hl,this,new i.form({options:{target:e,changeMode:r}}))}else i.props&&Li(Hl,this,new(Ei(Vl,this))({target:e,...i.props,changeMode:r}))}getFormConfig(){var t=this;return this.getOptions("forms").find((function(e){return e.mode===t.getFormMode()}))}destroyForm(){const t=this.getFormTargetEl();if(t)for(;t.firstChild;)t.removeChild(t.lastChild);Ei(Hl,this)&&Ei(Hl,this).$destroy&&Ei(Hl,this).$destroy(),Li(Hl,this,null)}destroyFrame(){Ei(ql,this)&&Ei(ql,this).$destroy&&Ei(ql,this).$destroy(),Li(ql,this,null)}isModeExists(t){return this.getOptions("forms",[]).some((function(e){return e.mode===t}))}getFirstMode(){const t=this.getOptions("forms",[]);return t.length>0?t[0].mode:null}destroy(){Li(zl,this,null),Li(Vl,this,null),this.destroyForm(),this.destroyFrame(),this.setData(null),this.setOptions(null),this.setWorking(null)}getFrameTargetEl(){const t=this.getOptions("target",".form-set");if(t instanceof HTMLElement)return t;if("string"==typeof t)return document.querySelector(t);throw new Error("form set target is not HTMLElement or string")}getFormTargetEl(){const t=this.getOptions("name",Bl);return document.querySelector(`#${t}-form-set-container`)}},notFormUtils:ba,notInterface:$o,notPath:nr,notRecord:wo,notRouter:ro,notServiceModelSearch:class{constructor(t,e){this.modelName=e,this.app=t}destroy(){delete this.app}getSearchRouteName(){return"listAndCount"}getDataLoadRouteName(){return"get"}transformSearchResult(t){var e=this;return t.list=t.list.map((function(t){return{_id:t._id,id:t[`${e.modelName}ID`],title:t.name||t.title||t.label||t.username}})),t}transformSelectedResult(t){return{_id:t._id,[`${this.modelName}ID`]:t.id,title:t.title}}async searchByTerm(t){try{if(t.value.length>2){const e=this.app.getModel(this.modelName);e.setSearch(t.value);const i=await e[`$${this.getSearchRouteName()}`]();return"ok"===i.status?this.transformSearchResult(i.result):{list:[],count:0,page:0,pages:0,skip:0}}return{list:[],count:0,page:0,pages:0,skip:0}}catch{return{list:[],count:0,page:0,pages:0,skip:0}}}openSelector(){var t=this;return new Promise((function(e,i){try{const r=Ne(js,{target:document.body,props:{}});r.$on("termChange",(async function({detail:e}){const i=await t.searchByTerm(e);r.$set({results:i})})),r.$on("next",(function(){console.log("next selector results")})),r.$on("prev",(function(){console.log("prev selector results")})),r.$on("reject",(function(){Me(r),i()})),r.$on("resolve",(function({detail:i}){Me(r),e(t.transformSelectedResult(i))}))}catch(e){t.app.error(e),i(e)}}))}async loadData(t){try{if(t&&t.length>10){const e=this.app.getModel(this.modelName,{_id:t}),i=await e[`$${this.getDataLoadRouteName()}`]();return"ok"===i.status?i.result:null}return null}catch(t){return this.app.error(t),null}}},notSideMenu:Ic,notStores:co,notTable:da,notTopMenu:Hc});const bu={LOCALE:Hi,say:gr,notLocale:hr},yu=Mi,{notCommon:Ou,COMPONENTS:$u,FIELDS:wu,VARIANTS:ku,notFormUtils:Iu}=mu;return Object.keys(Ks).forEach((function(t){Object.keys(Ks[t]).forEach((function(e){ba.addComponent(e,Ks[t][e])}))})),t.COMPONENTS=$u,t.Elements=Ks,t.FIELDS=wu,t.Frame=mu,t.LOCALE=Hi,t.Locale=bu,t.UICommon=yu,t.VARIANTS=ku,t.notCommon=Ou,t.notFormUtils=Iu,t.notLocale=hr,t.say=gr,t}({});
