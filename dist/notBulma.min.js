var notBulma=function(t,e){"use strict";"undefined"!=typeof window&&(window.__svelte||={v:new Set}).v.add("5");const i=Symbol();var r=Array.isArray,n=Array.from,s=Object.defineProperty,o=Object.getOwnPropertyDescriptor,a=Object.getOwnPropertyDescriptors,l=Object.prototype,c=Array.prototype,u=Object.getPrototypeOf;function d(t){return"function"==typeof t}const h=()=>{};function g(t){return t()}function f(t){for(var e=0;e<t.length;e++)t[e]()}const p=32,v=128,m=256,b=512,y=1024,$=2048,O=4096,w=8192,k=32768,I=1<<19,_=Symbol("$state"),A=Symbol("");function S(t){return t===this.v}function C(t,e){return t!=t?e==e:t!==e||null!==t&&"object"==typeof t||"function"==typeof t}function L(t){return!C(t,this.v)}function E(t){return{f:0,v:t,reactions:null,equals:S,version:0}}function T(t){return N(E(t))}function x(t,e=!1){const i=E(t);return e||(i.equals=L),null!==Nt&&null!==Nt.l&&(Nt.l.s??=[]).push(i),i}function F(t,e=!1){return N(x(t,e))}function N(t){return null!==It&&2&It.f&&(null===Ct?Ct=[t]:Ct.push(t)),t}function M(t,e){return R(t,Gt((()=>Kt(t)))),e}function R(t,e){return null!==It&&Rt()&&18&It.f&&(null===Ct||!Ct.includes(t))&&function(){throw new Error("state_unsafe_mutation")}(),U(t,e)}function U(t,e){return t.equals(e)||(t.v=e,t.version=Mt(),D(t,y),Rt()&&null!==At&&At.f&b&&!(At.f&p)&&(null!==Lt&&Lt.includes(t)?(Yt(At,y),qt(At)):null===Tt?function(t){Tt=t}([t]):Tt.push(t))),e}function D(t,e){var i=t.reactions;if(null!==i)for(var r=Rt(),n=i.length,s=0;s<n;s++){var o=i[s],a=o.f;a&y||(r||o!==At)&&(Yt(o,e),640&a&&(2&a?D(o,$):qt(o)))}}function P(t){var e=1026;null===At?e|=v:At.f|=I;const i={children:null,ctx:Nt,deps:null,equals:S,f:e,fn:t,reactions:null,v:null,version:0,parent:At};if(null!==It&&2&It.f){var r=It;(r.children??=[]).push(i)}return i}function j(t){const e=P(t);return e.equals=L,e}function W(t){var e=t.children;if(null!==e){t.children=null;for(var i=0;i<e.length;i+=1){var r=e[i];2&r.f?V(r):st(r)}}}function B(t){var e,i=At;St(t.parent);try{W(t),e=Dt(t)}finally{St(i)}return e}function z(t){var e=B(t);Yt(t,(Ft||t.f&v)&&null!==t.deps?$:b),t.equals(e)||(t.v=e,t.version=Mt())}function V(t){W(t),jt(t,0),Yt(t,w),t.v=t.children=t.deps=t.ctx=t.reactions=null}function q(t){null===At&&null===It&&function(){throw new Error("effect_orphan")}(),null!==It&&It.f&v&&function(){throw new Error("effect_in_unowned_derived")}(),yt&&function(){throw new Error("effect_in_teardown")}()}function H(t,e,i,r=!0){var n=!!(64&t),s=At,o={ctx:Nt,deps:null,deriveds:null,nodes_start:null,nodes_end:null,f:t|y,first:null,fn:e,last:null,next:null,parent:n?null:s,prev:null,teardown:null,transitions:null,version:0};if(i){var a=bt;try{$t(!0),Wt(o),o.f|=16384}catch(t){throw st(o),t}finally{$t(a)}}else null!==e&&qt(o);if(!(i&&null===o.deps&&null===o.first&&null===o.nodes_start&&null===o.teardown&&!(o.f&I))&&!n&&r&&(null!==s&&function(t,e){var i=e.last;null===i?e.last=e.first=t:(i.next=t,t.prev=i,e.last=t)}(o,s),null!==It&&2&It.f)){var l=It;(l.children??=[]).push(o)}return o}function K(t){const e=H(8,null,!1);return Yt(e,b),e.teardown=t,e}function G(t){if(q(),!(null!==At&&!!(At.f&p)&&null!==Nt&&!Nt.m))return Y(t);var e=Nt;(e.e??=[]).push({fn:t,effect:At,reaction:It})}function J(t){return q(),X(t)}function Y(t){return H(4,t,!1)}function Q(t,e){var i=Nt,r={effect:null,ran:!1};i.l.r1.push(r),r.effect=X((()=>{t(),r.ran||(r.ran=!0,R(i.l.r2,!0),Gt(e))}))}function X(t){return H(8,t,!0)}function Z(t){return tt(t)}function tt(t,e=0){return H(24|e,t,!0)}function et(t,e=!0){return H(40,t,!0,e)}function it(t){var e=t.teardown;if(null!==e){const t=yt,i=It;Ot(!0),_t(null);try{e.call(null)}finally{Ot(t),_t(i)}}}function rt(t){var e=t.deriveds;if(null!==e){t.deriveds=null;for(var i=0;i<e.length;i+=1)V(e[i])}}function nt(t,e=!1){var i=t.first;for(t.first=t.last=null;null!==i;){var r=i.next;st(i,e),i=r}}function st(t,e=!0){var i=!1;if((e||262144&t.f)&&null!==t.nodes_start){for(var r=t.nodes_start,n=t.nodes_end;null!==r;){var s=r===n?null:ce(r);r.remove(),r=s}i=!0}rt(t),nt(t,e&&!i),jt(t,0),Yt(t,w);var o=t.transitions;if(null!==o)for(const t of o)t.stop();it(t);var a=t.parent;null!==a&&null!==a.first&&ot(t),t.next=t.prev=t.teardown=t.ctx=t.deps=t.parent=t.fn=t.nodes_start=t.nodes_end=null}function ot(t){var e=t.parent,i=t.prev,r=t.next;null!==i&&(i.next=r),null!==r&&(r.prev=i),null!==e&&(e.first===t&&(e.first=r),e.last===t&&(e.last=i))}function at(t,e){var i=[];ct(t,i,!0),lt(i,(()=>{st(t),e&&e()}))}function lt(t,e){var i=t.length;if(i>0){var r=()=>--i||e();for(var n of t)n.out(r)}else e()}function ct(t,e,i){if(!(t.f&O)){if(t.f^=O,null!==t.transitions)for(const r of t.transitions)(r.is_global||i)&&e.push(r);for(var r=t.first;null!==r;){var n=r.next;ct(r,e,!!(!!(r.f&k)||!!(r.f&p))&&i),r=n}}}function ut(t){dt(t,!0)}function dt(t,e){if(t.f&O){t.f^=O,Ut(t)&&Wt(t);for(var i=t.first;null!==i;){var r=i.next;dt(i,!!(!!(i.f&k)||!!(i.f&p))&&e),i=r}if(null!==t.transitions)for(const i of t.transitions)(i.is_global||e)&&i.in()}}let ht=!1,gt=[];function ft(){ht=!1;const t=gt.slice();gt=[],f(t)}function pt(t){ht||(ht=!0,queueMicrotask(ft)),gt.push(t)}function vt(t){throw new Error("lifecycle_outside_component")}let mt=!1,bt=!1,yt=!1;function $t(t){bt=t}function Ot(t){yt=t}let wt=[],kt=0,It=null;function _t(t){It=t}let At=null;function St(t){At=t}let Ct=null;let Lt=null,Et=0,Tt=null;let xt=0,Ft=!1,Nt=null;function Mt(){return++xt}function Rt(){return null!==Nt&&null===Nt.l}function Ut(t){var e=t.f;if(e&y)return!0;if(e&$){var i=t.deps,r=!!(e&v);if(null!==i){var n;if(e&m){for(n=0;n<i.length;n++)(i[n].reactions??=[]).push(t);t.f^=m}for(n=0;n<i.length;n++){var s=i[n];if(Ut(s)&&z(s),!r||null===At||Ft||s?.reactions?.includes(t)||(s.reactions??=[]).push(t),s.version>t.version)return!0}}r||Yt(t,b)}return!1}function Dt(t){var e=Lt,i=Et,r=Tt,n=It,s=Ft,o=Ct,a=Nt,l=t.f;Lt=null,Et=0,Tt=null,It=96&l?null:t,Ft=!bt&&!!(l&v),Ct=null,Nt=t.ctx;try{var c=(0,t.fn)(),u=t.deps;if(null!==Lt){var d;if(jt(t,Et),null!==u&&Et>0)for(u.length=Et+Lt.length,d=0;d<Lt.length;d++)u[Et+d]=Lt[d];else t.deps=u=Lt;if(!Ft)for(d=Et;d<u.length;d++)(u[d].reactions??=[]).push(t)}else null!==u&&Et<u.length&&(jt(t,Et),u.length=Et);return c}finally{Lt=e,Et=i,Tt=r,It=n,Ft=s,Ct=o,Nt=a}}function Pt(t,e){let i=e.reactions;if(null!==i){var r=i.indexOf(t);if(-1!==r){var n=i.length-1;0===n?i=e.reactions=null:(i[r]=i[n],i.pop())}}null===i&&2&e.f&&(null===Lt||!Lt.includes(e))&&(Yt(e,$),384&e.f||(e.f^=m),jt(e,0))}function jt(t,e){var i=t.deps;if(null!==i)for(var r=e;r<i.length;r++)Pt(t,i[r])}function Wt(t){var e=t.f;if(!(e&w)){Yt(t,b);var i=At;At=t;try{rt(t),16&e?function(t){for(var e=t.first;null!==e;){var i=e.next;e.f&p||st(e),e=i}}(t):nt(t),it(t);var r=Dt(t);t.teardown="function"==typeof r?r:null,t.version=xt}catch(t){!function(t){throw t}(t)}finally{At=i}}}function Bt(){kt>1e3&&(kt=0,function(){throw new Error("effect_update_depth_exceeded")}()),kt++}function zt(t){var e=t.length;if(0!==e)for(var i=0;i<e;i++){var r=t[i];12288&r.f||!Ut(r)||(Wt(r),null===r.deps&&null===r.first&&null===r.nodes_start&&(null===r.teardown?ot(r):r.fn=null))}}function Vt(){if(mt=!1,kt>1001)return;const t=wt;wt=[],function(t){var e=t.length;if(0!==e){Bt();var i=bt;bt=!0;try{for(var r=0;r<e;r++){var n=t[r];n.f&b||(n.f^=b);var s=[];Ht(n,s),zt(s)}}finally{bt=i}}}(t),mt||(kt=0)}function qt(t){mt||(mt=!0,queueMicrotask(Vt));for(var e=t;null!==e.parent;){var i=(e=e.parent).f;if(96&i){if(!(i&b))return;e.f^=b}}wt.push(e)}function Ht(t,e){var i=t.first,r=[];t:for(;null!==i;){var n=i.f,s=!!(n&p);if(!(s&&!!(n&b)||n&O))if(8&n){s?i.f^=b:Ut(i)&&Wt(i);var o=i.first;if(null!==o){i=o;continue}}else 4&n&&r.push(i);var a=i.next;if(null===a){let e=i.parent;for(;null!==e;){if(t===e)break t;var l=e.next;if(null!==l){i=l;continue t}e=e.parent}}i=a}for(var c=0;c<r.length;c++)o=r[c],e.push(o),Ht(o,e)}function Kt(t){var e=t.f,i=!!(2&e);if(i&&e&w){var r=B(t);return V(t),r}if(null!==It){null!==Ct&&Ct.includes(t)&&function(){throw new Error("state_unsafe_local_read")}();var n=It.deps;null===Lt&&null!==n&&n[Et]===t?Et++:null===Lt?Lt=[t]:Lt.push(t),null!==Tt&&null!==At&&At.f&b&&!(At.f&p)&&Tt.includes(t)&&(Yt(At,y),qt(At))}else if(i&&null===t.deps){var s=t,o=s.parent;null===o||o.deriveds?.includes(s)||(o.deriveds??=[]).push(s)}return i&&Ut(s=t)&&z(s),t.v}function Gt(t){const e=It;try{return It=null,t()}finally{It=e}}const Jt=-3585;function Yt(t,e){t.f=t.f&Jt|e}function Qt(t,e=1){var i=+Kt(t);return R(t,i+e),i}function Xt(t,e=!1,i){Nt={p:Nt,c:null,e:null,m:!1,s:t,x:null,l:null},e||(Nt.l={s:null,u:null,r1:[],r2:E(!1)})}function Zt(t){const e=Nt;if(null!==e){void 0!==t&&(e.x=t);const o=e.e;if(null!==o){var i=At,r=It;e.e=null;try{for(var n=0;n<o.length;n++){var s=o[n];St(s.effect),_t(s.reaction),Y(s.fn)}}finally{St(i),_t(r)}}Nt=e.p,e.m=!0}return t||{}}function te(t){if("object"==typeof t&&t&&!(t instanceof EventTarget))if(_ in t)ee(t);else if(!Array.isArray(t))for(let e in t){const i=t[e];"object"==typeof i&&i&&_ in i&&ee(i)}}function ee(t,e=new Set){if(!("object"!=typeof t||null===t||t instanceof EventTarget||e.has(t))){e.add(t),t instanceof Date&&t.getTime();for(let i in t)try{ee(t[i],e)}catch(t){}const i=u(t);if(i!==Object.prototype&&i!==Array.prototype&&i!==Map.prototype&&i!==Set.prototype&&i!==Date.prototype){const e=a(i);for(let i in e){const r=e[i].get;if(r)try{r.call(t)}catch(t){}}}}}function ie(t,e=null,n){if("object"!=typeof t||null===t||_ in t)return t;const s=u(t);if(s!==l&&s!==c)return t;var a,d=new Map,h=r(t),g=E(0);return h&&d.set("length",E(t.length)),new Proxy(t,{defineProperty(t,e,i){"value"in i&&!1!==i.configurable&&!1!==i.enumerable&&!1!==i.writable||function(){throw new Error("state_descriptors_fixed")}();var r=d.get(e);return void 0===r?(r=E(i.value),d.set(e,r)):R(r,ie(i.value,a)),!0},deleteProperty(t,e){var r=d.get(e);if(void 0===r)e in t&&d.set(e,E(i));else{if(h&&"string"==typeof e){var n=d.get("length"),s=Number(e);Number.isInteger(s)&&s<n.v&&R(n,s)}R(r,i),re(g)}return!0},get(e,r,n){if(r===_)return t;var s=d.get(r),l=r in e;if(void 0!==s||l&&!o(e,r)?.writable||(s=E(ie(l?e[r]:i,a)),d.set(r,s)),void 0!==s){var c=Kt(s);return c===i?void 0:c}return Reflect.get(e,r,n)},getOwnPropertyDescriptor(t,e){var r=Reflect.getOwnPropertyDescriptor(t,e);if(r&&"value"in r){var n=d.get(e);n&&(r.value=Kt(n))}else if(void 0===r){var s=d.get(e),o=s?.v;if(void 0!==s&&o!==i)return{enumerable:!0,configurable:!0,value:o,writable:!0}}return r},has(t,e){if(e===_)return!0;var r=d.get(e),n=void 0!==r&&r.v!==i||Reflect.has(t,e);if((void 0!==r||null!==At&&(!n||o(t,e)?.writable))&&(void 0===r&&(r=E(n?ie(t[e],a):i),d.set(e,r)),Kt(r)===i))return!1;return n},set(t,e,r,n){var s=d.get(e),l=e in t;if(h&&"length"===e)for(var c=r;c<s.v;c+=1){var u=d.get(c+"");void 0!==u?R(u,i):c in t&&(u=E(i),d.set(c+"",u))}void 0===s?l&&!o(t,e)?.writable||(R(s=E(void 0),ie(r,a)),d.set(e,s)):(l=s.v!==i,R(s,ie(r,a)));var f=Reflect.getOwnPropertyDescriptor(t,e);if(f?.set&&f.set.call(n,r),!l){if(h&&"string"==typeof e){var p=d.get("length"),v=Number(e);Number.isInteger(v)&&v>=p.v&&R(p,v+1)}re(g)}return!0},ownKeys(t){Kt(g);var e=Reflect.ownKeys(t).filter((t=>{var e=d.get(t);return void 0===e||e.v!==i}));for(var[r,n]of d)n.v===i||r in t||e.push(r);return e},setPrototypeOf(){!function(){throw new Error("state_prototype_fixed")}()}})}function re(t,e=1){R(t,t.v+e)}var ne,se,oe;function ae(t=""){return document.createTextNode(t)}function le(t){return se.call(t)}function ce(t){return oe.call(t)}function ue(t){return le(t)}function de(t,e){var i=le(t);return i instanceof Comment&&""===i.data?ce(i):i}function he(t,e=1,i=!1){let r=t;for(;e--;)r=ce(r);return r}let ge=!1;const fe=new Set,pe=new Set;function ve(t,e,i,r){function n(t){if(r.capture||ye.call(e,t),!t.cancelBubble){var n=It,s=At;_t(null),St(null);try{return i.call(this,t)}finally{_t(n),St(s)}}}return t.startsWith("pointer")||t.startsWith("touch")||"wheel"===t?pt((()=>{e.addEventListener(t,n,r)})):e.addEventListener(t,n,r),n}function me(t,e,i,r,n){var s={capture:r,passive:n},o=ve(t,e,i,s);e!==document.body&&e!==window&&e!==document||K((()=>{e.removeEventListener(t,o,s)}))}function be(t){for(var e=0;e<t.length;e++)fe.add(t[e]);for(var i of pe)i(t)}function ye(t){var e=this,i=e.ownerDocument,n=t.type,o=t.composedPath?.()||[],a=o[0]||t.target,l=0,c=t.__root;if(c){var u=o.indexOf(c);if(-1!==u&&(e===document||e===window))return void(t.__root=e);var d=o.indexOf(e);if(-1===d)return;u<=d&&(l=u)}if((a=o[l]||t.target)!==e){s(t,"currentTarget",{configurable:!0,get:()=>a||i});var h=It,g=At;_t(null),St(null);try{for(var f,p=[];null!==a;){var v=a.assignedSlot||a.parentNode||a.host||null;try{var m=a["__"+n];if(void 0!==m&&!a.disabled)if(r(m)){var[b,...y]=m;b.apply(a,[t,...y])}else m.call(a,t)}catch(t){f?p.push(t):f=t}if(t.cancelBubble||v===e||null===v)break;a=v}if(f){for(let t of p)queueMicrotask((()=>{throw t}));throw f}}finally{t.__root=e,delete t.currentTarget,_t(h),St(g)}}}function $e(t){var e=document.createElement("template");return e.innerHTML=t,e.content}function Oe(t,e){var i=At;null===i.nodes_start&&(i.nodes_start=t,i.nodes_end=e)}function we(t,e){var i,r=!!(1&e),n=!!(2&e),s=!t.startsWith("<!>");return()=>{void 0===i&&(i=$e(s?t:"<!>"+t),r||(i=le(i)));var e=n?document.importNode(i,!0):i.cloneNode(!0);r?Oe(le(e),e.lastChild):Oe(e,e);return e}}function ke(t=""){var e=ae(t+"");return Oe(e,e),e}function Ie(){var t=document.createDocumentFragment(),e=document.createComment(""),i=ae();return t.append(e,i),Oe(e,i),t}function _e(t,e){null!==t&&t.before(e)}function Ae(t){return t.endsWith("capture")&&"gotpointercapture"!==t&&"lostpointercapture"!==t}const Se=["beforeinput","click","change","dblclick","contextmenu","focusin","focusout","input","keydown","keyup","mousedown","mousemove","mouseout","mouseover","mouseup","pointerdown","pointermove","pointerout","pointerover","pointerup","touchend","touchmove","touchstart"];function Ce(t){return Se.includes(t)}const Le={formnovalidate:"formNoValidate",ismap:"isMap",nomodule:"noModule",playsinline:"playsInline",readonly:"readOnly"};function Ee(t){return t=t.toLowerCase(),Le[t]??t}const Te=["touchstart","touchmove"];function xe(t){return Te.includes(t)}let Fe=!0;function Ne(t){Fe=t}function Me(t,e){var i=null==e?"":"object"==typeof e?e+"":e;i!==(t.__t??=t.nodeValue)&&(t.__t=i,t.nodeValue=null==i?"":i+"")}function Re(t,e){return function(t,{target:e,anchor:i,props:r={},events:s,context:a,intro:l=!0}){!function(){if(void 0===ne){ne=window;var t=Element.prototype,e=Node.prototype;se=o(e,"firstChild").get,oe=o(e,"nextSibling").get,t.__click=void 0,t.__className="",t.__attributes=null,t.__e=void 0,Text.prototype.__t=void 0}}();var c=new Set,u=t=>{for(var i=0;i<t.length;i++){var r=t[i];if(!c.has(r)){c.add(r);var n=xe(r);e.addEventListener(r,ye,{passive:n});var s=Ue.get(r);void 0===s?(document.addEventListener(r,ye,{passive:n}),Ue.set(r,1)):Ue.set(r,s+1)}}};u(n(fe)),pe.add(u);var d=void 0,h=function(t){const e=H(64,t,!0);return()=>{st(e)}}((()=>{var n=i??e.appendChild(ae());return et((()=>{a&&(Xt({}),Nt.c=a);s&&(r.$$events=s),Fe=l,d=t(n,r)||{},Fe=!0,a&&Zt()})),()=>{for(var t of c){e.removeEventListener(t,ye);var r=Ue.get(t);0==--r?(document.removeEventListener(t,ye),Ue.delete(t)):Ue.set(t,r)}pe.delete(u),De.delete(d),n!==i&&n.parentNode?.removeChild(n)}}));return De.set(d,h),d}(t,e)}const Ue=new Map;let De=new WeakMap;function Pe(t){const e=De.get(t);e&&e()}function je(t,e,i,r=null,n=!1){var s=t,o=null,a=null,l=null;tt((()=>{l!==(l=!!e())&&(l?(o?ut(o):o=et((()=>i(s))),a&&at(a,(()=>{a=null}))):(a?ut(a):r&&(a=et((()=>r(s)))),o&&at(o,(()=>{o=null}))))}),n?k:0)}let We=null;function Be(t){We=t}function ze(t,e){return e}function Ve(t,e,i,s,o,a=null){var l=t,c={flags:e,items:new Map,first:null};!(4&e)||(l=t.appendChild(ae()));var u=null,d=!1;tt((()=>{var t=i(),h=r(t)?t:null==t?[]:n(t),g=h.length;d&&0===g||(d=0===g,function(t,e,i,r,s,o){var a,l,c,u,d,h,g=!!(8&s),f=!!(3&s),p=t.length,v=e.items,m=e.first,b=m,y=null,$=[],w=[];if(g)for(h=0;h<p;h+=1)u=o(c=t[h],h),void 0!==(d=v.get(u))&&(d.a?.measure(),(l??=new Set).add(d));for(h=0;h<p;h+=1)if(u=o(c=t[h],h),void 0!==(d=v.get(u))){if(f&&qe(d,c,h,s),d.e.f&O&&(ut(d.e),g&&(d.a?.unfix(),(l??=new Set).delete(d))),d!==b){if(void 0!==a&&a.has(d)){if($.length<w.length){var k,I=w[0];y=I.prev;var _=$[0],A=$[$.length-1];for(k=0;k<$.length;k+=1)Ke($[k],I,i);for(k=0;k<w.length;k+=1)a.delete(w[k]);Ge(e,_.prev,A.next),Ge(e,y,_),Ge(e,A,I),b=I,y=A,h-=1,$=[],w=[]}else a.delete(d),Ke(d,b,i),Ge(e,d.prev,d.next),Ge(e,d,null===y?e.first:y.next),Ge(e,y,d),y=d;continue}for($=[],w=[];null!==b&&b.k!==u;)b.e.f&O||(a??=new Set).add(b),w.push(b),b=b.next;if(null===b)continue;d=b}$.push(d),y=d,b=d.next}else{y=He(b?b.e.nodes_start:i,e,y,null===y?e.first:y.next,c,u,h,r,s),v.set(u,y),$=[],w=[],b=y.next}if(null!==b||void 0!==a){for(var S=void 0===a?[]:n(a);null!==b;)b.e.f&O||S.push(b),b=b.next;var C=S.length;if(C>0){var L=4&s&&0===p?i:null;if(g){for(h=0;h<C;h+=1)S[h].a?.measure();for(h=0;h<C;h+=1)S[h].a?.fix()}!function(t,e,i,r){for(var n=[],s=e.length,o=0;o<s;o++)ct(e[o].e,n,!0);var a=s>0&&0===n.length&&null!==i;if(a){var l=i.parentNode;l.textContent="",l.append(i),r.clear(),Ge(t,e[0].prev,e[s-1].next)}lt(n,(()=>{for(var i=0;i<s;i++){var n=e[i];a||(r.delete(n.k),Ge(t,n.prev,n.next)),st(n.e,!a)}}))}(e,S,L,v)}}g&&pt((()=>{if(void 0!==l)for(d of l)d.a?.apply()}));At.first=e.first&&e.first.e,At.last=y&&y.e}(h,c,l,o,e,s),null!==a&&(0===g?u?ut(u):u=et((()=>a(l))):null!==u&&at(u,(()=>{u=null}))),i())}))}function qe(t,e,i,r){1&r&&U(t.v,e),2&r?U(t.i,i):t.i=i}function He(t,e,i,r,n,s,o,a,l){var c=We;try{var u=!!(1&l)?!(16&l)?x(n):E(n):n,d=2&l?E(o):o,h={i:d,v:u,k:s,a:null,e:null,prev:i,next:r};return We=h,h.e=et((()=>a(t,u,d)),ge),h.e.prev=i&&i.e,h.e.next=r&&r.e,null===i?e.first=h:(i.next=h,i.e.next=h.e),null!==r&&(r.prev=h,r.e.prev=h.e),h}finally{We=c}}function Ke(t,e,i){for(var r=t.next?t.next.e.nodes_start:i,n=e?e.e.nodes_start:i,s=t.e.nodes_start;s!==r;){var o=ce(s);n.before(s),s=o}}function Ge(t,e,i){null===e?t.first=i:(e.next=i,e.e.next=i&&i.e),null!==i&&(i.prev=e,i.e.prev=e&&e.e)}function Je(t,e,i,r,n){var s,o=t,a="";tt((()=>{a!==(a=e()??"")&&(void 0!==s&&(st(s),s=void 0),""!==a&&(s=et((()=>{var t=$e(a+"");Oe(le(t),t.lastChild),o.before(t)}))))}))}function Ye(t,e,i,r,n){var s=e.$$slots?.[i],o=!1;!0===s&&(s=e["default"===i?"children":i],o=!0),void 0===s?null!==n&&n(t):s(t,o?()=>r:r)}function Qe(t,e,...i){var r,n=t,s=h;tt((()=>{s!==(s=e())&&(r&&(st(r),r=null),r=et((()=>s(n,...i))))}),k)}function Xe(t,e,i){var r,n,s=t;tt((()=>{r!==(r=e())&&(n&&(at(n),n=null),r&&(n=et((()=>i(s,r)))))}),k)}function Ze(t,e){if(e){const e=document.body;t.autofocus=!0,pt((()=>{document.activeElement===e&&t.focus()}))}}let ti=!1;function ei(t,e,i,r){var n=t.__attributes??={};n[e]!==(n[e]=i)&&("loading"===e&&(t[A]=i),null==i?t.removeAttribute(e):"string"!=typeof i&&ri(t).includes(e)?t[e]=i:t.setAttribute(e,i))}var ii=new Map;function ri(t){var e,i=ii.get(t.nodeName);if(i)return i;ii.set(t.nodeName,i=[]);for(var r=u(t),n=Element.prototype;n!==r;){for(var s in e=a(r))e[s].set&&i.push(s);r=u(r)}return i}function ni(t,e){var i=t.__className,r=function(t){return null==t?"":t}(e);i!==r&&(null==e?t.removeAttribute("class"):t.className=r,t.__className=r)}function si(t,e,i){if(i){if(t.classList.contains(e))return;t.classList.add(e)}else{if(!t.classList.contains(e))return;t.classList.remove(e)}}const oi=requestAnimationFrame,ai={tick:t=>oi(t),now:()=>performance.now(),tasks:new Set};function li(t){ai.tasks.forEach((e=>{e.c(t)||(ai.tasks.delete(e),e.f())})),0!==ai.tasks.size&&ai.tick(li)}function ci(t,e){t.dispatchEvent(new CustomEvent(e))}function ui(t){if("float"===t)return"cssFloat";if("offset"===t)return"cssOffset";if(t.startsWith("--"))return t;const e=t.split("-");return 1===e.length?e[0]:e[0]+e.slice(1).map((t=>t[0].toUpperCase()+t.slice(1))).join("")}function di(t){const e={},i=t.split(";");for(const t of i){const[i,r]=t.split(":");if(!i||void 0===r)break;e[ui(i.trim())]=r.trim()}return e}const hi=t=>t;function gi(t,e,i,r){var n,s,o,a=!!(4&t),l=e.inert;function c(){var t=It,s=At;_t(null),St(null);try{return n??=i()(e,r?.()??{},{direction:"both"})}finally{_t(t),St(s)}}var u={is_global:a,in(){e.inert=l,ci(e,"introstart"),s=fi(e,c(),o,1,(()=>{ci(e,"introend"),s?.abort(),s=n=void 0}))},out(t){e.inert=!0,ci(e,"outrostart"),o=fi(e,c(),s,0,(()=>{ci(e,"outroend"),t?.()}))},stop:()=>{s?.abort(),o?.abort()}},d=At;if((d.transitions??=[]).push(u),Fe){var h=a;if(!h){for(var g=d.parent;g&&g.f&k;)for(;(g=g.parent)&&!(16&g.f););h=!g||!!(16384&g.f)}h&&Y((()=>{Gt((()=>u.in()))}))}}function fi(t,e,i,r,n){var s=1===r;if(d(e)){var o,a=!1;return pt((()=>{if(!a){var l=e({direction:s?"in":"out"});o=fi(t,l,i,r,n)}})),{abort:()=>{a=!0,o?.abort()},deactivate:()=>o.deactivate(),reset:()=>o.reset(),t:()=>o.t()}}if(i?.deactivate(),!e?.duration)return n(),{abort:h,deactivate:h,reset:h,t:()=>r};const{delay:l=0,css:c,tick:u,easing:g=hi}=e;var f=[];if(s&&void 0===i&&(u&&u(0,1),c)){var p=di(c(0,1));f.push(p,p)}var v=()=>1-r,m=t.animate(f,{duration:l});return m.onfinish=()=>{var s=i?.t()??1-r;i?.abort();var o=r-s,a=e.duration*Math.abs(o),l=[];if(a>0){if(c)for(var d=Math.ceil(a/(1e3/60)),h=0;h<=d;h+=1){var f=s+o*g(h/d),p=c(f,1-f);l.push(di(p))}v=()=>{var t=m.currentTime;return s+o*g(t/a)},u&&function(t){let e;0===ai.tasks.size&&ai.tick(li),new Promise((i=>{ai.tasks.add(e={c:t,f:i})}))}((()=>{if("running"!==m.playState)return!1;var t=v();return u(t,1-t),!0}))}(m=t.animate(l,{duration:a,fill:"forwards"})).onfinish=()=>{v=()=>r,u?.(r,1-r),n()}},{abort:()=>{m&&(m.cancel(),m.effect=null)},deactivate:()=>{n=h},reset:()=>{0===r&&u?.(1,0)},t:()=>v()}}function pi(t,e,i,r=i){t.addEventListener(e,i);const n=t.__on_r;t.__on_r=n?()=>{n(),r()}:r,ti||(ti=!0,document.addEventListener("reset",(t=>{Promise.resolve().then((()=>{if(!t.defaultPrevented)for(const e of t.target.elements)e.__on_r?.()}))}),{capture:!0}))}function vi(t,e,i=e){var r=Rt();pi(t,"input",(()=>{var n=bi(t)?yi(t.value):t.value;i(n),r&&n!==(n=e())&&(t.value=n??"")})),X((()=>{var i=e();bi(t)&&i===yi(t.value)||("date"!==t.type||i||t.value)&&i!==t.value&&(t.value=i??"")}))}function mi(t,e,i=e){pi(t,"change",(()=>{var e=t.checked;i(e)})),null==e()&&i(!1),X((()=>{var i=e();t.checked=Boolean(i)}))}function bi(t){var e=t.type;return"number"===e||"range"===e}function yi(t){return""===t?null:+t}function $i(t,e){return t===e||t?.[_]===e}function Oi(t={},e,i,r){return Y((()=>{var r,n;return X((()=>{r=n,n=[],Gt((()=>{t!==i(...n)&&(e(t,...n),r&&$i(i(...r),t)&&e(null,...r))}))})),()=>{pt((()=>{n&&$i(i(...n),t)&&e(null,...n)}))}})),t}function wi(t){return function(...e){return e[0].preventDefault(),t?.apply(this,e)}}function ki(t,e){if(t.l.s)for(const e of t.l.s)Kt(e);e()}function Ii(t,e){var i=t.$$events?.[e.type],n=r(i)?i.slice():null==i?[]:[i];for(var s of n)s.call(this,e)}const _i={get(t,e){if(!t.exclude.includes(e))return Kt(t.version),e in t.special?t.special[e]():t.props[e]},set:(t,e,i)=>(e in t.special||(t.special[e]=Ei({get[e](){return t.props[e]}},e,4)),t.special[e](i),Qt(t.version),!0),getOwnPropertyDescriptor(t,e){if(!t.exclude.includes(e))return e in t.props?{enumerable:!0,configurable:!0,value:t.props[e]}:void 0},deleteProperty:(t,e)=>(t.exclude.includes(e)||(t.exclude.push(e),Qt(t.version)),!0),has:(t,e)=>!t.exclude.includes(e)&&e in t.props,ownKeys:t=>Reflect.ownKeys(t.props).filter((e=>!t.exclude.includes(e)))};function Ai(t,e){return new Proxy({props:t,exclude:e,special:{},version:E(0)},_i)}const Si={get(t,e){let i=t.props.length;for(;i--;){let r=t.props[i];if(d(r)&&(r=r()),"object"==typeof r&&null!==r&&e in r)return r[e]}},getOwnPropertyDescriptor(t,e){let i=t.props.length;for(;i--;){let r=t.props[i];if(d(r)&&(r=r()),"object"==typeof r&&null!==r&&e in r){const t=o(r,e);return t&&!t.configurable&&(t.configurable=!0),t}}},has(t,e){for(let i of t.props)if(d(i)&&(i=i()),null!=i&&e in i)return!0;return!1},ownKeys(t){const e=[];for(let i of t.props){d(i)&&(i=i());for(const t in i)e.includes(t)||e.push(t)}return e}};function Ci(...t){return new Proxy({props:t},Si)}function Li(t){for(var e=At,i=At;null!==e&&!(96&e.f);)e=e.parent;try{return St(e),t()}finally{St(i)}}function Ei(t,e,i,r){var n,s=!!(1&i),a=!!(2&i),l=!!(8&i),c=!!(16&i),u=t[e],d=o(t,e)?.set,h=r,g=!0,f=!1,p=()=>(f=!0,g&&(g=!1,h=c?Gt(r):r),h);if(void 0===u&&void 0!==r&&(d&&a&&function(){throw new Error("props_invalid_value")}(),u=p(),d&&d(u)),a)n=()=>{var i=t[e];return void 0===i?p():(g=!0,f=!1,i)};else{var v=Li((()=>(s?P:j)((()=>t[e]))));v.f|=65536,n=()=>{var t=Kt(v);return void 0!==t&&(h=void 0),void 0===t?h:t}}if(!(4&i))return n;if(d){var m=t.$$legacy;return function(t,e){return arguments.length>0?(a&&e&&!m||d(e?n():t),t):n()}}var b=!1,y=x(u),$=Li((()=>P((()=>{var t=n(),e=Kt(y);return b||void 0===t&&It.f&w?(b=!1,e):y.v=t}))));return s||($.equals=L),function(t,e){var i=Kt($);if(arguments.length>0){const i=e?Kt($):a&&l?ie(t):t;return $.equals(i)||(b=!0,R(y,i),f&&void 0!==h&&(h=i),Kt($)),t}return i}}function Ti(t,e,i){const r=i[e]??={store:null,source:x(void 0),unsubscribe:h};if(r.store!==t)if(r.unsubscribe(),r.store=t??null,null==t)r.source.v=void 0,r.unsubscribe=h;else{var n=!0;r.unsubscribe=function(t,e,i){if(null==t)return e(void 0),h;const r=t.subscribe(e,i);return r.unsubscribe?()=>r.unsubscribe():r}(t,(t=>{n?r.source.v=t:R(r.source,t)})),n=!1}return Kt(r.source)}function xi(){const t={};return K((()=>{for(var e in t){t[e].unsubscribe()}})),t}function Fi(t){J((()=>{t();var e=At;e.f&y&&(console.warn("legacy_recursive_reactive_block"),Yt(e,$))}))}function Ni(){const t=Nt;return null===t&&vt(),e=>i=>{const n=t.s.$$events?.[e];if(n){const e=r(n)?n.slice():[n];for(const r of e)r.call(t.x,i);return!i.defaultPrevented}return!0}}function Mi(t){null===Nt&&vt(),null!==Nt.l?Di(Nt).m.push(t):G((()=>{const e=Gt(t);if("function"==typeof e)return e}))}function Ri(){const t=Nt;return null===t&&vt(),(e,i,n)=>{const s=t.s.$$events?.[e];if(s){const o=r(s)?s.slice():[s],a=function(t,e,{bubbles:i=!1,cancelable:r=!1}={}){return new CustomEvent(t,{detail:e,bubbles:i,cancelable:r})}(e,i,n);for(const e of o)e.call(t.x,a);return!a.defaultPrevented}return!0}}function Ui(t){null===Nt&&vt(),null===Nt.l&&function(){throw new Error("lifecycle_legacy_only")}(),Di(Nt).a.push(t)}function Di(t){var e=t.l;return e.u??={a:[],b:[],m:[]}}var Pi=(t,e)=>e("click"),ji=we('<div role="button"><!></div>');function Wi(t,e){Xt(e,!0);const i=Ni(),r=Ri();let n=Ei(e,"id",3,""),s=Ei(e,"classes",3,"");var o=ji(),a=P((()=>i("click")));o.__click=function(...t){Kt(a)?.apply(this,t)},o.__keyup=[Pi,r],Qe(ue(o),(()=>e.children??h)),Z((()=>{ei(o,"id",n()),ni(o,`block ${s()??""}`)})),_e(t,o),Zt()}be(["click","keyup"]);var Bi=(t,e)=>e("click"),zi=we('<div role="button"><!></div>');function Vi(t,e){Xt(e,!0);const i=Ni(),r=Ri();let n=Ei(e,"id",3,""),s=Ei(e,"classes",3,"");var o=zi(),a=P((()=>i("click")));o.__click=function(...t){Kt(a)?.apply(this,t)},o.__keyup=[Bi,r],Qe(ue(o),(()=>e.children??h)),Z((()=>{ei(o,"id",n()),ni(o,`box ${s()??""} `)})),_e(t,o),Zt()}be(["click","keyup"]);var qi=(t,e)=>e("click"),Hi=we('<div role="button" tabindex="0"><!></div>');function Ki(t,e){Xt(e,!0);const i=Ni(),r=Ri();let n=Ei(e,"id",3,""),s=Ei(e,"classes",3,"");var o=Hi(),a=P((()=>i("click")));o.__click=function(...t){Kt(a)?.apply(this,t)},o.__keyup=[qi,r],Qe(ue(o),(()=>e.children??h)),Z((()=>{ei(o,"id",n()),ni(o,`content ${s()??""}`)})),_e(t,o),Zt()}be(["click","keyup"]);var Gi=Object.freeze({__proto__:null,UIBlock:Wi,UIBlockInnerVertical:function(t,e){Xt(e,!0);let i,r=Ei(e,"id",15,""),n=Ei(e,"classes",3,"");Fi((()=>{i=`block-inner-vertical ${n()}`})),Wi(t,{get id(){return r()},set id(t){r(t)},get classes(){return i},set classes(t){i=t},children:(t,i)=>{var r=Ie();Qe(de(r),(()=>e.children??h)),_e(t,r)},$$slots:{default:!0}}),Zt()},UIBox:Vi,UIContent:Ki});const Ji=[];function Yi(t,e=h){let i=null;const r=new Set;function n(e){if(C(t,e)&&(t=e,i)){const e=!Ji.length;for(const e of r)e[1](),Ji.push(e,t);if(e){for(let t=0;t<Ji.length;t+=2)Ji[t][0](Ji[t+1]);Ji.length=0}}}function s(e){n(e(t))}return{set:n,update:s,subscribe:function(o,a=h){const l=[o,a];return r.add(l),1===r.size&&(i=e(n,s)||h),o(t),()=>{r.delete(l),0===r.size&&i&&(i(),i=null)}}}}function Qi(t={}){const e={get:function(t,e){return Object.hasOwn(t,e)?Reflect.get(...arguments):e}};return new Proxy(t,e)}const Xi=function(){const{subscribe:t,set:e,update:i}=Yi(Qi());return{subscribe:t,update:i,set:function(t){e(Qi(t))},reset:function(){return e(Qi())}}}();function Zi(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var tr,er={exports:{}};
/*!
	 * EventEmitter v5.2.9 - git.io/ee
	 * Unlicense - http://unlicense.org/
	 * Oliver Caldwell - https://oli.me.uk/
	 * @preserve
	 */var ir,rr,nr,sr,or,ar=(tr||(tr=1,ir=er,function(t){function e(){}var i=e.prototype,r=t.EventEmitter;function n(t,e){for(var i=t.length;i--;)if(t[i].listener===e)return i;return-1}function s(t){return function(){return this[t].apply(this,arguments)}}function o(t){return"function"==typeof t||t instanceof RegExp||!(!t||"object"!=typeof t)&&o(t.listener)}i.getListeners=function(t){var e,i,r=this._getEvents();if(t instanceof RegExp)for(i in e={},r)r.hasOwnProperty(i)&&t.test(i)&&(e[i]=r[i]);else e=r[t]||(r[t]=[]);return e},i.flattenListeners=function(t){var e,i=[];for(e=0;e<t.length;e+=1)i.push(t[e].listener);return i},i.getListenersAsObject=function(t){var e,i=this.getListeners(t);return i instanceof Array&&((e={})[t]=i),e||i},i.addListener=function(t,e){if(!o(e))throw new TypeError("listener must be a function");var i,r=this.getListenersAsObject(t),s="object"==typeof e;for(i in r)r.hasOwnProperty(i)&&-1===n(r[i],e)&&r[i].push(s?e:{listener:e,once:!1});return this},i.on=s("addListener"),i.addOnceListener=function(t,e){return this.addListener(t,{listener:e,once:!0})},i.once=s("addOnceListener"),i.defineEvent=function(t){return this.getListeners(t),this},i.defineEvents=function(t){for(var e=0;e<t.length;e+=1)this.defineEvent(t[e]);return this},i.removeListener=function(t,e){var i,r,s=this.getListenersAsObject(t);for(r in s)s.hasOwnProperty(r)&&-1!==(i=n(s[r],e))&&s[r].splice(i,1);return this},i.off=s("removeListener"),i.addListeners=function(t,e){return this.manipulateListeners(!1,t,e)},i.removeListeners=function(t,e){return this.manipulateListeners(!0,t,e)},i.manipulateListeners=function(t,e,i){var r,n,s=t?this.removeListener:this.addListener,o=t?this.removeListeners:this.addListeners;if("object"!=typeof e||e instanceof RegExp)for(r=i.length;r--;)s.call(this,e,i[r]);else for(r in e)e.hasOwnProperty(r)&&(n=e[r])&&("function"==typeof n?s.call(this,r,n):o.call(this,r,n));return this},i.removeEvent=function(t){var e,i=typeof t,r=this._getEvents();if("string"===i)delete r[t];else if(t instanceof RegExp)for(e in r)r.hasOwnProperty(e)&&t.test(e)&&delete r[e];else delete this._events;return this},i.removeAllListeners=s("removeEvent"),i.emitEvent=function(t,e){var i,r,n,s,o=this.getListenersAsObject(t);for(s in o)if(o.hasOwnProperty(s))for(i=o[s].slice(0),n=0;n<i.length;n++)!0===(r=i[n]).once&&this.removeListener(t,r.listener),r.listener.apply(this,e||[])===this._getOnceReturnValue()&&this.removeListener(t,r.listener);return this},i.trigger=s("emitEvent"),i.emit=function(t){var e=Array.prototype.slice.call(arguments,1);return this.emitEvent(t,e)},i.setOnceReturnValue=function(t){return this._onceReturnValue=t,this},i._getOnceReturnValue=function(){return!this.hasOwnProperty("_onceReturnValue")||this._onceReturnValue},i._getEvents=function(){return this._events||(this._events={})},e.noConflict=function(){return t.EventEmitter=r,e},ir.exports?ir.exports=e:t.EventEmitter=e}("undefined"!=typeof window?window:er.exports||{})),er.exports),lr=Zi(ar);function cr(t,e,i){if("function"==typeof t?t===e:t.has(e))return arguments.length<3?e:i;throw new TypeError("Private element is not present on this object")}function ur(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function dr(t,e){return t.get(cr(t,e))}function hr(t,e,i){ur(t,e),e.set(t,i)}function gr(t,e,i){return t.set(cr(t,e),i),i}function fr(t,e){ur(t,e),e.add(t)}function pr(t,e,i){return(e=function(t){var e=function(t,e){if("object"!=typeof t||!t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var r=i.call(t,e||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:e+""}(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var vr,mr=(or||(or=1,sr=function(){if(nr)return rr;nr=1;const t=".",e=":",i="::",r="()";return rr=class{static get SUB_PATH_START(){return"{"}static get SUB_PATH_END(){return"}"}static get PATH_SPLIT(){return t}static get PATH_START_OBJECT(){return e}static get PATH_START_HELPERS(){return i}static get FUNCTION_MARKER(){return r}static get MAX_DEEP(){return 10}static findNextSubPath(t){let e="",i=!1;for(let r=0;r<t.length;r++)if("{"===t[r])i=!0,e="";else{if("}"===t[r]&&i)return e;e+=t[r]}return i?e:null}static replaceSubPath(t,e,i){let r="{"+e+"}",n=0;for(;t.indexOf(r)>-1&&n<10;)t=t.replace(r,i),n++;return t}static parseSubs(t,e,r){let n,s=this.findNextSubPath(t),o=0;for(;s&&(n=this.getValueByPath(s.indexOf(i)>-1?r:e,s,e,r),t=this.replaceSubPath(t,s,n),o++,!(o>10));)s=this.findNextSubPath(t);return t}static get(t,r,n=void 0){switch(t){case e:return r;case i:return n}return t=this.parseSubs(t,r,n),this.getValueByPath(t.indexOf(i)>-1?n:r,t,r,n)}static set(t,e,r,n=void 0){3===arguments.length&&(n=r,r=void 0);let s,o=this.findNextSubPath(t),a=0;for(;o&&(s=this.getValueByPath(o.indexOf(i)>-1?r:e,o,e,r),t=this.replaceSubPath(t,o,s),!(a>10));)o=this.findNextSubPath(t),a++;this.setValueByPath(e,t,n),e.isRecord&&this.normilizePath(t).length>1&&e.__isActive&&e.trigger("change",e,t,n)}static unset(t,e,i){this.set(t,e,i,null)}static parsePathStep(t,n,s){let o=null;if(0===t.indexOf(i)&&s){if(o=t.replace(i,""),o.indexOf(r)!==o.length-2)return s[o];if(o=o.replace(r,""),Object.prototype.hasOwnProperty.call(s,o))return s[o](n,void 0)}else if(0===t.indexOf(e)&&n){if(o=t.replace(e,""),o.indexOf(r)!==o.length-2)return n[o];if(o=o.replace(r,""),Object.prototype.hasOwnProperty.call(n,o))return n[o](n,void 0)}return t}static parsePath(e,i,r){Array.isArray(e)||(e=e.split(t));for(var n=0;n<e.length;n++)e[n]=this.parsePathStep(e[n],i,r);return e}static normilizePath(i){if(Array.isArray(i))return i;for(;i.indexOf(e)>-1;)i=i.replace(e,"");return i.split(t)}static ifFullSubPath(t,e){if(t.length<e.length)return!1;for(let i=0;i<e.length;i++)if(e[i]!==t[i])return!1;return!0}static getValueByPath(t,e,i,n){let s=(e=this.normilizePath(e)).shift(),o=s.indexOf(r)>-1;if(o&&(s=s.replace(r,"")),("object"==typeof t||"function"==typeof t)&&null!=t&&void 0!==t[s]&&null!==t[s]){let r=o?t[s]({item:i,helpers:n}):t[s];return e.length>0?this.getValueByPath(r,e,i,n):r}}static setValueByPath(t,e,i){let r=(e=this.normilizePath(e)).shift();e.length>0?(Object.prototype.hasOwnProperty.call(t,r)||(t[r]={}),this.setValueByPath(t[r],e,i)):t[r]=i}static join(){return Array.prototype.slice.call(arguments).join(t)}},rr}()),sr),br=Zi(mr);let yr=function(t){return function(t){return!!t&&"object"==typeof t}(t)&&!function(t){var e=Object.prototype.toString.call(t);return"[object RegExp]"===e||"[object Date]"===e||function(t){return t.$$typeof===$r}(t)}(t)};var $r="function"==typeof Symbol&&Symbol.for?Symbol.for("react.element"):60103;function Or(t,e){return(!e||!1!==e.clone)&&yr(t)?kr((i=t,Array.isArray(i)?[]:{}),t,e):t;var i}function wr(t,e,i){return t.concat(e).map((function(t){return Or(t,i)}))}function kr(t,e,i){const r=Array.isArray(e);if(r===Array.isArray(t)){if(r){return((i||{arrayMerge:wr}).arrayMerge||wr)(t,e,i)}return function(t,e,i){const r={};return yr(t)&&Object.keys(t).forEach((function(e){r[e]=Or(t[e],i)})),Object.keys(e).forEach((function(n){yr(e[n])&&t[n]?r[n]=kr(t[n],e[n],i):r[n]=Or(e[n],i)})),r}(t,e,i)}return Or(e,i)}kr.all=function(t,e){if(!Array.isArray(t))throw new Error("first argument should be an array");return t.reduce((function(t,i){return kr(t,i,e)}),{})};let Ir=class t{static isError(t){return t instanceof Error||Object.hasOwn(t,"status")&&"error"===t.status}static mute(){t.ENV_TYPE="production"}static pad(t){return t<10?"0"+t:t}static getTodayDate(){let t=new Date;return new Date(t.getFullYear(),t.getMonth(),t.getDate()).getTime()}static objHas(t,e){return Object.hasOwn(t,e)}static copyObj(t){return JSON.parse(JSON.stringify(t))}static partCopyObj(t,e){let i=Object.keys(t).reduce((function(i,r){return e.includes(r)&&(i[r]=t[r]),i}),{});return JSON.parse(JSON.stringify(i))}static compareTwoArrays(t,e){return t.length===e.length&&t.every((function(t,i){return t===e[i]}))}static isFunc(t){return"function"==typeof t}static isAsync(t){return"AsyncFunction"===t.constructor.name}static async executeObjectFunction(e,i,r){if(e){const n=br.get(":"+i,e);if(t.isFunc(n))return t.isAsync(n)?await n(...r):n(...r)}}static mapBind(t,e,i){i.forEach((function(i){"function"==typeof t[i]&&(e[i]=t[i].bind(t))}))}static isClass(t){return/^\s*class/.test(t.toString())}static detectType(e){return"function"!=typeof e?typeof e:t.isClass(e)?"class":"function"}static isArray(t){return"object"==typeof t&&t instanceof Array}static localIsoDate(e){return(e=e||new Date).getFullYear()+"-"+t.pad(e.getMonth()+1)+"-"+t.pad(e.getDate())+"T"+t.pad(e.getHours())+":"+t.pad(e.getMinutes())+":"+t.pad(e.getSeconds())}static getToday(){let e=new Date;return e.getFullYear()+"-"+t.pad(e.getMonth()+1)+"-"+t.pad(e.getDate())}static backlogAdd(e,i="log"){!0===t.get("backlog")&&t.backlog.push({msg:e,type:i})}static dumpBacklog(){for(;t.backlog.length;){let e=t.backlog.shift();window[t.LOG][e.type](...e.msg)}}static logMsg(){let e=t.localIsoDate();window[t.LOG].log(`[${e}]: `,...arguments),t.backlogAdd([`[${e}]: `,...arguments],"log")}static log(){t.logMsg(...arguments)}static createLogger(e){return{log:t.genLogMsg(e),error:t.genLogError(e),debug:t.genLogDebug(e),report:t.report}}static genLogMsg(e){return function(){let i=t.localIsoDate();window[t.LOG].log(`[${i}]: ${e}::`,...arguments),t.backlogAdd([`[${i}]: ${e}::`,...arguments],"log")}}static isDev(){return t.ENV_TYPE===t.DEV_ENV}static debug(){return t.isDev()?t.logMsg(...arguments):t.NOOP}static genLogDebug(e){return t.isDev()?t.genLogMsg(e):t.NOOP}static error(){t.logError(...arguments)}static logError(){let e=t.localIsoDate();window[t.LOG].error(`[${e}]: `,...arguments),t.backlogAdd([`[${e}]: `,...arguments],"error")}static genLogError(e){return function(){let i=t.localIsoDate();window[t.LOG].error(`[${i}]: ${e}::`,...arguments),t.backlogAdd([`[${i}]: ${e}::`,...arguments],"error")}}static report(e){if(t.getApp()){let i=t.getApp().getService("nsErrorReporter");i&&i.report(e).catch(t.error)}else t.get("production")||t.error(...arguments)}static trace(){t.get("production")||t.trace(...arguments)}static trimBackslash(t){return 0===t.indexOf("/")&&(t=t.substring(1)),"/"===t[t.length-1]&&(t=t.substring(0,t.length-1)),t}static buildURL({prefix:e,module:i,model:r,id:n,action:s}={prefix:"",module:"",model:"",id:"",action:""}){let o=["/"];return e&&o.push(encodeURIComponent(t.trimBackslash(e))),i&&o.push(encodeURIComponent(t.trimBackslash(i))),r&&o.push(encodeURIComponent(t.trimBackslash(r))),n&&o.push(encodeURIComponent(t.trimBackslash(n))),s&&o.push(encodeURIComponent(t.trimBackslash(s))),o=o.filter((function(t){return""!==t})),o.join("/").replace(/\/\//g,"/")}static capitalizeFirstLetter(t){return t.charAt(0).toUpperCase()+t.slice(1)}static lowerFirstLetter(t){return t.charAt(0).toLowerCase()+t.slice(1)}static strLengthCap(t,e=50,i="..."){return"string"==typeof t&&t.length>e?t.substr(0,e)+i:t}static escapeHtml(t){return t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")}static startApp(t){document.addEventListener("DOMContentLoaded",t)}static getApp(){return t.get("app")}static extendAppConfig(e,i){return t.deepMerge(e,i)}static absorbModule(){let e,i,r={};1==arguments.length?(r={...arguments[0]},Object.hasOwnProperty.call(arguments[0],"defaultConf")&&(e=arguments[0].defaultConf,delete r.defaultConf),Object.hasOwnProperty.call(arguments[0],"mod")&&(i=arguments[0].mod,delete r.mod)):(t.log("WARNING: absorbModule format obsoleted, use object {defaultConf, mod, services, uis, wsc, etc}"),e=arguments[0],i=arguments[1],arguments.length>2&&(r.services=arguments[2]),arguments.length>3&&(r.uis=arguments[3]),arguments.length>4&&(r.wcs=arguments[4]));for(let n in i)"manifest"!==n?"function"==typeof t.get(`absorb.${n}`)?(Object.hasOwn(r,n)||(r[n]={},t.log(`WARNING: no accamulator object provided for '${n}' collection`)),t.get(`absorb.${n}`)(r[n],i[n])):0===n.indexOf("nc")?(Object.hasOwn(e,"controllers")||(e.controllers={}),e.controllers[n]=i[n]):(Object.hasOwn(window,"notEnv")||(window.notEnv={}),window.notEnv[n]=i[n]):e=t.extendAppConfig(e,i.manifest);return e}static defineIfNotExists(t,e,i){Object.hasOwn(t,e)||(t[e]=i)}static register(e,i){t.registry[e]=i}static get(e){return Object.hasOwn(t.registry,e)?t.registry[e]:null}static moveItem(t,e,i){const r=function(e){return e<t.length&&e>-1};r(i)&&r(e)&&t.splice(i,0,t.splice(e,1)[0])}static stripProxy(e){if(null!=e&&e.isProxy){e=Array.isArray(e)?Array.from(e):Object.assign({},e);for(let i in e)Object.hasOwn(e,i)&&(e[i]=t.stripProxy(e[i]))}return e}static pipe(t,e){let i;for(let r of e)i=r(i||t);return i}static getAPI(e){return t.getManager()?.getAPI(e)??null}static setManager(e){t.MANAGER=e}static getManager(){return t.MANAGER}static getJSON(t){return fetch(t).then((function(t){return t.json()}))}static wait(t){return new Promise((function(e){setTimeout(e,1e3*t)}))}static registerWidgetEvents(e){t.getApp()&&Object.keys(e).forEach((function(i){t.getApp().on(i,e[i])}))}static navigate(e){t.getApp()&&t.getApp().getWorking("router").navigate(e)}static select(e,i,r){return e&&"object"==typeof e&&t.objHas(e,i)&&void 0!==e[i]&&null!==e[i]?e[i]:r}};function _r(t,e,i){Object.hasOwn(t,e)||(t[e]={connection:{},router:{routes:{}},messenger:{}});let r=t[e];if(Object.hasOwn(i,"router")&&Object.hasOwn(i.router,"routes"))for(let t in i.router.routes)Object.hasOwn(r.router.routes,t)||(r.router.routes[t]={}),Object.assign(r.router.routes[t],{...i.router.routes[t]});Object.hasOwn(i,"messenger")&&Object.assign(r.messenger,{...i.messenger}),Object.hasOwn(i,"connection")&&Object.assign(r.connection,{...i.connection});for(let t of["name","getToken","logger","identity","credentials"])Object.hasOwn(i,t)&&(r[t]=i[t])}vr=Ir,pr(Ir,"MANAGER",null),pr(Ir,"LOG","console"),pr(Ir,"deepMerge",kr),pr(Ir,"TZ_OFFSET",(new Date).getTimezoneOffset()/60*-1),pr(Ir,"DEV_ENV","production"),pr(Ir,"ENV_TYPE",window.NOT_ENV_TYPE??vr.DEV_ENV),pr(Ir,"NOOP",(function(){})),pr(Ir,"backlog",[]),pr(Ir,"registry",{}),Ir.register("absorb.wsc",(function(t,e){if(t)for(let i in e)_r(t,i,e[i])})),Ir.register("absorb.services",(function(t,e){if(t)for(let i in e)Object.hasOwn(t,i)&&Ir.logError(`services property duplication ${i}`),t[i]=e[i]})),Ir.register("absorb.uis",(function(t,e){if(t)for(let i in e)Object.hasOwn(t,i)&&Ir.logError(`uis property duplication ${i}`),t[i]=e[i]})),Ir.register("absorb.uis",(function(t,e){if(t)for(let i in e)Object.hasOwn(t,i)&&Ir.logError(`fields property duplication ${i}`),t[i]=e[i]}));var Ar=new class extends lr{constructor(){super(),this.dict={},this.helpers={};let t=this.restoreFromStorage();t&&this.set(t)}format(t,e){return br.parseSubs(t,e,this.helpers)}say(t,e=!1){try{if(Ir.objHas(this.dict,t)){let i=this.dict[t],r="";return r=e?this.format(i,e):i,r}throw new Error(`Unknown locale phrase: ${t}`)}catch(e){return Ir.debug(e),t}}set(t){Xi.set(t),this.saveToStorage(t),this.dict=Object.assign({},{...t}),this.emit("change")}saveToStorage(t){if(window.localStorage)try{return window.localStorage.setItem("dictionary",JSON.stringify(t))}catch(t){return Ir.debug(t),!1}return!1}restoreFromStorage(){if(window.localStorage)try{let t=window.localStorage.getItem("dictionary");if(t){return JSON.parse(t)}return!1}catch(t){return Ir.debug(t),!1}return!1}vocabulary(){return Xi}};const Sr=Ar.say.bind(Ar);var Cr=we("<span> </span>");function Lr(t,e){Xt(e,!0);const i=xi();let r=T(!1),n=Ei(e,"id",3,"tagId"),s=Ei(e,"title",15,"tag"),o=Ei(e,"color",3,"info"),a=Ei(e,"size",3,"normal"),l=Ei(e,"padding",3,"normal"),c=Ei(e,"bold",3,!1),u=Ei(e,"right",3,!1),d=Ei(e,"left",3,!1),h=Ei(e,"top",3,!1),g=Ei(e,"bottom",3,!1),f=Ei(e,"classes",3,""),p=Ei(e,"events",31,(()=>ie({}))),v=Ei(e,"register",19,(()=>Ir.registerWidgetEvents.bind(Ir))),m=Ei(e,"onUpdate",3,(t=>{Object.hasOwn(t,"title")&&s(t.title)})),b=Ei(e,"action",3,(()=>!0));function y(){return`tag-${n()}:update`}Mi((()=>{Object.hasOwn(p(),y())||p(p()[y()]=m(),!0),v()(p())})),Fi((()=>{R(r,ie(u()||d()||h()||g()))}));var $=Ie();je(de($),s,(t=>{var e=Cr();e.__click=function(...t){(b()?b():void 0)?.apply(this,t)};var p=ue(e);Z((()=>{ei(e,"id",`tag-${n()??""}`),ni(e,`\n  tag\n  ${(c()?"has-text-weight-bold":"")??""}\n  ${("normal"!==l()?`is-padded-${l()}`:"")??""}\n  is-${a()??""}\n  is-${o()??""}\n  ${(Kt(r)?"is-sided":"")??""}\n  ${(u()?"is-sided-right":"")??""}\n  ${(d()?"is-sided-left":"")??""}\n  ${(h()?"is-sided-top":"")??""}\n  ${(g()?"is-sided-bottom":"")??""}\n  ${f()??""}`),Me(p,Ti(Xi,"$LOCALE",i)[s()])})),_e(t,e)})),_e(t,$),Zt()}function Er(t,e){let i=Ei(e,"LC_TRUE",3,"not-node:booleans_true"),r=Ei(e,"LC_FALSE",3,"not-node:booleans_false"),n=Ei(e,"inverted",3,!1);const s={title:r(),color:n()?"success":"danger"},o={title:i(),color:n()?"danger":"success"};let a=P((()=>e.value?o:s));Lr(t,Ci((()=>Kt(a))))}be(["click"]);var Tr=we('<span class="label"> <!></span>');function xr(t,e){Xt(e,!0);let i=Ei(e,"values",19,(()=>[])),r=Ei(e,"inverted",3,!1),n=Ei(e,"componentConstructor",3,Er),s=T(ie([]));Mi((()=>{"boolean"==typeof i()?R(s,ie([{value:i()}])):Array.isArray(i())&&(i().every((t=>"boolean"==typeof t))?R(s,ie(i().map((t=>({value:t}))))):R(s,ie([...i()])))}));var o=Ie();je(de(o),(()=>Kt(s).length),(t=>{var e=Ie();Ve(de(e),17,(()=>Kt(s)),ze,((t,e)=>{var i=Ie();const s=P(n);var o=de(i),a=P((()=>r()||Kt(e).inverted));Xe(o,(()=>Kt(s)),((t,i)=>{i(t,Ci((()=>Kt(e)),{get inverted(){return Kt(a)}}))})),_e(t,i)})),_e(t,e)})),_e(t,o),Zt()}function Fr(t,e){e(!e())}async function Nr(t,e,i,r,n,s,o){try{await navigator.clipboard.writeText(e()),i()&&(R(r,!0),Kt(n).dataset.tooltip=s(),setTimeout((()=>{R(r,!1),Kt(n).removeAttribute("data-tooltip")}),o()))}catch(t){console.error("Failed to copy: ",t)}}var Mr=we("<span><i></i></span>"),Rr=we('<span class="icon is-small is-right is-clickable is-vertical-middle"><i></i></span>'),Ur=we("<span> </span> <!> <!>",1);be(["click"]);var Dr=we("<span> </span>");function Pr(t,e){Xt(e,!0);const i=xi();let r=Ti(s(),"$state",i)(!1),n=Ei(e,"id",3,"tagId"),s=Ei(e,"state",15,"light"),o=Ei(e,"size",3,"normal"),a=Ei(e,"labels",19,(()=>({black:"black",dark:"dark",light:"light",white:"white",primary:"primary",link:"link",info:"info",success:"success",warning:"warning",danger:"danger"}))),l=Ei(e,"classes",3,"mx-1"),c=Ei(e,"padding",3,"normal"),u=Ei(e,"bold",3,!1),d=Ei(e,"right",3,!1),h=Ei(e,"left",3,!1),g=Ei(e,"top",3,!1),f=Ei(e,"bottom",3,!1),p=Ei(e,"events",31,(()=>ie({}))),v=Ei(e,"register",19,(()=>Ir.registerWidgetEvents.bind(Ir))),m=Ei(e,"onUpdate",3,(t=>{Object.hasOwn(t,"state")&&s(t.state)}));function b(){return`indicator-${n()}:update`}Mi((()=>{Object.hasOwn(p(),b())||p(p()[b()]=m(),!0),v()(p())})),Fi((()=>{r=d()||h()||g()||f()}));var y=Dr(),$=ue(y);Z((()=>{ni(y,`tag\nis-${o()??""}\n${(u()?"has-text-weight-bold":"")??""}\n${("normal"!==c()?`is-padded-${c()}`:"")??""}\n${(r?"is-sided":"")??""}\n${(d()?"is-sided-right":"")??""}\n${(h()?"is-sided-left":"")??""}\n${(g()?"is-sided-top":"")??""}\n${(f()?"is-sided-bottom":"")??""}\n  is-${s()??""} ${l()??""}\n  `),Me($,a()[s()])})),_e(t,y),Zt()}var jr=we('<div><span class="title"> </span></div>');function Wr(t,e){Xt(e,!0);const i=xi();let r=Ei(e,"loading",3,!1),n=Ei(e,"size",3,"container"),s=Ei(e,"title",3,"Waiting...");var o=Ie();je(de(o),(()=>"hidden"!==n()),(t=>{var e=jr(),o=ue(e),a=ue(o);Z((()=>{ni(e,`${("page"===n()?"pageloader":"containerloader")??""} ${(r()?"is-active":"")??""}`),Me(a,Ti(Xi,"$LOCALE",i)[s()])})),_e(t,e)})),_e(t,o),Zt()}var Br=we("<option> </option>");function zr(t,e){Xt(e,!0);const i=xi();var r=Br(),n={},s=ue(r);Z((()=>{n!==(n=e.value)&&(r.value=null==(r.__value=e.value)?"":e.value),r.selected=e.selected,Me(s,Ti(Xi,"$LOCALE",i)[e.title])})),_e(t,r),Zt()}var Vr=we("<span> </span>"),qr=we("<p><!></p>");function Hr(t,e){Xt(e,!0);const i=xi();let r=Ei(e,"errors",19,(()=>[])),n=Ei(e,"show",3,!1),s=Ei(e,"classes",3,""),o=Ei(e,"id",3,"errors-list");var a=Ie();je(de(a),(()=>Array.isArray(r())&&r().length),(t=>{var e=qr();je(ue(e),n,(t=>{var e=Ie();Ve(de(e),17,r,ze,((t,e)=>{var r=Vr(),n=ue(r);Z((()=>Me(n,Ti(Xi,"$LOCALE",i)[Kt(e)]))),_e(t,r)})),_e(t,e)}),(t=>{_e(t,ke(" "))})),Z((()=>{ni(e,`help ${s()??""}`),ei(e,"id",o())})),_e(t,e)})),_e(t,a),Zt()}let Kr=class t{static isMobile(){const t=window.matchMedia||window.msMatchMedia;if(t){let e="(pointer:coarse)";if(arguments.length){e=`only screen and (max-width: ${"boolean"==typeof arguments[0]?this.MOBILE_WIDTH_BREAK_POINT:arguments[0]}px)`}return t(e).matches}return!1}static removeBodyScroll(){document.body.classList.add(this.SCROLL_DISABLER_CLASS)}static restoreBodyScroll(){document.body.classList.remove(this.SCROLL_DISABLER_CLASS)}static formatPhone(t,e=this.FILLER){const i=[1,2,2,2,3,3,3,4,4,5,5];let r=t.replace(/\D/g,"");if(r.length>11){let t=r.length-11;for(;t>0;)t--,i.unshift(1)}let n=["","","","",""];Array.from(r).forEach((function(t,e){let r=i[e];n[r-1]=n[r-1]+t}));const s=i.reduce((function(t,e){return void 0===t[e]?t[e]=1:t[e]+=1,t}),{});for(let t in n){let i=s[parseInt(t)+1]-n[t].length;for(;i>0;)n[t]=n[t]+e,i--}return`+${n[0]} (${n[1]}) ${n[2]}-${n[3]}-${n[4]}`}static setMoneySign(t){this.MONEY_SIGN=t}static formatPrice(t){let e=Math.floor(t/100),i=t%100;return`${this.MONEY_SIGN}${e.toString()}.${i.toString()}`}static formatLocaleDatetime(t,e={date:!0,time:!0}){const i=t.toLocaleDateString(window.navigator.language),r=t.toLocaleTimeString(window.navigator.language);return e.date&&e.time?`${i} ${r}`:e.date&&!e.time?i:r}static tryFormatLocaleDateTime(e,i={date:!0,time:!0}){if("string"==typeof e||"number"==typeof e){const r=new Date(e);return t.formatLocaleDatetime(r,i)}return"object"==typeof e?t.formatLocaleDatetime(e,i):""}static formatTimestamp(t,e=0){let i=60*((new Date).getTimezoneOffset()-e)*1e3;return new Date(parseInt(t)-i).toLocaleString(window.navigator.language)}static declOfNum(t,e){let i=(t=Math.abs(t)%100)%10;return t>10&&t<20?e[2]:i>1&&i<5?e[1]:1==i?e[0]:e[2]}static humanizedTimeDiff(t){let e,i=(new Date).getTime(),r=Math.round((i-t)/1e3);if(r<60)return e=this.declOfNum(r,this.TIME.SECONDS),`${r} ${e} назад`;if(r<3600){let t=Math.floor(r/60);return e=this.declOfNum(t,this.TIME.MINUTES),`${t} ${e} назад`}{let t=Math.floor(r/3600);return e=this.declOfNum(t,this.TIME.HOURS),`${t} ${e} назад`}}};pr(Kr,"CLEAR_MACRO","__CLEAR__"),pr(Kr,"ERROR_DEFAULT","Что пошло не так."),pr(Kr,"DEFAULT_REDIRECT_TIMEOUT",3e3),pr(Kr,"CLASS_OK","is-success"),pr(Kr,"CLASS_ERR","is-danger"),pr(Kr,"SCROLL_DISABLER_CLASS","remove-scroll"),pr(Kr,"FILLER","_"),pr(Kr,"SCROLL_OPTIONS",{top:0,behavior:"smooth"}),pr(Kr,"MOBILE_WIDTH_BREAK_POINT",760),pr(Kr,"MONEY_SIGN","&#8381;"),pr(Kr,"TIME",{SECONDS:["секунду","секунды","секунд"],MINUTES:["минуту","минуты","минут"],HOURS:["час","часа","часов"]});var Gr=we('<span class="mr-2"> </span>'),Jr=we('<span class="mr-2"> </span>'),Yr=we('<span class="icon is-small is-left"><i></i></span>'),Qr=we('<i class="fas fa-check"></i>'),Xr=we('<i class="fas fa-exclamation-triangle"></i>'),Zr=we('<span class="icon is-small is-right"><!></span>'),tn=we("<div><select><!><!></select></div> <!> <!>",1),en=we("<div><!></div> <!>",1);function rn(t,e){Xt(e,!0);const i=xi(),r=()=>Ti(Xi,"$LOCALE",i);let n=Ri(),s=Ei(e,"inputStarted",15,!1),o=Ei(e,"value",15,""),a=Ei(e,"variants",19,(()=>[])),l=Ei(e,"placeholder",3,""),c=Ei(e,"emptyValueTitle",3,""),u=Ei(e,"fieldname",3,"select"),d=Ei(e,"icon",3,!1),h=Ei(e,"required",3,!0),g=Ei(e,"readonly",3,!1),f=Ei(e,"multiple",3,!1),p=Ei(e,"size",3,8),v=Ei(e,"valid",3,!0),m=Ei(e,"validated",3,!1),b=Ei(e,"errors",3,!1),y=Ei(e,"formErrors",3,!1);Ei(e,"formLevelError",3,!1);let $,O=T(ie([]));function w(t){return Array.isArray(o())&&f()?o().indexOf(t.id)>-1:!!o()&&o()==t.id}function k(t){let e={field:u(),value:t.currentTarget.value};return $===e.value||Array.isArray(e.value)&&Ir.compareTwoArrays($,e.value)||(f()?(o(Array.from(t.target.selectedOptions).map((t=>t.value))),o().indexOf(Kr.CLEAR_MACRO)>-1&&o([]),e.value=o()):e.value===Kr.CLEAR_MACRO?o(""):o(e.value),s(!0),n("change",e)),!0}function I(t){let e={field:u(),value:t.currentTarget.value};return f()?(o(Array.from(t.target.selectedOptions).map((t=>t.value))),o().indexOf(Kr.CLEAR_MACRO)>-1&&o([]),e.value=o()):e.value===Kr.CLEAR_MACRO?o(""):o(e.value),s(!0),$=e.value,n("change",e),!0}let _,A,S,C=P((()=>(d()?" has-icons-left ":"")+" has-icons-right "));Fi((()=>{_=[].concat(b()?b():[],y()?y():[])})),Fi((()=>{A=!(m()&&v())&&s()})),Fi((()=>{S=!0!==v()&&s()?Kr.CLASS_ERR:Kr.CLASS_OK}));let L=P((()=>f()?" is-multiple ":""));Fi((()=>{o(),R(O,ie(Array.isArray(a())?a().filter(w):[]))}));var E=en(),x=de(E);je(ue(x),g,(t=>{var e=Ie();je(de(e),o,(t=>{var e=Ie();Ve(de(e),17,(()=>Kt(O)),ze,((t,e)=>{var i=Gr(),n=ue(i);Z((()=>Me(n,r()[Kt(e).title]))),_e(t,i)})),_e(t,e)}),(t=>{var e=Jr(),i=ue(e);Z((()=>Me(i,r()[c()]))),_e(t,e)})),_e(t,e)}),(t=>{var e=tn(),i=de(e),r=ue(i);r.__input=I;var n=ue(r);je(n,(()=>l().length>0),(t=>{var e=Ie();je(de(e),o,(t=>{zr(t,{get value(){return Kr.CLEAR_MACRO},get title(){return l()}})}),(t=>{zr(t,{get value(){return Kr.CLEAR_MACRO},selected:"selected",get title(){return l()}})})),_e(t,e)})),Ve(he(n),17,a,ze,((t,e)=>{var i=Ie();je(de(i),f,(t=>{var i=P((()=>o()&&o().indexOf(Kt(e).id)>-1));zr(t,{get value(){return Kt(e).id},get selected(){return Kt(i)},get title(){return Kt(e).title}})}),(t=>{var i=P((()=>o()==Kt(e).id));zr(t,{get value(){return Kt(e).id},get selected(){return Kt(i)},get title(){return Kt(e).title}})})),_e(t,i)}));var s=he(i,2);je(s,d,(t=>{var e=Yr(),i=ue(e);Z((()=>ni(i,`fas fa-${d()??""}`))),_e(t,e)})),je(he(s,2),(()=>!0===m()),(t=>{var e=Zr();je(ue(e),(()=>!0===v()),(t=>{_e(t,Qr())}),(t=>{var e=Ie();je(de(e),(()=>!1===v()),(t=>{_e(t,Xr())}),null,!0),_e(t,e)})),_e(t,e)})),Z((()=>{ni(i,`select ${S??""} ${Kt(L)??""}`),ei(r,"id",`form-field-select-${u()??""}`),ei(r,"name",u()),r.readOnly=g(),r.required=h(),r.multiple=f(),ei(r,"size",!!f()&&p())})),me("blur",r,k),_e(t,e)})),Hr(he(x,2),{get errors(){return _},set errors(t){_=t},get show(){return A},set show(t){A=t},get classes(){return S},set classes(t){S=t},get id(){return`input-field-helper-${u()??""}`}}),Z((()=>ni(x,`control ${Kt(C)??""}`))),_e(t,E),Zt()}function nn(t,e,i,r){return t.stopPropagation(),e("click",{event:t,value:i.value}),r()(t,i.value)}be(["input"]);var sn=we('<span class="icon"><i></i></span>'),on=we("<span> </span>"),an=we('<span class="icon"><i></i></span>'),ln=we("<!> <!> <!>",1),cn=we("<button><!></button>");function un(t,e){Xt(e,!0);const i=xi(),r=()=>Ti(Xi,"$LOCALE",i),n=Ri();let s=Ei(e,"title",3,""),o=Ei(e,"light",3,!1),a=Ei(e,"loading",3,!1),l=Ei(e,"raised",3,!1),c=Ei(e,"outlined",3,!1),u=Ei(e,"inverted",3,!1),d=Ei(e,"rounded",3,!1),h=Ei(e,"disabled",3,!1),g=Ei(e,"state",3,""),f=Ei(e,"type",3,""),p=Ei(e,"color",3,""),v=Ei(e,"size",3,""),m=Ei(e,"classes",3,""),b=Ei(e,"icon",3,!1),y=Ei(e,"iconSide",3,"right"),$=Ei(e,"action",3,(()=>!0));var O=cn();O.__click=[nn,n,e,$],je(ue(O),(()=>e.children),(t=>{var i=Ie();Qe(de(i),(()=>e.children)),_e(t,i)}),(t=>{var e=Ie();je(de(e),b,(t=>{var e=ln(),i=de(e);je(i,(()=>"left"===y()),(t=>{var e=sn(),i=ue(e);Z((()=>ni(i,`fas fa-${b()??""} ${(v()?`is-${v()}`:"")??""}`))),_e(t,e)}));var n=he(i,2);je(n,s,(t=>{var e=on(),i=ue(e);Z((()=>Me(i,r()[s()]))),_e(t,e)})),je(he(n,2),(()=>"right"===y()),(t=>{var e=an(),i=ue(e);Z((()=>ni(i,`fas fa-${b()??""} ${(v()?`is-${v()}`:"")??""}`))),_e(t,e)})),_e(t,e)}),(t=>{var e=ke();Z((()=>Me(e,r()[s()]))),_e(t,e)})),_e(t,e)})),Z((()=>{O.disabled=h(),ei(O,"type",f()?f():""),ni(O,`\n  button\n  ${m()??""}\n  ${(g()?`is-${g()}`:"")??""}\n  ${(u()?"is-inverted":"")??""}\n  ${(c()?"is-outlined":"")??""}\n  ${(l()?"is-raised":"")??""}\n  ${(d()?"is-rounded":"")??""}\n  ${(o()?"is-light":"")??""}\n  ${(a()?"is-loading":"")??""}\n  ${(p()?`is-${p()}`:"")??""}\n  ${(v()?`is-${v()}`:"")??""}\n  `)})),_e(t,O),Zt()}be(["click"]);var dn=we("<div></div>");function hn(t,e){Xt(e,!0);const i=Ri();let r=Ei(e,"values",19,(()=>[])),n=Ei(e,"centered",3,!1),s=Ei(e,"right",3,!1),o=Ei(e,"classes",3,""),a=Ei(e,"buttonComponent",3,un),l=Ei(e,"action",3,(t=>{i("click",t)}));var c=dn();Ve(c,21,r,(t=>t.id),((t,i)=>{var r=Ie();const n=P(a);var s=de(r),o=P((()=>Kt(i).action?Kt(i).action:l()));Xe(s,(()=>Kt(n)),((t,r)=>{r(t,Ci((()=>Kt(i)),{get value(){return Kt(i).value},set value(t){Kt(i).value=t},get action(){return Kt(o)},$$events:{click(t){Ii.call(this,e,t)}}}))})),_e(t,r)})),Z((()=>ni(c,`buttons has-addons ${(n()?"is-centered":"")??""} ${(s()?"is-right":"")??""} ${o()??""}`))),_e(t,c),Zt()}var gn=we('<div><div class="column"><!></div> <div class="column"><!></div> <div class="column"><!></div></div>');function fn(t,e){let i=Ei(e,"classes",3,""),r=Ei(e,"left",19,(()=>[])),n=Ei(e,"center",19,(()=>[])),s=Ei(e,"right",19,(()=>[]));var o=gn(),a=ue(o);hn(ue(a),{get values(){return r()}});var l=he(a,2);hn(ue(l),{get values(){return n()},centered:!0}),hn(ue(he(l,2)),{get values(){return s()},right:!0}),Z((()=>ni(o,`columns ${i()??""}`))),_e(t,o)}function pn(t,e){Xt(e,!0);const i=xi(),r=Ri();let n=Ei(e,"title",3,""),s=Ei(e,"light",3,!1),o=Ei(e,"loading",3,!1),a=Ei(e,"raised",3,!1),l=Ei(e,"outlined",3,!1),c=Ei(e,"inverted",3,!1),u=Ei(e,"rounded",3,!1),d=Ei(e,"disabled",3,!1),h=Ei(e,"state",3,""),g=Ei(e,"type",3,""),f=Ei(e,"color",3,""),p=Ei(e,"size",3,""),v=Ei(e,"classes",3,""),m=Ei(e,"icon",3,!1),b=Ei(e,"iconSide",3,"right"),y=Ei(e,"uiOff",3,(()=>({color:""}))),$=Ei(e,"uiOn",3,(()=>({color:"success"}))),O=Ei(e,"action",3,(()=>!w())),w=Ei(e,"selected",15,!1);let k=Ti(h(),"$state",i)();Fi((()=>{k&&(w()?k.$set($()()):k.$set(y()()))})),Oi(un(t,{get title(){return n()},get light(){return s()},get loading(){return o()},get raised(){return a()},get outlined(){return l()},get inverted(){return c()},get rounded(){return u()},get disabled(){return d()},get state(){return h()},get type(){return g()},get color(){return f()},get size(){return p()},get classes(){return v()},get icon(){return m()},get iconSide(){return b()},get value(){return e.value},$$events:{click:function(t){w(O()(t,e.value,w())),r("click",{value:e.value,selected:w()}),r("change",{value:e.value,selected:w()})}}}),(t=>k=t),(()=>k)),Zt()}var vn=we("<div></div>");function mn(t,e){function i(t,e){let i=c()-t;if(i)for(let t in r())if(t!==e&&!r()[t].selected&&(r(r()[t].selected=!0,!0),i-=1,!i))break}Xt(e,!0),Ri(),Mi((()=>{c()&&i(0,-1)}));let r=Ei(e,"values",31,(()=>ie([]))),n=Ei(e,"centered",3,!1),s=Ei(e,"right",3,!1),o=Ei(e,"classes",3,""),a=Ei(e,"buttonComponent",3,pn),l=Ei(e,"action",3,((t,e,n)=>{let s=!n;const o=r().indexOf((t=>t.value===e)),a=r().filter((t=>t.selected)).length+(s?1:-1);return c()&&a<c()&&(i(a,o),r(r())),u()&&u()<a&&(!function(t,e){let i=t-u();if(i)for(let t in r())if(t!==e&&r()[t].selected&&(r(r()[t].selected=!1,!0),i-=1,!i))break}(a,o),r(r())),s})),c=Ei(e,"min",3,0),u=Ei(e,"max",3,100);var d=vn();return Ve(d,21,r,(t=>t.id),((t,i)=>{var r=Ie();const n=P(a);var s=de(r),o=P((()=>Kt(i).action?Kt(i).action:l()));Xe(s,(()=>Kt(n)),((t,r)=>{r(t,Ci((()=>Kt(i)),{get value(){return Kt(i).value},set value(t){Kt(i).value=t},get selected(){return Kt(i).selected},set selected(t){Kt(i).selected=t},get action(){return Kt(o)},$$events:{click(t){Ii.call(this,e,t)},change(t){Ii.call(this,e,t)}}}))})),_e(t,r)})),Z((()=>ni(d,`buttons has-addons ${(n()?"is-centered":"")??""} ${(s()?"is-right":"")??""} ${o()??""}`))),_e(t,d),Zt({selectAll:function(){r().forEach((t=>{t.selected=!0})),r(r())},deselectAll:function(){r().forEach((t=>{t.selected=!1})),r(r())}})}var bn=Object.freeze({__proto__:null,UIButton:un,UIButtonSwitch:pn,UIButtons:hn,UIButtonsRow:fn,UIButtonsSwitchers:mn});const yn="ok",$n={SHORT:500,NORMAL:1500,LONG:5e3},On=1500;var wn=we('<div class="field has-addons"><!></div> <div class="control"><!></div>',1);var kn=we('<div class="control"><!></div>');var In=we("<progress> </progress>");var _n=we("<div><!> <!> <!></div>");var An=we("<!> <!>",1);function Sn(t,e){Xt(e,!0);const i=xi(),r=()=>Ti(Xi,"$LOCALE",i);let n=Ei(e,"id",19,(()=>`title-${Math.random()}`)),s=Ei(e,"title",3,""),o=Ei(e,"size",3,1),a=Ei(e,"spaced",3,!1),l=Ei(e,"align",3,"left");let c=P((()=>e.subsize?e.subsize:parseInt(o())<6?parseInt(o())+1:o())),u=P((()=>a()?"is-spaced":"")),d=P((()=>`<h${o()} id="${n()}" style="text-align: ${l()};" class="title ${Kt(u)} is-${o()}">${r()[s()]}</h${o()}>`)),h=P((()=>`<h${Kt(c)} id="${n()}" style="text-align: ${l()};" class="subtitle is-${Kt(c)}">${r()[e.subtitle]}</h${Kt(c)}>`));var g=An(),f=de(g);return je(f,s,(t=>{var e=Ie();Je(de(e),(()=>Kt(d))),_e(t,e)})),je(he(f,2),(()=>e.subtitle),(t=>{var e=Ie();Je(de(e),(()=>Kt(h))),_e(t,e)})),_e(t,g),Zt({scrollToTop:(t=Kr.SCROLL_OPTIONS)=>{setTimeout((()=>{document.getElementById(n()).scrollIntoView(t)}),100)}})}var Cn=we('<article class="media"><figure class="media-left"><p class="image is-32x32"><img></p></figure> <div class="media-content"><div class="content"><p><strong> </strong> <small>@</small> <strong> </strong></p></div></div></article>');function Ln(t,e,i,r,n){let s={field:e(),value:i()};return r(!0),n("change",s),!0}function En(t,e,i,r){let n={field:e(),value:t.currentTarget.value};return i(!0),r("change",n),!0}var Tn=we("<p> </p>"),xn=we('<span class="icon is-small is-left"><i></i></span>'),Fn=we('<i class="fas fa-check"></i>'),Nn=we('<i class="fas fa-exclamation-triangle"></i>'),Mn=we('<span class="icon is-small is-right"><!></span>'),Rn=we('<input type="text"> <!> <!>',1),Un=we("<div><!></div> <!>",1);function Dn(t,e){Xt(e,!0);const i=xi();let r,n,s=Ri(),o=Ei(e,"inputStarted",15,!1),a=Ei(e,"value",15,""),l=Ei(e,"placeholder",3,""),c=Ei(e,"fieldname",3,"textfield"),u=Ei(e,"icon",3,!1),d=Ei(e,"required",3,!0),h=Ei(e,"disabled",3,!1),g=Ei(e,"readonly",3,!1),f=Ei(e,"valid",3,!0),p=Ei(e,"validated",3,!1),v=Ei(e,"errors",3,!1),m=Ei(e,"formErrors",3,!1),b=Ei(e,"formLevelError",3,!1),y=P((()=>(u()?" has-icons-left ":"")+" has-icons-right "));Fi((()=>{r=[].concat(v()?v():[],m()?m():[])})),Fi((()=>{n=!(p()&&f())&&o()}));let $,O=P((()=>!1===f()||b()));Fi((()=>{$=!0!==f()&&o()?Kr.CLASS_ERR:Kr.CLASS_OK}));var w=Un(),k=de(w);je(ue(k),g,(t=>{var e=Tn(),i=ue(e);Z((()=>Me(i,a()))),_e(t,e)}),(t=>{var e=Rn(),r=de(e);ni(r,`input ${$??""}`),r.__change=[Ln,c,a,o,s],r.__input=[En,c,o,s];var n=he(r,2);je(n,u,(t=>{var e=xn(),i=ue(e);Z((()=>ni(i,`fas fa-${u()??""}`))),_e(t,e)})),je(he(n,2),(()=>!0===p()),(t=>{var e=Mn();je(ue(e),(()=>!0===f()),(t=>{_e(t,Fn())}),(t=>{var e=Ie();je(de(e),(()=>!1===f()),(t=>{_e(t,Nn())}),null,!0),_e(t,e)})),_e(t,e)})),Z((()=>{ei(r,"id",`form-field-textfield-${c()??""}`),ei(r,"name",c()),ei(r,"invalid",Kt(O)),r.disabled=h(),r.required=d(),r.readOnly=g(),ei(r,"placeholder",Ti(Xi,"$LOCALE",i)[l()]),ei(r,"autocomplete",c()),ei(r,"aria-controls",`input-field-helper-${c()??""}`),ei(r,"aria-describedby",`input-field-helper-${c()??""}`)})),vi(r,a),_e(t,e)})),Hr(he(k,2),{get errors(){return r},set errors(t){r=t},get show(){return n},set show(t){n=t},get classes(){return $},set classes(t){$=t},get id(){return`input-field-helper-${c()??""}`}}),Z((()=>ni(k,`control ${Kt(y)??""}`))),_e(t,w),Zt()}be(["change","input"]);var Pn=we('<div class="columns"><div class="column"><div class="field"><!></div></div></div>');function jn(t,e){Xt(e,!0);const i=xi(),r=Ri();let n=Ei(e,"placeholder",19,(()=>Ti(Xi,"$LOCALE",i)["not-node:field_search_placeholder"])),s=Ei(e,"term",15,"");var o=Pn(),a=ue(o),l=ue(a);Dn(ue(l),{get value(){return s()},set value(t){s(t)},get placeholder(){return n()},fieldname:"searchTermInput",icon:"magnifying-glass",$$events:{change:function({detail:t}){r("termChange",t)}}}),_e(t,o),Zt()}var Wn=Object.freeze({__proto__:null,UIBoolean:Er,UIBooleanLabeled:function(t,e){Xt(e,!0);const i=xi();let r=Ei(e,"inverted",3,!1);var n=Tr(),s=ue(n);Er(he(s),{get value(){return e.value},get inverted(){return r()}}),Z((()=>Me(s,`${Ti(Xi,"$LOCALE",i)[e.label]??""}: `))),_e(t,n),Zt()},UIBooleans:xr,UICensored:function(t,e){let i=Ei(e,"hidden",15,!0),r=Ei(e,"showable",3,!0),n=Ei(e,"copiable",3,!0),s=Ei(e,"copyIcon",3,"copy"),o=Ei(e,"showIcon",3,"eye"),a=Ei(e,"hideIcon",3,"eye-slash"),l=Ei(e,"maxLength",3,20),c=Ei(e,"shadowClass",3,"has-background-primary-90"),u=Ei(e,"tooltip",3,!0),d=Ei(e,"tooltipTTL",3,2e3),h=Ei(e,"tooltipText",3,"Скопировано в буфер"),g=Ei(e,"tooltipClass",3,"has-tooltip-info"),f=Ei(e,"value",3,""),p=T(!1),v=P((()=>u()&&Kt(p))),m=T(void 0);var b=Ur(),y=de(b),$=ue(y),O=he(y,2);je(O,n,(t=>{var e=Mr();Oi(e,(t=>R(m,t)),(()=>Kt(m))),e.__click=[Nr,f,u,p,m,h,d];var i=ue(e);Z((()=>{ni(e,"icon is-small is-right is-clickable "+(Kt(v)?` ${g()} `:"")+" is-vertical-middle"),ni(i,`fas fa-${s()??""}`)})),_e(t,e)})),je(he(O,2),r,(t=>{var e=Rr();e.__click=[Fr,i];var r=ue(e);Z((()=>ni(r,`fas fa-${(i()?o():a())??""}`))),_e(t,e)})),Z((()=>{ni(y,(i()?"is-censored "+c():"")+" is-vertical-middle "),ei(y,"style",`display:inline-block; width: ${l()}rem; height: var(--bulma-size-medium); overflow-x:hidden;`),Me($,i()?"":f())})),_e(t,b)},UIErrorsList:Hr,UIIndicator:Pr,UILoader:Wr,UIProgress:function(t,e){let i=Ei(e,"max",3,100),r=Ei(e,"color",3,""),n=Ei(e,"size",3,""),s=Ei(e,"classes",3,"");var o=In(),a=ue(o);Z((()=>{ni(o,`\n  progress\n  ${s()??""}\n  ${(r()?`is-${r()}`:"")??""}\n  ${(n()?`is-${n()}`:"")??""}`),function(t,e){var i=t.__attributes??={};i.value!==(i.value=e)&&t.value!==e&&(t.value=e)}(o,e.value),ei(o,"max",i()),Me(a,`${e.value??""}%`)})),_e(t,o)},UISelectFromModelOnDemandInline:function(t,e){Xt(e,!0);const i=Ri();let r,n=Ei(e,"inputStarted",3,!1),s=Ei(e,"variants",31,(()=>ie([]))),o=Ei(e,"placeholder",3,"empty select item"),a=Ei(e,"fieldname",3,"selectFromModel"),l=Ei(e,"modelName",3,""),c=Ei(e,"actionName",3,""),u=Ei(e,"actionFilter",19,(()=>({}))),d=Ei(e,"actionSorter",19,(()=>({}))),h=Ei(e,"actionPager",19,(()=>({}))),g=Ei(e,"actionSearch",3,void 0),f=Ei(e,"optionId",3,":_id"),p=Ei(e,"optionTitle",3,":title"),v=Ei(e,"icon",3,!1),m=Ei(e,"required",3,!0),b=Ei(e,"readonly",3,!1),y=Ei(e,"multiple",3,!1),$=Ei(e,"size",3,8),O=Ei(e,"valid",3,!0),w=Ei(e,"validated",3,!1),k=Ei(e,"errors",15,!1),I=Ei(e,"formErrors",3,!1),_=Ei(e,"formLevelError",3,!1),A=P((()=>!0)),S=T("hidden"),C=[];function L({detail:t}){r=C.find((e=>br.get(f(),e)===t.value))}Mi((async()=>{if(l()&&c()&&u()){const t=Ir.getApp().getModel(l()).setFilter(u()).setSorter(d()).setPager(h()).setSearch(g()),e=await t["$"+c()]();e.status===yn?(C=e.result,s(C.map((t=>({id:br.get(f(),t),title:br.get(p(),t)}))))):k(result.errors||[result.message])}}));const E={add:{color:"primary",icon:"plus",action(){R(S,"show")}},resolve:{icon:"check",color:"primary",action(){R(S,"hidden"),i("resolve",r)}},reject:{icon:"close",color:"danger",action(){R(S,"hidden"),i("reject")}}};var x=Ie();je(de(x),(()=>"hidden"===Kt(S)),(t=>{un(t,Ci((()=>E.add)))}),(t=>{var i=Ie();je(de(i),(()=>"show"==Kt(S)),(t=>{var i=wn(),r=de(i);rn(ue(r),{get inputStarted(){return n()},get value(){return e.value},get variants(){return s()},get placeholder(){return o()},get fieldname(){return a()},get icon(){return v()},get required(){return m()},get readonly(){return b()},get disabled(){return Kt(A)},get multiple(){return y()},get size(){return $()},get valid(){return O()},get validated(){return w()},get errors(){return k()},get formErrors(){return I()},get formLevelError(){return _()},$$events:{change:L}});var l=ue(he(r,2)),c=P((()=>[E.resolve,E.reject]));hn(l,{get values(){return Kt(c)}}),_e(t,i)}),null,!0),_e(t,i)})),_e(t,x),Zt()},UISelectFromModelWithSearchModal:function(t,e){Xt(e,!0);let i=Ri(),r=Ei(e,"value",15),n=Ei(e,"inputStarted",15,!1),s=Ei(e,"icon",3,!1),o=Ei(e,"fieldname",3,""),a=Ei(e,"readonly",3,!1),l=Ei(e,"serviceName",3,""),c=Ei(e,"serviceOpenSelectorMethod",3,"openSelector"),u=Ei(e,"serviceLoadDataMethod",3,"loadData"),d=Ei(e,"modelData",15,null),h=Ei(e,"loading",15,!1),g=Ei(e,"selectedModelTitleFormatter",3,(t=>`${t._id}`)),f=Ei(e,"loadingLabel",3,"not-node:loading_label"),p=Ei(e,"isEmptyLabel",3,"not-node:field_value_is_empty_placeholder");function v(){if(!l())throw new Error("serviceName is not set");return Ir.getApp().getService(l())}function m(){if(!c())throw new Error("serviceOpenSelectorMethod is not set");v()[c()]().then((t=>(r(t._id),d(t),r()))).then((t=>{n(!0),i("change",{field:o(),value:t})})).catch((t=>{Ir.report(t)}))}Mi((()=>{!async function(){try{r()&&(h(!0),d(await v()[u()](r())))}catch(t){Ir.report(t)}finally{h(!1)}}()}));const b=[{id:1,action:m,icon:s(),color:"warning"},{id:2,action:function(){r(void 0),d(null),i("change",{field:o(),value:r()})},icon:"times",color:"danger"}];function y(){return h()?{disabled:!0,loading:h(),title:f()}:d()?{disabled:a(),action:m,title:g()(d())}:{disabled:!0,title:p()}}let $=T(ie([]));Fi((()=>{r()?R($,ie([y(),...a()?[]:b])):R($,ie([y(),...a()?[]:[b[0]]]))}));var O=kn();hn(ue(O),{get values(){return Kt($)},classes:"is-no-flex-wrap"}),_e(t,O),Zt()},UIShowOneFromList:function(t,e){Xt(e,!0);const i=t=>t[s()]===e.id;let r=Ei(e,"values",19,(()=>[])),n=Ei(e,"active",15),s=Ei(e,"idFieldName",3,"_id"),o=Ei(e,"filter",3,i);Fi((()=>{n(Array.isArray(r())&&r().length&&void 0!==e.id?r().find(o()||i):void 0)}));var a=Ie();je(de(a),n,(t=>{var i=Ie();Xe(de(i),(()=>e.UIComponent),((t,e)=>{e(t,Ci(n))})),_e(t,i)}),(t=>{var i=Ie();je(de(i),(()=>e.UIPlaceholder),(t=>{var i=Ie();Xe(de(i),(()=>e.UIPlaceholder),((t,e)=>{e(t,{})})),_e(t,i)}),null,!0),_e(t,i)})),_e(t,a),Zt()},UISimpleSearchInput:jn,UITag:Lr,UITagValue:function(t,e){Xt(e,!0);let i=Ei(e,"id",3,"taggedValueId"),r=Ei(e,"actions",19,(()=>[])),n=Ei(e,"classes",3,""),s=Ei(e,"actionsGroupContructor",3,hn),o=Ei(e,"actionsGroupProps",19,(()=>({}))),a=Ei(e,"readonly",3,!1);var l=_n(),c=ue(l);je(c,(()=>e.title),(t=>{Lr(t,Ci((()=>e.title)))}));var u=he(c,2);je(u,(()=>e.value),(t=>{Lr(t,Ci((()=>e.value)))})),je(he(u,2),(()=>!a()&&r()&&r().length),(t=>{var e=Ie();const i=P(s);Xe(de(e),(()=>Kt(i)),((t,e)=>{e(t,Ci({get values(){return r()}},o))})),_e(t,e)})),Z((()=>{ni(l,`tags has-addons ${n()??""}`),ei(l,"id",i())})),_e(t,l),Zt()},UITitle:Sn,UIUserCard:function(t,e){Xt(e,!0);let i=Ei(e,"id",3,"userCard"),r=Ei(e,"image",3,"https://bulma.io/images/placeholders/32x32.png"),n=Ei(e,"username",15,"John Doe"),s=Ei(e,"role",15,"admin"),o=Ei(e,"events",31,(()=>ie({}))),a=Ei(e,"register",19,(()=>Ir.registerWidgetEvents)),l=Ei(e,"onUpdate",3,(t=>{Object.hasOwn(t,"username")&&n(t.username),Object.hasOwn(t,"role")&&s(t.role)}));function c(){return`usercard-${i()}`}function u(){return`${c()}:update`}Mi((()=>{Object.hasOwn(o(),u())||o(o()[u()]=l(),!0),a()(o())}));var d=Cn();Z((()=>ei(d,"id",c())));var h=ue(d),g=ue(h),f=ue(g),p=ue(he(h,2)),v=ue(p),m=ue(v),b=ue(m),y=ue(he(m,4));Z((()=>{ei(f,"src",r()),ei(f,"alt",n()),Me(b,n()),Me(y,s())})),_e(t,d),Zt()}});function Bn(t){const e=t-1;return e*e*e+1}function zn(t,{from:e,to:i},r={}){var n=getComputedStyle(t),s=function(t){if("currentCSSZoom"in t)return t.currentCSSZoom;var e=t,i=1;for(;null!==e;)i*=+getComputedStyle(e).zoom,e=e.parentElement;return i}(t),o="none"===n.transform?"":n.transform,[a,l]=n.transformOrigin.split(" ").map(parseFloat),c=e.width/i.width,u=e.height/i.height,d=(e.left+c*a-(i.left+a))/s,h=(e.top+u*l-(i.top+l))/s,{delay:g=0,duration:f=t=>120*Math.sqrt(t),easing:p=Bn}=r;return{delay:g,duration:"function"==typeof f?f(Math.sqrt(d*d+h*h)):f,easing:p,css:(t,e)=>`transform: ${o} scale(${t+e*c}, ${t+e*u}) translate(${e*d}px, ${e*h}px);`}}const Vn=t=>t;function qn(t,{delay:e=0,duration:i=400,easing:r=Vn}={}){const n=+getComputedStyle(t).opacity;return{delay:e,duration:i,easing:r,css:t=>"opacity: "+t*n}}var Hn=we('<option selected class="svelte-75ckfb"> </option>'),Kn=we('<option selected class="svelte-75ckfb"> </option>'),Gn=we('<div class="tags has-addons svelte-75ckfb"><span class="tag svelte-75ckfb"> </span> <span class="tag is-delete svelte-75ckfb"></span></div>'),Jn=we('<div class="svelte-75ckfb"><!></div>'),Yn=we('<span class="autocomplete-clear-button svelte-75ckfb"><!></span>'),Qn=we('<div class="autocomplete-list-item svelte-75ckfb"><!></div>'),Xn=we('<div class="autocomplete-list-item-no-results svelte-75ckfb"> </div>'),Zn=we("<!> <!> <!>",1),ts=we('<div class="autocomplete-list-item-loading svelte-75ckfb"><!></div>'),es=we('<div class="autocomplete-list-item-create svelte-75ckfb"><!></div>'),is=we('<div class="autocomplete-list-item-no-results svelte-75ckfb"><!></div>'),rs=we('<div><select class="svelte-75ckfb"><!></select> <div class="input-container svelte-75ckfb"><!> <input> <!></div> <div><!></div></div>');function ns(t,e){const i=Ai(e,["children","$$slots","$$events","$$legacy"]),r=Ai(i,["highlightFilter","items","searchFunction","labelFieldName","keywordsFieldName","valueFieldName","labelFunction","keywordsFunction","valueFunction","keywordsCleanFunction","textCleanFunction","beforeChange","onChange","onFocus","onBlur","onCreate","selectFirstIfEmpty","minCharactersToSearch","maxItemsToShowInList","multiple","create","ignoreAccents","matchAllKeywords","sortByMatchedKeywords","itemFilterFunction","itemSortFunction","lock","delay","localFiltering","localSorting","cleanUserText","lowercaseKeywords","closeOnBlur","orderableSelection","hideArrow","showClear","clearText","showLoadingIndicator","noResultsText","loadingText","moreItemsText","createText","placeholder","className","inputClassName","inputId","name","selectName","selectId","title","html5autocomplete","autocompleteOffValue","readonly","dropdownClassName","disabled","noInputStyles","required","debug","tabindex","selectedItem","value","highlightedItem","text"]);Xt(e,!1);const n=F(),s=F(),a=F(),l=F();let c=Ei(e,"items",28,(()=>[])),u=Ei(e,"searchFunction",8,!1),d=Ei(e,"labelFieldName",8,void 0),h=Ei(e,"keywordsFieldName",24,d),p=Ei(e,"valueFieldName",8,void 0),v=Ei(e,"labelFunction",8,(function(t){return null==t?"":d()?t[d()]:t})),m=Ei(e,"keywordsFunction",8,(function(t){return null==t?"":h()?t[h()]:v()(t)})),y=Ei(e,"valueFunction",8,(function(t,e=!1){return null==t?t:!T()||e?p()?t[p()]:t:t.map((t=>p()?t[p()]:t))})),O=Ei(e,"keywordsCleanFunction",8,(function(t){return t})),w=Ei(e,"textCleanFunction",8,(function(t){return t})),k=Ei(e,"beforeChange",8,(function(t,e){return!0})),I=Ei(e,"onChange",8,(function(t){})),_=Ei(e,"onFocus",8,(function(){})),A=Ei(e,"onBlur",8,(function(){})),S=Ei(e,"onCreate",8,(function(t){St()&&console.log("onCreate: "+t)})),C=Ei(e,"selectFirstIfEmpty",8,!1),L=Ei(e,"minCharactersToSearch",8,1),E=Ei(e,"maxItemsToShowInList",8,0),T=Ei(e,"multiple",8,!1),x=Ei(e,"create",8,!1),N=Ei(e,"ignoreAccents",8,!0),U=Ei(e,"matchAllKeywords",8,!0),D=Ei(e,"sortByMatchedKeywords",8,!1),W=Ei(e,"itemFilterFunction",8,void 0),B=Ei(e,"itemSortFunction",8,void 0),z=Ei(e,"lock",8,!1),V=Ei(e,"delay",8,0),q=Ei(e,"localFiltering",8,!0),H=Ei(e,"localSorting",8,!0),Y=Ei(e,"cleanUserText",8,!0),tt=Ei(e,"lowercaseKeywords",8,!0),et=Ei(e,"closeOnBlur",8,!1),it=Ei(e,"orderableSelection",8,!1),rt=Ei(e,"hideArrow",8,!1),nt=Ei(e,"showClear",8,!1),st=Ei(e,"clearText",8,"&#10006;"),ot=Ei(e,"showLoadingIndicator",8,!1),at=Ei(e,"noResultsText",8,"No results found"),lt=Ei(e,"loadingText",8,"Loading results..."),ct=Ei(e,"moreItemsText",8,"items not shown"),ut=Ei(e,"createText",8,"Not found, add anyway?"),dt=Ei(e,"placeholder",8,void 0),ht=Ei(e,"className",8,void 0),gt=Ei(e,"inputClassName",8,void 0),ft=Ei(e,"inputId",8,void 0),vt=Ei(e,"name",8,void 0),mt=Ei(e,"selectName",8,void 0),bt=Ei(e,"selectId",8,void 0),yt=Ei(e,"title",8,void 0),$t=Ei(e,"html5autocomplete",8,void 0),Ot=Ei(e,"autocompleteOffValue",8,"off"),wt=Ei(e,"readonly",8,void 0),kt=Ei(e,"dropdownClassName",8,void 0),It=Ei(e,"disabled",8,!1),_t=Ei(e,"noInputStyles",8,!1),At=Ei(e,"required",8,null),St=Ei(e,"debug",8,!1),Ct=Ei(e,"tabindex",8,0),Lt=Ei(e,"selectedItem",28,(()=>T()?[]:void 0)),Et=Ei(e,"value",12,void 0),Tt=Ei(e,"highlightedItem",12,void 0);const xt="sautocomplete-"+Math.floor(1e3*Math.random());let Ft,Mt=F(),Rt=F(),Dt=F(),Pt=F(!1),jt=F(!1),Bt=F(-1),zt=Ei(e,"text",12,void 0),Vt=F(0),qt=F(),Ht=[],Jt=0,ee=0,ie=F(!1);function re(t,e){let i=function(t,e){if("function"!=typeof t)return void console.error("Not a function: "+t+", argument: "+e);let i;try{i=t(e)}catch(i){console.warn("Error executing Autocomplete function on value: "+e+" function: "+t)}return i}(t,e);return null==i&&(i=""),"string"!=typeof i&&(i=i.toString()),i}function se(t){return re(v(),t)}function oe(t){const e=re(m(),t);let i=re(O(),e);return i=tt()?i.toLowerCase().trim():i,N()&&(i=Ke(i)),St()&&console.log("Extracted keywords: '"+i+"' from item: "+JSON.stringify(t)),i}function ae(){let t;St()&&(t="Autocomplete prepare list "+(ft()?`(id: ${ft()})`:""),console.time(t),console.log("Prepare items to search"),console.log("items: "+JSON.stringify(c()))),Array.isArray(c())||(console.warn("Autocomplete items / search function did not return array but",c()),c([]));const e=c()?c().length:0;Ht=new Array(e),e>0&&c().forEach(((t,e)=>{const i=function(t){return{keywords:q()?oe(t):[],label:se(t),item:t}}(t);void 0===i&&console.log("Undefined item for: ",t),Ht[e]=i})),R(qt,Ht),St()&&(console.log(Ht.length+" items to search"),console.timeEnd(t))}function le(t,e){if(!t)return 0;const i=t.keywords;let r=0;return e.forEach((t=>{i.includes(t)&&(r+=1)})),r}async function ce(){let t;St()&&(t="Autocomplete search "+(ft()?`(id: ${ft()})`:""),console.time(t),console.log("Searching user entered text: '"+zt()+"'"));let e=function(t){if(null==t)return"";if(!Y())return t;const e=t.replace(/[&/\\#,+()$~%.'":*?<>{}]/g," ").trim(),i=re(w(),e);return tt()?i.toLowerCase().trim():i.trim()}(zt());if(L()>1&&e.length<L()&&(e=""),R(Vt,e.length),St()&&console.log("Changed user entered text '"+zt()+"' into '"+e+"'"),""===e&&(u()?(c([]),St()&&console.log("User entered text is empty clear list of items")):(R(qt,Ht),St()&&console.log("User entered text is empty set the list of items to all items")),Be()))St()&&console.timeEnd(t);else{if(u()){Jt+=1;const t=Jt;if(R(jt,!0),"AsyncGeneratorFunction"===u().constructor.name){for await(const i of u()(e,E())){if(t<ee)return!1;t>ee&&c([]),ee=t,c([...c(),...i]),ge(e)}ee<t&&(ee=t,c([]),ge(e))}else{let i=await u()(e,E());if(t<ee)return!1;ee=t,c(i),ge(e)}R(jt,!1)}else ge(e);St()&&(console.timeEnd(t),console.log("Search found "+Kt(qt).length+" items"))}}function ge(t){ae();const e=(N()?Ke(t):t).split(/\s+/g).filter((t=>""!==t));let i;q()?(i=W()?Ht.filter((t=>W()(t.item,e))):Ht.filter((t=>function(t,e){const i=le(t,e);return U()?i>=e.length:i>0}(t,e))),H()&&(B()?i=i.sort(((t,i)=>B()(t.item,i.item,e))):D()&&(i=i.sort(((t,i)=>function(t,e,i){return le(e,i)-le(t,i)}(t,i,e)))))):i=Ht;const r=He(e,"label");return R(qt,i.map(r)),Be(),!0}function fe(t){let e;if(St()&&console.log("createdItem",t),void 0!==t){ae(),R(qt,Ht);let i=Re(t,Kt(qt));i<=0&&(c([t]),ae(),R(qt,Ht),i=0),i>=0&&(R(Bt,i),e=Kt(qt)[Kt(Bt)])}return e}function pe(t){if(St()&&console.log("selectListItem",t),void 0===t&&x()){const e=S()(zt());if(void 0!==e){if("function"==typeof e.then)return e.then((t=>{if(void 0!==t){const e=fe(t);void 0!==e&&pe(e)}})),!0;t=fe(e)}}if(void 0===t)return St()&&console.log("listItem is undefined. Can not select."),!1;if(Kt(l))return!0;const e=t.item;return k()(Lt(),e)&&(T()?Lt()?Lt().includes(e)?Lt(Lt().filter((t=>t!==e))):Lt([...Lt(),e]):Lt([e]):(Lt(void 0),Lt(e))),!0}function ye(){St()&&console.log("selectItem",Kt(Bt));pe(Kt(qt)[Kt(Bt)])?(St()&&console.log("selectListItem true, closing"),De(),T()&&(zt(""),Kt(Mt).focus())):St()&&console.log("selectListItem false, not closing")}function $e(){St()&&console.log("up"),Ue(),Kt(Bt)>0&&Qt(Bt,-1),we()}function Oe(){St()&&console.log("down"),Ue(),Kt(Bt)<Kt(qt).length-1&&Qt(Bt),we()}function we(){St()&&console.log("highlight");const t=".selected";St()&&console.log("Seaching DOM element: "+t+" in "+Kt(Rt));const e=Kt(Rt)&&Kt(Rt).querySelector(t);e?"function"==typeof e.scrollIntoViewIfNeeded?(St()&&console.log("Scrolling selected item into view"),e.scrollIntoViewIfNeeded()):"function"===e.scrollIntoView?(St()&&console.log("Scrolling selected item into view"),e.scrollIntoView()):St()&&console.warn("Could not scroll selected item into view, scrollIntoViewIfNeeded not supported"):St()&&console.warn("Selected item not found to scroll into view")}function Se(t){St()&&console.log("onListItemClick"),pe(t)&&(De(),T()&&(zt(""),Kt(Mt).focus()))}function Le(t){St()&&console.log("unselectItem",t),Lt(Lt().filter((e=>e!==t))),Kt(Mt).focus()}function Te(){ce()&&(R(Bt,0),Ue())}function xe(t){St()&&console.log("onEsc"),t.stopPropagation(),Kt(Pt)&&(Kt(Mt).focus(),De())}function Fe(t){St()&&console.log("onBackspace"),Le(Lt()[Lt().length-1])}function Ne(){if(St()&&console.log("resetListToAllItemsAndOpen"),u()&&!Ht.length?ce():zt()||R(qt,Ht),Ue(),Lt()){St()&&console.log("Searching currently selected item: "+JSON.stringify(Lt()));const t=Re(Lt(),Kt(qt));t>=0&&(R(Bt,t),we())}}function Re(t,e){St()&&console.log("Finding index for item",t);let i=-1;for(let r=0;r<e.length;(r+=1)-1){const n=e[r];if(void 0!==n){if(St()&&console.log("Item "+r+": "+JSON.stringify(n)),t===n.item){i=r;break}}else St()&&console.log(`listItem ${r} is undefined. Skipping.`)}return St()&&(i>=0?console.log("Found index for item: "+i):console.warn("Not found index for item: "+t)),i}function Ue(){St()&&console.log("open"),Kt(l)||Pe()||(R(ie,!0),R(Pt,!0))}function De(){St()&&console.log("close"),R(Pt,!1),R(jt,!1),!zt()&&C()&&(R(Bt,0),ye())}function Pe(){return L()>0&&Kt(Vt)<L()&&(u()||Kt(Vt)>0)}function Be(){return!!Pe()&&(De(),!0)}function qe(){St()&&console.log("clear"),zt(""),Lt(T()?[]:void 0),setTimeout((()=>{Kt(Mt).focus()}))}function He(t,e){return i=>{let r=i[e];const n=Object.assign({highlighted:void 0},i);n.highlighted=r;const s=r.toLowerCase(),o=N()?Ke(s):s;if(t&&t.length){const e=[];for(let i=0;i<t.length;(i+=1)-1){let r=t[i];N()&&(r=Ke(r));const n=r.length;let s=0;do{if(s=o.indexOf(r,s),s>=0){let t=s+n;e.push([s,t]),s=t}}while(-1!==s)}if(e.length>0){const t=new Set;for(let i=0;i<e.length;(i+=1)-1){const r=e[i],n=r[0],o=r[1],a=s.substring(n,o);t.add(a)}for(let e of t){if("b"===e)continue;const t=new RegExp("("+e+")","ig"),i=n.highlighted.replace(t,"<b>$1</b>");n.highlighted=i}}}return n}}function Ke(t){return t.normalize("NFD").replace(/[\u0300-\u036f]/g,"")}Ui((()=>{Kt(ie)&&function(){const{height:t}=window.visualViewport,{bottom:e,height:i}=Kt(Dt).getBoundingClientRect(),{height:r}=Kt(Rt).getBoundingClientRect();M(Rt,Kt(Rt).style.top=e+r>t?`-${i+r}px`:"0px")}(),R(ie,!1)}));let Ge=F(!1);function Qe(t,e){it()&&(t.preventDefault(),R(Ge,e))}function Xe(t,e){if(it()){t.preventDefault(),R(Ge,!1);let i=parseInt(t.dataTransfer.getData("source"));i!=e&&function(t,e){let i=[...Lt()];t<e?(i.splice(e+1,0,i[t]),i.splice(t,1)):(i.splice(e,0,i[t]),i.splice(t+1,1));Lt(i)}(i,e)}}var ti;Q((()=>(te(c()),te(u()))),(()=>{c(),u()||ae()})),Q((()=>te(Lt())),(()=>{Lt(),Et(y()(Lt())),Lt()&&!T()&&zt(se(Lt())),R(qt,Ht),I()(Lt())})),Q((()=>(Kt(qt),Kt(Bt))),(()=>{Tt(Kt(qt)&&Kt(Bt)&&Kt(Bt)>=0&&Kt(Bt)<Kt(qt).length?Kt(qt)[Kt(Bt)].item:null)})),Q((()=>(Kt(Pt),te(c()),Kt(Vt))),(()=>{R(n,Kt(Pt)&&(c()&&c().length>0||Kt(Vt)>0))})),Q((()=>(te(T()),te(Lt()))),(()=>{R(s,T()&&Lt()&&Lt().length>0||!T()&&Lt())})),Q((()=>(te(nt()),te(z()),te(T()),Kt(s))),(()=>{R(a,nt()||(z()||T())&&Kt(s))})),Q((()=>(te(z()),Kt(s))),(()=>{R(l,z()&&Kt(s))})),ti=Nt,X((()=>{if(Kt(ti.l.r2)){for(var t of ti.l.r1){var e=t.effect;e.f&b&&Yt(e,$),Ut(e)&&Wt(e),t.ran=!1}ti.l.r2.v=!1}})),function(t=!1){const e=Nt,i=e.l.u;if(!i)return;let r=()=>te(e.s);if(t){let t=0,i={};const n=P((()=>{let r=!1;const n=e.s;for(const t in n)n[t]!==i[t]&&(i[t]=n[t],r=!0);return r&&t++,t}));r=()=>Kt(n)}i.b.length&&J((()=>{ki(e,r),f(i.b)})),G((()=>{const t=Gt((()=>i.m.map(g)));return()=>{for(const e of t)"function"==typeof e&&e()}})),i.a.length&&G((()=>{ki(e,r),f(i.a)}))}();var ii=rs();me("click",ne,(function(t){St()&&console.log("onDocumentClick"),t.composedPath().some((t=>t.classList&&t.classList.contains(xt)))?(St()&&console.log("onDocumentClick inside"),we()):(St()&&console.log("onDocumentClick outside"),De())})),me("scroll",ne,(()=>R(ie,!0)));var oi=ue(ii);je(ue(oi),(()=>!T()&&Kt(s)),(t=>{var e=Hn(),i={},r=ue(e);Z((()=>Me(r,se(Lt())))),Z((()=>{i!==(i=y()(Lt(),!0))&&(e.value=null==(e.__value=y()(Lt(),!0))?"":y()(Lt(),!0))})),_e(t,e)}),(t=>{var e=Ie();je(de(e),(()=>T()&&Kt(s)),(t=>{var e=Ie();Ve(de(e),1,Lt,ze,((t,e)=>{var i=Kn(),r={},n=ue(i);Z((()=>Me(n,se(Kt(e))))),Z((()=>{r!==(r=y()(Kt(e),!0))&&(i.value=null==(i.__value=y()(Kt(e),!0))?"":y()(Kt(e),!0))})),_e(t,i)})),_e(t,e)}),null,!0),_e(t,e)}));var ai=he(oi,2);Oi(ai,(t=>R(Dt,t)),(()=>Kt(Dt)));var li=ue(ai);je(li,(()=>T()&&Kt(s)),(t=>{var i=Ie();Ve(de(i),11,Lt,(t=>y()(t,!0)),((t,i,r)=>{var n=Jn();ei(n,"draggable",!0),Ye(ue(n),e,"tag",{get label(){return se(Kt(i))},get item(){return Kt(i)},unselectItem:Le},(t=>{var e=Gn(),r=ue(e),n=ue(r);Z((()=>Me(n,se(Kt(i)))));var s=he(r,2),o=P((()=>Le(Kt(i))));me("click",s,wi((function(...t){Kt(o)?.apply(this,t)}))),me("keypress",s,wi((t=>{"Enter"==t.key&&Le(Kt(i))}))),_e(t,e)})),Z((()=>si(n,"is-active",Kt(Ge)===Kt(r)))),function(t,e,i){var r,n,s,o=We,a=null;o.a??={element:t,measure(){r=this.element.getBoundingClientRect()},apply(){if(s?.abort(),n=this.element.getBoundingClientRect(),r.left!==n.left||r.right!==n.right||r.top!==n.top||r.bottom!==n.bottom){const t=e()(this.element,{from:r,to:n},i?.());s=fi(this.element,t,void 0,1,(()=>{s?.abort(),s=void 0}))}},fix(){if(!t.getAnimations().length){var{position:e,width:i,height:n}=getComputedStyle(t);if("absolute"!==e&&"fixed"!==e){var s=t.style;a={position:s.position,width:s.width,height:s.height,transform:s.transform},s.position="absolute",s.width=i,s.height=n;var o=t.getBoundingClientRect();if(r.left!==o.left||r.top!==o.top){var l=`translate(${r.left-o.left}px, ${r.top-o.top}px)`;s.transform=s.transform?`${s.transform} ${l}`:l}}}},unfix(){if(a){var e=t.style;e.position=a.position,e.width=a.width,e.height=a.height,e.transform=a.transform}}},o.a.element=t}(n,(()=>zn),(()=>({duration:200}))),gi(3,n,(()=>qn),(()=>({duration:200}))),me("dragstart",n,(t=>function(t,e){it()&&t.dataTransfer.setData("source",e)}(t,Kt(r)))),me("dragover",n,(t=>Qe(t,Kt(r)))),me("dragleave",n,(t=>(Kt(r),void(it()&&R(Ge,!1))))),me("drop",n,(t=>Xe(t,Kt(r)))),_e(t,n)})),_e(t,i)}));var ci=he(li,2);let ui;Oi(ci,(t=>R(Mt,t)),(()=>Kt(Mt))),je(he(ci,2),(()=>Kt(a)),(t=>{var e=Yn();Je(ue(e),st),me("click",e,qe),me("keypress",e,(t=>{"Enter"==t.key&&qe()})),_e(t,e)}));var di=he(ai,2);return Oi(di,(t=>R(Rt,t)),(()=>Kt(Rt))),je(ue(di),(()=>Kt(qt)&&Kt(qt).length>0),(t=>{var i=Zn(),r=de(i);Ye(r,e,"dropdown-header",{get nbItems(){return Kt(qt).length},get maxItemsToShowInList(){return E()}},null);var n=he(r,2);Ve(n,1,(()=>Kt(qt)),ze,((t,i,r)=>{var n=Ie();je(de(n),(()=>Kt(i)&&(E()<=0||r<E())),(t=>{var n=Qn();const s=j((()=>function(t){return!!Lt()&&(T()?Lt().includes(t):t===Lt())}(Kt(i).item)));Z((()=>si(n,"confirmed",Kt(s)))),Ye(ue(n),e,"item",{get item(){return Kt(i).item},get label(){return Kt(i).highlighted?Kt(i).highlighted:Kt(i).label}},(t=>{var e=Ie();je(de(e),(()=>Kt(i).highlighted),(t=>{var e=Ie();Je(de(e),(()=>Kt(i).highlighted)),_e(t,e)}),(t=>{var e=Ie();Je(de(e),(()=>Kt(i).label)),_e(t,e)})),_e(t,e)})),Z((()=>si(n,"selected",r===Kt(Bt)))),me("click",n,(()=>Se(Kt(i)))),me("keypress",n,(t=>{"Enter"==t.key&&Se(Kt(i))})),me("pointerenter",n,(()=>{R(Bt,r)})),_e(t,n)})),_e(t,n)})),Ye(he(n,2),e,"dropdown-footer",{get nbItems(){return Kt(qt).length},get maxItemsToShowInList(){return E()}},(t=>{var e=Ie();je(de(e),(()=>E()>0&&Kt(qt).length>E()),(t=>{var e=Ie();je(de(e),ct,(t=>{var e=Xn(),i=ue(e);Z((()=>Me(i,`...${Kt(qt).length-E()??""}\n              ${ct()??""}`))),_e(t,e)})),_e(t,e)})),_e(t,e)})),_e(t,i)}),(t=>{var i=Ie();je(de(i),(()=>Kt(jt)&&lt()),(t=>{var i=ts();Ye(ue(i),e,"loading",{get loadingText(){return lt()}},(t=>{var e=ke();Z((()=>Me(e,lt()))),_e(t,e)})),_e(t,i)}),(t=>{var i=Ie();je(de(i),x,(t=>{var i=es();Ye(ue(i),e,"create",{get createText(){return ut()}},(t=>{var e=ke();Z((()=>Me(e,ut()))),_e(t,e)})),me("click",i,ye),me("keypress",i,(t=>{"Enter"==t.key&&ye()})),_e(t,i)}),(t=>{var i=Ie();je(de(i),at,(t=>{var i=is();Ye(ue(i),e,"no-results",{get noResultsText(){return at()}},(t=>{var e=ke();Z((()=>Me(e,at()))),_e(t,e)})),_e(t,i)}),null,!0),_e(t,i)}),!0),_e(t,i)}),!0),_e(t,i)})),Z((()=>{ni(ii,`${(ht()?ht():"")??""} autocomplete select is-fullwidth ${xt??""} svelte-75ckfb`),si(ii,"hide-arrow",rt()||!c().length),si(ii,"is-multiple",T()),si(ii,"show-clear",Kt(a)),si(ii,"is-loading",ot()&&Kt(jt)),ei(oi,"name",mt()),ei(oi,"id",bt()),oi.multiple=T(),ui=function(t,e,i,r,n=!1,s=!1){var o=e||{},a="OPTION"===t.tagName;for(var l in e)l in i||(i[l]=null);i.class=i.class?i.class+" "+r:r;var c=ri(t),u=t.__attributes??={},d=[];for(const v in i){let m=i[v];if(a&&"value"===v&&null==m)t.value=t.__value="",o[v]=m;else{var h=o[v];if(m!==h){o[v]=m;var g=v[0]+v[1];if("$$"!==g)if("on"===g){const b={},y="$$"+v;let $=v.slice(2);var f=Ce($);if(Ae($)&&($=$.slice(0,-7),b.capture=!0),!f&&h){if(null!=m)continue;t.removeEventListener($,o[y],b),o[y]=null}if(null!=m)if(f)t[`__${$}`]=m,be([$]);else{function O(t){o[v].call(this,t)}e?o[y]=ve($,t,O,b):d.push([v,m,()=>o[y]=ve($,t,O,b)])}}else if("style"===v&&null!=m)t.style.cssText=m+"";else if("autofocus"===v)Ze(t,Boolean(m));else if("__value"===v||"value"===v&&null!=m)t.value=t[v]=t.__value=m;else{var p=v;n||(p=Ee(p)),null!=m||s?c.includes(p)&&(s||"string"!=typeof m)?t[p]=m:"function"!=typeof m&&ei(t,p,m):(u[v]=null,t.removeAttribute(v))}}}}return e||pt((()=>{if(t.isConnected)for(const[t,e,i]of d)o[t]===e&&i()})),o}(ci,ui,{type:"text",class:`${(gt()?gt():"")??""} ${(_t()?"":"input autocomplete-input")??""}`,id:ft()?ft():"",autocomplete:$t()?"on":Ot(),placeholder:dt(),name:vt(),disabled:It(),required:At(),title:yt(),readonly:wt()||Kt(l),tabindex:Ct(),...r},"svelte-75ckfb"),ni(di,`${(kt()?kt():"")??""} autocomplete-list ${(Kt(n)?"":"hidden")??""}\n    is-fullwidth svelte-75ckfb`)})),vi(ci,zt),me("input",ci,(function(t){St()&&console.log("onInput"),zt(t.target.value),Ft&&clearTimeout(Ft),V()?Ft=setTimeout(Te,V()):Te()})),me("focus",ci,(function(){St()&&console.log("onFocus"),_()(),Ne()})),me("blur",ci,(function(){St()&&console.log("onBlur"),et()&&De(),A()()})),me("keydown",ci,(function(t){St()&&console.log("onKeyDown");let e=t.key;"Tab"===e&&t.shiftKey&&(e="ShiftTab");const i={Tab:Kt(Pt)?De:null,ShiftTab:Kt(Pt)?De:null,ArrowDown:Oe.bind(this),ArrowUp:$e.bind(this),Escape:xe.bind(this),Backspace:T()&&Kt(s)&&!zt()?Fe.bind(this):null}[e];"function"==typeof i&&i(t)})),me("click",ci,(function(){St()&&console.log("onInputClick"),Ne()})),me("keypress",ci,(function(t){St()&&console.log("onKeyPress"),"Enter"===t.key&&function(t){Kt(Pt)&&(t.preventDefault(),ye())}(t)})),me("dragover",ci,(t=>Qe(t,Lt().length-1))),me("drop",ci,(t=>Xe(t,Lt().length-1))),_e(t,ii),function(t,e,i){var r=o(t,e);r&&r.set&&(t[e]=i,K((()=>{t[e]=null})))}(e,"highlightFilter",He),Zt({highlightFilter:He})}var ss=we("<p> </p>"),os=we('<div class="control"><!></div> <!>',1);function as(t,e,i,r,n){let s={field:e(),value:"checkbox"===t.currentTarget.type?t.currentTarget.checked:i()};return r(!0),n("change",s),!0}function ls(t,e,i,r,n){let s={field:e(),value:"checkbox"===t.currentTarget.type?t.currentTarget.checked:i()};return r(!0),n("change",s),!0}var cs=we('<input type="checkbox"> ',1),us=we('<div><label class="checkbox"><!></label></div> <!>',1);function ds(t,e,i,r,n){let s=parseInt(t.currentTarget.dataset.id),o=[...e()];o.find((t=>t.id==s)).value=t.currentTarget.checked;let a={id:s,field:i(),value:o};return r(!0),n("change",a),!0}function hs(t,e,i,r,n){let s=parseInt(t.currentTarget.dataset.id),o=[...e()];o.find((t=>t.id===s)).value=t.currentTarget.checked;let a={id:s,field:i(),value:o};return r(!0),n("change",a),!0}be(["change","input"]);var gs=we('<label class="checkbox pr-2"><input type="checkbox"> </label>'),fs=we('<div class="control"></div> <!>',1);function ps(t,e,i,r){let n={field:e(),value:t.currentTarget.value};return i(!0),r("change",n),!0}function vs(t,e,i,r){let n={field:e(),value:t.currentTarget.value};return i(!0),r("change",n),!0}be(["change","input"]);var ms=we('<span class="icon is-small is-left"><i></i></span>'),bs=we('<i class="fas fa-check"></i>'),ys=we('<i class="fas fa-exclamation-triangle"></i>'),$s=we('<span class="icon is-small is-right"><!></span>'),Os=we('<div><input type="color"> <!> <!></div> <!>',1);be(["change","input"]);var ws=we("<div><!></div>");function ks(t,e,i,r){let n={field:e(),value:t.currentTarget.value};return i(!0),r("change",n),!0}function Is(t,e,i,r){let n={field:e(),value:t.currentTarget.value};return i(!0),r("change",n),!0}var _s=we("<p><time> </time></p>"),As=we('<span class="icon is-small is-left"><i></i></span>'),Ss=we('<i class="fas fa-check"></i>'),Cs=we('<i class="fas fa-exclamation-triangle"></i>'),Ls=we('<span class="icon is-small is-right"><!></span>'),Es=we('<input type="date"> <!> <!>',1),Ts=we("<div><!></div> <!>",1);be(["change","input"]);var xs=we("<p> </p>"),Fs=we('<span class="icon is-small is-left"><i></i></span>'),Ns=we('<i class="fas fa-check"></i>'),Ms=we('<i class="fas fa-exclamation-triangle"></i>'),Rs=we('<span class="icon is-small is-right"><!></span>'),Us=we('<input type="datetime-local"> <!> <!>',1),Ds=we("<div><!></div> <!>",1);function Ps(t,e,i,r){let n={field:e(),value:t.currentTarget.value};return i(!0),r("change",n),!0}function js(t,e,i,r){let n={field:e(),value:t.currentTarget.value};return i(!0),r("change",n),!0}be(["change","input"]);var Ws=we("<p> </p>"),Bs=we('<span class="icon is-small is-left"><i></i></span>'),zs=we('<i class="fas fa-check"></i>'),Vs=we('<i class="fas fa-exclamation-triangle"></i>'),qs=we('<span class="icon is-small is-right"><!></span>'),Hs=we('<input type="email"> <!> <!>',1),Ks=we("<div><!></div> <!>",1);be(["change","input"]);var Gs=we('<input type="hidden">');var Js=we("<p> </p>"),Ys=we('<span class="icon is-small is-left"><i></i></span>'),Qs=we('<i class="fas fa-check"></i>'),Xs=we('<i class="fas fa-exclamation-triangle"></i>'),Zs=we('<span class="icon is-small is-right"><!></span>'),to=we("<textarea></textarea> <!> <!>",1),eo=we("<div><!></div> <!>",1);function io(t,e){Xt(e,!0);const i=xi();let r,n,s=Ri(),o=Ei(e,"inputStarted",15,!1),a=Ei(e,"value",15,""),l=Ei(e,"placeholder",3,""),c=Ei(e,"fieldname",3,"textarea"),u=Ei(e,"icon",3,!1),d=Ei(e,"rows",3,10),h=Ei(e,"required",3,!0),g=Ei(e,"readonly",3,!1),f=Ei(e,"disabled",3,!1),p=Ei(e,"valid",3,!0),v=Ei(e,"validated",3,!1),m=Ei(e,"errors",3,!1),b=Ei(e,"formErrors",3,!1),y=Ei(e,"formLevelError",3,!1),$=P((()=>(u()?" has-icons-left ":"")+" has-icons-right "));Fi((()=>{r=[].concat(m()?m():[],b()?b():[])})),Fi((()=>{n=!(v()&&p())&&o()}));let O,w=P((()=>!1===p()||y()));function k(t){let e={field:c(),value:"checkbox"===t.target.type?t.target.checked:t.target.value};return o(!0),s("change",e),!0}Fi((()=>{O=!0!==p()&&o()?Kr.CLASS_ERR:Kr.CLASS_OK}));var I=eo(),_=de(I);je(ue(_),g,(t=>{var e=Js(),i=ue(e);Z((()=>Me(i,a()))),_e(t,e)}),(t=>{var e=to(),r=de(e);ni(r,`textarea ${O??""}`);var n=he(r,2);je(n,u,(t=>{var e=Ys(),i=ue(e);Z((()=>ni(i,`fas fa-${u()??""}`))),_e(t,e)})),je(he(n,2),(()=>!0===v()),(t=>{var e=Zs();je(ue(e),(()=>!0===p()),(t=>{_e(t,Qs())}),(t=>{var e=Ie();je(de(e),(()=>!1===p()),(t=>{_e(t,Xs())}),null,!0),_e(t,e)})),_e(t,e)})),Z((()=>{ei(r,"id",`form-field-textarea-${c()??""}`),ei(r,"invalid",Kt(w)),r.disabled=f(),r.required=h(),r.readOnly=g(),ei(r,"name",c()),ei(r,"placeholder",Ti(Xi,"$LOCALE",i)[l()]),ei(r,"rows",d()),ei(r,"aria-controls",`input-field-helper-${c()??""}`),ei(r,"aria-describedby",`input-field-helper-${c()??""}`)})),me("blur",r,k),vi(r,a),_e(t,e)})),Hr(he(_,2),{get errors(){return r},set errors(t){r=t},get show(){return n},set show(t){n=t},get classes(){return O},set classes(t){O=t},get id(){return`input-field-helper-${c()??""}`}}),Z((()=>ni(_,`control ${Kt($)??""}`))),_e(t,I),Zt()}var ro=we('<label class="label"> </label>');function no(t,e){Xt(e,!0);const i=xi();let r=Ei(e,"label",3,"label");var n=ro(),s=ue(n);Z((()=>{ei(n,"for",e.id),Me(s,Ti(Xi,"$LOCALE",i)[r()])})),_e(t,n),Zt()}var so=new WeakMap;class oo{constructor(t){hr(this,so,{}),t instanceof oo&&this.import(t.getContent())}add(t,e,i="replace"){this.contains(t)?"replace"===i?dr(so,this)[t]=e:"add"===i&&(dr(so,this)[t]=Object.assign(dr(so,this)[t],e)):dr(so,this)[t]=e}get(t){return dr(so,this)[t]}contains(t){return Object.hasOwn(dr(so,this),t)}import(t,e="replace"){for(let i in t)this.add(i,t[i],e)}isEmpty(){return 0===Object.keys(dr(so,this)).length}getContent(){return{...dr(so,this)}}}const ao=new oo,lo=new oo,co=new oo;function uo(t){Sn(t,{title:"not-node:empty_list_placeholder",size:4,align:"center"})}var ho=we('<span class="icon"><i></i></span>'),go=we("<span> </span>"),fo=we('<span class="icon"><i></i></span>'),po=we("<!> <!> <!> <!>",1),vo=we(" <!>",1),mo=we("<a><!></a>");function bo(t,e){Xt(e,!0);const i=xi(),r=()=>Ti(Xi,"$LOCALE",i);let n=Ei(e,"title",3,""),s=Ei(e,"url",3,""),o=Ei(e,"target",3,"_blank"),a=Ei(e,"light",3,!1),l=Ei(e,"loading",3,!1),c=Ei(e,"raised",3,!1),u=Ei(e,"outlined",3,!1),d=Ei(e,"inverted",3,!1),g=Ei(e,"rounded",3,!1),f=Ei(e,"button",3,!0),p=Ei(e,"state",3,""),v=Ei(e,"type",3,""),m=Ei(e,"color",3,""),b=Ei(e,"size",3,""),y=Ei(e,"classes",15,""),$=Ei(e,"icon",3,!1),O=Ei(e,"iconSide",3,"right"),w=Ei(e,"action",3,(()=>!0));Fi((()=>{y((f()?"button ":"")+(p()&&p().length>0?` is-${p()} `:"")+(a()?" is-light ":"")+(v()&&v().length>0?` is-${v()} `:"")+(b()&&b().length>0?` is-${b()} `:""))}));var k=mo();k.__click=function(...t){w()?.apply(this,t)},je(ue(k),$,(t=>{var i=po(),s=de(i);je(s,(()=>"left"===O()),(t=>{var e=ho(),i=ue(e);Z((()=>ni(i,`fas fa-${$()??""} ${(b()?`is-${b()}`:"")??""}`))),_e(t,e)}));var o=he(s,2);je(o,n,(t=>{var e=go(),i=ue(e);Z((()=>Me(i,r()[n()]))),_e(t,e)}));var a=he(o,2);Qe(a,(()=>e.children??h)),je(he(a,2),(()=>"right"===O()),(t=>{var e=fo(),i=ue(e);Z((()=>ni(i,`fas fa-${$()??""} ${(b()?`is-${b()}`:"")??""}`))),_e(t,e)})),_e(t,i)}),(t=>{var i=vo(),s=de(i);Qe(he(s),(()=>e.children??h)),Z((()=>Me(s,`${r()[n()]??""} `))),_e(t,i)})),Z((()=>{ei(k,"target",o()),ei(k,"href",s()),ei(k,"download",e.download),ei(k,"rel",e.rel),ni(k,`${y()??""} ${(p()?`is-${p()}`:"")??""} ${(d()?"is-inverted":"")??""} ${(u()?"is-outlined":"")??""} ${(c()?"is-raised":"")??""} ${(g()?"is-rounded":"")??""} ${(a()?"is-light":"")??""} ${(l()?"is-loading":"")??""} ${(m()?`is-${m()}`:"")??""} ${(v()?`is-${v()}`:"")??""} ${(b()?`is-${b()}`:"")??""}`)})),_e(t,k),Zt()}be(["click"]);var yo=we('<div><p class="control"></p></div>'),$o=we("<div></div>");function Oo(t,e){let i=Ei(e,"values",19,(()=>[])),r=Ei(e,"classes",3,""),n=Ei(e,"centered",3,!1),s=Ei(e,"right",3,!1),o=Ei(e,"joined",3,!0);var a=Ie();je(de(a),o,(t=>{var e=yo();Ve(ue(e),21,i,(t=>t.id),((t,e)=>{bo(t,Ci((()=>Kt(e))))})),Z((()=>ni(e,`field has-addons ${(n()?"is-centered":"")??""} ${(s()?"is-right":"")??""} ${r()??""}`))),_e(t,e)}),(t=>{var e=$o();Ve(e,21,i,(t=>t.id),((t,e)=>{bo(t,Ci((()=>Kt(e))))})),Z((()=>ni(e,`buttons ${(n()?"is-centered":"")??""} ${(s()?"is-right":"")??""} ${r()??""}`))),_e(t,e)})),_e(t,a)}var wo=(t,e)=>{t&&"Enter"==t.key&&e()},ko=we('<figure class="image is-64x64"><img class="is-rounded"></figure>'),Io=we('<div role="button" tabindex="0" class="list-item-image"><!></div>'),_o=we('<div class="list-item-title" role="button" tabindex="0"><!></div>'),Ao=we('<div role="button" tabindex="0" class="list-item-description"><!></div>'),So=we('<div class="list-item-controls"><!> <!></div>'),Co=we('<div role="button" tabindex="0"><!> <div role="button" tabindex="0" class="list-item-content"><!> <!></div> <!></div>');function Lo(t,e){Xt(e,!0);const i=Ri();let r=Ei(e,"actions",19,(()=>[])),n=Ei(e,"links",19,(()=>[])),s=Ei(e,"listActions",19,(()=>[])),o=Ei(e,"listLinks",19,(()=>[])),a=Ei(e,"classes",3,""),l=Ei(e,"commonClasses",3,""),c=Ei(e,"image",3,""),u=Ei(e,"index",19,(()=>-1)),d=Ei(e,"first",3,!1),h=Ei(e,"last",3,!1),g=Ei(e,"titleComponent",3,Sn),f=Ei(e,"titleComponentProps",19,(()=>({size:6}))),p=Ei(e,"descriptionComponentProps",19,(()=>({}))),v=Ei(e,"imageComponentProps",19,(()=>({})));function m(){i("click",e.value)}let b=T(ie([]));Fi((()=>{R(b,ie([...r(),...s()].map((t=>({...t,action:()=>t.action(e.value)})))))}));let y=T(ie([]));Fi((()=>{R(y,ie([...n(),...o()]))}));var $=Co();$.__click=m,$.__keyup=[wo,m];var O=ue($);je(O,c,(t=>{var r=Io(),n=P((()=>wi((t=>{t&&"Enter"==t.key&&(m(),i("clickImage",e.value))}))));r.__keyup=function(...t){Kt(n)?.apply(this,t)};var s=P((()=>wi((()=>{m(),i("clickImage",e.value)}))));r.__click=function(...t){Kt(s)?.apply(this,t)},je(ue(r),(()=>e.imageComponent),(t=>{var i=Ie();je(de(i),(()=>"string"==typeof c()),(t=>{var i=Ie();const r=P((()=>e.imageComponent));Xe(de(i),(()=>Kt(r)),((t,e)=>{e(t,Ci({get value(){return c()}},v))})),_e(t,i)}),(t=>{var i=Ie();const r=P((()=>e.imageComponent));Xe(de(i),(()=>Kt(r)),((t,e)=>{e(t,Ci(c,v))})),_e(t,i)})),_e(t,i)}),(t=>{var i=ko(),r=ue(i);Z((()=>{ei(r,"src",c()),ei(r,"alt",e.title)})),_e(t,i)})),_e(t,r)}));var w=he(O,2),k=P((()=>wi((()=>{m(),i("clickContent",e.value)}))));w.__click=function(...t){Kt(k)?.apply(this,t)};var I=P((()=>wi((t=>{t&&"Enter"==t.key&&(m(),i("clickContent",e.value))}))));w.__keyup=function(...t){Kt(I)?.apply(this,t)};var _=ue(w);je(_,(()=>e.title),(t=>{var r=_o(),n=P((()=>wi((t=>{t&&"Enter"==t.key&&(m(),i("clickTitle",e.value))}))));r.__keyup=function(...t){Kt(n)?.apply(this,t)};var s=P((()=>wi((()=>{m(),i("clickTitle",e.value)}))));r.__click=function(...t){Kt(s)?.apply(this,t)},je(ue(r),g,(t=>{var i=Ie();je(de(i),(()=>"string"==typeof e.title),(t=>{var i=Ie();const r=P(g);Xe(de(i),(()=>Kt(r)),((t,i)=>{i(t,Ci({get title(){return e.title}},f,{$$events:{change(t){Ii.call(this,e,t)}}}))})),_e(t,i)}),(t=>{var i=Ie();const r=P(g);Xe(de(i),(()=>Kt(r)),((t,i)=>{i(t,Ci((()=>e.title),f,{$$events:{change(t){Ii.call(this,e,t)}}}))})),_e(t,i)})),_e(t,i)}),(t=>{var i=ke();Z((()=>Me(i,e.title))),_e(t,i)})),_e(t,r)})),je(he(_,2),(()=>e.description),(t=>{var r=Ao(),n=P((()=>wi((t=>{t&&"Enter"==t.key&&(m(),i("clickDescription",e.value))}))));r.__keyup=function(...t){Kt(n)?.apply(this,t)};var s=P((()=>wi((()=>{m(),i("clickDescription",e.value)}))));r.__click=function(...t){Kt(s)?.apply(this,t)},je(ue(r),(()=>e.descriptionComponent),(t=>{var i=Ie();je(de(i),(()=>"string"==typeof e.description),(t=>{var i=Ie();const r=P((()=>e.descriptionComponent));Xe(de(i),(()=>Kt(r)),((t,i)=>{i(t,Ci({get value(){return e.description}},p,{$$events:{change(t){Ii.call(this,e,t)},click(t){Ii.call(this,e,t)}}}))})),_e(t,i)}),(t=>{var i=Ie();const r=P((()=>e.descriptionComponent));Xe(de(i),(()=>Kt(r)),((t,i)=>{i(t,Ci((()=>e.description),p,{$$events:{change(t){Ii.call(this,e,t)},click(t){Ii.call(this,e,t)}}}))})),_e(t,i)})),_e(t,i)}),(t=>{var i=ke();Z((()=>Me(i,e.description))),_e(t,i)})),_e(t,r)})),je(he(w,2),(()=>Kt(b)&&Kt(b).length||Kt(y)&&Kt(y).length),(t=>{var e=So(),i=ue(e);je(i,(()=>Kt(b)&&Kt(b).length),(t=>{hn(t,{get values(){return Kt(b)},right:!0})})),je(he(i,2),(()=>Kt(y)&&Kt(y).length),(t=>{Oo(t,{get values(){return Kt(y)},right:!0})})),_e(t,e)})),Z((()=>ni($,`list-item ${a()??""} ${l()??""} ${(h()?"list-item-last":"")??""} ${(d()?"list-item-first":"")??""}  ${`list-item-at-${u()}`??""} ${"list-item-"+(u()%2?"odd":"even")??""}`))),_e(t,$),Zt()}be(["click","keyup"]);var Eo=we("<div><!></div>");function To(t,e){Xt(e,!0);let i=Ei(e,"classes",3,""),r=Ei(e,"items",31,(()=>ie([]))),n=Ei(e,"actions",19,(()=>[])),s=Ei(e,"links",19,(()=>[])),o=Ei(e,"actionsVisible",3,!1),a=Ei(e,"itemsHoverable",3,!1),l=Ei(e,"overflowEllipsis",3,!1),c=Ei(e,"hiddenImages",3,!1),u=Ei(e,"itemClasses",3,""),d=Ei(e,"idFieldName",3,"id"),h=Ei(e,"emptyListPlaceholderComponent",3,uo),g=Ei(e,"emptyListPlaceholderComponentProps",19,(()=>({}))),f=Ei(e,"listItemComponent",3,Lo),p=Ei(e,"listItemComponentProps",19,(()=>({}))),v=Ei(e,"titleComponent",3,Sn),m=Ei(e,"titleComponentProps",19,(()=>({size:6}))),b=Ei(e,"descriptionComponentProps",19,(()=>({}))),y=Ei(e,"imageComponentProps",19,(()=>({})));var $=Ie();je(de($),(()=>r().length),(t=>{var h=Eo();!function(t,e){Xt(e,!0);let i=Ei(e,"idFieldName",3,"id"),r=Ei(e,"items",23,(()=>[])),n=Ei(e,"actions",19,(()=>[])),s=Ei(e,"links",19,(()=>[])),o=Ei(e,"itemClasses",3,""),a=Ei(e,"listItemComponent",3,Lo),l=Ei(e,"listItemComponentProps",19,(()=>({}))),c=Ei(e,"titleComponent",3,Sn),u=Ei(e,"titleComponentProps",19,(()=>({size:6}))),d=Ei(e,"descriptionComponentProps",19,(()=>({}))),h=Ei(e,"imageComponentProps",19,(()=>({})));var g=Ie();je(de(g),r,(t=>{var g=Ie();const f=P(a);Ve(de(g),19,r,(t=>t[i()]),((t,i,a)=>{var g=Ie(),p=de(g),v=P((()=>0===Kt(a))),m=P((()=>Kt(a)===r().length-1));Xe(p,(()=>Kt(f)),((t,g)=>{g(t,Ci(l,{get titleComponent(){return c()},get titleComponentProps(){return u()},get descriptionComponent(){return e.descriptionComponent},get descriptionComponentProps(){return d()},get imageComponent(){return e.imageComponent},get imageComponentProps(){return h()}},(()=>Kt(i)),{get listActions(){return n()},get listLinks(){return s()},get commonClasses(){return o()},get value(){return r()[Kt(a)]},set value(t){r()[Kt(a)]=t},get index(){return Kt(a)},get first(){return Kt(v)},get last(){return Kt(m)},$$events:{click(t){Ii.call(this,e,t)},clickContent(t){Ii.call(this,e,t)},clickDescription(t){Ii.call(this,e,t)},clickImage(t){Ii.call(this,e,t)},clickTitle(t){Ii.call(this,e,t)}}}))})),_e(t,g)})),_e(t,g)})),_e(t,g),Zt()}(ue(h),{get items(){return r()},set items(t){r(t)},get itemClasses(){return u()},get listItemComponent(){return f()},get listItemComponentProps(){return p()},get idFieldName(){return d()},get titleComponent(){return v()},get titleComponentProps(){return m()},get descriptionComponent(){return e.descriptionComponent},get descriptionComponentProps(){return b()},get imageComponent(){return e.imageComponent},get imageComponentProps(){return y()},get actions(){return n()},get links(){return s()},$$events:{change(t){Ii.call(this,e,t)},click(t){Ii.call(this,e,t)},clickContent(t){Ii.call(this,e,t)},clickDescription(t){Ii.call(this,e,t)},clickImage(t){Ii.call(this,e,t)},clickTitle(t){Ii.call(this,e,t)}}}),Z((()=>{ei(h,"style",e.itemLength?`--length: ${e.itemLength};`:""),ni(h,`list ${i()??""} ${(o()?"has-visible-pointer-controls":"")??""} ${(a()?"has-hoverable-list-items":"")??""} ${(l()?"has-overflow-ellipsis":"")??""} ${(c()?"has-hidden-images":"")??""}`)})),_e(t,h)}),(t=>{var e=Ie();const i=P(h);Xe(de(e),(()=>Kt(i)),((t,e)=>{e(t,Ci(g))})),_e(t,e)})),_e(t,$),Zt()}var xo=we("<!> <!>",1);var Fo=we('<div role="button" tabindex="0"><!></div>');function No(t,e){Xt(e,!0);const i=Ni();let r=Ei(e,"classes",3,""),n=Ei(e,"title",3,""),s=Ei(e,"narrow",3,!1);var o=Fo(),a=P((()=>i("click")));o.__click=function(...t){Kt(a)?.apply(this,t)};var l=P((()=>i("keyup")));o.__keyup=function(...t){Kt(l)?.apply(this,t)},Qe(ue(o),(()=>e.children??h)),Z((()=>{ei(o,"title",n()),ni(o,`column ${r()??""} ${(s()?"is-narrow":"")??""}`)})),_e(t,o),Zt()}be(["click","keyup"]);var Mo=we('<div role="button" tabindex="0"><!></div>');function Ro(t,e){Xt(e,!0);const i=Ni();let r=Ei(e,"classes",3,"");var n=Mo(),s=P((()=>i("click")));n.__click=function(...t){Kt(s)?.apply(this,t)};var o=P((()=>i("keyup")));n.__keyup=function(...t){Kt(o)?.apply(this,t)},Qe(ue(n),(()=>e.children??h)),Z((()=>ni(n,`columns ${r()??""}`))),_e(t,n),Zt()}be(["click","keyup"]);var Uo=we('<div role="button" tabindex="0"><!></div>');function Do(t,e){Xt(e,!0);const i=Ni();let r=Ei(e,"id",3,""),n=Ei(e,"classes",3,""),s=Ei(e,"widescreen",3,!1),o=Ei(e,"fullhd",3,!1),a=Ei(e,"maxDesktop",3,!1),l=Ei(e,"maxWidescreen",3,!1),c=Ei(e,"fluid",3,!1);var u=Uo(),d=P((()=>i("click")));u.__click=function(...t){Kt(d)?.apply(this,t)};var g=P((()=>i("keyup")));u.__keyup=function(...t){Kt(g)?.apply(this,t)},Qe(ue(u),(()=>e.children??h)),Z((()=>{ei(u,"id",r()),ni(u,`container ${n()??""}`),si(u,"is-widescreen",s()),si(u,"is-fullhd",o()),si(u,"is-max-desktop",a()),si(u,"is-max-widescreen",l()),si(u,"is-fluid",c())})),_e(t,u),Zt()}be(["click","keyup"]);var Po=we("<footer><!></footer>");var jo=we('<section role="button"><!></section>');be(["click","keyup"]);var Wo=we('<nav class="level"><div class="level-left"><!></div> <div class="level-right"><!></div></nav>');var Bo=Object.freeze({__proto__:null,UIColumn:No,UIColumns:Ro,UIContainer:Do,UIFooter:function(t,e){Xt(e,!0);let i=Ei(e,"id",3,""),r=Ei(e,"classes",3,"");var n=Po();Qe(ue(n),(()=>e.children??h)),Z((()=>{ei(n,"id",i()),ni(n,`footer  ${r()??""} `)})),_e(t,n),Zt()},UILevel:function(t,e){Xt(e,!0);var i=Wo(),r=ue(i);Qe(ue(r),(()=>e.left??h)),Qe(ue(he(r,2)),(()=>e.right??h)),_e(t,i),Zt()},UILevelItem:function(t,e){Xt(e,!0);let i=Ei(e,"tag",3,"div");var r=Ie();!function(t,e,i,r){var n,s,o,a=null,l=t,c=We;tt((()=>{const t=e()||null;var i="svg"===t?"http://www.w3.org/2000/svg":null;if(t!==n){var u=We;Be(c),o&&(null===t?at(o,(()=>{o=null,s=null})):t===s?ut(o):(st(o),Ne(!1))),t&&t!==s&&(o=et((()=>{if(Oe(a=i?document.createElementNS(i,t):document.createElement(t),a),r){var e=a.appendChild(ae());r(a,e)}At.nodes_end=a,l.before(a)}))),(n=t)&&(s=n),Ne(!0),Be(u)}}),k)}(de(r),i,0,((t,i)=>{var r=Ie();je(de(r),(()=>e.children),(t=>{var i=Ie();Qe(de(i),(()=>e.children)),_e(t,i)}),(t=>{})),_e(i,r)})),_e(t,r),Zt()},UISection:function(t,e){Xt(e,!0);const i=Ni();let r=Ei(e,"id",3,""),n=Ei(e,"classes",3,""),s=Ei(e,"tabindex",3,0);var o=jo(),a=P((()=>i("click")));o.__click=function(...t){Kt(a)?.apply(this,t)};var l=P((()=>i("keyup")));o.__keyup=function(...t){Kt(l)?.apply(this,t)},Qe(ue(o),(()=>e.children??h)),Z((()=>{ei(o,"id",r()),ni(o,`section ${(e.size?"is-"+e.size:"")??""}  ${n()??""}`),ei(o,"tabindex",s())})),_e(t,o),Zt()}});function zo(t,e,i,r,n){let s={field:e(),value:i()};return r(!0),n("change",s),!0}function Vo(t,e,i,r){let n={field:e(),value:t.currentTarget.value};return i(!0),r("change",n),!0}var qo=we("<p> </p>"),Ho=we('<span class="icon is-small is-left"><i></i></span>'),Ko=we('<i class="fas fa-check"></i>'),Go=we('<i class="fas fa-exclamation-triangle"></i>'),Jo=we('<span class="icon is-small is-right"><!></span>'),Yo=we('<input type="number"> <!> <!>',1),Qo=we("<div><!></div> <!>",1);function Xo(t,e){Xt(e,!0);const i=xi();let r,n,s=Ri(),o=Ei(e,"inputStarted",15,!1),a=Ei(e,"value",15,0),l=Ei(e,"placeholder",3,"0.0"),c=Ei(e,"min",3,0),u=Ei(e,"max",3,100),d=Ei(e,"step",3,1),h=Ei(e,"fieldname",3,"number"),g=Ei(e,"icon",3,!1),f=Ei(e,"required",3,!0),p=Ei(e,"disabled",3,!1),v=Ei(e,"readonly",3,!1),m=Ei(e,"valid",3,!0),b=Ei(e,"validated",3,!1),y=Ei(e,"errors",3,!1),$=Ei(e,"formErrors",3,!1),O=Ei(e,"formLevelError",3,!1),w=P((()=>(g()?" has-icons-left ":"")+" has-icons-right "));Fi((()=>{r=[].concat(y()?y():[],$()?$():[])})),Fi((()=>{n=!(b()&&m())&&o()}));let k,I=P((()=>!1===m()||O()));Fi((()=>{k=!0!==m()&&o()?Kr.CLASS_ERR:Kr.CLASS_OK}));var _=Qo(),A=de(_);je(ue(A),v,(t=>{var e=qo(),i=ue(e);Z((()=>Me(i,a()))),_e(t,e)}),(t=>{var e=Yo(),r=de(e);ni(r,`input ${k??""}`),r.__change=[zo,h,a,o,s],r.__input=[Vo,h,o,s];var n=he(r,2);je(n,g,(t=>{var e=Ho(),i=ue(e);Z((()=>ni(i,`fas fa-${g()??""}`))),_e(t,e)})),je(he(n,2),(()=>!0===b()),(t=>{var e=Jo();je(ue(e),(()=>!0===m()),(t=>{_e(t,Ko())}),(t=>{var e=Ie();je(de(e),(()=>!1===m()),(t=>{_e(t,Go())}),null,!0),_e(t,e)})),_e(t,e)})),Z((()=>{ei(r,"id",`form-field-textfield-${h()??""}`),ei(r,"min",c()),ei(r,"max",u()),ei(r,"step",d()),ei(r,"name",h()),ei(r,"invalid",Kt(I)),r.disabled=p(),r.required=f(),r.readOnly=v(),ei(r,"placeholder",Ti(Xi,"$LOCALE",i)[l()]),ei(r,"autocomplete",h()),ei(r,"aria-controls",`input-field-helper-${h()??""}`),ei(r,"aria-describedby",`input-field-helper-${h()??""}`)})),vi(r,a),_e(t,e)})),Hr(he(A,2),{get errors(){return r},set errors(t){r=t},get show(){return n},set show(t){n=t},get classes(){return k},set classes(t){k=t},get id(){return`input-field-helper-${h()??""}`}}),Z((()=>ni(A,`control ${Kt(w)??""}`))),_e(t,_),Zt()}be(["change","input"]);var Zo=we("<!> <!> <!>",1),ta=we("<!> <!> <!>",1),ea=we("<!> <!> <!> <!>",1);function ia(t,e,i,r){let n={field:e(),value:t.currentTarget.value};return i(!0),r("change",n),!0}function ra(t,e,i,r){let n={field:e(),value:t.currentTarget.value};return i(!0),r("change",n),!0}var na=we('<span class="icon is-small is-left"><i></i></span>'),sa=we('<i class="fas fa-check"></i>'),oa=we('<i class="fas fa-exclamation-triangle"></i>'),aa=we('<span class="icon is-small is-right"><!></span>'),la=we('<div><input type="password"> <!> <!></div> <!>',1);be(["change","input"]);var ca=we("<a><figure><img></figure></a>"),ua=we('<figure role="button" tabindex="0"><img></figure>');function da(t,e){Xt(e,!0);const i=Ni();let r=Ei(e,"cors",3,"anonymous"),n=Ei(e,"size",3,64),s=Ei(e,"contained",3,!0),o=Ei(e,"covered",3,!0),a=Ei(e,"classes",3,""),l=P((()=>isNaN(n())?`is-${n()}`:`is-${n()}x${n()}`)),c=P((()=>s()?"is-contained":"")),u=P((()=>o()?"is-covered":""));var d=Ie();je(de(d),(()=>e.urlFull),(t=>{var n=ca(),s=P((()=>i("click")));n.__click=function(...t){Kt(s)?.apply(this,t)};var o=ue(n),d=ue(o);Z((()=>{ei(n,"href",e.urlFull),ei(n,"alt",e.title),ni(o,`image ${Kt(l)??""} ${Kt(c)??""} ${Kt(u)??""} ${a()??""}`),ei(d,"alt",e.title),ei(d,"src",e.url),ei(d,"crossorigin",r())})),_e(t,n)}),(t=>{var n=ua(),s=P((()=>i("click")));n.__click=function(...t){Kt(s)?.apply(this,t)};var o=P((()=>i("keyup")));n.__keyup=function(...t){Kt(o)?.apply(this,t)};var d=ue(n);Z((()=>{ni(n,`image ${Kt(l)??""} ${Kt(c)??""} ${Kt(u)??""} ${a()??""}`),ei(d,"alt",e.title),ei(d,"src",e.url),ei(d,"crossorigin",r())})),_e(t,n)})),_e(t,d),Zt()}function ha(t,e,i,r,n){let s={field:e(),value:i()};return r(!0),n("change",s),!0}function ga(t,e,i,r){let n={field:e(),value:t.currentTarget.value};return i(!0),r("change",n),!0}be(["click","keyup"]);var fa=we("<p> </p>"),pa=we("<option></option>"),va=we("<datalist></datalist>"),ma=we('<span class="icon is-small is-left"><i></i></span>'),ba=we('<input type="range"> <output> </output> <!> <!>',1),ya=we("<div><!></div> <!>",1);function $a(t,e,i,r,n,s){i(e(t.currentTarget.value));let o={field:r(),value:i()};return n(!0),s("change",o),!0}function Oa(t,e,i,r,n,s){i(e(Math.round(parseInt(t.currentTarget.value))));let o={field:r(),value:i()};return n(!0),s("change",o),!0}be(["change","input"]);var wa=we("<p> </p>"),ka=we("<option></option>"),Ia=we("<datalist></datalist>"),_a=we('<span class="icon is-small is-left"><i></i></span>'),Aa=we('<input type="range"> <output editable="true"> </output> <!> <!>',1),Sa=we("<div><!></div> <!>",1);function Ca(t,e,i,r,n){let s={field:e(),value:"checkbox"===t.currentTarget.type?t.currentTarget.checked:i()};return r(!0),n("change",s),!0}be(["change","input"]);var La=we('<!> <input type="checkbox"> <label class="label"><!></label>',1),Ea=we('<div class="control"><!></div> <!>',1);function Ta(t,e,i,r,n,s,o){console.log("switch list element input",t);const a=t.target.id.split("-variant-").at(-1);console.log(a),t.target.checked?e(a):i(a);let l={field:r(),value:n()};return s(!0),o("change",l),!0}be(["input"]);var xa=we('<div class="switch-list-item"><input type="checkbox"> <label class="label"> </label></div>'),Fa=we('<div class="control"><!></div> <!>',1);function Na(t,e,i){t&&t.preventDefault();let r=t.currentTarget.dataset.id;return e().includes(r)&&(e().splice(e().indexOf(r),1),e(e()),i()),!1}function Ma(t,e,i,r,n,s){t&&t.preventDefault();let o=t.currentTarget.parentNode.querySelector("select").value;const a=e(o);return!!a&&(!!i()(a,r())&&(o&&-1===n().indexOf(o)&&(n().push(o),n(n()),s()),!1))}be(["input"]);var Ra=we('<button class="delete is-small"></button>'),Ua=we("<span> <!></span>"),Da=we("<option> </option>"),Pa=we('<div class="column"><div class="control"><div class="select is-small"><select><option selected> </option><!></select></div> <button class="button is-primary is-small"> </button></div></div>'),ja=we('<div class="control columns"><div></div> <!></div> <!>',1);function Wa(t,e,i,r,n){t.preventDefault();let s=Kr.formatPhone(t.currentTarget.value),o={field:e(),value:s};return i(s),r(!0),n("change",o),!1}function Ba(t,e,i,r,n){t.preventDefault();let s=Kr.formatPhone(t.currentTarget.value),o={field:e(),value:s};return i(s),r(!0),n("change",o),!1}be(["click"]);var za=we("<p> </p>"),Va=we('<span class="icon is-small is-left"><i></i></span>'),qa=we('<i class="fas fa-check"></i>'),Ha=we('<i class="fas fa-exclamation-triangle"></i>'),Ka=we('<span class="icon is-small is-right"><!></span>'),Ga=we('<input type="tel"> <!> <!>',1),Ja=we("<div><!></div> <!>",1);be(["change","input"]);var Ya=Object.freeze({__proto__:null,UIAutocomplete:function(t,e){Xt(e,!0);const i=xi();let r=Ri(),n=Ei(e,"idField",3,"_id"),s=Ei(e,"labelField",3,"title"),o=Ei(e,"minCharactersToSearch",3,3),a=Ei(e,"selectFirstIfEmpty",3,!1),l=Ei(e,"maxItemsToShowInList",3,20),c=Ei(e,"noResultsText",3,"Ничего не найдено"),u=Ei(e,"showClear",3,!0),d=Ei(e,"value",15),h=Ei(e,"placeholder",3,""),g=Ei(e,"fieldname",3,"checkbox-list"),f=Ei(e,"disabled",3,!1),p=Ei(e,"readonly",3,!1),v=Ei(e,"icon",3,!1),m=Ei(e,"inputStarted",15,!1),b=Ei(e,"valid",3,!0),y=Ei(e,"validated",3,!1),$=Ei(e,"errors",3,!1),O=Ei(e,"formErrors",3,!1);Ei(e,"formLevelError",3,!1);let w,k,I,_=Ei(e,"searchFunction",3,(()=>[]));function A(){let t={field:g(),value:d()};return m(!0),r("change",t),!0}Fi((()=>{w=[].concat($()?$():[],O()?O():[])})),Fi((()=>{k=!(y()&&b())&&m()})),Fi((()=>{I=!0!==b()&&m()?Kr.CLASS_ERR:Kr.CLASS_OK}));var S=Ie();je(de(S),p,(t=>{var e=P((()=>d()?d().title:""));Dn(t,{get value(){return Kt(e)},get fieldname(){return g()},get placeholder(){return h()},get icon(){return v()}})}),(t=>{var e=os(),r=de(e);je(ue(r),p,(t=>{var e=ss(),r=ue(e);Z((()=>Me(r,Ti(Xi,"$LOCALE",i)[d()]))),_e(t,e)}),(t=>{ns(t,{get showClear(){return u()},get disabled(){return f()},get placeholder(){return h()},get noResultsText(){return c()},onChange:A,get searchFunction(){return _()},hideArrow:!0,get labelFieldName(){return s()},get valueFieldName(){return n()},get minCharactersToSearch(){return o()},get selectFirstIfEmpty(){return a()},get maxItemsToShowInList(){return l()},get selectedItem(){return d()},set selectedItem(t){d(t)}})})),Hr(he(r,2),{get errors(){return w},set errors(t){w=t},get show(){return k},set show(t){k=t},get classes(){return I},set classes(t){I=t},get id(){return`input-field-helper-${g()??""}`}}),_e(t,e)})),_e(t,S),Zt()},UICheckbox:function(t,e){Xt(e,!0);const i=xi(),r=()=>Ti(Xi,"$LOCALE",i);let n,s,o=Ri(),a=Ei(e,"inputStarted",15,!1),l=Ei(e,"value",15,!1),c=Ei(e,"label",3,"checkbox"),u=Ei(e,"placeholder",3,""),d=Ei(e,"fieldname",3,"checkbox"),h=Ei(e,"icon",3,!1),g=Ei(e,"required",3,!0),f=Ei(e,"readonly",3,!1),p=Ei(e,"disabled",3,!1),v=Ei(e,"valid",3,!0),m=Ei(e,"validated",3,!1),b=Ei(e,"errors",3,!1),y=Ei(e,"formErrors",3,!1),$=Ei(e,"formLevelError",3,!1),O=P((()=>(h()?" has-icons-left ":"")+" has-icons-right "));Fi((()=>{n=[].concat(b()?b():[],y()?y():[])})),Fi((()=>{s=!(m()&&v())&&a()}));let w,k=P((()=>!1===v()||$()));Fi((()=>{w=!0!==v()&&a()?Kr.CLASS_ERR:Kr.CLASS_OK}));var I=us(),_=de(I),A=ue(_);je(ue(A),f,(t=>{var e=P((()=>[{value:l()}]));xr(t,{get LC_TRUE(){return c()},get LC_FALSE(){return c()},get values(){return Kt(e)}})}),(t=>{var e=cs(),i=de(e);i.__change=[as,d,l,a,o],i.__input=[ls,d,l,a,o];var n=he(i);Z((()=>{ei(i,"id",`form-field-checkbox-${d()??""}`),ei(i,"placeholder",r()[u()]),ei(i,"name",d()),i.required=g(),i.readOnly=f(),ei(i,"invalid",Kt(k)),ei(i,"aria-controls",`input-field-helper-${d()??""}`),ei(i,"aria-describedby",`input-field-helper-${d()??""}`),i.disabled=p(),Me(n,` ${r()[c()]??""}`)})),mi(i,l),_e(t,e)})),Hr(he(_,2),{get errors(){return n},set errors(t){n=t},get show(){return s},set show(t){s=t},get classes(){return w},set classes(t){w=t},get id(){return`input-field-helper-${d()??""}`}}),Z((()=>{ni(_,`control ${Kt(O)??""}`),A.disabled=p(),ei(A,"for",`form-field-checkbox-${d()??""}`)})),_e(t,I),Zt()},UICheckboxList:function(t,e){Xt(e,!0);const i=xi();let r,n,s=Ri(),o=Ei(e,"inputStarted",15,!1),a=Ei(e,"value",19,(()=>[])),l=Ei(e,"fieldname",3,"checkbox-list"),c=Ei(e,"readonly",3,!1),u=Ei(e,"disabled",3,!1),d=Ei(e,"valid",3,!0),h=Ei(e,"validated",3,!1),g=Ei(e,"errors",3,!1),f=Ei(e,"formErrors",3,!1),p=Ei(e,"formLevelError",3,!1);Fi((()=>{r=[].concat(g()?g():[],f()?f():[])})),Fi((()=>{n=!(h()&&d())&&o()}));let v,m=P((()=>!1===d()||p()));Fi((()=>{v=!0!==d()&&o()?Kr.CLASS_ERR:Kr.CLASS_OK}));var b=fs(),y=de(b);Ve(y,21,a,(t=>t.id),((t,e)=>{var r=gs(),n=ue(r);n.__change=[ds,a,l,o,s],n.__input=[hs,a,l,o,s];var d=he(n);Z((()=>{r.disabled=u()||Kt(e).disabled,ei(r,"for",`form-field-checkbox-${l()+"_"+Kt(e).id??""}`),ei(n,"data-id",Kt(e).id),ei(n,"id",`form-field-checkboxlist-${l()+"_"+Kt(e).id??""}`),ei(n,"placeholder",Xi[Kt(e).placeholder]),ei(n,"name",l()+"_"+Kt(e).id),n.readOnly=c(),ei(n,"invalid",Kt(m)),ei(n,"aria-controls",`input-field-helper-${l()+"_"+Kt(e).id??""}`),ei(n,"aria-describedby",`input-field-helper-${l()+"_"+Kt(e).id??""}`),n.disabled=u()||Kt(e).disabled,Me(d,` ${Ti(Xi,"$LOCALE",i)[Kt(e).label]??""}`)})),mi(n,(()=>Kt(e).value),(t=>Kt(e).value=t)),_e(t,r)})),Hr(he(y,2),{get errors(){return r},set errors(t){r=t},get show(){return n},set show(t){n=t},get classes(){return v},set classes(t){v=t},get id(){return`input-field-helper-${l()??""}`}}),_e(t,b),Zt()},UIColor:function(t,e){Xt(e,!0);const i=xi();let r,n,s=Ri(),o=Ei(e,"inputStarted",15,!1),a=Ei(e,"value",15,""),l=Ei(e,"placeholder",3,""),c=Ei(e,"fieldname",3,"color"),u=Ei(e,"icon",3,!1),d=Ei(e,"required",3,!0),h=Ei(e,"readonly",3,!1),g=Ei(e,"valid",3,!0),f=Ei(e,"validated",3,!1),p=Ei(e,"errors",3,!1),v=Ei(e,"formErrors",3,!1),m=Ei(e,"formLevelError",3,!1),b=P((()=>(u()?" has-icons-left ":"")+" has-icons-right "));Fi((()=>{r=[].concat(p()?p():[],v()?v():[])})),Fi((()=>{n=!(f()&&g())&&o()}));let y,$=P((()=>!1===g()||m()));Fi((()=>{y=!0!==g()&&o()?Kr.CLASS_ERR:Kr.CLASS_OK}));var O=Os(),w=de(O),k=ue(w);ni(k,`input ${y??""}`),k.__change=[ps,c,o,s],k.__input=[vs,c,o,s];var I=he(k,2);je(I,u,(t=>{var e=ms(),i=ue(e);Z((()=>ni(i,`fas fa-${u()??""}`))),_e(t,e)})),je(he(I,2),(()=>!0===f()),(t=>{var e=$s();je(ue(e),(()=>!0===g()),(t=>{_e(t,bs())}),(t=>{var e=Ie();je(de(e),(()=>!1===g()),(t=>{_e(t,ys())}),null,!0),_e(t,e)})),_e(t,e)})),Hr(he(w,2),{get errors(){return r},set errors(t){r=t},get show(){return n},set show(t){n=t},get classes(){return y},set classes(t){y=t},get id(){return`input-field-helper-${c()??""}`}}),Z((()=>{ni(w,`control ${Kt(b)??""}`),ei(k,"id",`form-field-color-${c()??""}`),ei(k,"name",c()),ei(k,"invalid",Kt($)),k.required=d(),ei(k,"placeholder",Ti(Xi,"$LOCALE",i)[l()]),ei(k,"autocomplete",c()),ei(k,"aria-controls",`input-field-helper-${c()??""}`),k.readOnly=h(),ei(k,"aria-describedby",`input-field-helper-${c()??""}`)})),vi(k,a),_e(t,O),Zt()},UIControl:function(t,e){Xt(e,!0);let i=Ei(e,"classes",3,"");var r=ws();Qe(ue(r),(()=>e.children??h)),Z((()=>ni(r,`control ${i()??""}`))),_e(t,r),Zt()},UIDate:function(t,e){Xt(e,!0);const i=xi();let r,n=Ri(),s=Ei(e,"inputStarted",15,!1),o=Ei(e,"value",31,(()=>ie(new Date))),a=Ei(e,"placeholder",3,""),l=Ei(e,"fieldname",3,"datetime"),c=Ei(e,"pattern",3,"d{4}-d{2}-d{2}"),u=Ei(e,"icon",3,!1),d=Ei(e,"required",3,!0),h=Ei(e,"readonly",3,!1),g=Ei(e,"valid",3,!0),f=Ei(e,"validated",3,!1),p=Ei(e,"errors",3,!1),v=Ei(e,"formErrors",3,!1),m=Ei(e,"formLevelError",3,!1),b=P((()=>(u()?" has-icons-left ":"")+" has-icons-right "));Fi((()=>{r=[].concat(p()?p():[],v()?v():[])}));let y,$,O=P((()=>!1===g()||m()));Fi((()=>{y=!(f()&&g())&&s()})),Fi((()=>{$=!0!==g()&&s()?Kr.CLASS_ERR:Kr.CLASS_OK})),Mi((()=>{o()instanceof Date?o(o().toISOString().split("T")[0]):o().indexOf("T")>0&&o(o().split("T")[0])}));var w=Ts(),k=de(w);je(ue(k),h,(t=>{var e=_s(),i=ue(e),r=ue(i);Z((()=>Me(r,Kr.tryFormatLocaleDateTime(o())))),Z((()=>ei(i,"datetime",o()))),_e(t,e)}),(t=>{var e=Es(),r=de(e);ni(r,`input ${$??""}`),r.__change=[ks,l,s,n],r.__input=[Is,l,s,n];var p=he(r,2);je(p,u,(t=>{var e=As(),i=ue(e);Z((()=>ni(i,`fas fa-${u()??""}`))),_e(t,e)})),je(he(p,2),(()=>!0===f()),(t=>{var e=Ls();je(ue(e),(()=>!0===g()),(t=>{_e(t,Ss())}),(t=>{var e=Ie();je(de(e),(()=>!1===g()),(t=>{_e(t,Cs())}),null,!0),_e(t,e)})),_e(t,e)})),Z((()=>{ei(r,"id",`form-field-date-${l()??""}`),ei(r,"name",l()),ei(r,"invalid",Kt(O)),r.required=d(),ei(r,"placeholder",Ti(Xi,"$LOCALE",i)[a()]),ei(r,"pattern",c()),r.readOnly=h(),ei(r,"autocomplete",l()),ei(r,"aria-controls",`input-field-helper-${l()??""}`),ei(r,"aria-describedby",`input-field-helper-${l()??""}`)})),vi(r,o),_e(t,e)})),Hr(he(k,2),{get errors(){return r},set errors(t){r=t},get show(){return y},set show(t){y=t},get classes(){return $},set classes(t){$=t},get id(){return`input-field-helper-${l()??""}`}}),Z((()=>ni(k,`control ${Kt(b)??""}`))),_e(t,w),Zt()},UIDatetimeInTZ:function(t,e){Xt(e,!0);let i=Ri();function r(t,e=!1){return t.split(".")[0]+(e?"":"Z")}function n(t,e){try{const i=new Date(s(t)).getTime(),n=-6e4*e;if(S(i+n)){const t=new Date(i+n);return r(t.toISOString(),!0)}}catch(t){return}}function s(t){return t&&"Z"!==t.at(-1)?t+"Z":t}let o,a,l=Ei(e,"inputStarted",15,!1),c=Ei(e,"fieldname",3,"datetime"),u=Ei(e,"value",31,(()=>ie(r((new Date).toISOString())))),d=Ei(e,"timezoneOffset",3,0),h=Ei(e,"icon",3,!1),g=Ei(e,"required",3,!1),f=Ei(e,"disabled",3,!1),p=Ei(e,"readonly",3,!1),v=Ei(e,"valid",3,!0),m=Ei(e,"validated",3,!1),b=Ei(e,"errors",3,!1),y=Ei(e,"formErrors",3,!1),$=Ei(e,"formLevelError",3,!1),O=P((()=>(h()?" has-icons-left ":"")+" has-icons-right "));Fi((()=>{o=[].concat(b()?b():[],y()?y():[])})),Fi((()=>{a=!(m()&&v())&&l()}));let w,k=P((()=>!1===v()||$()));Fi((()=>{w=!0!==v()&&l()?Kr.CLASS_ERR:Kr.CLASS_OK}));let I,_=T(void 0);const A=t=>{S(t)&&(I=Kt(_),R(_,ie(t)))};Mi((()=>{A(n(u(),d()))}));const S=t=>{try{return new Date(t),!0}catch(t){return!1}};let C=P((()=>isNaN(d())?"":(d()>0?"":"+")+(d()/-60).toFixed(1)));function L(t){return t.currentTarget.value&&Kt(_)&&S(Kt(_))?(u()!==n(Kt(_),-d())&&(()=>{A(Kt(_)),u(s(n(Kt(_),-d())));let t={field:c(),value:u()};l(!0),i("change",t)})(),!0):(R(_,ie(I)),!1)}var E=Ie();je(de(E),(()=>Kt(_)),(t=>{var e=Ds(),i=de(e);je(ue(i),p,(t=>{var e=xs(),i=ue(e);Z((()=>Me(i,Kt(_)))),_e(t,e)}),(t=>{var e=Us(),i=de(e);ni(i,`input ${w??""}`),i.__change=L,i.__input=L;var r=he(i,2);je(r,h,(t=>{var e=Fs(),i=ue(e);Z((()=>{ei(e,"title",Kt(C)),ni(i,`fas fa-${h()??""}`)})),_e(t,e)})),je(he(r,2),(()=>!0===m()),(t=>{var e=Rs();je(ue(e),(()=>!0===v()),(t=>{_e(t,Ns())}),(t=>{var e=Ie();je(de(e),(()=>!1===v()),(t=>{_e(t,Ms())}),null,!0),_e(t,e)})),_e(t,e)})),Z((()=>{ei(i,"id",`form-field-datetime-in-timezone-${c()??""}`),ei(i,"name",c()),ei(i,"invalid",Kt(k)),i.disabled=f(),i.required=g(),i.readOnly=p(),ei(i,"autocomplete",c()),ei(i,"aria-controls",`input-field-helper-${c()??""}`),ei(i,"aria-describedby",`input-field-helper-${c()??""}`)})),me("blur",i,L),vi(i,(()=>Kt(_)),(t=>R(_,t))),_e(t,e)})),Hr(he(i,2),{get errors(){return o},set errors(t){o=t},get show(){return a},set show(t){a=t},get classes(){return w},set classes(t){w=t},get id(){return`input-field-helper-${c()??""}`}}),Z((()=>ni(i,`control ${Kt(O)??""}`))),_e(t,e)})),_e(t,E),Zt()},UIEmail:function(t,e){Xt(e,!0);const i=xi();let r,n,s=Ri(),o=Ei(e,"inputStarted",15,!1),a=Ei(e,"value",15,""),l=Ei(e,"placeholder",3,""),c=Ei(e,"fieldname",3,"email"),u=Ei(e,"icon",3,!1),d=Ei(e,"required",3,!0),h=Ei(e,"readonly",3,!1),g=Ei(e,"disabled",3,!1),f=Ei(e,"valid",3,!0),p=Ei(e,"validated",3,!1),v=Ei(e,"errors",3,!1),m=Ei(e,"formErrors",3,!1),b=Ei(e,"formLevelError",3,!1),y=P((()=>(u()?" has-icons-left ":"")+" has-icons-right "));Fi((()=>{r=[].concat(v()?v():[],m()?m():[])})),Fi((()=>{n=!(p()&&f())&&o()}));let $,O=P((()=>!1===f()||b()));Fi((()=>{$=!0!==f()&&o()?Kr.CLASS_ERR:Kr.CLASS_OK}));var w=Ks(),k=de(w);je(ue(k),h,(t=>{var e=Ws(),i=ue(e);Z((()=>Me(i,a()))),_e(t,e)}),(t=>{var e=Hs(),r=de(e);ni(r,`input ${$??""}`),r.__change=[Ps,c,o,s],r.__input=[js,c,o,s];var n=he(r,2);je(n,u,(t=>{var e=Bs(),i=ue(e);Z((()=>ni(i,`fas fa-${u()??""}`))),_e(t,e)})),je(he(n,2),(()=>!0===p()),(t=>{var e=qs();je(ue(e),(()=>!0===f()),(t=>{_e(t,zs())}),(t=>{var e=Ie();je(de(e),(()=>!1===f()),(t=>{_e(t,Vs())}),null,!0),_e(t,e)})),_e(t,e)})),Z((()=>{ei(r,"id",`form-field-email-${c()??""}`),ei(r,"name",c()),ei(r,"invalid",Kt(O)),r.required=d(),r.readOnly=h(),r.disabled=g(),ei(r,"placeholder",Ti(Xi,"$LOCALE",i)[l()]),ei(r,"autocomplete",c()),ei(r,"aria-controls",`input-field-helper-${c()??""}`),ei(r,"aria-describedby",`input-field-helper-${c()??""}`)})),vi(r,a),_e(t,e)})),Hr(he(k,2),{get errors(){return r},set errors(t){r=t},get show(){return n},set show(t){n=t},get classes(){return $},set classes(t){$=t},get id(){return`input-field-helper-${c()??""}`}}),Z((()=>ni(k,`control ${Kt(y)??""}`))),_e(t,w),Zt()},UIHidden:function(t,e){let i=Ei(e,"value",15,""),r=Ei(e,"fieldname",3,"hidden"),n=Ei(e,"required",3,!0),s=Ei(e,"readonly",3,!1);var o=Gs();Z((()=>{o.required=n(),o.readOnly=s(),ei(o,"name",r())})),vi(o,i),_e(t,o)},UIJSONArea:function(t,e){Xt(e,!0);let i=Ri(),r=Ei(e,"inputStarted",15,!1),n=Ei(e,"value",31,(()=>ie({}))),s=Ei(e,"placeholder",3,""),o=Ei(e,"fieldname",3,"jsonarea"),a=Ei(e,"icon",3,!1),l=Ei(e,"rows",3,10),c=Ei(e,"required",3,!0),u=Ei(e,"readonly",3,!1),d=Ei(e,"disabled",3,!1),h=Ei(e,"valid",15,!0),g=Ei(e,"validated",3,!1),f=Ei(e,"errors",15,!1),p=Ei(e,"formErrors",3,!1),v=Ei(e,"formLevelError",3,!1),m=T("{}");function b(t){try{n(JSON.parse(t)),h(!0),f(!1),r(!0),i("change",{field:o(),value:n()})}catch(t){h(!1),f([t.message])}}Mi((()=>{R(m,ie(JSON.stringify(n(),null,4)))})),io(t,{get inputStarted(){return r()},set inputStarted(t){r(t)},get value(){return Kt(m)},set value(t){R(m,ie(t))},get placeholder(){return s()},get icon(){return a()},get rows(){return l()},get required(){return c()},get readonly(){return u()},get disabled(){return d()},get validated(){return g()},get formErrors(){return p()},get formLevelError(){return v()},$$events:{change:function(t){return b(t.detail.value),!0}}}),Zt()},UILabel:no,UIListOfModels:function(t,e){Xt(e,!0),Ri(),Ei(e,"inputStarted",3,!1);let i=Ei(e,"value",31,(()=>ie([]))),r=Ei(e,"placeholder",15,""),n=Ei(e,"fieldname",15,"selectFromModel"),s=Ei(e,"required",15,!0),o=Ei(e,"readonly",3,!1),a=Ei(e,"multiple",15,!1),l=Ei(e,"size",15,8),c=Ei(e,"valid",15,!0),u=Ei(e,"validated",15,!1),d=Ei(e,"errors",15,!1),h=Ei(e,"formErrors",15,!1),g=Ei(e,"formLevelError",15,!1),f=Ei(e,"modelName",3,""),p=Ei(e,"actionName",3,""),v=Ei(e,"actionFilter",19,(()=>({}))),m=Ei(e,"actionSorter",19,(()=>({}))),b=Ei(e,"actionPager",19,(()=>({}))),y=Ei(e,"actionSearch",3,void 0),$=Ei(e,"optionId",3,":_id"),O=Ei(e,"optionTitle",3,":title"),w=Ei(e,"selectorUI",3,"UISelectFromModelOnDemandInline"),k=Ei(e,"selectorUIProps",19,(()=>({}))),I=Ei(e,"itemUI",3,"UIListItem"),_=Ei(e,"itemUIProps",19,(()=>({}))),A=Ei(e,"transformValueItemToListItem",3,(t=>t?{id:t._id,title:t.title,description:t.description,value:t}:void 0)),S=P((()=>i().map?i().map(A()):[]));const C=[{action(t){const e=t.value,r=i().findIndex((t=>t===e));if(r>-1){const t=[...i()];Ir.moveItem(t,r,r-1),i(t)}},title:"",icon:"arrow-up",color:"normal"},{action:t=>{const e=t.value,r=i().findIndex((t=>t===e));if(r>-1){const t=[...i()];Ir.moveItem(t,r,r+1),i(t)}},title:"",icon:"arrow-down",color:"normal"},{action:t=>{const e=t.value,r=i().findIndex((t=>t===e));r>-1&&(i().splice(r,1),i(i()))},title:"",icon:"trash",color:"danger"}];var L=xo(),E=de(L),T=P((()=>ao.get(I())));To(E,Ci({get listItemComponent(){return Kt(T)}},_,{get items(){return Kt(S)},actions:C})),je(he(E,2),(()=>!o()),(t=>{var e=Ie();const o=P((()=>ao.get(w())));Xe(de(e),(()=>Kt(o)),((t,e)=>{e(t,Ci(k,{get modelName(){return f()},get actionName(){return p()},get actionFilter(){return v()},get actionSorter(){return m()},get actionPager(){return b()},get actionSearch(){return y()},get optionId(){return $()},get optionTitle(){return O()},get placeholder(){return r()},set placeholder(t){r(t)},get fieldname(){return n()},set fieldname(t){n(t)},get required(){return s()},set required(t){s(t)},get multiple(){return a()},set multiple(t){a(t)},get size(){return l()},set size(t){l(t)},get valid(){return c()},set valid(t){c(t)},get validated(){return u()},set validated(t){u(t)},get errors(){return d()},set errors(t){d(t)},get formErrors(){return h()},set formErrors(t){h(t)},get formLevelError(){return g()},set formLevelError(t){g(t)},$$events:{resolve:t=>{return e=t.detail,Array.isArray(i())||i([]),i().push(e),void i(i());var e}}}))})),_e(t,e)})),_e(t,L),Zt()},UINamedNumbersList:function(t,e){Xt(e,!0);let i,r,n,s=Ri(),o=Ei(e,"fieldname",3,"numbers_list"),a=Ei(e,"value",31,(()=>ie({}))),l=Ei(e,"label",3,"named numbers list"),c=Ei(e,"inputStarted",3,!1),u=Ei(e,"placeholder",15,"new item"),d=Ei(e,"readonly",3,!1),h=Ei(e,"valid",3,!0),g=Ei(e,"validated",3,!1),f=Ei(e,"errors",3,!1),p=Ei(e,"formErrors",3,!1),v=P((()=>Object.keys(a()).map((t=>({id:t,title:t,number:a()[t]})))));Fi((()=>{i=[].concat(f()?f():[],p()?p():[])})),Fi((()=>{r=!(g()&&h())&&c()})),Fi((()=>{n=!0!==h()&&c()?Kr.CLASS_ERR:Kr.CLASS_OK}));let m=ie({id:"",number:0});var b=ea(),y=de(b);Sn(y,{get title(){return l()},size:5});var $=he(y,2);Ve($,17,(()=>Kt(v)),(t=>t.id),((t,e)=>{Ro(t,{children:(t,i)=>{var r=Zo(),n=de(r);No(n,{classes:"is-6",children:(t,i)=>{var r=ke();Z((()=>Me(r,Kt(e).title))),_e(t,r)},$$slots:{default:!0}});var l=he(n,2);No(l,{classes:"is-4",children:(t,i)=>{var r=ke();Z((()=>Me(r,Kt(e).number))),_e(t,r)},$$slots:{default:!0}}),je(he(l,2),(()=>!d()),(t=>{No(t,{classes:"is-2",children:(t,i)=>{un(t,{icon:"minus",action:()=>{return t=Kt(e).id,void(Ir.objHas(a(),t)&&(delete a()[t],a(a()),s("change",{value:a(),field:o()})));var t}})},$$slots:{default:!0}})})),_e(t,r)},$$slots:{default:!0}})}));var O=he($,2);je(O,(()=>!d()),(t=>{Ro(t,{children:(t,e)=>{var i=ta(),r=de(i);No(r,{classes:"is-6",children:(t,e)=>{Dn(t,{get value(){return m.id},set value(t){m.id=t},get placeholder(){return u()},set placeholder(t){u(t)}})},$$slots:{default:!0}});var n=he(r,2);No(n,{classes:"is-4",children:(t,e)=>{Xo(t,{get value(){return m.number},set value(t){m.number=t}})},$$slots:{default:!0}}),No(he(n,2),{classes:"is-2",children:(t,e)=>{un(t,{icon:"plus",action:()=>function(){const t=m.id.trim(),e=parseInt(m.number);!t||""===t||isNaN(e)||Ir.objHas(a(),t)||a(a()[t]=e,!0),s("change",{value:a(),field:o()})}()})},$$slots:{default:!0}}),_e(t,i)},$$slots:{default:!0}})})),Hr(he(O,2),{get errors(){return i},set errors(t){i=t},get show(){return r},set show(t){r=t},get classes(){return n},set classes(t){n=t},get id(){return`input-field-helper-${o()??""}`}}),_e(t,b),Zt()},UINumber:Xo,UIPassword:function(t,e){Xt(e,!0);const i=xi();let r,n,s=Ri(),o=Ei(e,"inputStarted",15,!1),a=Ei(e,"value",15,""),l=Ei(e,"placeholder",3,""),c=Ei(e,"fieldname",3,"password"),u=Ei(e,"icon",3,!1),d=Ei(e,"required",3,!0),h=Ei(e,"readonly",3,!1),g=Ei(e,"valid",3,!0),f=Ei(e,"validated",3,!1),p=Ei(e,"errors",3,!1),v=Ei(e,"formErrors",3,!1),m=Ei(e,"formLevelError",3,!1),b=P((()=>(u()?" has-icons-left ":"")+" has-icons-right "));Fi((()=>{r=[].concat(p()?p():[],v()?v():[])})),Fi((()=>{n=!(f()&&g())&&o()}));let y,$=P((()=>!1===g()||m()));Fi((()=>{y=!0!==g()&&o()?Kr.CLASS_ERR:Kr.CLASS_OK})),Fi((()=>{}));var O=la(),w=de(O),k=ue(w);ni(k,`input ${y??""}`),k.__change=[ia,c,o,s],k.__input=[ra,c,o,s];var I=he(k,2);je(I,u,(t=>{var e=na(),i=ue(e);Z((()=>ni(i,`fas fa-${u()??""}`))),_e(t,e)})),je(he(I,2),(()=>!0===f()),(t=>{var e=aa();je(ue(e),(()=>!0===g()),(t=>{_e(t,sa())}),(t=>{var e=Ie();je(de(e),(()=>!1===g()),(t=>{_e(t,oa())}),null,!0),_e(t,e)})),_e(t,e)})),Hr(he(w,2),{get errors(){return r},set errors(t){r=t},get show(){return n},set show(t){n=t},get classes(){return y},set classes(t){y=t},get id(){return`input-field-helper-${c()??""}`}}),Z((()=>{ni(w,`control ${Kt(b)??""}`),k.readOnly=h(),ei(k,"id",`form-field-password-${c()??""}`),ei(k,"name",c()),ei(k,"invalid",Kt($)),k.required=d(),ei(k,"placeholder",Ti(Xi,"$LOCALE",i)[l()]),ei(k,"autocomplete",c()),ei(k,"aria-controls",`input-field-helper-${c()??""}`),ei(k,"aria-describedby",`input-field-helper-${c()??""}`)})),vi(k,a),_e(t,O),Zt()},UIRadioButtons:function(t,e){Xt(e,!0);const i=Ri();let r=Ei(e,"fieldname",3,"radio-buttons"),n=Ei(e,"variants",19,(()=>[])),s=Ei(e,"value",15),o=Ei(e,"buttonProps",19,(()=>({}))),a=Ei(e,"titleComponent",3,Sn),l=Ei(e,"titleComponentProps",19,(()=>({size:5}))),c=Ei(e,"imageComponent",3,da),u=Ei(e,"imageComponentProps",19,(()=>({covered:!0}))),d=Ei(e,"descriptionComponent",3,hn),h=Ei(e,"descriptionComponentProps",19,(()=>({}))),g=Ei(e,"listComponent",3,To),f=Ei(e,"listComponentProps",19,(()=>({}))),p=Ei(e,"getUIItem",3,(t=>y.find((e=>e.value===t)))),v=Ei(e,"getDefaultItemSublime",3,(()=>n()[0].value)),m=Ei(e,"uiOn",3,(t=>{t.color="success",t.outlined=!1})),b=Ei(e,"uiOff",3,(t=>{t.color=!1,t.outlined=!0}));Mi((()=>{y=n().map((t=>({...o(),...t}))),R($,ie([{id:0,title:e.title,image:e.image,description:{values:y}}])),function(){if(n().length>0)if(void 0!==s())w({on:s()});else{O(v()())}}()}));let y=[],$=T(ie([]));function O(t){let e={on:void 0,off:void 0};s()&&(e.off=s(),e.on=t),s(t),w(e),i("change",{field:r(),value:s()})}function w(t){t.off&&b()(p()(t.off)),t.on&&m()(p()(t.on)),R($,ie(Kt($)))}const k=P(g);var I=Ie(),_=de(I),A=P((()=>({...h(),action(t,e){O(e)}})));Xe(_,(()=>Kt(k)),((t,e)=>{e(t,Ci(f,{get items(){return Kt($)},set items(t){R($,ie(t))},get titleComponent(){return a()},get titleComponentProps(){return l()},get descriptionComponent(){return d()},get descriptionComponentProps(){return Kt(A)},get imageComponent(){return c()},get imageComponentProps(){return u()}}))})),_e(t,I),Zt()},UIRange:function(t,e){Xt(e,!0);const i=xi(),r=Ri();let n,s,o=Ei(e,"inputStarted",15,!1),a=Ei(e,"value",15,10),l=Ei(e,"min",3,0),c=Ei(e,"max",3,100),u=Ei(e,"step",3,1),d=Ei(e,"tickmarks",3,!1),h=Ei(e,"placeholder",3,""),g=Ei(e,"fieldname",3,"range"),f=Ei(e,"icon",3,!1),p=Ei(e,"required",3,!0),v=Ei(e,"disabled",3,!1),m=Ei(e,"readonly",3,!1),b=Ei(e,"valid",3,!0),y=Ei(e,"validated",3,!1),$=Ei(e,"errors",3,!1),O=Ei(e,"formErrors",3,!1),w=Ei(e,"formLevelError",3,!1),k=P((()=>(f()?" has-icons-left ":"")+" has-icons-right "));Fi((()=>{n=[].concat($()?$():[],O()?O():[])})),Fi((()=>{s=!(y()&&b())&&o()}));let I,_=P((()=>!1===b()||w()));Fi((()=>{I=!0!==b()&&o()?Kr.CLASS_ERR:Kr.CLASS_OK}));var A=ya(),S=de(A);je(ue(S),m,(t=>{var e=fa(),i=ue(e);Z((()=>Me(i,a()))),_e(t,e)}),(t=>{var e=ba(),n=de(e);ni(n,`input big-number slider has-output is-fullwidth is-success ${I??""}`),n.__change=[ha,g,a,o,r],n.__input=[ga,g,o,r];var s=he(n,2),b=ue(s),y=he(s,2);je(y,(()=>Array.isArray(d())&&d().length),(t=>{var e=va();Ve(e,21,d,ze,((t,e)=>{var i=pa(),r={};Z((()=>{r!==(r=Kt(e).value)&&(i.value=null==(i.__value=Kt(e).value)?"":Kt(e).value),ei(i,"label",Kt(e).label)})),_e(t,i)})),Z((()=>ei(e,"id",`form-field-range-${g()??""}-tickmarks`))),_e(t,e)})),je(he(y,2),f,(t=>{var e=ma(),i=ue(e);Z((()=>ni(i,`fas fa-${f()??""}`))),_e(t,e)})),Z((()=>{ei(n,"id",`form-field-range-${g()??""}`),ei(n,"name",g()),ei(n,"min",l()),ei(n,"max",c()),ei(n,"step",u()),ei(n,"list",`form-field-range-${g()??""}-tickmarks`),ei(n,"invalid",Kt(_)),n.disabled=v(),n.required=p(),n.readOnly=m(),ei(n,"placeholder",Ti(Xi,"$LOCALE",i)[h()]),ei(n,"autocomplete",g()),ei(n,"aria-controls",`input-field-helper-${g()??""}`),ei(n,"aria-describedby",`input-field-helper-${g()??""}`),ei(s,"for",`form-field-range-${g()??""}`),Me(b,a())})),vi(n,a),_e(t,e)})),Hr(he(S,2),{get errors(){return n},set errors(t){n=t},get show(){return s},set show(t){s=t},get classes(){return I},set classes(t){I=t},get id(){return`input-field-helper-${g()??""}`}}),Z((()=>ni(S,`control ${Kt(k)??""}`))),_e(t,A),Zt()},UIRangeLogarithmic:function(t,e){Xt(e,!0);const i=xi(),r=Number.MAX_SAFE_INTEGER;let n,s,o=Ri(),a=Ei(e,"inputStarted",15,!1),l=Ei(e,"value",15,10),c=Ei(e,"min",3,0),u=Ei(e,"max",3,100),d=Ei(e,"tickmarks",3,!1),h=Ei(e,"placeholder",3,""),g=Ei(e,"fieldname",3,"range"),f=Ei(e,"icon",3,!1),p=Ei(e,"required",3,!0),v=Ei(e,"disabled",3,!1),m=Ei(e,"readonly",3,!1),b=Ei(e,"valid",3,!0),y=Ei(e,"validated",3,!1),$=Ei(e,"errors",3,!1),O=Ei(e,"formErrors",3,!1),w=Ei(e,"formLevelError",3,!1),k=P((()=>(f()?" has-icons-left ":"")+" has-icons-right "));Fi((()=>{n=[].concat($()?$():[],O()?O():[])})),Fi((()=>{s=!(y()&&b())&&a()}));let I,_=P((()=>!1===b()||w()));Fi((()=>{I=!0!==b()&&a()?Kr.CLASS_ERR:Kr.CLASS_OK}));let A=0,S=100,C=10,L=T(1);function E(){A=Math.log(c()||1),S=Math.log(u()||r),C=(S-A)/100,l()>u()?l(u()):l()<c()?l(c()):l(l())}function x(t){return t=parseInt(t),Math.round(Math.exp((t-0)*C+A))}Fi((()=>{c(),u(),E()})),Mi((()=>{E()}));var F=Sa(),N=de(F);je(ue(N),m,(t=>{var e=wa(),i=ue(e);Z((()=>Me(i,l()))),_e(t,e)}),(t=>{var e=Aa(),r=de(e);ni(r,`input big-number slider has-output is-fullwidth is-success ${I??""}`),ei(r,"min",0),ei(r,"max",100),ei(r,"step",.01),r.__change=[$a,x,l,g,a,o],r.__input=[Oa,x,l,g,a,o];var n=he(r,2),s=ue(n),c=he(n,2);je(c,(()=>Array.isArray(d())&&d().length),(t=>{var e=Ia();Ve(e,21,d,ze,((t,e)=>{var i=ka(),r={};Z((()=>{r!==(r=Kt(e).value)&&(i.value=null==(i.__value=Kt(e).value)?"":Kt(e).value),ei(i,"label",Kt(e).label)})),_e(t,i)})),Z((()=>ei(e,"id",`form-field-range-${g()??""}-tickmarks`))),_e(t,e)})),je(he(c,2),f,(t=>{var e=_a(),i=ue(e);Z((()=>ni(i,`fas fa-${f()??""}`))),_e(t,e)})),Z((()=>{ei(r,"id",`form-field-range-${g()??""}`),ei(r,"name",g()),ei(r,"list",`form-field-range-${g()??""}-tickmarks`),ei(r,"invalid",Kt(_)),r.disabled=v(),r.required=p(),r.readOnly=m(),ei(r,"placeholder",Ti(Xi,"$LOCALE",i)[h()]),ei(r,"autocomplete",g()),ei(r,"aria-controls",`input-field-helper-${g()??""}`),ei(r,"aria-describedby",`input-field-helper-${g()??""}`),ei(n,"for",`form-field-range-${g()??""}`),Me(s,l())})),vi(r,(()=>Kt(L)),(t=>R(L,t))),_e(t,e)})),Hr(he(N,2),{get errors(){return n},set errors(t){n=t},get show(){return s},set show(t){s=t},get classes(){return I},set classes(t){I=t},get id(){return`input-field-helper-${g()??""}`}}),Z((()=>ni(N,`control ${Kt(k)??""}`))),_e(t,F),Zt()},UISelect:rn,UISelectFromModel:function(t,e){Xt(e,!0);const i=Ri();let r=Ei(e,"inputStarted",3,!1),n=Ei(e,"placeholder",3,""),s=Ei(e,"emptyValueTitle",3,""),o=Ei(e,"fieldname",3,"selectFromModel"),a=Ei(e,"modelName",3,""),l=Ei(e,"actionName",3,""),c=Ei(e,"actionFilter",19,(()=>({}))),u=Ei(e,"actionSorter",19,(()=>({}))),d=Ei(e,"actionPager",19,(()=>({}))),h=Ei(e,"actionSearch",3,void 0),g=Ei(e,"optionId",3,":_id"),f=Ei(e,"optionTitle",3,":title"),p=Ei(e,"icon",3,!1),v=Ei(e,"required",3,!0),m=Ei(e,"readonly",3,!1),b=Ei(e,"multiple",3,!1),y=Ei(e,"size",3,8),$=Ei(e,"valid",3,!0),O=Ei(e,"validated",3,!1),w=Ei(e,"errors",15,!1),k=Ei(e,"formErrors",3,!1),I=Ei(e,"formLevelError",3,!1),_=Ei(e,"returnVariant",3,!1),A=T(ie([])),S=P((()=>!0));Mi((async()=>{if(a()&&l()&&c()){const t=Ir.getApp().getModel(a()).setFilter(c()).setSorter(u()).setPager(d()).setSearch(h()),e=await t["$"+l()]();if(e.status===yn){const t=e.result;R(A,ie(t.map((t=>({id:br.get(g(),t),title:br.get(f(),t)})))))}else w(result.errors||[result.message])}})),rn(t,{get inputStarted(){return r()},get value(){return e.value},get variants(){return Kt(A)},set variants(t){R(A,ie(t))},get placeholder(){return n()},get emptyValueTitle(){return s()},get fieldname(){return o()},get icon(){return p()},get required(){return v()},get readonly(){return m()},get disabled(){return Kt(S)},get multiple(){return b()},get size(){return y()},get valid(){return $()},get validated(){return O()},get errors(){return w()},get formErrors(){return k()},get formLevelError(){return I()},$$events:{change:function(t){_()?i("change",{...t.detail,value:Kt(A).find((e=>e.id===t.detail.value))}):i("change",t.detail)}}}),Zt()},UISwitch:function(t,e){Xt(e,!0);const i=xi(),r=()=>Ti(Xi,"$LOCALE",i);let n=Ri(),s=Ei(e,"inputStarted",15,!1),o=Ei(e,"value",15,!1),a=Ei(e,"label",3,""),l=Ei(e,"hideLabel",3,!1),c=Ei(e,"placeholder",3,""),u=Ei(e,"fieldname",3,"textfield");Ei(e,"icon",3,!1);let d,h,g=Ei(e,"required",3,!0),f=Ei(e,"readonly",3,!1),p=Ei(e,"disabled",3,!1),v=Ei(e,"valid",3,!0),m=Ei(e,"styling",3," is-rounded is-success "),b=Ei(e,"validated",3,!1),y=Ei(e,"errors",3,!1),$=Ei(e,"formErrors",3,!1),O=Ei(e,"formLevelError",3,!1);Fi((()=>{d=[].concat(y()?y():[],$()?$():[])})),Fi((()=>{h=!(b()&&v())&&s()}));let w,k=P((()=>!1===v()||O()));function I(t){let e={field:u(),value:"checkbox"===t.currentTarget.type?t.currentTarget.checked:o()};return s(!0),n("change",e),!0}Fi((()=>{w=!0!==v()&&s()?Kr.CLASS_ERR:Kr.CLASS_OK}));var _=Ea(),A=de(_);je(ue(A),f,(t=>{var e=Ie();je(de(e),o,(t=>{xr(t,{values:[{value:!0}]})}),(t=>{xr(t,{values:[{value:!1}]})})),_e(t,e)}),(t=>{var e=La(),i=de(e);je(i,(()=>!a()&&!l()),(t=>{xr(t,{values:[{value:!1}]})}));var d=he(i,2);d.__input=[Ca,u,o,s,n];var h=he(d,2);je(ue(h),(()=>!l()),(t=>{var e=Ie();je(de(e),a,(t=>{var e=ke();Z((()=>Me(e,r()[a()]))),_e(t,e)}),(t=>{xr(t,{values:[{value:!0}]})})),_e(t,e)})),Z((()=>{ni(d,`switch ${m()??""}`),ei(d,"id",`form-field-switch-${u()??""}`),ei(d,"placeholder",r()[c()]),ei(d,"name",u()),d.disabled=p(),d.required=g(),d.readOnly=f(),ei(d,"invalid",Kt(k)),ei(d,"aria-controls",`input-field-helper-${u()??""}`),ei(d,"aria-describedby",`input-field-helper-${u()??""}`),ei(h,"for",`form-field-switch-${u()??""}`)})),me("blur",d,I),mi(d,o),_e(t,e)})),Hr(he(A,2),{get errors(){return d},set errors(t){d=t},get show(){return h},set show(t){h=t},get classes(){return w},set classes(t){w=t},get id(){return`input-field-helper-${u()??""}`}}),_e(t,_),Zt()},UISwitchList:function(t,e){Xt(e,!0);const i=xi();let r=Ri(),n=Ei(e,"inputStarted",15,!1),s=Ei(e,"value",31,(()=>ie([]))),o=Ei(e,"variants",19,(()=>[]));Ei(e,"label",3,""),Ei(e,"hideLabel",3,!1),Ei(e,"placeholder",3,"");let a=Ei(e,"fieldname",3,"textfield");Ei(e,"icon",3,!1);let l=Ei(e,"required",3,!0),c=Ei(e,"readonly",3,!1);Ei(e,"multiple",3,!0);let u,d,h=Ei(e,"disabled",3,!1),g=Ei(e,"valid",3,!0),f=Ei(e,"styling",3," is-rounded is-success "),p=Ei(e,"validated",3,!1),v=Ei(e,"errors",3,!1),m=Ei(e,"formErrors",3,!1),b=Ei(e,"formLevelError",3,!1);Fi((()=>{u=[].concat(v()?v():[],m()?m():[])})),Fi((()=>{d=!(p()&&g())&&n()}));let y,$=P((()=>!1===g()||b()));function O(t){s().includes(t)||(s().push(t),s(s()))}function w(t){s().includes(t)&&(s().splice(s().indexOf(t),1),s(s()))}function k(t){console.log("switch list element blur",t);const e=t.target.id.split("-variant-").at(-1);console.log(e),t.target.checked?O(e):w(e);let i={field:a(),value:s()};return n(!0),r("change",i),!0}Fi((()=>{y=!0!==g()&&n()?Kr.CLASS_ERR:Kr.CLASS_OK}));var I=Fa(),_=de(I);je(ue(_),c,(t=>{var e=Ie();je(de(e),s,(t=>{var e=ke();Z((()=>Me(e,o().filter((t=>s().includes(t.id))).map((t=>t.title)).join(", ")))),_e(t,e)})),_e(t,e)}),(t=>{var e=Ie();Ve(de(e),17,o,(t=>t.id),((t,e)=>{var o=xa(),u=ue(o);Z((()=>function(t,e){var i=t.__attributes??={};i.checked!==(i.checked=e)&&(t.checked=e)}(u,s().includes(Kt(e).id)))),u.__input=[Ta,O,w,a,s,n,r];var d=he(u,2),g=ue(d);Z((()=>{ni(u,`switch ${f()??""}`),ei(u,"id",`form-field-switch-${a()??""}-variant-${Kt(e).id??""}`),ei(u,"name",a()),u.disabled=h(),u.required=l(),u.readOnly=c(),ei(u,"invalid",Kt($)),ei(u,"aria-controls",`input-field-helper-${a()??""}-variant-${Kt(e).id??""}`),ei(u,"aria-describedby",`input-field-helper-${a()??""}-variant-${Kt(e).id??""}`),ei(d,"for",`form-field-switch-${a()??""}-variant-${Kt(e).id??""}`),Me(g,Ti(Xi,"$LOCALE",i)[Kt(e).title])})),me("blur",u,k),_e(t,o)})),_e(t,e)})),Hr(he(_,2),{get errors(){return u},set errors(t){u=t},get show(){return d},set show(t){d=t},get classes(){return y},set classes(t){y=t},get id(){return`input-field-helper-${a()??""}`}}),_e(t,I),Zt()},UITagSelect:function(t,e){Xt(e,!0);const i=xi(),r=()=>Ti(Xi,"$LOCALE",i);let n=Ri();Mi((()=>{s(s().filter((t=>y(t)))),s()}));let s=Ei(e,"value",31,(()=>ie([]))),o=Ei(e,"inputStarted",3,!1),a=Ei(e,"variants",19,(()=>[])),l=Ei(e,"fieldname",3,"tag"),c=Ei(e,"readonly",3,!1),u=Ei(e,"valid",3,!0),d=Ei(e,"validated",3,!1),h=Ei(e,"errors",3,!1),g=Ei(e,"formErrors",3,!1);Ei(e,"formLevelError",3,!1);let f=Ei(e,"beforeAdd",3,(()=>!0)),p=Ei(e,"getItemId",3,(t=>t.id)),v=Ei(e,"getItemTitle",3,(t=>t.title)),m=Ei(e,"getItemType",3,(t=>"info")),b=Ei(e,"buildItem",3,(t=>({id:p()(t),title:v()(t),type:m()(t)})));function y(t){return a().find((e=>p()(e)===t))}function $(){let t={field:l(),value:s()};n("change",t)}let O,w,k,I=P((()=>s().map(y).filter((t=>t)).map(b())));Fi((()=>{O=[].concat(h()?h():[],g()?g():[])})),Fi((()=>{w=!(d()&&u())&&o()})),Fi((()=>{k=!0!==u()&&o()?Kr.CLASS_ERR:Kr.CLASS_OK}));var _=ja(),A=de(_),S=ue(A);ni(S,`column ${k??""}`),Ve(S,21,(()=>Kt(I)),(t=>t.id),((t,e)=>{var i=Ua(),n=ue(i);je(he(n),(()=>!c()),(t=>{var i=Ra();i.__click=[Na,s,$],Z((()=>ei(i,"data-id",Kt(e).id))),_e(t,i)})),Z((()=>{ni(i,`mx-1 tag is-${Kt(e).type??""}`),Me(n,`${r()[Kt(e).title]??""} `)})),_e(t,i)})),je(he(S,2),(()=>!c()),(t=>{var e=Pa(),i=ue(e),n=ue(i),o=ue(n),l=ue(o);l.value=null==(l.__value="-1")?"":"-1";var c=ue(l);Ve(he(l),17,a,ze,((t,e)=>{var i=Da(),n={},s=ue(i);Z((()=>{n!==(n=Kt(e).id)&&(i.value=null==(i.__value=Kt(e).id)?"":Kt(e).id),Me(s,r()[Kt(e).title])})),_e(t,i)}));var u=he(n,2);u.__click=[Ma,y,f,a,s,$];var d=ue(u);Z((()=>{Me(c,r()["not-node:select_from_list_label"]),Me(d,r()["not-node:add_label"])})),_e(t,e)})),Hr(he(A,2),{get errors(){return O},set errors(t){O=t},get show(){return w},set show(t){w=t},get classes(){return k},set classes(t){k=t},get id(){return`input-field-helper-${l()??""}`}}),_e(t,_),Zt()},UITelephone:function(t,e){Xt(e,!0);const i=xi();let r,n,s=Ri(),o=Ei(e,"inputStarted",15,!1),a=Ei(e,"value",15,""),l=Ei(e,"placeholder",3,"+7 (987) 654-32-10"),c=Ei(e,"fieldname",3,"telephone"),u=Ei(e,"icon",3,!1),d=Ei(e,"required",3,!0),h=Ei(e,"readonly",3,!1),g=Ei(e,"valid",3,!0),f=Ei(e,"validated",3,!1),p=Ei(e,"errors",3,!1),v=Ei(e,"formErrors",3,!1),m=Ei(e,"formLevelError",3,!1),b=P((()=>(u()?" has-icons-left ":"")+" has-icons-right "));Fi((()=>{r=[].concat(p()?p():[],v()?v():[])})),Fi((()=>{n=!(f()&&g())&&o()}));let y,$=P((()=>!1===g()||m()));Fi((()=>{y=!0!==g()&&o()?Kr.CLASS_ERR:Kr.CLASS_OK}));var O=Ja(),w=de(O);je(ue(w),h,(t=>{var e=za(),i=ue(e);Z((()=>Me(i,a()))),_e(t,e)}),(t=>{var e=Ga(),r=de(e);ni(r,`input ${y??""}`),r.__change=[Wa,c,a,o,s],r.__input=[Ba,c,a,o,s];var n=he(r,2);je(n,u,(t=>{var e=Va(),i=ue(e);Z((()=>ni(i,`fas fa-${u()??""}`))),_e(t,e)})),je(he(n,2),(()=>!0===f()),(t=>{var e=Ka();je(ue(e),(()=>!0===g()),(t=>{_e(t,qa())}),(t=>{var e=Ie();je(de(e),(()=>!1===g()),(t=>{_e(t,Ha())}),null,!0),_e(t,e)})),_e(t,e)})),Z((()=>{ei(r,"id",`form-field-telephone-${c()??""}`),ei(r,"name",c()),ei(r,"invalid",Kt($)),r.required=d(),r.readOnly=h(),ei(r,"placeholder",Ti(Xi,"$LOCALE",i)[l()]),ei(r,"autocomplete",c()),ei(r,"aria-controls",`input-field-helper-${c()??""}`),ei(r,"aria-describedby",`input-field-helper-${c()??""}`)})),vi(r,a),_e(t,e)})),Hr(he(w,2),{get errors(){return r},set errors(t){r=t},get show(){return n},set show(t){n=t},get classes(){return y},set classes(t){y=t},get id(){return`input-field-helper-${c()??""}`}}),Z((()=>ni(w,`control ${Kt(b)??""}`))),_e(t,O),Zt()},UITextarea:io,UITextfield:Dn}),Qa=we("<!> <!>",1);var Xa=we('<div class="is-fab svelte-1haul9u"><!></div>');var Za=we("<span><span><i></i> <span> </span></span></span>"),tl=we("<span><i></i></span>");function el(t,e){Xt(e,!0);const i=xi();let r=Ei(e,"title",3,""),n=Ei(e,"font",3,""),s=Ei(e,"size",3,""),o=Ei(e,"pointable",3,!1);var a=Ie();je(de(a),r,(t=>{var e=Za(),a=ue(e),l=ue(a),c=ue(he(l,2));Z((()=>{ni(e,`icon-text ${(o()?"is-clickable":"")??""}`),ni(a,`icon ${(s()?`is-${s()}`:"")??""}`),ni(l,`is-title-icon fas\n      fa-${n()??""}\n      ${("medium"==s()?"fa-lg":"")??""}\n      ${("large"==s()?"fa-2x":"")??""}\n      `),Me(c,Ti(Xi,"$LOCALE",i)[r()])})),_e(t,e)}),(t=>{var e=tl(),i=ue(e);Z((()=>{ni(e,`\n        ${(o()?"is-clickable":"")??""}\n        icon ${(s()?`is-${s()}`:"")??""} ${("medium"==s()?"fa-lg":"")??""}\n${("large"==s()?"fa-2x":"")??""}`),ni(i,`fas fa-${n()??""}`)})),_e(t,e)})),_e(t,a),Zt()}var il=we('<span class="icon"><!></span>'),rl=we("<figure><img></figure>");function nl(t,e){let i=Ei(e,"title",3,""),r=Ei(e,"size",3,""),n=Ei(e,"font",3,""),s=Ei(e,"svg",3,""),o=Ei(e,"src",3,"");var a=Ie();je(de(a),n,(t=>{el(t,{get font(){return n()},get size(){return r()},get title(){return i()}})}),(t=>{var r=Ie();je(de(r),s,(t=>{var e=il();Je(ue(e),s),_e(t,e)}),(t=>{var r=Ie();je(de(r),o,(t=>{var r=rl(),n=ue(r);Z((()=>{ni(r,`image ${(e.width&&e.height?`is-${e.width}x${e.height}`:"")??""} `),ei(n,"src",o()),ei(n,"title",i()),ei(n,"alt",i()),ei(n,"width",e.width),ei(n,"height",e.height)})),_e(t,r)}),null,!0),_e(t,r)}),!0),_e(t,r)})),_e(t,a)}var sl=Object.freeze({__proto__:null,UIIcon:nl,UIIconButtonWithTag:function(t,e){let i=Ei(e,"button",19,(()=>({}))),r=Ei(e,"tag",19,(()=>({})));var n=Qa(),s=de(n);un(s,Ci(i)),Lr(he(s,2),Ci(r,{classes:"is-top-right"})),_e(t,n)},UIIconFloating:function(t,e){Xt(e,!0);let i=Ei(e,"trigger",19,(()=>({title:"Click me!",icon:"plus",color:"primary",size:"medium"}))),r=T("");Mi((()=>{R(r,"")}));var n=Xa();un(ue(n),Ci({action:function(){}},i)),Z((()=>ei(n,"style",Kt(r)))),_e(t,n),Zt()},UIIconFont:el});function ol(t,e){let i=Ei(e,"values",19,(()=>[]));var r=Ie();Ve(de(r),17,i,(t=>t.url),((t,i)=>{da(t,Ci((()=>Kt(i)),{$$events:{click(t){Ii.call(this,e,t)}}}))})),_e(t,r)}var al=Object.freeze({__proto__:null,UIImage:da,UIImages:ol}),ll=Object.freeze({__proto__:null,UILink:bo,UILinks:Oo}),cl=we('<div class="column box"> </div>'),ul=we('<div class="columns"><div class="column"><!></div> <!> <div class="column"><!></div></div>');function dl(t,e){Xt(e,!0);const i=xi(),r=()=>Ti(Xi,"$LOCALE",i),n=Ri();let s=Ei(e,"page",3,0),o=Ei(e,"pages",3,0),a=Ei(e,"buttonComponent",3,un),l=Ei(e,"buttonComponentProps",19,(()=>({})));var c=Ie();je(de(c),(()=>o()>0),(t=>{var e=ul(),i=ue(e);je(ue(i),(()=>s()>1),(t=>{var e=Ie();const i=P(a);Xe(de(e),(()=>Kt(i)),((t,e)=>{e(t,Ci(l,{action:()=>n("prev"),children:(t,e)=>{var i=ke();Z((()=>Me(i,r()["not-node:list_navigation_prev_button_label"]))),_e(t,i)},$$slots:{default:!0}}))})),_e(t,e)}));var c=he(i,2);je(c,(()=>o()>1),(t=>{var e=cl(),i=ue(e);Z((()=>Me(i,`${s()??""} / ${o()??""}`))),_e(t,e)})),je(ue(he(c,2)),(()=>s()<o()),(t=>{var e=Ie();const i=P(a);Xe(de(e),(()=>Kt(i)),((t,e)=>{e(t,Ci(l,{action:()=>n("next"),children:(t,e)=>{var i=ke();Z((()=>Me(i,r()["not-node:list_navigation_next_button_label"]))),_e(t,i)},$$slots:{default:!0}}))})),_e(t,e)})),_e(t,e)})),_e(t,c),Zt()}var hl=we('<div class="box list-item-selectable svelte-ialyiy" role="button" tabindex="0"><span> </span></div>');function gl(t,e){Xt(e,!0);const i=Ri();function r(){i("click",{_id:e._id,id:e.id,title:e.title})}var n=hl(),s=P((()=>wi(r)));n.__click=function(...t){Kt(s)?.apply(this,t)},n.__keyup=r;var o=ue(n),a=ue(o);Z((()=>Me(a,e.title))),_e(t,n),Zt()}be(["click","keyup"]);var fl=we("<div><!></div> <!>",1);function pl(t,e){Xt(e,!0);const i=Ri();let r=Ei(e,"data",31,(()=>ie({list:[],skip:0,count:0,page:0,pages:0}))),n=Ei(e,"itemComponent",3,gl),s=Ei(e,"itemComponentProps",19,(()=>({}))),o=Ei(e,"emptyListPlaceholderComponent",3,uo),a=Ei(e,"emptyListPlaceholderComponentProps",19,(()=>({}))),l=Ei(e,"listNavigationComponent",3,dl),c=Ei(e,"listNavigationComponentProps",19,(()=>({})));function u({detail:t}){i("select",t)}const d=P(l);var h=fl(),g=de(h);je(ue(g),(()=>r().list.length),(t=>{var e=Ie();Ve(de(e),17,(()=>r().list),(t=>t.id),((t,e)=>{var i=Ie();const r=P(n);Xe(de(i),(()=>Kt(r)),((t,i)=>{i(t,Ci(s,(()=>Kt(e)),{$$events:{click:u}}))})),_e(t,i)})),_e(t,e)}),(t=>{var e=Ie();const i=P(o);Xe(de(e),(()=>Kt(i)),((t,e)=>{e(t,Ci(a))})),_e(t,e)})),Xe(he(g,2),(()=>Kt(d)),((t,i)=>{i(t,Ci(c,{get page(){return r().page},set page(t){r(r().page=t,!0)},get pages(){return r().pages},set pages(t){r(r().pages=t,!0)},get skip(){return r().skip},set skip(t){r(r().skip=t,!0)},get count(){return r().count},set count(t){r(r().count=t,!0)},$$events:{prev(t){Ii.call(this,e,t)},next(t){Ii.call(this,e,t)}}}))})),_e(t,h),Zt()}var vl=we("<!> <!>",1);var ml=Object.freeze({__proto__:null,UIEndlessList:pl,UIEndlessListNavigation:dl,UIEndlessListSimpleItem:gl,UIList:To,UIListEmptyPlaceholder:uo,UIListItem:Lo,UIListSelect:function(t,e){Xt(e,!0);const i=Ri();let r=Ei(e,"fieldname",3,"list-select"),n=Ei(e,"multiple",3,!1),s=Ei(e,"atLeastOne",3,!0),o=Ei(e,"variants",31,(()=>ie([]))),a=Ei(e,"value",15),l=Ei(e,"selectedVariantsIds",31,(()=>ie([]))),c=Ei(e,"titleComponent",3,Sn),u=Ei(e,"titleComponentProps",19,(()=>({size:5}))),d=Ei(e,"imageComponent",3,da),h=Ei(e,"imageComponentProps",19,(()=>({covered:!0}))),g=Ei(e,"descriptionComponent",3,hn),f=Ei(e,"descriptionComponentProps",19,(()=>({}))),p=Ei(e,"listComponent",3,To),v=Ei(e,"listComponentProps",19,(()=>({}))),m=Ei(e,"sublimeValue",3,(t=>t.id)),b=Ei(e,"getItem",3,(({valueId:t})=>o().find((e=>e.value.id===t)))),y=Ei(e,"getItemValue",3,(({valueId:t})=>b()({valueId:t}).value)),$=Ei(e,"getDefaultItemSublime",3,(()=>o()[0].id)),O=Ei(e,"uiOn",3,(t=>{t.color="success",t.outlined=!1})),w=Ei(e,"uiOff",3,(t=>{t.color=!1,t.outlined=!0}));function k(){return Array.isArray(a())?l().length:0}Mi((()=>{a()&&Array.isArray(a())?s()&&a().length&&a().forEach((t=>{S(_(t))})):function(){if(s()&&o().length>0){A({id:$()()})}}()}));const I=()=>!(s()&&1===k());function _(t){const e=m()(t);let i={on:void 0,off:void 0};return Array.isArray(l())||l([]),n()?l().includes(e)?I()&&(l().splice(l().indexOf(e),1),i.off={valueId:e}):(l().push(e),i.on={valueId:e}):s()?l().includes(e)||(k()>0&&(i.off={valueId:l().pop()}),i.on={valueId:e},l([e])):l().includes(e)?(i.off={valueId:e},l().splice(l().indexOf(e),1)):(i.on={valueId:e},l().push(e)),l(l()),i}function A(t){S(_(t)),function(){let t=[];void 0!==l()&&Array.isArray(l())&&(t=l().filter((t=>void 0!==t)).map((t=>y()({valueId:t}))));a(t)}(),i("change",{field:r(),value:a()})}function S(t){t.off&&w()(b()(t.off)),t.on&&O()(b()(t.on)),o(o())}const C=P(p);var L=Ie(),E=de(L),T=P((()=>({...f(),action(t,e){A(e)}})));Xe(E,(()=>Kt(C)),((t,e)=>{e(t,Ci(v,{get items(){return o()},set items(t){o(t)},get titleComponent(){return c()},get titleComponentProps(){return u()},get descriptionComponent(){return g()},get descriptionComponentProps(){return Kt(T)},get imageComponent(){return d()},get imageComponentProps(){return h()}}))})),_e(t,L),Zt()},UIListSelectButtonsWithGroups:function(t,e){Xt(e,!0);const i=Ri();let r=Ei(e,"fieldname",3,"list-select-tags"),n=Ei(e,"variants",31,(()=>ie([])));Ei(e,"variantsSelected",19,(()=>({})));let s=Ei(e,"value",15),o=Ei(e,"titleComponent",3,Sn),a=Ei(e,"titleComponentProps",19,(()=>({size:5}))),l=Ei(e,"imageComponent",3,da),c=Ei(e,"imageComponentProps",19,(()=>({covered:!0}))),u=Ei(e,"descriptionComponent",3,mn),d=Ei(e,"descriptionComponentProps",19,(()=>({}))),h=Ei(e,"listComponent",3,To),g=Ei(e,"listComponentProps",19,(()=>({}))),f=Ei(e,"actionsList",19,(()=>["selectAll","deselectAll"])),p=Ei(e,"sublimeValue",3,(t=>({groupId:t.group,valueId:t.id})));const v={selectAll:{title:"Выбрать все",color:"success",action(){b()}},deselectAll:{title:"Снять выделение со всех",color:"",action(){y()}}};let m=T(ie([]));Mi((()=>{f().forEach((t=>{Object.hasOwn(v,t)&&Kt(m).push(v[t])})),R(m,ie(Kt(m)))}));const b=()=>{O(!0)},y=()=>{O(!1)},$=(t,e)=>{n().forEach((i=>{t===i.id&&i.description.values.forEach((t=>{t.selected=e}))})),n(n()),k()},O=t=>{n().forEach((e=>{e.description.values.forEach((e=>{e.selected=t}))})),n(n()),k()};function w(){let t={};return n().forEach((e=>{Object.hasOwn(t,e.id)||(t[e.id]=[]),e.description.values.forEach((i=>{i.selected&&t[e.id].push(p()(i.value))}))})),t}function k(){s(w()),i("change",{fieldname:r(),value:s()})}const I=P(h);var _=vl(),A=de(_);hn(A,{get values(){return Kt(m)},centered:!0});var S=he(A,2),C=P((()=>({action:(t,e,i)=>(setTimeout(k,0),!i),...d()})));return Xe(S,(()=>Kt(I)),((t,e)=>{e(t,Ci(g,{get items(){return n()},set items(t){n(t)},get titleComponent(){return o()},get titleComponentProps(){return a()},get descriptionComponent(){return u()},get descriptionComponentProps(){return Kt(C)},get imageComponent(){return l()},get imageComponentProps(){return c()}}))})),_e(t,_),Zt({selectAll:b,deselectAll:y,selectGroup:t=>{$(t,!0)},deselectGroup:t=>{$(t,!1)},setSelectionOfGroup:$,setSelectionOfAll:O,getSelectedItems:w})},UIListSelectWithGroups:function(t,e){Xt(e,!0);const i=Ri();let r=Ei(e,"fieldname",3,"list-select-tags"),n=Ei(e,"multiple",3,!1),s=Ei(e,"onlyOneInGroup",3,!0),o=Ei(e,"atLeastOne",3,!0),a=Ei(e,"variants",31,(()=>ie([]))),l=Ei(e,"variantsSelected",31,(()=>ie({}))),c=Ei(e,"value",15),u=Ei(e,"titleComponent",3,Sn),d=Ei(e,"titleComponentProps",19,(()=>({size:5}))),h=Ei(e,"imageComponent",3,da),g=Ei(e,"imageComponentProps",19,(()=>({covered:!0}))),f=Ei(e,"descriptionComponent",3,hn),p=Ei(e,"descriptionComponentProps",19,(()=>({}))),v=Ei(e,"listComponent",3,To),m=Ei(e,"listComponentProps",19,(()=>({}))),b=Ei(e,"sublimeValue",3,(t=>({groupId:t.group,valueId:t.id}))),y=Ei(e,"getItem",3,(({groupId:t,valueId:e})=>a().find((e=>e.id===t)).description.values.find((t=>t.value.id===e)))),$=Ei(e,"getItemValue",3,(({groupId:t,valueId:e})=>y()({groupId:t,valueId:e}).value)),O=Ei(e,"getDefaultItemSublime",3,(()=>({groupId:a()[0].id,valueId:a()[0].description.values[0].value.id}))),w=Ei(e,"uiOn",3,(t=>{t.color="success",t.outlined=!1})),k=Ei(e,"uiOff",3,(t=>{t.color=!1,t.outlined=!1}));function I(t){const{valueId:e,groupId:i}=b()(t);let r={on:void 0,off:void 0};return n()?(s()?(void 0!==l()[i]&&(r.off={groupId:i,valueId:l()[i]}),l(l()[i]=e,!0),r.on={groupId:i,valueId:e}):(Array.isArray(l()[i])||l(l()[i]=[],!0),l()[i].includes(e)?function(){let t=0;if(n())for(let e of Object.values(l()))s()?void 0!==e&&(t+=1):void 0!==e&&Array.isArray(e)&&(t+=e.length);else void 0!==l()&&void 0!==l().value&&void 0!==l().group&&(t+=1);return t}()>1&&(l()[i].splice(l()[i].indexOf(e),1),r.off={groupId:i,valueId:e}):(l()[i].push(e),r.on={groupId:i,valueId:e}),l(l()[i]=l()[i],!0)),l(l())):l()&&l().groupId===i&&l().valueId===e?o()||(l(void 0),r.off={groupId:i,valueId:e}):(l()&&void 0!==l().groupId&&(r.off={groupId:l().groupId,valueId:l().valueId}),r.on={groupId:i,valueId:e},l({groupId:i,valueId:e})),r}function _(t){let e=I(t);console.log("image value",c(),e),A(e),function(){if(n()){let t={};if(s())for(let e in l())void 0!==l()[e]&&(t[e]=$()({groupId:e,valueId:l()[e]}));else for(let e in l())void 0!==l()[e]&&Array.isArray(l()[e])&&(t[e]=l()[e].filter((t=>void 0!==t)).map((t=>$()({groupId:e,valueId:t}))));0==Object.keys(t).length?c(void 0):c(t)}else l()?c($()(l())):c(void 0)}(),i("change",{field:r(),value:c()})}function A(t){t.off&&k()(y()(t.off)),t.on&&w()(y()(t.on)),a(a())}Mi((()=>{if(c())if(n())if(s())for(let t of Object.keys(c())){A(I(c()[t]))}else for(let t of Object.keys(c()))c()[t].forEach((t=>{A(I(t))}));else{A(I(c()))}else!function(){if(o()&&a().length>0){const t=O()();_({id:t.valueId,group:t.groupId})}}()}));const S=P(v);var C=Ie(),L=de(C),E=P((()=>({...p(),action(t,e){_(e)}})));Xe(L,(()=>Kt(S)),((t,e)=>{e(t,Ci(m,{get items(){return a()},set items(t){a(t)},get titleComponent(){return u()},get titleComponentProps(){return d()},get descriptionComponent(){return f()},get descriptionComponentProps(){return Kt(E)},get imageComponent(){return h()},get imageComponentProps(){return g()}}))})),_e(t,C),Zt()}});function bl(t,e,i){e()&&i(t)}function yl(t,e){e()}var $l=we("<button></button>"),Ol=we('<div role="button" tabindex="0"><!> <!></div>');function wl(t,e){Xt(e,!0);let i=T("");const r=Ri();let n=Ei(e,"closeButton",3,!1),s=Ei(e,"show",3,!0),o=Ei(e,"closeOnClick",3,!0),a=Ei(e,"closeSize",3,"normal"),l=Ei(e,"layer",3,1),c=Ei(e,"classes",3,"");function u(t){try{if(t&&t.originalTarget){const e=t.originalTarget;e.classList&&e.classList.contains("is-overlay")&&d()}}catch(t){}}function d(t={}){r("reject",t)}var g;Fi((()=>{s()?document.body.style.overflow="hidden":document.body.style.overflow=Kt(i)})),Mi((()=>{R(i,ie(document.body.style.overflow))})),g=()=>{document.body.style.overflow=Kt(i)},null===Nt&&vt(),Mi((()=>()=>Gt(g)));var f=Ie();je(de(f),s,(t=>{var i=Ol();i.__click=[bl,o,u],i.__keyup=[bl,o,u];var r=ue(i);je(r,n,(t=>{var e=$l();e.__click=[yl,d],Z((()=>ni(e,`delete is-${a()??""}`))),_e(t,e)})),Qe(he(r,2),(()=>e.children??h)),Z((()=>{ni(i,`is-overlay not-overlay ${c()??""}`),ei(i,"style",`z-index: ${1e3*l()??""};`)})),gi(3,i,(()=>qn)),_e(t,i)})),_e(t,f),Zt()}be(["click","keyup"]);var kl=we('<div><span class="title"> </span></div> <!> <!> <!>',1),Il=we("<!> <!>",1);var _l=we("<div><!> <!> <!></div>");function Al(t,e){Xt(e,!0);const i=xi();let r=Ri(),n=Ei(e,"show",3,!0),s=Ei(e,"term",15,""),o=Ei(e,"size",3,"narrow"),a=Ei(e,"inputComponent",3,jn),l=Ei(e,"inputComponentProps",19,(()=>({}))),c=Ei(e,"outputComponent",3,pl),u=Ei(e,"outputComponentProps",19,(()=>({}))),d=Ei(e,"results",31,(()=>ie({list:[],page:0,pages:0,skip:0,count:0})));Mi((()=>{}));const h=[{title:Ti(Xi,"$LOCALE",i)["not-node:button_cancel_label"],action:()=>{r("reject")}}];function g({detail:t}){console.log("selected user",t),r("resolve",t)}wl(t,{get show(){return n()},closeOnClick:!0,closeButton:!1,$$events:{reject:function(){r("reject")}},children:(t,i)=>{var r=_l();const n=P(a),f=P(c);var p=ue(r);Xe(p,(()=>Kt(n)),((t,i)=>{i(t,Ci({get term(){return s()},set term(t){s(t)}},l,{$$events:{termChange(t){Ii.call(this,e,t)}}}))}));var v=he(p,2);Xe(v,(()=>Kt(f)),((t,i)=>{i(t,Ci({get data(){return d()},set data(t){d(t)}},u,{$$events:{prev(t){Ii.call(this,e,t)},next(t){Ii.call(this,e,t)},select:g}}))})),hn(he(v,2),{values:h,centered:!0,classes:"mt-5"}),Z((()=>ni(r,`paper box block ${o()??""} svelte-1gllhdk`))),_e(t,r)},$$slots:{default:!0}}),Zt()}var Sl=Object.freeze({__proto__:null,UIGenericSelector:Al,UIModal:function(t,e){Xt(e,!0);const i=xi(),r=()=>Ti(Xi,"$LOCALE",i);let n=Ei(e,"buttonsPosition",3,"bottom"),s=Ei(e,"closeButton",3,!1),o=Ei(e,"applyButton",3,!1),a=Ei(e,"titleSize",3,2),l=Ei(e,"show",3,!1),c=Ei(e,"loading",3,!1),u=Ei(e,"title",3,"Modal window"),d=Ei(e,"subtitle",3,""),g=Ei(e,"classes",3,""),f=Ei(e,"overlayClasses",3,""),p=Ei(e,"buttonsClasses",3,""),v=Ei(e,"WAITING_TEXT",3,"Обработка");wl(t,{get show(){return l()},closeOnClick:!1,closeButton:!1,get classes(){return f()},children:(t,i)=>{Vi(t,{get classes(){return g()},children:(t,i)=>{var l=Il(),g=de(l);Sn(g,{get size(){return a()},get title(){return r()[u()]},get subtitle(){return r()[d()]}}),Ki(he(g,2),{children:(t,i)=>{var a=kl(),l=de(a),u=ue(l),d=ue(u),g=he(l,2);je(g,(()=>"top"===n()),(t=>{var e=P((()=>s()?[s()]:[])),i=P((()=>o()?[o()]:[]));fn(t,{get classes(){return p()},get left(){return Kt(e)},get right(){return Kt(i)}})}));var f=he(g,2);Qe(f,(()=>e.children??h)),je(he(f,2),(()=>"bottom"===n()),(t=>{var e=P((()=>p()||"is-footer is-mobile")),i=P((()=>s()?[s()]:[])),r=P((()=>o()?[o()]:[]));fn(t,{get classes(){return Kt(e)},get left(){return Kt(i)},get right(){return Kt(r)}})})),Z((()=>{ni(l,`pageloader ${(c()?"is-active":"")??""}`),Me(d,r()[v()])})),_e(t,a)},$$slots:{default:!0}}),_e(t,l)},$$slots:{default:!0}})},$$slots:{default:!0}}),Zt()},UIOverlay:wl}),Cl=we('<article class="message is-danger"><div class="message-header"><p> </p></div> <div class="message-body"> </div></article>');function Ll(t,e){Xt(e,!0);const i=xi(),r=()=>Ti(Xi,"$LOCALE",i);var n=Cl(),s=ue(n),o=ue(s),a=ue(o),l=ue(he(s,2));Z((()=>{Me(a,r()[e.title]),Me(l,r()[e.message])})),_e(t,n),Zt()}var El=we('<article class="message is-success"><div class="message-header"><p> </p></div> <div class="message-body"> </div></article>');function Tl(t,e){Xt(e,!0);const i=xi(),r=()=>Ti(Xi,"$LOCALE",i);var n=El(),s=ue(n),o=ue(s),a=ue(o),l=ue(he(s,2));Z((()=>{Me(a,r()[e.title]),Me(l,r()[e.message])})),_e(t,n),Zt()}function xl(t,e){localStorage.setItem("cookie_date",Date.now()),e(!1)}var Fl=we('<div id="cookie_notification" class="svelte-19d5xat"><p class="svelte-19d5xat"> </p> <button class="button is-success cookie_accept svelte-19d5xat"> </button></div>');be(["click"]);var Nl=Object.freeze({__proto__:null,UICookieNotification:function(t,e){Xt(e,!0);const i=xi(),r=()=>Ti(Xi,"$LOCALE",i);let n=Ei(e,"show",15,!1),s=Ei(e,"message",3,"Для улучшения работы сайта и его взаимодействия с пользователями мы используем файлы cookie. Продолжая работу с сайтом, Вы разрешаете использование cookie-файлов. Вы всегда можете отключить файлы cookie в настройках Вашего браузера."),o=Ei(e,"agree",3,"Хорошо");Mi((()=>{let t=localStorage.getItem("cookie_date");(!t||+t+31536e6<Date.now())&&n(!0)}));var a=Ie();je(de(a),n,(t=>{var e=Fl(),i=ue(e),a=ue(i),l=he(i,2);l.__click=[xl,n];var c=ue(l);Z((()=>{Me(a,r()[s()]),Me(c,r()[o()])})),_e(t,e)})),_e(t,a),Zt()},UIError:Ll,UISuccess:Tl}),Ml=Object.freeze({__proto__:null,Blocks:Gi,Buttons:bn,Forms:Ya,Icons:sl,Images:al,Layouts:Bo,Links:ll,Lists:ml,Modals:Sl,Notifications:Nl,UICommon:Kr,Various:Wn});const Rl=Symbol("init"),Ul=Symbol("data"),Dl=Symbol("working"),Pl=Symbol("options");class jl extends lr{constructor(t){return super(),this[Ul]={},this[Dl]={},this[Pl]={},this[Rl](t),this}[Rl](t){t||(t={}),Object.hasOwn(t,"data")&&this.setData(t.data),Object.hasOwn(t,"working")&&this.setWorking(t.working),Object.hasOwn(t,"options")&&this.setOptions(t.options),this.log=Ir.genLogMsg(this.getWorking("name")),this.info=this.log,this.debug=Ir.genLogDebug(this.getWorking("name")),this.error=Ir.genLogError(this.getWorking("name"))}setCommon(t,e){switch(e.length){case 1:t=e[0];break;case 2:br.set(e[0],t,void 0,e[1])}return this}getCommon(t,e){switch(e.length){case 1:return br.get(e[0],t);case 2:{let i=br.get(e[0],t);return void 0===i?e[1]:i}default:return t}}setData(){return 1===arguments.length?this[Ul]=arguments[0]:this.setCommon(this.getData(),arguments),this.emit("change"),this}getData(){return this.getCommon(this[Ul],arguments)}setOptions(){return 1===arguments.length?this[Pl]=arguments[0]:this.setCommon(this.getOptions(),arguments),this}getOptions(){return this.getCommon(this[Pl],arguments)}setWorking(){return 1===arguments.length?this[Dl]=arguments[0]:this.setCommon(this.getWorking(),arguments),this}getWorking(){return this.getCommon(this[Dl],arguments)}report(t){Ir.report&&Ir.report(t)}getApp(){return Ir.getApp()}destroy(){this.removeEvent(),this.setOptions(null),this.setWorking(null),this.setData(null),this.emit("destroy")}}const Wl=Symbol("history"),Bl=Symbol("hash");var zl=new class extends jl{constructor(){return super({working:{routes:[],mode:Wl,root:"/",initialized:!1,delays:$n,delay_default:On}}),pr(this,"host",""),this}setDelays(t){return this.setWorking("delays",t),this}setDefaultNavigationDelay(t){return this.setWorking("delay_default",this.delayAsMs(t)),this}getDefaultNavigationDelay(){return this.getWorking("delay_default",On)}delayAsMs(t){return"number"==typeof t?t:"string"==typeof t&&t.length>0?this.getWorking(`delays.${t}`,this.getDefaultNavigationDelay()):this.getDefaultNavigationDelay()}navigateWithDelay(t,e,i){var r=this;return setTimeout((function(){"function"==typeof i&&i(),r.navigate(t)}),this.delayAsMs(e))}history(){this.setWorking("mode",Wl)}hash(){this.setWorking("mode",Bl)}setRoot(t){return this.setWorking("root",t&&"/"!==t?"/"+this.clearSlashes(t)+"/":"/"),this}clearSlashes(t){return t.toString().replace(/\/$/,"").replace(/^\//,"")}add(t,e){"function"==typeof t&&(e=t,t="");let i={re:t,handler:e};return this.getWorking("routes").push(i),this}addList(t){for(let e in t)this.add(e,t[e]);return this}remove(t){for(var e,i=0;this.getWorking("routes").length,e=this.getWorking("routes")[i];i++)if(e.handler===t||e.re===t)return this.getWorking("routes").splice(i,1),this;return this}flush(){return this.setWorking({routes:[],mode:Wl,root:"/"}),this}isInitialized(){return this.getWorking("initialized")}setInitialized(t=!0){return this.setWorking("initialized",t)}getFragment(){var t="";if(this.getWorking("mode")===Wl){if(!location)return"";t=(t=this.clearSlashes(decodeURI(location.pathname+location.search))).replace(/\?(.*)$/,""),t="/"!=this.getWorking("root")?t.replace(this.getWorking("root"),""):t}else{if(!window)return"";var e=window.location.href.match(/#(.*)$/);t=e?e[1]:""}return this.clearSlashes(t)}checkLocation(){let t=this.getWorking("current"),e=this.getFragment(),i=this.isInitialized();t===e&&i||(this.setWorking("current",e),this.check(e),this.setInitialized(!0))}hrefClick(){}getRoot(){return this.getWorking("root")}listen(t=50){return this.setWorking("current","notInitialized"),clearInterval(this.getWorking("interval")),this.setWorking("interval",setInterval(this.checkLocation.bind(this),t)),window.addEventListener("popstate",this.hrefClick.bind(this)),this}check(t){let e=t||this.getFragment(),i=null;for(let t=0;t<this.getWorking("routes").length;t++){let r=this.getWorking("root")+this.getWorking("routes")[t].re,n=this.clearSlashes(decodeURI(r)),s=e.match(n);if(s&&s.length){if(""!==n)return s.shift(),this.getWorking("routes")[t].handler.apply(this.host||{},s),this.emit("afterRoute",this.getWorking("routes")[t]),this;s.shift(),i={route:this.getWorking("routes")[t],match:s}}}return i&&(i.route.handler.apply(this.host||{},i.match),this.emit("afterRoute",i.route)),this}refresh(t=0){var e=this;t>0?setTimeout((function(){return e.refresh()}),t):this.check(this.getWorking("current"))}navigate(t){switch(t=t||"",this.getWorking("mode")){case Wl:{const e=this.getFullRoute(t);e===this.lastRoute?this.refresh():(this.lastRoute=e,history.pushState(null,"",this.lastRoute));break}case Bl:window.location.href.match(/#(.*)$/),window.location.href=window.location.href.replace(/#(.*)$/,"")+"#"+t}return this}getFullRoute(t=""){t=this.clearSlashes(t);const e=this.getWorking("root");return"/"!==e&&0===t.indexOf(e.substring(1))?"/"+t:this.getWorking("root")+this.clearSlashes(t)}getAllLinks(){const t=document.body.querySelectorAll("a");let e=[];for(let i=0;i<t.length;i++)for(let r=0,n=t[i].attributes,s=n.length;r<s;r++)if(0===n[r].nodeName.indexOf("n-href")){e.push(t[i]);break}return e}reRouteExisted(){const t=this.getAllLinks();for(let e=0;e<t.length;e++)this.initRerouting(t[e],t[e].getAttribute("n-href"));return this}initRerouting(t,e){var i=this;if(!t.notRouterInitialized){let r=this.getFullRoute(e);t.setAttribute("href",r),t.addEventListener("click",(function(t){return t.preventDefault(),i.navigate(e),!1})),t.notRouterInitialized=!0}return this}};class Vl extends jl{constructor(t={}){return super({working:{name:t.name?t.name:"APIQuee"},options:t}),this.busy=!1,this.queue=[],this.busySince=-1,this.afterEmpty=void 0,this.start(),this}stop(){this.interval&&(clearInterval(this.interval),this.interval=void 0,this.busy=!1,this.busySince=-1)}start(){this.stop(),this.interval=setInterval(this.checkQueue.bind(this),this.QUEUE_CHECK_INTERVAL)}checkQueue(){var t=this;if(this.isEmpty()||this.isBusy()){if(!this.isBusy()&&this.afterEmpty){let t=this.afterEmpty;this.afterEmpty=void 0,t()}}else this.setBusy().runNext().then(this.setFree.bind(this)).catch((function(e){t.error&&t.error(e),t.setFree()}))}addToQueue(t){this.queue.push(t)}runNext(){let t=this.queue.map((function(t){return t.title})).join(", ");this.debug&&this.debug(`tasks [${t}]`);let e=this.queue.shift();return Ir.isFunc(e.action)?Ir.isFunc(e.resolve)?e.action().then(e.resolve):(this.error&&this.error("В задании нет возвратной части, resolve не функция",e.title),e.action()):(this.error&&this.error("В задании нет исполнимой части, action не функция",e.title),Promise.resolve())}isBusy(){let t=!!this.busy,e=Date.now()/1e3;return!!(t&&this.busySince>-1)&&(!(e-this.busySince>Vl.MAX_BUSY_TIME)||(this.setFree(),!1))}setBusy(){return this.busy=!0,this.busySince=Date.now()/1e3,this}setFree(){return this.busy=!1,this.busySince=-1,this}isEmpty(){return 0===this.queue.length}run(t,e=void 0,i=""){var r=this;return e&&void 0===this.afterEmpty&&(this.afterEmpty=e),new Promise((function(e,n){try{r.addToQueue({action:t,resolve:e,title:i})}catch(t){r.error&&r.error(t),n(t)}}))}actionIsQueued(t){return this.queue.some((function(e){return e.title==t}))}runIfNotQueued(t,e=void 0,i=""){return this.actionIsQueued(i)?Promise.resolve():this.run(t,e,i)}}pr(Vl,"QUEUE_CHECK_INTERVAL",100),pr(Vl,"MAX_BUSY_TIME",300);class ql extends jl{constructor(t){return super({options:t,working:{name:t.name?t.name:"APIConnection"}}),this.online=null,this.run(),this}run(){this.int=window.setInterval(this.check.bind(this),1e3)}pause(){window.clearInterval(this.int)}resume(){this.run()}isOnline(){return window.navigator.onLine}check(){let t=this.isOnline();null!==this.online&&this.online!==t&&this.changeState(t),this.online=t}changeState(t=!1){t?this.emit("online"):this.emit("offline")}}pr(ql,"int",void 0),pr(ql,"online",void 0);var Hl=Object.freeze({__proto__:null,notAPIConnection:ql,notAPIOptions:{rps:50,protocol:"http",host:"localhost",port:9e3},notAPIQueue:Vl});const Kl={};function Gl(t){return Ir.objHas(Kl,t)}var Jl=Object.freeze({__proto__:null,create:function(t,e={raw:[],filtered:[],selected:{}}){if(!Gl(t)){if(!(Object.keys(e).length>0))throw new Error("store's props wasn't specified");Kl[t]={},Object.keys(e).forEach((function(i){Kl[t][i]=Yi(e[i])}))}return Kl[t]},fake:function(t){return{subscribe:e=>(e(t),function(){}),set(){}}},get:function(t){return!!Gl(t)&&Kl[t]}});const Yl=Symbol("interface"),Ql=["getActionsCount","getActions","setFindBy","resetFilter","setFilter","getFilter","setSorter","getSorter","resetSorter","setPageNumber","setPageSize","setPager","setReturn","setSearch","getSearch","resetSearch","resetPager","getPager","addFormFieldType","addFormField","getFieldTypes","getActionFormFields"],Xl=["_id","id","ID"],Zl={},tc={};class ec extends jl{constructor(t,e){return super({working:{name:"network interface for: "+(t.model?t.model:"unknown"),filter:Zl,search:"",return:tc,pager:{size:10,page:0}},options:e}),this.manifest=t,this.initActions(),this}initActions(){if(this.getActionsCount()>0){let t=this.getActions();for(let e in t)this.initAction(e)}}initAction(t){var e=this;Ir.objHas(this,"$"+t)||(this["$"+t]=function(i,r,n=!1,s){return e.request(e,t,i,r,n,s)})}requestHTTP(t,e,i,r={},n=!1,s){try{let o=Object.assign({},t.getData&&"function"==typeof t.getData?t.getData():t,i),a=this.getActionData(e),l=this.collectRequestData(a),c=this.encodeRequest(l),u=this.getServerURL(),d=this.getURL(o,a,e),h={};if(n){d=this.getURL(i,a,e);const t=new FormData;t.append("file",s),h.body=t}else-1===["OPTIONS","GET"].indexOf(a.method.toUpperCase())&&(h={method:a.method,body:JSON.stringify(t.getData&&"function"==typeof t.getData?t.getData():t),headers:{Accept:"application/json","Content-Type":"application/json"}});return h.method=a.method.toUpperCase(),r&&Object.keys(r).length&&(h.headers=r),fetch(u+d+c,h).then((function(t){return t.json()}))}catch(t){Ir.error(t),Ir.report(t)}}requestWS(t,e){try{let i=this.getActionData(e),r=this.collectRequestData(i);const n=Ir.getApp().getWSClient(),s=this.getWSRequestName(e),o=Object.assign({},r,t.getData());return Ir.objHas(i,"type")&&"string"==typeof i.type&&i.type.length&&"request"!==i.type?n.message(i.type,s,o).then((function(t){return t.payload})):n.request(s,o).then((function(t){return t.payload}))}catch(t){Ir.error(t),Ir.report(t)}}request(){let t=this.getActionData(arguments[1]);switch(this.selectTransport(t)){case"ws":return this.requestWS(...arguments);case"http":return this.requestHTTP(...arguments);default:throw new Error("Offline")}}wsIsUp(t){if(!0===t.ws){let e;if(e=Ir.objHas(t,"wsClient")&&t.wsClient?Ir.getApp().getWSClient(t.wsClient):Ir.getApp().getWSClient(),e)return!0}return!1}selectTransport(t){return this.wsIsUp(t)?"ws":!!Ir.objHas(t,"method")&&"http"}getModelName(){return this&&this.manifest?this.manifest.model:null}getActionData(t){return this.getActions()&&this.getActions()[t]?this.getActions()[t]:null}getActionsCount(){return this.getActions()?Object.keys(this.getActions()).length:0}getActions(){return this.manifest&&this.manifest.actions?this.manifest.actions:{}}parseParams(t,e,i,r){let n="",s=t.length;for(;i.indexOf(t)>-1;){let o=i.indexOf(t),a=o+s,l=i.indexOf(e);if(o>l)break;if(n=i.slice(a,l),""==n)break;this.log&&this.log(t+n+e,br.get(n,r)),i=i.replace(t+n+e,br.get(n,r))}return i}parseLine(t,e,i){return t=(t=t.replace(":modelName",this.manifest.model)).replace(":actionName",i),t=this.parseParams(":record[","]",t,e),t=this.parseParams(":","?",t,e)}getURL(t,e,i){return this.parseLine(this.manifest.url,t,i)+(Ir.objHas(e,"postFix")?this.parseLine(e.postFix,t,i):"")}getServerURL(){return Ir.getApp()?Ir.getApp().getOptions("api.server.url",""):""}getWSRequestName(t){return`${this.manifest.model}//${t}`}encodeRequest(t){let e="?";for(let i in t)void 0!==t[i]&&null!==t[i]&&(e+=encodeURIComponent(i)+"="+encodeURIComponent(t[i].constructor===Object?JSON.stringify(t[i]):t[i])+"&");return this.getOptions("test")&&(e+="&test=1",this.getOptions("test.session")&&(e+="&session="+this.getOptions("test.session")),this.getOptions("test.session")&&(e+="&role="+this.getOptions("test.role"))),e}collectRequestData(t){let e={};if(Ir.objHas(t,"data")&&Array.isArray(t.data))for(let i=0;i<t.data.length;i++){let r="get"+Ir.capitalizeFirstLetter(t.data[i]);if(this[r]&&"function"==typeof this[r]){let n=this[r](),s={};["pager","sorter","filter","search","return"].indexOf(t.data[i])>-1?s[t.data[i]]=n:s=n,e=Object.assign(e,s)}}return e}getID(t,e){let i,r=Xl,n=["",this.manifest.model];Ir.objHas(e,"index")&&e.index&&(r=[e.index].concat(Xl));for(let e of n)for(let n of r)if(Ir.objHas(t,e+n)){i=t[e+n];break}return i}setFindBy(t,e){var i={};return i[t]=e,this.setFilter(i)}setFilter(t=Zl){return this.setWorking("filter",t),this}resetFilter(){return this.setFilter()}getFilter(){return this.getWorking("filter")}setSearch(t=""){return this.setWorking("search",t),this}resetSearch(){return this.setSearch()}getSearch(){return this.getWorking("search")}setSorter(t){return this.setWorking("sorter",t),this}resetSorter(){return this.setSorter({})}getSorter(){return this.getWorking("sorter")}setReturn(t=tc){return this.setWorking("return",t),this}resetReturn(){return this.setReturn({})}getReturn(){return this.getWorking("return")}setPageNumber(t){return this.setWorking("pager.page",t),this}setPageSize(t){return this.setWorking("pager.size",t),this}setPager(){if((arguments.length<2||isNaN(arguments[0])||isNaN(arguments[1]))&&arguments[0].constructor===Object&&Ir.objHas(arguments[0],"page")&&Ir.objHas(arguments[0],"size")){const t=arguments[0];this.setWorking("pager",{size:t.size||10,page:t.page||0})}else 2!==arguments.length||isNaN(arguments[0])||isNaN(arguments[1])||this.setWorking("pager",{size:arguments[0]||10,page:arguments[1]||0});return this}resetPager(){return this.setPager()}getPager(){return this.getWorking("pager")}getRecord(){this.getData()}getDefaultAsPlainObject(){if(!this.manifest||!this.manifest.fields)return{};const t={};for(const e of Object.keys(this.manifest.fields))if(Object.hasOwn(this.manifest.fields[e],"default")){const i=this.manifest.fields[e].default;Array.isArray(i)?t[e]=[...i]:t[e]="object"==typeof i?{...i}:i}return t}}class ic extends jl{constructor(t,e){return super(),null==e||"object"!=typeof e?e:e&&e.isProxy?(Ir.error("this is Proxy item"),e):e&&(e.isRecord||e.isProperty)?e:Array.isArray(e)?this.createCollection(t,e):(this.setOptions({}),this[Yl]=new ec(t,{}),this.setData(e),this.interfaceUp(),this.mapToInterface(),this.mapToMethods(),this)}toDefault(){return this.setData(this[Yl].getDefaultAsPlainObject())}mapToInterface(){let t=this;for(let e of Ql)this[Yl][e]&&"function"==typeof this[Yl][e]&&(this[e]=function(){let i=t[Yl][e](...arguments);return i==t[Yl]?t:i})}mapToMethods(){let t=this[Yl].manifest,e=Ir.getApp(),i={};if(t.methods?i=t.methods:e&&(i=e.getOptions(["models",this[Yl].manifest.model].join("."),{})),i)for(let t in i)Object.hasOwn(i,t)&&(this[t]=i[t])}createCollection(t,e){for(var i=[],r=0;r<e.length;r++)i.push(new ic(t,e[r]));return i}interfaceUp(){if(this[Yl].getActionsCount()>0){let t=this[Yl].getActions();for(let e in t)this.actionUp(e,t[e])}}actionUp(t){var e=this;Object.hasOwn(this,["$"+t])||(this["$"+t]=function(...i){return e[Yl].request(e,t,...i)})}setAttr(t,e){return this.setData(t,e)}setAttrs(t){if(t&&"object"==typeof t&&Object.keys(t).length>0)for(let e in t)this.setAttr(e,t[e])}getAttr(t,e=!1){let i=this.getData(t,{});return e?Ir.stripProxy(i):i}getAttrs(t){let e=[];if(t&&t.length>0)for(let i of t)e.push(this.getAttr(i));return e}getManifest(){return this[Yl]?this[Yl].manifest:{}}setItem(t){return this.setData(t),this}}const rc="main";class nc extends jl{constructor(t){return super({working:{name:t.name,interfaces:{},controllers:Ir.objHas(t,"controllers")?t.controllers:{},initController:null,currentController:null,uis:{},wsc:{},wss:{},services:{}},options:t}),this?.log&&this.log("start app"),Ir.register("app",this),this.initManifest(),this}initManifest(){var t=this;Ir.getJSON(this.getOptions("manifestURL")).then((function(e){return t.setInterfaceManifest(e)})).catch((function(t){return Ir.report(t)}))}initRouter(){this.setWorking("router",zl),this.getWorking("router").setRoot(this.getOptions("router.root")),zl.reRouteExisted()}execRouter(){var t={};for(let e=0;e<this.getOptions("router.manifest").length;e++){let i=this.getOptions("router.manifest")[e],r=i.paths,n=i.schemes,s=i.controller;for(let e=0;e<r.length;e++){let i=!!(n&&Array.isArray(n)&&n.length>e)&&n[e];t[r[e]]=this.bindController(s,i)}}this.getWorking("router").addList(t).listen()}setInterfaceManifest(t){Object.freeze(t),this.setOptions("interfaceManifest",t),this.initRouter(),this.update()}getInterfaceManifest(t){return t?this.getOptions("interfaceManifest")[t]:this.getOptions("interfaceManifest")}update(){this.updateInterfaces(),this.initController(),this.startApp()}startApp(){this.initServices(),this.execRouter(),this.emit("afterStarted",this)}bindController(t,e){let i=this;return function(){new t(i,arguments,e)}}initController(){if(void 0!==this.getOptions("initController")){let t=this.getOptions("initController");this.setWorking("initController",new t(this))}}getCurrentController(){return this.getWorking("currentController")}setCurrentController(t){let e=this.getCurrentController();return e&&e.destroy&&e.destroy(),this.setWorking("currentController",t),this}createInterfaceModelFactory(t){return function(e){return new ic(t,e)}}updateInterfaces(){this.clearInterfaces();let t=this.getOptions("interfaceManifest");if(t)for(let e in t){let i=t[e],r=this.getOptions(["models",e].join("."),{});i.methods=r;const n=this.createInterfaceModelFactory(i);this.setInterface(e,n)}}getRecordName(t){return"nr"+Ir.capitalizeFirstLetter(t)}getControllerName(t){return"nc"+Ir.capitalizeFirstLetter(t)}setInterface(t,e){return this.setWorking(`interfaces.${t}`,e)}getInterfaces(){return this.getWorking("interfaces")}clearInterfaces(){return this.setWorking("interfaces",{}),this}setWSClient(t=rc,e){return this.setWorking(`wsc.${t}`,e)}getWSClient(t=rc){return this.getWorking(`wsc.${t}`)}getInterface(t){return this.getInterfaces()[t]}getModel(t,e={}){return this.getInterface(t)(e)}setService(t,e){return this.setWorking(`services.${t}`,e)}getService(t){return this.getWorking(`services.${t}`)}initServices(){if(this.getOptions("services"))for(let t in this.getOptions("services"))try{let e=this.getOptions(`services.${t}`);switch(Ir.detectType(e)){case"function":case"class":this.setService(t,new e(this));break;default:this.setService(t,e)}}catch(e){this?.error&&this.error(`Service (${t}) init error`,e)}}getConfigReaderForModule(t=""){var e=this;const i=["modules",t].join(".");return{get:function(t,r){return t&&"string"==typeof t&&t.length?e.getOptions([i,t].join("."),r):e.getOptions(i,r)}}}moduleConfig(t=""){return this.getConfigReaderForModule(t)}}pr(nc,"DEFAULT_WS_CLIENT_NAME",rc);const sc="default",oc="main";class ac extends jl{static get MODULE_NAME(){return oc}static get MODEL_NAME(){return"ModelName"}static get LABELS(){return{plural:`${oc}:model_label_plural`,single:`${oc}:model_label_single`}}constructor(t,e){var i;super({}),i=this,pr(this,"els",void 0),pr(this,"make",void 0),pr(this,"app",void 0),this.app=t,this.app.setCurrentController(this),this.setWorking({name:e,ready:!1,views:{},libs:{},helpers:{}}),this.ui={},this.els={},this.setData({}),this.setOptions({moduleName:oc,containerSelector:"main.content",prefix:t.getOptions("paths.module"),names:{plural:"Models",single:"Model"}}),this.setURLPrefix(t.getOptions("router.root"));let r=t.getInterfaces();this.make={};for(let t in r)Object.hasOwn(r,t)&&(this.make[t]=r[t]);return this.on("destroy",(function(){i.app=null;for(let t in i.ui)i.ui[t].destroy&&i.ui[t].destroy(),i.ui[t].$destroy&&i.ui[t].$destroy(),i.ui[t]=null;i.els=null,i.make=null})),this}getApp(){return Ir.getApp()}setModel(t){return this.setWorking("model",t),this}getModel(t,e){if("string"==typeof t){const i=this.getInterface(t);return i&&i(e||{})}{const e=this.getInterface();return e&&e(t||{})}}getInterface(t=""){return this.app?.getInterface(t||this.getModelName())}getModelName(){return this.getWorking("modelName")}setModelName(t){return this.setWorking("modelName",Ir.lowerFirstLetter(t)),this}getModelIDFieldName(){return this.getWorking("modelIDFieldName","_id")}setModelIDFieldName(t="_id"){return this.setWorking("modelIDFieldName",t)}setReady(t=!0){this.setWorking("ready",t),t?this.emit("ready"):this.emit("busy")}setURLPrefix(t){return this.setOptions("urlPrefix",t),this.updateAutoName(),this}getURLPrefix(){return this.getOptions("urlPrefix")}setModuleName(t){return this.setOptions("moduleName",Ir.lowerFirstLetter(t)),this.updateAutoName(),this}getModuleName(){return this.getOptions("moduleName")}getModulePrefix(){return[Ir.getApp().getOptions("paths.modules"),this.getModuleName()].join("/")}getModelURL(){return Ir.buildURL({prefix:this.getURLPrefix(),module:this.getModuleName(),model:this.getModelName()})}getModelActionURL(t,e=""){return Ir.buildURL({prefix:this.getURLPrefix(),module:this.getModuleName(),model:this.getModelName(),id:t,action:e})}buildURL(t){return Ir.buildURL(t)}updateAutoName(){return this.getOptions("autoName",true),this}setName(t){return this.setWorking("name",t),this.setOptions("autoName",!1),this}getName(){return this.getWorking("name")}preloadLib(t={}){var e=this;return new Promise((function(i,r){if("object"!=typeof t)i(void 0);else{e.setWorking("loading",[]);for(let n in t)e.getWorking("loading").push(t[n]),e.make[t[n]]({}).$listAll().then((function(r){e.getOptions("libs")||e.setOptions("libs",{}),e.getOptions("libs")[n]=r,e.getWorking("loading").indexOf(t[n])>-1&&e.getWorking("loading").splice(e.getWorking("loading").indexOf(t[n]),1),0===e.getWorking("loading").length&&i(void 0)})).catch((function(t){e.report(t),r()}));0===e.getWorking("loading").length&&i(void 0)}}))}onAfterRender(){this.emit("afterRender")}getActionName(t=sc){return"run"+Ir.capitalizeFirstLetter(t)}getDefaultActionName(){return this.getActionName(this.getOptions("defaultAction",sc))}route(t){let[e,...i]=t,r=this.getActionName(e||sc);"function"==typeof this[r]?(this.setCurrentAction(r),this[r](i)):this[this.getDefaultActionName()]?(this.setCurrentAction(this.getDefaultActionName()),this[this.getDefaultActionName()](i)):(this.setCurrentAction(void 0),this.error&&this.error("No action in router",t))}setCurrentAction(t){this.setWorking("action",t)}getCurrentAction(){return this.getWorking("action")}getAppOptions(){try{return this.getApp().getOptions()}catch(t){this.error&&this.error(t)}}getModuleOptions(t){try{return this.getApp().getOptions(["modules",t||this.getModuleName()].join("."))}catch(t){this.error&&this.error(t)}}getServices(t){try{return this.getApp().getOptions(["services",t||this.getModuleName()].join("."))}catch(t){this.error&&this.error(t)}}getComponents(t){try{return this.getApp().getOptions(["components",t||this.getModuleName()].join("."))}catch(t){this.error&&this.error(t)}}refresh(t=0){this.app?.getWorking("router").refresh(t)}static getControllerRoute(t=0){let e=[];this.MODULE_NAME&&this.MODULE_NAME.length>0&&e.push(Ir.lowerFirstLetter(this.MODULE_NAME)),this.MODEL_NAME&&this.MODEL_NAME.length>0&&e.push(Ir.lowerFirstLetter(this.MODEL_NAME)),e=[e.join("/")];for(let i=0;i<t;i++)e.push("/([^/]+)");return e.join("")}static getControllerRoutes(t=0){let e=[this.getControllerRoute(0)];for(let i=0;i<t;i++)e.unshift(this.getControllerRoute(i+1));return e}static getRoutes(){return{paths:this.getControllerRoutes(this.PARAMS_LENGTH),controller:this}}getRouter(){return this.app?.getWorking("router")}navigateWithDelay(t,e=1500,i=function(){}){return this.getRouter().navigateWithDelay(t,e,i)}navigate(t){return this.getRouter().navigate(t)}navigateAction(t,e="",i=0,r=function(){}){return this.navigateModuleAction(this.getModuleName(),this.getModelName(),t,e,i,r)}navigateModelAction(t,e,i="",r=0,n=function(){}){return this.navigateModuleAction(this.getModuleName(),t,e,i,r,n)}navigateModuleAction(t,e,i,r="",n=0,s=function(){}){return n?this.getRouter().navigateWithDelay(Ir.buildURL({prefix:this.getURLPrefix(),module:t,model:e,id:i,action:r}),n,s):this.getRouter().navigate(Ir.buildURL({prefix:this.getURLPrefix(),module:t,model:e,id:i,action:r}))}static getCommonMenu(t){return[{section:t.MODULE_NAME,title:t.LABELS.plural,url:`/${Ir.lowerFirstLetter(t.MODULE_NAME)}/${Ir.lowerFirstLetter(t.MODEL_NAME)}`}]}static getMenu(){}}pr(ac,"PARAMS_LENGTH",2);const lc={};function cc(t){return Object.hasOwn(lc,t)}function uc(t){return!!cc(t)&&lc[t]}function dc(t,e,i,r){return r("change",{id:e(),field:i(),value:"checkbox"===t.target.type?t.target.checked:t.target.value}),!0}var hc=we('<input type="checkbox"> <label class="label"></label>',1);be(["input"]);var gc=we("<a> </a>"),fc=we('<div class="mx-1 tags has-addons svelte-38rpfk"><span class="tag"> </span> <span><!></span></div>'),pc=we("<a> </a>"),vc=we("<span><!></span>");var mc=we("<td><!></td>");function bc(t,e){Xt(e,!0);const i=xi();let r=T("");Mi((()=>{void 0===s().type&&(Object.hasOwn(s(),"titlePath")?R(r,ie(br.get(s().titlePath,o(),a()))):Object.hasOwn(s(),"titleComposer")&&"function"==typeof s().titleComposer?R(r,ie(s().titleComposer(o(),a()))):R(r,ie(br.get(s().path,o(),a()))))}));let n=Ei(e,"getItemId",3,(t=>t._id)),s=Ei(e,"field",19,(()=>({}))),o=Ei(e,"item",19,(()=>({}))),a=Ei(e,"helpers",19,(()=>({})));var l=mc();je(ue(l),(()=>"link"===s().type),(t=>{var e=P((()=>br.get(s().path,o(),a())));Oo(t,{get values(){return Kt(e)}})}),(t=>{var e=Ie();je(de(e),(()=>"button"===s().type),(t=>{var e=P((()=>br.get(s().path,o(),a())));hn(t,{get values(){return Kt(e)}})}),(t=>{var e=Ie();je(de(e),(()=>"image"===s().type),(t=>{var e=P((()=>br.get(s().path,o(),a())));ol(t,{get values(){return Kt(e)}})}),(t=>{var e=Ie();je(de(e),(()=>"boolean"===s().type),(t=>{var e=P((()=>br.get(s().path,o(),a())));xr(t,{get values(){return Kt(e)}})}),(t=>{var e=Ie();je(de(e),(()=>"tag"===s().type),(t=>{var e=P((()=>br.get(s().path,o(),a())));!function(t,e){let i=Ei(e,"values",19,(()=>[]));var r=Ie();Ve(de(r),17,i,(t=>t.id),((t,e)=>{var i=Ie();je(de(i),(()=>Object.hasOwn(Kt(e),"value")),(t=>{var i=fc(),r=ue(i),n=ue(r),s=he(r,2);je(ue(s),(()=>Kt(e).url),(t=>{var i=gc(),r=ue(i);Z((()=>{ei(i,"href",Kt(e).url),ni(i,`${Kt(e).urlCustomClasses??""} svelte-38rpfk`),Me(r,Kt(e).value)})),_e(t,i)}),(t=>{var i=ke();Z((()=>Me(i,Kt(e).value))),_e(t,i)})),Z((()=>{Me(n,Kt(e).title),ni(s,`tag is-${Kt(e).color??""} ${Kt(e).customClasses??""} svelte-38rpfk`)})),_e(t,i)}),(t=>{var i=vc();je(ue(i),(()=>Kt(e).url),(t=>{var i=pc(),r=ue(i);Z((()=>{ei(i,"href",Kt(e).url),ni(i,`${Kt(e).urlCustomClasses??""} svelte-38rpfk`),Me(r,Kt(e).title)})),_e(t,i)}),(t=>{var i=ke();Z((()=>Me(i,Kt(e).title))),_e(t,i)})),Z((()=>ni(i,`mx-1 tag is-${Kt(e).color??""} ${Kt(e).customClasses??""} svelte-38rpfk`))),_e(t,i)})),_e(t,i)})),_e(t,r)}(t,{get values(){return Kt(e)}})}),(t=>{var e=Ie();je(de(e),(()=>"switch"===s().type),(t=>{var e=P((()=>n()(o()))),i=P((()=>br.get(s().path,o(),a())));!function(t,e){Xt(e,!0);let i=Ri(),r=Ei(e,"id",3,""),n=Ei(e,"value",15,!1),s=Ei(e,"fieldname",3,"switch"),o=Ei(e,"disabled",3,!1),a=Ei(e,"readonly",3,!1),l=Ei(e,"styling",3," is-rounded is-success ");var c=hc(),u=de(c);u.__input=[dc,r,s,i];var d=he(u,2);Z((()=>{ni(u,`switch ${l()??""}`),ei(u,"id",`edit-table-row-cell-inline-switch-${s()??""}-${r()??""}`),ei(u,"name",s()),u.readOnly=a(),u.disabled=o(),ei(d,"for",`edit-table-row-cell-inline-switch-${s()??""}-${r()??""}`)})),mi(u,n),_e(t,c),Zt()}(t,{get id(){return Kt(e)},get fieldname(){return s().path},get value(){return Kt(i)},get disabled(){return s().disabled},get readonly(){return s().readonly},$$events:{change(...t){s().onChange?.apply(this,t)}}})}),(t=>{var e=Ie();je(de(e),(()=>s().component),(t=>{var e=Ie(),i=de(e),r=P((()=>n()(o()))),l=P((()=>br.get(s().path,o(),a())));Xe(i,(()=>s().component),((t,e)=>{e(t,Ci({get id(){return Kt(r)},get fieldname(){return s().path},get disabled(){return s().disabled},get readonly(){return s().readonly},get value(){return Kt(l)}},(()=>s().options),{$$events:{change(...t){s().onChange?.apply(this,t)}}}))})),_e(t,e)}),(t=>{var e=Ie();je(de(e),(()=>s()&&void 0!==s()&&!isNaN(s().maxLength)&&s().maxLength),(t=>{var e=ke();Z((()=>Me(e,Ir.strLengthCap(br.get(s().path,o(),a()),s().maxLength)))),_e(t,e)}),(t=>{var e=ke();Z((()=>Me(e,Ti(Xi,"$LOCALE",i)[br.get(s().path,o(),a())]))),_e(t,e)}),!0),_e(t,e)}),!0),_e(t,e)}),!0),_e(t,e)}),!0),_e(t,e)}),!0),_e(t,e)}),!0),_e(t,e)}),!0),_e(t,e)})),Z((()=>{ni(l,(s().hideOnMobile?" is-hidden-touch ":"")+(s().classes?` ${s().classes} `:"")),ei(l,"title",Kt(r))})),_e(t,l),Zt()}function yc(t,e,i,r,n){return t.preventDefault(),e("rowSelectChange",{id:Kt(i),selected:r()[Kt(i)]}),!1}var $c=we('<td><input type="checkbox" placeholder=""></td>'),Oc=we("<tr><!><!></tr>");function wc(t,e){Xt(e,!0);const i=xi(),r=()=>Ti(n,"$selectedList",i);let n,s=Ri(),o=T(void 0);Mi((()=>{R(o,ie(d()(a()))),n=uc(e.id).selected}));let a=Ei(e,"item",19,(()=>({}))),l=Ei(e,"helpers",19,(()=>({}))),c=Ei(e,"fields",19,(()=>[])),u=Ei(e,"showSelect",3,!1),d=Ei(e,"getItemId",3,(()=>{}));var h=Oc(),g=ue(h);je(g,(()=>u()&&r()),(t=>{var e=$c(),i=ue(e);Z((()=>ei(i,"id",`table-row-select-${d()(a())??""}`))),Z((()=>ei(i,"data-id",d()(a())))),Z((()=>ei(i,"name",`row_selected_${d()(a())??""}`))),i.__change=[yc,s,o,r,n],mi(i,(()=>r()[Kt(o)]),(t=>{return e=n,i=Gt(r)[Kt(o)]=t,s=Gt(r),e.set(s),i;var e,i,s})),_e(t,e)})),Ve(he(g),17,c,ze,((t,e)=>{bc(t,{get field(){return Kt(e)},get helpers(){return l()},get item(){return a()},get getItemId(){return d()}})})),_e(t,h),Zt()}function kc(t,e){try{e("searchChange",t.currentTarget.value.trim())}catch(t){return}}function Ic(t,e){e("goToPrevPage")}function _c(t,e){e("goToNextPage")}function Ac(t,e){t.preventDefault();let i=t.target;return e("goToPage",parseInt(i.dataset.page)),!1}function Sc(t,e,i,r,n){uc(e.id).selected.update((t=>(i().forEach((e=>{t[r()(e)]=n()})),t)))}be(["change"]);var Cc=we('<div class="field is-grouped"><!></div>'),Lc=we('<div class="field is-grouped"><!></div>'),Ec=we('<div class="field"><div class="control"><input class="input" type="text" placeholder="Поиск"></div></div>'),Tc=we('<th><input type="checkbox" id="table-row-select-page" placeholder="" name="row_selected_all"></th>'),xc=we("<th><!></th>"),Fc=we('<a href="" class="pagination-link is-current" aria-current="page"> </a>'),Nc=we('<a href="" class="pagination-link"> </a>'),Mc=we("<li><!></li>"),Rc=we('<nav class="pagination is-centered" aria-label="pagination"><a href="" class="pagination-previous">Назад</a> <a href="" class="pagination-next">Вперед</a> <ul class="pagination-list"><!></ul></nav>'),Uc=we('<!> <!> <!> <table class="table"><thead><!><!></thead><tbody></tbody></table> <!>',1);be(["input","change","click"]);const Dc="__dublicate__",Pc={},jc=!1,Wc="listAndCount",Bc="count",zc="preprocessor",Vc={ui:function(t,e){Xt(e,!0);const i=xi();let r=Ri(),n=Ei(e,"helpers",19,(()=>({}))),s=Ei(e,"state",31,(()=>ie({}))),o=Ei(e,"filter",31,(()=>ie({}))),a=Ei(e,"sorter",31,(()=>ie({}))),l=Ei(e,"fields",19,(()=>[])),c=Ei(e,"selected",31,(()=>ie({}))),u=Ei(e,"items",31,(()=>ie([]))),d=Ei(e,"actions",19,(()=>[])),h=Ei(e,"links",19,(()=>[])),g=Ei(e,"search",15,""),f=Ei(e,"showSearch",3,!0),p=Ei(e,"showSelect",3,!0),v=Ei(e,"selectAll",15,!1),m=Ei(e,"getItemId",3,(t=>t._id));function b({detail:t}){try{r("searchChange",t)}catch(t){return}}function y({detail:t}){try{r("filterChange",t)}catch(t){return}}Mi((()=>{p()&&uc(e.id).selected.subscribe((t=>{c(t)})),uc(e.id).refined.subscribe((t=>{if(u(t),p()){for(let t in c())u().some((e=>m()(e)===t))?Object.hasOwn(c(),t)||c(c()[t]=!1,!0):delete c()[t];c(c())}})),uc(e.id).state.subscribe((t=>{s(t)}))}));var $=Uc(),O=de($);je(O,(()=>h().length),(t=>{var e=Cc();Oo(ue(e),{get values(){return h()}}),_e(t,e)}));var w=he(O,2);je(w,(()=>d().length),(t=>{var e=Lc();hn(ue(e),{get values(){return d()}}),_e(t,e)}));var k=he(w,2);je(k,f,(t=>{var i=Ie();je(de(i),(()=>e.filterUI),(t=>{var i=Ie();const r=P((()=>e.filterUI));Xe(de(i),(()=>Kt(r)),((t,e)=>{e(t,{get filter(){return o()},set filter(t){o(t)},$$events:{change:y,searchChange:b}})})),_e(t,i)}),(t=>{var e=Ec(),i=ue(e),n=ue(i);n.__input=[kc,r],vi(n,g),_e(t,e)})),_e(t,i)}));var I=he(k,2),_=ue(I),A=ue(_);je(A,p,(t=>{var i=Tc(),r=ue(i);r.__change=[Sc,e,u,m,v],mi(r,v),_e(t,i)})),Ve(he(A),17,l,ze,((t,e)=>{var n=xc();const s=P((()=>Kt(e).path.substring(1)));var o=P((()=>function(t){const e=t.path.substring(1);Object.hasOwn(a(),e)?a(a()[e]=-1*parseInt(a()[e]),!0):a({[e]:1}),r("sorterChange",a())}(Kt(e))));n.__click=function(...t){Kt(o)?.apply(this,t)},je(ue(n),(()=>Kt(e).sortable&&Object.hasOwn(a(),Kt(s))),(t=>{var i=P((()=>a()[Kt(s)]>0?"sort-up":"sort-down"));el(t,{get font(){return Kt(i)},get title(){return Kt(e).title},pointable:!0})}),(t=>{var r=ke();Z((()=>Me(r,Ti(Xi,"$LOCALE",i)[Kt(e).title]))),_e(t,r)})),Z((()=>ni(n,(Kt(e).hideOnMobile?" is-hidden-touch":"")+(Kt(e).sortable?" is-clickable":"")))),_e(t,n)})),Ve(he(_),21,u,(t=>t._id),((t,i)=>{wc(t,{get id(){return e.id},get item(){return Kt(i)},get fields(){return l()},get helpers(){return n()},get showSelect(){return p()},get getItemId(){return m()},$$events:{rowSelectChange(t){Ii.call(this,e,t)}}})})),je(he(I,2),(()=>s()?.pagination?.pages?.list.length>1),(t=>{var e=Rc(),i=ue(e);i.__click=[Ic,r];var n=he(i,2);n.__click=[_c,r],je(ue(he(n,2)),(()=>s().pagination&&s().pagination.pages&&s().pagination.pages.list),(t=>{var e=Ie();Ve(de(e),17,(()=>s().pagination.pages.list),ze,((t,e)=>{var i=Mc();je(ue(i),(()=>Kt(e).active),(t=>{var i=Fc(),r=ue(i);Z((()=>{ei(i,"aria-label",`Страница ${Kt(e).index??""}`),Me(r,Kt(e).index+1)})),_e(t,i)}),(t=>{var i=Nc();i.__click=[Ac,r];var n=ue(i);Z((()=>{ei(i,"aria-label",`Страница ${Kt(e).index??""}`),ei(i,"data-page",Kt(e).index),Me(n,Kt(e).index+1)})),_e(t,i)})),_e(t,i)})),_e(t,e)})),_e(t,e)})),_e(t,$),Zt()},links:[],actions:[],endless:!1,idField:"_id",getItemId:function(t){return t._id}};class qc extends lr{constructor(t={}){return super(),this.id="table-"+Math.random(),this.options={...Vc,...t.options?t.options:{}},this.ui={},this.data={raw:[],filtered:[],refined:[],selected:{}},this.state={pagination:{items:{count:0,from:0,to:0},pages:{count:0,from:0,to:0,current:0,list:[]}}},this.working={},this.stores=function(t,e={raw:[],filtered:[],selected:{}}){if(!cc(t)){if(!(Object.keys(e).length>0))throw new Error("store's props wasn't specified");lc[t]={},Object.keys(e).forEach((function(i){lc[t][i]=Yi(e[i])}))}return lc[t]}(this.id,{raw:[],filtered:[],refined:[],selected:{},state:this.state,working:this.working}),this.stores.working.subscribe(this.onWorkingUpdate.bind(this)),this.stores.raw.subscribe(this.onRawUpdate.bind(this)),this.stores.filtered.subscribe(this.onFilteredUpdate.bind(this)),this.stores.refined.subscribe(this.onRefinedUpdate.bind(this)),this.stores.selected.subscribe(this.onSelectedUpdate.bind(this)),this.stores.state.subscribe(this.onStateUpdate.bind(this)),Ir.objHas(t,"data")&&Array.isArray(t.data)&&this.stores.raw.update((function(e){return t.data})),this.setCombinedActionName(this.getOptions("interface.combinedAction",Wc)),Ir.objHas(this.options,"filter")?this.setFilter(this.options.filter,!0):this.resetFilter(),Ir.objHas(this.options,"pager")?this.setPager(this.options.pager,!0):this.resetPager(),Ir.objHas(this.options,"sorter")?this.setSorter(this.options.sorter,!0):this.resetSorter(!0),Ir.objHas(this.options,"return")?this.setReturn(this.options.return):this.setReturn(),Ir.objHas(this.options,"search")?this.setSearch(this.options.search,!0):this.setSearch(),this.render(),this.updateData(),this}onWorkingUpdate(t){return this.working=t,t}onRawUpdate(t){return this.data.raw=t,t}onFilteredUpdate(t){return this.data.filtered=t,this.refineFiltered(),t}onRefinedUpdate(t){return this.data.refined=t,this.clearSelected(),t}onStateUpdate(t){return this.state=t,t}onSearchChange(t){t.length>3?this.setSearch(t):this.setSearch()}onSorterChange(t){t?this.setSorter(t):this.resetSorter()}onFilterChange({filter:t,actionName:e}){0===e.indexOf(Wc)&&this.setCombinedActionName(e),t?this.setFilter(t):this.resetFilter()}onSelectedUpdate(t){this.data.selected=t}clearSelected(){this.data.selected={}}getSelected(t=!1,e="refined"){let i=[];for(let r in this.data.selected)if(this.data.selected[r])if(t){let t=this.data[e].findIndex((function(t){return t._id===r}));t>-1&&i.push(this.data[e][t])}else i.push(r);return i}getItemId(t){return this.getOptions("getItemId",Vc.getItemId)(t)}selectAll(){var t=this;this.stores.selected.update((function(){let e={};return t.data.filtered.forEach((function(i){e[t.getItemId(i)]=!0})),e}))}selectNone(){var t=this;this.stores.selected.update((function(){let e={};return t.data.filtered.forEach((function(i){e[t.getItemId(i)]=!1})),e}))}render(){var t=this;this.ui.table||(this.ui.table=new this.options.ui({target:this.options.targetEl,props:{filterUI:this.getOptions("filterUI",void 0),id:this.id,helpers:Object.assign({},this.getHelpers()),fields:this.getOptions("fields"),actions:this.getActions(),links:this.getLinks(),search:"",showSelect:this.getOptions("showSelect"),showSearch:this.getOptions("showSearch"),showSort:this.getOptions("showSort"),idField:this.getOptions("idField"),getItemId:this.getOptions("getItemId"),filter:this.getFilter()}})),this.ui.table.$on("searchChange",(function(e){return t.onSearchChange(e.detail)})),this.ui.table.$on("sorterChange",(function(e){return t.onSorterChange(e.detail)})),this.ui.table.$on("filterChange",(function(e){return t.onFilterChange(e.detail)})),this.ui.table.$on("goToPage",(function(e){return t.goToPage(e.detail)})),this.ui.table.$on("goToNextPage",(function(){return t.goToNext()})),this.ui.table.$on("goToPrevPage",(function(){return t.goToPrev()}))}getActions(){return this.getOptions("actions",[])}getLinks(){return this.getOptions("links",[])}getHelpers(){return this.options.helpers||{}}setWorking(t,e){var i=this;return this.stores.working.update((function(r){return br.set(t,r,i.getHelpers(),e),r})),this}getWorking(t,e){let i=br.get(t,this.working,this.getHelpers());return void 0===i?e:i}setState(t,e){var i=this;return this.stores.state.update((function(r){return br.set(t,r,i.getHelpers(),e),r})),this}getState(t,e){let i=br.get(t,this.state,this.getHelpers());return void 0===i?e:i}setOptions(t,e){return br.set(t,this.options,this.getHelpers(),e),this}getOptions(t,e){let i=br.get(t,this.options,this.getHelpers());return void 0===i?e:i}setFilter(t,e=!1){return this.setState("filter",t),e||(this.invalidateData(),this.updateData()),this}resetFilter(){return this.setState("filter",{}),this}getFilter(){return this.getState("filter")}setPager(t,e=!1){return this.setState("pager",t),e||this.updateData(),this}getDefaultPageNumber(){return isNaN(this.getOptions("pager.page"))?0:this.getOptions("pager.page")}getDefaultPageSize(){return isNaN(this.getOptions("pager.size"))?20:this.getOptions("pager.size")}resetPager(){this.setState("pager",{size:this.getDefaultPageSize(),page:this.getDefaultPageNumber()})}getPager(){return this.getState("pager")}setSorter(t,e=!1){return this.setWorking("sorter",t),e||(this.invalidateData(),this.updateData()),this}resetSorter(t=!1){let e={_id:1};return this.setSorter(e,t)}getSorter(){return this.getWorking("sorter")}getSorterDirection(){try{let t=Object.keys(this.getSorter());return this.getSorter()[t[0]]}catch(t){return 1}}getSearch(){return void 0!==this.getWorking("search")&&null!==this.getWorking("search")?this.getWorking("search"):""}setSearch(t="",e=!1){return this.setWorking("search",t),e||(this.invalidateData(),this.updateData()),this}getReturn(){return this.getWorking("return")}setReturn(t=Pc){return this.setWorking("return",t),this}clearFilteredData(){this.stores.filtered.update((function(t){return t.splice(0,t.length),t}))}clearRawData(){this.stores.raw.update((function(t){return t.splice(0,t.length),t}))}clearRefinedData(){this.stores.refined.update((function(t){return t.splice(0,t.length),t}))}invalidateData(){this.clearFilteredData(),this.isLive()&&this.clearRawData(),this.resetPager()}isLive(){return this.getOptions("interface")&&this.getOptions("interface.factory")}setUpdating(){this.setState("updating",!0)}setUpdated(){this.setState("updating",!1)}ifUpdating(){return this.getState("updating")}getDataInterface(){let t=this.getOptions("interface.factory");return"function"==typeof t?t({}):t}getLoadDataActionName(){return this.getOptions("interface.listAction")?this.getOptions("interface.listAction"):"list"}setCombinedActionName(t=Bc){this.setWorking("interface.combinedAction",t)}getCombinedActionName(){return this.getWorking("interface.combinedAction")?this.getWorking("interface.combinedAction"):Wc}getCountActionName(){return this.getOptions("interface.countAction")?this.getOptions("interface.countAction"):Bc}loadData(){let t,e=this.getDataInterface().setFilter(this.getFilter()).setSorter(this.getSorter()).setReturn(this.getReturn()).setSearch(this.getSearch()).setPager(this.getPager());return t=this.getOptions("interface.combined",jc)?this.getCombinedActionName():this.getLoadDataActionName(),e["$"+t]()}goToNext(){let t=isNaN(this.getState("pager.page"))?this.getDefaultPageNumber():this.getState("pager.page")+1;this.setState("pager.page",Math.min(t,this.getState("pagination.pages.to"))),this.updateData()}goToPrev(){let t=isNaN(this.getState("pager.page"))?this.getDefaultPageNumber():this.getState("pager.page")-1;this.setState("pager.page",Math.max(t,this.getState("pagination.pages.from"))),this.updateData()}goToFirst(){this.setState("pager.page",this.getState("pagination.pages.from")),this.updateData()}goToLast(){this.setState("pager.page",this.getState("pagination.pages.to")),this.updateData()}goToPage(t){this.setState("pager.page",t),this.updateData()}testDataItem(t){var e=this.getSearch().toLowerCase();for(var i in t){if(t[i].toString().toLowerCase().indexOf(e)>-1)return!0}return!1}getRowsCount(){var t=this;return this.getDataInterface().setFilter(this.getFilter())["$"+this.getCountActionName()]().then((function(e){t.updatePagination(e.count)})).catch((function(e){t.error(e)}))}updatePagination(t){var e=this;this.log("update pagination",t),this.state.pagination.pages.list.splice(0,this.state.pagination.pages.list.length);let i=(this.getPager().page-0)*this.getPager().size+1,r=t%this.getPager().size?Math.floor(t/this.getPager().size)+1:Math.round(t/this.getPager().size),n=Math.max(0,this.getPager().page-6),s=Math.min(r-1,this.getPager().page+6),o=[],a=Math.min(i+this.getPager().size-1,t);for(let t=n;t<=s;t++)o.push({index:t,active:t===this.getPager().page});this.stores.state.update((function(l){return e.log("update pagination",l),l.pagination.items.count=t,l.pagination.items.from=i,l.pagination.items.to=a,l.pagination.pages.count=r,l.pagination.pages.from=n,l.pagination.pages.to=s,l.pagination.pages.current=e.getPager().page,l.pagination.pages.list.splice(0,l.pagination.pages.list.length,...o),l}))}updateData(){var t=this;if(this.isLive()){if(this.ifUpdating())return;this.getOptions("endless",!1)||this.clearRawData(),this.setUpdating(),this.getOptions("interface.combined",jc)?this.loadData().then((function(e){let i=Ir.objHas(e,"status")&&Ir.objHas(e,"result");t.stores.filtered.update((function(r){return t.getOptions("endless",!1)||t.clearFilteredData(),i?r.push(...e.result.list):Ir.objHas(e,"list")&&Array.isArray(e.list)?r.push(...e.list):Array.isArray(e)&&r.push(...e),r})),t.setWorking("lastCount",i?e.result.count:e.count)})).then((function(){t.updatePagination(t.getWorking("lastCount"))})).catch(this.error.bind(this)).then(this.setUpdated.bind(this)):this.loadData().then((function(e){t.stores.filtered.update((function(t){return t.push(...e),t}))})).then(this.getRowsCount.bind(this)).catch(this.error.bind(this)).then(this.setUpdated.bind(this))}else this.setUpdating(),this.processData(),this.setUpdated()}getData(){return this.data}processData(){var t=this;let e=this.getFilter();this.log(this.getData()),null!=e&&void 0!==e.filterSearch&&null!==e.filterSearch&&e.filterSearch.length>0?this.stores.filtered.update((function(e){return e.splice(0,e.length,...t.data.raw.filter(t.testDataItem.bind(t))),e})):this.stores.filtered.update((function(e){return e.splice(0,e.length,...t.data.raw),e}));let i=this.getSorter();null!=i&&this.stores.filtered.update((function(t){return t.sort((function(t,e){let r=br.get(i.sortByField,t,{}),n=br.get(i.sortByField,e,{});return isNaN(r)?void 0!==r&&void 0!==n&&r.localeCompare?r.localeCompare()*-i.sortDirection:0:(r<n?1:-1)*i.sortDirection})),t}))}error(){this.options.logger&&this.options.logger.error(...arguments)}log(){this.options.logger&&this.options.logger.log(...arguments)}checkFieldsNames(){const t=":"+this.getOptions("idField");this.getOptions("fields",[]).forEach((function(e){t===e.path&&(e.path=e.path+Dc)}))}readFieldValue(t,e,i){if(t.indexOf(Dc)>-1){const t=":"+this.getOptions("idField");return br.get(t,e,i)}return br.get(t,e,i)}refineFiltered(){var t=this;let e=[];this.checkFieldsNames(),this.data.filtered.forEach((function(i,r){let n={};t.getOptions("idField")&&(n[t.getOptions("idField")]=i[t.getOptions("idField")]),t.getOptions("fields",[]).forEach((function(e){let s=null,o=t.readFieldValue(e.path,i,t.getOptions("helpers"));if(Ir.objHas(e,zc)){try{s=e[zc](o,i,r)}catch(e){t.error("Error while preprocessing cell value",o,i,r),t.error(e)}br.set(e.path,n,s)}else br.set(e.path,n,o)})),e.push(n)})),this.stores.refined.update((function(t){return t.splice(0,t.length,...e),t}))}$destroy(){for(let t in this.ui)this.ui[t].$destroy&&this.ui[t].$destroy(),delete this.ui[t]}}var Hc=we("<!> <!>",1),Kc=we("<!> <!>",1);function Gc(t,e){Xt(e,!0);let i=T(!1),r=T(!1),n=Ei(e,"container",19,(()=>({}))),s=Ei(e,"loaderTitle",15,"Отправка данных на сервер"),o=Ei(e,"loaderActive",15,!1),a=Ei(e,"loaderSize",15,"container"),l=Ei(e,"successTitle",15,"OK"),c=Ei(e,"successMessage",15,""),u=Ei(e,"errorTitle",15,"Error"),d=Ei(e,"errorMessage",15,"");var h=Kc(),g=de(h);return Wr(g,{get loading(){return o()},set loading(t){o(t)},get title(){return s()},set title(t){s(t)},get size(){return a()},set size(t){a(t)}}),Do(he(g,2),Ci(n,{children:(t,e)=>{var n=Hc(),s=de(n);je(s,(()=>Kt(r)),(t=>{Ll(t,{get title(){return u()},set title(t){u(t)},get message(){return d()},set message(t){d(t)}})})),je(he(s,2),(()=>Kt(i)),(t=>{Tl(t,{get title(){return l()},set title(t){l(t)},get message(){return c()},set message(t){c(t)}})})),_e(t,n)},$$slots:{default:!0}})),_e(t,h),Zt({showSuccess:function(t,e){R(r,!1),R(i,!0),null!=e&&c(e),null!=t&&l(t)},showError:function(t,e){R(i,!1),R(r,!0),null!=e&&(messageTitle=e),null!=t&&l(t)},setLoading:function(){o(!0),R(i,!1),R(r,!1)},resetLoading:function(){o(!1)},hideAll:function(){o(!1),R(i,!1),R(r,!1)}})}var Jc=new WeakMap,Yc=new WeakMap;class Qc extends jl{constructor({target:t=null,name:e="Default",options:i={},working:r={},data:n={},ui:s=Gc}){super({working:{name:`${e}ActionUI`,...r},options:i,data:n}),hr(this,Jc,null),hr(this,Yc,null),t&&this.setOptions("target",t),gr(Jc,this,s),this.initUI()}initUI(){try{const t=this.getTargetEl();for(;t.children.length;)t.removeChild(t.firstChild);gr(Yc,this,new(dr(Jc,this))({target:t,props:this.getOptions()}))}catch(t){this.error(t)}}setLoading(){this.emit("loading"),dr(Yc,this).setLoading()}resetLoading(){this.emit("loaded"),dr(Yc,this).resetLoading()}destroy(){this.emit("destroy"),dr(Yc,this)&&(dr(Yc,this).$destroy&&dr(Yc,this).$destroy(),dr(Yc,this).destroy&&dr(Yc,this).destroy(),gr(Yc,this,null)),this.setOptions(null),this.setWorking(null),this.setData(null)}processResult(t){return t.status===yn?(this.setFormSuccess(),!0):(this.setFormErrors(t),!1)}setFormSuccess(){dr(Yc,this).showSuccess(),this.emit("success")}setFormErrors(t){const e={form:[],fields:{}};t.message&&e.form.push(t.message),t.errors&&Object.keys(t.errors).length>0&&(e.fields={...t.errors}),dr(Yc,this).showError(e),this.emit("error",e)}getTargetEl(){const t=this.getOptions("target",".container");if(t instanceof HTMLElement)return t;if("string"==typeof t)return document.querySelector(t);throw new Error("ActionUI parent element is not defined")}}let Xc=class{static addComponent(t,e){ao.add(t,e)}static addVariants(t,e){co.add(t,e)}static addField(t,e){lo.add(t,e)}static actionFieldsInit(t,e,i){var r=this;Array.isArray(t)?t.forEach((function(t){r.actionFieldsInit(t,e,i)})):(Ir.objHas(e,"fields")||(e.fields={}),Ir.objHas(e.fields,t)||(e.fields[t]={}),null!=i&&void 0!==i[t]&&null!==i[t]&&(e.fields[t].value=i[t]))}};pr(Xc,"validator",null);const Zc={label:"",placeholder:"",enabled:!0,visible:!0,required:!0,validated:!1,valid:!1,errors:!1};function tu(t,e={},i,r){let n={...Zc};return r.contains(t)&&(n={...n,...r.get(t)}),e&&(n={...n,...e}),Ir.objHas(n,"variantsSource")&&i.contains(n.variantsSource)?n.variants=i.get(n.variantsSource):n.variants&&0!==n.variants.length||(n.variants=[]),n}function eu(t,e,i){return t[e].formErrors=[...i],t[e].validated=!0,t[e].inputStarted=!0,t[e].valid=!1,t[e].formLevelError=!0,t}function iu(t,e){return t[e].formErrors=!1,t[e].validated=!0,t[e].valid=!0,t[e].formLevelError=!1,t}function ru(t,e){return Ir.objHas(t,e)&&t[e].enabled&&t[e].visible&&void 0!==t[e].value}var nu,su,ou,au,lu,cu,uu,du,hu,gu,fu,pu,vu,mu,bu,yu,$u={fieldInit:tu,initFormByField:function t(e={},i=[],r,n,s,o){if(Array.isArray(i))i.forEach((function(i){return t(e,i,r,n,s,o)}));else{let t={};s&&Ir.objHas(s,"mutations")&&Ir.objHas(s.mutations,i)&&(t=s.mutations[i]),o&&Ir.objHas(o,i)&&(t.value=o[i]),e[i]=tu(i,t,r,n),s&&s.readonly&&(e[i].readonly=!0)}return e},setFieldInvalid:function(t,e,i,r){return t[e].errors=[...r],t[e].validated=!0,t[e].valid=!1,t[e].value=i,t},setFieldValid:function(t,e,i){t[e].errors=!1,t[e].validated=!0,t[e].valid=!0,t[e].value=i;for(let i in t)if(i!==e&&(Array.isArray(t[i].errors)&&0===t[i].errors.length&&(t[i].errors=!1),!1!==t[i].errors))break;return t},isFieldValid:function(t,e){return!Array.isArray(t[e].errors)},setFormFieldInvalid:eu,setFormFieldValid:iu,updateFormValidationStatus:function({form:t,formErrors:e,formHasErrors:i,fieldsHasErrors:r,validationStatus:n}){if(Array.isArray(n.form)&&n.form.length?(e.splice(0,e.length,...n.form),!0):e.splice(0,e.length),n.fields)for(let e in n.fields)Array.isArray(n.fields[e])&&n.fields[e].length?(eu(t,e,n.fields[e]),!0):iu(t,e)},fieldIsVisibleAndFilled:ru,setFieldsVisibility:function(t,e,i){return!!Array.isArray(e)&&(Object.keys(t).forEach((function(r){t[r].visible=e.includes(r)?i:!i})),!0)},setFieldValue:function(t,e,i){return!!Ir.objHas(t,e)&&(t[e].value=i,!0)},collectData:function(t,e){let i={};return t.flat().forEach((function(t){ru(e,t)&&(i[t]=e[t].value)})),i}};function Ou(){if(su)return nu;su=1;const t=t=>Object.keys(t).reduce(((t,e)=>(t[e]=[],t)),{}),e=["fields","form"];return nu=class{#t=!0;#e;constructor(t){this.#e=JSON.parse(JSON.stringify(t)),Object.keys(this.#e).forEach((t=>{e.includes(t)||delete this.#e[t]})),this.#t=0===this.#e.form.errors.length;const i=this.#i();for(let t of i)this.isFieldDirty(t)&&(this.#t=!1)}destroy(){this.#e=void 0}get clean(){return this.#t}static getDefaultResult(e){return{fields:t(e),form:{fields:t(e),errors:[],exceptions:[]}}}getReport(){return JSON.parse(JSON.stringify(this.#r()))}getDetailedReport(){return"object"==typeof this.#e?JSON.parse(JSON.stringify(this.#e)):void 0}isFieldDirty(t){return!(!Array.isArray(this.#e.fields[t])||!this.#e.fields[t].length)||!(!Array.isArray(this.#e.form.fields[t])||!this.#e.form.fields[t].length)}getCompleteResultForField(t){const e=[];return Array.isArray(this.#e.fields[t])&&e.push(...this.#e.fields[t]),Array.isArray(this.#e.form.fields[t])&&e.push(...this.#e.form.fields[t]),e}#r(){const t={clean:this.#t,fields:{},form:[]},e=this.#i();for(let i of e){const e=this.getCompleteResultForField(i);e.length&&(t.fields[i]=e)}return t.form=[...this.#e.form.errors],0===t.form.length&&delete t.form,t}#i(){const t=Object.keys(this.#e.fields),e=Object.keys(this.#e.form.fields);return[...new Set([...e,...t])]}}}function wu(){if(cu)return lu;cu=1;const t=Ou(),i=e,r=au?ou:(au=1,ou=async(t,e)=>{if("function"==typeof t)return"AsyncFunction"===t.constructor.name?await t(...e):t(...e)});lu=async(e,i)=>{const r=t.getDefaultResult(i);return await n({validators:e,data:i,result:r}),await c({validators:e,data:i,result:r}),new t(r)};const n=async({validators:t,data:e,result:i})=>{for(let r in e)await s(r,e[r],t,i)},s=async(t,e,i,r)=>{const n=o(t,i);return await a(t,e,n,r)},o=(t,e)=>e&&e.fields&&e.fields[t]?e.fields[t]:[],a=async(t,e,n,s)=>{for(let o of n)try{await r(o.validator,[e])||l(t,o.message,s)}catch(e){e instanceof i||!o.message?l(t,e.message,s):l(t,o.message,s)}},l=(t,e,i)=>{i.fields[t].includes(e)||i.fields[t].push(e)},c=async({validators:t,data:e,result:i})=>{const r=u(t);await d(e,r,i)},u=t=>t&&t.form?t.form:[],d=async(t,e,i)=>{for(let r of e)try{await r(t)}catch(t){if(!t||"function"!=typeof t.getFieldsErrors)throw t;{const e=t.getFieldsErrors();Array.isArray(e.form)&&h(e.form,i),e.fields&&f(e.fields,i)}}},h=(t,e)=>{t.forEach((t=>{g(t,e)}))},g=(t,e)=>{e.form.errors.includes(t)||e.form.errors.push(t)},f=(t,e)=>{for(let i in t)p(i,t[i],e)},p=(t,e,i)=>{e.forEach((e=>{v(t,e,i)}))},v=(t,e,i)=>{Array.isArray(i.form.fields[t])||(i.form.fields[t]=[]),i.form.fields[t].includes(e)||i.form.fields[t].push(e)};return lu}function ku(){if(gu)return hu;gu=1;const{composeFieldsValidators:t,composeFormValidators:e}=du?uu:(du=1,uu={composeFieldsValidators:(t,e)=>{if(e&&e.fields){const i=Object.keys(t),r={};return i.forEach((t=>{Array.isArray(e.fields[t])&&(r[t]=e.fields[t])})),r}return{}},composeFormValidators:(t,e)=>e?e.forms&&Array.isArray(e.forms[t])?e.forms[t]:Array.isArray(e.form)?e.form:[]:[]}),i=wu();return hu=r=>(n,s)=>{const o={fields:t(n,r),form:e(s,r)};return i(o,n)}}function Iu(){if(mu)return vu;mu=1;const t=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),{augmentFieldsValidators:e,augmentFormValidators:i}=function(){if(pu)return fu;pu=1;const t=(t,e)=>{if(t.validator&&"function"==typeof t.validator){const i=t.validator,r={...t};return delete r.validator,r.validator=t=>i(t,e()),r}return t},e=(t,e)=>i=>t(i,e());return fu={augmentFieldsValidators:(e,i)=>e.map((e=>t(e,i))),augmentFieldValidator:t,augmentFormValidators:(t,i)=>t.map((t=>e(t,i))),augmentFormValidator:e}}();vu=(e,s)=>{if(null==e)return{fields:{},forms:{}};const o={};return t(e,"fields")&&(o.fields=r(e.fields,s)),t(e,"forms")?o.forms=n(e.forms,s):t(e,"form")&&(o.form=i(e.form,s)),o};const r=(t,i)=>{const r={};for(let n in t)Array.isArray(t[n])&&(r[n]=e(t[n],i));return r},n=(t,e)=>{const r={};for(let n in t)Array.isArray(t[n])&&(r[n]=i(t[n],e));return r};return vu}var _u=function(){if(yu)return bu;yu=1;const t=wu(),e=ku(),i=Iu(),r=Ou();return bu={name:"not-validation",Session:t,Runner:e,Builder:i,Result:r}}(),Au=we('<div><div class="field-label is-normal"><!></div> <div class="field-body"></div></div>'),Su=we("<!> <!>",1),Cu=we("<div></div>");function Lu(t,e){Xt(e,!0);let i=Ri(),r=Ei(e,"label",3,""),n=Ei(e,"name",3,"generic field"),s=Ei(e,"readonly",3,!1),o=Ei(e,"horizontal",3,!1),a=Ei(e,"controls",19,(()=>[])),l=Ei(e,"classes",3,""),c=Ei(e,"addons",3,!1),u=Ei(e,"addonsCentered",3,!1),d=Ei(e,"addonsRight",3,!1),h=Ei(e,"grouped",3,!1),g=Ei(e,"groupedMultiline",3,!1),f=Ei(e,"groupedRight",3,!1),p=Ei(e,"groupedCentered",3,!1),v=T(""),m=T(!1),b=T(void 0);function y(t){let e=t.detail;i("change",e)}Mi((()=>{R(v,Kt(v)+" "+l()),R(v,Kt(v)+(c()?" has-addons ":"")),R(v,Kt(v)+(u()?" has-addons-centered ":"")),R(v,Kt(v)+(d()?" has-addons-right ":"")),R(v,Kt(v)+(h()?" is-grouped ":"")),R(v,Kt(v)+(g()?" is-grouped-multiline ":"")),R(v,Kt(v)+(f()?" is-grouped-right ":"")),R(v,Kt(v)+(p()?" is-grouped-centered ":"")),s()&&a().forEach((t=>{t.readonly=!0}));let t=a().filter((t=>"UIHidden"!==t.component));R(m,0===t.length);let e=a().map((t=>t.component)).join("_");R(b,`form-field-${e}-${n()}`)}));var $=Ie();je(de($),(()=>Kt(m)),(t=>{var e=Ie();Ve(de(e),17,a,ze,((t,e)=>{var i=Ie();const r=P((()=>ao.get(Kt(e).component)));Xe(de(i),(()=>Kt(r)),((t,i)=>{i(t,Ci((()=>Kt(e)),{get fieldname(){return n()},$$events:{change:y}}))})),_e(t,i)})),_e(t,e)}),(t=>{var e=Ie();je(de(e),o,(t=>{var e=Au(),i=ue(e),s=ue(i),o=P((()=>r()||a()[0].label));no(s,{get id(){return Kt(b)},get label(){return Kt(o)}});var l=he(i,2);Ve(l,21,a,ze,((t,e)=>{var i=Ie();const r=P((()=>ao.get(Kt(e).component)));Xe(de(i),(()=>Kt(r)),((t,i)=>{i(t,Ci((()=>Kt(e)),{get fieldname(){return n()},$$events:{change:y}}))})),_e(t,i)})),Z((()=>{ni(e,`field is-horizontal ${Kt(v)??""} ${Kt(b)??""}`),ei(l,"id",Kt(b))})),_e(t,e)}),(t=>{var e=Cu();Ve(e,21,a,ze,((t,e)=>{var i=Su();const r=P((()=>ao.get(Kt(e).component)));var s=de(i);no(s,{get id(){return`form-field-${Kt(e).component??""}-${n()??""}`},get label(){return Kt(e).label}}),Xe(he(s,2),(()=>Kt(r)),((t,i)=>{i(t,Ci((()=>Kt(e)),{get fieldname(){return n()},$$events:{change:y}}))})),_e(t,i)})),Z((()=>ni(e,`field ${Kt(v)??""} ${Kt(b)??""}`))),_e(t,e)}),!0),_e(t,e)})),_e(t,$),Zt()}function Eu(t,e,i){return t&&t.preventDefault(),e("submit",i()),!1}function Tu(t,e){e("reject")}var xu=we('<div><span class="title"> </span></div>'),Fu=we('<div class="notification is-success"><h3 class="form-success-message"> </h3></div>'),Nu=we('<h5 class="title is-5"> </h5>'),Mu=we('<h6 class="subtitle is-6"> </h6>'),Ru=we("<button> </button>"),Uu=we("<button> </button>"),Du=we('<div class="edit-form-error notification is-danger"> </div>'),Pu=we('<div class="buttons is-grouped is-centered"><!> <!></div> <!>',1),ju=we("<div><!></div>"),Wu=we('<div class="column notification is-danger"> </div>'),Bu=we('<div class="columns"></div>'),zu=we('<div class="notification is-danger"> </div>'),Vu=we("<span> </span>"),qu=we('<div class="edit-form-error notification is-danger"></div>'),Hu=we("<button> </button>"),Ku=we("<button> </button>"),Gu=we('<!> <div class="buttons is-grouped is-centered"><!> <!></div>',1),Ju=we("<!> <!> <!> <!> <!>",1),Yu=we('<div class="form-container"><!> <!></div>');function Qu(t,e){Xt(e,!0);const i=xi(),r=()=>Ti(Xi,"$LOCALE",i);let n=Ri(),s=T(ie([])),o=T(!1),a=T(!1),l=T(!1),c=Ei(e,"form",31,(()=>ie({}))),u=Ei(e,"loading",15,!1),d=Ei(e,"loader",3,"container"),h=Ei(e,"fields",19,(()=>[])),g=Ei(e,"SUCCESS_TEXT",3,"Операция завершена"),f=Ei(e,"WAITING_TEXT",3,"Отправка данных на сервер"),p=Ei(e,"title",3,""),v=Ei(e,"description",3,""),m=Ei(e,"buttonsFirst",3,!1),b=Ei(e,"horizontal",3,!1),y=Ei(e,"submit",19,(()=>({caption:"Отправить",enabled:!0}))),$=Ei(e,"cancel",19,(()=>({caption:"Назад",enabled:!0}))),O=P((()=>Kt(o)||Kt(a)));function w(){return $u.collectData(h(),c())}function k(t,e){$u.setFieldsVisibility(c(),t,e)&&c(c())}function I(t){let e=t.detail;c(c()[e.field].value=e.value,!0),c(c()),n("change",e)}var _=Yu(),A=ue(_);return je(A,(()=>"hidden"!==d()),(t=>{var e=xu(),i=ue(e),n=ue(i);Z((()=>{ni(e,`${("page"===d()?"pageloader":"containerloader")??""} ${(u()?"is-active":"")??""}`),Me(n,r()[f()])})),_e(t,e)})),je(he(A,2),(()=>Kt(l)),(t=>{var e=Fu(),i=ue(e),n=ue(i);Z((()=>Me(n,r()[g()]))),_e(t,e)}),(t=>{var e=Ju(),i=de(e);je(i,p,(t=>{var e=Nu(),i=ue(e);Z((()=>Me(i,r()[p()]))),_e(t,e)}));var o=he(i,2);je(o,v,(t=>{var e=Mu(),i=ue(e);Z((()=>Me(i,r()[v()]))),_e(t,e)}));var a=he(o,2);je(a,m,(t=>{var e=Pu(),i=de(e),o=ue(i);je(o,(()=>$().enabled),(t=>{var e=Ru();e.__click=[Tu,n];var i=ue(e);Z((()=>{ni(e,`button is-outlined ${$().classes??""}`),Me(i,r()[$().caption])})),_e(t,e)})),je(he(o,2),(()=>y().enabled),(t=>{var e=Uu();e.__click=[Eu,n,w];var i=ue(e);Z((()=>{e.disabled=Kt(O),ni(e,`button is-primary is-hovered ${y().classes??""}`),Me(i,r()[y().caption])})),_e(t,e)})),je(he(i,2),(()=>Kt(s).length>0),(t=>{var e=Du(),i=ue(e);Z((()=>Me(i,Kt(s).join(", ")))),_e(t,e)})),_e(t,e)}));var l=he(a,2);Ve(l,17,h,ze,((t,e)=>{var i=Ie();je(de(i),(()=>Array.isArray(Kt(e))),(t=>{var i=Bu();Ve(i,21,(()=>Kt(e)),ze,((t,e)=>{var i=Ie();je(de(i),(()=>c()[Kt(e)]&&c()[Kt(e)].component),(t=>{var i=Ie();je(de(i),(()=>c()[Kt(e)].visible),(t=>{var i=ju(),r=ue(i),n=P((()=>[c()[Kt(e)]]));Lu(r,{get controls(){return Kt(n)},get name(){return Kt(e)},get horizontal(){return b()},get label(){return c()[Kt(e)].label},$$events:{change:I}}),Z((()=>ni(i,`column ${(c()[Kt(e)].fieldSize?"is-"+c()[Kt(e)].fieldSize:"")??""} `))),_e(t,i)})),_e(t,i)}),(t=>{var i=Wu(),r=ue(i);Z((()=>Me(r,`Subfield '${Kt(e)??""}' is not registered`))),_e(t,i)})),_e(t,i)})),_e(t,i)}),(t=>{var i=Ie();je(de(i),(()=>c()[Kt(e)]&&c()[Kt(e)].component),(t=>{var i=Ie();je(de(i),(()=>c()[Kt(e)].visible),(t=>{var i=P((()=>[c()[Kt(e)]]));Lu(t,{get controls(){return Kt(i)},get name(){return Kt(e)},get horizontal(){return b()},get label(){return c()[Kt(e)].label},$$events:{change:I}})})),_e(t,i)}),(t=>{var i=zu(),r=ue(i);Z((()=>Me(r,`Field '${Kt(e)??""}' is not registered`))),_e(t,i)}),!0),_e(t,i)})),_e(t,i)})),je(he(l,2),(()=>!m()),(t=>{var e=Gu(),i=de(e);je(i,(()=>Kt(s).length>0),(t=>{var e=qu();Ve(e,21,(()=>Kt(s)),ze,((t,e)=>{var i=Vu(),n=ue(i);Z((()=>Me(n,r()[Kt(e)]))),_e(t,i)})),_e(t,e)}));var o=ue(he(i,2));je(o,(()=>$().enabled),(t=>{var e=Hu();e.__click=[Tu,n];var i=ue(e);Z((()=>{ni(e,`button ${($().classes?$().classes:"")??""}`),Me(i,r()[$().caption])})),_e(t,e)})),je(he(o,2),(()=>y().enabled),(t=>{var e=Ku();e.__click=[Eu,n,w];var i=ue(e);Z((()=>{e.disabled=Kt(O),ni(e,`button is-primary is-hovered ${(y().classes?y().classes:"")??""}`),Me(i,r()[y().caption])})),_e(t,e)})),_e(t,e)})),_e(t,e)})),_e(t,_),Zt({collectData:w,setFieldInvalid:function(t,e,i){c($u.setFieldInvalid(c(),t,e,i)),R(a,!0)},setFieldValid:function(t,e){c($u.setFieldValid(c(),t,e)),Kt(a)!==some&&R(a,ie(some))},isFieldValid:function(t){return $u.isFieldValid(c(),t)},setFormFieldInvalid:function(t,e){c($u.setFormFieldInvalid(c(),t,e)),n("field.invalid",{fieldName:t})},setFormFieldValid:function(t){c($u.setFormFieldValid(c(),t)),n("field.valid",{fieldName:t})},updateFormValidationStatus:function(t){if(R(o,!1),R(a,!1),Array.isArray(t.form)&&t.form.length?(Kt(s).splice(0,Kt(s).length,...t.form),R(o,!0)):Kt(s).splice(0,Kt(s).length),R(s,ie(Kt(s))),t.fields)for(let e of Object.keys(c()))Array.isArray(t.fields[e])&&t.fields[e].length?($u.setFormFieldInvalid(c(),e,t.fields[e]),R(a,!0)):$u.setFormFieldValid(c(),e)},showSuccess:function(){R(l,!0)},setLoading:function(){u(!0)},resetLoading:function(){u(!1)},setFieldsVisibility:k,setVisibleFields:function(t){k(t,!0)},setInvisibleFields:function(t){k(t,!1)},setFieldValue:function(t,e){$u.setFieldValue(c(),t,e)&&I({detail:{field:t,value:e}})},updateField:function(t,e){c(c()[t]={...c()[t],...e},!0),c(c())}})}be(["click"]);const Xu={notReadonly:t=>({readonly:!t}),readonly:t=>({readonly:t}),enable:t=>({disabled:!t}),disable:t=>({disabled:t})};class Zu{static add(t,e){Ir.objHas(cr(Zu,this,td)._,t)||(cr(Zu,this,td)._[t]=e)}static remove(t){Ir.objHas(cr(Zu,this,td)._,t)&&!Object.keys(Xu).includes(t)&&delete cr(Zu,this,td)._[t]}static exec(t,e,i,r,n){return cr(Zu,this,td)._[t](r,e,i,n)}}var td={_:{...Xu}};var ed=new WeakMap,id=new WeakMap,rd=new WeakMap,nd=new WeakMap,sd=new WeakMap,od=new WeakMap,ad=new WeakSet;class ld extends jl{constructor({target:t=null,name:e="Default",options:i={},working:r={},data:n={},ui:s=Qu}){super({working:{name:`${e}Form`,...r},options:i,data:n}),fr(this,ad),hr(this,ed,null),hr(this,id,null),hr(this,rd,null),hr(this,nd,"default"),hr(this,sd,new oo),hr(this,od,null),gr(od,this,new oo(co.getContent())),t&&this.setOptions("target",t),gr(ed,this,s),Ir.objHas(i,"action")&&gr(nd,this,i.action),this.initForm()}initForm(){this.getOptions("autoInit",!0)&&this.initLibs(),this.getOptions("autoRender",!0)&&this.initUI()}initLibs(){this.initFields(),this.initVariants(),this.initValidator()}reInit(){this.initLibs(),this.updateUI(),this.resetLoading()}initFields(){const t=this.getFormManifest();Ir.objHas(t,"fields")&&dr(sd,this).isEmpty()&&dr(sd,this).import(t.fields)}initVariants(){this.getOptions("variants")&&dr(od,this).import(this.getOptions("variants"))}initValidator(){gr(id,this,_u.Runner(this.getFormValidators()))}initUI(){try{const t=cr(ad,this,gd).call(this,{manifest:this.getFormManifest(),formOptions:this.getFormOptions(),data:this.getFormData(),injectedProps:this.getFormInjectedProps()}),e=this.getFormTargetEl();for(;e.children.length;)e.removeChild(e.firstChild);gr(rd,this,new(dr(ed,this))({target:e,props:t})),cr(ad,this,cd).call(this),this.validateForm()}catch(t){this.error(t)}}updateUI(){try{const t=cr(ad,this,gd).call(this,{manifest:this.getFormManifest(),formOptions:this.getFormOptions(),data:this.getFormData(),injectedProps:this.getFormInjectedProps()});dr(rd,this).$set(t),this.validateForm()}catch(t){this.error(t)}}async validateForm(){if(!this.getOptions("readonly",!1))try{const t=await dr(id,this).call(this,dr(rd,this).collectData(),this.getFormAction());dr(rd,this).updateFormValidationStatus(t.getReport()),t.clean||this.emit("error",t.getReport())}catch(t){const e={form:[Kr.ERROR_DEFAULT,t.message]};dr(rd,this)&&dr(rd,this).updateFormValidationStatus(e),this.emit("error",e),Ir.report(t)}}submit(t){this.emit("submit",t)}reject(){this.emit("reject")}$on(){dr(rd,this)&&dr(rd,this).$on(...arguments)}setLoading(){this.emit("loading"),dr(rd,this).setLoading()}resetLoading(){this.emit("loaded"),dr(rd,this).resetLoading()}destroy(){this.emit("destroy"),dr(rd,this)&&(dr(rd,this).$destroy&&dr(rd,this).$destroy(),dr(rd,this).destroy&&dr(rd,this).destroy(),gr(rd,this,null)),gr(id,this,null),gr(nd,this,null),gr(sd,this,null),gr(od,this,null),this.setOptions(null),this.setWorking(null),this.setData(null)}getName(){return this.getWorking("name")}getFormAction(){return dr(nd,this)}setFormAction(t){t&&t!==dr(nd,this)&&(gr(nd,this,t),dr(rd,this)&&dr(rd,this).$destroy(),this.initForm())}processResult(t){return t.status===yn?(this.setFormSuccess(),!0):(this.setFormErrors(t),!1)}setFormSuccess(){dr(rd,this).showSuccess(),this.emit("success")}setFormErrors(t){if(this.getOptions("readonly",!1))return;const e={form:[],fields:{}};t.message&&e.form.push(t.message),t.errors&&Object.keys(t.errors).length>0&&(e.fields={...t.errors}),dr(rd,this).updateFormValidationStatus(e),this.emit("error",e)}getVariant(t,e){let i=dr(od,this).get(t).find((function(t){return t.id===e}));return i||null}getFormTargetEl(){const t=this.getOptions("target",".form");if(t instanceof HTMLElement)return t;if("string"==typeof t)return document.querySelector(t);throw new Error("Form parent element is not defined")}getFormValidators(){return this.getOptions("validators")?this.getOptions("validators",{}):(cr(ad,this,fd).call(this,"validators"),{})}getFormManifest(){const t=this.getModelName();return t&&Ir.getApp()?Ir.getApp().getInterfaceManifest(t):this.getOptions("manifest",void 0)?this.getOptions("manifest",{}):(cr(ad,this,fd).call(this,"manifest"),{})}getFormData(){return this.getData()?this.getData():(cr(ad,this,fd).call(this,"data"),{})}getFormOptions(){return this.getOptions("ui",void 0)||this.getOptions("fields",void 0)?{ui:this.getOptions("ui",{}),fields:this.getOptions("fields",{})}:(cr(ad,this,fd).call(this,"options"),{ui:{},fields:{}})}getFormInjectedProps(){return this.getOptions("injected",{})}collectData(){if(this.getOptions("readonly",!1))return this.getData();const t=dr(rd,this).collectData();return this.setData({...t}),t}updateField(t,e){dr(rd,this).updateField(t,e)}getModel(t,e){return"string"==typeof t?this.getInterface(t)(e||{}):this.getInterface()(t||{})}getInterface(t=!1){return Ir.getApp().getInterface(t||this.getModelName())}getModelName(){return this.getOptions("model")}}function cd(){var t=this;dr(rd,this).$on("change",(function(){return t.validateForm()})),dr(rd,this).$on("change",(function(e){t.emit("change",e.detail),t.emit(`change.${e.detail.field}`,e.detail.value)})),dr(rd,this).$on("submit",(function(e){return t.submit(e.detail)})),dr(rd,this).$on("reject",(function(){return t.reject()})),dr(rd,this).$on("error",(function({detail:e}){return t.emit("error",e)})),cr(ad,this,ud).call(this)}function ud(){const t=this.getOptions("masters",!1);if(t)for(let e in t){const i=t[e];for(let t in i){const r=i[t];cr(ad,this,dd).call(this,t,e,r)}}}function dd(t,e,i=[]){var r=this;this.on(`change.${e}`,(function(n){cr(ad,r,hd).call(r,t,e,i,n)})),this.emit(`change.${e}`,this.getFormData()[e])}function hd(t,e,i,r){var n=this;const s=Zu.exec(t,e,i,r,this);i.forEach((function(t){n.updateField(t,s)}))}function gd({manifest:t,formOptions:e={ui:{},fields:{}},data:i=null,injectedProps:r={}}){const n=dr(nd,this);null==e&&(e={ui:{},fields:{}});const s=$u.initFormByField({},t.actions[n].fields,dr(od,this),dr(sd,this),e.fields,i);return{loading:!this.getOptions("autoInit",!0),title:t.actions[n].title,description:t.actions[n].description,fields:t.actions[n].fields,form:s,...e.ui,...r}}function fd(t){this.error(`${t} for ${this.getWorking("name")} form is not defined`)}var pd=we('<div class="block-container"><div class="form-paper"></div> <!></div>');function vd(t,e){Xt(e,!0);let i=Ri(),r=Ei(e,"name",3,"default-form"),n=Ei(e,"showModes",3,!1),s=Ei(e,"mode",15,"default"),o=Ei(e,"forms",19,(()=>[]));let a=T(ie([]));function l(){R(a,ie(o().filter((t=>s()!==t.mode)).map((t=>({title:t.title,outlined:!0,type:"link",action(){var e;e=t.mode,s(e),i("mode",e),l()}})))))}Mi((()=>{l()}));var c=pd(),u=ue(c);je(he(u,2),n,(t=>{hn(t,{centered:!0,get values(){return Kt(a)},set values(t){R(a,ie(t))},classes:"mt-4"})})),Z((()=>{ei(c,"id",`${r()??""}-form-set`),ei(u,"id",`${r()??""}-form-set-container`)})),_e(t,c),Zt()}const md="form-set";var bd=new WeakMap,yd=new WeakMap,$d=new WeakMap,Od=new WeakMap,wd=new WeakSet;function kd(){return{showModes:this.getOptions("showModes",!0),mode:this.getFormMode(),forms:this.getOptions("forms",[]),name:this.getOptions("name",md)}}function Id(t,e){return"function"!=typeof e()||(t.preventDefault(),e()(t.currentTarget.dataset.href),!1)}var _d,Ad=we('<li class="is-active"><a aria-current="page"> </a></li>'),Sd=we('<li class="is-plain-crumb"> </li>'),Cd=we("<li><a> </a></li>"),Ld=we('<nav class="breadcrumb" aria-label="breadcrumbs"><ul></ul></nav>');be(["click"]);class Ed{static render({target:t,root:e="",navigate:i}){this.remove(),Ed.UIConstructor&&(this.ui=new Ed.UIConstructor({target:t,props:{items:this.getBreadcrumbs(),root:e,go:i}}))}static setHead(t){return this.head.splice(0,this.head.length,...t),this}static setTail(t){return this.tail.splice(0,this.tail.length,...t),this}static getBreadcrumbs(){let t=[];return t.push(...this.head),t.push(...this.tail),t}static update(){this.ui&&this.ui.$set({items:this.getBreadcrumbs()})}static remove(){return this.ui&&(this.ui.$destroy(),this.ui=null),this}}pr(Ed,"UIConstructor",null),pr(Ed,"ui",null),pr(Ed,"head",[]),pr(Ed,"tail",[]),Ed.UIConstructor=function(t,e){Xt(e,!0);const i=xi(),r=()=>Ti(Xi,"$LOCALE",i);let n=Ei(e,"root",3,""),s=Ei(e,"items",19,(()=>[])),o=Ei(e,"go",3,null);var a=Ld();Ve(ue(a),21,s,ze,((t,e,i)=>{var a=Ie();je(de(a),(()=>s().length===i+1),(t=>{var i=Ad(),s=ue(i),o=ue(s);Z((()=>{ei(s,"href",`${n()??""}${Kt(e).url??""}`),ei(s,"data-href",Kt(e).url),Me(o,r()[Kt(e).title])})),_e(t,i)}),(t=>{var i=Ie();je(de(i),(()=>!1===Kt(e).url),(t=>{var i=Sd(),n=ue(i);Z((()=>Me(n,r()[Kt(e).title]))),_e(t,i)}),(t=>{var i=Cd(),s=ue(i);s.__click=[Id,o];var a=ue(s);Z((()=>{ei(s,"href",`${n()??""}${Kt(e).url??""}`),ei(s,"data-href",Kt(e).url),Me(a,r()[Kt(e).title])})),_e(t,i)})),_e(t,i)})),_e(t,a)})),_e(t,a),Zt()};class Td{static setApp(t){return this.app||(this.app=t),this}static setOptions(t){return this.options={...this.options,...t},this}static getOptionsPathTo(t){return`menu.${this.options.type}.${t}`}static isDirectNavigation(){return this.app?this.app.getOptions(this.getOptionsPathTo("directNavigation"),this.options.directNavigation):this.options.directNavigation}static getOptions(){return this.app?{brand:this.app.getOptions("brand",this.options.brand),items:this.app.getOptions(this.getOptionsPathTo("items"),this.options.items),sections:this.app.getOptions(this.getOptionsPathTo("sections"),this.options.sections),targetSelector:this.app.getOptions(this.getOptionsPathTo("targetSelector"),this.options.targetSelector),toggleSelector:this.app.getOptions(this.getOptionsPathTo("toggleSelector"),this.options.toggleSelector),open:this.app.getOptions(this.getOptionsPathTo("open"),this.options.open),directNavigation:this.app.getOptions(this.getOptionsPathTo("directNavigation"),this.options.directNavigation),root:this.app.getOptions("router.root",this.options.root),navigate:this.options.navigate.bind(this),getComponent:this.getComponent.bind(this)}:this.options}static getComponent(t){return!!ao.contains(t)&&ao.get(t)}static initField(t,e=[]){var i=this;t.forEach((function(t){e.forEach((function(e){Object.hasOwn(t,e)||(t[e]=i.DEFAULT[e])})),Object.hasOwn(t,"items")&&i.initField(t.items,e)}))}static sortList(t){var e=this;t.sort((function(t,i){return Object.hasOwn(t,"items")&&e.sortList(t.items),Object.hasOwn(i,"items")&&e.sortList(i.items),t.priority===i.priority?t.title>i.title?1:-1:t.priority<i.priority?1:-1}))}static removeDublicates(t){for(let e=0;e<t.length;e++){let i=t[e].priority;t.filter((function(i){return i.id===t[e].id})).forEach((function(e,r){0!==r&&(e.priority<i&&(i=e.priority),t.splice(t.indexOf(e),1))})),t[e].priority=i}return t}static prepareData(){let t=[];t.push(...this.getOptions().items);let e=[];e.push(...this.getOptions().sections),this.initField(e,["priority"]),this.removeDublicates(e),this.initField(t,["priority","section","type"]),this.sortList(e),e.push({id:this.DEFAULT.section,title:this.DEFAULT.sectionTitle}),this.sortList(t),this.sections=e,this.items=t}static remove(){this.menu&&(this.menu.$destroy(),this.menu=null,clearInterval(this.interval))}static updateIndicator(t,e,i){this.updateSection(t,(function(t){t.indicator.state=i})),this.updateItem(e,(function(t){t.indicator.state=i}))}static updateTag(t,e,i){this.updateSection(t,(function(t){t.tag=i})),this.updateItem(e,(function(t){t.tag=i}))}static updateSectionTag(t,e){this.updateSection(t,(function(t){t.tag={...t.tag,...e}}))}static updateItemTag(t,e){this.updateItem(t,(function(t){t.tag={...t.tag,...e}}))}static updateSection(t,e){if(this.sections&&t){for(let i in this.sections)this.sections[i].id===t&&e(this.sections[i]);this.menu&&this.menu.$set({sections:this.sections})}}static updateSectionItems(t,e){if(this.sections&&t){let i=this.items.filter((function(e){return e.section===t}));for(let t of i)this.items.splice(this.items.indexOf(t),1);this.items.push(...e(i)),this.menu&&this.menu.$set({items:this.items})}}static updateItem(t,e){t&&this.items&&(this.items.forEach((function(i){i.id===t&&e(i)})),this.menu&&this.menu.$set({items:this.items}))}static isTouch(){return Kr.isMobile(!0)}static getSectionComponent(){}}function xd(t,e){return t.preventDefault(),e("navigate",{full:t.target.getAttribute("href"),short:t.target.dataset.href}),!1}_d=Td,pr(Td,"MAX_TOUCH_WIDTH",1023),pr(Td,"DEFAULT",{section:"any",sectionTitle:"Меню",priority:0,type:"link",open:!1}),pr(Td,"app",!1),pr(Td,"directNavigation",!1),pr(Td,"menu",void 0),pr(Td,"options",{directNavigation:!1,navigate:function(t){if(_d.hide(),!_d.isDirectNavigation()&&_d.app){let e=_d.app.getWorking("router");if(e)return e.navigate(t.short)}document.location.assign(t.full)}}),pr(Td,"items",[]),pr(Td,"sections",[]),pr(Td,"location",void 0),pr(Td,"interval",void 0);var Fd=we("<li><a> <!> <!></a></li>"),Nd=we("<li> <!> <!></li>");function Md(t,e,i){return t&&t.preventDefault()&&t.stopPropagation(),e(!e()),i("toggle",{closed:e()}),!1}be(["click"]);var Rd=we('<span class="icon is-small is-toggle-submenu is-pulled-right"><i aria-hidden="true"></i></span>');function Ud(t,e){Xt(e,!0);const i=Ri(),r="fa-angle-down",n="fa-angle-up";let s=Ei(e,"icon_opened",19,(()=>r)),o=Ei(e,"icon_closed",19,(()=>n)),a=Ei(e,"closed",15,!1);var l=Rd();l.__click=[Md,a,i],l.__keyup=[Md,a,i];var c=ue(l);Z((()=>ni(c,`fas ${(a()?o():s())??""}`))),_e(t,l),Zt()}be(["click","keyup"]);var Dd=we('<span class="is-no-link"> </span>'),Pd=we("<!> <!> <!> <!>",1);function jd(t,e){Xt(e,!0);const i=xi();let r=Ei(e,"item",19,(()=>({})));var n=Pd(),s=de(n);je(s,(()=>r().icon),(t=>{el(t,Ci((()=>r().icon)))}),(t=>{var e=Ie();je(de(e),(()=>"component"===r().type&&r().component&&ao.contains(r().component)),(t=>{var e=Ie();const i=P((()=>ao.get(r().component)));Xe(de(e),(()=>Kt(i)),((t,e)=>{e(t,Ci({get id(){return r().id}},(()=>r().props)))})),_e(t,e)}),(t=>{var e=Dd(),n=ue(e);Z((()=>Me(n,Ti(Xi,"$LOCALE",i)[r().title]))),_e(t,e)}),!0),_e(t,e)}));var o=he(s,2);je(o,(()=>r().tag),(t=>{Lr(t,Ci({get id(){return r().id}},(()=>r().tag)))}));var a=he(o,2);je(a,(()=>r().indicator),(t=>{Pr(t,Ci({get id(){return r().id}},(()=>r().indicator)))})),Qe(he(a,2),(()=>e.children??h)),_e(t,n),Zt()}function Wd(t,e){return t.preventDefault(),e("navigate",{full:t.target.getAttribute("href"),short:t.target.dataset.href}),!1}var Bd=we('<a class="has-subitems"><!></a>'),zd=we("<li><!> <!></li>"),Vd=we("<ul></ul>");function qd(t,e){Xt(e,!0);const i=Ri();let r=ie({}),n=Ei(e,"root",3,""),s=Ei(e,"items",19,(()=>[])),o=Ei(e,"closed",3,!1);var a=Vd();Ve(a,21,s,ze,((t,s,o)=>{var a=Ie();je(de(a),(()=>Kt(s).items&&Kt(s).items.length),(t=>{var a=zd(),l=ue(a);je(l,(()=>void 0!==Kt(s).url&&!1!==Kt(s).url),(t=>{var e=Bd();e.__click=[Wd,i],jd(ue(e),{get item(){return Kt(s)},children:(t,e)=>{Ud(t,{$$events:{toggle:({detail:t})=>{r[o]=t.closed}}})},$$slots:{default:!0}}),Z((()=>{ei(e,"href",`${n()??""}${Kt(s).url??""}`),ei(e,"data-href",Kt(s).url)})),_e(t,e)}),(t=>{jd(t,{get item(){return Kt(s)},children:(t,e)=>{Ud(t,{$$events:{toggle:({detail:t})=>{r[o]=t.closed}}})},$$slots:{default:!0}})})),qd(he(l,2),{get root(){return n()},get items(){return Kt(s).items},get closed(){return r[o]},set closed(t){r[o]=t},$$events:{navigate(t){Ii.call(this,e,t)}}}),Z((()=>ni(a,`is-no-follow-subtitle ${Kt(s).classes??""}`))),_e(t,a)}),(t=>{!function(t,e){Xt(e,!0);const i=xi(),r=()=>Ti(Xi,"$LOCALE",i),n=Ri();let s=Ei(e,"root",3,""),o=Ei(e,"item",19,(()=>({})));var a=Ie();je(de(a),(()=>void 0!==o().url&&!1!==o().url),(t=>{var e=Fd(),i=ue(e);i.__click=[xd,n];var a=ue(i),l=he(a);je(l,(()=>o().tag),(t=>{Pr(t,Ci({get id(){return o().id}},(()=>o().tag)))})),je(he(l,2),(()=>o().indicator),(t=>{Pr(t,Ci({get id(){return o().id}},(()=>o().indicator)))})),Z((()=>{ni(e,o().classes),ei(i,"href",`${s()??""}${o().url??""}`),ei(i,"data-href",o().url),Me(a,`${r()[o().title]??""} `)})),_e(t,e)}),(t=>{var e=Nd(),i=ue(e),n=he(i);je(n,(()=>o().tag),(t=>{Pr(t,Ci({get id(){return o().id}},(()=>o().tag)))})),je(he(n,2),(()=>o().indicator),(t=>{Pr(t,Ci({get id(){return o().id}},(()=>o().indicator)))})),Z((()=>{ni(e,`is-no-follow-subtitle ${o().classes??""}`),Me(i,`${r()[o().title]??""} `)})),_e(t,e)})),_e(t,a),Zt()}(t,{get root(){return n()},get item(){return Kt(s)},$$events:{navigate(t){Ii.call(this,e,t)}}})})),_e(t,a)})),Z((()=>ni(a,`menu-list ${(o()?"is-closed":"")??""}`))),_e(t,a),Zt()}be(["click"]);var Hd=we("<p><!> <!> <!></p>"),Kd=we("<!> <!>",1);function Gd(t,e){Xt(e,!0);const i=xi();let r=Ei(e,"items",19,(()=>[])),n=Ei(e,"root",3,""),s=P((()=>r().filter((t=>e.section.id===t.section))));var o=Kd(),a=de(o);je(a,(()=>e.section),(t=>{var r=Ie();je(de(r),(()=>Kt(s).length||e.section.component||e.section.tag||e.section.indicator),(t=>{var r=Hd(),n=ue(r);je(n,(()=>"component"===e.section.type&&e.section.component&&ao.contains(e.section.component)),(t=>{var i=Ie();const r=P((()=>ao.get(e.section.component)));Xe(de(i),(()=>Kt(r)),((t,i)=>{i(t,Ci({get id(){return e.section.id}},(()=>e.section.props)))})),_e(t,i)}),(t=>{var r=ke();Z((()=>Me(r,Ti(Xi,"$LOCALE",i)[e.section.title]))),_e(t,r)}));var s=he(n,2);je(s,(()=>e.section.tag),(t=>{Pr(t,Ci({get id(){return e.section.id}},(()=>e.section.tag)))})),je(he(s,2),(()=>e.section.indicator),(t=>{Pr(t,Ci({get id(){return e.section.id}},(()=>e.section.indicator)))})),Z((()=>ni(r,`menu-label ${e.section.classes??""}`))),_e(t,r)})),_e(t,r)})),je(he(a,2),(()=>Kt(s).length),(t=>{qd(t,{get root(){return n()},get items(){return Kt(s)},$$events:{navigate(t){Ii.call(this,e,t)}}})})),_e(t,o),Zt()}function Jd(t,e){Xt(e,!0);let i=Ei(e,"root",3,""),r=Ei(e,"items",19,(()=>[])),n=Ei(e,"sections",19,(()=>[])),s=Ei(e,"navigate",3,null);function o(t){"function"==typeof s()&&s()(t.detail)}var a=Ie();Ve(de(a),17,n,ze,((t,e)=>{Gd(t,{get section(){return Kt(e)},get items(){return r()},get root(){return i()},$$events:{navigate:o}})})),_e(t,a),Zt()}const Yd=Yi({open:!0});var Qd;const Xd="side";class Zd extends Td{static render(t){t&&this.setApp(t),this.prepareData(),this.menu||this.createUI()}static update(){this.menu&&(this.menu.$destroy(),this.createUI())}static createUI(){let t=document.querySelector(this.getOptions().targetSelector);t&&(this.menu=Re(Jd,{target:t,props:{items:this.items,sections:this.sections,root:this.getOptions().root,navigate:this.getOptions().navigate}}),this.initSizeResponse(),this.interval=setInterval(this.updateMenuActiveItem.bind(this),200),this.bindToggle())}static itemIsActive(t){return(this.location+"/").indexOf(t+"/")>-1}static updateMenu(){var t=this;Array.from(document.querySelectorAll(this.getOptions().targetSelector+" a")).forEach((function(e){t.itemIsActive(e.getAttribute("href"))?e.classList.add("is-active"):e.classList.remove("is-active")}))}static updateMenuActiveItem(){let t=window.location.toString(),e=this.location;e?t!==e&&(this.location=t,this.updateMenu()):(this.location=t,this.updateMenu())}static initSizeResponse(){this.nav=document.querySelector("nav.navbar"),this.aside=document.querySelector("aside"),this.main=document.querySelector("main"),this.resizeAsideAndMain(this.aside,this.main,this.nav),this.resizeMain(this.main,this.aside),window.addEventListener("resize",this.resizeMain.bind(this)),this.isTouch()&&(this.getOptions().open?this.show():this.hide())}static resizeMain(){if(this.isTouch())this.aside.classList.contains("is-active")?this.main.style.display="none":(this.main.style.display="block",this.main.style.marginLeft="0px");else{let t=this.aside.getBoundingClientRect();this.main.style.display="block","0px"===this.main.style.height&&(this.main.style.height="auto"),this.main.style.marginLeft=t.width+t.left+"px"}}static resizeAside(){if("none"!==this.aside.style.display){let t=this.nav.getBoundingClientRect();this.aside.style.height=window.innerHeight-t.height+"px",this.aside.style.marginTop=t.height+"px"}}static resizeAsideAndMain(){let t=this.nav.getBoundingClientRect();this.aside.style.height=window.innerHeight-t.height+"px"}static bindToggle(){var t=this;let e=document.querySelectorAll(this.getOptions().toggleSelector);Array.from(e).forEach((function(e){e.removeEventListener("click",t.toggle.bind(t)),e.addEventListener("click",t.toggle.bind(t))}))}static toggle(t){return t&&t.preventDefault(),this.aside&&(this.isTouch()?this.aside.classList.toggle("is-active"):this.aside.classList.toggle("is-closed"),this.resizeMain()),!1}static hide(t){return t&&t.preventDefault(),this.aside&&(this.isTouch()?this.aside.classList.remove("is-active"):this.aside.classList.add("is-closed"),this.resizeMain()),Yd.update((function(t){return t.open=!1,t})),!1}static show(t){return t&&t.preventDefault(),this.aside&&(this.isTouch()?this.aside.classList.add("is-active"):this.aside.classList.remove("is-closed"),this.resizeMain()),Yd.update((function(t){return t.open=!0,t})),!1}static isOpen(){return!this.aside||(this.isTouch()?this.aside.classList.contains("is-active"):!this.aside.classList.contains("is-closed"))}}Qd=Zd,pr(Zd,"nav",void 0),pr(Zd,"main",void 0),pr(Zd,"aside",void 0),pr(Zd,"DEFAULT",{section:"any",sectionTitle:"Меню",priority:0,open:!0,type:"link"}),pr(Zd,"options",{directNavigation:!1,type:Xd,items:[],sections:[],targetSelector:`#${Xd}-menu`,toggleSelector:`.${Xd}-menu-toggle`,root:"/",open:!0,navigate:function(t){if(Qd.isTouch()&&(Qd.hide(),Qd.app.emit("top-navbar-burger:update",{closed:!0})),!Qd.isDirectNavigation()&&Qd.app){let e=Qd.app.getWorking("router");if(e)return e.navigate(t.short)}document.location.assign(t.full)}});var th=we('<a class="navbar-item"><!> <!></a>');var eh=we("<!> <!> <!>",1);function ih(t,e){Xt(e,!0);const i=xi();var r=eh(),n=de(r);je(n,(()=>e.item.icon),(t=>{nl(t,Ci((()=>e.item.icon)))}),(t=>{var r=Ie();je(de(r),(()=>"component"===e.item.type&&e.item.component&&ao.contains(e.item.component)),(t=>{var i=Ie();const r=P((()=>ao.get(e.item.component)));Xe(de(i),(()=>Kt(r)),((t,i)=>{i(t,Ci({get id(){return e.item.id}},(()=>e.item.props)))})),_e(t,i)}),(t=>{var r=ke();Z((()=>Me(r,Ti(Xi,"$LOCALE",i)[e.item.title]))),_e(t,r)}),!0),_e(t,r)}));var s=he(n,2);je(s,(()=>e.item.tag),(t=>{Lr(t,Ci({top:!0,right:!0,size:"small",get id(){return e.item.id}},(()=>e.item.tag)))})),je(he(s,2),(()=>e.item.indicator),(t=>{Pr(t,Ci({get id(){return e.item.id}},(()=>e.item.indicator)))})),_e(t,r),Zt()}function rh(t,e,i){e("click",{event:t,element:i()})}var nh=we("<hr>"),sh=we("<a><!></a>"),oh=we("<div><!></div>"),ah=we("<!> <!>",1);function lh(t,e){Xt(e,!0);const i=Ri();let r=Ei(e,"root",3,""),n=Ei(e,"item",19,(()=>({}))),s=Ei(e,"hidden",3,""),o=Ei(e,"classes",3,"");var a=ah(),l=de(a);je(l,(()=>n().break),(t=>{var e=nh();Z((()=>ni(e,`navbar-divider ${(s()?`is-hidden-${s()}`:"")??""} `))),_e(t,e)})),je(he(l,2),(()=>n().url),(t=>{var e=sh();e.__click=[rh,i,n],ih(ue(e),{get item(){return n()}}),Z((()=>{ni(e,`navbar-item ${(s()?`is-hidden-${s()}`:"")??""} ${n().classes??""} ${o()??""} `),ei(e,"href",`${r()??""}${n().url??""}`),ei(e,"data-href",n().url)})),_e(t,e)}),(t=>{var e=oh();e.__click=[rh,i,n],e.__keyup=[rh,i,n],ih(ue(e),{get item(){return n()}}),Z((()=>ni(e,`navbar-item ${(s()?`is-hidden-${s()}`:"")??""} ${n().classes??""} ${o()??""}`))),_e(t,e)})),_e(t,a),Zt()}function ch(t,e,i){e("click",{event:t,element:i()})}be(["click","keyup"]);var uh=we('<div><a href=""><!></a> <div></div></div>'),dh=we("<a><!></a>"),hh=we("<div><!></div>");function gh(t,e){Xt(e,!0);const i=Ri();let r=Ei(e,"root",3,""),n=Ei(e,"section",19,(()=>({}))),s=Ei(e,"items",19,(()=>[])),o=Ei(e,"hidden",3,""),a=Ei(e,"hoverable",3,!0),l=Ei(e,"arrowless",3,!1),c=Ei(e,"right",3,!1);var u=Ie();je(de(u),(()=>s().length),(t=>{var u=uh(),d=ue(u);d.__click=[ch,i,n],ih(ue(d),{get item(){return n()}});var h=he(d,2);Ve(h,21,s,(t=>t.id),((t,i)=>{lh(t,{get root(){return r()},get item(){return Kt(i)},$$events:{click(t){Ii.call(this,e,t)}}})})),Z((()=>{ni(u,`navbar-item has-dropdown ${(a()?"is-hoverable":"")??""} ${(o()?`is-hidden-${o()}`:"")??""} `),ni(d,`navbar-link ${(l()?"is-arrowless":"")??""}`),ni(h,`navbar-dropdown ${(c()?"is-right":"")??""}`)})),_e(t,u)}),(t=>{var e=Ie();je(de(e),(()=>n().url),(t=>{var e=dh();e.__click=[ch,i,n],ih(ue(e),{get item(){return n()}}),Z((()=>{ni(e,`navbar-item ${(o()?`is-hidden-${o()}`:"")??""} `),ei(e,"href",`${r()??""}${n().url??""}`),ei(e,"data-href",n().url)})),_e(t,e)}),(t=>{var e=hh();e.__click=[ch,i,n],e.__keyup=[ch,i,n],ih(ue(e),{get item(){return n()}}),Z((()=>ni(e,`navbar-item ${(o()?`is-hidden-${o()}`:"")??""} `))),_e(t,e)}),!0),_e(t,e)})),_e(t,u),Zt()}function fh(t,e,i){return t.preventDefault(),e(!e()),i("toggle",{closed:e()}),!1}be(["click","keyup"]);var ph=we('<a href="" role="button" aria-label="menu" aria-expanded="false" data-target="navbar"><span aria-hidden="true"></span> <span aria-hidden="true"></span> <span aria-hidden="true"></span></a>');function vh(t,e){Xt(e,!0);const i=Ri();let r=Ei(e,"events",31,(()=>ie({}))),n=Ei(e,"register",19,(()=>Ir.registerWidgetEvents.bind(Ir))),s=Ei(e,"closed",15,!0),o=Ei(e,"onUpdate",3,(t=>{s(t.closed)}));Mi((()=>{Ir.objHas(r(),"top-navbar-burger:update")||r(r()["top-navbar-burger:update"]=o(),!0),n()(r())})),Yd.subscribe((t=>(s(!t.open),t)));var a=ph();a.__click=[fh,s,i],Z((()=>ni(a,`navbar-burger ${(s()?"":"is-active")??""}`))),_e(t,a),Zt()}be(["click"]);var mh,bh=we('<div class="navbar-brand"><!> <!> <!> <!></div> <div id="navbar"><div class="navbar-start"></div> <div class="navbar-end"></div></div>',1);function yh(t,e){Xt(e,!0);const i=Ri();let r=Ei(e,"sections",19,(()=>[])),n=Ei(e,"items",19,(()=>[])),s=Ei(e,"root",3,""),o=Ei(e,"navigate",3,null),a=Ei(e,"brand",3,!1),l=Ei(e,"showBurger",3,!0),c=Ei(e,"burgerControlsSidemenu",3,!0),u=T(!0);function d({detail:t}){let{event:e,element:i}=t;return Object.hasOwn(i,"action")?i.action(e,i):(e.preventDefault(),"function"==typeof o()&&o()({full:e.currentTarget.getAttribute("href"),short:e.currentTarget.dataset.href}),!1)}let h={},g={};function f({detail:t}){c()?Zd.toggle():(i("toggleBurger",t),R(u,ie(t.closed)))}var p=bh(),v=de(p),m=ue(v);je(m,a,(t=>{!function(t,e){let i=Ei(e,"url",3,"/"),r=Ei(e,"title",3,""),n=Ei(e,"icon",19,(()=>({src:"https://via.placeholder.com/56x28",width:28,height:56})));var s=th(),o=ue(s);nl(o,Ci(n)),je(he(o,2),r,(t=>{var e=Ie();Je(de(e),(()=>`<span class="navbar-item-brand-title">${r()}</span>`)),_e(t,e)})),Z((()=>ei(s,"href",i()))),_e(t,s)}(t,Ci(a))}));var b=he(m,2);Ve(b,17,r,(t=>t.id),((t,e)=>{var i=Ie();je(de(i),(()=>Kt(e).showOnTouch),(t=>{lh(t,{hidden:"desktop",get item(){return Kt(e)},get root(){return s()},$$events:{click:d}})})),_e(t,i)}));var y=he(b,2);Ve(y,17,n,(t=>t.id),((t,e)=>{var i=Ie();je(de(i),(()=>Kt(e).showOnTouch),(t=>{lh(t,{hidden:"desktop",get item(){return Kt(e)},get root(){return s()},$$events:{click:d}})})),_e(t,i)})),je(he(y,2),l,(t=>{vh(t,{$$events:{toggle:f}})}));var $=he(v,2),O=ue($);Ve(O,21,n,ze,((t,e)=>{var i=Ie();je(de(i),(()=>"start"===Kt(e).place),(t=>{lh(t,{hidden:"touch",get item(){return Kt(e)},$$events:{click:d}})})),_e(t,i)})),Ve(he(O,2),21,r,(t=>t.id),((t,e)=>{var i=Ie();je(de(i),(()=>(h[Kt(e).id]||Kt(e).indicator||Kt(e).tag)&&"end"==Kt(e).place),(t=>{gh(t,{right:!0,get hidden(){return Kt(e).hidden},get root(){return s()},get section(){return Kt(e)},get items(){return g[Kt(e).id]},$$events:{click:d}})})),_e(t,i)})),Z((()=>ni($,`navbar-menu ${(Kt(u)?"":"is-active")??""}`))),_e(t,p),Zt()}class $h extends Td{static render(t){if(t&&this.setApp(t),this.prepareData(),!this.menu){let t=document.querySelector(this.getOptions().targetSelector);if(!t)return;this.menu=Re(yh,{target:t,props:{brand:this.getOptions().brand,items:this.items,sections:this.sections,root:this.getOptions().root,navigate:this.getOptions().navigate}}),this.interval=setInterval(this.updateMenuActiveItem.bind(this),200)}}static updateMenu(t){Array.from(document.querySelectorAll(this.getOptions().targetSelector+" aside.menu a")).forEach((function(e){e.href==t||t.href&&0==t.href.indexOf(e.href)?e.classList.add("is-active"):e.classList.remove("is-active")}))}static updateMenuActiveItem(){let t=window.location.toString(),e=this.location;e?t!==e&&(this.location=t,this.updateMenu(t)):(this.location=t,this.updateMenu(t))}static toggle(){document.querySelector(this.getOptions().targetSelector).classList.toggle("is-active")}static hide(){document.querySelector(this.getOptions().targetSelector).classList.remove("is-active")}static setBurgerState(t){this.menu.$set({menuClosed:t})}}mh=$h,pr($h,"DEFAULT",{section:"any",sectionTitle:"Меню",priority:0,type:"link",place:"main"}),pr($h,"options",{brand:!1,type:"top",items:[],sections:[],targetSelector:"#top-menu",root:"/",directNavigation:!1,navigate:function(t){if(mh.hide(),!mh.isDirectNavigation()&&mh.app){let e=mh.app.getWorking("router");if(e)return e.navigate(t.short)}document.location.assign(t.full)}});const Oh=function(t){return Object.hasOwn(t,"status")&&Object.hasOwn(t,"result")?t.result:t};const wh=["create","update","list","delete","details"];class kh{static async preload(t,e="list"){try{if(!wh.includes(e))return;let i=t.getOptions(`${e}.preload`,{});if(0==Object.keys(i).length&&(i=t.getOptions("preload",{})),Object.keys(i).length>0){let r=Object.keys(i),n=[];r.forEach((function(e){let r=Ir.lowerFirstLetter(i[e]),s=t.make[r]({});n.push(s.$listAll())}));let s=await Promise.all(n);for(let i=0;i<r.length;i++){const n=r[i];if("ok"===s[i].status&&Array.isArray(s[i].result)){const r=s[i].result.map((function(t){return{id:t._id,title:t.title}}));t.setOptions(`variants.${e}.${n}`,r)}}}t.log("preload finished")}catch(e){t.report(e),t.showErrorMessage(e)}}}class Ih{static extractActionName(t,e){let i="list";return 1===e.length?i="create"===e[0]?"create":t.actionHandlerExists(e[0])?e[0]:"details":e.length>1&&(i="delete"===e[1]?"delete":"update"===e[1]?"update":e[1]),i}static route(t,e){try{const i=Ih.extractActionName(t,e);return t.setCurrentAction(i),t.runAction(i,e)}catch(e){t.report(e),t.showErrorMessage(e)}}}class _h{static error(t,e,i){t.setUI("__message__",new Ll({target:t.getContainerInnerElement(),props:{title:e,message:i}}))}static success(t,e,i){t.setUI("__message__",new Tl({target:t.getContainerInnerElement(),props:{title:e,message:i}}))}}const Ah="Просмотр";class Sh{static get NAVIGATION_DELAY(){return On}static get deafultBreadcrumbsTail(){return Ah}static get breadcrumbsTails(){return{preset:Ah,set:'Просмотр, "{:title}"'}}static getBreadcrumbsTail(t){return this.breadcrumbsTails?Ir.select(this.breadcrumbsTails,t,this.deafultBreadcrumbsTail):""}static get ACTION(){return"details"}static get MODEL_ACTION_GET(){return"get"}static get MODEL_ACTION_PUT(){return"get"}static get UIConstructor(){return ld}static get TRANSFORMER(){return Oh}static getIdField(t){return t.getOptions(`${this.ACTION}.idField`,"_id")}static loadDataQuery(t,e){const i=this.getIdField(t);return{[i]:e[0]}}static async loadData(t,e){const i=this.loadDataQuery(t,e),r=this.getModelActionName(t);return await t.getModel(i)[`$${r}`]()}static getModelActionName(t){return t.getOptions(`${this.ACTION}.actionName`,this.MODEL_ACTION_GET)}static presetBreadcrumbs(t,e){t.setBreadcrumbs([{title:this.getBreadcrumbsTail("preset"),url:t.getModelActionURL(e[0],!1)}])}static getTitle(t,e,i){return t.getItemTitle(i.result)}static setBreadcrumbs(t,e,i){const r=this.getTitle(t,e,i),n=this.getBreadcrumbsTail("set");t.setBreadcrumbs([{title:n?Ar.format(n,{title:r}):r,url:t.getModelActionURL(e[0],!1)}])}static isResponseBad(t){return!t||"ok"!==t.status}static getValidators(t){return t.getValidators&&t.getValidators()||t.getOptions("Validators")}static prepareUIOptions(t,e){const i=this.getModelActionName(t);return{options:{target:t.getContainerInnerElement(),model:t.getModelName(),action:i,name:`${t.getName()}.${this.ACTION}Form`,fields:{readonly:!0},validators:this.getValidators(t),variants:t.getOptions(`variants.${this.ACTION}`,{}),masters:t.getOptions(`${this.ACTION}.masters`,{}),injected:t.getOptions(`${this.ACTION}.injected`,{})},data:this.TRANSFORMER(e.result)}}static getUI(t){return t.getUI(this.ACTION)}static setUI(t,e){t.setUI(this.ACTION,e)}static setUILoading(t){this.getUI(t).$set({loading:!0})}static setUILoaded(t){this.getUI(t).$set({loading:!1})}static setUIError(t,e){this.getUI(t).$set({error:e})}static bindUIEvents(t,e,i){Ir.isFunc(t.goBack)&&this.bindUIEvent(t,"reject",(function(){return t.goBack()}))}static bindUIEvent(t,e,i){const r=this.getUI(t);return r.$on?r.$on(e,i):r.on?r.on(e,i):void 0}static isUIRendered(t){return!!this.getUI(t)||(t.$destroyUI(),!1)}static tweakUIOptions(t){return t}static async run(t,e){try{if(t.emit(`before:render:${this.ACTION}`,e),this.isUIRendered(t))return;t.renderLoadingScreen&&t.renderLoadingScreen(),await t.preloadVariants(this.ACTION),this.presetBreadcrumbs(t,e);const i=await this.loadData(t,e);if(this.isResponseBad(i))return t.showErrorMessage(i);this.setBreadcrumbs(t,e,i);const r=this.UIConstructor;this.setUI(t,new r(this.tweakUIOptions(this.prepareUIOptions(t,i)))),this.bindUIEvents(t,e,i),t.emit(`after:render:${this.ACTION}`,e,i)}catch(i){t.emit(`exception:render:${this.ACTION}`,e,i),t.report(i),t.showErrorMessage(i)}finally{t.removeLoadingScreen&&t.removeLoadingScreen()}}static goBackAfterDelay(t){t.goBack(this.NAVIGATION_DELAY)}static goBack(t){t.goBack(0)}}const Ch="create";class Lh extends Sh{static get deafultBreadcrumbsTail(){return"Создание"}static get breadcrumbsTails(){}static get ACTION(){return Ch}static get MODEL_ACTION_GET(){return Ch}static get MODEL_ACTION_PUT(){return Ch}static loadData(t,e){let i=t.createDefault();return i.getData&&(i=i.getData()),{status:"ok",result:i}}static getTitle(t,e,i){return t.getItemTitle(i)}static prepareUIOptions(t,e){const i=this.getModelActionName(t);return{options:{target:t.getContainerInnerElement(),model:t.getModelName(),action:i,name:`${t.getName()}.${this.ACTION}Form`,validators:this.getValidators(t),variants:t.getOptions(`variants.${this.ACTION}`,{}),masters:t.getOptions(`${this.ACTION}.masters`,{})},data:this.TRANSFORMER(e)}}static bindUIEvents(t,e,i){var r=this;Ir.isFunc(t.goBack)&&this.bindUIEvent(t,"reject",(function(){return r.goBack(t)})),Ir.isFunc(t.onActionSubmit)&&this.bindUIEvent(t,"submit",(async function(i){await t.onActionSubmit(r.ACTION,{...r.loadDataQuery(t,e),...i.detail})&&r.goBackAfterDelay(t)}))}}class Eh extends Sh{static tweakUIOptions(t){return t.options.ui={submit:{enabled:!1}},t}static async run(t,e){try{if(t.emit(`before:render:${this.ACTION}`,e),this.isUIRendered(t))return;t.renderLoadingScreen&&t.renderLoadingScreen(),await t.preloadVariants(this.ACTION),this.presetBreadcrumbs(t,e);const i=await this.loadData(t,e);if(this.isResponseBad(i))return t.showErrorMessage(i);this.setBreadcrumbs(t,e,i);const r=this.UIConstructor;this.setUI(t,new r(this.tweakUIOptions(this.prepareUIOptions(t,i)))),this.bindUIEvents(t,e,i),t.emit(`after:render:${this.ACTION}`,e,i)}catch(i){t.emit(`exception:render:${this.ACTION}`,e,i),t.report(i),t.showErrorMessage(i)}finally{t.removeLoadingScreen&&t.removeLoadingScreen()}}}const Th="Редактирование";class xh extends Sh{static get deafultBreadcrumbsTail(){return Th}static get breadcrumbsTails(){return{preset:Th,set:`${Th}: "{:title}"`}}static get ACTION(){return"update"}static get MODEL_ACTION_GET(){return"getRaw"}static get MODEL_ACTION_PUT(){return"update"}static prepareUIOptions(t,e){return{options:{target:t.getContainerInnerElement(),model:t.getModelName(),action:this.MODEL_ACTION_PUT,name:`${t.getName()}.${this.ACTION}Form`,validators:this.getValidators(t),variants:t.getOptions(`variants.${this.ACTION}`,{}),ui:t.getOptions(`${this.ACTION}.ui`,{}),fields:t.getOptions(`${this.ACTION}.fields`,{}),masters:t.getOptions(`${this.ACTION}.masters`,{})},data:this.TRANSFORMER(Ir.stripProxy(e.result))}}static bindUIEvents(t,e,i){var r=this;Ir.isFunc(t.goBack)&&this.bindUIEvent(t,"reject",(function(){return r.goBack(t)})),Ir.isFunc(t.onActionSubmit)&&this.bindUIEvent(t,"submit",(async function(i){await t.onActionSubmit(r.ACTION,{...r.loadDataQuery(t,e),...i.detail})&&r.goBackAfterDelay(t)}))}static isUIRendered(t){return!!this.getUI(t)||(t.$destroyUI(),!1)}static async run(t,e){try{if(t.emit(`before:render:${this.ACTION}`,[e]),this.isUIRendered(t))return;t.renderLoadingScreen&&t.renderLoadingScreen(),await t.preloadVariants(this.ACTION),this.presetBreadcrumbs(t,e);const i=await this.loadData(t,e);if(this.isResponseBad(i))return t.showErrorMessage(i);this.setBreadcrumbs(t,e,i);const r=this.UIConstructor;this.setUI(t,new r(this.tweakUIOptions(this.prepareUIOptions(t,i)))),this.bindUIEvents(t,e,i),t.emit(`after:render:${this.ACTION}`,e)}catch(i){t.emit(`exception:render:${this.ACTION}`,e,i),t.report(i),t.showErrorMessage(i)}finally{t.removeLoadingScreen&&t.removeLoadingScreen()}}}const Fh="delete";const Nh="list";class Mh{static tweakActionsList(t,e){return t.getOptions(`${Nh}.createAction`,!0)&&e.push({title:"Создать",action:function(){return t.goCreate()}}),e}static tweakUIOptions(t){return t}static createActionsButtons(t,e,i=0,r=["details","update","delete"],n=[],s=[],o=!0){const a={details:{action:function(){return t.goDetails(e,i)},...o?{icon:"circle-info"}:{title:"Подробнее"},size:"small"},update:{action:function(){return t.goUpdate(e,i)},...o?{icon:"edit"}:{title:"Изменить"},color:"warning",size:"small"},delete:{action:function(){return t.goDelete(e,i)},color:"danger",...o?{icon:"trash"}:{title:"Удалить"},size:"small",style:"outlined"}},l=[...n];return Array.isArray(r)&&r.forEach((function(t){return l.push(a[t])})),l.push(...s),l}static async run(t,e){try{if(t.renderLoadingScreen&&t.renderLoadingScreen(),await t.preloadVariants(Nh),t.setBreadcrumbs([{title:"Список",url:t.getModelURL()}]),t.ui[Nh])return;t.$destroyUI(),t.ui[Nh]=new qc(this.tweakUIOptions(Mh.prepareOptions(t))),t.emit(`after:render:${Nh}`,e,t.ui[Nh])}catch(i){t.emit(`exception:render:${Nh}`,e,i),t.report(i),t.showErrorMessage(i)}finally{t.removeLoadingScreen&&t.removeLoadingScreen()}}static prepareOptions(t){const e={interface:t.getOptions(`${Nh}.interface`,{combined:!0,factory:t.getInterface()}),fields:void 0,showSelect:void 0,getItemId:void 0,idField:void 0,preload:{},filterUI:t.getOptions(`${Nh}.filterUI`),pager:{size:50,page:0},sorter:{id:-1},filter:void 0,ui:void 0};let i=[...t.getOptions(`${Nh}.actions`,[])];i=this.tweakActionsList(t,i);const r={options:{targetEl:t.getContainerInnerElement(),endless:!1,actions:i}};return Object.keys(e).forEach((function(i){let n=t.getOptions(`${Nh}.${i}`,e[i]);void 0!==n&&(r.options[i]=n)})),r}}var Rh={create:class extends Lh{},details:class extends Eh{},update:class extends xh{},delete:class{static async run(t,e){try{if(t.ui[Fh])return;if(t.$destroyUI(),t.ui[Fh]=new Qc({name:"CRUDDelete",target:t.getContainerInnerElement(),options:{loaderActive:!0,loaderStyle:"container",loaderTitle:"not-node:crud_delete_action_waiting",container:{id:`crud-delete-action-${e[0]}`}}}),t.setBreadcrumbs([{title:"Удаление",url:t.getModelActionURL(e[0],Fh)}]),confirm("Удалить запись?")){const i=t.getOptions(`${Fh}.actionName`,"delete");return void(await t.onActionSubmit(i,{_id:e[0]})&&t.goList())}t.goList()}catch(e){t.report(e),t.showErrorMessage(e)}}},list:Mh};const Uh=[],Dh=["title","label","id","name"],Ph="loading_screen";var jh=new WeakMap,Wh=new WeakMap,Bh=new WeakMap;class zh extends ac{static get LABELS(){return Object.freeze({plural:`${this.MODULE_NAME}:${this.MODEL_NAME}_label_plural`,single:`${this.MODULE_NAME}:${this.MODEL_NAME}_label_single`})}static getMenu(t={}){return[{section:this.MODULE_NAME,title:this.LABELS.plural,url:`/${Ir.lowerFirstLetter(this.MODULE_NAME)}/${Ir.lowerFirstLetter(this.MODEL_NAME)}`,...t}]}constructor(t,e,{actions:i,router:r,preloader:n}={actions:void 0,router:void 0,preloader:void 0}){return super(t,`CRUD.${e}`),hr(this,jh,{...Rh}),hr(this,Wh,Ih),hr(this,Bh,kh),pr(this,"TITLE_FIELDS_PRIORITY",Dh),pr(this,"TOP_CLASS",["box"]),pr(this,"MAIN_CLASS",["box"]),pr(this,"BOTTOM_CLASS",["box"]),pr(this,"WS_CHECK_INTERVAL",200),i&&gr(jh,this,{...dr(jh,this),...i}),r&&gr(Wh,this,r),n&&gr(Bh,this,n),this.ui={},this.els={},this.setOptions("names",{module:"",plural:"plural",single:"single"}),this.setOptions("containerSelector",this.app?.getOptions("crud.containerSelector")),this.buildFrame(),this}setValidators(t){const e=this.getModuleName().split("-"),i=`ns${("not"===e[0]?e.splice(1):e).map(Ir.capitalizeFirstLetter).join("")}Common`,r=this.app?.getService(i);this.setWorking("validators",r.augmentValidators(t))}getValidators(){return this.getWorking("validators")}start(){var t=this;let e=[];this.getModuleName()&&this.getOptions("names.module")&&e.push({title:this.getOptions("names.module"),url:!1}),e.push({title:this.getOptions("names.plural"),url:this.getModelURL()}),Uh.splice(0,Uh.length,...e),Ed.setHead(Uh).render({root:"",target:this.els.top,navigate:function(e){return t.app?.getWorking("router").navigate(e)}}),this.route(this.getOptions("params"))}startWhenWSClientReady(){var t=this;this.app?.getWSClient()?this.app?.getWSClient().isConnected()?this.start():this.app.getWSClient().once("connected",this.startWhenWSClientReady.bind(this)):setTimeout((function(){return t.startWhenWSClientReady()}),this.WS_CHECK_INTERVAL)}setBreadcrumbs(t){Ed.setTail(t).update()}backToList(){this.navigate(this.linkBackToList())}linkBackToList(){return this.getModelURL()}afterAction(t="list"){let e=this.app?.getOptions("crud.navigateBackAfter",[]);e&&Array.isArray(e)&&e.indexOf(t)>-1?window.history.back():this.backToList()}buildFrame(){var t=this;let e=document.querySelector(this.app?.getOptions("crud.containerSelector","body"));for(;e.firstChild;)e.removeChild(e.firstChild);this.els.top=document.createElement("div"),this.els.top.id="crud-top",this.getFrameClasses().TOP_CLASS.forEach((function(e){return t.els.top.classList.add(e)})),e.appendChild(this.els.top),this.els.main=document.createElement("div"),this.els.main.id="crud-main",this.getFrameClasses().MAIN_CLASS.forEach((function(e){return t.els.main.classList.add(e)})),e.appendChild(this.els.main),this.els.bottom=document.createElement("div"),this.els.bottom.id="crud-bottom",this.getFrameClasses().BOTTOM_CLASS.forEach((function(e){return t.els.bottom.classList.add(e)})),e.appendChild(this.els.bottom)}getFrameClasses(){return{TOP_CLASS:this.TOP_CLASS,MAIN_CLASS:this.MAIN_CLASS,BOTTOM_CLASS:this.BOTTOM_CLASS}}getContainerTopElement(){return this.els.top}getContainerInnerElement(){return this.els.main}getContainerBottomElement(){return this.els.bottom}async preloadVariants(t="list"){await dr(Bh,this).preload(this,t)}getTitleFromLib(t,e){const i=this.getCurrentAction();return this.debug&&this.debug("notCRUD.getTitleFromLib is obsolete, use notCRUD.getPreloadedVariantTitle(actionName, propName, id)"),this.getPreloadedVariantTitle(i,t,e)}getPreloadedVariants(t,e){return this.getOptions(`variants.${t}.${e}`,[])}getPreloadedVariantTitle(t,e,i){const r=this.getPreloadedVariants(t,e).find((function(t){return t.id===i}));return r?r.title:i}getItemTitle(t){const e=this.TITLE_FIELDS_PRIORITY.find((function(e){return Ir.objHas(t,e)}));return e?t[e]:""}createDefault(){return this.getModel({}).toDefault()}route(t=[]){try{return dr(Wh,this).route(this,t)}catch(t){this.report(t),this.showErrorMessage(t)}}actionHandlerExists(t){return!!Object.keys(dr(jh,this)).includes(t)||"function"==typeof this["run"+Ir.capitalizeFirstLetter(t)]}runAction(t,e){if(Object.keys(dr(jh,this)).includes(t))return dr(jh,this)[t].run(this,e);if("function"==typeof this["run"+Ir.capitalizeFirstLetter(t)])return this["run"+Ir.capitalizeFirstLetter(t)](e);throw new Error(`No such action: ${t} in contoller ${this.getWorking("name")}`)}goCreate(t=0){this.goAfterDelay(this.getModelActionURL("","create"),t)}goDetails(t,e=0){this.goAfterDelay(this.getModelActionURL(t,""),e)}goUpdate(t,e=0){this.goAfterDelay(this.getModelActionURL(t,"update"),e)}goDelete(t,e=0){this.goAfterDelay(this.getModelActionURL(t,"delete"),e)}goList(t=0){this.goAfterDelay(this.getModelURL(),t)}goAfterDelay(t,e=0){var i=this;this.navigateWithDelay(t,e,(function(){return i.$destroyUI()}))}goBack(t=0){this.goList(t)}async onActionSubmit(t,e){let i=!0;const r=this.ui[t];if(!r)throw new Error("Action UI doesnt exist");try{r.setLoading();let n=await this.getModel(e)[`$${t}`]();i=r.processResult(n)}catch(t){i=r.processResult(t)}finally{return r.resetLoading(),i}}$destroyUI(){for(let t in this.ui)this.destroyUIByName(t)}destroyUIByName(t){Object.hasOwn(this.ui,t)&&(this.ui[t].$destroy&&this.ui[t].$destroy(),this.ui[t].destroy&&this.ui[t].destroy(),delete this.ui[t])}showErrorMessage(t){this.error&&this.error(t),this.app&&this.app.emit("error",{title:"Произошла ошибка",message:t.message?t.message:Kr.ERROR_DEFAULT}),_h.error(this,"Произошла ошибка",t.message?t.message:Kr.ERROR_DEFAULT)}showSuccessMessage(t,e){this.app&&this.app.emit("success",{title:t,message:e}),_h.success(this,t,e)}setUI(t,e,i=!0){i&&this.$destroyUI(),this.ui[t]=e}getUI(t){return this.ui[t]}getActionUI(){return this.ui[this.getCurrentAction()]}renderLoadingScreen(){this.setUI(Ph,this.createLoaderUI())}removeLoadingScreen(){this.destroyUIByName(Ph)}createLoaderUI(){return Re(Wr,{target:this.getContainerInnerElement(),props:{loading:!0,title:""}})}}pr(zh,"ERROR_DEFAULT",Kr.ERROR_DEFAULT);class Vh{static extractActionName(t){return t.length>0?t[0]:this.DEFAULT_ROUTE}static route(t,e){try{const i=this.extractActionName(e);return t.setCurrentAction(i),t.runAction(i,e)}catch(e){t.report(e),t.showErrorMessage(e)}}}pr(Vh,"DEFAULT_ROUTE","list");const qh=zh;var Hh=Object.freeze({__proto__:null,COMPONENTS:ao,FIELDS:lo,UIForm:Qu,VARIANTS:co,createCRUDActionUIView:function({ACTION:t,TITLE:e,UIConstructor:i,dataProvider:r,goBack:n}){return class{static async run(s,o){try{if(s.setBreadcrumbs([{title:`Просмотр "${e}"`}]),await s.preloadVariants(t),s.ui[t])return;s.$destroyUI();let a={};r&&(a=Ir.isFunc(r)?Ir.isAsync(r)?await r(o):r(o):{...r});const l=s.getOptions(`${t}.transformer`,Oh);s.ui[t]=new i({target:s.getContainerInnerElement(),props:{params:o,...l(a)}}),s.emit(`after:render:${t}`),n&&Ir.isFunc(n)&&s.ui[t].on("reject",(function(){return n()}))}catch(t){s.report(t),s.showErrorMessage(t)}}}},ncCRUD:qh,notAPI:Hl,notApp:nc,notBase:jl,notBreadcrumbs:Ed,notCRUD:zh,notCRUDRouter:Ih,notCRUDRouterPlain:Vh,notCRUDRouterSwitch:class{static get routesVariants(){return{}}static isRouteVariantValid(t){return""!==t&&Ir.objHas(this.routesVariants,t)}static async determineRoute(t,e=[]){return""}static async route(t,e){try{const i=await this.determineRoute(t,e);if(!this.isRouteVariantValid(i))throw new Error(`No such action: ${i} in contoller ${t.getWorking("name")}`);{t.setCurrentAction(i);const r=this.routesVariants[i];Ir.isAsync(r.run)?await r.run(t,e):r.run(t,e)}}catch(e){t.report(e),t.showErrorMessage(e)}}},notCommon:Ir,notController:ac,notForm:ld,notFormHelpers:$u,notFormRules:Zu,notFormSet:class extends jl{constructor({options:t={},formComponent:e=Qu,formSetComponent:i=vd}){super({options:{name:md,mode:"default",showModes:!0,...t}}),fr(this,wd),hr(this,bd,null),hr(this,yd,null),hr(this,$d,null),hr(this,Od,null),gr(yd,this,Qu),gr(bd,this,vd),this.setFormMode(this.getOptions("mode")),this.initUI()}initUI(){var t=this;const e=this.getFrameTargetEl();for(;e.children.length;)e.removeChild(e.firstChild);gr(Od,this,new(dr(bd,this))({target:e,props:cr(wd,this,kd).call(this)})),dr(Od,this).$on("mode",(function(e){t.setFormMode(e.detail),t.updateForm()})),this.updateForm()}setFormMode(t){this.isModeExists(t)?this.setWorking("mode",t):(this.setWorking("mode",this.getFirstMode()),this.updateFormModeInUI())}updateFormModeInUI(){dr(Od,this)&&null!==this.getWorking("mode")&&dr(Od,this).$set({mode:this.getWorking("mode")})}getFormMode(){return this.getWorking("mode")}updateForm(){this.destroyForm(),null!==this.getWorking("mode")&&this.renderForm()}renderForm(){var t=this;const e=this.getFormTargetEl(),i=this.getFormConfig();if(!(e instanceof HTMLElement&&i))throw new Error("error while form rendering");const r=function(e){t.setFormMode(e),t.updateForm()};if(i.form){for(;e.children.length;)e.removeChild(e.firstChild);gr($d,this,new i.form({options:{target:e,changeMode:r}}))}else i.props&&gr($d,this,new(dr(yd,this))({target:e,...i.props,changeMode:r}))}getFormConfig(){var t=this;return this.getOptions("forms").find((function(e){return e.mode===t.getFormMode()}))}destroyForm(){const t=this.getFormTargetEl();if(t)for(;t.firstChild;)t.removeChild(t.lastChild);dr($d,this)&&dr($d,this).$destroy&&dr($d,this).$destroy(),gr($d,this,null)}destroyFrame(){dr(Od,this)&&dr(Od,this).$destroy&&dr(Od,this).$destroy(),gr(Od,this,null)}isModeExists(t){return this.getOptions("forms",[]).some((function(e){return e.mode===t}))}getFirstMode(){const t=this.getOptions("forms",[]);return t.length>0?t[0].mode:null}destroy(){gr(bd,this,null),gr(yd,this,null),this.destroyForm(),this.destroyFrame(),thi.setData(null),thi.setOptions(null),thi.setWorking(null)}getFrameTargetEl(){const t=this.getOptions("target",".form-set");if(t instanceof HTMLElement)return t;if("string"==typeof t)return document.querySelector(t);throw new Error("form set target is not HTMLElement or string")}getFormTargetEl(){const t=this.getOptions("name",md);return document.querySelector(`#${t}-form-set-container`)}},notFormUtils:Xc,notInterface:ec,notPath:br,notRecord:ic,notRouter:zl,notServiceModelSearch:class{constructor(t,e){this.modelName=e,this.app=t}destroy(){delete this.app}getSearchRouteName(){return"listAndCount"}getDataLoadRouteName(){return"get"}transformSearchResult(t){var e=this;return t.list=t.list.map((function(t){return{_id:t._id,id:t[`${e.modelName}ID`],title:t.name||t.title||t.label||t.username}})),t}transformSelectedResult(t){return{_id:t._id,[`${this.modelName}ID`]:t.id,title:t.title}}async searchByTerm(t){try{if(t.value.length>2){const e=this.app.getModel(this.modelName);e.setSearch(t.value);const i=await e[`$${this.getSearchRouteName()}`]();return"ok"===i.status?this.transformSearchResult(i.result):{list:[],count:0,page:0,pages:0,skip:0}}return{list:[],count:0,page:0,pages:0,skip:0}}catch(t){return{list:[],count:0,page:0,pages:0,skip:0}}}openSelector(){var t=this;return new Promise((function(e,i){try{const r=Re(Al,{target:document.body,props:{}});r.$on("termChange",(async function({detail:e}){const i=await t.searchByTerm(e);r.$set({results:i})})),r.$on("next",(function(){console.log("next selector results")})),r.$on("prev",(function(){console.log("prev selector results")})),r.$on("reject",(function(){Pe(r),i()})),r.$on("resolve",(function({detail:i}){Pe(r),e(t.transformSelectedResult(i))}))}catch(e){t.app.error(e),i(e)}}))}async loadData(t){try{if(t&&t.length>10){const e=this.app.getModel(this.modelName,{_id:t}),i=await e[`$${this.getDataLoadRouteName()}`]();return"ok"===i.status?i.result:null}return null}catch(t){return this.app.error(t),null}}},notSideMenu:Zd,notStores:Jl,notTable:qc,notTopMenu:$h});const Kh={LOCALE:Xi,say:Sr,notLocale:Ar},Gh=Kr,{notCommon:Jh,COMPONENTS:Yh,FIELDS:Qh,VARIANTS:Xh,notFormUtils:Zh}=Hh;return Object.keys(Ml).forEach((function(t){Object.keys(Ml[t]).forEach((function(e){Xc.addComponent(e,Ml[t][e])}))})),t.COMPONENTS=Yh,t.Elements=Ml,t.FIELDS=Qh,t.Frame=Hh,t.LOCALE=Xi,t.Locale=Kh,t.UICommon=Gh,t.VARIANTS=Xh,t.notCommon=Jh,t.notFormUtils=Zh,t.notLocale=Ar,t.say=Sr,t}({},require$$1);
