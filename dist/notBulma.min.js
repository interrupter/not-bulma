var notBulma=function(e){"use strict";var t=Array.isArray,n=Array.from,i=Object.defineProperty,r=Object.getOwnPropertyDescriptor,o=Object.getOwnPropertyDescriptors,s=Object.prototype,a=Array.prototype,l=Object.getPrototypeOf;function u(e){return"function"==typeof e}const c=()=>{};function d(e){return e()}function f(e){for(var t=0;t<e.length;t++)e[t]()}const h=32,v=256,g=512,p=1024,m=2048,y=4096,b=8192,k=16384,$=65536,w=1<<18,O=1<<20,I=Symbol("$state"),_=Symbol("$state metadata"),A=Symbol("legacy props"),C=Symbol("");function S(e){return e===this.v}function E(e,t){return e!=e?t==t:e!==t||null!==e&&"object"==typeof e||"function"==typeof e}function L(e){return!E(e,this.v)}function T(){{const e=new Error("bind_invalid_checkbox_value\nUsing `bind:value` together with a checkbox input is not allowed. Use `bind:checked` instead\nhttps://svelte.dev/e/bind_invalid_checkbox_value");throw e.name="Svelte error",e}}function x(e){{const t=new Error(`lifecycle_legacy_only\n\`${e}(...)\` cannot be used in runes mode\nhttps://svelte.dev/e/lifecycle_legacy_only`);throw t.name="Svelte error",t}}let N=!1;const F="[!",U={},M=Symbol(),D=Symbol("filename");function P(e){console.warn(`%c[svelte] state_snapshot_uncloneable\n%c${e?`The following properties cannot be cloned with \`$state.snapshot\` — the return value contains the originals:\n\n${e}`:"Value cannot be cloned with `$state.snapshot` — the original value was returned"}\nhttps://svelte.dev/e/state_snapshot_uncloneable`,"font-weight: bold","font-weight: normal")}const R=[];function j(e,t=!1){if(!t){const t=[],n=W(e,new Map,"",t);if(1===t.length&&""===t[0])P();else if(t.length>0){const e=t.length>10?t.slice(0,7):t.slice(0,10),n=t.length-e.length;let i=e.map((e=>`- <value>${e}`)).join("\n");n>0&&(i+=`\n- ...and ${n} more`),P(i)}return n}return W(e,new Map,"",R)}function W(e,n,i,r,o=null){if("object"==typeof e&&null!==e){var a=n.get(e);if(void 0!==a)return a;if(e instanceof Map)return new Map(e);if(e instanceof Set)return new Set(e);if(t(e)){var u=Array(e.length);n.set(e,u),null!==o&&n.set(o,u);for(var c=0;c<e.length;c+=1){var d=e[c];c in e&&(u[c]=W(d,n,`${i}[${c}]`,r))}return u}if(l(e)===s){for(var f in u={},n.set(e,u),null!==o&&n.set(o,u),e)u[f]=W(e[f],n,`${i}.${f}`,r);return u}if(e instanceof Date)return structuredClone(e);if("function"==typeof e.toJSON)return W(e.toJSON(),n,`${i}.toJSON()`,r,e)}if(e instanceof EventTarget)return e;try{return structuredClone(e)}catch(t){return r.push(i),e}}function z(e){let t=Error();const n=t.stack;if(n){const r=n.split("\n"),o=["\n"];for(let e=0;e<r.length;e++){const t=r[e];if("Error"!==t){if(t.includes("validate_each_keys"))return null;t.includes("svelte/src/internal")||o.push(t)}}if(1===o.length)return null;i(t,"stack",{value:o.join("\n")}),i(t,"name",{value:`${e}Error`})}return t}let B=new Set;function V(e){B=e}function q(e,t){var n={f:0,v:e,reactions:null,equals:S,version:0};return n.created=t??z("CreatedAt"),n.debug=null,n}function H(e){return J(q(e))}function G(e,t=!1){const n=q(e);return t||(n.equals=L),N&&null!==Bt&&null!==Bt.l&&(Bt.l.s??=[]).push(n),n}function K(e,t=!1){return J(G(e,t))}function J(e){return null!==Nt&&2&Nt.f&&(null===Dt?Dt=[e]:Dt.push(e)),e}function Y(e,t){return Q(e,dn((()=>cn(e)))),t}function Q(e,t){return null!==Nt&&Ht()&&18&Nt.f&&(null===Dt||!Dt.includes(e))&&function(){{const e=new Error("state_unsafe_mutation\nUpdating state inside a derived or a template expression is forbidden. If the value should not be reactive, declare it without `$state`\nhttps://svelte.dev/e/state_unsafe_mutation");throw e.name="Svelte error",e}}(),X(e,t)}function X(e,t){if(!e.equals(t)&&(e.v=t,e.version=qt(),e.updated=z("UpdatedAt"),Z(e,m),Ht()&&null!==Ut&&Ut.f&p&&!(Ut.f&h)&&(null!==Pt&&Pt.includes(e)?(hn(Ut,m),an(Ut)):null===jt?function(e){jt=e}([e]):jt.push(e)),B.size>0)){const e=Array.from(B);var n=At;St(!0);try{for(const t of e)t.f&p&&hn(t,y),Gt(t)&&en(t)}finally{St(n)}B.clear()}return t}function Z(e,t){var n=e.reactions;if(null!==n)for(var i=Ht(),r=n.length,o=0;o<r;o++){var s=n[o],a=s.f;a&m||(i||s!==Ut)&&(a&w?B.add(s):(hn(s,t),1280&a&&(2&a?Z(s,y):an(s))))}}var ee="font-weight: bold",te="font-weight: normal";function ne(e){console.warn("%c[svelte] hydration_mismatch\n%cHydration failed because the initial UI does not match what was rendered on the server\nhttps://svelte.dev/e/hydration_mismatch",ee,te)}function ie(e,t){console.warn(`%c[svelte] ownership_invalid_mutation\n%c${e?`${e} mutated a value owned by ${t}. This is strongly discouraged. Consider passing values to child components with \`bind:\`, or use a callback instead`:"Mutating a value outside the component that created it is strongly discouraged. Consider passing values to child components with `bind:`, or use a callback instead"}\nhttps://svelte.dev/e/ownership_invalid_mutation`,ee,te)}function re(e){console.warn(`%c[svelte] state_proxy_equality_mismatch\n%cReactive \`$state(...)\` proxies and the values they proxy have different identities. Because of this, comparisons with \`${e}\` will produce unexpected results\nhttps://svelte.dev/e/state_proxy_equality_mismatch`,ee,te)}let oe,se=!1;function ae(e){se=e}function le(e){if(null===e)throw ne(),U;return oe=e}function ue(){return le(xe(oe))}function ce(e){if(se){if(null!==xe(oe))throw ne(),U;oe=e}}function de(e=1){if(se){for(var t=e,n=oe;t--;)n=xe(n);oe=n}}function fe(){for(var e=0,t=oe;;){if(8===t.nodeType){var n=t.data;if("]"===n){if(0===e)return t;e-=1}else"["!==n&&n!==F||(e+=1)}var i=xe(t);t.remove(),t=i}}const he={},ve=/at (?:.+ \()?(.+):(\d+):(\d+)\)?$/,ge=/@(.+):(\d+):(\d+)$/;function pe(){const e=function(){const e=(new Error).stack;if(!e)return null;const t=[];for(const n of e.split("\n")){let e=ve.exec(n)??ge.exec(n);e&&t.push({file:e[1],line:+e[2],column:+e[3]})}return t}()?.slice(4);if(!e)return null;for(let t=0;t<e.length;t++){const n=e[t],i=he[n.file];if(i)for(const e of i){if(null==e.end)return null;if(e.start.line<n.line&&e.end.line>n.line)return e.component}else if(0===t)return null}return null}const me=Symbol("ADD_OWNER");function ye(e,t,n=!1,i=!1){if(e&&!n){const n=Vt,r=e[_];if(r&&!$e(r,n)){let e=we(r);t[D]===n[D]||i||function(e,t,n){console.warn(`%c[svelte] ownership_invalid_binding\n%c${e} passed a value to ${t} with \`bind:\`, but the value is owned by ${n}. Consider creating a binding between ${n} and ${e}\nhttps://svelte.dev/e/ownership_invalid_binding`,ee,te)}(n[D],t[D],e[D])}}ke(e,t,new Set)}function be(e,t){if(null!==t.owners)for(;e;){if(null===e.owners){t.owners=null;break}for(const n of e.owners)t.owners.add(n);e=e.parent}}function ke(e,t,n){const i=e?.[_];if(i)"owners"in i&&null!=i.owners&&i.owners.add(t);else if(e&&"object"==typeof e){if(n.has(e))return;if(n.add(e),me in e&&e[me])Qe((()=>{e[me](t)}));else{var r=l(e);if(r===Object.prototype)for(const i in e)ke(e[i],t,n);else if(r===Array.prototype)for(let i=0;i<e.length;i+=1)ke(e[i],t,n)}}}function $e(e,t){return null===e.owners||(e.owners.has(t)||null!==e.parent&&$e(e.parent,t))}function we(e){return e?.owners?.values().next().value??we(e.parent)}function Oe(e,n=null,i){var o;if(o=z("CreatedAt"),"object"!=typeof e||null===e||I in e)return e;const u=l(e);if(u!==s&&u!==a)return e;var c,d=new Map,f=t(e),h=q(0);return f&&d.set("length",q(e.length,o)),(c={parent:n,owners:null}).owners=null===n?null!==Bt?new Set([Bt.function]):null:new Set,new Proxy(e,{defineProperty(e,t,n){"value"in n&&!1!==n.configurable&&!1!==n.enumerable&&!1!==n.writable||function(){{const e=new Error("state_descriptors_fixed\nProperty descriptors defined on `$state` objects must contain `value` and always be `enumerable`, `configurable` and `writable`.\nhttps://svelte.dev/e/state_descriptors_fixed");throw e.name="Svelte error",e}}();var i=d.get(t);return void 0===i?(i=q(n.value,o),d.set(t,i)):Q(i,Oe(n.value,c)),!0},deleteProperty(e,t){var n=d.get(t);if(void 0===n)t in e&&d.set(t,q(M,o));else{if(f&&"string"==typeof t){var i=d.get("length"),r=Number(t);Number.isInteger(r)&&r<i.v&&Q(i,r)}Q(n,M),Ie(h)}return!0},get(t,n,i){if(n===_)return c;if(n===I)return e;var s=d.get(n),a=n in t;if(void 0!==s||a&&!r(t,n)?.writable||(s=q(Oe(a?t[n]:M,c),o),d.set(n,s)),void 0!==s){var l=cn(s),u=l?.[_];return u&&u?.parent!==c&&be(c,u),l===M?void 0:l}return Reflect.get(t,n,i)},getOwnPropertyDescriptor(e,t){var n=Reflect.getOwnPropertyDescriptor(e,t);if(n&&"value"in n){var i=d.get(t);i&&(n.value=cn(i))}else if(void 0===n){var r=d.get(t),o=r?.v;if(void 0!==r&&o!==M)return{enumerable:!0,configurable:!0,value:o,writable:!0}}return n},has(e,t){if(t===_)return!0;if(t===I)return!0;var n=d.get(t),i=void 0!==n&&n.v!==M||Reflect.has(e,t);if((void 0!==n||null!==Ut&&(!i||r(e,t)?.writable))&&(void 0===n&&(n=q(i?Oe(e[t],c):M,o),d.set(t,n)),cn(n)===M))return!1;return i},set(e,t,n,i){var s=d.get(t),a=t in e;if(f&&"length"===t)for(var l=n;l<s.v;l+=1){var u=d.get(l+"");void 0!==u?Q(u,M):l in e&&(u=q(M,o),d.set(l+"",u))}void 0===s?a&&!r(e,t)?.writable||(Q(s=q(void 0,o),Oe(n,c)),d.set(t,s)):(a=s.v!==M,Q(s,Oe(n,c)));var v=n?.[_];v&&v?.parent!==c&&be(c,v),function(e){const t=pe();if(t&&!$e(e,t)){let n=we(e);n[D]!==t[D]?ie(t[D],n[D]):ie()}}(c);var g=Reflect.getOwnPropertyDescriptor(e,t);if(g?.set&&g.set.call(i,n),!a){if(f&&"string"==typeof t){var p=d.get("length"),m=Number(t);Number.isInteger(m)&&m>=p.v&&Q(p,m+1)}Ie(h)}return!0},ownKeys(e){cn(h);var t=Reflect.ownKeys(e).filter((e=>{var t=d.get(e);return void 0===t||t.v!==M}));for(var[n,i]of d)i.v===M||n in e||t.push(n);return t},setPrototypeOf(){!function(){{const e=new Error("state_prototype_fixed\nCannot set prototype of `$state` object\nhttps://svelte.dev/e/state_prototype_fixed");throw e.name="Svelte error",e}}()}})}function Ie(e,t=1){Q(e,e.v+t)}function _e(e){return null!==e&&"object"==typeof e&&I in e?e[I]:e}var Ae,Ce,Se;function Ee(){if(void 0===Ae){Ae=window;var e=Element.prototype,t=Node.prototype;Ce=r(t,"firstChild").get,Se=r(t,"nextSibling").get,e.__click=void 0,e.__className="",e.__attributes=null,e.__styles=null,e.__e=void 0,Text.prototype.__t=void 0,e.__svelte_meta=null,function(){const e=Array.prototype,t=Array.__svelte_cleanup;t&&t();const{indexOf:n,lastIndexOf:i,includes:r}=e;e.indexOf=function(e,t){const i=n.call(this,e,t);return-1===i&&-1!==n.call(_e(this),_e(e),t)&&re("array.indexOf(...)"),i},e.lastIndexOf=function(e,t){const n=i.call(this,e,t??this.length-1);return-1===n&&-1!==i.call(_e(this),_e(e),t??this.length-1)&&re("array.lastIndexOf(...)"),n},e.includes=function(e,t){const n=r.call(this,e,t);return n||r.call(_e(this),_e(e),t)&&re("array.includes(...)"),n},Array.__svelte_cleanup=()=>{e.indexOf=n,e.lastIndexOf=i,e.includes=r}}()}}function Le(e=""){return document.createTextNode(e)}function Te(e){return Ce.call(e)}function xe(e){return Se.call(e)}function Ne(e,t){if(!se)return Te(e);var n=Te(oe);if(null===n)n=oe.appendChild(Le());else if(t&&3!==n.nodeType){var i=Le();return n?.before(i),le(i),i}return le(n),n}function Fe(e,t){if(!se){var n=Te(e);return n instanceof Comment&&""===n.data?xe(n):n}if(t&&3!==oe?.nodeType){var i=Le();return oe?.before(i),le(i),i}return oe}function Ue(e,t=1,n=!1){let i=se?oe:e;for(var r;t--;)r=i,i=xe(i);if(!se)return i;var o=i?.nodeType;if(n&&3!==o){var s=Le();return null===i?r?.after(s):i.before(s),le(s),s}return le(i),i}function Me(e){e.textContent=""}function De(e){var t=2050;null===Ut?t|=v:Ut.f|=O;var n=null!==Nt&&2&Nt.f?Nt:null;const i={children:null,ctx:Bt,deps:null,equals:S,f:t,fn:e,reactions:null,v:null,version:0,parent:n??Ut};return i.created=z("CreatedAt"),null!==n&&(n.children??=[]).push(i),i}function Pe(e){const t=De(e);return t.equals=L,t}function Re(e){var t=e.children;if(null!==t){e.children=null;for(var n=0;n<t.length;n+=1){var i=t[n];2&i.f?Be(i):rt(i)}}}let je=[];function We(e){var t,n=Ut;Mt(function(e){for(var t=e.parent;null!==t;){if(!(2&t.f))return t;t=t.parent}return null}(e));{let i=B;V(new Set);try{je.includes(e)&&function(){{const e=new Error("derived_references_self\nA derived value cannot reference itself recursively\nhttps://svelte.dev/e/derived_references_self");throw e.name="Svelte error",e}}(),je.push(e),Re(e),t=Qt(e)}finally{Mt(n),V(i),je.pop()}}return t}function ze(e){var t=We(e);hn(e,(zt||e.f&v)&&null!==e.deps?y:p),e.equals(t)||(e.v=t,e.version=qt())}function Be(e){Re(e),Zt(e,0),hn(e,k),e.v=e.children=e.deps=e.ctx=e.reactions=null}function Ve(e){null===Ut&&null===Nt&&function(e){{const t=new Error(`effect_orphan\n\`${e}\` can only be used inside an effect (e.g. during component initialisation)\nhttps://svelte.dev/e/effect_orphan`);throw t.name="Svelte error",t}}(e),null!==Nt&&Nt.f&v&&function(){{const e=new Error("effect_in_unowned_derived\nEffect cannot be created inside a `$derived` value that was not itself created inside an effect\nhttps://svelte.dev/e/effect_in_unowned_derived");throw e.name="Svelte error",e}}(),Ct&&function(e){{const t=new Error(`effect_in_teardown\n\`${e}\` cannot be used inside an effect cleanup function\nhttps://svelte.dev/e/effect_in_teardown`);throw t.name="Svelte error",t}}(e)}function qe(e,t,n,i=!0){for(var r=!!(64&e),o=Ut;null!==o&&o.f&w;)o=o.parent;var s={ctx:Bt,deps:null,deriveds:null,nodes_start:null,nodes_end:null,f:e|m,first:null,fn:t,last:null,next:null,parent:r?null:o,prev:null,teardown:null,transitions:null,version:0};if(s.component_function=Vt,n){var a=At;try{St(!0),en(s),s.f|=32768}catch(e){throw rt(s),e}finally{St(a)}}else null!==t&&an(s);if(!(n&&null===s.deps&&null===s.first&&null===s.nodes_start&&null===s.teardown&&!(s.f&O))&&!r&&i&&(null!==o&&function(e,t){var n=t.last;null===n?t.last=t.first=e:(n.next=e,e.prev=n,t.last=e)}(s,o),null!==Nt&&2&Nt.f)){var l=Nt;(l.children??=[]).push(s)}return s}function He(e){const t=qe(8,null,!1);return hn(t,p),t.teardown=e,t}function Ge(e){Ve("$effect");var t=null!==Ut&&!!(Ut.f&h)&&null!==Bt&&!Bt.m;if(i(e,"name",{value:"$effect"}),!t)return Je(e);var n=Bt;(n.e??=[]).push({fn:e,effect:Ut,reaction:Nt})}function Ke(e){return Ve("$effect.pre"),i(e,"name",{value:"$effect.pre"}),Qe(e)}function Je(e){return qe(4,e,!1)}function Ye(e,t){var n=Bt,i={effect:null,ran:!1};n.l.r1.push(i),i.effect=Qe((()=>{e(),i.ran||(i.ran=!0,Q(n.l.r2,!0),dn(t))}))}function Qe(e){return qe(8,e,!0)}function Xe(e){return i(e,"name",{value:"{expression}"}),Ze(e)}function Ze(e,t=0){return qe(24|t,e,!0)}function et(e,t=!0){return qe(40,e,!0,t)}function tt(e){var t=e.teardown;if(null!==t){const e=Ct,n=Nt;Et(!0),Ft(null);try{t.call(null)}finally{Et(e),Ft(n)}}}function nt(e){var t=e.deriveds;if(null!==t){e.deriveds=null;for(var n=0;n<t.length;n+=1)Be(t[n])}}function it(e,t=!1){var n=e.first;for(e.first=e.last=null;null!==n;){var i=n.next;rt(n,t),n=i}}function rt(e,t=!0){var n=!1;if((t||524288&e.f)&&null!==e.nodes_start){for(var i=e.nodes_start,r=e.nodes_end;null!==i;){var o=i===r?null:xe(i);i.remove(),i=o}n=!0}it(e,t&&!n),nt(e),Zt(e,0),hn(e,k);var s=e.transitions;if(null!==s)for(const e of s)e.stop();tt(e);var a=e.parent;null!==a&&null!==a.first&&ot(e),e.component_function=null,e.next=e.prev=e.teardown=e.ctx=e.deps=e.fn=e.nodes_start=e.nodes_end=null}function ot(e){var t=e.parent,n=e.prev,i=e.next;null!==n&&(n.next=i),null!==i&&(i.prev=n),null!==t&&(t.first===e&&(t.first=i),t.last===e&&(t.last=n))}function st(e,t){var n=[];lt(e,n,!0),at(n,(()=>{rt(e),t&&t()}))}function at(e,t){var n=e.length;if(n>0){var i=()=>--n||t();for(var r of e)r.out(i)}else t()}function lt(e,t,n){if(!(e.f&b)){if(e.f^=b,null!==e.transitions)for(const i of e.transitions)(i.is_global||n)&&t.push(i);for(var i=e.first;null!==i;){var r=i.next;lt(i,t,!!(!!(i.f&$)||!!(i.f&h))&&n),i=r}}}function ut(e){ct(e,!0)}function ct(e,t){if(e.f&b){Gt(e)&&en(e),e.f^=b;for(var n=e.first;null!==n;){var i=n.next;ct(n,!!(!!(n.f&$)||!!(n.f&h))&&t),n=i}if(null!==e.transitions)for(const n of e.transitions)(n.is_global||t)&&n.in()}}const dt="undefined"==typeof requestIdleCallback?e=>setTimeout(e,1):requestIdleCallback;let ft=!1,ht=!1,vt=[],gt=[];function pt(){ft=!1;const e=vt.slice();vt=[],f(e)}function mt(){ht=!1;const e=gt.slice();gt=[],f(e)}function yt(e){ft||(ft=!0,queueMicrotask(pt)),vt.push(e)}function bt(e){{const t=new Error(`lifecycle_outside_component\n\`${e}(...)\` can only be used during component initialisation\nhttps://svelte.dev/e/lifecycle_outside_component`);throw t.name="Svelte error",t}}const kt=0,$t=new WeakSet;let wt=!1,Ot=kt,It=!1,_t=null,At=!1,Ct=!1;function St(e){At=e}function Et(e){Ct=e}let Lt=[],Tt=0,xt=[],Nt=null;function Ft(e){Nt=e}let Ut=null;function Mt(e){Ut=e}let Dt=null;let Pt=null,Rt=0,jt=null;let Wt=0,zt=!1,Bt=null,Vt=null;function qt(){return++Wt}function Ht(){return!N||null!==Bt&&null===Bt.l}function Gt(e){var t=e.f;if(t&m)return!0;if(t&y){var n=e.deps,i=!!(t&v);if(null!==n){var r;if(t&g){for(r=0;r<n.length;r++)(n[r].reactions??=[]).push(e);e.f^=g}for(r=0;r<n.length;r++){var o=n[r];if(Gt(o)&&ze(o),!i||null===Ut||zt||o?.reactions?.includes(e)||(o.reactions??=[]).push(e),o.version>e.version)return!0}}i||hn(e,p)}return!1}function Kt(e,t){for(var n=t;null!==n;){if(128&n.f)try{return void n.fn(e)}catch{n.f^=128}n=n.parent}throw wt=!1,e}function Jt(e){return!(e.f&k||null!==e.parent&&128&e.parent.f)}function Yt(e,t,n,r){if(wt){if(null===n&&(wt=!1),Jt(t))throw e;return}if(null!==n&&(wt=!0),null===r||!(e instanceof Error)||$t.has(e))return void Kt(e,t);$t.add(e);const o=[],s=t.fn?.name;s&&o.push(s);let a=r;for(;null!==a;){var l=a.function?.[D];if(l){const e=l.split("/").pop();o.push(e)}a=a.p}const u=/Firefox/.test(navigator.userAgent)?"  ":"\t";i(e,"message",{value:e.message+`\n${o.map((e=>`\n${u}in ${e}`)).join("")}\n`}),i(e,"component_stack",{value:o});const c=e.stack;if(c){const t=c.split("\n"),n=[];for(let e=0;e<t.length;e++){const i=t[e];i.includes("svelte/src/internal")||n.push(i)}i(e,"stack",{value:n.join("\n")})}if(Kt(e,t),Jt(t))throw e}function Qt(e){var t=Pt,n=Rt,i=jt,r=Nt,o=zt,s=Dt,a=Bt,l=e.f;Pt=null,Rt=0,jt=null,Nt=96&l?null:e,zt=!At&&!!(l&v),Dt=null,Bt=e.ctx;try{var u=(0,e.fn)(),c=e.deps;if(null!==Pt){var d;if(Zt(e,Rt),null!==c&&Rt>0)for(c.length=Rt+Pt.length,d=0;d<Pt.length;d++)c[Rt+d]=Pt[d];else e.deps=c=Pt;if(!zt)for(d=Rt;d<c.length;d++)(c[d].reactions??=[]).push(e)}else null!==c&&Rt<c.length&&(Zt(e,Rt),c.length=Rt);return u}finally{Pt=t,Rt=n,jt=i,Nt=r,zt=o,Dt=s,Bt=a}}function Xt(e,t){let n=t.reactions;if(null!==n){var i=n.indexOf(e);if(-1!==i){var r=n.length-1;0===r?n=t.reactions=null:(n[i]=n[r],n.pop())}}null===n&&2&t.f&&(null===Pt||!Pt.includes(t))&&(hn(t,y),768&t.f||(t.f^=g),Zt(t,0))}function Zt(e,t){var n=e.deps;if(null!==n)for(var i=t;i<n.length;i++)Xt(e,n[i])}function en(e){var t=e.f;if(!(t&k)){hn(e,p);var n=Ut,i=Bt;Ut=e;var r=Vt;Vt=e.component_function;try{16&t?function(e){for(var t=e.first;null!==t;){var n=t.next;t.f&h||rt(t),t=n}}(e):it(e),nt(e),tt(e);var o=Qt(e);e.teardown="function"==typeof o?o:null,e.version=Wt,xt.push(e)}catch(t){Yt(t,e,n,i||e.ctx)}finally{Ut=n,Vt=r}}}function tn(){console.error("Last ten effects were: ",xt.slice(-10).map((e=>e.fn))),xt=[]}function nn(){if(Tt>1e3){Tt=0;try{!function(){{const e=new Error("effect_update_depth_exceeded\nMaximum update depth exceeded. This can happen when a reactive block or effect repeatedly sets a new value. Svelte limits the number of nested updates to prevent infinite loops\nhttps://svelte.dev/e/effect_update_depth_exceeded");throw e.name="Svelte error",e}}()}catch(e){if(i(e,"stack",{value:""}),null===_t)throw tn(),e;try{Yt(e,_t,null,null)}catch(e){throw tn(),e}}}Tt++}function rn(e){var t=e.length;if(0!==t){nn();var n=At;At=!0;try{for(var i=0;i<t;i++){var r=e[i];r.f&p||(r.f^=p);var o=[];ln(r,o),on(o)}}finally{At=n}}}function on(e){var t=e.length;if(0!==t)for(var n=0;n<t;n++){var i=e[n];if(!(24576&i.f))try{Gt(i)&&(en(i),null===i.deps&&null===i.first&&null===i.nodes_start&&(null===i.teardown?ot(i):i.fn=null))}catch(e){Yt(e,i,null,i.ctx)}}}function sn(){if(It=!1,Tt>1001)return;const e=Lt;Lt=[],rn(e),It||(Tt=0,_t=null,xt=[])}function an(e){Ot===kt&&(It||(It=!0,queueMicrotask(sn))),_t=e;for(var t=e;null!==t.parent;){var n=(t=t.parent).f;if(96&n){if(!(n&p))return;t.f^=p}}Lt.push(t)}function ln(e,t){var n=e.first,i=[];e:for(;null!==n;){var r=n.f,o=!!(r&h),s=o&&!!(r&p),a=n.next;if(!(s||r&b))if(8&r){if(o)n.f^=p;else try{Gt(n)&&en(n)}catch(e){Yt(e,n,null,n.ctx)}var l=n.first;if(null!==l){n=l;continue}}else 4&r&&i.push(n);if(null===a){let t=n.parent;for(;null!==t;){if(e===t)break e;var u=t.next;if(null!==u){n=u;continue e}t=t.parent}}n=a}for(var c=0;c<i.length;c++)l=i[c],t.push(l),ln(l,t)}function un(e){var t=Ot,n=Lt;try{nn();const t=[];Ot=1,Lt=t,It=!1,rn(n);var i=e?.();return ft&&pt(),ht&&mt(),(Lt.length>0||t.length>0)&&un(),Tt=0,_t=null,xt=[],i}finally{Ot=t,Lt=n}}function cn(e){var t=e.f,n=!!(2&t);if(n&&t&k){var i=We(e);return Be(e),i}if(null!==Nt){null!==Dt&&Dt.includes(e)&&function(){{const e=new Error("state_unsafe_local_read\nReading state that was created inside the same derived is forbidden. Consider using `untrack` to read locally created state\nhttps://svelte.dev/e/state_unsafe_local_read");throw e.name="Svelte error",e}}();var r=Nt.deps;null===Pt&&null!==r&&r[Rt]===e?Rt++:null===Pt?Pt=[e]:Pt.push(e),null!==jt&&null!==Ut&&Ut.f&p&&!(Ut.f&h)&&jt.includes(e)&&(hn(Ut,m),an(Ut))}else if(n&&null===e.deps)for(var o=e,s=o.parent,a=o;null!==s;){if(!(2&s.f)){var l=s;l.deriveds?.includes(a)||(l.deriveds??=[]).push(a);break}a=s,s=s.parent}return n&&Gt(o=e)&&ze(o),e.v}function dn(e){const t=Nt;try{return Nt=null,e()}finally{Nt=t}}const fn=-7169;function hn(e,t){e.f=e.f&fn|t}function vn(e){return null===Bt&&bt(e),Bt.c??=new Map(function(e){let t=e.p;for(;null!==t;){const e=t.c;if(null!==e)return e;t=t.p}return null}(Bt)||void 0)}function gn(e,t=1){var n=cn(e),i=1===t?n++:n--;return Q(e,n),i}function pn(e,t=!1,n){Bt={p:Bt,c:null,e:null,m:!1,s:e,x:null,l:null},N&&!t&&(Bt.l={s:null,u:null,r1:[],r2:q(!1)}),Bt.function=n,Vt=n}function mn(e){const t=Bt;if(null!==t){void 0!==e&&(t.x=e);const s=t.e;if(null!==s){var n=Ut,i=Nt;t.e=null;try{for(var r=0;r<s.length;r++){var o=s[r];Mt(o.effect),Ft(o.reaction),Je(o.fn)}}finally{Mt(n),Ft(i)}}Bt=t.p,Vt=t.p?.function??null,t.m=!0}return e||{}}function yn(e){if("object"==typeof e&&e&&!(e instanceof EventTarget))if(I in e)bn(e);else if(!Array.isArray(e))for(let t in e){const n=e[t];"object"==typeof n&&n&&I in n&&bn(n)}}function bn(e,t=new Set){if(!("object"!=typeof e||null===e||e instanceof EventTarget||t.has(e))){t.add(e),e instanceof Date&&e.getTime();for(let n in e)try{bn(e[n],t)}catch(e){}const n=l(e);if(n!==Object.prototype&&n!==Array.prototype&&n!==Map.prototype&&n!==Set.prototype&&n!==Date.prototype){const t=o(n);for(let n in t){const i=t[n].get;if(i)try{i.call(e)}catch(e){}}}}}{function wh(e){if(!(e in globalThis)){let t;Object.defineProperty(globalThis,e,{configurable:!0,get:()=>{if(void 0!==t)return t;!function(e){{const t=new Error(`rune_outside_svelte\nThe \`${e}\` rune is only available inside \`.svelte\` and \`.svelte.js/ts\` files\nhttps://svelte.dev/e/rune_outside_svelte`);throw t.name="Svelte error",t}}(e)},set:e=>{t=e}})}}wh("$state"),wh("$effect"),wh("$derived"),wh("$inspect"),wh("$props"),wh("$bindable")}const kn=/\r/g;function $n(e){return e.endsWith("capture")&&"gotpointercapture"!==e&&"lostpointercapture"!==e}const wn=["beforeinput","click","change","dblclick","contextmenu","focusin","focusout","input","keydown","keyup","mousedown","mousemove","mouseout","mouseover","mouseup","pointerdown","pointermove","pointerout","pointerover","pointerup","touchend","touchmove","touchstart"];function On(e){return wn.includes(e)}const In={formnovalidate:"formNoValidate",ismap:"isMap",nomodule:"noModule",playsinline:"playsInline",readonly:"readOnly",defaultvalue:"defaultValue",defaultchecked:"defaultChecked",srcobject:"srcObject"};function _n(e){return e=e.toLowerCase(),In[e]??e}const An=["touchstart","touchmove"];const Cn=["textarea","script","style","title"];function Sn(e,t){if(t){const t=document.body;e.autofocus=!0,yt((()=>{document.activeElement===t&&e.focus()}))}}let En=!1;function Ln(){En||(En=!0,document.addEventListener("reset",(e=>{Promise.resolve().then((()=>{if(!e.defaultPrevented)for(const t of e.target.elements)t.__on_r?.()}))}),{capture:!0}))}function Tn(e){var t=Nt,n=Ut;Ft(null),Mt(null);try{return e()}finally{Ft(t),Mt(n)}}function xn(e,t,n,i=n){e.addEventListener(t,(()=>Tn(n)));const r=e.__on_r;e.__on_r=r?()=>{r(),i(!0)}:()=>i(!0),Ln()}const Nn=new Set,Fn=new Set;function Un(e,t,n,i){function r(e){if(i.capture||Pn.call(t,e),!e.cancelBubble)return Tn((()=>n.call(this,e)))}return e.startsWith("pointer")||e.startsWith("touch")||"wheel"===e?yt((()=>{t.addEventListener(e,r,i)})):t.addEventListener(e,r,i),r}function Mn(e,t,n,i,r){var o={capture:i,passive:r},s=Un(e,t,n,o);t!==document.body&&t!==window&&t!==document||He((()=>{t.removeEventListener(e,s,o)}))}function Dn(e){for(var t=0;t<e.length;t++)Nn.add(e[t]);for(var n of Fn)n(e)}function Pn(e){var n=this,r=n.ownerDocument,o=e.type,s=e.composedPath?.()||[],a=s[0]||e.target,l=0,u=e.__root;if(u){var c=s.indexOf(u);if(-1!==c&&(n===document||n===window))return void(e.__root=n);var d=s.indexOf(n);if(-1===d)return;c<=d&&(l=c)}if((a=s[l]||e.target)!==n){i(e,"currentTarget",{configurable:!0,get:()=>a||r});var f=Nt,h=Ut;Ft(null),Mt(null);try{for(var v,g=[];null!==a;){var p=a.assignedSlot||a.parentNode||a.host||null;try{var m=a["__"+o];if(void 0!==m&&!a.disabled)if(t(m)){var[y,...b]=m;y.apply(a,[e,...b])}else m.call(a,e)}catch(e){v?g.push(e):v=e}if(e.cancelBubble||p===n||null===p)break;a=p}if(v){for(let e of g)queueMicrotask((()=>{throw e}));throw v}}finally{e.__root=n,delete e.currentTarget,Ft(f),Mt(h)}}}function Rn(e){var t=document.createElement("template");return t.innerHTML=e,t.content}function jn(e,t){var n=Ut;null===n.nodes_start&&(n.nodes_start=e,n.nodes_end=t)}function Wn(e,t){var n,i=!!(1&t),r=!!(2&t),o=!e.startsWith("<!>");return()=>{if(se)return jn(oe,null),oe;void 0===n&&(n=Rn(o?e:"<!>"+e),i||(n=Te(n)));var t=r?document.importNode(n,!0):n.cloneNode(!0);i?jn(Te(t),t.lastChild):jn(t,t);return t}}function zn(e=""){if(!se){var t=Le(e+"");return jn(t,t),t}var n=oe;return 3!==n.nodeType&&(n.before(n=Le()),le(n)),jn(n,n),n}function Bn(){if(se)return jn(oe,null),oe;var e=document.createDocumentFragment(),t=document.createComment(""),n=Le();return e.append(t,n),jn(t,n),e}function Vn(e,t){if(se)return Ut.nodes_end=oe,void ue();null!==e&&e.before(t)}let qn=!0;function Hn(e){qn=e}function Gn(e,t){var n=null==t?"":"object"==typeof t?t+"":t;n!==(e.__t??=e.nodeValue)&&(e.__t=n,e.nodeValue=null==n?"":n+"")}function Kn(e,t){return Yn(e,t)}const Jn=new Map;function Yn(e,{target:t,anchor:i,props:r={},events:o,context:s,intro:a=!0}){Ee();var l=new Set,u=e=>{for(var n=0;n<e.length;n++){var i=e[n];if(!l.has(i)){l.add(i);var r=(s=i,An.includes(s));t.addEventListener(i,Pn,{passive:r});var o=Jn.get(i);void 0===o?(document.addEventListener(i,Pn,{passive:r}),Jn.set(i,1)):Jn.set(i,o+1)}}var s};u(n(Nn)),Fn.add(u);var c=void 0,d=function(e){const t=qe(64,e,!0);return(e={})=>new Promise((n=>{e.outro?st(t,(()=>{rt(t),n(void 0)})):(rt(t),n(void 0))}))}((()=>{var n=i??t.appendChild(Le());return et((()=>{s&&(pn({}),Bt.c=s);o&&(r.$$events=o),se&&jn(n,null),qn=a,c=e(n,r)||{},qn=!0,se&&(Ut.nodes_end=oe),s&&mn()})),()=>{for(var e of l){t.removeEventListener(e,Pn);var r=Jn.get(e);0==--r?(document.removeEventListener(e,Pn),Jn.delete(e)):Jn.set(e,r)}Fn.delete(u),n!==i&&n.parentNode?.removeChild(n)}}));return Qn.set(c,d),c}let Qn=new WeakMap;function Xn(e,t){const n=Qn.get(e);return n?(Qn.delete(e),n(t)):(console.warn("%c[svelte] lifecycle_double_unmount\n%cTried to unmount a component that was not mounted\nhttps://svelte.dev/e/lifecycle_double_unmount",ee,te),Promise.resolve())}function Zn(e,t,n=!1){se&&ue();var i=e,r=null,o=null,s=M,a=!1;const l=(e,t=!0)=>{a=!0,u(t,e)},u=(e,t)=>{if(s===(s=e))return;let n=!1;if(se){const e=i.data===F;!!s===e&&(le(i=fe()),ae(!1),n=!0)}s?(r?ut(r):t&&(r=et((()=>t(i)))),o&&st(o,(()=>{o=null}))):(o?ut(o):t&&(o=et((()=>t(i)))),r&&st(r,(()=>{r=null}))),n&&ae(!0)};Ze((()=>{a=!1,t(l),a||u(null,null)}),n?$:0),se&&(i=oe)}let ei=null;function ti(e){ei=e}function ni(e,t){return t}function ii(e,i,r,o,s,a=null){var l=e,u={flags:i,items:new Map,first:null};if(!!(4&i)){var c=e;l=se?le(Te(c)):c.appendChild(Le())}se&&ue();var d=null,f=!1;Ze((()=>{var e=r(),c=t(e)?e:null==e?[]:n(e),h=c.length;if(f&&0===h)return;f=0===h;let v=!1;se&&(l.data===F!==(0===h)&&(le(l=fe()),ae(!1),v=!0));if(se){for(var g,p=null,m=0;m<h;m++){if(8===oe.nodeType&&"]"===oe.data){l=oe,v=!0,ae(!1);break}var y=c[m],k=o(y,m);g=oi(oe,u,p,null,y,k,m,s,i,r),u.items.set(k,g),p=g}h>0&&le(fe())}se||function(e,t,i,r,o,s,a,l){var u,c,d,f,h,v,g=!!(8&o),p=!!(3&o),m=e.length,y=t.items,k=t.first,$=k,w=null,O=[],I=[];if(g)for(v=0;v<m;v+=1)f=a(d=e[v],v),void 0!==(h=y.get(f))&&(h.a?.measure(),(c??=new Set).add(h));for(v=0;v<m;v+=1)if(f=a(d=e[v],v),void 0!==(h=y.get(f))){if(p&&ri(h,d,v,o),h.e.f&b&&(ut(h.e),g&&(h.a?.unfix(),(c??=new Set).delete(h))),h!==$){if(void 0!==u&&u.has(h)){if(O.length<I.length){var _,A=I[0];w=A.prev;var C=O[0],S=O[O.length-1];for(_=0;_<O.length;_+=1)si(O[_],A,i);for(_=0;_<I.length;_+=1)u.delete(I[_]);ai(t,C.prev,S.next),ai(t,w,C),ai(t,S,A),$=A,w=S,v-=1,O=[],I=[]}else u.delete(h),si(h,$,i),ai(t,h.prev,h.next),ai(t,h,null===w?t.first:w.next),ai(t,w,h),w=h;continue}for(O=[],I=[];null!==$&&$.k!==f;)!s&&$.e.f&b||(u??=new Set).add($),I.push($),$=$.next;if(null===$)continue;h=$}O.push(h),w=h,$=h.next}else{w=oi($?$.e.nodes_start:i,t,w,null===w?t.first:w.next,d,f,v,r,o,l),y.set(f,w),O=[],I=[],$=w.next}if(null!==$||void 0!==u){for(var E=void 0===u?[]:n(u);null!==$;)!s&&$.e.f&b||E.push($),$=$.next;var L=E.length;if(L>0){var T=4&o&&0===m?i:null;if(g){for(v=0;v<L;v+=1)E[v].a?.measure();for(v=0;v<L;v+=1)E[v].a?.fix()}!function(e,t,n,i){for(var r=[],o=t.length,s=0;s<o;s++)lt(t[s].e,r,!0);var a=o>0&&0===r.length&&null!==n;if(a){var l=n.parentNode;Me(l),l.append(n),i.clear(),ai(e,t[0].prev,t[o-1].next)}at(r,(()=>{for(var n=0;n<o;n++){var r=t[n];a||(i.delete(r.k),ai(e,r.prev,r.next)),rt(r.e,!a)}}))}(t,E,T,y)}}g&&yt((()=>{if(void 0!==c)for(h of c)h.a?.apply()}));Ut.first=t.first&&t.first.e,Ut.last=w&&w.e}(c,u,l,s,i,!!(Nt.f&b),o,r);null!==a&&(0===h?d?ut(d):d=et((()=>a(l))):null!==d&&st(d,(()=>{d=null}))),v&&ae(!0),r()})),se&&(l=oe)}function ri(e,t,n,i){1&i&&X(e.v,t),2&i?X(e.i,n):e.i=n}function oi(e,t,n,i,r,o,s,a,l,u){var c=ei,d=!!(1&l),f=d?!(16&l)?G(r):q(r):r,h=2&l?q(s):s;d&&(f.debug=()=>{var e="number"==typeof h?s:h.v;u()[e]});var v={i:h,v:f,k:o,a:null,e:null,prev:n,next:i};ei=v;try{return v.e=et((()=>a(e,f,h)),se),v.e.prev=n&&n.e,v.e.next=i&&i.e,null===n?t.first=v:(n.next=v,n.e.next=v.e),null!==i&&(i.prev=v,i.e.prev=v.e),v}finally{ei=c}}function si(e,t,n){for(var i=e.next?e.next.e.nodes_start:n,r=t?t.e.nodes_start:n,o=e.e.nodes_start;o!==i;){var s=xe(o);r.before(o),o=s}}function ai(e,t,n){null===t?e.first=n:(t.next=n,t.e.next=n&&n.e),null!==n&&(n.prev=t,n.e.prev=t&&t.e)}function li(e,t,n){if(!t||t===function(e){let t=5381,n=(e=e.replace(kn,"")).length;for(;n--;)t=(t<<5)-t^e.charCodeAt(n);return(t>>>0).toString(36)}(String(n??"")))return;let i;const r=e.__svelte_meta?.loc;r?i=`near ${r.file}:${r.line}:${r.column}`:Vt?.[D]&&(i=`in ${Vt[D]}`),function(e){console.warn(`%c[svelte] hydration_html_changed\n%c${e?`The value of an \`{@html ...}\` block ${e} changed between server and client renders. The client value will be ignored in favour of the server value`:"The value of an `{@html ...}` block changed between server and client renders. The client value will be ignored in favour of the server value"}\nhttps://svelte.dev/e/hydration_html_changed`,ee,te)}(function(e){return e?.replace(/\//g,"/​")}(i))}function ui(e,t,n,i,r){var o,s=e,a="";Ze((()=>{a!==(a=t()??"")?(void 0!==o&&(rt(o),o=void 0),""!==a&&(o=et((()=>{if(se){for(var e=oe.data,t=ue(),n=t;null!==t&&(8!==t.nodeType||""!==t.data);)n=t,t=xe(t);if(null===t)throw ne(),U;return li(t.parentNode,e,a),jn(oe,n),void(s=le(t))}var i=Rn(a+"");jn(Te(i),i.lastChild),s.before(i)})))):se&&ue()}))}function ci(e,t,n,i,r){se&&ue();var o=t.$$slots?.[n],s=!1;!0===o&&(o=t["default"===n?"children":n],s=!0),void 0===o?null!==r&&r(e):o(e,s?()=>i:i)}function di(e,t,...n){var i,r=e,o=c;Ze((()=>{o!==(o=t())&&(i&&(rt(i),i=null),null==o&&function(){{const e=new Error("invalid_snippet\nCould not `{@render}` snippet due to the expression being `null` or `undefined`. Consider using optional chaining `{@render snippet?.()}`\nhttps://svelte.dev/e/invalid_snippet");throw e.name="Svelte error",e}}(),i=et((()=>o(r,...n))))}),$),se&&(r=oe)}function fi(e,t,n){se&&ue();var i,r,o=e;Ze((()=>{i!==(i=t())&&(r&&(st(r),r=null),i&&(r=et((()=>n(o,i)))))}),$),se&&(o=oe)}function hi(e,t,n,i,r,o){let s=se;var a,l;se&&ue();var u=null;se&&1===oe.nodeType&&(u=oe,ue());var c,d=se?oe:e,f=ei;Ze((()=>{const e=t()||null;var n="svg"===e?"http://www.w3.org/2000/svg":null;if(e!==a){var r=ei;ti(f),c&&(null===e?st(c,(()=>{c=null,l=null})):e===l?ut(c):(rt(c),Hn(!1))),e&&e!==l&&(c=et((()=>{if(jn(u=se?u:n?document.createElementNS(n,e):document.createElement(e),u),i){se&&(r=e,Cn.includes(r))&&u.append(document.createComment(""));var t=se?Te(u):u.appendChild(Le());se&&(null===t?ae(!1):le(t)),i(u,t)}var r;Ut.nodes_end=u,d.before(u)}))),(a=e)&&(l=a),Hn(!0),ti(r)}}),$),s&&(ae(!0),le(d))}function vi(e){if(se){var t,n=!1,i=()=>{if(!n){if(n=!0,e.hasAttribute("value")){var t=e.value;pi(e,"value",null),e.value=t}if(e.hasAttribute("checked")){var i=e.checked;pi(e,"checked",null),e.checked=i}}};e.__on_r=i,t=i,ht||(ht=!0,dt(mt)),gt.push(t),Ln()}}function gi(e,t){t?e.hasAttribute("selected")||e.setAttribute("selected",""):e.removeAttribute("selected")}function pi(e,t,n,i){var r=e.__attributes??={};se&&(r[t]=e.getAttribute(t),"src"===t||"srcset"===t||"href"===t&&"LINK"===e.nodeName)?ki(e,t,n??""):r[t]!==(r[t]=n)&&("style"===t&&"__styles"in e&&(e.__styles={}),"loading"===t&&(e[C]=n),null==n?e.removeAttribute(t):"string"!=typeof n&&bi(e).includes(t)?e[t]=n:e.setAttribute(t,n))}function mi(e,t,n,i,r=!1,o=!1,s=!1){var a=t||{},l="OPTION"===e.tagName;for(var u in t)u in n||(n[u]=null);void 0!==i&&(n.class=n.class?n.class+" "+i:i);var c=bi(e),d=e.__attributes??={};for(const m in n){let y=n[m];if(l&&"value"===m&&null==y)e.value=e.__value="",a[m]=y;else{var f=a[m];if(y!==f){a[m]=y;var h=m[0]+m[1];if("$$"!==h){if("on"===h){const b={},k="$$"+m;let $=m.slice(2);var v=On($);if($n($)&&($=$.slice(0,-7),b.capture=!0),!v&&f){if(null!=y)continue;e.removeEventListener($,a[k],b),a[k]=null}if(null!=y)if(v)e[`__${$}`]=y,Dn([$]);else{function w(e){a[m].call(this,e)}a[k]=Un($,e,w,b)}else v&&(e[`__${$}`]=void 0)}else if("style"===m&&null!=y)e.style.cssText=y+"";else if("autofocus"===m)Sn(e,Boolean(y));else if("__value"===m||"value"===m&&null!=y)e.value=e[m]=e.__value=y;else if("selected"===m&&l)gi(e,y);else{var g=m;r||(g=_n(g));var p="defaultValue"===g||"defaultChecked"===g;if(null!=y||o||p)p||c.includes(g)&&(o||"string"!=typeof y)?e[g]=y:"function"!=typeof y&&(!se||"src"!==g&&"href"!==g&&"srcset"!==g?pi(e,g,y):s||ki(e,g,y??""));else if(d[m]=null,"value"===g||"checked"===g){let O=e;if("value"===g){let I=O.defaultValue;O.removeAttribute(g),O.defaultValue=I}else{let _=O.defaultChecked;O.removeAttribute(g),O.defaultChecked=_}}else e.removeAttribute(m)}"style"===m&&"__styles"in e&&(e.__styles={})}}}}return a}var yi=new Map;function bi(e){var t,n=yi.get(e.nodeName);if(n)return n;yi.set(e.nodeName,n=[]);for(var i=e,r=Element.prototype;r!==i;){for(var s in t=o(i))t[s].set&&n.push(s);i=l(i)}return n}function ki(e,t,n){"srcset"===t&&function(e,t){var n=wi(e.srcset),i=wi(t);return i.length===n.length&&i.every((([e,t],i)=>t===n[i][1]&&($i(n[i][0],e)||$i(e,n[i][0]))))}(e,n)||$i(e.getAttribute(t)??"",n)||function(e,t,n){console.warn(`%c[svelte] hydration_attribute_changed\n%cThe \`${e}\` attribute on \`${t}\` changed its value between server and client renders. The client value, \`${n}\`, will be ignored in favour of the server value\nhttps://svelte.dev/e/hydration_attribute_changed`,ee,te)}(t,e.outerHTML.replace(e.innerHTML,e.innerHTML&&"..."),String(n))}function $i(e,t){return e===t||new URL(e,document.baseURI).href===new URL(t,document.baseURI).href}function wi(e){return e.split(",").map((e=>e.trim().split(" ").filter(Boolean)))}function Oi(e,t){var n=e.__className,i=function(e){return null==e?"":e}(t);se&&e.className===i?e.__className=i:(n!==i||se&&e.className!==i)&&(null==t?e.removeAttribute("class"):e.className=i,e.__className=i)}function Ii(e,t,n){if(n){if(e.classList.contains(t))return;e.classList.add(t)}else{if(!e.classList.contains(t))return;e.classList.remove(t)}}const _i={tick:e=>requestAnimationFrame(e),now:()=>performance.now(),tasks:new Set};function Ai(){const e=_i.now();_i.tasks.forEach((t=>{t.c(e)||(_i.tasks.delete(t),t.f())})),0!==_i.tasks.size&&_i.tick(Ai)}function Ci(e,t){e.dispatchEvent(new CustomEvent(t))}function Si(e){if("float"===e)return"cssFloat";if("offset"===e)return"cssOffset";if(e.startsWith("--"))return e;const t=e.split("-");return 1===t.length?t[0]:t[0]+t.slice(1).map((e=>e[0].toUpperCase()+e.slice(1))).join("")}function Ei(e){const t={},n=e.split(";");for(const e of n){const[n,i]=e.split(":");if(!n||void 0===i)break;t[Si(n.trim())]=i.trim()}return t}const Li=e=>e;function Ti(e,t,n,i){var r,o,s,a=!!(4&e),l=t.inert;function u(){var e=Nt,o=Ut;Ft(null),Mt(null);try{return r??=n()(t,i?.()??{},{direction:"both"})}finally{Ft(e),Mt(o)}}var c={is_global:a,in(){t.inert=l,Ci(t,"introstart"),o=xi(t,u(),s,1,(()=>{Ci(t,"introend"),o?.abort(),o=r=void 0}))},out(e){t.inert=!0,Ci(t,"outrostart"),s=xi(t,u(),o,0,(()=>{Ci(t,"outroend"),e?.()}))},stop:()=>{o?.abort(),s?.abort()}},d=Ut;if((d.transitions??=[]).push(c),qn){var f=a;if(!f){for(var h=d.parent;h&&h.f&$;)for(;(h=h.parent)&&!(16&h.f););f=!h||!!(32768&h.f)}f&&Je((()=>{dn((()=>c.in()))}))}}function xi(e,t,n,i,r){var o=1===i;if(u(t)){var s,a=!1;return yt((()=>{if(!a){var l=t({direction:o?"in":"out"});s=xi(e,l,n,i,r)}})),{abort:()=>{a=!0,s?.abort()},deactivate:()=>s.deactivate(),reset:()=>s.reset(),t:()=>s.t()}}if(n?.deactivate(),!t?.duration)return r(),{abort:c,deactivate:c,reset:c,t:()=>i};const{delay:l=0,css:d,tick:f,easing:h=Li}=t;var v=[];if(o&&void 0===n&&(f&&f(0,1),d)){var g=Ei(d(0,1));v.push(g,g)}var p=()=>1-i,m=e.animate(v,{duration:l});return m.onfinish=()=>{var o=n?.t()??1-i;n?.abort();var s=i-o,a=t.duration*Math.abs(s),l=[];if(a>0){if(d)for(var u=Math.ceil(a/(1e3/60)),c=0;c<=u;c+=1){var v=o+s*h(c/u),g=d(v,1-v);l.push(Ei(g))}p=()=>{var e=m.currentTime;return o+s*h(e/a)},f&&function(e){let t;0===_i.tasks.size&&_i.tick(Ai),new Promise((n=>{_i.tasks.add(t={c:e,f:n})}))}((()=>{if("running"!==m.playState)return!1;var e=p();return f(e,1-e),!0}))}(m=e.animate(l,{duration:a,fill:"forwards"})).onfinish=()=>{p=()=>i,f?.(i,1-i),r()}},{abort:()=>{m&&(m.cancel(),m.effect=null,m.onfinish=c)},deactivate:()=>{r=c},reset:()=>{0===i&&f?.(1,0)},t:()=>p()}}function Ni(e,t,n=t){var i=Ht();xn(e,"input",(r=>{"checkbox"===e.type&&T();var o=r?e.defaultValue:e.value;if(o=Ui(e)?Mi(o):o,n(o),i&&o!==(o=t())){var s=e.selectionStart,a=e.selectionEnd;e.value=o??"",null!==a&&(e.selectionStart=s,e.selectionEnd=Math.min(a,e.value.length))}})),(se&&e.defaultValue!==e.value||null==dn(t)&&e.value)&&n(Ui(e)?Mi(e.value):e.value),Qe((()=>{"checkbox"===e.type&&T();var n=t();Ui(e)&&n===Mi(e.value)||("date"!==e.type||n||e.value)&&n!==e.value&&(e.value=n??"")}))}function Fi(e,t,n=t){xn(e,"change",(t=>{var i=t?e.defaultChecked:e.checked;n(i)})),(se&&e.defaultChecked!==e.checked||null==dn(t))&&n(e.checked),Qe((()=>{var n=t();e.checked=Boolean(n)}))}function Ui(e){var t=e.type;return"number"===t||"range"===t}function Mi(e){return""===e?null:+e}function Di(e,t,n){if(e.multiple)return function(e,t){for(var n of e.options)n.selected=~t.indexOf(Pi(n))}(e,t);for(var i of e.options){var r=Pi(i);if(o=r,s=t,Object.is(_e(o),_e(s)))return void(i.selected=!0)}var o,s;n&&void 0===t||(e.selectedIndex=-1)}function Pi(e){return"__value"in e?e.__value:e.value}function Ri(e,t){return e===t||e?.[I]===t}function ji(e={},t,n,i){return Je((()=>{var r,o;return Qe((()=>{r=o,o=i?.()||[],dn((()=>{e!==n(...o)&&(t(e,...o),r&&Ri(n(...r),e)&&t(null,...r))}))})),()=>{yt((()=>{o&&Ri(n(...o),e)&&t(null,...o)}))}})),e}function Wi(e){return function(...t){return t[0].preventDefault(),e?.apply(this,t)}}function zi(e,t){if(e.l.s)for(const t of e.l.s)cn(t);t()}function Bi(e,n){var i=e.$$events?.[n.type],r=t(i)?i.slice():null==i?[]:[i];for(var o of r)o.call(this,n)}let Vi=!1;function qi(e,t,n){const i=n[t]??={store:null,source:G(void 0),unsubscribe:c};if(i.store!==e)if(i.unsubscribe(),i.store=e??null,null==e)i.source.v=void 0,i.unsubscribe=c;else{var r=!0;i.unsubscribe=function(e,t,n){if(null==e)return t(void 0),c;const i=dn((()=>e.subscribe(t,n)));return i.unsubscribe?()=>i.unsubscribe():i}(e,(e=>{r?i.source.v=e:Q(i.source,e)})),r=!1}return cn(i.source)}function Hi(){const e={};return He((()=>{for(var t in e){e[t].unsubscribe()}})),e}const Gi={get(e,t){if(!e.exclude.includes(t))return e.props[t]},set:(e,t)=>(function(e){{const t=new Error(`props_rest_readonly\nRest element properties of \`$props()\` such as \`${e}\` are readonly\nhttps://svelte.dev/e/props_rest_readonly`);throw t.name="Svelte error",t}}(`${e.name}.${String(t)}`),!1),getOwnPropertyDescriptor(e,t){if(!e.exclude.includes(t))return t in e.props?{enumerable:!0,configurable:!0,value:e.props[t]}:void 0},has:(e,t)=>!e.exclude.includes(t)&&t in e.props,ownKeys:e=>Reflect.ownKeys(e.props).filter((t=>!e.exclude.includes(t)))};function Ki(e,t,n){return new Proxy({props:e,exclude:t,name:n,other:{},to_proxy:[]},Gi)}const Ji={get(e,t){if(!e.exclude.includes(t))return cn(e.version),t in e.special?e.special[t]():e.props[t]},set:(e,t,n)=>(t in e.special||(e.special[t]=er({get[t](){return e.props[t]}},t,4)),e.special[t](n),gn(e.version),!0),getOwnPropertyDescriptor(e,t){if(!e.exclude.includes(t))return t in e.props?{enumerable:!0,configurable:!0,value:e.props[t]}:void 0},deleteProperty:(e,t)=>(e.exclude.includes(t)||(e.exclude.push(t),gn(e.version)),!0),has:(e,t)=>!e.exclude.includes(t)&&t in e.props,ownKeys:e=>Reflect.ownKeys(e.props).filter((t=>!e.exclude.includes(t)))};function Yi(e,t){return new Proxy({props:e,exclude:t,special:{},version:q(0)},Ji)}const Qi={get(e,t){let n=e.props.length;for(;n--;){let i=e.props[n];if(u(i)&&(i=i()),"object"==typeof i&&null!==i&&t in i)return i[t]}},set(e,t,n){let i=e.props.length;for(;i--;){let o=e.props[i];u(o)&&(o=o());const s=r(o,t);if(s&&s.set)return s.set(n),!0}return!1},getOwnPropertyDescriptor(e,t){let n=e.props.length;for(;n--;){let i=e.props[n];if(u(i)&&(i=i()),"object"==typeof i&&null!==i&&t in i){const e=r(i,t);return e&&!e.configurable&&(e.configurable=!0),e}}},has(e,t){if(t===I||t===A)return!1;for(let n of e.props)if(u(n)&&(n=n()),null!=n&&t in n)return!0;return!1},ownKeys(e){const t=[];for(let n of e.props){u(n)&&(n=n());for(const e in n)t.includes(e)||t.push(e)}return t}};function Xi(...e){return new Proxy({props:e},Qi)}function Zi(e){for(var t=Ut,n=Ut;null!==t&&!(96&t.f);)t=t.parent;try{return Mt(t),e()}finally{Mt(n)}}function er(e,t,n,i){var o,s=!!(1&n),a=!N||!!(2&n),l=!!(8&n),u=!!(16&n),c=!1;l?[o,c]=function(e){var t=Vi;try{return Vi=!1,[e(),Vi]}finally{Vi=t}}((()=>e[t])):o=e[t];var d,f=I in e||A in e,h=r(e,t)?.set??(f&&l&&t in e?n=>e[t]=n:void 0),v=i,g=!0,p=!1,m=()=>(p=!0,g&&(g=!1,v=u?dn(i):i),v);if(void 0===o&&void 0!==i&&(h&&a&&function(e){{const t=new Error(`props_invalid_value\nCannot do \`bind:${e}={undefined}\` when \`${e}\` has a fallback value\nhttps://svelte.dev/e/props_invalid_value`);throw t.name="Svelte error",t}}(t),o=m(),h&&h(o)),a)d=()=>{var n=e[t];return void 0===n?m():(g=!0,p=!1,n)};else{var y=Zi((()=>(s?De:Pe)((()=>e[t]))));y.f|=131072,d=()=>{var e=cn(y);return void 0!==e&&(v=void 0),void 0===e?v:e}}if(!(4&n))return d;if(h){var b=e.$$legacy;return function(e,t){return arguments.length>0?(a&&t&&!b&&!c||h(t?d():e),e):d()}}var k=!1,$=G(o),w=Zi((()=>De((()=>{var e=d(),t=cn($);return k?(k=!1,t):$.v=e}))));return s||(w.equals=L),function(e,t){if(arguments.length>0){const n=t?cn(w):a&&l?Oe(e):e;return w.equals(n)||(k=!0,Q($,n),p&&void 0!==v&&(v=n),dn((()=>cn(w)))),e}return cn(w)}}function tr(e){null===Bt&&bt("onMount"),N&&null!==Bt.l?or(Bt).m.push(e):Ge((()=>{const t=dn(e);if("function"==typeof t)return t}))}function nr(e){null===Bt&&bt("onDestroy"),tr((()=>()=>dn(e)))}function ir(){const e=Bt;return null===e&&bt("createEventDispatcher"),(n,i,r)=>{const o=e.s.$$events?.[n];if(o){const s=t(o)?o.slice():[o],a=function(e,t,{bubbles:n=!1,cancelable:i=!1}={}){return new CustomEvent(e,{detail:t,bubbles:n,cancelable:i})}(n,i,r);for(const t of s)t.call(e.x,a);return!a.defaultPrevented}return!0}}function rr(e){null===Bt&&bt("afterUpdate"),null===Bt.l&&x("afterUpdate"),or(Bt).a.push(e)}function or(e){var t=e.l;return t.u??={a:[],b:[],m:[]}}var sr=Object.freeze({__proto__:null,afterUpdate:rr,beforeUpdate:function(e){null===Bt&&bt("beforeUpdate"),null===Bt.l&&x("beforeUpdate"),or(Bt).b.push(e)},createEventDispatcher:ir,createRawSnippet:function(e){return(t,...n)=>{var i,r=e(...n);se?(i=oe,ue()):(null===xe(i=Te(Rn(r.render().trim())))&&1===i.nodeType||console.warn("%c[svelte] invalid_raw_snippet_render\n%cThe `render` function passed to `createRawSnippet` should return HTML for a single element\nhttps://svelte.dev/e/invalid_raw_snippet_render",ee,te),t.before(i));const o=r.setup?.(i);jn(i,i),"function"==typeof o&&He(o)}},flushSync:function(e){un(e)},getAllContexts:function(){const e=vn("getAllContexts");{const t=Bt?.function;if(t)for(const n of e.values())ye(n,t,!0)}return e},getContext:function(e){const t=vn("getContext").get(e);{const e=Bt.function;e&&ye(t,e,!0)}return t},hasContext:function(e){return vn("hasContext").has(e)},hydrate:function(e,t){Ee(),t.intro=t.intro??!1;const n=t.target,i=se,r=oe;try{for(var o=Te(n);o&&(8!==o.nodeType||"["!==o.data);)o=xe(o);if(!o)throw U;ae(!0),le(o),ue();const i=Yn(e,{...t,anchor:o});if(null===oe||8!==oe.nodeType||"]"!==oe.data)throw ne(),U;return ae(!1),i}catch(i){if(i===U)return!1===t.recover&&function(){{const e=new Error("hydration_failed\nFailed to hydrate the application\nhttps://svelte.dev/e/hydration_failed");throw e.name="Svelte error",e}}(),Ee(),Me(n),ae(!1),Kn(e,t);throw i}finally{ae(i),le(r)}},mount:Kn,onDestroy:nr,onMount:tr,setContext:function(e,t){return vn("setContext").set(e,t),t},tick:async function(){await Promise.resolve(),un()},unmount:Xn,untrack:dn});function ar(e,t,n){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:n;throw new TypeError("Private element is not present on this object")}function lr(e,t,n){return t=yr(t),$r(e,kr()?Reflect.construct(t,n||[],yr(e).constructor):t.apply(e,n))}function ur(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function cr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function dr(e,t){return e.get(ar(e,t))}function fr(e,t,n){ur(e,t),t.set(e,n)}function hr(e,t,n){return e.set(ar(e,t),n),n}function vr(e,t){ur(e,t),t.add(e)}function gr(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,Or(i.key),i)}}function pr(e,t,n){return t&&gr(e.prototype,t),n&&gr(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function mr(e,t,n){return(t=Or(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function yr(e){return yr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},yr(e)}function br(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&wr(e,t)}function kr(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(kr=function(){return!!e})()}function $r(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function wr(e,t){return wr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},wr(e,t)}function Or(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}"undefined"!=typeof window&&(window.__svelte||={v:new Set}).v.add("5");const Ir=Object.freeze({checkbox:function(e,t=void 0){return"object"==typeof t&&Object.hasOwn(t,"checked")&&Object.hasOwn(t,"unchecked")?e.checked?t.checked:t.unchecked:Object.hasOwn(e,"value")&&void 0!==e.value?!!e.checked&&e.value:e.checked}});let _r=function(){function e(){cr(this,e)}return pr(e,null,[{key:"inputValuesExtractors",get:function(){return Ir}},{key:"extractValueFromInput",value:function(t,n=void 0){return Object.hasOwn(e.inputValuesExtractors,t.type)?e.inputValuesExtractors[t.type](t,n):t.value}},{key:"onInput",value:function(t,n,i=void 0){return function(r){const o=e.extractValueFromInput(r.currentTarget,i);return n({field:t,value:o},r)}}},{key:"isEnterEvent",value:function(e){return"Enter"===e.key&&!e.altKey&&!e.ctrlKey&&!e.shiftKey}},{key:"onlyOnEnter",value:function(t){return function(n){return!e.isEnterEvent(n)||t(n)}}},{key:"isMobile",value:function(){const e=window.matchMedia||window.msMatchMedia;if(e){let t="(pointer:coarse)";if(arguments.length){t=`only screen and (max-width: ${"boolean"==typeof arguments[0]?this.MOBILE_WIDTH_BREAK_POINT:arguments[0]}px)`}return e(t).matches}return!1}},{key:"removeBodyScroll",value:function(){document.body.classList.add(this.SCROLL_DISABLER_CLASS)}},{key:"restoreBodyScroll",value:function(){document.body.classList.remove(this.SCROLL_DISABLER_CLASS)}},{key:"formatPhone",value:function(e,t=this.FILLER){const n=[1,2,2,2,3,3,3,4,4,5,5];let i=e.replace(/\D/g,"");if(i.length>11){let e=i.length-11;for(;e>0;)e--,n.unshift(1)}let r=["","","","",""];Array.from(i).forEach((function(e,t){let i=n[t];r[i-1]=r[i-1]+e}));const o=n.reduce((function(e,t){return void 0===e[t]?e[t]=1:e[t]+=1,e}),{});for(let e in r){let n=o[parseInt(e)+1]-r[e].length;for(;n>0;)r[e]=r[e]+t,n--}return`+${r[0]} (${r[1]}) ${r[2]}-${r[3]}-${r[4]}`}},{key:"setMoneySign",value:function(e){this.MONEY_SIGN=e}},{key:"formatPrice",value:function(e){let t=Math.floor(e/100),n=e%100;return`${this.MONEY_SIGN}${t.toString()}.${n.toString()}`}},{key:"formatLocaleDatetime",value:function(e,t={date:!0,time:!0}){const n=e.toLocaleDateString(window.navigator.language),i=e.toLocaleTimeString(window.navigator.language);return t.date&&t.time?`${n} ${i}`:t.date&&!t.time?n:i}},{key:"tryFormatLocaleDateTime",value:function(t,n={date:!0,time:!0}){if("string"==typeof t||"number"==typeof t){const i=new Date(t);return e.formatLocaleDatetime(i,n)}return"object"==typeof t?e.formatLocaleDatetime(t,n):""}},{key:"formatTimestamp",value:function(e,t=0){let n=60*((new Date).getTimezoneOffset()-t)*1e3;return new Date(parseInt(e)-n).toLocaleString(window.navigator.language)}},{key:"declOfNum",value:function(e,t){let n=(e=Math.abs(e)%100)%10;return e>10&&e<20?t[2]:n>1&&n<5?t[1]:1==n?t[0]:t[2]}},{key:"humanizedTimeDiff",value:function(e){let t,n=(new Date).getTime(),i=Math.round((n-e)/1e3);if(i<60)return t=this.declOfNum(i,this.TIME.SECONDS),`${i} ${t} назад`;if(i<3600){let e=Math.floor(i/60);return t=this.declOfNum(e,this.TIME.MINUTES),`${e} ${t} назад`}{let e=Math.floor(i/3600);return t=this.declOfNum(e,this.TIME.HOURS),`${e} ${t} назад`}}}])}();mr(_r,"CLEAR_MACRO","__CLEAR__"),mr(_r,"ERROR_DEFAULT","Что пошло не так."),mr(_r,"DEFAULT_REDIRECT_TIMEOUT",3e3),mr(_r,"CLASS_OK","is-success"),mr(_r,"CLASS_ERR","is-danger"),mr(_r,"SCROLL_DISABLER_CLASS","remove-scroll"),mr(_r,"FILLER","_"),mr(_r,"SCROLL_OPTIONS",{top:0,behavior:"smooth"}),mr(_r,"MOBILE_WIDTH_BREAK_POINT",760),mr(_r,"MONEY_SIGN","&#8381;"),mr(_r,"TIME",{SECONDS:["секунду","секунды","секунд"],MINUTES:["минуту","минуты","минут"],HOURS:["час","часа","часов"]});var Ar=Wn("<div><!></div>");function Cr(e,t){pn(t,!0);let n=er(t,"id",3,""),i=er(t,"class",3,""),r=er(t,"role",3,"button"),o=er(t,"tabIndex",3,0),s=er(t,"onclick",3,(()=>!0));const a=t.onkeyup??(s()?_r.onlyOnEnter(s()):void 0);var l=Ar();l.__click=function(...e){s()?.apply(this,e)},l.__keyup=a,di(Ne(l),(()=>t.children??c)),ce(l),Xe((()=>{pi(l,"id",n()),Oi(l,`block ${i()??""}`),pi(l,"role",r()),pi(l,"tabindex",o())})),Vn(e,l),mn()}Dn(["click","keyup"]);var Sr=Wn("<div><!></div>");function Er(e,t){pn(t,!0);let n=er(t,"id",3,""),i=er(t,"class",3,""),r=er(t,"role",3,"button"),o=er(t,"tabIndex",3,0),s=er(t,"onclick",3,(()=>!0));const a=t.onkeyup??(s()?_r.onlyOnEnter(s()):void 0);var l=Sr();l.__click=function(...e){s()?.apply(this,e)},l.__keyup=a,di(Ne(l),(()=>t.children??c)),ce(l),Xe((()=>{pi(l,"id",n()),Oi(l,`box ${i()??""} `),pi(l,"role",r()),pi(l,"tabindex",o())})),Vn(e,l),mn()}Dn(["click","keyup"]);var Lr=Wn("<div><!></div>");function Tr(e,t){pn(t,!0);let n=er(t,"id",3,""),i=er(t,"class",3,""),r=er(t,"role",3,"button"),o=er(t,"tabIndex",3,0),s=er(t,"onclick",3,(()=>!0));const a=t.onkeyup??(s()?_r.onlyOnEnter(s()):void 0);var l=Lr();l.__click=function(...e){s()?.apply(this,e)},l.__keyup=a,di(Ne(l),(()=>t.children??c)),ce(l),Xe((()=>{pi(l,"id",n()),Oi(l,`content ${i()??""}`),pi(l,"role",r()),pi(l,"tabindex",o())})),Vn(e,l),mn()}Dn(["click","keyup"]);var xr=Object.freeze({__proto__:null,UIBlock:Cr,UIBlockInnerVertical:function(e,t){pn(t,!0);let n=er(t,"id",3,""),i=er(t,"class",3,""),r=er(t,"role",3,"button"),o=er(t,"tabIndex",3,0),s=er(t,"onclick",3,(()=>!0)),a=H("block-inner-vertical");Ge((()=>{Q(a,`block-inner-vertical ${i()}`)}));const l=t.onkeyup??(s()?_r.onlyOnEnter(s()):void 0);Cr(e,{get id(){return n()},get class(){return cn(a)},get onclick(){return s()},onkeyup:l,get role(){return r()},get tabIndex(){return o()},children:(e,n)=>{var i=Bn();di(Fe(i),(()=>t.children??c)),Vn(e,i)},$$slots:{default:!0}}),mn()},UIBox:Er,UIContent:Tr});const Nr=[];function Fr(e,t=c){let n=null;const i=new Set;function r(t){if(E(e,t)&&(e=t,n)){const t=!Nr.length;for(const t of i)t[1](),Nr.push(t,e);if(t){for(let e=0;e<Nr.length;e+=2)Nr[e][0](Nr[e+1]);Nr.length=0}}}function o(t){r(t(e))}return{set:r,update:o,subscribe:function(s,a=c){const l=[s,a];return i.add(l),1===i.size&&(n=t(r,o)||c),s(e),()=>{i.delete(l),0===i.size&&n&&(n(),n=null)}}}}function Ur(e={}){const t={get:function(e,t){return Object.hasOwn(e,t)?Reflect.get(...arguments):t}};return new Proxy(e,t)}const Mr=function(){const{subscribe:e,set:t,update:n}=Fr(Ur());return{subscribe:e,update:n,set:function(e){t(Ur(e))},reset:function(){return t(Ur())}}}();function Dr(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Pr,Rr={exports:{}};
/*!
	 * EventEmitter v5.2.9 - git.io/ee
	 * Unlicense - http://unlicense.org/
	 * Oliver Caldwell - https://oli.me.uk/
	 * @preserve
	 */var jr,Wr,zr,Br,Vr,qr=(Pr||(Pr=1,jr=Rr,function(e){function t(){}var n=t.prototype,i=e.EventEmitter;function r(e,t){for(var n=e.length;n--;)if(e[n].listener===t)return n;return-1}function o(e){return function(){return this[e].apply(this,arguments)}}function s(e){return"function"==typeof e||e instanceof RegExp||!(!e||"object"!=typeof e)&&s(e.listener)}n.getListeners=function(e){var t,n,i=this._getEvents();if(e instanceof RegExp)for(n in t={},i)i.hasOwnProperty(n)&&e.test(n)&&(t[n]=i[n]);else t=i[e]||(i[e]=[]);return t},n.flattenListeners=function(e){var t,n=[];for(t=0;t<e.length;t+=1)n.push(e[t].listener);return n},n.getListenersAsObject=function(e){var t,n=this.getListeners(e);return n instanceof Array&&((t={})[e]=n),t||n},n.addListener=function(e,t){if(!s(t))throw new TypeError("listener must be a function");var n,i=this.getListenersAsObject(e),o="object"==typeof t;for(n in i)i.hasOwnProperty(n)&&-1===r(i[n],t)&&i[n].push(o?t:{listener:t,once:!1});return this},n.on=o("addListener"),n.addOnceListener=function(e,t){return this.addListener(e,{listener:t,once:!0})},n.once=o("addOnceListener"),n.defineEvent=function(e){return this.getListeners(e),this},n.defineEvents=function(e){for(var t=0;t<e.length;t+=1)this.defineEvent(e[t]);return this},n.removeListener=function(e,t){var n,i,o=this.getListenersAsObject(e);for(i in o)o.hasOwnProperty(i)&&-1!==(n=r(o[i],t))&&o[i].splice(n,1);return this},n.off=o("removeListener"),n.addListeners=function(e,t){return this.manipulateListeners(!1,e,t)},n.removeListeners=function(e,t){return this.manipulateListeners(!0,e,t)},n.manipulateListeners=function(e,t,n){var i,r,o=e?this.removeListener:this.addListener,s=e?this.removeListeners:this.addListeners;if("object"!=typeof t||t instanceof RegExp)for(i=n.length;i--;)o.call(this,t,n[i]);else for(i in t)t.hasOwnProperty(i)&&(r=t[i])&&("function"==typeof r?o.call(this,i,r):s.call(this,i,r));return this},n.removeEvent=function(e){var t,n=typeof e,i=this._getEvents();if("string"===n)delete i[e];else if(e instanceof RegExp)for(t in i)i.hasOwnProperty(t)&&e.test(t)&&delete i[t];else delete this._events;return this},n.removeAllListeners=o("removeEvent"),n.emitEvent=function(e,t){var n,i,r,o,s=this.getListenersAsObject(e);for(o in s)if(s.hasOwnProperty(o))for(n=s[o].slice(0),r=0;r<n.length;r++)!0===(i=n[r]).once&&this.removeListener(e,i.listener),i.listener.apply(this,t||[])===this._getOnceReturnValue()&&this.removeListener(e,i.listener);return this},n.trigger=o("emitEvent"),n.emit=function(e){var t=Array.prototype.slice.call(arguments,1);return this.emitEvent(e,t)},n.setOnceReturnValue=function(e){return this._onceReturnValue=e,this},n._getOnceReturnValue=function(){return!this.hasOwnProperty("_onceReturnValue")||this._onceReturnValue},n._getEvents=function(){return this._events||(this._events={})},t.noConflict=function(){return e.EventEmitter=i,t},jr.exports?jr.exports=t:e.EventEmitter=t}("undefined"!=typeof window?window:Rr.exports||{})),Rr.exports),Hr=Dr(qr);var Gr,Kr=(Vr||(Vr=1,Br=function(){if(zr)return Wr;zr=1;const e=".",t=":",n="::",i="()";return Wr=class{static get SUB_PATH_START(){return"{"}static get SUB_PATH_END(){return"}"}static get PATH_SPLIT(){return e}static get PATH_START_OBJECT(){return t}static get PATH_START_HELPERS(){return n}static get FUNCTION_MARKER(){return i}static get MAX_DEEP(){return 10}static findNextSubPath(e){let t="",n=!1;for(let i=0;i<e.length;i++)if("{"===e[i])n=!0,t="";else{if("}"===e[i]&&n)return t;t+=e[i]}return n?t:null}static replaceSubPath(e,t,n){let i="{"+t+"}",r=0;for(;e.indexOf(i)>-1&&r<10;)e=e.replace(i,n),r++;return e}static parseSubs(e,t,i){let r,o=this.findNextSubPath(e),s=0;for(;o&&(r=this.getValueByPath(o.indexOf(n)>-1?i:t,o,t,i),e=this.replaceSubPath(e,o,r),s++,!(s>10));)o=this.findNextSubPath(e);return e}static get(e,i,r=void 0){switch(e){case t:return i;case n:return r}return e=this.parseSubs(e,i,r),this.getValueByPath(e.indexOf(n)>-1?r:i,e,i,r)}static set(e,t,i,r=void 0){3===arguments.length&&(r=i,i=void 0);let o,s=this.findNextSubPath(e),a=0;for(;s&&(o=this.getValueByPath(s.indexOf(n)>-1?i:t,s,t,i),e=this.replaceSubPath(e,s,o),!(a>10));)s=this.findNextSubPath(e),a++;this.setValueByPath(t,e,r),t.isRecord&&this.normilizePath(e).length>1&&t.__isActive&&t.trigger("change",t,e,r)}static unset(e,t,n){this.set(e,t,n,null)}static parsePathStep(e,r,o){let s=null;if(0===e.indexOf(n)&&o){if(s=e.replace(n,""),s.indexOf(i)!==s.length-2)return o[s];if(s=s.replace(i,""),Object.prototype.hasOwnProperty.call(o,s))return o[s](r,void 0)}else if(0===e.indexOf(t)&&r){if(s=e.replace(t,""),s.indexOf(i)!==s.length-2)return r[s];if(s=s.replace(i,""),Object.prototype.hasOwnProperty.call(r,s))return r[s](r,void 0)}return e}static parsePath(t,n,i){Array.isArray(t)||(t=t.split(e));for(var r=0;r<t.length;r++)t[r]=this.parsePathStep(t[r],n,i);return t}static normilizePath(n){if(Array.isArray(n))return n;for(;n.indexOf(t)>-1;)n=n.replace(t,"");return n.split(e)}static ifFullSubPath(e,t){if(e.length<t.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}static getValueByPath(e,t,n,r){let o=(t=this.normilizePath(t)).shift(),s=o.indexOf(i)>-1;if(s&&(o=o.replace(i,"")),("object"==typeof e||"function"==typeof e)&&null!=e&&void 0!==e[o]&&null!==e[o]){let i=s?e[o]({item:n,helpers:r}):e[o];return t.length>0?this.getValueByPath(i,t,n,r):i}}static setValueByPath(e,t,n){let i=(t=this.normilizePath(t)).shift();t.length>0?(Object.prototype.hasOwnProperty.call(e,i)||(e[i]={}),this.setValueByPath(e[i],t,n)):e[i]=n}static join(){return Array.prototype.slice.call(arguments).join(e)}},Wr}()),Br),Jr=Dr(Kr);let Yr=function(e){return function(e){return!!e&&"object"==typeof e}(e)&&!function(e){var t=Object.prototype.toString.call(e);return"[object RegExp]"===t||"[object Date]"===t||function(e){return e.$$typeof===Qr}(e)}(e)};var Qr="function"==typeof Symbol&&Symbol.for?Symbol.for("react.element"):60103;function Xr(e,t){return(!t||!1!==t.clone)&&Yr(e)?eo((n=e,Array.isArray(n)?[]:{}),e,t):e;var n}function Zr(e,t,n){return e.concat(t).map((function(e){return Xr(e,n)}))}function eo(e,t,n){const i=Array.isArray(t);if(i===Array.isArray(e)){if(i){return((n||{arrayMerge:Zr}).arrayMerge||Zr)(e,t,n)}return function(e,t,n){const i={};return Yr(e)&&Object.keys(e).forEach((function(t){i[t]=Xr(e[t],n)})),Object.keys(t).forEach((function(r){Yr(t[r])&&e[r]?i[r]=eo(e[r],t[r],n):i[r]=Xr(t[r],n)})),i}(e,t,n)}return Xr(t,n)}eo.all=function(e,t){if(!Array.isArray(e))throw new Error("first argument should be an array");return e.reduce((function(e,n){return eo(e,n,t)}),{})};let to=function(){function e(){cr(this,e)}return pr(e,null,[{key:"isError",value:function(e){return e instanceof Error||Object.hasOwn(e,"status")&&"error"===e.status}},{key:"mute",value:function(){e.ENV_TYPE="production"}},{key:"pad",value:function(e){return e<10?"0"+e:e}},{key:"getTodayDate",value:function(){let e=new Date;return new Date(e.getFullYear(),e.getMonth(),e.getDate()).getTime()}},{key:"objHas",value:function(e,t){return Object.hasOwn(e,t)}},{key:"copyObj",value:function(e){return JSON.parse(JSON.stringify(e))}},{key:"partCopyObj",value:function(e,t){let n=Object.keys(e).reduce((function(n,i){return t.includes(i)&&(n[i]=e[i]),n}),{});return JSON.parse(JSON.stringify(n))}},{key:"compareTwoArrays",value:function(e,t){return e.length===t.length&&e.every((function(e,n){return e===t[n]}))}},{key:"isFunc",value:function(e){return"function"==typeof e}},{key:"isAsync",value:function(e){return"AsyncFunction"===e.constructor.name}},{key:"executeObjectFunction",value:async function(t,n,i){if(t){const r=Jr.get(":"+n,t);if(e.isFunc(r))return e.isAsync(r)?await r(...i):r(...i)}}},{key:"mapBind",value:function(e,t,n){n.forEach((function(n){"function"==typeof e[n]&&(t[n]=e[n].bind(e))}))}},{key:"isClass",value:function(e){return/^\s*class/.test(e.toString())}},{key:"detectType",value:function(t){return"function"!=typeof t?typeof t:e.isClass(t)?"class":"function"}},{key:"isArray",value:function(e){return"object"==typeof e&&e instanceof Array}},{key:"localIsoDate",value:function(t){return(t=t||new Date).getFullYear()+"-"+e.pad(t.getMonth()+1)+"-"+e.pad(t.getDate())+"T"+e.pad(t.getHours())+":"+e.pad(t.getMinutes())+":"+e.pad(t.getSeconds())}},{key:"getToday",value:function(){let t=new Date;return t.getFullYear()+"-"+e.pad(t.getMonth()+1)+"-"+e.pad(t.getDate())}},{key:"backlogAdd",value:function(t,n="log"){!0===e.get("backlog")&&e.backlog.push({msg:t,type:n})}},{key:"dumpBacklog",value:function(){for(;e.backlog.length;){let t=e.backlog.shift();window[e.LOG][t.type](...t.msg)}}},{key:"logMsg",value:function(){let t=e.localIsoDate();window[e.LOG].log(`[${t}]: `,...arguments),e.backlogAdd([`[${t}]: `,...arguments],"log")}},{key:"log",value:function(){e.logMsg(...arguments)}},{key:"createLogger",value:function(t){return{log:e.genLogMsg(t),error:e.genLogError(t),debug:e.genLogDebug(t),report:e.report}}},{key:"genLogMsg",value:function(t){return function(){let n=e.localIsoDate();window[e.LOG].log(`[${n}]: ${t}::`,...arguments),e.backlogAdd([`[${n}]: ${t}::`,...arguments],"log")}}},{key:"isDev",value:function(){return e.ENV_TYPE===e.DEV_ENV}},{key:"debug",value:function(){return e.isDev()?e.logMsg(...arguments):e.NOOP}},{key:"genLogDebug",value:function(t){return e.isDev()?e.genLogMsg(t):e.NOOP}},{key:"error",value:function(){e.logError(...arguments)}},{key:"logError",value:function(){let t=e.localIsoDate();window[e.LOG].error(`[${t}]: `,...arguments),e.backlogAdd([`[${t}]: `,...arguments],"error")}},{key:"genLogError",value:function(t){return function(){let n=e.localIsoDate();window[e.LOG].error(`[${n}]: ${t}::`,...arguments),e.backlogAdd([`[${n}]: ${t}::`,...arguments],"error")}}},{key:"report",value:function(t){if(e.getApp()){let n=e.getApp().getService("nsErrorReporter");n&&n.report(t).catch(e.error)}else e.get("production")||e.error(...arguments)}},{key:"trace",value:function(){e.get("production")||e.trace(...arguments)}},{key:"trimBackslash",value:function(e){return 0===e.indexOf("/")&&(e=e.substring(1)),"/"===e[e.length-1]&&(e=e.substring(0,e.length-1)),e}},{key:"buildURL",value:function({prefix:t,module:n,model:i,id:r,action:o}={prefix:"",module:"",model:"",id:"",action:""}){let s=["/"];return t&&s.push(encodeURIComponent(e.trimBackslash(t))),n&&s.push(encodeURIComponent(e.trimBackslash(n))),i&&s.push(encodeURIComponent(e.trimBackslash(i))),r&&s.push(encodeURIComponent(e.trimBackslash(r))),o&&s.push(encodeURIComponent(e.trimBackslash(o))),s=s.filter((function(e){return""!==e})),s.join("/").replace(/\/\//g,"/")}},{key:"capitalizeFirstLetter",value:function(e){return e.charAt(0).toUpperCase()+e.slice(1)}},{key:"lowerFirstLetter",value:function(e){return e.charAt(0).toLowerCase()+e.slice(1)}},{key:"strLengthCap",value:function(e,t=50,n="..."){return"string"==typeof e&&e.length>t?e.substr(0,t)+n:e}},{key:"escapeHtml",value:function(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")}},{key:"startApp",value:function(e){document.addEventListener("DOMContentLoaded",e)}},{key:"getApp",value:function(){return e.get("app")}},{key:"extendAppConfig",value:function(t,n){return e.deepMerge(t,n)}},{key:"absorbModule",value:function(){let t,n,i={};1==arguments.length?(i={...arguments[0]},Object.hasOwnProperty.call(arguments[0],"defaultConf")&&(t=arguments[0].defaultConf,delete i.defaultConf),Object.hasOwnProperty.call(arguments[0],"mod")&&(n=arguments[0].mod,delete i.mod)):(e.log("WARNING: absorbModule format obsoleted, use object {defaultConf, mod, services, uis, wsc, etc}"),t=arguments[0],n=arguments[1],arguments.length>2&&(i.services=arguments[2]),arguments.length>3&&(i.uis=arguments[3]),arguments.length>4&&(i.wcs=arguments[4]));for(let r in n)"manifest"!==r?"function"==typeof e.get(`absorb.${r}`)?(Object.hasOwn(i,r)||(i[r]={},e.log(`WARNING: no accamulator object provided for '${r}' collection`)),e.get(`absorb.${r}`)(i[r],n[r])):0===r.indexOf("nc")?(Object.hasOwn(t,"controllers")||(t.controllers={}),t.controllers[r]=n[r]):(Object.hasOwn(window,"notEnv")||(window.notEnv={}),window.notEnv[r]=n[r]):t=e.extendAppConfig(t,n.manifest);return t}},{key:"defineIfNotExists",value:function(e,t,n){Object.hasOwn(e,t)||(e[t]=n)}},{key:"register",value:function(t,n){e.registry[t]=n}},{key:"get",value:function(t){return Object.hasOwn(e.registry,t)?e.registry[t]:null}},{key:"moveItem",value:function(e,t,n){const i=function(t){return t<e.length&&t>-1};i(n)&&i(t)&&e.splice(n,0,e.splice(t,1)[0])}},{key:"stripProxy",value:function(t){if(null!=t&&t.isProxy){t=Array.isArray(t)?Array.from(t):Object.assign({},t);for(let n in t)Object.hasOwn(t,n)&&(t[n]=e.stripProxy(t[n]))}return t}},{key:"pipe",value:function(e,t){let n;for(let i of t)n=i(n||e);return n}},{key:"getAPI",value:function(t){return e.getManager()?.getAPI(t)??null}},{key:"setManager",value:function(t){e.MANAGER=t}},{key:"getManager",value:function(){return e.MANAGER}},{key:"getJSON",value:function(e){return fetch(e).then((function(e){return e.json()}))}},{key:"wait",value:function(e){return new Promise((function(t){setTimeout(t,1e3*e)}))}},{key:"registerWidgetEvents",value:function(t){e.getApp()&&Object.keys(t).forEach((function(n){e.getApp().on(n,t[n])}))}},{key:"navigate",value:function(t){e.getApp()&&e.getApp().getWorking("router").navigate(t)}},{key:"select",value:function(t,n,i){return t&&"object"==typeof t&&e.objHas(t,n)&&void 0!==t[n]&&null!==t[n]?t[n]:i}}])}();function no(e,t,n){Object.hasOwn(e,t)||(e[t]={connection:{},router:{routes:{}},messenger:{}});let i=e[t];if(Object.hasOwn(n,"router")&&Object.hasOwn(n.router,"routes"))for(let e in n.router.routes)Object.hasOwn(i.router.routes,e)||(i.router.routes[e]={}),Object.assign(i.router.routes[e],{...n.router.routes[e]});Object.hasOwn(n,"messenger")&&Object.assign(i.messenger,{...n.messenger}),Object.hasOwn(n,"connection")&&Object.assign(i.connection,{...n.connection});for(let e of["name","getToken","logger","identity","credentials"])Object.hasOwn(n,e)&&(i[e]=n[e])}Gr=to,mr(to,"MANAGER",null),mr(to,"LOG","console"),mr(to,"deepMerge",eo),mr(to,"TZ_OFFSET",(new Date).getTimezoneOffset()/60*-1),mr(to,"DEV_ENV","production"),mr(to,"ENV_TYPE",window.NOT_ENV_TYPE??Gr.DEV_ENV),mr(to,"NOOP",(function(){})),mr(to,"backlog",[]),mr(to,"registry",{}),to.register("absorb.wsc",(function(e,t){if(e)for(let n in t)no(e,n,t[n])})),to.register("absorb.services",(function(e,t){if(e)for(let n in t)Object.hasOwn(e,n)&&to.logError(`services property duplication ${n}`),e[n]=t[n]})),to.register("absorb.uis",(function(e,t){if(e)for(let n in t)Object.hasOwn(e,n)&&to.logError(`uis property duplication ${n}`),e[n]=t[n]})),to.register("absorb.uis",(function(e,t){if(e)for(let n in t)Object.hasOwn(e,n)&&to.logError(`fields property duplication ${n}`),e[n]=t[n]}));let io=function(e){function t(){var e;cr(this,t),(e=lr(this,t)).dict={},e.helpers={};let n=e.restoreFromStorage();return n&&e.set(n),e}return br(t,e),pr(t,[{key:"format",value:function(e,t){return Jr.parseSubs(e,t,this.helpers)}},{key:"say",value:function(e,t=!1){try{if(to.objHas(this.dict,e)){let n=this.dict[e],i="";return i=t?this.format(n,t):n,i}throw new Error(`Unknown locale phrase: ${e}`)}catch(t){return to.debug(t),e}}},{key:"set",value:function(e){Mr.set(e),this.saveToStorage(e),this.dict=Object.assign({},{...e}),this.emit("change")}},{key:"saveToStorage",value:function(e){if(window.localStorage)try{return window.localStorage.setItem("dictionary",JSON.stringify(e))}catch(e){return to.debug(e),!1}return!1}},{key:"restoreFromStorage",value:function(){if(window.localStorage)try{let e=window.localStorage.getItem("dictionary");if(e){return JSON.parse(e)}return!1}catch(e){return to.debug(e),!1}return!1}},{key:"vocabulary",value:function(){return Mr}}])}(Hr);var ro=new io;const oo=ro.say.bind(ro);var so=Wn('<span role="button" tabindex="0"> </span>');function ao(e,t){pn(t,!0);const n=Hi();let i=H(!1),r=er(t,"id",3,"tagId"),o=er(t,"title",15,"tag"),s=er(t,"color",3,"info"),a=er(t,"size",3,"normal"),l=er(t,"padding",3,"normal"),u=er(t,"bold",3,!1),c=er(t,"right",3,!1),d=er(t,"left",3,!1),f=er(t,"top",3,!1),h=er(t,"bottom",3,!1),v=er(t,"class",3,""),g=er(t,"events",31,(()=>Oe({}))),p=er(t,"register",19,(()=>to.registerWidgetEvents.bind(to))),m=er(t,"onUpdate",3,(e=>{Object.hasOwn(e,"title")&&o(e.title)})),y=er(t,"action",3,(()=>!0)),b=er(t,"vars",19,(()=>({})));function k(){return`tag-${r()}:update`}let $=H("");tr((()=>{Object.hasOwn(g(),k())||g(g()[k()]=m(),!0),p()(g()),Q(i,Oe(c()||d()||f()||h()))})),Ge((()=>{Q($,Oe(Object.keys(j(b())).map((e=>`${e}: ${b()[e]};`)).join("")))}));var w=Bn(),O=Fe(w),I=e=>{var t=so();t.__keydown=function(...e){(y()?y():void 0)?.apply(this,e)},t.__click=function(...e){(y()?y():void 0)?.apply(this,e)};var g=Ne(t,!0);ce(t),Xe((()=>{pi(t,"id",`tag-${r()??""}`),Oi(t,`\n  tag\n  ${(u()?"has-text-weight-bold":"")??""}\n  ${("normal"!==l()?`is-padded-${l()}`:"")??""}\n  is-${a()??""}\n  is-${s()??""}\n  ${(cn(i)?"is-sided":"")??""}\n  ${(c()?"is-sided-right":"")??""}\n  ${(d()?"is-sided-left":"")??""}\n  ${(f()?"is-sided-top":"")??""}\n  ${(h()?"is-sided-bottom":"")??""}\n  ${v()??""}`),pi(t,"style",cn($)),Gn(g,qi(Mr,"$LOCALE",n)[o()])})),Vn(e,t)};Zn(O,(e=>{o()&&e(I)})),Vn(e,w),mn()}function lo(e,t){let n=er(t,"LC_TRUE",3,"not-node:booleans_true"),i=er(t,"LC_FALSE",3,"not-node:booleans_false"),r=er(t,"inverted",3,!1);const o={title:i(),color:r()?"success":"danger"},s={title:n(),color:r()?"danger":"success"};let a=De((()=>t.value?s:o));ao(e,Xi((()=>cn(a))))}Dn(["keydown","click"]);var uo=Wn('<span class="label"> <!></span>');function co(e,t){pn(t,!0);let n=er(t,"values",19,(()=>[])),i=er(t,"inverted",3,!1),r=er(t,"componentConstructor",3,lo),o=H(Oe([]));tr((()=>{"boolean"==typeof n()?Q(o,Oe([{value:n()}])):Array.isArray(n())&&(n().every((e=>"boolean"==typeof e))?Q(o,Oe(n().map((e=>({value:e}))))):Q(o,Oe([...n()])))}));var s=Bn(),a=Fe(s),l=e=>{var t=Bn();ii(Fe(t),17,(()=>cn(o)),ni,((e,t)=>{var n=Bn();const o=De(r);var s=Fe(n),a=De((()=>i()||cn(t).inverted));fi(s,(()=>cn(o)),((e,n)=>{n(e,Xi((()=>cn(t)),{get inverted(){return cn(a)}}))})),Vn(e,n)})),Vn(e,t)};Zn(a,(e=>{cn(o).length&&e(l)})),Vn(e,s),mn()}function fo(e,t){t(!t())}async function ho(e,t,n,i,r,o,s){try{await navigator.clipboard.writeText(t()),n()&&(Q(i,!0),cn(r).dataset.tooltip=o(),setTimeout((()=>{Q(i,!1),cn(r).removeAttribute("data-tooltip")}),s()))}catch(e){console.error("Failed to copy: ",e)}}var vo=Wn('<span role="button" tabindex="0"><i></i></span>'),go=Wn('<span class="icon is-small is-right is-clickable is-vertical-middle" role="button" tabindex="0"><i></i></span>'),po=Wn("<span> </span> <!> <!>",1);Dn(["click","keydown"]);var mo=Wn("<span> </span>");function yo(e,t){pn(t,!0);let n=H(!1),i=er(t,"id",3,"tagId"),r=er(t,"state",15,"light"),o=er(t,"size",3,"normal"),s=er(t,"labels",19,(()=>({black:"black",dark:"dark",light:"light",white:"white",primary:"primary",link:"link",info:"info",success:"success",warning:"warning",danger:"danger"}))),a=er(t,"class",3,"mx-1"),l=er(t,"padding",3,"normal"),u=er(t,"bold",3,!1),c=er(t,"right",3,!1),d=er(t,"left",3,!1),f=er(t,"top",3,!1),h=er(t,"bottom",3,!1),v=er(t,"events",31,(()=>Oe({}))),g=er(t,"register",19,(()=>to.registerWidgetEvents.bind(to))),p=er(t,"onUpdate",3,(e=>{Object.hasOwn(e,"state")&&r(e.state)}));function m(){return`indicator-${i()}:update`}tr((()=>{Object.hasOwn(v(),m())||v(v()[m()]=p(),!0),g()(v())})),Ge((()=>{Q(n,Oe(c()||d()||f()||h()))}));var y=mo(),b=Ne(y,!0);ce(y),Xe((()=>{Oi(y,`tag\nis-${o()??""}\n${(u()?"has-text-weight-bold":"")??""}\n${("normal"!==l()?`is-padded-${l()}`:"")??""}\n${(cn(n)?"is-sided":"")??""}\n${(c()?"is-sided-right":"")??""}\n${(d()?"is-sided-left":"")??""}\n${(f()?"is-sided-top":"")??""}\n${(h()?"is-sided-bottom":"")??""}\n  is-${r()??""} ${a()??""}\n  `),Gn(b,s()[r()])})),Vn(e,y),mn()}var bo=Wn('<div><span class="title"> </span></div>');function ko(e,t){pn(t,!0);const n=Hi();let i=er(t,"loading",3,!1),r=er(t,"size",3,"container"),o=er(t,"title",3,"Waiting...");var s=Bn(),a=Fe(s),l=e=>{var t=bo(),s=Ne(t),a=Ne(s,!0);ce(s),ce(t),Xe((()=>{Oi(t,`${("page"===r()?"pageloader":"containerloader")??""} ${(i()?"is-active":"")??""}`),Gn(a,qi(Mr,"$LOCALE",n)[o()])})),Vn(e,t)};Zn(a,(e=>{"hidden"!==r()&&e(l)})),Vn(e,s),mn()}var $o=Wn("<option> </option>");function wo(e,t){pn(t,!0);const n=Hi();var i=$o(),r={},o=Ne(i,!0);ce(i),Xe((()=>{r!==(r=t.value)&&(i.value=null==(i.__value=t.value)?"":t.value),gi(i,t.selected),Gn(o,qi(Mr,"$LOCALE",n)[t.title])})),Vn(e,i),mn()}var Oo=Wn('<span class="mr-2"> </span>'),Io=Wn('<span class="mr-2"> </span>'),_o=Wn("<div><select><!><!></select></div>");function Ao(e,t){pn(t,!0);const n=Hi(),i=()=>qi(Mr,"$LOCALE",n);let r,o=er(t,"value",15,""),s=er(t,"variants",19,(()=>[])),a=er(t,"placeholder",3,""),l=er(t,"emptyValueTitle",3,""),u=er(t,"fieldname",3,"select"),c=er(t,"required",3,!0),d=er(t,"readonly",3,!1),f=er(t,"multiple",3,!1),h=er(t,"size",3,8),v=er(t,"valid",3,!0),g=er(t,"class",3,""),p=er(t,"onchange",3,(()=>!0)),m=Ki(t,["$$slots","$$events","$$legacy","value","variants","placeholder","emptyValueTitle","fieldname","required","readonly","multiple","size","valid","class","onchange"]),y=H(Oe([]));function b(e){return Array.isArray(o())&&f()?o().indexOf(e.id)>-1:!!o()&&o()==e.id}function k(e){let t={field:u(),value:e.currentTarget.value};return r===t.value||Array.isArray(t.value)&&to.compareTwoArrays(r,t.value)||(f()?(o(Array.from(e.target.selectedOptions).map((e=>e.value))),o().indexOf(_r.CLEAR_MACRO)>-1&&o([]),t.value=o()):t.value===_r.CLEAR_MACRO?o(""):o(t.value),p()(t)),!0}function $(e){let t={field:u(),value:e.currentTarget.value};return f()?(o(Array.from(e.target.selectedOptions).map((e=>e.value))),o().indexOf(_r.CLEAR_MACRO)>-1&&o([]),t.value=o()):t.value===_r.CLEAR_MACRO?o(""):o(t.value),r=t.value,p()(t),!0}let w=De((()=>f()?" is-multiple ":""));Ge((()=>{o(),Q(y,Oe(Array.isArray(s())?s().filter(b):[]))}));let O=De((()=>!v()));var I=Bn(),_=Fe(I),A=e=>{var t=Bn(),n=Fe(t),r=e=>{var t=Bn();ii(Fe(t),17,(()=>cn(y)),ni,((e,t)=>{var n=Oo(),r=Ne(n,!0);ce(n),Xe((()=>Gn(r,i()[cn(t).title]))),Vn(e,n)})),Vn(e,t)},s=e=>{var t=Io(),n=Ne(t,!0);ce(t),Xe((()=>Gn(n,i()[l()]))),Vn(e,t)};Zn(n,(e=>{o()?e(r):e(s,!1)})),Vn(e,t)},C=e=>{var t=_o(),n=Ne(t);let i;!function(e,t){let n=!0;Je((()=>{t&&Di(e,dn(t),n),n=!1;var i=new MutationObserver((()=>{var t=e.__value;Di(e,t)}));return i.observe(e,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),()=>{i.disconnect()}}))}(n,(()=>i.value));var r=Ne(n),l=e=>{var t=Bn(),n=Fe(t),i=e=>{wo(e,{get value(){return _r.CLEAR_MACRO},get title(){return a()}})},r=e=>{wo(e,{get value(){return _r.CLEAR_MACRO},selected:"selected",get title(){return a()}})};Zn(n,(e=>{o()?e(i):e(r,!1)})),Vn(e,t)};Zn(r,(e=>{a().length>0&&e(l)})),ii(Ue(r),17,s,ni,((e,t)=>{var n=Bn(),i=Fe(n),r=e=>{var n=De((()=>o()&&o().indexOf(cn(t).id)>-1));wo(e,{get value(){return cn(t).id},get selected(){return cn(n)},get title(){return cn(t).title}})},s=e=>{var n=De((()=>o()==cn(t).id));wo(e,{get value(){return cn(t).id},get selected(){return cn(n)},get title(){return cn(t).title}})};Zn(i,(e=>{f()?e(r):e(s,!1)})),Vn(e,n)})),ce(n),ce(t),Xe((()=>{Oi(t,`select ${g()??""} ${cn(w)??""}`),i=mi(n,i,{id:`form-field-select-${u()??""}`,name:u(),onblur:k,oninput:$,readonly:d(),required:c(),multiple:f(),invalid:cn(O),size:!!f()&&h(),...m}),"value"in i&&Di(n,i.value)})),Vn(e,t)};Zn(_,(e=>{d()?e(A):e(C,!1)})),Vn(e,I),mn()}function Co(e,t,n,i){return e.stopPropagation(),t()&&t()({event:e,value:n.value}),i()&&i()(e,n.value)}var So=Wn('<span class="icon"><i></i></span>'),Eo=Wn("<span> </span>"),Lo=Wn('<span class="icon"><i></i></span>'),To=Wn("<!> <!> <!>",1),xo=Wn("<button><!></button>");function No(e,t){pn(t,!0);const n=Hi(),i=()=>qi(Mr,"$LOCALE",n);let r=er(t,"title",3,""),o=er(t,"light",3,!1),s=er(t,"loading",3,!1),a=er(t,"raised",3,!1),l=er(t,"outlined",3,!1),u=er(t,"inverted",3,!1),c=er(t,"rounded",3,!1),d=er(t,"disabled",3,!1),f=er(t,"state",3,""),h=er(t,"type",3,""),v=er(t,"color",3,""),g=er(t,"size",3,""),p=er(t,"class",3,""),m=er(t,"icon",3,!1),y=er(t,"iconSide",3,"right"),b=er(t,"onclick",3,(()=>!0)),k=er(t,"action",3,(()=>!0));var $=xo();$.__click=[Co,b,t,k];var w=Ne($),O=e=>{var n=Bn();di(Fe(n),(()=>t.children)),Vn(e,n)},I=e=>{var t=Bn(),n=Fe(t),o=e=>{var t=To(),n=Fe(t),o=e=>{var t=So(),n=Ne(t);ce(t),Xe((()=>Oi(n,`fas fa-${m()??""} ${(g()?`is-${g()}`:"")??""}`))),Vn(e,t)};Zn(n,(e=>{"left"===y()&&e(o)}));var s=Ue(n,2),a=e=>{var t=Eo(),n=Ne(t,!0);ce(t),Xe((()=>Gn(n,i()[r()]))),Vn(e,t)};Zn(s,(e=>{r()&&e(a)}));var l=Ue(s,2),u=e=>{var t=Lo(),n=Ne(t);ce(t),Xe((()=>Oi(n,`fas fa-${m()??""} ${(g()?`is-${g()}`:"")??""}`))),Vn(e,t)};Zn(l,(e=>{"right"===y()&&e(u)})),Vn(e,t)},s=e=>{var t=zn();Xe((()=>Gn(t,i()[r()]))),Vn(e,t)};Zn(n,(e=>{m()?e(o):e(s,!1)}),!0),Vn(e,t)};Zn(w,(e=>{t.children?e(O):e(I,!1)})),ce($),Xe((()=>{$.disabled=d(),pi($,"type",h()?h():""),Oi($,`\n  button\n  ${p()??""}\n  ${(f()?`is-${f()}`:"")??""}\n  ${(u()?"is-inverted":"")??""}\n  ${(l()?"is-outlined":"")??""}\n  ${(a()?"is-raised":"")??""}\n  ${(c()?"is-rounded":"")??""}\n  ${(o()?"is-light":"")??""}\n  ${(s()?"is-loading":"")??""}\n  ${(v()?`is-${v()}`:"")??""}\n  ${(g()?`is-${g()}`:"")??""}\n  `)})),Vn(e,$),mn()}Dn(["click"]);var Fo=Wn("<div></div>");function Uo(e,t){pn(t,!0);let n=er(t,"values",19,(()=>[])),i=er(t,"centered",3,!1),r=er(t,"right",3,!1),o=er(t,"class",3,""),s=er(t,"buttonComponent",3,No),a=er(t,"action",3,(()=>!0)),l=er(t,"onclick",3,(()=>!0)),u=H(Oe([]));Ge((()=>{Q(u,Oe(n().map((e=>(isNaN(e.id)&&(e.id=Math.round(100*Math.random())),e)))))}));var c=Fo();ii(c,21,(()=>cn(u)),(e=>e.id),((e,t,n)=>{var i=Bn();fi(Fe(i),s,((e,n)=>{n(e,Xi({get action(){return a()},get onclick(){return l()}},(()=>cn(t)),{get value(){return cn(t).value},set value(e){cn(t).value=e}}))})),Vn(e,i)})),ce(c),Xe((()=>Oi(c,`buttons has-addons ${(i()?"is-centered":"")??""} ${(r()?"is-right":"")??""} ${o()??""}`))),Vn(e,c),mn()}var Mo=Wn('<div><div class="column"><!></div> <div class="column"><!></div> <div class="column"><!></div></div>');function Do(e,t){let n=er(t,"class",3,""),i=er(t,"left",19,(()=>[])),r=er(t,"center",19,(()=>[])),o=er(t,"right",19,(()=>[]));var s=Mo(),a=Ne(s);Uo(Ne(a),{get values(){return i()}}),ce(a);var l=Ue(a,2);Uo(Ne(l),{get values(){return r()},centered:!0}),ce(l);var u=Ue(l,2);Uo(Ne(u),{get values(){return o()},right:!0}),ce(u),ce(s),Xe((()=>Oi(s,`columns ${n()??""}`))),Vn(e,s)}function Po(e,t){pn(t,!0);let n=er(t,"title",3,""),i=er(t,"light",3,!1),r=er(t,"loading",3,!1),o=er(t,"raised",3,!1),s=er(t,"outlined",3,!1),a=er(t,"inverted",3,!1),l=er(t,"rounded",3,!1),u=er(t,"disabled",3,!1),c=er(t,"state",3,""),d=er(t,"type",3,""),f=er(t,"color",3,""),h=er(t,"size",3,""),v=er(t,"class",3,""),g=er(t,"icon",3,!1),p=er(t,"iconSide",3,"right"),m=er(t,"uiOff",3,(()=>({color:""}))),y=er(t,"uiOn",3,(()=>({color:"success"}))),b=er(t,"action",3,(()=>!w())),k=er(t,"onclick",3,(()=>{})),$=er(t,"onchange",3,(()=>{})),w=er(t,"selected",15,!1),O=H(Oe({title:n(),light:i(),loading:r(),raised:o(),outlined:s(),inverted:a(),rounded:l(),disabled:u(),type:d(),color:f(),size:h(),class:v(),icon:g(),iconSide:p(),value:t.value})),I=H(void 0);function _(){if(cn(I)){const e=w()?y()(t.value,w()):m()(t.value,w());Object.keys(e).forEach((t=>{cn(O)[t]=e[t]})),Q(O,Oe(cn(O)))}}return tr((()=>{_()})),Ge((()=>{void 0!==w()&&_()})),ji(No(e,Xi((()=>cn(O)),{get state(){return c()},onclick:function(e){w(b()(e,t.value,w())),_(),k()({value:t.value,selected:w()}),$()({value:t.value,selected:w()})}})),(e=>Q(I,Oe(e))),(()=>cn(I))),mn({updateUI:_})}var Ro=Wn("<div></div>");function jo(e,t){pn(t,!0);const n={};function i(e){n[e.id].updateUI()}let r=er(t,"values",23,(()=>[])),o=er(t,"centered",3,!1),s=er(t,"right",3,!1),a=er(t,"class",3,""),l=er(t,"buttonComponent",3,Po),u=er(t,"action",3,((e,t,n)=>{const i=p();if(i===f()&&n)return n;if(i===h()&&!0!==n)return n;const r=v.findIndex((e=>e.value===t));let o=n;if(r>-1){o=!o;const e=p()+(o?1:-1);return f()&&e<f()&&m(e,r),h()&&h()<e&&y(e,r),o}return o})),c=er(t,"onclick",3,(()=>!0)),d=er(t,"onchange",3,(()=>!0)),f=er(t,"min",3,0),h=er(t,"max",3,100),v=Oe(r());function g(){r(j(v));const e=r().filter((e=>e.selected)),t=e.map((e=>e.id)),n=t.length;d()&&d()({values:r(),selected:e,selectedIds:t,selectedCount:n})}function p(){return v.filter((e=>e.selected)).length}function m(e,t){let n=f()-e;if(n){for(let e in v)if(e!==t&&!v[e].selected&&(v[e].selected=!0,i(v[e]),n--,!n))break;g()}}function y(e,t){let n=e-h();if(n){for(let e in v)if(e!==t&&v[e].selected&&(v[e].selected=!1,i(v[e]),n--,!n))break;g()}}tr((()=>{const e=p();f()&&e<f()&&m(e,-1)}));var b=Ro();return ii(b,23,(()=>v),(e=>e.id),((e,t,i)=>{var r=Bn();const o=De(l);fi(Fe(r),(()=>cn(o)),((e,r)=>{ji(r(e,Xi({get action(){return u()}},(()=>cn(t)),buttonProps,{get onclick(){return c()},onchange:g,get selected(){return v[cn(i)].selected},set selected(e){v[cn(i)].selected=e}})),((e,t)=>n[t.id]=e),(e=>n?.[e.id]),(()=>[cn(t)]))})),Vn(e,r)})),ce(b),Xe((()=>Oi(b,`buttons has-addons ${(o()?"is-centered":"")??""} ${(s()?"is-right":"")??""} ${a()??""}`))),Vn(e,b),mn({selectAll:function(){v.forEach(((e,t)=>{v[t].selected=!0,i(e)})),g()},deselectAll:function(){v.forEach(((e,t)=>{v[t].selected=!1,i(e)})),g()},addToHistory:function(e){},countSelected:p,toggleFirstSuited:function(e){const t=v.findIndex((t=>!e==t.selected));t>-1&&(v[t].selected=e,i(v[t]))},selectUpToMin:m,deselectDownToMin:y,updateUI:function(){Object.keys(n).forEach((e=>{n[e]&&n[e].updateUI&&n[e].updateUI()}))}})}var Wo=Object.freeze({__proto__:null,UIButton:No,UIButtonSwitch:Po,UIButtons:Uo,UIButtonsRow:Do,UIButtonsSwitchers:jo});const zo="ok",Bo={SHORT:500,NORMAL:1500,LONG:5e3},Vo=1500;var qo=Wn('<div class="field has-addons"><!></div> <div class="control"><!></div>',1);var Ho=Wn('<div class="control"><!></div>');var Go=Wn("<progress> </progress>");var Ko=Wn("<div><!> <!> <!></div>");var Jo=Wn("<!> <!>",1);function Yo(e,t){pn(t,!0);const n=Hi(),i=()=>qi(Mr,"$LOCALE",n);let r=er(t,"id",19,(()=>`title-${Math.random()}`)),o=er(t,"title",3,""),s=er(t,"size",3,1),a=er(t,"spaced",3,!1),l=er(t,"align",3,"left");let u=De((()=>t.subsize?t.subsize:parseInt(s())<6?parseInt(s())+1:s())),c=De((()=>a()?"is-spaced":"")),d=De((()=>`<h${s()} id="${r()}" style="text-align: ${l()};" class="title ${cn(c)} is-${s()}">${i()[o()]}</h${s()}>`)),f=De((()=>`<h${cn(u)} id="${r()}" style="text-align: ${l()};" class="subtitle is-${cn(u)}">${i()[t.subtitle]}</h${cn(u)}>`));var h=Jo(),v=Fe(h),g=e=>{var t=Bn();ui(Fe(t),(()=>cn(d))),Vn(e,t)};Zn(v,(e=>{o()&&e(g)}));var p=Ue(v,2),m=e=>{var t=Bn();ui(Fe(t),(()=>cn(f))),Vn(e,t)};return Zn(p,(e=>{t.subtitle&&e(m)})),Vn(e,h),mn({scrollToTop:(e=_r.SCROLL_OPTIONS)=>{setTimeout((()=>{document.getElementById(r()).scrollIntoView(e)}),100)}})}var Qo=Wn("<span> </span>"),Xo=Wn("<p><!></p>");function Zo(e,t){pn(t,!0);const n=Hi();let i=er(t,"errors",19,(()=>[])),r=er(t,"show",3,!1),o=er(t,"class",3,""),s=er(t,"id",3,"errors-list");var a=Bn(),l=Fe(a),u=e=>{var t=Xo(),a=Ne(t),l=e=>{var t=Bn();ii(Fe(t),17,i,ni,((e,t)=>{var i=Qo(),r=Ne(i,!0);ce(i),Xe((()=>Gn(r,qi(Mr,"$LOCALE",n)[cn(t)]))),Vn(e,i)})),Vn(e,t)},u=e=>{Vn(e,zn(" "))};Zn(a,(e=>{r()?e(l):e(u,!1)})),ce(t),Xe((()=>{Oi(t,`help ${o()??""}`),pi(t,"id",s())})),Vn(e,t)};Zn(l,(e=>{Array.isArray(i())&&i().length&&e(u)})),Vn(e,a),mn()}var es=Wn('<article class="media"><figure class="media-left"><p class="image is-32x32"><img></p></figure> <div class="media-content"><div class="content"><p><strong> </strong> <small>@</small> <strong> </strong></p></div></div></article>');var ts=Wn("<p> </p>"),ns=Wn("<input>");function is(e,t){pn(t,!0);const n=Hi();let i=er(t,"value",15,""),r=er(t,"placeholder",3,""),o=er(t,"fieldname",3,"textfield"),s=er(t,"required",3,!0),a=er(t,"disabled",3,!1),l=er(t,"readonly",3,!1),u=er(t,"valid",3,!0),c=er(t,"class",3,""),d=er(t,"onchange",3,(()=>!0)),f=Ki(t,["$$slots","$$events","$$legacy","value","placeholder","fieldname","required","disabled","readonly","valid","class","onchange"]),h=De((()=>!u()));const v=_r.onInput(o(),d());var g=Bn(),p=Fe(g),m=e=>{var t=ts(),n=Ne(t,!0);ce(t),Xe((()=>Gn(n,i()))),Vn(e,t)},y=e=>{var t=ns();let u;vi(t),Xe((()=>u=mi(t,u,{id:`form-field-textfield-${o()??""}`,class:`input ${c()??""}`,type:"text",name:o(),invalid:cn(h),disabled:a(),required:s(),readonly:l(),placeholder:qi(Mr,"$LOCALE",n)[r()],autocomplete:o(),onchange:v,oninput:v,"aria-controls":`input-field-helper-${o()??""}`,"aria-describedby":`input-field-helper-${o()??""}`,...f}))),Ni(t,i),Vn(e,t)};Zn(p,(e=>{l()?e(m):e(y,!1)})),Vn(e,g),mn()}var rs=Wn('<div class="columns"><div class="column"><div class="field"><!></div></div></div>');function os(e,t){pn(t,!0);const n=Hi(),i=ir();let r=er(t,"placeholder",19,(()=>qi(Mr,"$LOCALE",n)["not-node:field_search_placeholder"])),o=er(t,"term",15,"");var s=rs(),a=Ne(s),l=Ne(a);is(Ne(l),{get placeholder(){return r()},fieldname:"searchTermInput",icon:"magnifying-glass",get value(){return o()},set value(e){o(e)},$$events:{change:function({detail:e}){i("termChange",e)}}}),ce(l),ce(a),ce(s),Vn(e,s),mn()}var ss=Object.freeze({__proto__:null,UIBoolean:lo,UIBooleanLabeled:function(e,t){pn(t,!0);const n=Hi();let i=er(t,"inverted",3,!1);var r=uo(),o=Ne(r);lo(Ue(o),{get value(){return t.value},get inverted(){return i()}}),ce(r),Xe((()=>Gn(o,`${qi(Mr,"$LOCALE",n)[t.label]??""}: `))),Vn(e,r),mn()},UIBooleans:co,UICensored:function(e,t){let n=er(t,"hidden",15,!0),i=er(t,"showable",3,!0),r=er(t,"copiable",3,!0),o=er(t,"copyIcon",3,"copy"),s=er(t,"showIcon",3,"eye"),a=er(t,"hideIcon",3,"eye-slash"),l=er(t,"maxLength",3,20),u=er(t,"shadowClass",3,"has-background-primary-90"),c=er(t,"tooltip",3,!0),d=er(t,"tooltipTTL",3,2e3),f=er(t,"tooltipText",3,"Скопировано в буфер"),h=er(t,"tooltipClass",3,"has-tooltip-info"),v=er(t,"value",3,""),g=H(!1),p=De((()=>c()&&cn(g))),m=H(void 0);var y=po(),b=Fe(y),k=Ne(b,!0);ce(b);var $=Ue(b,2),w=e=>{var t=vo();t.__click=[ho,v,c,g,m,f,d],t.__keydown=[ho,v,c,g,m,f,d];var n=Ne(t);ce(t),ji(t,(e=>Q(m,e)),(()=>cn(m))),Xe((()=>{Oi(t,"icon is-small is-right is-clickable "+(cn(p)?` ${h()} `:"")+" is-vertical-middle"),Oi(n,`fas fa-${o()??""}`)})),Vn(e,t)};Zn($,(e=>{r()&&e(w)}));var O=Ue($,2),I=e=>{var t=go();t.__click=[fo,n],t.__keydown=[fo,n];var i=Ne(t);ce(t),Xe((()=>Oi(i,`fas fa-${(n()?s():a())??""}`))),Vn(e,t)};Zn(O,(e=>{i()&&e(I)})),Xe((()=>{Oi(b,(n()?"is-censored "+u():"")+" is-vertical-middle "),pi(b,"style",`display:inline-block; width: ${l()}rem; height: var(--bulma-size-medium); overflow-x:hidden;`),Gn(k,n()?"":v())})),Vn(e,y)},UIErrorsList:Zo,UIIndicator:yo,UILoader:ko,UIProgress:function(e,t){let n=er(t,"max",3,100),i=er(t,"color",3,""),r=er(t,"size",3,""),o=er(t,"class",3,"");var s=Go(),a=Ne(s);ce(s),Xe((()=>{Oi(s,`\n  progress\n  ${o()??""}\n  ${(i()?`is-${i()}`:"")??""}\n  ${(r()?`is-${r()}`:"")??""}`),function(e,t){var n=e.__attributes??={};n.value!==(n.value=t??void 0)&&(e.value!==t||0===t&&"PROGRESS"===e.nodeName)&&(e.value=t)}(s,t.value),pi(s,"max",n()),Gn(a,`${t.value??""}%`)})),Vn(e,s)},UISelectFromModelOnDemandInline:function(e,t){pn(t,!0);let n,i=er(t,"variants",31,(()=>Oe([]))),r=er(t,"placeholder",3,"empty select item"),o=er(t,"fieldname",3,"selectFromModel"),s=er(t,"modelName",3,""),a=er(t,"actionName",3,""),l=er(t,"actionFilter",19,(()=>({}))),u=er(t,"actionSorter",19,(()=>({}))),c=er(t,"actionPager",19,(()=>({}))),d=er(t,"actionSearch",3,void 0),f=er(t,"optionId",3,":_id"),h=er(t,"optionTitle",3,":title"),v=er(t,"required",3,!0),g=er(t,"readonly",3,!1),p=er(t,"multiple",3,!1),m=er(t,"size",3,8),y=er(t,"valid",3,!0),b=er(t,"onreject",3,(()=>!1)),k=er(t,"onresolve",3,(()=>!0)),$=er(t,"onerror",3,(()=>!0)),w=De((()=>!0)),O=H("hidden"),I=[];function _({value:e}){n=I.find((t=>Jr.get(f(),t)===e))}tr((async()=>{if(s()&&a()&&l()){const e=to.getApp().getModel(s()).setFilter(l()).setSorter(u()).setPager(c()).setSearch(d()),t=await e["$"+a()]();t.status===zo?(I=t.result,i(I.map((e=>({id:Jr.get(f(),e),title:Jr.get(h(),e)}))))):$()(t.errors||[t.message])}}));const A={add:{color:"primary",icon:"plus",action(){Q(O,"show")}},resolve:{icon:"check",color:"primary",action(){Q(O,"hidden"),k()(n)}},reject:{icon:"close",color:"danger",action(){Q(O,"hidden"),b()()}}};var C=Bn(),S=Fe(C),E=e=>{No(e,Xi((()=>A.add)))},L=e=>{var n=Bn(),s=Fe(n),a=e=>{var n=qo(),s=Fe(n);Ao(Ne(s),{get value(){return t.value},get variants(){return i()},get placeholder(){return r()},get fieldname(){return o()},get required(){return v()},get readonly(){return g()},get disabled(){return cn(w)},get multiple(){return p()},get size(){return m()},get valid(){return y()},onchange:_}),ce(s);var a=Ue(s,2),l=Ne(a),u=De((()=>[A.resolve,A.reject]));Uo(l,{get values(){return cn(u)}}),ce(a),Vn(e,n)};Zn(s,(e=>{"show"==cn(O)&&e(a)}),!0),Vn(e,n)};Zn(S,(e=>{"hidden"===cn(O)?e(E):e(L,!1)})),Vn(e,C),mn()},UISelectFromModelWithSearchModal:function(e,t){pn(t,!0);let n=er(t,"value",15),i=er(t,"icon",3,!1),r=er(t,"fieldname",3,""),o=er(t,"readonly",3,!1),s=er(t,"serviceName",3,""),a=er(t,"serviceOpenSelectorMethod",3,"openSelector"),l=er(t,"serviceLoadDataMethod",3,"loadData"),u=er(t,"modelData",15,null),c=er(t,"loading",15,!1),d=er(t,"selectedModelTitleFormatter",3,(e=>`${e._id}`)),f=er(t,"loadingLabel",3,"not-node:loading_label"),h=er(t,"isEmptyLabel",3,"not-node:field_value_is_empty_placeholder"),v=er(t,"onchange",3,(()=>!0));function g(){if(!s())throw new Error("serviceName is not set");return to.getApp().getService(s())}function p(){if(!a())throw new Error("serviceOpenSelectorMethod is not set");g()[a()]().then((e=>(n(e._id),u(e),n()))).then((e=>{v()({field:r(),value:e})})).catch((e=>{to.report(e)}))}tr((()=>{!async function(){try{n()&&(c(!0),u(await g()[l()](n())))}catch(e){to.report(e)}finally{c(!1)}}()}));const m=[{id:1,action:p,icon:i(),color:"warning"},{id:2,action:function(){n(void 0),u(null),v()({field:r(),value:n()})},icon:"times",color:"danger"}];function y(){return c()?{disabled:!0,loading:c(),title:f()}:u()?{disabled:o(),action:p,title:d()(u())}:{disabled:!0,title:h()}}let b=H(Oe([]));run((()=>{n()?Q(b,Oe([y(),...o()?[]:m])):Q(b,Oe([y(),...o()?[]:[m[0]]]))}));var k=Ho();Uo(Ne(k),{get values(){return cn(b)},classes:"is-no-flex-wrap"}),ce(k),Vn(e,k),mn()},UIShowOneFromList:function(e,t){pn(t,!0);const n=e=>e[o()]===t.id;let i=er(t,"values",19,(()=>[])),r=er(t,"active",15),o=er(t,"idFieldName",3,"_id"),s=er(t,"filter",3,n);Ge((()=>{r(Array.isArray(i())&&i().length&&void 0!==t.id?i().find(s()||n):void 0)}));var a=Bn(),l=Fe(a),u=e=>{var n=Bn();fi(Fe(n),(()=>t.UIComponent),((e,t)=>{t(e,Xi(r))})),Vn(e,n)},c=e=>{var n=Bn(),i=Fe(n),r=e=>{var n=Bn();fi(Fe(n),(()=>t.UIPlaceholder),((e,t)=>{t(e,{})})),Vn(e,n)};Zn(i,(e=>{t.UIPlaceholder&&e(r)}),!0),Vn(e,n)};Zn(l,(e=>{r()?e(u):e(c,!1)})),Vn(e,a),mn()},UISimpleSearchInput:os,UITag:ao,UITagValue:function(e,t){pn(t,!0);let n=er(t,"id",3,"taggedValueId"),i=er(t,"actions",19,(()=>[])),r=er(t,"class",3,""),o=er(t,"actionsGroupContructor",3,Uo),s=er(t,"actionsGroupProps",19,(()=>({}))),a=er(t,"readonly",3,!1);var l=Ko(),u=Ne(l),c=e=>{ao(e,Xi((()=>t.title)))};Zn(u,(e=>{t.title&&e(c)}));var d=Ue(u,2),f=e=>{ao(e,Xi((()=>t.value)))};Zn(d,(e=>{t.value&&e(f)}));var h=Ue(d,2),v=e=>{var t=Bn();const n=De(o);fi(Fe(t),(()=>cn(n)),((e,t)=>{t(e,Xi({get values(){return i()}},s))})),Vn(e,t)};Zn(h,(e=>{!a()&&i()&&i().length&&e(v)})),ce(l),Xe((()=>{Oi(l,`tags has-addons ${r()??""}`),pi(l,"id",n())})),Vn(e,l),mn()},UITitle:Yo,UIUserCard:function(e,t){pn(t,!0);let n=er(t,"id",3,"userCard"),i=er(t,"image",3,"https://bulma.io/images/placeholders/32x32.png"),r=er(t,"username",15,"John Doe"),o=er(t,"role",15,"admin"),s=er(t,"events",31,(()=>Oe({}))),a=er(t,"register",19,(()=>to.registerWidgetEvents)),l=er(t,"onUpdate",3,(e=>{Object.hasOwn(e,"username")&&r(e.username),Object.hasOwn(e,"role")&&o(e.role)}));function u(){return`usercard-${n()}`}function c(){return`${u()}:update`}tr((()=>{Object.hasOwn(s(),c())||s(s()[c()]=l(),!0),a()(s())}));var d=es();Xe((()=>pi(d,"id",u())));var f=Ne(d),h=Ne(f),v=Ne(h);ce(h),ce(f);var g=Ue(f,2),p=Ne(g),m=Ne(p),y=Ne(m),b=Ne(y,!0);ce(y);var k=Ue(y,4),$=Ne(k,!0);ce(k),ce(m),ce(p),ce(g),ce(d),Xe((()=>{pi(v,"src",i()),pi(v,"alt",r()),Gn(b,r()),Gn($,o())})),Vn(e,d),mn()}});function as(e,t){pn(t,!0);let n=er(t,"id",3,"generic-field"),i=H(Oe([])),r=H(!0);Ke((()=>{Q(i,Oe([].concat(t.errors?t.errors:[],t.formErrors?t.formErrors:[]))),Q(r,Oe(!(t.validated&&t.valid)&&t.inputStarted))})),Zo(e,{get show(){return cn(r)},get errors(){return cn(i)},get classes(){return""},get id(){return n()}}),mn()}var ls=Wn("<label><!></label>");function us(e,t){pn(t,!0);const n=Hi();let i=er(t,"label",3,"label"),r=er(t,"class",3,"label"),o=er(t,"disabled",3,!1);var s=ls(),a=Ne(s),l=e=>{var n=Bn();di(Fe(n),(()=>t.children)),Vn(e,n)},u=e=>{var t=zn();Xe((()=>Gn(t,qi(Mr,"$LOCALE",n)[i()]))),Vn(e,t)};Zn(a,(e=>{t.children?e(l):e(u,!1)})),ce(s),Xe((()=>{s.disabled=o(),Oi(s,r()),pi(s,"for",t.for)})),Vn(e,s),mn()}var cs=Wn('<span class="is-relative" style="display: inline-block; width: fit-content; height: fit-content; "><!> <!></span>');var ds=Wn("<div><!></div>");var fs=Wn("<span><span><i></i> <span> </span></span></span>"),hs=Wn("<span><i></i></span>");function vs(e,t){pn(t,!0);const n=Hi();let i=er(t,"title",3,""),r=er(t,"font",3,""),o=er(t,"side",3,""),s=er(t,"size",3,""),a=er(t,"pointable",3,!1);var l=Bn(),u=Fe(l),c=e=>{var t=fs(),o=Ne(t),l=Ne(o),u=Ue(l,2),c=Ne(u,!0);ce(u),ce(o),ce(t),Xe((()=>{Oi(t,`icon-text ${(a()?"is-clickable":"")??""}`),Oi(o,`icon ${(s()?`is-${s()}`:"")??""}`),Oi(l,`is-title-icon fas\n      fa-${r()??""}\n      ${("medium"==s()?"fa-lg":"")??""}\n      ${("large"==s()?"fa-2x":"")??""}\n      `),Gn(c,qi(Mr,"$LOCALE",n)[i()])})),Vn(e,t)},d=e=>{var t=hs(),n=Ne(t);ce(t),Xe((()=>{Oi(t,`\n        ${(a()?"is-clickable":"")??""}\n        ${(o()?`is-${o()}`:"")??""}\n        icon ${(s()?`is-${s()}`:"")??""} ${("medium"==s()?"fa-lg":"")??""}\n${("large"==s()?"fa-2x":"")??""}`),Oi(n,`fas fa-${r()??""}`)})),Vn(e,t)};Zn(u,(e=>{i()?e(c):e(d,!1)})),Vn(e,l),mn()}var gs=Wn('<span class="icon"><!></span>'),ps=Wn("<figure><img></figure>");function ms(e,t){let n=er(t,"title",3,""),i=er(t,"size",3,""),r=er(t,"font",3,""),o=er(t,"svg",3,""),s=er(t,"src",3,"");var a=Bn(),l=Fe(a),u=e=>{vs(e,{get font(){return r()},get size(){return i()},get title(){return n()}})},c=e=>{var i=Bn(),r=Fe(i),a=e=>{var t=gs();ui(Ne(t),o),ce(t),Vn(e,t)},l=e=>{var i=Bn(),r=Fe(i),o=e=>{var i=ps(),r=Ne(i);ce(i),Xe((()=>{Oi(i,`image ${(t.width&&t.height?`is-${t.width}x${t.height}`:"")??""} `),pi(r,"src",s()),pi(r,"title",n()),pi(r,"alt",n()),pi(r,"width",t.width),pi(r,"height",t.height)})),Vn(e,i)};Zn(r,(e=>{s()&&e(o)}),!0),Vn(e,i)};Zn(r,(e=>{o()?e(a):e(l,!1)}),!0),Vn(e,i)};Zn(l,(e=>{r()?e(u):e(c,!1)})),Vn(e,a)}var ys=Object.freeze({__proto__:null,UIIcon:ms,UIIconButtonWithTag:function(e,t){pn(t,!0);let n=er(t,"button",19,(()=>({}))),i=er(t,"tag",19,(()=>({}))),r=H(""),o=H(Oe({}));function s(){t.bottom||t.top||Q(r,cn(r)+" is-vertical-centered")}function a(){t.right||t.left||Q(r,cn(r)+" is-horizontal-centered")}tr((()=>{t.left&&(Q(r,cn(r)+" is-sided-left"),cn(o)["--siding-left-size"]=t.left,s()),t.right&&(Q(r,cn(r)+" is-sided-right"),cn(o)["--siding-right-size"]=t.right,s()),t.top&&(Q(r,cn(r)+" is-sided-top"),cn(o)["--siding-top-size"]=t.top,a()),t.bottom&&(Q(r,cn(r)+" is-sided-bottom"),cn(o)["--siding-bottom-size"]=t.bottom,a()),Q(o,Oe(cn(o)))}));var l=cs(),u=Ne(l);No(u,Xi(n)),ao(Ue(u,2),Xi(i,{get class(){return`is-padded-small is-sided ${cn(r)??""}`},get vars(){return cn(o)}})),ce(l),Vn(e,l),mn()},UIIconFloating:function(e,t){pn(t,!0);let n=er(t,"trigger",19,(()=>({title:"Click me!",icon:"plus",color:"primary",size:"medium",onclick:()=>!0}))),i=er(t,"top",3,"2em"),r=er(t,"left",3,"2em"),o=er(t,"class",3,""),s=H("");tr((()=>{Q(s,""),i()&&Q(s,cn(s)+`top: ${i()};`),r()&&Q(s,cn(s)+`left: ${r()};`),t.right&&Q(s,cn(s)+`right: ${t.right};`),t.bottom&&Q(s,cn(s)+`bottom: ${t.bottom};`)}));var a=ds();No(Ne(a),Xi(n)),ce(a),Xe((()=>{Oi(a,`is-absolute ${o()??""}`),pi(a,"style",cn(s))})),Vn(e,a),mn()},UIIconFont:vs});function bs(e,t){let n=er(t,"side",3,"right"),i=er(t,"size",3,"small");var r=Bn(),o=Fe(r),s=e=>{var r=De((()=>t.valid?"check":"exclamation-triangle"));vs(e,{get font(){return cn(r)},get side(){return n()},get size(){return i()}})};Zn(o,(e=>{!0===t.validated&&e(s)})),Vn(e,r)}var ks=Wn("<!> <!> <!>",1);function $s(e,t){const n=e=>{var n=ks(),r=Fe(n);fi(r,(()=>t.UIInput),((e,n)=>{n(e,Xi({get fieldtype(){return t.fieldtype},get fieldname(){return t.fieldname},get valid(){return s()},get disabled(){return t.disabled},get readonly(){return t.readonly}},(()=>l),{get value(){return i()},set value(e){i(e)}}))}));var u=Ue(r,2),c=e=>{vs(e,{get font(){return o()},side:"left",size:"small"})};Zn(u,(e=>{o()&&e(c)}));var d=Ue(u,2),f=e=>{bs(e,{get validated(){return a()},get valid(){return s()}})};Zn(d,(e=>{t.readonly||e(f)})),Vn(e,n)};let i=er(t,"value",15,""),r=er(t,"fieldnamePrefix",3,"form-field-"),o=er(t,"icon",3,!1),s=er(t,"valid",3,!0),a=er(t,"validated",3,!1),l=Ki(t,["$$slots","$$events","$$legacy","value","disabled","readonly","UIInput","label","fieldtype","fieldname","fieldnamePrefix","icon","valid","validated"]);var u=Bn(),c=Fe(u),d=e=>{us(e,{get class(){return t.fieldtype},get disabled(){return t.disabled},get for(){return`${r()??""}${t.fieldtype??""}-${t.fieldname??""}`},children:(e,t)=>{n(e)},$$slots:{default:!0}})},f=e=>{n(e)};Zn(c,(e=>{t.label?e(d):e(f,!1)})),Vn(e,u)}var ws=Wn("<div><!></div>");function Os(e,t){pn(t,!0);let n=er(t,"class",3,"");var i=ws();di(Ne(i),(()=>t.children??c)),ce(i),Xe((()=>Oi(i,`control ${n()??""}`))),Vn(e,i),mn()}var Is=Wn("<!> <!>",1);var _s=Object.freeze({__proto__:null,UIFormControl:function(e,t){let n=er(t,"value",15,""),i=er(t,"inputStarted",3,!1),r=er(t,"placeholder",3,""),o=er(t,"fieldnamePrefix",3,"form-field-"),s=er(t,"icon",3,!1),a=er(t,"required",3,!0),l=er(t,"readonly",3,!1),u=er(t,"disabled",3,!1),c=er(t,"valid",3,!0),d=er(t,"validated",3,!1),f=er(t,"errors",3,!1),h=er(t,"onchange",3,(()=>!0)),v=er(t,"onerror",3,(()=>!0)),g=er(t,"formErrors",3,!1),p=Ki(t,["$$slots","$$events","$$legacy","value","UIInput","inputStarted","label","placeholder","fieldtype","fieldname","fieldnamePrefix","icon","required","readonly","disabled","valid","validated","errors","onchange","onerror","formErrors"]),m=De((()=>(s()?" has-icons-left ":"")+" has-icons-right "));var y=Is(),b=Fe(y);Os(b,{get class(){return cn(m)},children:(e,i)=>{$s(e,Xi({get UIInput(){return t.UIInput},get label(){return t.label},get placeholder(){return r()},get fieldtype(){return t.fieldtype},get fieldname(){return t.fieldname},get fieldnamePrefix(){return o()},get icon(){return s()},get required(){return a()},get readonly(){return l()},get disabled(){return u()},get valid(){return c()},get onchange(){return h()},get onerror(){return v()}},(()=>p),{get value(){return n()},set value(e){n(e)}}))},$$slots:{default:!0}}),as(Ue(b,2),{get inputStarted(){return i()},get validated(){return d()},get valid(){return c()},get errors(){return f()},get formErrors(){return g()},get id(){return`input-field-helper-${t.fieldname??""}`}}),Vn(e,y)},UIFormInput:$s,UIFormInputErrors:as,UIValidatedIcon:bs}),As=Wn("<figure><img></figure>"),Cs=Wn("<a><!></a>");function Ss(e,t){const n=e=>{var n=As();const c=De((()=>`image ${a()??""} ${(t.width||t.height?"":isNaN(r())?`is-${r()}`:`is-${r()}x${r()}`)??""}`));var d=Ne(n);d.__click=function(...e){l()?.apply(this,e)},d.__keyup=function(...e){u()?.apply(this,e)},ce(n),Xe((()=>{Oi(n,cn(c)),pi(n,"style",(t.width?`width: ${t.width};`:"")+(t.height?`height: ${t.height};`:"")),Ii(n,"is-contained",o()),Ii(n,"is-covered",s()),Ii(n,"is-clickable",l()&&!1!==t.pointable||t.pointable),pi(d,"alt",t.alt||t.title),pi(d,"title",t.title),pi(d,"src",t.url),pi(d,"crossorigin",i())})),Vn(e,n)};let i=er(t,"cors",3,"anonymous"),r=er(t,"size",3,64),o=er(t,"contained",3,!1),s=er(t,"covered",3,!1),a=er(t,"class",3,""),l=er(t,"onclick",3,void 0),u=er(t,"onkeyup",3,void 0);var c=Bn(),d=Fe(c),f=e=>{var i=Cs();i.__click=function(...e){l()?.apply(this,e)};var r=Ne(i);n(r),ce(i),Xe((()=>{pi(i,"href",t.urlFull),pi(i,"title",t.title||t.alt)})),Vn(e,i)},h=e=>{n(e)};Zn(d,(e=>{t.urlFull?e(f):e(h,!1)})),Vn(e,c)}function Es(e,t){let n=er(t,"values",19,(()=>[])),i=Ki(t,["$$slots","$$events","$$legacy","values"]);var r=Bn();ii(Fe(r),17,n,(e=>e.url),((e,t)=>{Ss(e,Xi((()=>cn(t)),(()=>i)))})),Vn(e,r)}Dn(["click","keyup"]);var Ls=Object.freeze({__proto__:null,UIImage:Ss,UIImages:Es});function Ts(e){const t=e-1;return t*t*t+1}function xs(e,{from:t,to:n},i={}){var r=getComputedStyle(e),o=function(e){if("currentCSSZoom"in e)return e.currentCSSZoom;var t=e,n=1;for(;null!==t;)n*=+getComputedStyle(t).zoom,t=t.parentElement;return n}(e),s="none"===r.transform?"":r.transform,[a,l]=r.transformOrigin.split(" ").map(parseFloat),u=t.width/n.width,c=t.height/n.height,d=(t.left+u*a-(n.left+a))/o,f=(t.top+c*l-(n.top+l))/o,{delay:h=0,duration:v=e=>120*Math.sqrt(e),easing:g=Ts}=i;return{delay:h,duration:"function"==typeof v?v(Math.sqrt(d*d+f*f)):v,easing:g,css:(e,t)=>`transform: ${s} scale(${e+t*u}, ${e+t*c}) translate(${t*d}px, ${t*f}px);`}}N=!0;const Ns=e=>e;function Fs(e,{delay:t=0,duration:n=400,easing:i=Ns}={}){const r=+getComputedStyle(e).opacity;return{delay:t,duration:n,easing:i,css:e=>"opacity: "+e*r}}var Us=Wn('<option selected class="svelte-75ckfb"> </option>'),Ms=Wn('<option selected class="svelte-75ckfb"> </option>'),Ds=Wn('<div class="tags has-addons svelte-75ckfb"><span class="tag svelte-75ckfb"> </span> <span class="tag is-delete svelte-75ckfb"></span></div>'),Ps=Wn('<div class="svelte-75ckfb"><!></div>'),Rs=Wn('<span class="autocomplete-clear-button svelte-75ckfb"><!></span>'),js=Wn('<div class="autocomplete-list-item svelte-75ckfb"><!></div>'),Ws=Wn('<div class="autocomplete-list-item-no-results svelte-75ckfb"> </div>'),zs=Wn("<!> <!> <!>",1),Bs=Wn('<div class="autocomplete-list-item-loading svelte-75ckfb"><!></div>'),Vs=Wn('<div class="autocomplete-list-item-create svelte-75ckfb"><!></div>'),qs=Wn('<div class="autocomplete-list-item-no-results svelte-75ckfb"><!></div>'),Hs=Wn('<div><select class="svelte-75ckfb"><!></select> <div class="input-container svelte-75ckfb"><!> <input> <!></div> <div><!></div></div>');function Gs(e,t){const n=Yi(t,["children","$$slots","$$events","$$legacy"]),i=Yi(n,["highlightFilter","items","searchFunction","labelFieldName","keywordsFieldName","valueFieldName","labelFunction","keywordsFunction","valueFunction","keywordsCleanFunction","textCleanFunction","beforeChange","onChange","onFocus","onBlur","onCreate","selectFirstIfEmpty","minCharactersToSearch","maxItemsToShowInList","multiple","create","ignoreAccents","matchAllKeywords","sortByMatchedKeywords","itemFilterFunction","itemSortFunction","lock","delay","localFiltering","localSorting","cleanUserText","lowercaseKeywords","closeOnBlur","orderableSelection","hideArrow","showClear","clearText","showLoadingIndicator","noResultsText","loadingText","moreItemsText","createText","placeholder","className","inputClassName","inputId","name","selectName","selectId","title","html5autocomplete","autocompleteOffValue","readonly","dropdownClassName","disabled","noInputStyles","required","debug","tabindex","selectedItem","value","highlightedItem","text"]);pn(t,!1);const o=K(),s=K(),a=K(),l=K();let u=er(t,"items",28,(()=>[])),c=er(t,"searchFunction",8,!1),h=er(t,"labelFieldName",8,void 0),v=er(t,"keywordsFieldName",24,h),g=er(t,"valueFieldName",8,void 0),m=er(t,"labelFunction",8,(function(e){return null==e?"":h()?e[h()]:e})),b=er(t,"keywordsFunction",8,(function(e){return null==e?"":v()?e[v()]:m()(e)})),k=er(t,"valueFunction",8,(function(e,t=!1){return null==e?e:!T()||t?g()?e[g()]:e:e.map((e=>g()?e[g()]:e))})),$=er(t,"keywordsCleanFunction",8,(function(e){return e})),w=er(t,"textCleanFunction",8,(function(e){return e})),O=er(t,"beforeChange",8,(function(e,t){return!0})),I=er(t,"onChange",8,(function(e){})),_=er(t,"onFocus",8,(function(){})),A=er(t,"onBlur",8,(function(){})),C=er(t,"onCreate",8,(function(e){be()&&console.log("onCreate: "+e)})),S=er(t,"selectFirstIfEmpty",8,!1),E=er(t,"minCharactersToSearch",8,1),L=er(t,"maxItemsToShowInList",8,0),T=er(t,"multiple",8,!1),x=er(t,"create",8,!1),N=er(t,"ignoreAccents",8,!0),F=er(t,"matchAllKeywords",8,!0),U=er(t,"sortByMatchedKeywords",8,!1),M=er(t,"itemFilterFunction",8,void 0),D=er(t,"itemSortFunction",8,void 0),P=er(t,"lock",8,!1),R=er(t,"delay",8,0),j=er(t,"localFiltering",8,!0),W=er(t,"localSorting",8,!0),z=er(t,"cleanUserText",8,!0),B=er(t,"lowercaseKeywords",8,!0),V=er(t,"closeOnBlur",8,!1),q=er(t,"orderableSelection",8,!1),H=er(t,"hideArrow",8,!1),G=er(t,"showClear",8,!1),J=er(t,"clearText",8,"&#10006;"),X=er(t,"showLoadingIndicator",8,!1),Z=er(t,"noResultsText",8,"No results found"),ee=er(t,"loadingText",8,"Loading results..."),te=er(t,"moreItemsText",8,"items not shown"),ne=er(t,"createText",8,"Not found, add anyway?"),ie=er(t,"placeholder",8,void 0),re=er(t,"className",8,void 0),oe=er(t,"inputClassName",8,void 0),se=er(t,"inputId",8,void 0),ae=er(t,"name",8,void 0),le=er(t,"selectName",8,void 0),ue=er(t,"selectId",8,void 0),de=er(t,"title",8,void 0),fe=er(t,"html5autocomplete",8,void 0),he=er(t,"autocompleteOffValue",8,"off"),ve=er(t,"readonly",8,void 0),ge=er(t,"dropdownClassName",8,void 0),pe=er(t,"disabled",8,!1),me=er(t,"noInputStyles",8,!1),ye=er(t,"required",8,null),be=er(t,"debug",8,!1),ke=er(t,"tabindex",8,0),$e=er(t,"selectedItem",28,(()=>T()?[]:void 0)),we=er(t,"value",12,void 0),Oe=er(t,"highlightedItem",12,void 0);const Ie="sautocomplete-"+Math.floor(1e3*Math.random());let _e,Ce=K(),Se=K(),Ee=K(),Le=K(!1),Te=K(!1),xe=K(-1),Me=er(t,"text",12,void 0),Re=K(0),je=K(),We=[],ze=0,Be=0,Ve=K(!1);function qe(e,t){let n=function(e,t){if("function"!=typeof e)return void console.error("Not a function: "+e+", argument: "+t);let n;try{n=e(t)}catch(n){console.warn("Error executing Autocomplete function on value: "+t+" function: "+e)}return n}(e,t);return null==n&&(n=""),"string"!=typeof n&&(n=n.toString()),n}function Je(e){return qe(m(),e)}function Ze(e){const t=qe(b(),e);let n=qe($(),t);return n=B()?n.toLowerCase().trim():n,N()&&(n=Ot(n)),be()&&console.log("Extracted keywords: '"+n+"' from item: "+JSON.stringify(e)),n}function et(){let e;be()&&(e="Autocomplete prepare list "+(se()?`(id: ${se()})`:""),console.time(e),console.log("Prepare items to search"),console.log("items: "+JSON.stringify(u()))),Array.isArray(u())||(console.warn("Autocomplete items / search function did not return array but",u()),u([]));const t=u()?u().length:0;We=new Array(t),t>0&&u().forEach(((e,t)=>{const n=function(e){return{keywords:j()?Ze(e):[],label:Je(e),item:e}}(e);void 0===n&&console.log("Undefined item for: ",e),We[t]=n})),Q(je,We),be()&&(console.log(We.length+" items to search"),console.timeEnd(e))}function tt(e,t){if(!e)return 0;const n=e.keywords;let i=0;return t.forEach((e=>{n.includes(e)&&i++})),i}async function nt(){let e;be()&&(e="Autocomplete search "+(se()?`(id: ${se()})`:""),console.time(e),console.log("Searching user entered text: '"+Me()+"'"));let t=function(e){if(null==e)return"";if(!z())return e;const t=e.replace(/[&/\\#,+()$~%.'":*?<>{}]/g," ").trim(),n=qe(w(),t);return B()?n.toLowerCase().trim():n.trim()}(Me());if(E()>1&&t.length<E()&&(t=""),Q(Re,t.length),be()&&console.log("Changed user entered text '"+Me()+"' into '"+t+"'"),""===t&&(c()?(u([]),be()&&console.log("User entered text is empty clear list of items")):(Q(je,We),be()&&console.log("User entered text is empty set the list of items to all items")),kt()))be()&&console.timeEnd(e);else{if(c()){ze+=1;const e=ze;if(Q(Te,!0),"AsyncGeneratorFunction"===c().constructor.name){for await(const n of c()(t,L())){if(e<Be)return!1;e>Be&&u([]),Be=e,u([...u(),...n]),it(t)}Be<e&&(Be=e,u([]),it(t))}else{let n=await c()(t,L());if(e<Be)return!1;Be=e,u(n),it(t)}Q(Te,!1)}else it(t);be()&&(console.timeEnd(e),console.log("Search found "+cn(je).length+" items"))}}function it(e){et();const t=(N()?Ot(e):e).split(/\s+/g).filter((e=>""!==e));let n;j()?(n=M()?We.filter((e=>M()(e.item,t))):We.filter((e=>function(e,t){const n=tt(e,t);return F()?n>=t.length:n>0}(e,t))),W()&&(D()?n=n.sort(((e,n)=>D()(e.item,n.item,t))):U()&&(n=n.sort(((e,n)=>function(e,t,n){return tt(t,n)-tt(e,n)}(e,n,t)))))):n=We;const i=wt(t,"label");return Q(je,n.map(i)),kt(),!0}function rt(e){let t;if(be()&&console.log("createdItem",e),void 0!==e){et(),Q(je,We);let n=pt(e,cn(je));n<=0&&(u([e]),et(),Q(je,We),n=0),n>=0&&(Q(xe,n),t=cn(je)[cn(xe)])}return t}function ot(e){if(be()&&console.log("selectListItem",e),void 0===e&&x()){const t=C()(Me());if(void 0!==t){if("function"==typeof t.then)return t.then((e=>{if(void 0!==e){const t=rt(e);void 0!==t&&ot(t)}})),!0;e=rt(t)}}if(void 0===e)return be()&&console.log("listItem is undefined. Can not select."),!1;if(cn(l))return!0;const t=e.item;return O()($e(),t)&&(T()?$e()?$e().includes(t)?$e($e().filter((e=>e!==t))):$e([...$e(),t]):$e([t]):($e(void 0),$e(t))),!0}function st(){be()&&console.log("selectItem",cn(xe));ot(cn(je)[cn(xe)])?(be()&&console.log("selectListItem true, closing"),yt(),T()&&(Me(""),cn(Ce).focus())):be()&&console.log("selectListItem false, not closing")}function at(){be()&&console.log("up"),mt(),cn(xe)>0&&gn(xe,-1),ut()}function lt(){be()&&console.log("down"),mt(),cn(xe)<cn(je).length-1&&gn(xe),ut()}function ut(){be()&&console.log("highlight");const e=".selected";be()&&console.log("Seaching DOM element: "+e+" in "+cn(Se));const t=cn(Se)&&cn(Se).querySelector(e);t?"function"==typeof t.scrollIntoViewIfNeeded?(be()&&console.log("Scrolling selected item into view"),t.scrollIntoViewIfNeeded()):"function"===t.scrollIntoView?(be()&&console.log("Scrolling selected item into view"),t.scrollIntoView()):be()&&console.warn("Could not scroll selected item into view, scrollIntoViewIfNeeded not supported"):be()&&console.warn("Selected item not found to scroll into view")}function ct(e){be()&&console.log("onListItemClick"),ot(e)&&(yt(),T()&&(Me(""),cn(Ce).focus()))}function dt(e){be()&&console.log("unselectItem",e),$e($e().filter((t=>t!==e))),cn(Ce).focus()}function ft(){nt()&&(Q(xe,0),mt())}function ht(e){be()&&console.log("onEsc"),e.stopPropagation(),cn(Le)&&(cn(Ce).focus(),yt())}function vt(e){be()&&console.log("onBackspace"),dt($e()[$e().length-1])}function gt(){if(be()&&console.log("resetListToAllItemsAndOpen"),c()&&!We.length?nt():Me()||Q(je,We),mt(),$e()){be()&&console.log("Searching currently selected item: "+JSON.stringify($e()));const e=pt($e(),cn(je));e>=0&&(Q(xe,e),ut())}}function pt(e,t){be()&&console.log("Finding index for item",e);let n=-1;for(let i=0;i<t.length;i++){const r=t[i];if(void 0!==r){if(be()&&console.log("Item "+i+": "+JSON.stringify(r)),e===r.item){n=i;break}}else be()&&console.log(`listItem ${i} is undefined. Skipping.`)}return be()&&(n>=0?console.log("Found index for item: "+n):console.warn("Not found index for item: "+e)),n}function mt(){be()&&console.log("open"),cn(l)||bt()||(Q(Ve,!0),Q(Le,!0))}function yt(){be()&&console.log("close"),Q(Le,!1),Q(Te,!1),!Me()&&S()&&(Q(xe,0),st())}function bt(){return E()>0&&cn(Re)<E()&&(c()||cn(Re)>0)}function kt(){return!!bt()&&(yt(),!0)}function $t(){be()&&console.log("clear"),Me(""),$e(T()?[]:void 0),setTimeout((()=>{cn(Ce).focus()}))}function wt(e,t){return n=>{let i=n[t];const r=Object.assign({highlighted:void 0},n);r.highlighted=i;const o=i.toLowerCase(),s=N()?Ot(o):o;if(e&&e.length){const t=[];for(let n=0;n<e.length;n++){let i=e[n];N()&&(i=Ot(i));const r=i.length;let o=0;do{if(o=s.indexOf(i,o),o>=0){let e=o+r;t.push([o,e]),o=e}}while(-1!==o)}if(t.length>0){const e=new Set;for(let n=0;n<t.length;n++){const i=t[n],r=i[0],s=i[1],a=o.substring(r,s);e.add(a)}for(let t of e){if("b"===t)continue;const e=new RegExp("("+t+")","ig"),n=r.highlighted.replace(e,"<b>$1</b>");r.highlighted=n}}}return r}}function Ot(e){return e.normalize("NFD").replace(/[\u0300-\u036f]/g,"")}rr((()=>{cn(Ve)&&function(){const{height:e}=window.visualViewport,{bottom:t,height:n}=cn(Ee).getBoundingClientRect(),{height:i}=cn(Se).getBoundingClientRect();Y(Se,cn(Se).style.top=t+i>e?`-${n+i}px`:"0px")}(),Q(Ve,!1)}));let It=K(!1);function _t(e,t){q()&&(e.preventDefault(),Q(It,t))}function At(e,t){if(q()){e.preventDefault(),Q(It,!1);let n=parseInt(e.dataTransfer.getData("source"));n!=t&&function(e,t){let n=[...$e()];e<t?(n.splice(t+1,0,n[e]),n.splice(e,1)):(n.splice(t,0,n[e]),n.splice(e+1,1));$e(n)}(n,t)}}var Ct;Ye((()=>(yn(u()),yn(c()))),(()=>{u(),c()||et()})),Ye((()=>yn($e())),(()=>{$e(),we(k()($e())),$e()&&!T()&&Me(Je($e())),Q(je,We),I()($e())})),Ye((()=>(cn(je),cn(xe))),(()=>{Oe(cn(je)&&cn(xe)&&cn(xe)>=0&&cn(xe)<cn(je).length?cn(je)[cn(xe)].item:null)})),Ye((()=>(cn(Le),yn(u()),cn(Re))),(()=>{Q(o,cn(Le)&&(u()&&u().length>0||cn(Re)>0))})),Ye((()=>(yn(T()),yn($e()))),(()=>{Q(s,T()&&$e()&&$e().length>0||!T()&&$e())})),Ye((()=>(yn(G()),yn(P()),yn(T()),cn(s))),(()=>{Q(a,G()||(P()||T())&&cn(s))})),Ye((()=>(yn(P()),cn(s))),(()=>{Q(l,P()&&cn(s))})),Ct=Bt,Qe((()=>{if(cn(Ct.l.r2)){for(var e of Ct.l.r1){var t=e.effect;t.f&p&&hn(t,y),Gt(t)&&en(t),e.ran=!1}Ct.l.r2.v=!1}})),function(e=!1){const t=Bt,n=t.l.u;if(!n)return;let i=()=>yn(t.s);if(e){let e=0,n={};const r=De((()=>{let i=!1;const r=t.s;for(const e in r)r[e]!==n[e]&&(n[e]=r[e],i=!0);return i&&e++,e}));i=()=>cn(r)}n.b.length&&Ke((()=>{zi(t,i),f(n.b)})),Ge((()=>{const e=dn((()=>n.m.map(d)));return()=>{for(const t of e)"function"==typeof t&&t()}})),n.a.length&&Ge((()=>{zi(t,i),f(n.a)}))}();var St=Hs();Mn("click",Ae,(function(e){be()&&console.log("onDocumentClick"),e.composedPath().some((e=>e.classList&&e.classList.contains(Ie)))?(be()&&console.log("onDocumentClick inside"),ut()):(be()&&console.log("onDocumentClick outside"),yt())})),Mn("scroll",Ae,(()=>Q(Ve,!0)));var Et=Ne(St),Lt=Ne(Et),Tt=e=>{var t=Us(),n={},i=Ne(t,!0);Xe((()=>Gn(i,Je($e())))),ce(t),Xe((()=>{n!==(n=k()($e(),!0))&&(t.value=null==(t.__value=k()($e(),!0))?"":k()($e(),!0))})),Vn(e,t)},xt=e=>{var t=Bn(),n=Fe(t),i=e=>{var t=Bn();ii(Fe(t),1,$e,ni,((e,t)=>{var n=Ms(),i={},r=Ne(n,!0);Xe((()=>Gn(r,Je(cn(t))))),ce(n),Xe((()=>{i!==(i=k()(cn(t),!0))&&(n.value=null==(n.__value=k()(cn(t),!0))?"":k()(cn(t),!0))})),Vn(e,n)})),Vn(e,t)};Zn(n,(e=>{T()&&cn(s)&&e(i)}),!0),Vn(e,t)};Zn(Lt,(e=>{!T()&&cn(s)?e(Tt):e(xt,!1)})),ce(Et);var Nt=Ue(Et,2),Ft=Ne(Nt),Ut=e=>{var n=Bn();ii(Fe(n),11,$e,(e=>k()(e,!0)),((e,n,i)=>{var r=Ps();pi(r,"draggable",!0),ci(Ne(r),t,"tag",{get label(){return Je(cn(n))},get item(){return cn(n)},unselectItem:dt},(e=>{var t=Ds(),i=Ne(t),r=Ne(i,!0);Xe((()=>Gn(r,Je(cn(n))))),ce(i);var o=Ue(i,2),s=De((()=>dt(cn(n))));ce(t),Mn("click",o,Wi((function(...e){cn(s)?.apply(this,e)}))),Mn("keypress",o,Wi((e=>{"Enter"==e.key&&dt(cn(n))}))),Vn(e,t)})),ce(r),Xe((()=>Ii(r,"is-active",cn(It)===cn(i)))),function(e,t,n){var i,r,o,s=ei,a=null;s.a??={element:e,measure(){i=this.element.getBoundingClientRect()},apply(){if(o?.abort(),r=this.element.getBoundingClientRect(),i.left!==r.left||i.right!==r.right||i.top!==r.top||i.bottom!==r.bottom){const e=t()(this.element,{from:i,to:r},n?.());o=xi(this.element,e,void 0,1,(()=>{o?.abort(),o=void 0}))}},fix(){if(!e.getAnimations().length){var{position:t,width:n,height:r}=getComputedStyle(e);if("absolute"!==t&&"fixed"!==t){var o=e.style;a={position:o.position,width:o.width,height:o.height,transform:o.transform},o.position="absolute",o.width=n,o.height=r;var s=e.getBoundingClientRect();if(i.left!==s.left||i.top!==s.top){var l=`translate(${i.left-s.left}px, ${i.top-s.top}px)`;o.transform=o.transform?`${o.transform} ${l}`:l}}}},unfix(){if(a){var t=e.style;t.position=a.position,t.width=a.width,t.height=a.height,t.transform=a.transform}}},s.a.element=e}(r,(()=>xs),(()=>({duration:200}))),Ti(3,r,(()=>Fs),(()=>({duration:200}))),Mn("dragstart",r,(e=>function(e,t){q()&&e.dataTransfer.setData("source",t)}(e,cn(i)))),Mn("dragover",r,(e=>_t(e,cn(i)))),Mn("dragleave",r,(e=>(cn(i),void(q()&&Q(It,!1))))),Mn("drop",r,(e=>At(e,cn(i)))),Vn(e,r)})),Vn(e,n)};Zn(Ft,(e=>{T()&&cn(s)&&e(Ut)}));var Mt=Ue(Ft,2);let Dt;vi(Mt),ji(Mt,(e=>Q(Ce,e)),(()=>cn(Ce)));var Pt=Ue(Mt,2),Rt=e=>{var t=Rs();ui(Ne(t),J),ce(t),Mn("click",t,$t),Mn("keypress",t,(e=>{"Enter"==e.key&&$t()})),Vn(e,t)};Zn(Pt,(e=>{cn(a)&&e(Rt)})),ce(Nt),ji(Nt,(e=>Q(Ee,e)),(()=>cn(Ee)));var jt=Ue(Nt,2),Wt=Ne(jt),zt=e=>{var n=zs(),i=Fe(n);ci(i,t,"dropdown-header",{get nbItems(){return cn(je).length},get maxItemsToShowInList(){return L()}},null);var r=Ue(i,2);ii(r,1,(()=>cn(je)),ni,((e,n,i)=>{var r=Bn(),o=Fe(r),s=e=>{var r=js();const o=Pe((()=>function(e){return!!$e()&&(T()?$e().includes(e):e===$e())}(cn(n).item)));Xe((()=>Ii(r,"confirmed",cn(o)))),ci(Ne(r),t,"item",{get item(){return cn(n).item},get label(){return cn(n).highlighted?cn(n).highlighted:cn(n).label}},(e=>{var t=Bn(),i=Fe(t),r=e=>{var t=Bn();ui(Fe(t),(()=>cn(n).highlighted)),Vn(e,t)},o=e=>{var t=Bn();ui(Fe(t),(()=>cn(n).label)),Vn(e,t)};Zn(i,(e=>{cn(n).highlighted?e(r):e(o,!1)})),Vn(e,t)})),ce(r),Xe((()=>Ii(r,"selected",i===cn(xe)))),Mn("click",r,(()=>ct(cn(n)))),Mn("keypress",r,(e=>{"Enter"==e.key&&ct(cn(n))})),Mn("pointerenter",r,(()=>{Q(xe,i)})),Vn(e,r)};Zn(o,(e=>{cn(n)&&(L()<=0||i<L())&&e(s)})),Vn(e,r)})),ci(Ue(r,2),t,"dropdown-footer",{get nbItems(){return cn(je).length},get maxItemsToShowInList(){return L()}},(e=>{var t=Bn(),n=Fe(t),i=e=>{var t=Bn(),n=Fe(t),i=e=>{var t=Ws(),n=Ne(t);ce(t),Xe((()=>Gn(n,`...${cn(je).length-L()??""}\n              ${te()??""}`))),Vn(e,t)};Zn(n,(e=>{te()&&e(i)})),Vn(e,t)};Zn(n,(e=>{L()>0&&cn(je).length>L()&&e(i)})),Vn(e,t)})),Vn(e,n)},Vt=e=>{var n=Bn(),i=Fe(n),r=e=>{var n=Bs();ci(Ne(n),t,"loading",{get loadingText(){return ee()}},(e=>{var t=zn();Xe((()=>Gn(t,ee()))),Vn(e,t)})),ce(n),Vn(e,n)},o=e=>{var n=Bn(),i=Fe(n),r=e=>{var n=Vs();ci(Ne(n),t,"create",{get createText(){return ne()}},(e=>{var t=zn();Xe((()=>Gn(t,ne()))),Vn(e,t)})),ce(n),Mn("click",n,st),Mn("keypress",n,(e=>{"Enter"==e.key&&st()})),Vn(e,n)},o=e=>{var n=Bn(),i=Fe(n),r=e=>{var n=qs();ci(Ne(n),t,"no-results",{get noResultsText(){return Z()}},(e=>{var t=zn();Xe((()=>Gn(t,Z()))),Vn(e,t)})),ce(n),Vn(e,n)};Zn(i,(e=>{Z()&&e(r)}),!0),Vn(e,n)};Zn(i,(e=>{x()?e(r):e(o,!1)}),!0),Vn(e,n)};Zn(i,(e=>{cn(Te)&&ee()?e(r):e(o,!1)}),!0),Vn(e,n)};return Zn(Wt,(e=>{cn(je)&&cn(je).length>0?e(zt):e(Vt,!1)})),ce(jt),ji(jt,(e=>Q(Se,e)),(()=>cn(Se))),ce(St),Xe((()=>{Oi(St,`${(re()?re():"")??""} autocomplete select is-fullwidth ${Ie??""} svelte-75ckfb`),Ii(St,"hide-arrow",H()||!u().length),Ii(St,"is-multiple",T()),Ii(St,"show-clear",cn(a)),Ii(St,"is-loading",X()&&cn(Te)),pi(Et,"name",le()),pi(Et,"id",ue()),Et.multiple=T(),Dt=mi(Mt,Dt,{type:"text",class:`${(oe()?oe():"")??""} ${(me()?"":"input autocomplete-input")??""}`,id:se()?se():"",autocomplete:fe()?"on":he(),placeholder:ie(),name:ae(),disabled:pe(),required:ye(),title:de(),readonly:ve()||cn(l),tabindex:ke(),...i},"svelte-75ckfb"),Oi(jt,`${(ge()?ge():"")??""} autocomplete-list ${(cn(o)?"":"hidden")??""}\n    is-fullwidth svelte-75ckfb`)})),Ni(Mt,Me),Mn("input",Mt,(function(e){be()&&console.log("onInput"),Me(e.target.value),_e&&clearTimeout(_e),R()?_e=setTimeout(ft,R()):ft()})),Mn("focus",Mt,(function(){be()&&console.log("onFocus"),_()(),gt()})),Mn("blur",Mt,(function(){be()&&console.log("onBlur"),V()&&yt(),A()()})),Mn("keydown",Mt,(function(e){be()&&console.log("onKeyDown");let t=e.key;"Tab"===t&&e.shiftKey&&(t="ShiftTab");const n={Tab:cn(Le)?yt:null,ShiftTab:cn(Le)?yt:null,ArrowDown:lt.bind(this),ArrowUp:at.bind(this),Escape:ht.bind(this),Backspace:T()&&cn(s)&&!Me()?vt.bind(this):null}[t];"function"==typeof n&&n(e)})),Mn("click",Mt,(function(){be()&&console.log("onInputClick"),gt()})),Mn("keypress",Mt,(function(e){be()&&console.log("onKeyPress"),"Enter"===e.key&&function(e){cn(Le)&&(e.preventDefault(),st())}(e)})),Mn("dragover",Mt,(e=>_t(e,$e().length-1))),Mn("drop",Mt,(e=>At(e,$e().length-1))),Vn(e,St),function(e,t,n){var i=r(e,t);i&&i.set&&(e[t]=n,He((()=>{e[t]=null})))}(t,"highlightFilter",wt),mn({highlightFilter:wt})}var Ks=Wn("<p> </p>");var Js=Wn("<p><time> </time></p>"),Ys=Wn("<input>");var Qs=Wn("<p> </p>"),Xs=Wn("<input>");var Zs=Wn("<p> </p>"),ea=Wn("<input>");var ta=Wn('<input type="hidden">');var na=Wn("<p> </p>"),ia=Wn("<textarea></textarea>");function ra(e,t){pn(t,!0);const n=Hi();let i=er(t,"value",15,""),r=er(t,"placeholder",3,""),o=er(t,"fieldname",3,"textarea"),s=er(t,"rows",3,10),a=er(t,"required",3,!0),l=er(t,"readonly",3,!1),u=er(t,"disabled",3,!1),c=er(t,"valid",3,!0),d=er(t,"class",3,""),f=er(t,"onchange",3,(()=>!0)),h=Ki(t,["$$slots","$$events","$$legacy","value","placeholder","fieldname","rows","required","readonly","disabled","valid","class","onchange"]),v=De((()=>!c()));const g=_r.onInput(o(),f());var p=Bn(),m=Fe(p),y=e=>{var t=na(),n=Ne(t,!0);ce(t),Xe((()=>Gn(n,i()))),Vn(e,t)},b=e=>{var t,c=ia();let f;t=c,se&&null!==Te(t)&&Me(t),Xe((()=>f=mi(c,f,{id:`form-field-textarea-${o()??""}`,class:`textarea ${d()??""}`,name:o(),invalid:cn(v),disabled:u(),required:a(),readonly:l(),onblur:g,placeholder:qi(Mr,"$LOCALE",n)[r()],rows:s(),"aria-controls":`input-field-helper-${o()??""}`,"aria-describedby":`input-field-helper-${o()??""}`,...h}))),Ni(c,i),Vn(e,c)};Zn(m,(e=>{l()?e(y):e(b,!1)})),Vn(e,p),mn()}var oa=new WeakMap;let sa=function(){return pr((function e(t){cr(this,e),fr(this,oa,{}),t instanceof e&&this.import(t.getContent())}),[{key:"add",value:function(e,t,n="replace"){this.contains(e)?"replace"===n?dr(oa,this)[e]=t:"add"===n&&(dr(oa,this)[e]=Object.assign(dr(oa,this)[e],t)):dr(oa,this)[e]=t}},{key:"get",value:function(e){return dr(oa,this)[e]}},{key:"contains",value:function(e){return Object.hasOwn(dr(oa,this),e)}},{key:"import",value:function(e,t="replace"){for(let n in e)this.add(n,e[n],t)}},{key:"isEmpty",value:function(){return 0===Object.keys(dr(oa,this)).length}},{key:"getContent",value:function(){return{...dr(oa,this)}}}])}();const aa=new sa,la=new sa,ua=new sa;function ca(e){Yo(e,{title:"not-node:empty_list_placeholder",size:4,align:"center"})}var da=Wn('<span class="icon"><i></i></span>'),fa=Wn("<span> </span>"),ha=Wn("<!> <!> <!> <!>",1),va=Wn(" <!>",1),ga=Wn("<a><!></a>");function pa(e,t){pn(t,!0);const n=Hi(),i=()=>qi(Mr,"$LOCALE",n),r=e=>{var n=da(),i=Ne(n);ce(n),Xe((()=>Oi(i,`fas fa-${t.icon??""} ${(b()?`is-${b()}`:"")??""}`))),Vn(e,n)};let o=er(t,"title",3,""),s=er(t,"url",3,""),a=er(t,"target",3,"_blank"),l=er(t,"light",3,!1),u=er(t,"loading",3,!1),d=er(t,"raised",3,!1),f=er(t,"outlined",3,!1),h=er(t,"inverted",3,!1),v=er(t,"rounded",3,!1),g=er(t,"button",3,!0),p=er(t,"state",3,""),m=er(t,"type",3,""),y=er(t,"color",3,""),b=er(t,"size",3,""),k=er(t,"class",3,""),$=er(t,"iconSide",3,"right");var w=ga();w.__click=function(...e){(t.action||t.onclick)?.apply(this,e)};var O=Ne(w),I=e=>{var n=ha(),s=Fe(n),a=e=>{r(e)};Zn(s,(e=>{"left"===$()&&e(a)}));var l=Ue(s,2),u=e=>{var t=fa(),n=Ne(t,!0);ce(t),Xe((()=>Gn(n,i()[o()]))),Vn(e,t)};Zn(l,(e=>{o()&&e(u)}));var d=Ue(l,2);di(d,(()=>t.children??c));var f=Ue(d,2),h=e=>{r(e)};Zn(f,(e=>{"right"===$()&&e(h)})),Vn(e,n)},_=e=>{var n=va(),r=Fe(n,!0);di(Ue(r),(()=>t.children??c)),Xe((()=>Gn(r,i()[o()]))),Vn(e,n)};Zn(O,(e=>{t.icon?e(I):e(_,!1)})),ce(w),Xe((()=>{pi(w,"href",s()),pi(w,"target",a()),pi(w,"download",t.download),pi(w,"rel",t.rel),Oi(w,`${k()??""} ${(p()?`is-${p()}`:"")??""} ${(y()?`is-${y()}`:"")??""} ${(m()?`is-${m()}`:"")??""} ${(b()?`is-${b()}`:"")??""}`),Ii(w,"button",g()),Ii(w,"is-light",l()),Ii(w,"is-inverted",h()),Ii(w,"is-outlined",f()),Ii(w,"is-raised",d()),Ii(w,"is-rounded",v()),Ii(w,"is-loading",u())})),Vn(e,w),mn()}Dn(["click"]);var ma=Wn('<div><p class="control"><!></p></div>'),ya=Wn("<div><!></div>");function ba(e,t){const n=e=>{var t=Bn();ii(Fe(t),17,i,(e=>e.id),((e,t)=>{pa(e,Xi((()=>cn(t)),l))})),Vn(e,t)};let i=er(t,"values",19,(()=>[])),r=er(t,"class",3,""),o=er(t,"centered",3,!1),s=er(t,"right",3,!1),a=er(t,"joined",3,!0),l=er(t,"itemsProps",19,(()=>({})));var u=Bn(),c=Fe(u),d=e=>{var t=ma(),i=Ne(t),a=Ne(i);n(a),ce(i),ce(t),Xe((()=>{Oi(t,`field has-addons ${r()??""}`),Ii(t,"is-centered",o()),Ii(t,"is-right",s())})),Vn(e,t)},f=e=>{var t=ya(),i=Ne(t);n(i),ce(t),Xe((()=>{Oi(t,`buttons ${r()??""}`),Ii(t,"is-centered",o()),Ii(t,"is-right",s())})),Vn(e,t)};Zn(c,(e=>{a()?e(d):e(f,!1)})),Vn(e,u)}var ka=(e,t)=>{e&&"Enter"==e.key&&t()},$a=(e,t,n,i)=>{e.preventDefault(),e&&"Enter"==e.key&&(t(),n()(i.value))},wa=(e,t,n,i)=>{e.preventDefault(),t(),n()(i.value)},Oa=Wn('<figure class="image is-64x64"><img class="is-rounded"></figure>'),Ia=Wn('<div role="button" tabindex="0" class="list-item-image"><!></div>'),_a=(e,t,n,i)=>{e.preventDefault(),t(),n()(i.value)},Aa=(e,t,n,i)=>{e.preventDefault(),e&&"Enter"==e.key&&(t(),n()(i.value))},Ca=(e,t,n,i)=>{e.preventDefault(),e&&"Enter"==e.key&&(t(),n()(i.value))},Sa=(e,t,n,i)=>{e.preventDefault(),t(),n()(i.value)},Ea=Wn('<div class="list-item-title" role="button" tabindex="0"><!></div>'),La=(e,t,n,i)=>{e.preventDefault(),e&&"Enter"==e.key&&(t(),n()(i.value))},Ta=(e,t,n,i)=>{e.preventDefault(),t(),n()(i.value)},xa=Wn('<div role="button" tabindex="0" class="list-item-description"><!></div>'),Na=Wn('<div class="list-item-controls"><!> <!></div>'),Fa=Wn('<div role="button" tabindex="0"><!> <div role="button" tabindex="0" class="list-item-content"><!> <!></div> <!></div>');function Ua(e,t){pn(t,!0);let n=er(t,"actions",19,(()=>[])),i=er(t,"links",19,(()=>[])),r=er(t,"listActions",19,(()=>[])),o=er(t,"listLinks",19,(()=>[])),s=er(t,"classes",3,""),a=er(t,"commonClasses",3,""),l=er(t,"image",3,""),u=er(t,"index",19,(()=>-1)),c=er(t,"first",3,!1),d=er(t,"last",3,!1),f=er(t,"titleComponent",3,Yo),h=er(t,"titleComponentProps",19,(()=>({size:6}))),v=er(t,"descriptionComponentProps",19,(()=>({}))),g=er(t,"imageComponentProps",19,(()=>({}))),p=er(t,"onclickImage",3,(()=>!1)),m=er(t,"onclickContent",3,(()=>!1)),y=er(t,"onclickTitle",3,(()=>!1)),b=er(t,"onclickDescription",3,(()=>!1));function k(){onclick(t.value)}let $=H(Oe([])),w=H(Oe([]));tr((()=>{Q($,Oe([...n(),...r()].map((e=>({...e,action:()=>e.action(t.value)}))))),Q(w,Oe([...i(),...o()]))}));var O=Fa();O.__click=k,O.__keyup=[ka,k];var I=Ne(O),_=e=>{var n=Ia();n.__keyup=[$a,k,p,t],n.__click=[wa,k,p,t];var i=Ne(n),r=e=>{var n=Bn(),i=Fe(n),r=e=>{var n=Bn();const i=De((()=>t.imageComponent));fi(Fe(n),(()=>cn(i)),((e,t)=>{t(e,Xi({get value(){return l()}},g))})),Vn(e,n)},o=e=>{var n=Bn();const i=De((()=>t.imageComponent));fi(Fe(n),(()=>cn(i)),((e,t)=>{t(e,Xi(l,g))})),Vn(e,n)};Zn(i,(e=>{"string"==typeof l()?e(r):e(o,!1)})),Vn(e,n)},o=e=>{var n=Oa(),i=Ne(n);ce(n),Xe((()=>{pi(i,"src",l()),pi(i,"alt",t.title)})),Vn(e,n)};Zn(i,(e=>{t.imageComponent?e(r):e(o,!1)})),ce(n),Vn(e,n)};Zn(I,(e=>{l()&&e(_)}));var A=Ue(I,2);A.__click=[_a,k,m,t],A.__keyup=[Aa,k,m,t];var C=Ne(A),S=e=>{var n=Ea();n.__keyup=[Ca,k,y,t],n.__click=[Sa,k,y,t];var i=Ne(n),r=e=>{var n=Bn(),i=Fe(n),r=e=>{var n=Bn();const i=De(f);fi(Fe(n),(()=>cn(i)),((e,n)=>{n(e,Xi({get title(){return t.title}},h,{onchange:onchange}))})),Vn(e,n)},o=e=>{var n=Bn();const i=De(f);fi(Fe(n),(()=>cn(i)),((e,n)=>{n(e,Xi((()=>t.title),h,{onchange:onchange}))})),Vn(e,n)};Zn(i,(e=>{"string"==typeof t.title?e(r):e(o,!1)})),Vn(e,n)},o=e=>{var n=zn();Xe((()=>Gn(n,t.title))),Vn(e,n)};Zn(i,(e=>{f()?e(r):e(o,!1)})),ce(n),Vn(e,n)};Zn(C,(e=>{t.title&&e(S)}));var E=Ue(C,2),L=e=>{var n=xa();n.__keyup=[La,k,b,t],n.__click=[Ta,k,b,t];var i=Ne(n),r=e=>{var n=Bn(),i=Fe(n),r=e=>{var n=Bn();const i=De((()=>t.descriptionComponent));fi(Fe(n),(()=>cn(i)),((e,n)=>{n(e,Xi({get value(){return t.description}},v,{onchange:onchange,onclick:onclick}))})),Vn(e,n)},o=e=>{var n=Bn();const i=De((()=>t.descriptionComponent));fi(Fe(n),(()=>cn(i)),((e,n)=>{n(e,Xi((()=>t.description),v,{onchange:onchange,onclick:onclick}))})),Vn(e,n)};Zn(i,(e=>{"string"==typeof t.description?e(r):e(o,!1)})),Vn(e,n)},o=e=>{var n=zn();Xe((()=>Gn(n,t.description))),Vn(e,n)};Zn(i,(e=>{t.descriptionComponent?e(r):e(o,!1)})),ce(n),Vn(e,n)};Zn(E,(e=>{t.description&&e(L)})),ce(A);var T=Ue(A,2),x=e=>{var t=Na(),n=Ne(t),i=e=>{Uo(e,{get values(){return cn($)},right:!0})};Zn(n,(e=>{cn($)&&cn($).length&&e(i)}));var r=Ue(n,2),o=e=>{ba(e,{get values(){return cn(w)},right:!0})};Zn(r,(e=>{cn(w)&&cn(w).length&&e(o)})),ce(t),Vn(e,t)};Zn(T,(e=>{(cn($)&&cn($).length||cn(w)&&cn(w).length)&&e(x)})),ce(O),Xe((()=>Oi(O,`list-item ${s()??""} ${a()??""} ${(d()?"list-item-last":"")??""} ${(c()?"list-item-first":"")??""}  ${`list-item-at-${u()}`??""} ${"list-item-"+(u()%2?"odd":"even")??""}`))),Vn(e,O),mn()}Dn(["click","keyup"]);var Ma=Wn("<div><!></div>");function Da(e,t){pn(t,!0);let n=er(t,"classes",3,""),i=er(t,"items",31,(()=>Oe([]))),r=er(t,"actions",19,(()=>[])),o=er(t,"links",19,(()=>[])),s=er(t,"actionsVisible",3,!1),a=er(t,"itemsHoverable",3,!1),l=er(t,"overflowEllipsis",3,!1),u=er(t,"hiddenImages",3,!1),c=er(t,"itemClasses",3,""),d=er(t,"idFieldName",3,"id"),f=er(t,"emptyListPlaceholderComponent",3,ca),h=er(t,"emptyListPlaceholderComponentProps",19,(()=>({}))),v=er(t,"listItemComponent",3,Ua),g=er(t,"listItemComponentProps",19,(()=>({}))),p=er(t,"titleComponent",3,Yo),m=er(t,"titleComponentProps",19,(()=>({size:6}))),y=er(t,"descriptionComponentProps",19,(()=>({}))),b=er(t,"imageComponentProps",19,(()=>({})));var k=Bn(),$=Fe(k),w=e=>{var f=Ma();!function(e,t){pn(t,!0);let n=er(t,"idFieldName",3,"id"),i=er(t,"items",23,(()=>[])),r=er(t,"actions",19,(()=>[])),o=er(t,"links",19,(()=>[])),s=er(t,"itemClasses",3,""),a=er(t,"listItemComponent",3,Ua),l=er(t,"listItemComponentProps",19,(()=>({}))),u=er(t,"titleComponent",3,Yo),c=er(t,"titleComponentProps",19,(()=>({size:6}))),d=er(t,"descriptionComponentProps",19,(()=>({}))),f=er(t,"imageComponentProps",19,(()=>({})));var h=Bn(),v=Fe(h),g=e=>{var h=Bn();const v=De(a);ii(Fe(h),19,i,(e=>e[n()]),((e,n,a)=>{var h=Bn(),g=Fe(h),p=De((()=>0===cn(a))),m=De((()=>cn(a)===i().length-1));fi(g,(()=>cn(v)),((e,h)=>{h(e,Xi(l,{get titleComponent(){return u()},get titleComponentProps(){return c()},get descriptionComponent(){return t.descriptionComponent},get descriptionComponentProps(){return d()},get imageComponent(){return t.imageComponent},get imageComponentProps(){return f()}},(()=>cn(n)),{get listActions(){return r()},get listLinks(){return o()},get commonClasses(){return s()},get index(){return cn(a)},get first(){return cn(p)},get last(){return cn(m)},get value(){return i()[cn(a)]},set value(e){i()[cn(a)]=e},$$events:{click(e){Bi.call(this,t,e)},clickContent(e){Bi.call(this,t,e)},clickDescription(e){Bi.call(this,t,e)},clickImage(e){Bi.call(this,t,e)},clickTitle(e){Bi.call(this,t,e)}}}))})),Vn(e,h)})),Vn(e,h)};Zn(v,(e=>{i()&&e(g)})),Vn(e,h),mn()}(Ne(f),{get itemClasses(){return c()},get listItemComponent(){return v()},get listItemComponentProps(){return g()},get idFieldName(){return d()},get titleComponent(){return p()},get titleComponentProps(){return m()},get descriptionComponent(){return t.descriptionComponent},get descriptionComponentProps(){return y()},get imageComponent(){return t.imageComponent},get imageComponentProps(){return b()},get actions(){return r()},get links(){return o()},get items(){return i()},set items(e){i(e)},$$events:{change(e){Bi.call(this,t,e)},click(e){Bi.call(this,t,e)},clickContent(e){Bi.call(this,t,e)},clickDescription(e){Bi.call(this,t,e)},clickImage(e){Bi.call(this,t,e)},clickTitle(e){Bi.call(this,t,e)}}}),ce(f),Xe((()=>{pi(f,"style",t.itemLength?`--length: ${t.itemLength};`:""),Oi(f,`list ${n()??""} ${(s()?"has-visible-pointer-controls":"")??""} ${(a()?"has-hoverable-list-items":"")??""} ${(l()?"has-overflow-ellipsis":"")??""} ${(u()?"has-hidden-images":"")??""}`)})),Vn(e,f)},O=e=>{var t=Bn();const n=De(f);fi(Fe(t),(()=>cn(n)),((e,t)=>{t(e,Xi(h))})),Vn(e,t)};Zn($,(e=>{i().length?e(w):e(O,!1)})),Vn(e,k),mn()}var Pa=Wn("<!> <!>",1);var Ra=Wn("<div><!></div>");function ja(e,t){pn(t,!0);let n=er(t,"id",3,""),i=er(t,"class",3,""),r=er(t,"title",3,""),o=er(t,"narrow",3,!1),s=er(t,"role",3,"button"),a=er(t,"tabIndex",3,"0");var l=Ra();l.__click=function(...e){t.onclick?.apply(this,e)},l.__keyup=function(...e){t.onkeyup?.apply(this,e)},di(Ne(l),(()=>t.children??c)),ce(l),Xe((()=>{pi(l,"id",n()),pi(l,"title",r()),Oi(l,`column ${i()??""} ${(t.size?`is-${t.size}`:"")??""}`),pi(l,"role",s()),pi(l,"tabindex",a()),Ii(l,"is-narrow",o())})),Vn(e,l),mn()}Dn(["click","keyup"]);var Wa=Wn("<div><!></div>");function za(e,t){pn(t,!0);let n=er(t,"id",3,""),i=er(t,"title",3,""),r=er(t,"class",3,""),o=er(t,"role",3,"button"),s=er(t,"tabIndex",3,"0");var a=Wa();a.__click=function(...e){t.onclick?.apply(this,e)},a.__keyup=function(...e){t.onkeyup?.apply(this,e)},di(Ne(a),(()=>t.children??c)),ce(a),Xe((()=>{pi(a,"id",n()),pi(a,"title",i()),Oi(a,`columns ${r()??""}`),pi(a,"role",o()),pi(a,"tabindex",s())})),Vn(e,a),mn()}Dn(["click","keyup"]);var Ba=Wn("<div><!></div>");function Va(e,t){pn(t,!0);let n=er(t,"id",3,""),i=er(t,"title",3,""),r=er(t,"class",3,""),o=er(t,"role",3,"button"),s=er(t,"tabIndex",3,"0"),a=er(t,"widescreen",3,!1),l=er(t,"fullhd",3,!1),u=er(t,"maxDesktop",3,!1),d=er(t,"maxWidescreen",3,!1),f=er(t,"fluid",3,!1);var h=Ba();h.__click=function(...e){t.onclick?.apply(this,e)},h.__keyup=function(...e){t.onkeyup?.apply(this,e)},di(Ne(h),(()=>t.children??c)),ce(h),Xe((()=>{pi(h,"id",n()),pi(h,"title",i()),Oi(h,`container ${r()??""}`),pi(h,"role",o()),pi(h,"tabindex",s()),Ii(h,"is-widescreen",a()),Ii(h,"is-fullhd",l()),Ii(h,"is-max-desktop",u()),Ii(h,"is-max-widescreen",d()),Ii(h,"is-fluid",f())})),Vn(e,h),mn()}Dn(["click","keyup"]);var qa=Wn("<footer><!></footer>");var Ha=Wn("<section><!></section>");Dn(["click","keyup"]);var Ga=Wn('<nav class="level"><div class="level-left"><!></div> <div class="level-right"><!></div></nav>');var Ka=Object.freeze({__proto__:null,UIColumn:ja,UIColumns:za,UIContainer:Va,UIFooter:function(e,t){pn(t,!0);let n=er(t,"id",3,""),i=er(t,"class",3,"");var r=qa();di(Ne(r),(()=>t.children??c)),ce(r),Xe((()=>{pi(r,"id",n()),Oi(r,`footer ${i()??""} `)})),Vn(e,r),mn()},UILevel:function(e,t){pn(t,!0);var n=Ga(),i=Ne(n);di(Ne(i),(()=>t.left??c)),ce(i);var r=Ue(i,2);di(Ne(r),(()=>t.right??c)),ce(r),ce(n),Vn(e,n),mn()},UILevelItem:function(e,t){pn(t,!0);let n=er(t,"tag",3,"div");var i=Bn();hi(Fe(i),n,0,((e,n)=>{var i=Bn(),r=Fe(i),o=e=>{var n=Bn();di(Fe(n),(()=>t.children??c)),Vn(e,n)},s=e=>{};Zn(r,(e=>{t.children?e(o):e(s,!1)})),Vn(n,i)})),Vn(e,i),mn()},UISection:function(e,t){pn(t,!0);let n=er(t,"id",3,""),i=er(t,"class",3,""),r=er(t,"role",3,"button"),o=er(t,"tabIndex",3,"0");var s=Ha();s.__click=function(...e){t.onclick?.apply(this,e)},s.__keyup=function(...e){t.onkeyup?.apply(this,e)},di(Ne(s),(()=>t.children??c)),ce(s),Xe((()=>{pi(s,"id",n()),Oi(s,`section ${i()??""}`),pi(s,"role",r()),pi(s,"tabindex",o())})),Vn(e,s),mn()}}),Ja=Wn("<p> </p>"),Ya=Wn("<input>");function Qa(e,t){pn(t,!0);const n=Hi();let i=er(t,"value",15,0),r=er(t,"placeholder",3,"0.0"),o=er(t,"min",3,0),s=er(t,"max",3,100),a=er(t,"step",3,1),l=er(t,"fieldname",3,"number"),u=er(t,"required",3,!0),c=er(t,"disabled",3,!1),d=er(t,"readonly",3,!1),f=er(t,"valid",3,!0),h=er(t,"class",3,""),v=er(t,"onchange",3,(()=>!0)),g=Ki(t,["$$slots","$$events","$$legacy","value","placeholder","min","max","step","fieldname","required","disabled","readonly","valid","class","onchange"]),p=De((()=>!f()));const m=_r.onInput(l(),v());var y=Bn(),b=Fe(y),k=e=>{var t=Ja(),n=Ne(t,!0);ce(t),Xe((()=>Gn(n,i()))),Vn(e,t)},$=e=>{var t=Ya();let f;vi(t),Xe((()=>f=mi(t,f,{id:`form-field-number-${l()??""}`,class:`input ${h()??""}`,type:"number",name:l(),invalid:cn(p),disabled:c(),required:u(),readonly:d(),min:o(),max:s(),step:a(),placeholder:qi(Mr,"$LOCALE",n)[r()],autocomplete:l(),onchange:m,oninput:m,"aria-controls":`input-field-helper-${l()??""}`,"aria-describedby":`input-field-helper-${l()??""}`,...g}))),Ni(t,i),Vn(e,t)};Zn(b,(e=>{d()?e(k):e($,!1)})),Vn(e,y),mn()}var Xa=Wn("<!> <!> <!>",1),Za=Wn("<!> <!> <!>",1),el=Wn("<!> <!> <!>",1);var tl=Wn("<input>");var nl=Wn("<p> </p>"),il=Wn("<option></option>"),rl=Wn("<datalist></datalist>"),ol=Wn("<input> <output> </output> <!>",1);var sl=Wn('<!> <input> <label class="label"><!></label>',1);var al=Wn('<div class="switch-list-item"><input> <!></div>');function ll(e,t,n){e&&e.preventDefault();let i=e.currentTarget.dataset.id;return t().includes(i)&&(t().splice(t().indexOf(i),1),t(t()),n()),!1}var ul=Wn('<button aria-label="delete button" class="delete is-small"></button>'),cl=Wn("<span> <!></span>"),dl=Wn('<div class="select is-small"><select><!><!></select></div> <!>',1),fl=Wn("<!> <!>",1);Dn(["click"]);var hl=Wn("<p> </p>"),vl=Wn("<input>");var gl=Object.freeze({__proto__:null,UIAutocomplete:function(e,t){pn(t,!0);const n=Hi();let i=er(t,"value",15),r=er(t,"placeholder",3,""),o=er(t,"fieldname",3,"checkbox-list"),s=er(t,"disabled",3,!1),a=er(t,"readonly",3,!1),l=er(t,"required",3,!1),u=er(t,"valid",3,!0),c=er(t,"onchange",3,(()=>!0)),d=Ki(t,["$$slots","$$events","$$legacy","value","placeholder","fieldname","disabled","readonly","required","valid","onchange"]),f=De((()=>!u()));const h=_r.onInput(o(),c());var v=Bn(),g=Fe(v),p=e=>{var t=De((()=>i()?i().title:""));is(e,Xi({get value(){return cn(t)},get fieldname(){return o()},get placeholder(){return r()}},(()=>d)))},m=e=>{var t=Bn(),o=Fe(t),s=e=>{var t=Ks(),n=Ne(t,!0);ce(t),Xe((()=>Gn(n,i()?i().title:""))),Vn(e,t)},c=e=>{Gs(e,Xi({onChange:h,get valid(){return u()},get invalid(){return cn(f)},get required(){return l()},get placeholder(){return qi(Mr,"$LOCALE",n)[r()]}},(()=>d),{get selectedItem(){return i()},set selectedItem(e){i(e)}}))};Zn(o,(e=>{a()?e(s):e(c,!1)}),!0),Vn(e,t)};Zn(g,(e=>{s()?e(p):e(m,!1)})),Vn(e,v),mn()},UIControl:Os,UIDate:function(e,t){pn(t,!0);const n=Hi();let i=er(t,"value",31,(()=>Oe(new Date))),r=er(t,"placeholder",3,""),o=er(t,"fieldname",3,"datetime"),s=er(t,"pattern",3,"d{4}-d{2}-d{2}"),a=er(t,"required",3,!0),l=er(t,"disabled",3,!1),u=er(t,"readonly",3,!1),c=er(t,"valid",3,!0),d=er(t,"class",3,""),f=er(t,"onchange",3,(()=>!0)),h=Ki(t,["$$slots","$$events","$$legacy","value","placeholder","fieldname","pattern","required","disabled","readonly","valid","class","onchange"]);tr((()=>{i()instanceof Date?i(i().toISOString().split("T")[0]):i().indexOf("T")>0&&i(i().split("T")[0])}));let v=De((()=>!c()));const g=_r.onInput(o(),f());var p=Bn(),m=Fe(p),y=e=>{var t=Js(),n=Ne(t),r=Ne(n,!0);Xe((()=>Gn(r,_r.tryFormatLocaleDateTime(i())))),ce(n),ce(t),Xe((()=>pi(n,"datetime",i()))),Vn(e,t)},b=e=>{var t=Ys();let c;vi(t),Xe((()=>c=mi(t,c,{id:`form-field-date-${o()??""}`,class:`input ${d()??""}`,type:"date",name:o(),invalid:cn(v),required:a(),readonly:u(),disabled:l(),placeholder:qi(Mr,"$LOCALE",n)[r()],pattern:s(),autocomplete:o(),onchange:g,oninput:g,"aria-controls":`input-field-helper-${o()??""}`,"aria-describedby":`input-field-helper-${o()??""}`,...h}))),Ni(t,i),Vn(e,t)};Zn(m,(e=>{u()?e(y):e(b,!1)})),Vn(e,p),mn()},UIDatetimeInTZ:function(e,t){function n(e,t=!1){return e.split(".")[0]+(t?"":"Z")}function i(e,t){try{const i=new Date(r(e)).getTime(),o=-6e4*t;if(y(i+o)){const e=new Date(i+o);return n(e.toISOString(),!0)}}catch{return}}function r(e){return e&&"Z"!==e.at(-1)?e+"Z":e}pn(t,!0);let o,s=er(t,"fieldname",3,"datetime"),a=er(t,"value",31,(()=>Oe(n((new Date).toISOString())))),l=er(t,"timezoneOffset",3,0),u=er(t,"required",3,!1),c=er(t,"disabled",3,!1),d=er(t,"readonly",3,!1),f=er(t,"valid",3,!0),h=er(t,"class",3,""),v=er(t,"onchange",3,(()=>!0)),g=Ki(t,["$$slots","$$events","$$legacy","fieldname","value","timezoneOffset","required","disabled","readonly","valid","class","onchange"]),p=H(void 0);const m=e=>{y(e)&&(o=cn(p),Q(p,Oe(e)))};tr((()=>{m(i(a(),l()))}));const y=e=>{try{return new Date(e),!0}catch{return!1}};function b(e){return e.currentTarget.value&&cn(p)&&y(cn(p))?(a()!==i(cn(p),-l())&&(m(cn(p)),a(r(i(cn(p),-l()))),v()({field:s(),value:a()})),!0):(Q(p,Oe(o)),!1)}let k=De((()=>!f()));var $=Bn(),w=Fe($),O=e=>{var t=Bn(),n=Fe(t),i=e=>{var t=Qs(),n=Ne(t,!0);ce(t),Xe((()=>Gn(n,cn(p)))),Vn(e,t)},r=e=>{var t=Xs();let n;vi(t),Xe((()=>n=mi(t,n,{id:`form-field-datetime-in-timezone-${s()??""}`,class:`input ${h()??""}`,type:"datetime-local",name:s(),invalid:cn(k),disabled:c(),required:u(),readonly:d(),autocomplete:s(),onchange:b,onblur:b,oninput:b,"aria-controls":`input-field-helper-${s()??""}`,"aria-describedby":`input-field-helper-${s()??""}`,...g}))),Ni(t,(()=>cn(p)),(e=>Q(p,e))),Vn(e,t)};Zn(n,(e=>{d()?e(i):e(r,!1)})),Vn(e,t)};Zn(w,(e=>{cn(p)&&e(O)})),Vn(e,$),mn()},UIEmail:function(e,t){pn(t,!0);const n=Hi();let i=er(t,"value",15,""),r=er(t,"placeholder",3,""),o=er(t,"fieldname",3,"email"),s=er(t,"required",3,!0),a=er(t,"readonly",3,!1),l=er(t,"disabled",3,!1),u=er(t,"valid",3,!0),c=er(t,"class",3,""),d=er(t,"onchange",3,(()=>!0)),f=Ki(t,["$$slots","$$events","$$legacy","value","placeholder","fieldname","required","readonly","disabled","valid","class","onchange"]),h=De((()=>!u()));const v=_r.onInput(o(),d());var g=Bn(),p=Fe(g),m=e=>{var t=Zs(),n=Ne(t,!0);ce(t),Xe((()=>Gn(n,i()))),Vn(e,t)},y=e=>{var t=ea();let u;vi(t),Xe((()=>u=mi(t,u,{id:`form-field-email-${o()??""}`,class:`input ${c()??""}`,type:"email",name:o(),invalid:cn(h),required:s(),readonly:a(),disabled:l(),placeholder:qi(Mr,"$LOCALE",n)[r()],autocomplete:o(),onchange:v,oninput:v,"aria-controls":`input-field-helper-${o()??""}`,"aria-describedby":`input-field-helper-${o()??""}`,...f}))),Ni(t,i),Vn(e,t)};Zn(p,(e=>{a()?e(m):e(y,!1)})),Vn(e,g),mn()},UIHidden:function(e,t){let n=er(t,"value",15,""),i=er(t,"fieldname",3,"hidden"),r=er(t,"required",3,!0),o=er(t,"readonly",3,!1),s=Ki(t,["$$slots","$$events","$$legacy","value","fieldname","required","readonly"]);var a=ta();vi(a),Xe((()=>{pi(a,"id",`form-field-hidden-${i()??""}`),a.required=r(),a.readOnly=o(),pi(a,"name",i()),pi(a,"others",s)})),Ni(a,n),Vn(e,a)},UIJSONArea:function(e,t){pn(t,!0);let n=er(t,"value",31,(()=>Oe({}))),i=er(t,"fieldname",3,"jsonarea"),r=er(t,"valid",15,!0),o=er(t,"onchange",3,(()=>!0)),s=er(t,"onerror",3,(()=>{})),a=Ki(t,["$$slots","$$events","$$legacy","value","fieldname","valid","onchange","onerror"]),l=H("{}");tr((()=>{try{Q(l,Oe(JSON.stringify(n(),null,4)))}catch{Q(l,"{}")}})),ra(e,Xi({onchange:function({value:e}){try{n(JSON.parse(e)),r(!0),o()({field:i(),value:n()})}catch(e){s()(e.message)}return!0},get valid(){return r()}},(()=>a),{get value(){return cn(l)},set value(e){Q(l,Oe(e))}})),mn()},UIListOfModels:function(e,t){pn(t,!0);let n=er(t,"value",31,(()=>Oe([]))),i=er(t,"placeholder",15,""),r=er(t,"fieldname",15,"selectFromModel"),o=er(t,"required",15,!0),s=er(t,"readonly",3,!1),a=er(t,"multiple",15,!1),l=er(t,"size",15,8),u=er(t,"valid",15,!0),c=er(t,"modelName",3,""),d=er(t,"actionName",3,""),f=er(t,"actionFilter",19,(()=>({}))),h=er(t,"actionSorter",19,(()=>({}))),v=er(t,"actionPager",19,(()=>({}))),g=er(t,"actionSearch",3,void 0),p=er(t,"optionId",3,":_id"),m=er(t,"optionTitle",3,":title"),y=er(t,"selectorUI",3,"UISelectFromModelOnDemandInline"),b=er(t,"selectorUIProps",19,(()=>({}))),k=er(t,"itemUI",3,"UIListItem"),$=er(t,"itemUIProps",19,(()=>({}))),w=er(t,"transformValueItemToListItem",3,(e=>e?{id:e._id,title:e.title,description:e.description,value:e}:void 0)),O=De((()=>n().map?n().map(w()):[]));const I=[{action(e){const t=e.value,i=n().findIndex((e=>e===t));if(i>-1){const e=[...n()];to.moveItem(e,i,i-1),n(e)}},title:"",icon:"arrow-up",color:"normal"},{action:e=>{const t=e.value,i=n().findIndex((e=>e===t));if(i>-1){const e=[...n()];to.moveItem(e,i,i+1),n(e)}},title:"",icon:"arrow-down",color:"normal"},{action:e=>{const t=e.value,i=n().findIndex((e=>e===t));i>-1&&(n().splice(i,1),n(n()))},title:"",icon:"trash",color:"danger"}];var _=Pa(),A=Fe(_),C=De((()=>aa.get(k())));Da(A,Xi({get listItemComponent(){return cn(C)}},$,{get items(){return cn(O)},actions:I}));var S=Ue(A,2),E=e=>{var t=Bn();const s=De((()=>aa.get(y())));fi(Fe(t),(()=>cn(s)),((e,t)=>{t(e,Xi(b,{get modelName(){return c()},get actionName(){return d()},get actionFilter(){return f()},get actionSorter(){return h()},get actionPager(){return v()},get actionSearch(){return g()},get optionId(){return p()},get optionTitle(){return m()},get placeholder(){return i()},set placeholder(e){i(e)},get fieldname(){return r()},set fieldname(e){r(e)},get required(){return o()},set required(e){o(e)},get multiple(){return a()},set multiple(e){a(e)},get size(){return l()},set size(e){l(e)},get valid(){return u()},set valid(e){u(e)},$$events:{resolve:e=>{return t=e.detail,Array.isArray(n())||n([]),n().push(t),void n(n());var t}}}))})),Vn(e,t)};Zn(S,(e=>{s()||e(E)})),Vn(e,_),mn()},UINamedNumbersList:function(e,t){pn(t,!0);let n=er(t,"fieldname",3,"numbers_list"),i=er(t,"value",31,(()=>Oe({}))),r=er(t,"label",3,"named numbers list"),o=er(t,"placeholder",15,"new item"),s=er(t,"readonly",3,!1),a=er(t,"onchange",3,(()=>!0)),l=De((()=>Object.keys(i()).map((e=>({id:e,title:e,number:i()[e]}))))),u=Oe({id:"",number:0});var c=el(),d=Fe(c);Yo(d,{get title(){return r()},size:5});var f=Ue(d,2);ii(f,17,(()=>cn(l)),(e=>e.id),((e,t)=>{za(e,{children:(e,r)=>{var o=Xa(),l=Fe(o);ja(l,{classes:"is-6",children:(e,n)=>{de();var i=zn();Xe((()=>Gn(i,cn(t).title))),Vn(e,i)},$$slots:{default:!0}});var u=Ue(l,2);ja(u,{classes:"is-4",children:(e,n)=>{de();var i=zn();Xe((()=>Gn(i,cn(t).number))),Vn(e,i)},$$slots:{default:!0}});var c=Ue(u,2),d=e=>{ja(e,{classes:"is-2",children:(e,r)=>{No(e,{icon:"minus",action:()=>{return e=cn(t).id,void(to.objHas(i(),e)&&(delete i()[e],i(i()),a()({value:i(),field:n()})));var e}})},$$slots:{default:!0}})};Zn(c,(e=>{s()||e(d)})),Vn(e,o)},$$slots:{default:!0}})}));var h=Ue(f,2),v=e=>{za(e,{children:(e,t)=>{var r=Za(),s=Fe(r);ja(s,{classes:"is-6",children:(e,t)=>{is(e,{get value(){return u.id},set value(e){u.id=e},get placeholder(){return o()},set placeholder(e){o(e)}})},$$slots:{default:!0}});var l=Ue(s,2);ja(l,{classes:"is-4",children:(e,t)=>{Qa(e,{get value(){return u.number},set value(e){u.number=e}})},$$slots:{default:!0}}),ja(Ue(l,2),{classes:"is-2",children:(e,t)=>{No(e,{icon:"plus",action:()=>function(){const e=u.id.trim(),t=parseInt(u.number);!e||""===e||isNaN(t)||to.objHas(i(),e)||i(i()[e]=t,!0),a()({value:i(),field:n()})}()})},$$slots:{default:!0}}),Vn(e,r)},$$slots:{default:!0}})};Zn(h,(e=>{s()||e(v)})),Vn(e,c),mn()},UINumber:Qa,UIPassword:function(e,t){pn(t,!0);const n=Hi();er(t,"inputStarted",11,!1);let i=er(t,"value",15,""),r=er(t,"placeholder",3,""),o=er(t,"fieldname",3,"password"),s=er(t,"required",3,!0),a=er(t,"readonly",3,!1),l=er(t,"disabled",3,!1),u=er(t,"valid",3,!0),c=er(t,"class",3,""),d=er(t,"onchange",3,(()=>!0)),f=Ki(t,["$$slots","$$events","$$legacy","inputStarted","value","placeholder","fieldname","required","readonly","disabled","valid","class","onchange"]),h=De((()=>!u()));const v=_r.onInput(o(),d());var g=tl();let p;vi(g),Xe((()=>p=mi(g,p,{id:`form-field-password-${o()??""}`,class:`input ${c()??""}`,type:"password",name:o(),invalid:cn(h),required:s(),readonly:a(),disabled:l(),placeholder:qi(Mr,"$LOCALE",n)[r()],autocomplete:o(),onchange:v,oninput:v,"aria-controls":`input-field-helper-${o()??""}`,"aria-describedby":`input-field-helper-${o()??""}`,...f}))),Ni(g,i),Vn(e,g),mn()},UIRadioButtons:function(e,t){pn(t,!0);let n=er(t,"fieldname",3,"radio-buttons"),i=er(t,"variants",19,(()=>[])),r=er(t,"value",15),o=er(t,"buttonProps",19,(()=>({}))),s=er(t,"titleComponent",3,Yo),a=er(t,"titleComponentProps",19,(()=>({size:5}))),l=er(t,"imageComponent",3,Ss),u=er(t,"imageComponentProps",19,(()=>({covered:!0}))),c=er(t,"descriptionComponent",3,Uo),d=er(t,"descriptionComponentProps",19,(()=>({}))),f=er(t,"listComponent",3,Da),h=er(t,"listComponentProps",19,(()=>({}))),v=er(t,"getUIItem",3,(e=>b.find((t=>t.value===e)))),g=er(t,"getDefaultItemSublime",3,(()=>i()[0].value)),p=er(t,"uiOn",3,(e=>{e.color="success",e.outlined=!1})),m=er(t,"uiOff",3,(e=>{e.color=!1,e.outlined=!0})),y=er(t,"onchange",3,(()=>!0));tr((()=>{b=i().map((e=>({...o(),...e}))),Q(k,Oe([{id:0,title:t.title,image:t.image,description:{values:b}}])),function(){if(i().length>0)if(void 0!==r())w({on:r()});else{$(g()())}}()}));let b=[],k=H(Oe([]));function $(e){let t={on:void 0,off:void 0};r()&&(t.off=r(),t.on=e),r(e),w(t),y()({field:n(),value:r()})}function w(e){e.off&&m()(v()(e.off)),e.on&&p()(v()(e.on)),Q(k,Oe(cn(k)))}const O=De(f);var I=Bn(),_=Fe(I),A=De((()=>({...d(),action(e,t){$(t)}})));fi(_,(()=>cn(O)),((e,t)=>{t(e,Xi(h,{get titleComponent(){return s()},get titleComponentProps(){return a()},get descriptionComponent(){return c()},get descriptionComponentProps(){return cn(A)},get imageComponent(){return l()},get imageComponentProps(){return u()},get items(){return cn(k)},set items(e){Q(k,Oe(e))}}))})),Vn(e,I),mn()},UIRange:function(e,t){pn(t,!0);const n=Hi();let i=er(t,"value",15,10),r=er(t,"min",3,0),o=er(t,"max",3,100),s=er(t,"step",3,1),a=er(t,"tickmarks",3,!1),l=er(t,"placeholder",3,""),u=er(t,"fieldname",3,"range"),c=er(t,"required",3,!0),d=er(t,"disabled",3,!1),f=er(t,"readonly",3,!1),h=er(t,"valid",3,!0),v=er(t,"class",3,""),g=er(t,"onchange",3,(()=>!0)),p=Ki(t,["$$slots","$$events","$$legacy","value","min","max","step","tickmarks","placeholder","fieldname","required","disabled","readonly","valid","class","onchange"]),m=De((()=>!h()));const y=_r.onInput(u(),g());var b=Bn(),k=Fe(b),$=e=>{var t=nl(),n=Ne(t,!0);ce(t),Xe((()=>Gn(n,i()))),Vn(e,t)},w=e=>{var t=ol(),h=Fe(t);let g;vi(h);var b=Ue(h,2),k=Ne(b,!0);ce(b);var $=Ue(b,2),w=e=>{var t=rl();ii(t,21,a,ni,((e,t)=>{var n=il(),i={};Xe((()=>{i!==(i=cn(t).value)&&(n.value=null==(n.__value=cn(t).value)?"":cn(t).value),pi(n,"label",cn(t).label)})),Vn(e,n)})),ce(t),Xe((()=>pi(t,"id",`form-field-range-${u()??""}-tickmarks`))),Vn(e,t)};Zn($,(e=>{Array.isArray(a())&&a().length&&e(w)})),Xe((()=>{g=mi(h,g,{id:`form-field-range-${u()??""}`,class:`input big-number slider has-output is-fullwidth is-success ${v()??""}`,type:"range",name:u(),min:r(),max:o(),step:s(),list:`form-field-range-${u()??""}-tickmarks`,invalid:cn(m),disabled:d(),required:c(),readonly:f(),placeholder:qi(Mr,"$LOCALE",n)[l()],autocomplete:u(),"aria-controls":`input-field-helper-${u()??""}`,"aria-describedby":`input-field-helper-${u()??""}`,onchange:y,oninput:y,...p}),pi(b,"for",`form-field-range-${u()??""}`),Gn(k,i())})),Ni(h,i),Vn(e,t)};Zn(k,(e=>{f()?e($):e(w,!1)})),Vn(e,b),mn()},UISelect:Ao,UISelectFromModel:function(e,t){pn(t,!0);let n=er(t,"placeholder",3,""),i=er(t,"emptyValueTitle",3,""),r=er(t,"fieldname",3,"selectFromModel"),o=er(t,"modelName",3,""),s=er(t,"actionName",3,""),a=er(t,"actionFilter",19,(()=>({}))),l=er(t,"actionSorter",19,(()=>({}))),u=er(t,"actionPager",19,(()=>({}))),c=er(t,"actionSearch",3,void 0),d=er(t,"optionId",3,":_id"),f=er(t,"optionTitle",3,":title"),h=er(t,"required",3,!0),v=er(t,"readonly",3,!1),g=er(t,"multiple",3,!1),p=er(t,"size",3,8),m=er(t,"valid",3,!0),y=er(t,"returnVariant",3,!1),b=er(t,"class",3,""),k=er(t,"onchange",3,(()=>!0)),$=er(t,"onerror",3,(()=>{})),w=Ki(t,["$$slots","$$events","$$legacy","value","placeholder","emptyValueTitle","fieldname","modelName","actionName","actionFilter","actionSorter","actionPager","actionSearch","optionId","optionTitle","required","readonly","multiple","size","valid","returnVariant","class","onchange","onerror"]),O=H(Oe([])),I=De((()=>!0));tr((async()=>{if(o()&&s()&&a()){const e=to.getApp().getModel(o()).setFilter(a()).setSorter(l()).setPager(u()).setSearch(c()),t=await e["$"+s()]();if(t.status===zo){const e=t.result;Q(O,Oe(e.map((e=>({id:Jr.get(d(),e),title:Jr.get(f(),e)})))))}else $()(t.errors||t.message)}})),Ao(e,Xi({get value(){return t.value},get class(){return b()},get placeholder(){return n()},get emptyValueTitle(){return i()},get fieldname(){return r()},get required(){return h()},get readonly(){return v()},get disabled(){return cn(I)},get multiple(){return g()},get size(){return p()},get valid(){return m()},onchange:function(e){y()?k()({...e,value:cn(O).find((t=>t.id===e.value))}):k()(e)}},(()=>w),{get variants(){return cn(O)},set variants(e){Q(O,Oe(e))}})),mn()},UISelectOption:wo,UISwitch:function(e,t){pn(t,!0);const n=Hi(),i=()=>qi(Mr,"$LOCALE",n);let r=er(t,"value",15,!1),o=er(t,"label",3,""),s=er(t,"hideLabel",3,!1),a=er(t,"placeholder",3,""),l=er(t,"fieldname",3,"textfield"),u=er(t,"required",3,!0),c=er(t,"readonly",3,!1),d=er(t,"disabled",3,!1),f=er(t,"valid",3,!0),h=er(t,"class",3,""),v=er(t,"onchange",3,(()=>!0)),g=Ki(t,["$$slots","$$events","$$legacy","value","label","hideLabel","placeholder","fieldname","required","readonly","disabled","valid","class","onchange"]),p=De((()=>!f()));const m=_r.onInput(l(),v());var y=Bn(),b=Fe(y),k=e=>{lo(e,{get LC_TRUE(){return o()},get LC_FALSE(){return o()},get value(){return r()}})},$=e=>{var t=sl(),n=Fe(t),f=e=>{lo(e,{value:!1})};Zn(n,(e=>{o()||s()||e(f)}));var v=Ue(n,2);let y;vi(v);var b=Ue(v,2),k=Ne(b),$=e=>{var t=Bn(),n=Fe(t),r=e=>{var t=zn();Xe((()=>Gn(t,i()[o()]))),Vn(e,t)},s=e=>{lo(e,{value:!1})};Zn(n,(e=>{o()?e(r):e(s,!1)})),Vn(e,t)};Zn(k,(e=>{s()||e($)})),ce(b),Xe((()=>{y=mi(v,y,{id:`form-field-switch-${l()??""}`,class:`switch ${h()??""}`,type:"checkbox",name:l(),placeholder:i()[a()],disabled:d(),required:u(),readonly:c(),invalid:cn(p),onblur:m,oninput:m,"aria-controls":`input-field-helper-${l()??""}`,"aria-describedby":`input-field-helper-${l()??""}`,...g}),pi(b,"for",`form-field-switch-${l()??""}`)})),Fi(v,r),Vn(e,t)};Zn(b,(e=>{c()?e(k):e($,!1)})),Vn(e,y),mn()},UISwitchList:function(e,t){pn(t,!0);let n=er(t,"value",31,(()=>Oe([]))),i=er(t,"variants",19,(()=>[])),r=er(t,"fieldname",3,"textfield"),o=er(t,"required",3,!0),s=er(t,"readonly",3,!1),a=er(t,"disabled",3,!1),l=er(t,"valid",3,!0),u=er(t,"class",3," is-rounded is-success "),c=er(t,"onchange",3,(()=>!0)),d=Ki(t,["$$slots","$$events","$$legacy","value","variants","fieldname","required","readonly","disabled","valid","class","onchange"]);function f(e){const t=e.target.id.split("-variant-").at(-1);e.target.checked?function(e){n().includes(e)||(n().push(e),n(n()))}(t):function(e){n().includes(e)&&(n().splice(n().indexOf(e),1),n(n()))}(t);let i={field:r(),value:n()};return c()(i),!0}let h=De((()=>!l()));var v=Bn(),g=Fe(v),p=e=>{var t=Bn(),r=Fe(t),o=e=>{var t=zn();Xe((()=>Gn(t,i().filter((e=>n().includes(e.id))).map((e=>e.title)).join(", ")))),Vn(e,t)};Zn(r,(e=>{n()&&e(o)})),Vn(e,t)},m=e=>{var t=Bn();ii(Fe(t),17,i,(e=>e.id),((e,t)=>{var i=al(),l=Ne(i);let c;vi(l),us(Ue(l,2),{class:"label",get for(){return`form-field-switch-${r()??""}-variant-${cn(t).id??""}`},get label(){return cn(t).title}}),ce(i),Xe((()=>c=mi(l,c,{type:"checkbox",class:`switch ${u()??""}`,id:`form-field-switch-${r()??""}-variant-${cn(t).id??""}`,checked:n().includes(cn(t).id),name:r(),disabled:a(),required:o(),readonly:s(),invalid:cn(h),onblur:f,oninput:f,"aria-controls":`input-field-helper-${r()??""}-variant-${cn(t).id??""}`,"aria-describedby":`input-field-helper-${r()??""}-variant-${cn(t).id??""}`,...d}))),Vn(e,i)})),Vn(e,t)};Zn(g,(e=>{s()?e(p):e(m,!1)})),Vn(e,v),mn()},UITagSelect:function(e,t){pn(t,!0);const n=Hi();tr((()=>{i(i().filter((e=>p(e)))),i()}));let i=er(t,"value",31,(()=>Oe([]))),r=er(t,"LC_ADD",3,"not-node:add_label"),o=er(t,"LC_SELECT_FROM_LIST",3,"not-node:select_from_list_label"),s=er(t,"variants",19,(()=>[])),a=er(t,"fieldname",3,"tag"),l=er(t,"readonly",3,!1),u=er(t,"beforeAdd",3,(()=>!0)),c=er(t,"getItemId",3,(e=>e.id)),d=er(t,"getItemTitle",3,(e=>e.title)),f=er(t,"getItemType",3,(e=>"info")),h=er(t,"buildItem",3,(e=>({id:c()(e),title:d()(e),type:f()(e)}))),v=er(t,"class",3,""),g=er(t,"onchange",3,(()=>!0));function p(e){return s().find((t=>c()(t)===e))}function m(){g()({field:a(),value:i()})}function y(e){e&&e.preventDefault();let t=e.currentTarget.parentNode.querySelector("select").value;const n=p(t);return!!n&&(!!u()(n,s())&&(t&&-1===i().indexOf(t)&&(i().push(t),i(i()),m()),!1))}let b=De((()=>i().map(p).filter((e=>e)).map(h())));za(e,{get class(){return v()},children:(e,t)=>{var a=fl(),u=Fe(a);ja(u,{children:(e,t)=>{var r=Bn();ii(Fe(r),17,(()=>cn(b)),(e=>e.id),((e,t)=>{var r=cl(),o=Ne(r),s=Ue(o),a=e=>{var n=ul();n.__click=[ll,i,m],Xe((()=>pi(n,"data-id",cn(t).id))),Vn(e,n)};Zn(s,(e=>{l()||e(a)})),ce(r),Xe((()=>{Oi(r,`mx-1 tag is-${cn(t).type??""}`),Gn(o,`${qi(Mr,"$LOCALE",n)[cn(t).title]??""} `)})),Vn(e,r)})),Vn(e,r)},$$slots:{default:!0}});var c=Ue(u,2),d=e=>{ja(e,{children:(e,t)=>{var n=dl(),i=Fe(n),a=Ne(i),l=Ne(a);wo(l,{value:-1,selected:!0,get title(){return o()}}),ii(Ue(l),17,s,ni,((e,t)=>{wo(e,{get value(){return cn(t).id},get title(){return cn(t).title}})})),ce(a),ce(i),No(Ue(i,2),{color:"primary",size:"small",action:y,get title(){return r()}}),Vn(e,n)},$$slots:{default:!0}})};Zn(c,(e=>{l()||e(d)})),Vn(e,a)},$$slots:{default:!0}}),mn()},UITelephone:function(e,t){pn(t,!0);const n=Hi();let i=er(t,"value",15,""),r=er(t,"placeholder",3,"+7 (987) 654-32-10"),o=er(t,"fieldname",3,"telephone"),s=er(t,"required",3,!0),a=er(t,"disabled",3,!1),l=er(t,"readonly",3,!1),u=er(t,"valid",3,!0),c=er(t,"class",3,""),d=er(t,"onchange",3,(()=>!0)),f=Ki(t,["$$slots","$$events","$$legacy","value","placeholder","fieldname","required","disabled","readonly","valid","class","onchange"]),h=De((()=>!u()));const v=_r.onInput(o(),d());var g=Bn(),p=Fe(g),m=e=>{var t=hl(),n=Ne(t,!0);ce(t),Xe((()=>Gn(n,i()))),Vn(e,t)},y=e=>{var t=vl();let u;vi(t),Xe((()=>u=mi(t,u,{id:`form-field-telephone-${o()??""}`,class:`input ${c()??""}`,type:"tel",name:o(),invalid:cn(h),required:s(),readonly:l(),disabled:a(),placeholder:qi(Mr,"$LOCALE",n)[r()],autocomplete:o(),onchange:v,oninput:v,"aria-controls":`input-field-helper-${o()??""}`,"aria-describedby":`input-field-helper-${o()??""}`,...f}))),Ni(t,i),Vn(e,t)};Zn(p,(e=>{l()?e(m):e(y,!1)})),Vn(e,g),mn()},UITextarea:ra,UITextfield:is}),pl=Object.freeze({__proto__:null,UILink:pa,UILinks:ba}),ml=Wn('<div class="column box"> </div>'),yl=Wn('<div class="columns"><div class="column"><!></div> <!> <div class="column"><!></div></div>');function bl(e,t){pn(t,!0);const n=Hi(),i=()=>qi(Mr,"$LOCALE",n),r=ir();let o=er(t,"page",3,0),s=er(t,"pages",3,0),a=er(t,"buttonComponent",3,No),l=er(t,"buttonComponentProps",19,(()=>({})));var u=Bn(),c=Fe(u),d=e=>{var t=yl(),n=Ne(t),u=Ne(n),c=e=>{var t=Bn();const n=De(a);fi(Fe(t),(()=>cn(n)),((e,t)=>{t(e,Xi(l,{action:()=>r("prev"),children:(e,t)=>{de();var n=zn();Xe((()=>Gn(n,i()["not-node:list_navigation_prev_button_label"]))),Vn(e,n)},$$slots:{default:!0}}))})),Vn(e,t)};Zn(u,(e=>{o()>1&&e(c)})),ce(n);var d=Ue(n,2),f=e=>{var t=ml(),n=Ne(t);ce(t),Xe((()=>Gn(n,`${o()??""} / ${s()??""}`))),Vn(e,t)};Zn(d,(e=>{s()>1&&e(f)}));var h=Ue(d,2),v=Ne(h),g=e=>{var t=Bn();const n=De(a);fi(Fe(t),(()=>cn(n)),((e,t)=>{t(e,Xi(l,{action:()=>r("next"),children:(e,t)=>{de();var n=zn();Xe((()=>Gn(n,i()["not-node:list_navigation_next_button_label"]))),Vn(e,n)},$$slots:{default:!0}}))})),Vn(e,t)};Zn(v,(e=>{o()<s()&&e(g)})),ce(h),ce(t),Vn(e,t)};Zn(c,(e=>{s()>0&&e(d)})),Vn(e,u),mn()}var kl=Wn('<div class="box list-item-selectable svelte-ialyiy" role="button" tabindex="0"><span> </span></div>');function $l(e,t){pn(t,!0);const n=ir();function i(){n("click",{_id:t._id,id:t.id,title:t.title})}var r=kl(),o=De((()=>Wi(i)));r.__click=function(...e){cn(o)?.apply(this,e)},r.__keyup=i;var s=Ne(r),a=Ne(s,!0);ce(s),ce(r),Xe((()=>Gn(a,t.title))),Vn(e,r),mn()}Dn(["click","keyup"]);var wl=Wn("<div><!></div> <!>",1);function Ol(e,t){pn(t,!0);const n=ir();let i=er(t,"data",31,(()=>Oe({list:[],skip:0,count:0,page:0,pages:0}))),r=er(t,"itemComponent",3,$l),o=er(t,"itemComponentProps",19,(()=>({}))),s=er(t,"emptyListPlaceholderComponent",3,ca),a=er(t,"emptyListPlaceholderComponentProps",19,(()=>({}))),l=er(t,"listNavigationComponent",3,bl),u=er(t,"listNavigationComponentProps",19,(()=>({})));function c({detail:e}){n("select",e)}const d=De(l);var f=wl(),h=Fe(f),v=Ne(h),g=e=>{var t=Bn();ii(Fe(t),17,(()=>i().list),(e=>e.id),((e,t)=>{var n=Bn();const i=De(r);fi(Fe(n),(()=>cn(i)),((e,n)=>{n(e,Xi(o,(()=>cn(t)),{$$events:{click:c}}))})),Vn(e,n)})),Vn(e,t)},p=e=>{var t=Bn();const n=De(s);fi(Fe(t),(()=>cn(n)),((e,t)=>{t(e,Xi(a))})),Vn(e,t)};Zn(v,(e=>{i().list.length?e(g):e(p,!1)})),ce(h),fi(Ue(h,2),(()=>cn(d)),((e,n)=>{n(e,Xi(u,{get page(){return i().page},set page(e){i(i().page=e,!0)},get pages(){return i().pages},set pages(e){i(i().pages=e,!0)},get skip(){return i().skip},set skip(e){i(i().skip=e,!0)},get count(){return i().count},set count(e){i(i().count=e,!0)},$$events:{prev(e){Bi.call(this,t,e)},next(e){Bi.call(this,t,e)}}}))})),Vn(e,f),mn()}var Il=Wn("<!> <!>",1);var _l=Object.freeze({__proto__:null,UIEndlessList:Ol,UIEndlessListNavigation:bl,UIEndlessListSimpleItem:$l,UIList:Da,UIListEmptyPlaceholder:ca,UIListItem:Ua,UIListSelect:function(e,t){pn(t,!0);const n=ir();let i=er(t,"fieldname",3,"list-select"),r=er(t,"multiple",3,!1),o=er(t,"atLeastOne",3,!0),s=er(t,"variants",31,(()=>Oe([]))),a=er(t,"value",15),l=er(t,"selectedVariantsIds",31,(()=>Oe([]))),u=er(t,"titleComponent",3,Yo),c=er(t,"titleComponentProps",19,(()=>({size:5}))),d=er(t,"imageComponent",3,Ss),f=er(t,"imageComponentProps",19,(()=>({covered:!0}))),h=er(t,"descriptionComponent",3,Uo),v=er(t,"descriptionComponentProps",19,(()=>({}))),g=er(t,"listComponent",3,Da),p=er(t,"listComponentProps",19,(()=>({}))),m=er(t,"sublimeValue",3,(e=>e.id)),y=er(t,"getItem",3,(({valueId:e})=>s().find((t=>t.value.id===e)))),b=er(t,"getItemValue",3,(({valueId:e})=>y()({valueId:e}).value)),k=er(t,"getDefaultItemSublime",3,(()=>s()[0].id)),$=er(t,"uiOn",3,(e=>{e.color="success",e.outlined=!1})),w=er(t,"uiOff",3,(e=>{e.color=!1,e.outlined=!0}));function O(){return Array.isArray(a())?l().length:0}tr((()=>{a()&&Array.isArray(a())?o()&&a().length&&a().forEach((e=>{C(_(e))})):function(){if(o()&&s().length>0){A({id:k()()})}}()}));const I=()=>!(o()&&1===O());function _(e){const t=m()(e);let n={on:void 0,off:void 0};return Array.isArray(l())||l([]),r()?l().includes(t)?I()&&(l().splice(l().indexOf(t),1),n.off={valueId:t}):(l().push(t),n.on={valueId:t}):o()?l().includes(t)||(O()>0&&(n.off={valueId:l().pop()}),n.on={valueId:t},l([t])):l().includes(t)?(n.off={valueId:t},l().splice(l().indexOf(t),1)):(n.on={valueId:t},l().push(t)),l(l()),n}function A(e){C(_(e)),function(){let e=[];void 0!==l()&&Array.isArray(l())&&(e=l().filter((e=>void 0!==e)).map((e=>b()({valueId:e}))));a(e)}(),n("change",{field:i(),value:a()})}function C(e){e.off&&w()(y()(e.off)),e.on&&$()(y()(e.on)),s(s())}const S=De(g);var E=Bn(),L=Fe(E),T=De((()=>({...v(),action(e,t){A(t)}})));fi(L,(()=>cn(S)),((e,t)=>{t(e,Xi(p,{get titleComponent(){return u()},get titleComponentProps(){return c()},get descriptionComponent(){return h()},get descriptionComponentProps(){return cn(T)},get imageComponent(){return d()},get imageComponentProps(){return f()},get items(){return s()},set items(e){s(e)}}))})),Vn(e,E),mn()},UIListSelectButtonsWithGroups:function(e,t){pn(t,!0);let n=er(t,"onchange",3,(()=>!0)),i=er(t,"fieldname",3,"list-select-tags"),r=er(t,"variants",31,(()=>Oe([]))),o=er(t,"value",15),s=er(t,"titleComponent",3,Yo),a=er(t,"titleComponentProps",19,(()=>({size:5}))),l=er(t,"imageComponent",3,Ss),u=er(t,"imageComponentProps",19,(()=>({covered:!0}))),c=er(t,"descriptionComponent",3,jo),d=er(t,"descriptionComponentProps",19,(()=>({}))),f=er(t,"listComponent",3,Da),h=er(t,"listComponentProps",19,(()=>({}))),v=er(t,"actionsList",19,(()=>["selectAll","deselectAll"])),g=er(t,"sublimeValue",3,(e=>({groupId:e.group,valueId:e.id})));const p={selectAll:{title:"Выбрать все",color:"success",action(){y()}},deselectAll:{title:"Снять выделение со всех",color:"",action(){b()}}};let m=H(Oe([]));tr((()=>{v().forEach((e=>{Object.hasOwn(p,e)&&cn(m).push(p[e])})),Q(m,Oe(cn(m)))}));const y=()=>{$(!0)},b=()=>{$(!1)},k=(e,t)=>{r().forEach((n=>{e===n.id&&n.description.values.forEach((e=>{e.selected=t}))})),r(r()),O()},$=e=>{r().forEach((t=>{t.description.values.forEach((t=>{t.selected=e}))})),r(r()),O()};function w(){let e={};return r().forEach((t=>{Object.hasOwn(e,t.id)||(e[t.id]=[]),t.description.values.forEach((n=>{n.selected&&e[t.id].push(g()(n.value))}))})),e}function O(){o(w()),n()({fieldname:i(),value:o()})}const I=De(f);var _=Il(),A=Fe(_);Uo(A,{get values(){return cn(m)},centered:!0});var C=Ue(A,2),S=De((()=>({action:(e,t,n)=>(setTimeout(O,0),!n),...d()})));return fi(C,(()=>cn(I)),((e,t)=>{t(e,Xi(h,{get titleComponent(){return s()},get titleComponentProps(){return a()},get descriptionComponent(){return c()},get descriptionComponentProps(){return cn(S)},get imageComponent(){return l()},get imageComponentProps(){return u()},get items(){return r()},set items(e){r(e)}}))})),Vn(e,_),mn({selectAll:y,deselectAll:b,selectGroup:e=>{k(e,!0)},deselectGroup:e=>{k(e,!1)},setSelectionOfGroup:k,setSelectionOfAll:$,getSelectedItems:w})},UIListSelectWithGroups:function(e,t){pn(t,!0);let n=er(t,"onchange",3,(()=>!0)),i=er(t,"fieldname",3,"list-select-tags"),r=er(t,"multiple",3,!1),o=er(t,"onlyOneInGroup",3,!0),s=er(t,"atLeastOne",3,!0),a=er(t,"variants",31,(()=>Oe([]))),l=er(t,"variantsSelected",31,(()=>Oe({}))),u=er(t,"value",15),c=er(t,"titleComponent",3,Yo),d=er(t,"titleComponentProps",19,(()=>({size:5}))),f=er(t,"imageComponent",3,Ss),h=er(t,"imageComponentProps",19,(()=>({covered:!0}))),v=er(t,"descriptionComponent",3,Uo),g=er(t,"descriptionComponentProps",19,(()=>({}))),p=er(t,"listComponent",3,Da),m=er(t,"listComponentProps",19,(()=>({}))),y=er(t,"sublimeValue",3,(e=>({groupId:e.group,valueId:e.id}))),b=er(t,"getItem",3,(({groupId:e,valueId:t})=>a().find((t=>t.id===e)).description.values.find((e=>e.value.id===t)))),k=er(t,"getItemValue",3,(({groupId:e,valueId:t})=>b()({groupId:e,valueId:t}).value)),$=er(t,"getDefaultItemSublime",3,(()=>({groupId:a()[0].id,valueId:a()[0].description.values[0].value.id}))),w=er(t,"uiOn",3,(e=>{e.color="success",e.outlined=!1})),O=er(t,"uiOff",3,(e=>{e.color=!1,e.outlined=!1}));function I(e){const{valueId:t,groupId:n}=y()(e);let i={on:void 0,off:void 0};return r()?(o()?(void 0!==l()[n]&&(i.off={groupId:n,valueId:l()[n]}),l(l()[n]=t,!0),i.on={groupId:n,valueId:t}):(Array.isArray(l()[n])||l(l()[n]=[],!0),l()[n].includes(t)?function(){let e=0;if(r())for(let t of Object.values(l()))o()?void 0!==t&&e++:void 0!==t&&Array.isArray(t)&&(e+=t.length);else void 0!==l()&&void 0!==l().value&&void 0!==l().group&&e++;return e}()>1&&(l()[n].splice(l()[n].indexOf(t),1),i.off={groupId:n,valueId:t}):(l()[n].push(t),i.on={groupId:n,valueId:t}),l(l()[n]=l()[n],!0)),l(l())):l()&&l().groupId===n&&l().valueId===t?s()||(l(void 0),i.off={groupId:n,valueId:t}):(l()&&void 0!==l().groupId&&(i.off={groupId:l().groupId,valueId:l().valueId}),i.on={groupId:n,valueId:t},l({groupId:n,valueId:t})),i}function _(e){A(I(e)),function(){if(r()){let e={};if(o())for(let t in l())void 0!==l()[t]&&(e[t]=k()({groupId:t,valueId:l()[t]}));else for(let t in l())void 0!==l()[t]&&Array.isArray(l()[t])&&(e[t]=l()[t].filter((e=>void 0!==e)).map((e=>k()({groupId:t,valueId:e}))));0==Object.keys(e).length?u(void 0):u(e)}else l()?u(k()(l())):u(void 0)}(),n()({field:i(),value:u()})}function A(e){e.off&&O()(b()(e.off)),e.on&&w()(b()(e.on)),a(a())}tr((()=>{if(u())if(r())if(o())for(let e of Object.keys(u())){A(I(u()[e]))}else for(let e of Object.keys(u()))u()[e].forEach((e=>{A(I(e))}));else{A(I(u()))}else!function(){if(s()&&a().length>0){const e=$()();_({id:e.valueId,group:e.groupId})}}()}));const C=De(p);var S=Bn(),E=Fe(S),L=De((()=>({...g(),action(e,t){_(t)}})));fi(E,(()=>cn(C)),((e,t)=>{t(e,Xi(m,{get titleComponent(){return c()},get titleComponentProps(){return d()},get descriptionComponent(){return v()},get descriptionComponentProps(){return cn(L)},get imageComponent(){return f()},get imageComponentProps(){return h()},get items(){return a()},set items(e){a(e)}}))})),Vn(e,S),mn()}});function Al(e,t,n){t()&&n(e)}function Cl(e,t){t()}var Sl=Wn('<button aria-label="delete button"></button>'),El=Wn('<div role="button" tabindex="0"><!> <!></div>');function Ll(e,t){pn(t,!0);let n=H("");let i=er(t,"closeButton",3,!1),r=er(t,"show",3,!0),o=er(t,"closeOnClick",3,!0),s=er(t,"closeSize",3,"normal"),a=er(t,"layer",3,1),l=er(t,"classes",3,""),u=er(t,"onreject",3,(()=>!1));function d(e){try{if(e&&e.originalTarget){const t=e.originalTarget;t.classList&&t.classList.contains("is-overlay")&&f()}}catch{}}function f(e={}){u()(e)}tr((()=>{Q(n,Oe(document.body.style.overflow)),r()?document.body.style.overflow="hidden":document.body.style.overflow=cn(n)})),nr((()=>{document.body.style.overflow=cn(n)}));var h=Bn(),v=Fe(h),g=e=>{var n=El();n.__click=[Al,o,d],n.__keyup=[Al,o,d];var r=Ne(n),u=e=>{var t=Sl();t.__click=[Cl,f],Xe((()=>Oi(t,`delete is-${s()??""}`))),Vn(e,t)};Zn(r,(e=>{i()&&e(u)})),di(Ue(r,2),(()=>t.children??c)),ce(n),Xe((()=>{Oi(n,`is-overlay not-overlay ${l()??""}`),pi(n,"style",`z-index: ${1e3*a()??""};`)})),Ti(3,n,(()=>Fs)),Vn(e,n)};Zn(v,(e=>{r()&&e(g)})),Vn(e,h),mn()}Dn(["click","keyup"]);var Tl=Wn('<div><span class="title"> </span></div> <!> <!> <!>',1),xl=Wn("<!> <!>",1);var Nl=Wn("<div><!> <!> <!></div>");function Fl(e,t){pn(t,!0);const n=Hi();let i=ir(),r=er(t,"show",3,!0),o=er(t,"term",15,""),s=er(t,"size",3,"narrow"),a=er(t,"inputComponent",3,os),l=er(t,"inputComponentProps",19,(()=>({}))),u=er(t,"outputComponent",3,Ol),c=er(t,"outputComponentProps",19,(()=>({}))),d=er(t,"results",31,(()=>Oe({list:[],page:0,pages:0,skip:0,count:0})));tr((()=>{}));const f=[{title:qi(Mr,"$LOCALE",n)["not-node:button_cancel_label"],action:()=>{i("reject")}}];function h({detail:e}){console.log("selected user",e),i("resolve",e)}Ll(e,{get show(){return r()},closeOnClick:!0,closeButton:!1,$$events:{reject:function(){i("reject")}},children:(e,n)=>{var i=Nl();const r=De(a),v=De(u);var g=Ne(i);fi(g,(()=>cn(r)),((e,n)=>{n(e,Xi(l,{get term(){return o()},set term(e){o(e)},$$events:{termChange(e){Bi.call(this,t,e)}}}))}));var p=Ue(g,2);fi(p,(()=>cn(v)),((e,n)=>{n(e,Xi(c,{get data(){return d()},set data(e){d(e)},$$events:{prev(e){Bi.call(this,t,e)},next(e){Bi.call(this,t,e)},select:h}}))})),Uo(Ue(p,2),{values:f,centered:!0,classes:"mt-5"}),ce(i),Xe((()=>Oi(i,`paper box block ${s()??""} svelte-1gllhdk`))),Vn(e,i)},$$slots:{default:!0}}),mn()}var Ul=Object.freeze({__proto__:null,UIGenericSelector:Fl,UIModal:function(e,t){pn(t,!0);const n=Hi(),i=()=>qi(Mr,"$LOCALE",n);let r=er(t,"buttonsPosition",3,"bottom"),o=er(t,"closeButton",3,!1),s=er(t,"applyButton",3,!1),a=er(t,"titleSize",3,2),l=er(t,"show",3,!1),u=er(t,"loading",3,!1),d=er(t,"title",3,"Modal window"),f=er(t,"subtitle",3,""),h=er(t,"classes",3,""),v=er(t,"overlayClasses",3,""),g=er(t,"buttonsClasses",3,""),p=er(t,"WAITING_TEXT",3,"Обработка");Ll(e,{get show(){return l()},closeOnClick:!1,closeButton:!1,get classes(){return v()},children:(e,n)=>{Er(e,{get classes(){return h()},children:(e,n)=>{var l=xl(),h=Fe(l);Yo(h,{get size(){return a()},get title(){return i()[d()]},get subtitle(){return i()[f()]}}),Tr(Ue(h,2),{children:(e,n)=>{var a=Tl(),l=Fe(a),d=Ne(l),f=Ne(d,!0);ce(d),ce(l);var h=Ue(l,2),v=e=>{var t=De((()=>o()?[o()]:[])),n=De((()=>s()?[s()]:[]));Do(e,{get classes(){return g()},get left(){return cn(t)},get right(){return cn(n)}})};Zn(h,(e=>{"top"===r()&&e(v)}));var m=Ue(h,2);di(m,(()=>t.children??c));var y=Ue(m,2),b=e=>{var t=De((()=>g()||"is-footer is-mobile")),n=De((()=>o()?[o()]:[])),i=De((()=>s()?[s()]:[]));Do(e,{get classes(){return cn(t)},get left(){return cn(n)},get right(){return cn(i)}})};Zn(y,(e=>{"bottom"===r()&&e(b)})),Xe((()=>{Oi(l,`pageloader ${(u()?"is-active":"")??""}`),Gn(f,i()[p()])})),Vn(e,a)},$$slots:{default:!0}}),Vn(e,l)},$$slots:{default:!0}})},$$slots:{default:!0}}),mn()},UIOverlay:Ll}),Ml=Wn('<article class="message is-danger"><div class="message-header"><p> </p></div> <div class="message-body"> </div></article>');function Dl(e,t){pn(t,!0);const n=Hi(),i=()=>qi(Mr,"$LOCALE",n);var r=Ml(),o=Ne(r),s=Ne(o),a=Ne(s,!0);ce(s),ce(o);var l=Ue(o,2),u=Ne(l,!0);ce(l),ce(r),Xe((()=>{Gn(a,i()[t.title]),Gn(u,i()[t.message])})),Vn(e,r),mn()}var Pl=Wn('<article class="message is-success"><div class="message-header"><p> </p></div> <div class="message-body"> </div></article>');function Rl(e,t){pn(t,!0);const n=Hi(),i=()=>qi(Mr,"$LOCALE",n);var r=Pl(),o=Ne(r),s=Ne(o),a=Ne(s,!0);ce(s),ce(o);var l=Ue(o,2),u=Ne(l,!0);ce(l),ce(r),Xe((()=>{Gn(a,i()[t.title]),Gn(u,i()[t.message])})),Vn(e,r),mn()}function jl(e,t){localStorage.setItem("cookie_date",Date.now()),t(!1)}var Wl=Wn('<div id="cookie_notification" class="svelte-19d5xat"><p class="svelte-19d5xat"> </p> <button class="button is-success cookie_accept svelte-19d5xat"> </button></div>');Dn(["click"]);var zl=Object.freeze({__proto__:null,UICookieNotification:function(e,t){pn(t,!0);const n=Hi(),i=()=>qi(Mr,"$LOCALE",n);let r=er(t,"show",15,!1),o=er(t,"message",3,"Для улучшения работы сайта и его взаимодействия с пользователями мы используем файлы cookie. Продолжая работу с сайтом, Вы разрешаете использование cookie-файлов. Вы всегда можете отключить файлы cookie в настройках Вашего браузера."),s=er(t,"agree",3,"Хорошо");tr((()=>{let e=localStorage.getItem("cookie_date");(!e||+e+31536e6<Date.now())&&r(!0)}));var a=Bn(),l=Fe(a),u=e=>{var t=Wl(),n=Ne(t),a=Ne(n,!0);ce(n);var l=Ue(n,2);l.__click=[jl,r];var u=Ne(l,!0);ce(l),ce(t),Xe((()=>{Gn(a,i()[o()]),Gn(u,i()[s()])})),Vn(e,t)};Zn(l,(e=>{r()&&e(u)})),Vn(e,a),mn()},UIError:Dl,UISuccess:Rl}),Bl=Object.freeze({__proto__:null,Blocks:xr,Buttons:Wo,Forms:_s,Icons:ys,Images:Ls,Inputs:gl,Layouts:Ka,Links:pl,Lists:_l,Modals:Ul,Notifications:zl,UICommon:_r,Various:ss});const Vl=Symbol("init"),ql=Symbol("data"),Hl=Symbol("working"),Gl=Symbol("options");let Kl=function(e){function t(e){var n;return cr(this,t),(n=lr(this,t))[ql]={},n[Hl]={},n[Gl]={},n[Vl](e),$r(n,n)}return br(t,e),pr(t,[{key:Vl,value:function(e){e||(e={}),Object.hasOwn(e,"data")&&this.setData(e.data),Object.hasOwn(e,"working")&&this.setWorking(e.working),Object.hasOwn(e,"options")&&this.setOptions(e.options),this.log=to.genLogMsg(this.getWorking("name")),this.info=this.log,this.debug=to.genLogDebug(this.getWorking("name")),this.error=to.genLogError(this.getWorking("name"))}},{key:"setCommon",value:function(e,t){switch(t.length){case 1:e=t[0];break;case 2:Jr.set(t[0],e,void 0,t[1])}return this}},{key:"getCommon",value:function(e,t){switch(t.length){case 1:return Jr.get(t[0],e);case 2:{let n=Jr.get(t[0],e);return void 0===n?t[1]:n}default:return e}}},{key:"setData",value:function(){return 1===arguments.length?this[ql]=arguments[0]:this.setCommon(this.getData(),arguments),this.emit("change"),this}},{key:"getData",value:function(){return this.getCommon(this[ql],arguments)}},{key:"setOptions",value:function(){return 1===arguments.length?this[Gl]=arguments[0]:this.setCommon(this.getOptions(),arguments),this}},{key:"getOptions",value:function(){return this.getCommon(this[Gl],arguments)}},{key:"setWorking",value:function(){return 1===arguments.length?this[Hl]=arguments[0]:this.setCommon(this.getWorking(),arguments),this}},{key:"getWorking",value:function(){return this.getCommon(this[Hl],arguments)}},{key:"report",value:function(e){to.report&&to.report(e)}},{key:"getApp",value:function(){return to.getApp()}},{key:"destroy",value:function(){this.removeEvent(),this.setOptions(null),this.setWorking(null),this.setData(null),this.emit("destroy")}}])}(Hr);const Jl=Symbol("history"),Yl=Symbol("hash");let Ql=function(e){function t(){var e;return cr(this,t),mr(e=lr(this,t,[{working:{routes:[],mode:Jl,root:"/",initialized:!1,delays:Bo,delay_default:Vo}}]),"host",""),$r(e,e)}return br(t,e),pr(t,[{key:"setDelays",value:function(e){return this.setWorking("delays",e),this}},{key:"setDefaultNavigationDelay",value:function(e){return this.setWorking("delay_default",this.delayAsMs(e)),this}},{key:"getDefaultNavigationDelay",value:function(){return this.getWorking("delay_default",Vo)}},{key:"delayAsMs",value:function(e){return"number"==typeof e?e:"string"==typeof e&&e.length>0?this.getWorking(`delays.${e}`,this.getDefaultNavigationDelay()):this.getDefaultNavigationDelay()}},{key:"navigateWithDelay",value:function(e,t,n){var i=this;return setTimeout((function(){"function"==typeof n&&n(),i.navigate(e)}),this.delayAsMs(t))}},{key:"history",value:function(){this.setWorking("mode",Jl)}},{key:"hash",value:function(){this.setWorking("mode",Yl)}},{key:"setRoot",value:function(e){return this.setWorking("root",e&&"/"!==e?"/"+this.clearSlashes(e)+"/":"/"),this}},{key:"clearSlashes",value:function(e){return e.toString().replace(/\/$/,"").replace(/^\//,"")}},{key:"add",value:function(e,t){"function"==typeof e&&(t=e,e="");let n={re:e,handler:t};return this.getWorking("routes").push(n),this}},{key:"addList",value:function(e){for(let t in e)this.add(t,e[t]);return this}},{key:"remove",value:function(e){for(var t,n=0;this.getWorking("routes").length,t=this.getWorking("routes")[n];n++)if(t.handler===e||t.re===e)return this.getWorking("routes").splice(n,1),this;return this}},{key:"flush",value:function(){return this.setWorking({routes:[],mode:Jl,root:"/"}),this}},{key:"isInitialized",value:function(){return this.getWorking("initialized")}},{key:"setInitialized",value:function(e=!0){return this.setWorking("initialized",e)}},{key:"getFragment",value:function(){var e="";if(this.getWorking("mode")===Jl){if(!location)return"";e=(e=this.clearSlashes(decodeURI(location.pathname+location.search))).replace(/\?(.*)$/,""),e="/"!=this.getWorking("root")?e.replace(this.getWorking("root"),""):e}else{if(!window)return"";var t=window.location.href.match(/#(.*)$/);e=t?t[1]:""}return this.clearSlashes(e)}},{key:"checkLocation",value:function(){let e=this.getWorking("current"),t=this.getFragment(),n=this.isInitialized();e===t&&n||(this.setWorking("current",t),this.check(t),this.setInitialized(!0))}},{key:"hrefClick",value:function(){}},{key:"getRoot",value:function(){return this.getWorking("root")}},{key:"listen",value:function(e=50){return this.setWorking("current","notInitialized"),clearInterval(this.getWorking("interval")),this.setWorking("interval",setInterval(this.checkLocation.bind(this),e)),window.addEventListener("popstate",this.hrefClick.bind(this)),this}},{key:"check",value:function(e){let t=e||this.getFragment(),n=null;for(let e=0;e<this.getWorking("routes").length;e++){let i=this.getWorking("root")+this.getWorking("routes")[e].re,r=this.clearSlashes(decodeURI(i)),o=t.match(r);if(o&&o.length){if(""!==r)return o.shift(),this.getWorking("routes")[e].handler.apply(this.host||{},o),this.emit("afterRoute",this.getWorking("routes")[e]),this;o.shift(),n={route:this.getWorking("routes")[e],match:o}}}return n&&(n.route.handler.apply(this.host||{},n.match),this.emit("afterRoute",n.route)),this}},{key:"refresh",value:function(e=0){var t=this;e>0?setTimeout((function(){return t.refresh()}),e):this.check(this.getWorking("current"))}},{key:"navigate",value:function(e){switch(e=e||"",this.getWorking("mode")){case Jl:{const t=this.getFullRoute(e);t===this.lastRoute?this.refresh():(this.lastRoute=t,history.pushState(null,"",this.lastRoute));break}case Yl:window.location.href.match(/#(.*)$/),window.location.href=window.location.href.replace(/#(.*)$/,"")+"#"+e}return this}},{key:"getFullRoute",value:function(e=""){e=this.clearSlashes(e);const t=this.getWorking("root");return"/"!==t&&0===e.indexOf(t.substring(1))?"/"+e:this.getWorking("root")+this.clearSlashes(e)}},{key:"getAllLinks",value:function(){const e=document.body.querySelectorAll("a");let t=[];for(let n=0;n<e.length;n++)for(let i=0,r=e[n].attributes,o=r.length;i<o;i++)if(0===r[i].nodeName.indexOf("n-href")){t.push(e[n]);break}return t}},{key:"reRouteExisted",value:function(){const e=this.getAllLinks();for(let t=0;t<e.length;t++)this.initRerouting(e[t],e[t].getAttribute("n-href"));return this}},{key:"initRerouting",value:function(e,t){var n=this;if(!e.notRouterInitialized){let i=this.getFullRoute(t);e.setAttribute("href",i),e.addEventListener("click",(function(e){return e.preventDefault(),n.navigate(t),!1})),e.notRouterInitialized=!0}return this}}])}(Kl);var Xl=new Ql;let Zl=function(e){function t(e={}){var n;return cr(this,t),(n=lr(this,t,[{working:{name:e.name?e.name:"APIQuee"},options:e}])).busy=!1,n.queue=[],n.busySince=-1,n.afterEmpty=void 0,n.start(),$r(n,n)}return br(t,e),pr(t,[{key:"stop",value:function(){this.interval&&(clearInterval(this.interval),this.interval=void 0,this.busy=!1,this.busySince=-1)}},{key:"start",value:function(){this.stop(),this.interval=setInterval(this.checkQueue.bind(this),this.QUEUE_CHECK_INTERVAL)}},{key:"checkQueue",value:function(){var e=this;if(this.isEmpty()||this.isBusy()){if(!this.isBusy()&&this.afterEmpty){let e=this.afterEmpty;this.afterEmpty=void 0,e()}}else this.setBusy().runNext().then(this.setFree.bind(this)).catch((function(t){e.error&&e.error(t),e.setFree()}))}},{key:"addToQueue",value:function(e){this.queue.push(e)}},{key:"runNext",value:function(){let e=this.queue.map((function(e){return e.title})).join(", ");this.debug&&this.debug(`tasks [${e}]`);let t=this.queue.shift();return to.isFunc(t.action)?to.isFunc(t.resolve)?t.action().then(t.resolve):(this.error&&this.error("В задании нет возвратной части, resolve не функция",t.title),t.action()):(this.error&&this.error("В задании нет исполнимой части, action не функция",t.title),Promise.resolve())}},{key:"isBusy",value:function(){let e=!!this.busy,n=Date.now()/1e3;return!!(e&&this.busySince>-1)&&(!(n-this.busySince>t.MAX_BUSY_TIME)||(this.setFree(),!1))}},{key:"setBusy",value:function(){return this.busy=!0,this.busySince=Date.now()/1e3,this}},{key:"setFree",value:function(){return this.busy=!1,this.busySince=-1,this}},{key:"isEmpty",value:function(){return 0===this.queue.length}},{key:"run",value:function(e,t=void 0,n=""){var i=this;return t&&void 0===this.afterEmpty&&(this.afterEmpty=t),new Promise((function(t,r){try{i.addToQueue({action:e,resolve:t,title:n})}catch(e){i.error&&i.error(e),r(e)}}))}},{key:"actionIsQueued",value:function(e){return this.queue.some((function(t){return t.title==e}))}},{key:"runIfNotQueued",value:function(e,t=void 0,n=""){return this.actionIsQueued(n)?Promise.resolve():this.run(e,t,n)}}])}(Kl);mr(Zl,"QUEUE_CHECK_INTERVAL",100),mr(Zl,"MAX_BUSY_TIME",300);let eu=function(e){function t(e){var n;return cr(this,t),(n=lr(this,t,[{options:e,working:{name:e.name?e.name:"APIConnection"}}])).online=null,n.run(),$r(n,n)}return br(t,e),pr(t,[{key:"run",value:function(){this.int=window.setInterval(this.check.bind(this),1e3)}},{key:"pause",value:function(){window.clearInterval(this.int)}},{key:"resume",value:function(){this.run()}},{key:"isOnline",value:function(){return window.navigator.onLine}},{key:"check",value:function(){let e=this.isOnline();null!==this.online&&this.online!==e&&this.changeState(e),this.online=e}},{key:"changeState",value:function(e=!1){e?this.emit("online"):this.emit("offline")}}])}(Kl);mr(eu,"int",void 0),mr(eu,"online",void 0);var tu=Object.freeze({__proto__:null,notAPIConnection:eu,notAPIOptions:{rps:50,protocol:"http",host:"localhost",port:9e3},notAPIQueue:Zl});const nu={};function iu(e){return to.objHas(nu,e)}var ru=Object.freeze({__proto__:null,create:function(e,t={raw:[],filtered:[],selected:{}}){if(!iu(e)){if(!(Object.keys(t).length>0))throw new Error("store's props wasn't specified");nu[e]={},Object.keys(t).forEach((function(n){nu[e][n]=Fr(t[n])}))}return nu[e]},fake:function(e){return{subscribe:t=>(t(e),function(){}),set(){}}},get:function(e){return!!iu(e)&&nu[e]}});const ou=Symbol("interface"),su=["getActionsCount","getActions","setFindBy","resetFilter","setFilter","getFilter","setSorter","getSorter","resetSorter","setPageNumber","setPageSize","setPager","setReturn","setSearch","getSearch","resetSearch","resetPager","getPager","addFormFieldType","addFormField","getFieldTypes","getActionFormFields"],au=["_id","id","ID"],lu={},uu={};let cu=function(e){function t(e,n){var i;return cr(this,t),(i=lr(this,t,[{working:{name:"network interface for: "+(e.model?e.model:"unknown"),filter:lu,search:"",return:uu,pager:{size:10,page:0}},options:n}])).manifest=e,i.initActions(),$r(i,i)}return br(t,e),pr(t,[{key:"initActions",value:function(){if(this.getActionsCount()>0){let e=this.getActions();for(let t in e)this.initAction(t)}}},{key:"initAction",value:function(e){var t=this;to.objHas(this,"$"+e)||(this["$"+e]=function(n,i,r=!1,o){return t.request(t,e,n,i,r,o)})}},{key:"requestHTTP",value:function(e,t,n,i={},r=!1,o){try{let s=Object.assign({},e.getData&&"function"==typeof e.getData?e.getData():e,n),a=this.getActionData(t),l=this.collectRequestData(a),u=this.encodeRequest(l),c=this.getServerURL(),d=this.getURL(s,a,t),f={};if(r){d=this.getURL(n,a,t);const e=new FormData;e.append("file",o),f.body=e}else-1===["OPTIONS","GET"].indexOf(a.method.toUpperCase())&&(f={method:a.method,body:JSON.stringify(e.getData&&"function"==typeof e.getData?e.getData():e),headers:{Accept:"application/json","Content-Type":"application/json"}});return f.method=a.method.toUpperCase(),i&&Object.keys(i).length&&(f.headers=i),fetch(c+d+u,f).then((function(e){return e.json()}))}catch(e){to.error(e),to.report(e)}}},{key:"requestWS",value:function(e,t){try{let n=this.getActionData(t),i=this.collectRequestData(n);const r=to.getApp().getWSClient(),o=this.getWSRequestName(t),s=Object.assign({},i,e.getData());return to.objHas(n,"type")&&"string"==typeof n.type&&n.type.length&&"request"!==n.type?r.message(n.type,o,s).then((function(e){return e.payload})):r.request(o,s).then((function(e){return e.payload}))}catch(e){to.error(e),to.report(e)}}},{key:"request",value:function(){let e=this.getActionData(arguments[1]);switch(this.selectTransport(e)){case"ws":return this.requestWS(...arguments);case"http":return this.requestHTTP(...arguments);default:throw new Error("Offline")}}},{key:"wsIsUp",value:function(e){if(!0===e.ws){let t;if(t=to.objHas(e,"wsClient")&&e.wsClient?to.getApp().getWSClient(e.wsClient):to.getApp().getWSClient(),t)return!0}return!1}},{key:"selectTransport",value:function(e){return this.wsIsUp(e)?"ws":!!to.objHas(e,"method")&&"http"}},{key:"getModelName",value:function(){return this&&this.manifest?this.manifest.model:null}},{key:"getActionData",value:function(e){return this.getActions()&&this.getActions()[e]?this.getActions()[e]:null}},{key:"getActionsCount",value:function(){return this.getActions()?Object.keys(this.getActions()).length:0}},{key:"getActions",value:function(){return this.manifest&&this.manifest.actions?this.manifest.actions:{}}},{key:"parseParams",value:function(e,t,n,i){let r="",o=e.length;for(;n.indexOf(e)>-1;){let s=n.indexOf(e),a=s+o,l=n.indexOf(t);if(s>l)break;if(r=n.slice(a,l),""==r)break;this.log&&this.log(e+r+t,Jr.get(r,i)),n=n.replace(e+r+t,Jr.get(r,i))}return n}},{key:"parseLine",value:function(e,t,n){return e=(e=e.replace(":modelName",this.manifest.model)).replace(":actionName",n),e=this.parseParams(":record[","]",e,t),e=this.parseParams(":","?",e,t)}},{key:"getURL",value:function(e,t,n){return this.parseLine(this.manifest.url,e,n)+(to.objHas(t,"postFix")?this.parseLine(t.postFix,e,n):"")}},{key:"getServerURL",value:function(){return to.getApp()?to.getApp().getOptions("api.server.url",""):""}},{key:"getWSRequestName",value:function(e){return`${this.manifest.model}//${e}`}},{key:"encodeRequest",value:function(e){let t="?";for(let n in e)void 0!==e[n]&&null!==e[n]&&(t+=encodeURIComponent(n)+"="+encodeURIComponent(e[n].constructor===Object?JSON.stringify(e[n]):e[n])+"&");return this.getOptions("test")&&(t+="&test=1",this.getOptions("test.session")&&(t+="&session="+this.getOptions("test.session")),this.getOptions("test.session")&&(t+="&role="+this.getOptions("test.role"))),t}},{key:"collectRequestData",value:function(e){let t={};if(to.objHas(e,"data")&&Array.isArray(e.data))for(let n=0;n<e.data.length;n++){let i="get"+to.capitalizeFirstLetter(e.data[n]);if(this[i]&&"function"==typeof this[i]){let r=this[i](),o={};["pager","sorter","filter","search","return"].indexOf(e.data[n])>-1?o[e.data[n]]=r:o=r,t=Object.assign(t,o)}}return t}},{key:"getID",value:function(e,t){let n,i=au,r=["",this.manifest.model];to.objHas(t,"index")&&t.index&&(i=[t.index].concat(au));for(let t of r)for(let r of i)if(to.objHas(e,t+r)){n=e[t+r];break}return n}},{key:"setFindBy",value:function(e,t){var n={};return n[e]=t,this.setFilter(n)}},{key:"setFilter",value:function(e=lu){return this.setWorking("filter",e),this}},{key:"resetFilter",value:function(){return this.setFilter()}},{key:"getFilter",value:function(){return this.getWorking("filter")}},{key:"setSearch",value:function(e=""){return this.setWorking("search",e),this}},{key:"resetSearch",value:function(){return this.setSearch()}},{key:"getSearch",value:function(){return this.getWorking("search")}},{key:"setSorter",value:function(e){return this.setWorking("sorter",e),this}},{key:"resetSorter",value:function(){return this.setSorter({})}},{key:"getSorter",value:function(){return this.getWorking("sorter")}},{key:"setReturn",value:function(e=uu){return this.setWorking("return",e),this}},{key:"resetReturn",value:function(){return this.setReturn({})}},{key:"getReturn",value:function(){return this.getWorking("return")}},{key:"setPageNumber",value:function(e){return this.setWorking("pager.page",e),this}},{key:"setPageSize",value:function(e){return this.setWorking("pager.size",e),this}},{key:"setPager",value:function(){if((arguments.length<2||isNaN(arguments[0])||isNaN(arguments[1]))&&arguments[0].constructor===Object&&to.objHas(arguments[0],"page")&&to.objHas(arguments[0],"size")){const e=arguments[0];this.setWorking("pager",{size:e.size||10,page:e.page||0})}else 2!==arguments.length||isNaN(arguments[0])||isNaN(arguments[1])||this.setWorking("pager",{size:arguments[0]||10,page:arguments[1]||0});return this}},{key:"resetPager",value:function(){return this.setPager()}},{key:"getPager",value:function(){return this.getWorking("pager")}},{key:"getRecord",value:function(){this.getData()}},{key:"getDefaultAsPlainObject",value:function(){if(!this.manifest||!this.manifest.fields)return{};const e={};for(const t of Object.keys(this.manifest.fields))if(Object.hasOwn(this.manifest.fields[t],"default")){const n=this.manifest.fields[t].default;Array.isArray(n)?e[t]=[...n]:e[t]="object"==typeof n?{...n}:n}return e}}])}(Kl),du=function(e){function t(e,n){var i;return cr(this,t),i=lr(this,t),null==n||"object"!=typeof n?$r(i,n):n&&n.isProxy?(to.error("this is Proxy item"),$r(i,n)):n&&(n.isRecord||n.isProperty)?$r(i,n):Array.isArray(n)?$r(i,i.createCollection(e,n)):(i.setOptions({}),i[ou]=new cu(e,{}),i.setData(n),i.interfaceUp(),i.mapToInterface(),i.mapToMethods(),$r(i,i))}return br(t,e),pr(t,[{key:"toDefault",value:function(){return this.setData(this[ou].getDefaultAsPlainObject())}},{key:"mapToInterface",value:function(){let e=this;for(let t of su)this[ou][t]&&"function"==typeof this[ou][t]&&(this[t]=function(){let n=e[ou][t](...arguments);return n==e[ou]?e:n})}},{key:"mapToMethods",value:function(){let e=this[ou].manifest,t=to.getApp(),n={};if(e.methods?n=e.methods:t&&(n=t.getOptions(["models",this[ou].manifest.model].join("."),{})),n)for(let e in n)Object.hasOwn(n,e)&&(this[e]=n[e])}},{key:"createCollection",value:function(e,n){for(var i=[],r=0;r<n.length;r++)i.push(new t(e,n[r]));return i}},{key:"interfaceUp",value:function(){if(this[ou].getActionsCount()>0){let e=this[ou].getActions();for(let t in e)this.actionUp(t,e[t])}}},{key:"actionUp",value:function(e){var t=this;Object.hasOwn(this,["$"+e])||(this["$"+e]=function(...n){return t[ou].request(t,e,...n)})}},{key:"setAttr",value:function(e,t){return this.setData(e,t)}},{key:"setAttrs",value:function(e){if(e&&"object"==typeof e&&Object.keys(e).length>0)for(let t in e)this.setAttr(t,e[t])}},{key:"getAttr",value:function(e,t=!1){let n=this.getData(e,{});return t?to.stripProxy(n):n}},{key:"getAttrs",value:function(e){let t=[];if(e&&e.length>0)for(let n of e)t.push(this.getAttr(n));return t}},{key:"getManifest",value:function(){return this[ou]?this[ou].manifest:{}}},{key:"setItem",value:function(e){return this.setData(e),this}}])}(Kl);const fu="main";let hu=function(e){function t(e){var n;return cr(this,t),n=lr(this,t,[{working:{name:e.name,interfaces:{},controllers:to.objHas(e,"controllers")?e.controllers:{},initController:null,currentController:null,uis:{},wsc:{},wss:{},services:{}},options:e}]),n?.log&&n.log("start app"),to.register("app",n),n.initManifest(),$r(n,n)}return br(t,e),pr(t,[{key:"initManifest",value:function(){var e=this;to.getJSON(this.getOptions("manifestURL")).then((function(t){return e.setInterfaceManifest(t)})).catch((function(e){return to.report(e)}))}},{key:"initRouter",value:function(){this.setWorking("router",Xl),this.getWorking("router").setRoot(this.getOptions("router.root")),Xl.reRouteExisted()}},{key:"execRouter",value:function(){var e={};for(let t=0;t<this.getOptions("router.manifest").length;t++){let n=this.getOptions("router.manifest")[t],i=n.paths,r=n.schemes,o=n.controller;for(let t=0;t<i.length;t++){let n=!!(r&&Array.isArray(r)&&r.length>t)&&r[t];e[i[t]]=this.bindController(o,n)}}this.getWorking("router").addList(e).listen()}},{key:"setInterfaceManifest",value:function(e){Object.freeze(e),this.setOptions("interfaceManifest",e),this.initRouter(),this.update()}},{key:"getInterfaceManifest",value:function(e){return e?this.getOptions("interfaceManifest")[e]:this.getOptions("interfaceManifest")}},{key:"update",value:function(){this.updateInterfaces(),this.initController(),this.startApp()}},{key:"startApp",value:function(){this.initServices(),this.execRouter(),this.emit("afterStarted",this)}},{key:"bindController",value:function(e,t){let n=this;return function(){new e(n,arguments,t)}}},{key:"initController",value:function(){if(void 0!==this.getOptions("initController")){let e=this.getOptions("initController");this.setWorking("initController",new e(this))}}},{key:"getCurrentController",value:function(){return this.getWorking("currentController")}},{key:"setCurrentController",value:function(e){let t=this.getCurrentController();return t&&t.destroy&&t.destroy(),this.setWorking("currentController",e),this}},{key:"createInterfaceModelFactory",value:function(e){return function(t){return new du(e,t)}}},{key:"updateInterfaces",value:function(){this.clearInterfaces();let e=this.getOptions("interfaceManifest");if(e)for(let t in e){let n=e[t],i=this.getOptions(["models",t].join("."),{});n.methods=i;const r=this.createInterfaceModelFactory(n);this.setInterface(t,r)}}},{key:"getRecordName",value:function(e){return"nr"+to.capitalizeFirstLetter(e)}},{key:"getControllerName",value:function(e){return"nc"+to.capitalizeFirstLetter(e)}},{key:"setInterface",value:function(e,t){return this.setWorking(`interfaces.${e}`,t)}},{key:"getInterfaces",value:function(){return this.getWorking("interfaces")}},{key:"clearInterfaces",value:function(){return this.setWorking("interfaces",{}),this}},{key:"setWSClient",value:function(e=fu,t){return this.setWorking(`wsc.${e}`,t)}},{key:"getWSClient",value:function(e=fu){return this.getWorking(`wsc.${e}`)}},{key:"getInterface",value:function(e){return this.getInterfaces()[e]}},{key:"getModel",value:function(e,t={}){return this.getInterface(e)(t)}},{key:"setService",value:function(e,t){return this.setWorking(`services.${e}`,t)}},{key:"getService",value:function(e){return this.getWorking(`services.${e}`)}},{key:"initServices",value:function(){if(this.getOptions("services"))for(let e in this.getOptions("services"))try{let t=this.getOptions(`services.${e}`);switch(to.detectType(t)){case"function":case"class":this.setService(e,new t(this));break;default:this.setService(e,t)}}catch(t){this?.error&&this.error(`Service (${e}) init error`,t)}}},{key:"getConfigReaderForModule",value:function(e=""){var t=this;const n=["modules",e].join(".");return{get:function(e,i){return e&&"string"==typeof e&&e.length?t.getOptions([n,e].join("."),i):t.getOptions(n,i)}}}},{key:"moduleConfig",value:function(e=""){return this.getConfigReaderForModule(e)}}])}(Kl);mr(hu,"DEFAULT_WS_CLIENT_NAME",fu);const vu="default",gu="main";let pu=function(e){function t(e,n){var i;cr(this,t),mr(i=lr(this,t,[{}]),"els",void 0),mr(i,"make",void 0),mr(i,"app",void 0),i.app=e,i.app.setCurrentController(i),i.setWorking({name:n,ready:!1,views:{},libs:{},helpers:{}}),i.ui={},i.els={},i.setData({}),i.setOptions({moduleName:gu,containerSelector:"main.content",prefix:e.getOptions("paths.module"),names:{plural:"Models",single:"Model"}}),i.setURLPrefix(e.getOptions("router.root"));let r=e.getInterfaces();i.make={};for(let e in r)Object.hasOwn(r,e)&&(i.make[e]=r[e]);return i.on("destroy",(function(){i.app=null;for(let e in i.ui)i.ui[e].destroy&&i.ui[e].destroy(),i.ui[e].$destroy&&i.ui[e].$destroy(),i.ui[e]=null;i.els=null,i.make=null})),$r(i,i)}return br(t,e),pr(t,[{key:"getApp",value:function(){return to.getApp()}},{key:"setModel",value:function(e){return this.setWorking("model",e),this}},{key:"getModel",value:function(e,t){if("string"==typeof e){const n=this.getInterface(e);return n&&n(t||{})}{const t=this.getInterface();return t&&t(e||{})}}},{key:"getInterface",value:function(e=""){return this.app?.getInterface(e||this.getModelName())}},{key:"getModelName",value:function(){return this.getWorking("modelName")}},{key:"setModelName",value:function(e){return this.setWorking("modelName",to.lowerFirstLetter(e)),this}},{key:"getModelIDFieldName",value:function(){return this.getWorking("modelIDFieldName","_id")}},{key:"setModelIDFieldName",value:function(e="_id"){return this.setWorking("modelIDFieldName",e)}},{key:"setReady",value:function(e=!0){this.setWorking("ready",e),e?this.emit("ready"):this.emit("busy")}},{key:"setURLPrefix",value:function(e){return this.setOptions("urlPrefix",e),this.updateAutoName(),this}},{key:"getURLPrefix",value:function(){return this.getOptions("urlPrefix")}},{key:"setModuleName",value:function(e){return this.setOptions("moduleName",to.lowerFirstLetter(e)),this.updateAutoName(),this}},{key:"getModuleName",value:function(){return this.getOptions("moduleName")}},{key:"getModulePrefix",value:function(){return[to.getApp().getOptions("paths.modules"),this.getModuleName()].join("/")}},{key:"getModelURL",value:function(){return to.buildURL({prefix:this.getURLPrefix(),module:this.getModuleName(),model:this.getModelName()})}},{key:"getModelActionURL",value:function(e,t=""){return to.buildURL({prefix:this.getURLPrefix(),module:this.getModuleName(),model:this.getModelName(),id:e,action:t})}},{key:"buildURL",value:function(e){return to.buildURL(e)}},{key:"updateAutoName",value:function(){return this.getOptions("autoName",true),this}},{key:"setName",value:function(e){return this.setWorking("name",e),this.setOptions("autoName",!1),this}},{key:"getName",value:function(){return this.getWorking("name")}},{key:"preloadLib",value:function(e={}){var t=this;return new Promise((function(n,i){if("object"!=typeof e)n(void 0);else{t.setWorking("loading",[]);for(let r in e)t.getWorking("loading").push(e[r]),t.make[e[r]]({}).$listAll().then((function(i){t.getOptions("libs")||t.setOptions("libs",{}),t.getOptions("libs")[r]=i,t.getWorking("loading").indexOf(e[r])>-1&&t.getWorking("loading").splice(t.getWorking("loading").indexOf(e[r]),1),0===t.getWorking("loading").length&&n(void 0)})).catch((function(e){t.report(e),i()}));0===t.getWorking("loading").length&&n(void 0)}}))}},{key:"onAfterRender",value:function(){this.emit("afterRender")}},{key:"getActionName",value:function(e=vu){return"run"+to.capitalizeFirstLetter(e)}},{key:"getDefaultActionName",value:function(){return this.getActionName(this.getOptions("defaultAction",vu))}},{key:"route",value:function(e){let[t,...n]=e,i=this.getActionName(t||vu);"function"==typeof this[i]?(this.setCurrentAction(i),this[i](n)):this[this.getDefaultActionName()]?(this.setCurrentAction(this.getDefaultActionName()),this[this.getDefaultActionName()](n)):(this.setCurrentAction(void 0),this.error&&this.error("No action in router",e))}},{key:"setCurrentAction",value:function(e){this.setWorking("action",e)}},{key:"getCurrentAction",value:function(){return this.getWorking("action")}},{key:"getAppOptions",value:function(){try{return this.getApp().getOptions()}catch(e){this.error&&this.error(e)}}},{key:"getModuleOptions",value:function(e){try{return this.getApp().getOptions(["modules",e||this.getModuleName()].join("."))}catch(e){this.error&&this.error(e)}}},{key:"getServices",value:function(e){try{return this.getApp().getOptions(["services",e||this.getModuleName()].join("."))}catch(e){this.error&&this.error(e)}}},{key:"getComponents",value:function(e){try{return this.getApp().getOptions(["components",e||this.getModuleName()].join("."))}catch(e){this.error&&this.error(e)}}},{key:"refresh",value:function(e=0){this.app?.getWorking("router").refresh(e)}},{key:"getRouter",value:function(){return this.app?.getWorking("router")}},{key:"navigateWithDelay",value:function(e,t=1500,n=function(){}){return this.getRouter().navigateWithDelay(e,t,n)}},{key:"navigate",value:function(e){return this.getRouter().navigate(e)}},{key:"navigateAction",value:function(e,t="",n=0,i=function(){}){return this.navigateModuleAction(this.getModuleName(),this.getModelName(),e,t,n,i)}},{key:"navigateModelAction",value:function(e,t,n="",i=0,r=function(){}){return this.navigateModuleAction(this.getModuleName(),e,t,n,i,r)}},{key:"navigateModuleAction",value:function(e,t,n,i="",r=0,o=function(){}){return r?this.getRouter().navigateWithDelay(to.buildURL({prefix:this.getURLPrefix(),module:e,model:t,id:n,action:i}),r,o):this.getRouter().navigate(to.buildURL({prefix:this.getURLPrefix(),module:e,model:t,id:n,action:i}))}}],[{key:"MODULE_NAME",get:function(){return gu}},{key:"MODEL_NAME",get:function(){return"ModelName"}},{key:"LABELS",get:function(){return{plural:`${gu}:model_label_plural`,single:`${gu}:model_label_single`}}},{key:"getControllerRoute",value:function(e=0){let t=[];this.MODULE_NAME&&this.MODULE_NAME.length>0&&t.push(to.lowerFirstLetter(this.MODULE_NAME)),this.MODEL_NAME&&this.MODEL_NAME.length>0&&t.push(to.lowerFirstLetter(this.MODEL_NAME)),t=[t.join("/")];for(let n=0;n<e;n++)t.push("/([^/]+)");return t.join("")}},{key:"getControllerRoutes",value:function(e=0){let t=[this.getControllerRoute(0)];for(let n=0;n<e;n++)t.unshift(this.getControllerRoute(n+1));return t}},{key:"getRoutes",value:function(){return{paths:this.getControllerRoutes(this.PARAMS_LENGTH),controller:this}}},{key:"getCommonMenu",value:function(e){return[{section:e.MODULE_NAME,title:e.LABELS.plural,url:`/${to.lowerFirstLetter(e.MODULE_NAME)}/${to.lowerFirstLetter(e.MODEL_NAME)}`}]}},{key:"getMenu",value:function(){}}])}(Kl);mr(pu,"PARAMS_LENGTH",2);const mu={};function yu(e){return Object.hasOwn(mu,e)}function bu(e){return!!yu(e)&&mu[e]}function ku(e,t,n,i){return i("change",{id:t(),field:n(),value:"checkbox"===e.target.type?e.target.checked:e.target.value}),!0}var $u=Wn('<input type="checkbox"> <label class="label"></label>',1);Dn(["input"]);var wu=Wn("<a> </a>"),Ou=Wn('<div class="mx-1 tags has-addons svelte-38rpfk"><span class="tag"> </span> <span><!></span></div>'),Iu=Wn("<a> </a>"),_u=Wn("<span><!></span>");var Au=Wn("<td><!></td>");function Cu(e,t){pn(t,!0);const n=Hi();let i=H("");tr((()=>{void 0===o().type&&(Object.hasOwn(o(),"titlePath")?Q(i,Oe(Jr.get(o().titlePath,s(),a()))):Object.hasOwn(o(),"titleComposer")&&"function"==typeof o().titleComposer?Q(i,Oe(o().titleComposer(s(),a()))):Q(i,Oe(Jr.get(o().path,s(),a()))))}));let r=er(t,"getItemId",3,(e=>e._id)),o=er(t,"field",19,(()=>({}))),s=er(t,"item",19,(()=>({}))),a=er(t,"helpers",19,(()=>({})));var l=Au(),u=Ne(l),c=e=>{var t=De((()=>Jr.get(o().path,s(),a())));ba(e,{get values(){return cn(t)}})},d=e=>{var t=Bn(),i=Fe(t),l=e=>{var t=De((()=>Jr.get(o().path,s(),a())));Uo(e,{get values(){return cn(t)}})},u=e=>{var t=Bn(),i=Fe(t),l=e=>{var t=De((()=>Jr.get(o().path,s(),a())));Es(e,{get values(){return cn(t)}})},u=e=>{var t=Bn(),i=Fe(t),l=e=>{var t=De((()=>Jr.get(o().path,s(),a())));co(e,{get values(){return cn(t)}})},u=e=>{var t=Bn(),i=Fe(t),l=e=>{var t=De((()=>Jr.get(o().path,s(),a())));!function(e,t){let n=er(t,"values",19,(()=>[]));var i=Bn();ii(Fe(i),17,n,(e=>e.id),((e,t)=>{var n=Bn(),i=Fe(n),r=e=>{var n=Ou(),i=Ne(n),r=Ne(i,!0);ce(i);var o=Ue(i,2),s=Ne(o),a=e=>{var n=wu(),i=Ne(n,!0);ce(n),Xe((()=>{pi(n,"href",cn(t).url),Oi(n,`${cn(t).urlCustomClasses??""} svelte-38rpfk`),Gn(i,cn(t).value)})),Vn(e,n)},l=e=>{var n=zn();Xe((()=>Gn(n,cn(t).value))),Vn(e,n)};Zn(s,(e=>{cn(t).url?e(a):e(l,!1)})),ce(o),ce(n),Xe((()=>{Gn(r,cn(t).title),Oi(o,`tag is-${cn(t).color??""} ${cn(t).customClasses??""} svelte-38rpfk`)})),Vn(e,n)},o=e=>{var n=_u(),i=Ne(n),r=e=>{var n=Iu(),i=Ne(n,!0);ce(n),Xe((()=>{pi(n,"href",cn(t).url),Oi(n,`${cn(t).urlCustomClasses??""} svelte-38rpfk`),Gn(i,cn(t).title)})),Vn(e,n)},o=e=>{var n=zn();Xe((()=>Gn(n,cn(t).title))),Vn(e,n)};Zn(i,(e=>{cn(t).url?e(r):e(o,!1)})),ce(n),Xe((()=>Oi(n,`mx-1 tag is-${cn(t).color??""} ${cn(t).customClasses??""} svelte-38rpfk`))),Vn(e,n)};Zn(i,(e=>{Object.hasOwn(cn(t),"value")?e(r):e(o,!1)})),Vn(e,n)})),Vn(e,i)}(e,{get values(){return cn(t)}})},u=e=>{var t=Bn(),i=Fe(t),l=e=>{var t=De((()=>r()(s()))),n=De((()=>Jr.get(o().path,s(),a())));!function(e,t){pn(t,!0);let n=ir(),i=er(t,"id",3,""),r=er(t,"value",15,!1),o=er(t,"fieldname",3,"switch"),s=er(t,"disabled",3,!1),a=er(t,"readonly",3,!1),l=er(t,"styling",3," is-rounded is-success ");var u=$u(),c=Fe(u);vi(c),c.__input=[ku,i,o,n];var d=Ue(c,2);Xe((()=>{Oi(c,`switch ${l()??""}`),pi(c,"id",`edit-table-row-cell-inline-switch-${o()??""}-${i()??""}`),pi(c,"name",o()),c.readOnly=a(),c.disabled=s(),pi(d,"for",`edit-table-row-cell-inline-switch-${o()??""}-${i()??""}`)})),Fi(c,r),Vn(e,u),mn()}(e,{get id(){return cn(t)},get fieldname(){return o().path},get value(){return cn(n)},get disabled(){return o().disabled},get readonly(){return o().readonly},$$events:{change(...e){o().onChange?.apply(this,e)}}})},u=e=>{var t=Bn(),i=Fe(t),l=e=>{var t=Bn(),n=Fe(t),i=De((()=>r()(s()))),l=De((()=>Jr.get(o().path,s(),a())));fi(n,(()=>o().component),((e,t)=>{t(e,Xi({get id(){return cn(i)},get fieldname(){return o().path},get disabled(){return o().disabled},get readonly(){return o().readonly},get value(){return cn(l)}},(()=>o().options),{$$events:{change(...e){o().onChange?.apply(this,e)}}}))})),Vn(e,t)},u=e=>{var t=Bn(),i=Fe(t),r=e=>{var t=zn();Xe((()=>Gn(t,to.strLengthCap(Jr.get(o().path,s(),a()),o().maxLength)))),Vn(e,t)},l=e=>{var t=zn();Xe((()=>Gn(t,qi(Mr,"$LOCALE",n)[Jr.get(o().path,s(),a())]))),Vn(e,t)};Zn(i,(e=>{o()&&void 0!==o()&&!isNaN(o().maxLength)&&o().maxLength?e(r):e(l,!1)}),!0),Vn(e,t)};Zn(i,(e=>{o().component?e(l):e(u,!1)}),!0),Vn(e,t)};Zn(i,(e=>{"switch"===o().type?e(l):e(u,!1)}),!0),Vn(e,t)};Zn(i,(e=>{"tag"===o().type?e(l):e(u,!1)}),!0),Vn(e,t)};Zn(i,(e=>{"boolean"===o().type?e(l):e(u,!1)}),!0),Vn(e,t)};Zn(i,(e=>{"image"===o().type?e(l):e(u,!1)}),!0),Vn(e,t)};Zn(i,(e=>{"button"===o().type?e(l):e(u,!1)}),!0),Vn(e,t)};Zn(u,(e=>{"link"===o().type?e(c):e(d,!1)})),ce(l),Xe((()=>{Oi(l,(o().hideOnMobile?" is-hidden-touch ":"")+(o().classes?` ${o().classes} `:"")),pi(l,"title",cn(i))})),Vn(e,l),mn()}function Su(e,t,n,i,r){return e.preventDefault(),t("rowSelectChange",{id:cn(n),selected:i()[cn(n)]}),!1}var Eu=Wn('<td><input type="checkbox" placeholder=""></td>'),Lu=Wn("<tr><!><!></tr>");function Tu(e,t){pn(t,!0);const n=Hi(),i=()=>qi(r,"$selectedList",n);let r,o=ir(),s=H(void 0);tr((()=>{Q(s,Oe(d()(a()))),r=bu(t.id).selected}));let a=er(t,"item",19,(()=>({}))),l=er(t,"helpers",19,(()=>({}))),u=er(t,"fields",19,(()=>[])),c=er(t,"showSelect",3,!1),d=er(t,"getItemId",3,(()=>{}));var f=Lu(),h=Ne(f),v=e=>{var t=Eu(),n=Ne(t);vi(n),Xe((()=>pi(n,"id",`table-row-select-${d()(a())??""}`))),Xe((()=>pi(n,"data-id",d()(a())))),Xe((()=>pi(n,"name",`row_selected_${d()(a())??""}`))),n.__change=[Su,o,s,i,r],ce(t),Fi(n,(()=>i()[cn(s)]),(e=>{return t=r,n=dn(i)[cn(s)]=e,o=dn(i),t.set(o),n;var t,n,o})),Vn(e,t)};Zn(h,(e=>{c()&&i()&&e(v)})),ii(Ue(h),17,u,ni,((e,t)=>{Cu(e,{get field(){return cn(t)},get helpers(){return l()},get item(){return a()},get getItemId(){return d()}})})),ce(f),Vn(e,f),mn()}function xu(e,t){try{t("searchChange",e.currentTarget.value.trim())}catch{return}}function Nu(e,t){t("goToPrevPage")}function Fu(e,t){t("goToNextPage")}function Uu(e,t){e.preventDefault();let n=e.target;return t("goToPage",parseInt(n.dataset.page)),!1}function Mu(e,t,n,i,r){bu(t.id).selected.update((e=>(n().forEach((t=>{e[i()(t)]=r()})),e)))}Dn(["change"]);var Du=Wn('<div class="field is-grouped"><!></div>'),Pu=Wn('<div class="field is-grouped"><!></div>'),Ru=Wn('<div class="field"><div class="control"><input class="input" type="text" placeholder="Поиск"></div></div>'),ju=Wn('<th><input type="checkbox" id="table-row-select-page" placeholder="" name="row_selected_all"></th>'),Wu=Wn("<th><!></th>"),zu=Wn('<a href="" class="pagination-link is-current" aria-current="page"> </a>'),Bu=Wn('<a href="" class="pagination-link"> </a>'),Vu=Wn("<li><!></li>"),qu=Wn('<nav class="pagination is-centered" aria-label="pagination"><a href="" class="pagination-previous">Назад</a> <a href="" class="pagination-next">Вперед</a> <ul class="pagination-list"><!></ul></nav>'),Hu=Wn('<!> <!> <!> <table class="table"><thead><tr><!><!></tr></thead><tbody></tbody></table> <!>',1);Dn(["input","change","click"]);const Gu="__dublicate__",Ku={},Ju=!1,Yu="listAndCount",Qu="count",Xu="preprocessor",Zu={ui:function(e,t){pn(t,!0);const n=Hi();let i=ir(),r=er(t,"helpers",19,(()=>({}))),o=er(t,"state",31,(()=>Oe({}))),s=er(t,"filter",31,(()=>Oe({}))),a=er(t,"sorter",31,(()=>Oe({}))),l=er(t,"fields",19,(()=>[])),u=er(t,"selected",31,(()=>Oe({}))),c=er(t,"items",31,(()=>Oe([]))),d=er(t,"actions",19,(()=>[])),f=er(t,"links",19,(()=>[])),h=er(t,"search",15,""),v=er(t,"showSearch",3,!0),g=er(t,"showSelect",3,!0),p=er(t,"selectAll",15,!1),m=er(t,"getItemId",3,(e=>e._id));function y({detail:e}){try{i("searchChange",e)}catch{return}}function b({detail:e}){try{i("filterChange",e)}catch{return}}tr((()=>{g()&&bu(t.id).selected.subscribe((e=>{u(e)})),bu(t.id).refined.subscribe((e=>{if(c(e),g()){for(let e in u())c().some((t=>m()(t)===e))?Object.hasOwn(u(),e)||u(u()[e]=!1,!0):delete u()[e];u(u())}})),bu(t.id).state.subscribe((e=>{o(e)}))}));var k=Hu(),$=Fe(k),w=e=>{var t=Du();ba(Ne(t),{get values(){return f()}}),ce(t),Vn(e,t)};Zn($,(e=>{f().length&&e(w)}));var O=Ue($,2),I=e=>{var t=Pu();Uo(Ne(t),{get values(){return d()}}),ce(t),Vn(e,t)};Zn(O,(e=>{d().length&&e(I)}));var _=Ue(O,2),A=e=>{var n=Bn(),r=Fe(n),o=e=>{var n=Bn();const i=De((()=>t.filterUI));fi(Fe(n),(()=>cn(i)),((e,t)=>{t(e,{get filter(){return s()},set filter(e){s(e)},$$events:{change:b,searchChange:y}})})),Vn(e,n)},a=e=>{var t=Ru(),n=Ne(t),r=Ne(n);vi(r),r.__input=[xu,i],ce(n),ce(t),Ni(r,h),Vn(e,t)};Zn(r,(e=>{t.filterUI?e(o):e(a,!1)})),Vn(e,n)};Zn(_,(e=>{v()&&e(A)}));var C=Ue(_,2),S=Ne(C),E=Ne(S),L=Ne(E),T=e=>{var n=ju(),i=Ne(n);vi(i),i.__change=[Mu,t,c,m,p],ce(n),Fi(i,p),Vn(e,n)};Zn(L,(e=>{g()&&e(T)})),ii(Ue(L),17,l,ni,((e,t)=>{var r=Wu();const o=De((()=>cn(t).path.substring(1)));var s=De((()=>function(e){const t=e.path.substring(1);Object.hasOwn(a(),t)?a(a()[t]=-1*parseInt(a()[t]),!0):a({[t]:1}),i("sorterChange",a())}(cn(t))));r.__click=function(...e){cn(s)?.apply(this,e)};var l=Ne(r),u=e=>{var n=De((()=>a()[cn(o)]>0?"sort-up":"sort-down"));vs(e,{get font(){return cn(n)},get title(){return cn(t).title},pointable:!0})},c=e=>{var i=zn();Xe((()=>Gn(i,qi(Mr,"$LOCALE",n)[cn(t).title]))),Vn(e,i)};Zn(l,(e=>{cn(t).sortable&&Object.hasOwn(a(),cn(o))?e(u):e(c,!1)})),ce(r),Xe((()=>Oi(r,(cn(t).hideOnMobile?" is-hidden-touch":"")+(cn(t).sortable?" is-clickable":"")))),Vn(e,r)})),ce(E),ce(S);var x=Ue(S);ii(x,21,c,(e=>e._id),((e,n)=>{Tu(e,{get id(){return t.id},get item(){return cn(n)},get fields(){return l()},get helpers(){return r()},get showSelect(){return g()},get getItemId(){return m()},$$events:{rowSelectChange(e){Bi.call(this,t,e)}}})})),ce(x),ce(C);var N=Ue(C,2),F=e=>{var t=qu(),n=Ne(t);n.__click=[Nu,i];var r=Ue(n,2);r.__click=[Fu,i];var s=Ue(r,2),a=Ne(s),l=e=>{var t=Bn();ii(Fe(t),17,(()=>o().pagination.pages.list),ni,((e,t)=>{var n=Vu(),r=Ne(n),o=e=>{var n=zu(),i=Ne(n,!0);ce(n),Xe((()=>{pi(n,"aria-label",`Страница ${cn(t).index??""}`),Gn(i,cn(t).index+1)})),Vn(e,n)},s=e=>{var n=Bu();n.__click=[Uu,i];var r=Ne(n,!0);ce(n),Xe((()=>{pi(n,"aria-label",`Страница ${cn(t).index??""}`),pi(n,"data-page",cn(t).index),Gn(r,cn(t).index+1)})),Vn(e,n)};Zn(r,(e=>{cn(t).active?e(o):e(s,!1)})),ce(n),Vn(e,n)})),Vn(e,t)};Zn(a,(e=>{o().pagination&&o().pagination.pages&&o().pagination.pages.list&&e(l)})),ce(s),ce(t),Vn(e,t)};Zn(N,(e=>{o()?.pagination?.pages?.list.length>1&&e(F)})),Vn(e,k),mn()},links:[],actions:[],endless:!1,idField:"_id",getItemId:function(e){return e._id}};let ec=function(e){function t(e={}){var n;return cr(this,t),(n=lr(this,t)).id="table-"+Math.random(),n.options={...Zu,...e.options?e.options:{}},n.ui={},n.data={raw:[],filtered:[],refined:[],selected:{}},n.state={pagination:{items:{count:0,from:0,to:0},pages:{count:0,from:0,to:0,current:0,list:[]}}},n.working={},n.stores=function(e,t={raw:[],filtered:[],selected:{}}){if(!yu(e)){if(!(Object.keys(t).length>0))throw new Error("store's props wasn't specified");mu[e]={},Object.keys(t).forEach((function(n){mu[e][n]=Fr(t[n])}))}return mu[e]}(n.id,{raw:[],filtered:[],refined:[],selected:{},state:n.state,working:n.working}),n.stores.working.subscribe(n.onWorkingUpdate.bind(n)),n.stores.raw.subscribe(n.onRawUpdate.bind(n)),n.stores.filtered.subscribe(n.onFilteredUpdate.bind(n)),n.stores.refined.subscribe(n.onRefinedUpdate.bind(n)),n.stores.selected.subscribe(n.onSelectedUpdate.bind(n)),n.stores.state.subscribe(n.onStateUpdate.bind(n)),to.objHas(e,"data")&&Array.isArray(e.data)&&n.stores.raw.update((function(t){return e.data})),n.setCombinedActionName(n.getOptions("interface.combinedAction",Yu)),to.objHas(n.options,"filter")?n.setFilter(n.options.filter,!0):n.resetFilter(),to.objHas(n.options,"pager")?n.setPager(n.options.pager,!0):n.resetPager(),to.objHas(n.options,"sorter")?n.setSorter(n.options.sorter,!0):n.resetSorter(!0),to.objHas(n.options,"return")?n.setReturn(n.options.return):n.setReturn(),to.objHas(n.options,"search")?n.setSearch(n.options.search,!0):n.setSearch(),n.render(),n.updateData(),$r(n,n)}return br(t,e),pr(t,[{key:"onWorkingUpdate",value:function(e){return this.working=e,e}},{key:"onRawUpdate",value:function(e){return this.data.raw=e,e}},{key:"onFilteredUpdate",value:function(e){return this.data.filtered=e,this.refineFiltered(),e}},{key:"onRefinedUpdate",value:function(e){return this.data.refined=e,this.clearSelected(),e}},{key:"onStateUpdate",value:function(e){return this.state=e,e}},{key:"onSearchChange",value:function(e){e.length>3?this.setSearch(e):this.setSearch()}},{key:"onSorterChange",value:function(e){e?this.setSorter(e):this.resetSorter()}},{key:"onFilterChange",value:function({filter:e,actionName:t}){0===t.indexOf(Yu)&&this.setCombinedActionName(t),e?this.setFilter(e):this.resetFilter()}},{key:"onSelectedUpdate",value:function(e){this.data.selected=e}},{key:"clearSelected",value:function(){this.data.selected={}}},{key:"getSelected",value:function(e=!1,t="refined"){let n=[];for(let i in this.data.selected)if(this.data.selected[i])if(e){let e=this.data[t].findIndex((function(e){return e._id===i}));e>-1&&n.push(this.data[t][e])}else n.push(i);return n}},{key:"getItemId",value:function(e){return this.getOptions("getItemId",Zu.getItemId)(e)}},{key:"selectAll",value:function(){var e=this;this.stores.selected.update((function(){let t={};return e.data.filtered.forEach((function(n){t[e.getItemId(n)]=!0})),t}))}},{key:"selectNone",value:function(){var e=this;this.stores.selected.update((function(){let t={};return e.data.filtered.forEach((function(n){t[e.getItemId(n)]=!1})),t}))}},{key:"render",value:function(){var e=this;this.ui.table||(this.ui.table=new this.options.ui({target:this.options.targetEl,props:{filterUI:this.getOptions("filterUI",void 0),id:this.id,helpers:Object.assign({},this.getHelpers()),fields:this.getOptions("fields"),actions:this.getActions(),links:this.getLinks(),search:"",showSelect:this.getOptions("showSelect"),showSearch:this.getOptions("showSearch"),showSort:this.getOptions("showSort"),idField:this.getOptions("idField"),getItemId:this.getOptions("getItemId"),filter:this.getFilter()}})),this.ui.table.$on("searchChange",(function(t){return e.onSearchChange(t.detail)})),this.ui.table.$on("sorterChange",(function(t){return e.onSorterChange(t.detail)})),this.ui.table.$on("filterChange",(function(t){return e.onFilterChange(t.detail)})),this.ui.table.$on("goToPage",(function(t){return e.goToPage(t.detail)})),this.ui.table.$on("goToNextPage",(function(){return e.goToNext()})),this.ui.table.$on("goToPrevPage",(function(){return e.goToPrev()}))}},{key:"getActions",value:function(){return this.getOptions("actions",[])}},{key:"getLinks",value:function(){return this.getOptions("links",[])}},{key:"getHelpers",value:function(){return this.options.helpers||{}}},{key:"setWorking",value:function(e,t){var n=this;return this.stores.working.update((function(i){return Jr.set(e,i,n.getHelpers(),t),i})),this}},{key:"getWorking",value:function(e,t){let n=Jr.get(e,this.working,this.getHelpers());return void 0===n?t:n}},{key:"setState",value:function(e,t){var n=this;return this.stores.state.update((function(i){return Jr.set(e,i,n.getHelpers(),t),i})),this}},{key:"getState",value:function(e,t){let n=Jr.get(e,this.state,this.getHelpers());return void 0===n?t:n}},{key:"setOptions",value:function(e,t){return Jr.set(e,this.options,this.getHelpers(),t),this}},{key:"getOptions",value:function(e,t){let n=Jr.get(e,this.options,this.getHelpers());return void 0===n?t:n}},{key:"setFilter",value:function(e,t=!1){return this.setState("filter",e),t||(this.invalidateData(),this.updateData()),this}},{key:"resetFilter",value:function(){return this.setState("filter",{}),this}},{key:"getFilter",value:function(){return this.getState("filter")}},{key:"setPager",value:function(e,t=!1){return this.setState("pager",e),t||this.updateData(),this}},{key:"getDefaultPageNumber",value:function(){return isNaN(this.getOptions("pager.page"))?0:this.getOptions("pager.page")}},{key:"getDefaultPageSize",value:function(){return isNaN(this.getOptions("pager.size"))?20:this.getOptions("pager.size")}},{key:"resetPager",value:function(){this.setState("pager",{size:this.getDefaultPageSize(),page:this.getDefaultPageNumber()})}},{key:"getPager",value:function(){return this.getState("pager")}},{key:"setSorter",value:function(e,t=!1){return this.setWorking("sorter",e),t||(this.invalidateData(),this.updateData()),this}},{key:"resetSorter",value:function(e=!1){let t={_id:1};return this.setSorter(t,e)}},{key:"getSorter",value:function(){return this.getWorking("sorter")}},{key:"getSorterDirection",value:function(){try{let e=Object.keys(this.getSorter());return this.getSorter()[e[0]]}catch{return 1}}},{key:"getSearch",value:function(){return void 0!==this.getWorking("search")&&null!==this.getWorking("search")?this.getWorking("search"):""}},{key:"setSearch",value:function(e="",t=!1){return this.setWorking("search",e),t||(this.invalidateData(),this.updateData()),this}},{key:"getReturn",value:function(){return this.getWorking("return")}},{key:"setReturn",value:function(e=Ku){return this.setWorking("return",e),this}},{key:"clearFilteredData",value:function(){this.stores.filtered.update((function(e){return e.splice(0,e.length),e}))}},{key:"clearRawData",value:function(){this.stores.raw.update((function(e){return e.splice(0,e.length),e}))}},{key:"clearRefinedData",value:function(){this.stores.refined.update((function(e){return e.splice(0,e.length),e}))}},{key:"invalidateData",value:function(){this.clearFilteredData(),this.isLive()&&this.clearRawData(),this.resetPager()}},{key:"isLive",value:function(){return this.getOptions("interface")&&this.getOptions("interface.factory")}},{key:"setUpdating",value:function(){this.setState("updating",!0)}},{key:"setUpdated",value:function(){this.setState("updating",!1)}},{key:"ifUpdating",value:function(){return this.getState("updating")}},{key:"getDataInterface",value:function(){let e=this.getOptions("interface.factory");return"function"==typeof e?e({}):e}},{key:"getLoadDataActionName",value:function(){return this.getOptions("interface.listAction")?this.getOptions("interface.listAction"):"list"}},{key:"setCombinedActionName",value:function(e=Qu){this.setWorking("interface.combinedAction",e)}},{key:"getCombinedActionName",value:function(){return this.getWorking("interface.combinedAction")?this.getWorking("interface.combinedAction"):Yu}},{key:"getCountActionName",value:function(){return this.getOptions("interface.countAction")?this.getOptions("interface.countAction"):Qu}},{key:"loadData",value:function(){let e,t=this.getDataInterface().setFilter(this.getFilter()).setSorter(this.getSorter()).setReturn(this.getReturn()).setSearch(this.getSearch()).setPager(this.getPager());return e=this.getOptions("interface.combined",Ju)?this.getCombinedActionName():this.getLoadDataActionName(),t["$"+e]()}},{key:"goToNext",value:function(){let e=isNaN(this.getState("pager.page"))?this.getDefaultPageNumber():this.getState("pager.page")+1;this.setState("pager.page",Math.min(e,this.getState("pagination.pages.to"))),this.updateData()}},{key:"goToPrev",value:function(){let e=isNaN(this.getState("pager.page"))?this.getDefaultPageNumber():this.getState("pager.page")-1;this.setState("pager.page",Math.max(e,this.getState("pagination.pages.from"))),this.updateData()}},{key:"goToFirst",value:function(){this.setState("pager.page",this.getState("pagination.pages.from")),this.updateData()}},{key:"goToLast",value:function(){this.setState("pager.page",this.getState("pagination.pages.to")),this.updateData()}},{key:"goToPage",value:function(e){this.setState("pager.page",e),this.updateData()}},{key:"testDataItem",value:function(e){var t=this.getSearch().toLowerCase();for(var n in e){if(e[n].toString().toLowerCase().indexOf(t)>-1)return!0}return!1}},{key:"getRowsCount",value:function(){var e=this;return this.getDataInterface().setFilter(this.getFilter())["$"+this.getCountActionName()]().then((function(t){e.updatePagination(t.count)})).catch((function(t){e.error(t)}))}},{key:"updatePagination",value:function(e){var t=this;this.log("update pagination",e),this.state.pagination.pages.list.splice(0,this.state.pagination.pages.list.length);let n=(this.getPager().page-0)*this.getPager().size+1,i=e%this.getPager().size?Math.floor(e/this.getPager().size)+1:Math.round(e/this.getPager().size),r=Math.max(0,this.getPager().page-6),o=Math.min(i-1,this.getPager().page+6),s=[],a=Math.min(n+this.getPager().size-1,e);for(let e=r;e<=o;e++)s.push({index:e,active:e===this.getPager().page});this.stores.state.update((function(l){return t.log("update pagination",l),l.pagination.items.count=e,l.pagination.items.from=n,l.pagination.items.to=a,l.pagination.pages.count=i,l.pagination.pages.from=r,l.pagination.pages.to=o,l.pagination.pages.current=t.getPager().page,l.pagination.pages.list.splice(0,l.pagination.pages.list.length,...s),l}))}},{key:"updateData",value:function(){var e=this;if(this.isLive()){if(this.ifUpdating())return;this.getOptions("endless",!1)||this.clearRawData(),this.setUpdating(),this.getOptions("interface.combined",Ju)?this.loadData().then((function(t){let n=to.objHas(t,"status")&&to.objHas(t,"result");e.stores.filtered.update((function(i){return e.getOptions("endless",!1)||e.clearFilteredData(),n?i.push(...t.result.list):to.objHas(t,"list")&&Array.isArray(t.list)?i.push(...t.list):Array.isArray(t)&&i.push(...t),i})),e.setWorking("lastCount",n?t.result.count:t.count)})).then((function(){e.updatePagination(e.getWorking("lastCount"))})).catch(this.error.bind(this)).then(this.setUpdated.bind(this)):this.loadData().then((function(t){e.stores.filtered.update((function(e){return e.push(...t),e}))})).then(this.getRowsCount.bind(this)).catch(this.error.bind(this)).then(this.setUpdated.bind(this))}else this.setUpdating(),this.processData(),this.setUpdated()}},{key:"getData",value:function(){return this.data}},{key:"processData",value:function(){var e=this;let t=this.getFilter();this.log(this.getData()),null!=t&&void 0!==t.filterSearch&&null!==t.filterSearch&&t.filterSearch.length>0?this.stores.filtered.update((function(t){return t.splice(0,t.length,...e.data.raw.filter(e.testDataItem.bind(e))),t})):this.stores.filtered.update((function(t){return t.splice(0,t.length,...e.data.raw),t}));let n=this.getSorter();null!=n&&this.stores.filtered.update((function(e){return e.sort((function(e,t){let i=Jr.get(n.sortByField,e,{}),r=Jr.get(n.sortByField,t,{});return isNaN(i)?void 0!==i&&void 0!==r&&i.localeCompare?i.localeCompare()*-n.sortDirection:0:(i<r?1:-1)*n.sortDirection})),e}))}},{key:"error",value:function(){this.options.logger&&this.options.logger.error(...arguments)}},{key:"log",value:function(){this.options.logger&&this.options.logger.log(...arguments)}},{key:"checkFieldsNames",value:function(){const e=":"+this.getOptions("idField");this.getOptions("fields",[]).forEach((function(t){e===t.path&&(t.path=t.path+Gu)}))}},{key:"readFieldValue",value:function(e,t,n){if(e.indexOf(Gu)>-1){const e=":"+this.getOptions("idField");return Jr.get(e,t,n)}return Jr.get(e,t,n)}},{key:"refineFiltered",value:function(){var e=this;let t=[];this.checkFieldsNames(),this.data.filtered.forEach((function(n,i){let r={};e.getOptions("idField")&&(r[e.getOptions("idField")]=n[e.getOptions("idField")]),e.getOptions("fields",[]).forEach((function(t){let o=null,s=e.readFieldValue(t.path,n,e.getOptions("helpers"));if(to.objHas(t,Xu)){try{o=t[Xu](s,n,i)}catch(t){e.error("Error while preprocessing cell value",s,n,i),e.error(t)}Jr.set(t.path,r,o)}else Jr.set(t.path,r,s)})),t.push(r)})),this.stores.refined.update((function(e){return e.splice(0,e.length,...t),e}))}},{key:"$destroy",value:function(){for(let e in this.ui)this.ui[e].$destroy&&this.ui[e].$destroy(),delete this.ui[e]}}])}(Hr);var tc=Wn("<!> <!>",1),nc=Wn("<!> <!>",1);function ic(e,t){pn(t,!0);let n=H(!1),i=H(!1),r=er(t,"container",19,(()=>({}))),o=er(t,"loaderTitle",15,"Отправка данных на сервер"),s=er(t,"loaderActive",15,!1),a=er(t,"loaderSize",15,"container"),l=er(t,"successTitle",15,"OK"),u=er(t,"successMessage",15,""),c=er(t,"errorTitle",15,"Error"),d=er(t,"errorMessage",15,"");var f=nc(),h=Fe(f);return ko(h,{get loading(){return s()},set loading(e){s(e)},get title(){return o()},set title(e){o(e)},get size(){return a()},set size(e){a(e)}}),Va(Ue(h,2),Xi(r,{children:(e,t)=>{var r=tc(),o=Fe(r),s=e=>{Dl(e,{get title(){return c()},set title(e){c(e)},get message(){return d()},set message(e){d(e)}})};Zn(o,(e=>{cn(i)&&e(s)}));var a=Ue(o,2),f=e=>{Rl(e,{get title(){return l()},set title(e){l(e)},get message(){return u()},set message(e){u(e)}})};Zn(a,(e=>{cn(n)&&e(f)})),Vn(e,r)},$$slots:{default:!0}})),Vn(e,f),mn({showSuccess:function(e,t){Q(i,!1),Q(n,!0),null!=t&&u(t),null!=e&&l(e)},showError:function(e,t){Q(n,!1),Q(i,!0),null!=t&&d(t),null!=e&&c(e)},setLoading:function(){s(!0),Q(n,!1),Q(i,!1)},resetLoading:function(){s(!1)},hideAll:function(){s(!1),Q(n,!1),Q(i,!1)}})}var rc=new WeakMap,oc=new WeakMap;let sc=function(e){function t({target:e=null,name:n="Default",options:i={},working:r={},data:o={},ui:s=ic}){var a;return cr(this,t),fr(a=lr(this,t,[{working:{name:`${n}ActionUI`,...r},options:i,data:o}]),rc,null),fr(a,oc,null),e&&a.setOptions("target",e),hr(rc,a,s),a.initUI(),a}return br(t,e),pr(t,[{key:"initUI",value:function(){try{const e=this.getTargetEl();for(;e.children.length;)e.removeChild(e.firstChild);hr(oc,this,new(dr(rc,this))({target:e,props:this.getOptions()}))}catch(e){this.error(e)}}},{key:"setLoading",value:function(){this.emit("loading"),dr(oc,this).setLoading()}},{key:"resetLoading",value:function(){this.emit("loaded"),dr(oc,this).resetLoading()}},{key:"destroy",value:function(){this.emit("destroy"),dr(oc,this)&&(dr(oc,this).$destroy&&dr(oc,this).$destroy(),dr(oc,this).destroy&&dr(oc,this).destroy(),hr(oc,this,null)),this.setOptions(null),this.setWorking(null),this.setData(null)}},{key:"processResult",value:function(e){return e.status===zo?(this.setFormSuccess(),!0):(this.setFormErrors(e),!1)}},{key:"setFormSuccess",value:function(){dr(oc,this).showSuccess(),this.emit("success")}},{key:"setFormErrors",value:function(e){const t={form:[],fields:{}};e.message&&t.form.push(e.message),e.errors&&Object.keys(e.errors).length>0&&(t.fields={...e.errors}),dr(oc,this).showError(t),this.emit("error",t)}},{key:"getTargetEl",value:function(){const e=this.getOptions("target",".container");if(e instanceof HTMLElement)return e;if("string"==typeof e)return document.querySelector(e);throw new Error("ActionUI parent element is not defined")}}])}(Kl),ac=function(){return pr((function e(){cr(this,e)}),null,[{key:"addComponent",value:function(e,t){aa.add(e,t)}},{key:"addVariants",value:function(e,t){ua.add(e,t)}},{key:"addField",value:function(e,t){la.add(e,t)}},{key:"actionFieldsInit",value:function(e,t,n){var i=this;Array.isArray(e)?e.forEach((function(e){i.actionFieldsInit(e,t,n)})):(to.objHas(t,"fields")||(t.fields={}),to.objHas(t.fields,e)||(t.fields[e]={}),null!=n&&void 0!==n[e]&&null!==n[e]&&(t.fields[e].value=n[e]))}}])}();mr(ac,"validator",null);const lc={label:"",placeholder:"",enabled:!0,visible:!0,required:!0,validated:!1,valid:!1,errors:!1};function uc(e,t={},n,i){let r={...lc};return i.contains(e)&&(r={...r,...i.get(e)}),t&&(r={...r,...t}),to.objHas(r,"variantsSource")&&n.contains(r.variantsSource)?r.variants=n.get(r.variantsSource):r.variants&&0!==r.variants.length||(r.variants=[]),r}function cc(e,t,n){return e[t].formErrors=[...n],e[t].validated=!0,e[t].inputStarted=!0,e[t].valid=!1,e[t].formLevelError=!0,e}function dc(e,t){return e[t].formErrors=!1,e[t].validated=!0,e[t].valid=!0,e[t].formLevelError=!1,e}function fc(e,t){return to.objHas(e,t)&&e[t].enabled&&e[t].visible&&void 0!==e[t].value}var hc,vc,gc,pc,mc,yc,bc,kc,$c,wc,Oc,Ic,_c,Ac,Cc,Sc,Ec,Lc,Tc,xc,Nc={fieldInit:uc,initFormByField:function e(t={},n=[],i,r,o,s){if(Array.isArray(n))n.forEach((function(n){return e(t,n,i,r,o,s)}));else{let e={};o&&to.objHas(o,"mutations")&&to.objHas(o.mutations,n)&&(e=o.mutations[n]),s&&to.objHas(s,n)&&(e.value=s[n]),t[n]=uc(n,e,i,r),o&&o.readonly&&(t[n].readonly=!0)}return t},setFieldInvalid:function(e,t,n,i){return e[t].errors=[...i],e[t].validated=!0,e[t].valid=!1,e[t].value=n,e},setFieldValid:function(e,t,n){e[t].errors=!1,e[t].validated=!0,e[t].valid=!0,e[t].value=n;for(let n in e)if(n!==t&&(Array.isArray(e[n].errors)&&0===e[n].errors.length&&(e[n].errors=!1),!1!==e[n].errors))break;return e},isFieldValid:function(e,t){return!Array.isArray(e[t].errors)},setFormFieldInvalid:cc,setFormFieldValid:dc,updateFormValidationStatus:function({form:e,formErrors:t,validationStatus:n}){if(Array.isArray(n.form)&&n.form.length?t.splice(0,t.length,...n.form):t.splice(0,t.length),n.fields)for(let t in n.fields)Array.isArray(n.fields[t])&&n.fields[t].length?cc(e,t,n.fields[t]):dc(e,t)},fieldIsVisibleAndFilled:fc,setFieldsVisibility:function(e,t,n){return!!Array.isArray(t)&&(Object.keys(e).forEach((function(i){e[i].visible=t.includes(i)?n:!n})),!0)},setFieldValue:function(e,t,n){return!!to.objHas(e,t)&&(e[t].value=n,!0)},collectData:function(e,t){let n={};return e.flat().forEach((function(e){fc(t,e)&&(n[e]=t[e].value)})),n}};function Fc(){if(vc)return hc;vc=1;const e=e=>Object.keys(e).reduce(((e,t)=>(e[t]=[],e)),{}),t=["fields","form"];return hc=class{#e=!0;#t;constructor(e){this.#t=JSON.parse(JSON.stringify(e)),Object.keys(this.#t).forEach((e=>{t.includes(e)||delete this.#t[e]})),this.#e=0===this.#t.form.errors.length;const n=this.#n();for(let e of n)this.isFieldDirty(e)&&(this.#e=!1)}destroy(){this.#t=void 0}get clean(){return this.#e}static getDefaultResult(t){return{fields:e(t),form:{fields:e(t),errors:[],exceptions:[]}}}getReport(){return JSON.parse(JSON.stringify(this.#i()))}getDetailedReport(){return"object"==typeof this.#t?JSON.parse(JSON.stringify(this.#t)):void 0}isFieldDirty(e){return!(!Array.isArray(this.#t.fields[e])||!this.#t.fields[e].length)||!(!Array.isArray(this.#t.form.fields[e])||!this.#t.form.fields[e].length)}getCompleteResultForField(e){const t=[];return Array.isArray(this.#t.fields[e])&&t.push(...this.#t.fields[e]),Array.isArray(this.#t.form.fields[e])&&t.push(...this.#t.form.fields[e]),t}#i(){const e={clean:this.#e,fields:{},form:[]},t=this.#n();for(let n of t){const t=this.getCompleteResultForField(n);t.length&&(e.fields[n]=t)}return e.form=[...this.#t.form.errors],0===e.form.length&&delete e.form,e}#n(){const e=Object.keys(this.#t.fields),t=Object.keys(this.#t.form.fields);return[...new Set([...t,...e])]}}}function Uc(){if(yc)return mc;yc=1;const e=function(){if(pc)return gc;pc=1;class e extends Error{constructor(e,t={},n=null){return super(e),this.options=t,this.adopt(n),this.fill(),this.getTime(),this}adopt(e){return e instanceof Error&&(this.parent=e),this}getStack(){return this.parent?this.parent.stack:this.stack}getDetails(){let e=this;return this.parent&&(e=this.parent),{columnNumber:e.columnNumber,fileName:e.fileName,lineNumber:e.lineNumber,name:e.name,message:e.message,stack:e.stack}}getTime(){let e=new Date;return this.env.date={timestamp:e.getTime(),offset:e.getTimezoneOffset()},this.env.date}filterEnv(e,t){let n={};for(let i of t)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i]);return n}fill(){return this.env={browser:!1,node:!0,versions:Object.assign({},process.versions),vars:this.filterEnv(process.env,this.options.whitelist||["NODE_ENV"])},this}}return gc=e}();return mc=class extends e{constructor(e,t={},n=null,i={}){return super(e,{fields:t,params:i},n),this}setFieldsErrors(e){this.options.fields=e}getFieldsErrors(){return this.options.fields}}}function Mc(){if(wc)return $c;wc=1;const e=Fc(),t=Uc(),n=kc?bc:(kc=1,bc=async(e,t)=>{if("function"==typeof e)return"AsyncFunction"===e.constructor.name?await e(...t):e(...t)});$c=async(t,n)=>{const r=e.getDefaultResult(n);return await i({validators:t,data:n,result:r}),await l({validators:t,data:n,result:r}),new e(r)};const i=async({validators:e,data:t,result:n})=>{for(let i in t)await r(i,t[i],e,n)},r=async(e,t,n,i)=>{const r=o(e,n);return await s(e,t,r,i)},o=(e,t)=>t&&t.fields&&t.fields[e]?t.fields[e]:[],s=async(e,i,r,o)=>{for(let s of r)try{await n(s.validator,[i])||a(e,s.message,o)}catch(n){n instanceof t||!s.message?a(e,n.message,o):a(e,s.message,o)}},a=(e,t,n)=>{n.fields[e].includes(t)||n.fields[e].push(t)},l=async({validators:e,data:t,result:n})=>{const i=u(e);await c(t,i,n)},u=e=>e&&e.form?e.form:[],c=async(e,t,n)=>{for(let i of t)try{await i(e)}catch(e){if(!e||"function"!=typeof e.getFieldsErrors)throw e;{const t=e.getFieldsErrors();Array.isArray(t.form)&&d(t.form,n),t.fields&&h(t.fields,n)}}},d=(e,t)=>{e.forEach((e=>{f(e,t)}))},f=(e,t)=>{t.form.errors.includes(e)||t.form.errors.push(e)},h=(e,t)=>{for(let n in e)v(n,e[n],t)},v=(e,t,n)=>{t.forEach((t=>{g(e,t,n)}))},g=(e,t,n)=>{Array.isArray(n.form.fields[e])||(n.form.fields[e]=[]),n.form.fields[e].includes(t)||n.form.fields[e].push(t)};return $c}function Dc(){if(Ac)return _c;Ac=1;const{composeFieldsValidators:e,composeFormValidators:t}=(Ic||(Ic=1,Oc={composeFieldsValidators:(e,t)=>{if(t&&t.fields){const n=Object.keys(e),i={};return n.forEach((e=>{Array.isArray(t.fields[e])&&(i[e]=t.fields[e])})),i}return{}},composeFormValidators:(e,t)=>t?t.forms&&Array.isArray(t.forms[e])?t.forms[e]:Array.isArray(t.form)?t.form:[]:[]}),Oc),n=Mc();return _c=i=>(r,o)=>{const s={fields:e(r,i),form:t(o,i)};return n(s,r)}}function Pc(){if(Lc)return Ec;Lc=1;const e=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),{augmentFieldsValidators:t,augmentFormValidators:n}=function(){if(Sc)return Cc;Sc=1;const e=(e,t)=>{if(e.validator&&"function"==typeof e.validator){const n=e.validator,i={...e};return delete i.validator,i.validator=e=>n(e,t()),i}return e},t=(e,t)=>n=>e(n,t());return Cc={augmentFieldsValidators:(t,n)=>t.map((t=>e(t,n))),augmentFieldValidator:e,augmentFormValidators:(e,n)=>e.map((e=>t(e,n))),augmentFormValidator:t}}();Ec=(t,o)=>{if(null==t)return{fields:{},forms:{}};const s={};return e(t,"fields")&&(s.fields=i(t.fields,o)),e(t,"forms")?s.forms=r(t.forms,o):e(t,"form")&&(s.form=n(t.form,o)),s};const i=(e,n)=>{const i={};for(let r in e)Array.isArray(e[r])&&(i[r]=t(e[r],n));return i},r=(e,t)=>{const i={};for(let r in e)Array.isArray(e[r])&&(i[r]=n(e[r],t));return i};return Ec}var Rc=function(){if(xc)return Tc;xc=1;const e=Mc(),t=Dc(),n=Pc(),i=Fc();return Tc={name:"not-validation",Session:e,Runner:t,Builder:n,Result:i}}(),jc=Wn('<div><div class="field-label is-normal"><!></div> <div class="field-body"></div></div>'),Wc=Wn("<!> <!>",1),zc=Wn("<div></div>");function Bc(e,t){pn(t,!0);let n=er(t,"label",3,""),i=er(t,"name",3,"generic field"),r=er(t,"readonly",3,!1),o=er(t,"horizontal",3,!1),s=er(t,"controls",19,(()=>[])),a=er(t,"classes",3,""),l=er(t,"addons",3,!1),u=er(t,"addonsCentered",3,!1),c=er(t,"addonsRight",3,!1),d=er(t,"grouped",3,!1),f=er(t,"groupedMultiline",3,!1),h=er(t,"groupedRight",3,!1),v=er(t,"groupedCentered",3,!1),g=er(t,"onchange",3,(()=>!0)),p=er(t,"formFieldPrefix",3,"form-field-"),m=H(""),y=H(!1),b=H(void 0);tr((()=>{Q(m,cn(m)+" "+a()),Q(m,cn(m)+(l()?" has-addons ":"")),Q(m,cn(m)+(u()?" has-addons-centered ":"")),Q(m,cn(m)+(c()?" has-addons-right ":"")),Q(m,cn(m)+(d()?" is-grouped ":"")),Q(m,cn(m)+(f()?" is-grouped-multiline ":"")),Q(m,cn(m)+(h()?" is-grouped-right ":"")),Q(m,cn(m)+(v()?" is-grouped-centered ":"")),r()&&s().forEach((e=>{e.readonly=!0}));let e=s().filter((e=>"UIHidden"!==e.component));Q(y,0===e.length);let t=s().map((e=>e.component)).join("_");Q(b,`${p()}${t}-${i()}`)}));var k=Bn(),$=Fe(k),w=e=>{var t=Bn();ii(Fe(t),17,s,ni,((e,t)=>{var n=Bn();const r=De((()=>aa.get(cn(t).component)));fi(Fe(n),(()=>cn(r)),((e,n)=>{n(e,Xi((()=>cn(t)),{get onchange(){return g()},get fieldname(){return i()}}))})),Vn(e,n)})),Vn(e,t)},O=e=>{var t=Bn(),r=Fe(t),a=e=>{var t=jc(),r=Ne(t),o=Ne(r),a=De((()=>n()||s()[0].label));us(o,{get for(){return cn(b)},get label(){return cn(a)}}),ce(r);var l=Ue(r,2);ii(l,21,s,ni,((e,t)=>{var n=Bn();const r=De((()=>aa.get(cn(t).component)));fi(Fe(n),(()=>cn(r)),((e,n)=>{n(e,Xi((()=>cn(t)),{get onchange(){return g()},get fieldname(){return i()}}))})),Vn(e,n)})),ce(l),ce(t),Xe((()=>{Oi(t,`field is-horizontal ${cn(m)??""} ${cn(b)??""}`),pi(l,"id",cn(b))})),Vn(e,t)},l=e=>{var t=zc();ii(t,21,s,ni,((e,t)=>{var n=Wc();const r=De((()=>aa.get(cn(t).component)));var o=Fe(n);us(o,{get for(){return`form-field-${cn(t).component??""}-${i()??""}`},get label(){return cn(t).label}}),fi(Ue(o,2),(()=>cn(r)),((e,n)=>{n(e,Xi((()=>cn(t)),{get onchange(){return g()},get fieldname(){return i()}}))})),Vn(e,n)})),ce(t),Xe((()=>Oi(t,`field ${cn(m)??""} ${cn(b)??""}`))),Vn(e,t)};Zn(r,(e=>{o()?e(a):e(l,!1)}),!0),Vn(e,t)};Zn($,(e=>{cn(y)?e(w):e(O,!1)})),Vn(e,k),mn()}function Vc(e,t,n){return e&&e.preventDefault(),t("submit",n()),!1}function qc(e,t){t("reject")}var Hc=Wn('<div><span class="title"> </span></div>'),Gc=Wn('<div class="notification is-success"><h3 class="form-success-message"> </h3></div>'),Kc=Wn('<h5 class="title is-5"> </h5>'),Jc=Wn('<h6 class="subtitle is-6"> </h6>'),Yc=Wn("<button> </button>"),Qc=Wn("<button> </button>"),Xc=Wn('<div class="edit-form-error notification is-danger"> </div>'),Zc=Wn('<div class="buttons is-grouped is-centered"><!> <!></div> <!>',1),ed=Wn("<div><!></div>"),td=Wn('<div class="column notification is-danger"> </div>'),nd=Wn('<div class="columns"></div>'),id=Wn('<div class="notification is-danger"> </div>'),rd=Wn("<span> </span>"),od=Wn('<div class="edit-form-error notification is-danger"></div>'),sd=Wn("<button> </button>"),ad=Wn("<button> </button>"),ld=Wn('<!> <div class="buttons is-grouped is-centered"><!> <!></div>',1),ud=Wn("<!> <!> <!> <!> <!>",1),cd=Wn('<div class="form-container"><!> <!></div>');function dd(e,t){pn(t,!0);const n=Hi(),i=()=>qi(Mr,"$LOCALE",n);let r=ir(),o=H(Oe([])),s=H(!1),a=H(!1),l=H(!1),u=er(t,"form",31,(()=>Oe({}))),c=er(t,"loading",15,!1),d=er(t,"loader",3,"container"),f=er(t,"fields",19,(()=>[])),h=er(t,"SUCCESS_TEXT",3,"Операция завершена"),v=er(t,"WAITING_TEXT",3,"Отправка данных на сервер"),g=er(t,"title",3,""),p=er(t,"description",3,""),m=er(t,"buttonsFirst",3,!1),y=er(t,"horizontal",3,!1),b=er(t,"submit",19,(()=>({caption:"Отправить",enabled:!0}))),k=er(t,"cancel",19,(()=>({caption:"Назад",enabled:!0}))),$=De((()=>cn(s)||cn(a)));function w(){return Nc.collectData(f(),u())}function O(e,t){Nc.setFieldsVisibility(u(),e,t)&&u(u())}function I(e){let t=e.detail;u(u()[t.field].value=t.value,!0),u(u()),r("change",t)}var _=cd(),A=Ne(_),C=e=>{var t=Hc(),n=Ne(t),r=Ne(n,!0);ce(n),ce(t),Xe((()=>{Oi(t,`${("page"===d()?"pageloader":"containerloader")??""} ${(c()?"is-active":"")??""}`),Gn(r,i()[v()])})),Vn(e,t)};Zn(A,(e=>{"hidden"!==d()&&e(C)}));var S=Ue(A,2),E=e=>{var t=Gc(),n=Ne(t),r=Ne(n,!0);ce(n),ce(t),Xe((()=>Gn(r,i()[h()]))),Vn(e,t)},L=e=>{var t=ud(),n=Fe(t),s=e=>{var t=Kc(),n=Ne(t,!0);ce(t),Xe((()=>Gn(n,i()[g()]))),Vn(e,t)};Zn(n,(e=>{g()&&e(s)}));var a=Ue(n,2),l=e=>{var t=Jc(),n=Ne(t,!0);ce(t),Xe((()=>Gn(n,i()[p()]))),Vn(e,t)};Zn(a,(e=>{p()&&e(l)}));var c=Ue(a,2),d=e=>{var t=Zc(),n=Fe(t),s=Ne(n),a=e=>{var t=Yc();t.__click=[qc,r];var n=Ne(t,!0);ce(t),Xe((()=>{Oi(t,`button is-outlined ${k().classes??""}`),Gn(n,i()[k().caption])})),Vn(e,t)};Zn(s,(e=>{k().enabled&&e(a)}));var l=Ue(s,2),u=e=>{var t=Qc();t.__click=[Vc,r,w];var n=Ne(t,!0);ce(t),Xe((()=>{t.disabled=cn($),Oi(t,`button is-primary is-hovered ${b().classes??""}`),Gn(n,i()[b().caption])})),Vn(e,t)};Zn(l,(e=>{b().enabled&&e(u)})),ce(n);var c=Ue(n,2),d=e=>{var t=Xc(),n=Ne(t,!0);Xe((()=>Gn(n,cn(o).join(", ")))),ce(t),Vn(e,t)};Zn(c,(e=>{cn(o).length>0&&e(d)})),Vn(e,t)};Zn(c,(e=>{m()&&e(d)}));var h=Ue(c,2);ii(h,17,f,ni,((e,t)=>{var n=Bn(),i=Fe(n),r=e=>{var n=nd();ii(n,21,(()=>cn(t)),ni,((e,t)=>{var n=Bn(),i=Fe(n),r=e=>{var n=Bn(),i=Fe(n),r=e=>{var n=ed(),i=Ne(n),r=De((()=>[u()[cn(t)]]));Bc(i,{get controls(){return cn(r)},get name(){return cn(t)},get horizontal(){return y()},get label(){return u()[cn(t)].label},$$events:{change:I}}),ce(n),Xe((()=>Oi(n,`column ${(u()[cn(t)].fieldSize?"is-"+u()[cn(t)].fieldSize:"")??""} `))),Vn(e,n)};Zn(i,(e=>{u()[cn(t)].visible&&e(r)})),Vn(e,n)},o=e=>{var n=td(),i=Ne(n);ce(n),Xe((()=>Gn(i,`Subfield '${cn(t)??""}' is not registered`))),Vn(e,n)};Zn(i,(e=>{u()[cn(t)]&&u()[cn(t)].component?e(r):e(o,!1)})),Vn(e,n)})),ce(n),Vn(e,n)},o=e=>{var n=Bn(),i=Fe(n),r=e=>{var n=Bn(),i=Fe(n),r=e=>{var n=De((()=>[u()[cn(t)]]));Bc(e,{get controls(){return cn(n)},get name(){return cn(t)},get horizontal(){return y()},get label(){return u()[cn(t)].label},$$events:{change:I}})};Zn(i,(e=>{u()[cn(t)].visible&&e(r)})),Vn(e,n)},o=e=>{var n=id(),i=Ne(n);ce(n),Xe((()=>Gn(i,`Field '${cn(t)??""}' is not registered`))),Vn(e,n)};Zn(i,(e=>{u()[cn(t)]&&u()[cn(t)].component?e(r):e(o,!1)}),!0),Vn(e,n)};Zn(i,(e=>{Array.isArray(cn(t))?e(r):e(o,!1)})),Vn(e,n)}));var v=Ue(h,2),O=e=>{var t=ld(),n=Fe(t),s=e=>{var t=od();ii(t,21,(()=>cn(o)),ni,((e,t)=>{var n=rd(),r=Ne(n,!0);ce(n),Xe((()=>Gn(r,i()[cn(t)]))),Vn(e,n)})),ce(t),Vn(e,t)};Zn(n,(e=>{cn(o).length>0&&e(s)}));var a=Ue(n,2),l=Ne(a),u=e=>{var t=sd();t.__click=[qc,r];var n=Ne(t,!0);ce(t),Xe((()=>{Oi(t,`button ${(k().classes?k().classes:"")??""}`),Gn(n,i()[k().caption])})),Vn(e,t)};Zn(l,(e=>{k().enabled&&e(u)}));var c=Ue(l,2),d=e=>{var t=ad();t.__click=[Vc,r,w];var n=Ne(t,!0);ce(t),Xe((()=>{t.disabled=cn($),Oi(t,`button is-primary is-hovered ${(b().classes?b().classes:"")??""}`),Gn(n,i()[b().caption])})),Vn(e,t)};Zn(c,(e=>{b().enabled&&e(d)})),ce(a),Vn(e,t)};Zn(v,(e=>{m()||e(O)})),Vn(e,t)};return Zn(S,(e=>{cn(l)?e(E):e(L,!1)})),ce(_),Vn(e,_),mn({collectData:w,setFieldInvalid:function(e,t,n){u(Nc.setFieldInvalid(u(),e,t,n)),Q(a,!0)},setFieldValid:function(e,t){u(Nc.setFieldValid(u(),e,t))},isFieldValid:function(e){return Nc.isFieldValid(u(),e)},setFormFieldInvalid:function(e,t){u(Nc.setFormFieldInvalid(u(),e,t)),r("field.invalid",{fieldName:e})},setFormFieldValid:function(e){u(Nc.setFormFieldValid(u(),e)),r("field.valid",{fieldName:e})},updateFormValidationStatus:function(e){if(Q(s,!1),Q(a,!1),Array.isArray(e.form)&&e.form.length?(cn(o).splice(0,cn(o).length,...e.form),Q(s,!0)):cn(o).splice(0,cn(o).length),Q(o,Oe(cn(o))),e.fields)for(let t of Object.keys(u()))Array.isArray(e.fields[t])&&e.fields[t].length?(Nc.setFormFieldInvalid(u(),t,e.fields[t]),Q(a,!0)):Nc.setFormFieldValid(u(),t)},showSuccess:function(){Q(l,!0)},setLoading:function(){c(!0)},resetLoading:function(){c(!1)},setFieldsVisibility:O,setVisibleFields:function(e){O(e,!0)},setInvisibleFields:function(e){O(e,!1)},setFieldValue:function(e,t){Nc.setFieldValue(u(),e,t)&&I({detail:{field:e,value:t}})},updateField:function(e,t){u(u()[e]={...u()[e],...t},!0),u(u())}})}Dn(["click"]);const fd={notReadonly:e=>({readonly:!e}),readonly:e=>({readonly:e}),enable:e=>({disabled:!e}),disable:e=>({disabled:e})};let hd=function(){function e(){cr(this,e)}return pr(e,null,[{key:"add",value:function(t,n){to.objHas(ar(e,this,vd)._,t)||(ar(e,this,vd)._[t]=n)}},{key:"remove",value:function(t){to.objHas(ar(e,this,vd)._,t)&&!Object.keys(fd).includes(t)&&delete ar(e,this,vd)._[t]}},{key:"exec",value:function(t,n,i,r,o){return ar(e,this,vd)._[t](r,n,i,o)}}])}();var vd={_:{...fd}};var gd=new WeakMap,pd=new WeakMap,md=new WeakMap,yd=new WeakMap,bd=new WeakMap,kd=new WeakMap,$d=new WeakSet;let wd=function(e){function t({target:e=null,name:n="Default",options:i={},working:r={},data:o={},ui:s=dd}){var a;return cr(this,t),vr(a=lr(this,t,[{working:{name:`${n}Form`,...r},options:i,data:o}]),$d),fr(a,gd,null),fr(a,pd,null),fr(a,md,null),fr(a,yd,"default"),fr(a,bd,new sa),fr(a,kd,null),hr(kd,a,new sa(ua.getContent())),e&&a.setOptions("target",e),hr(gd,a,s),to.objHas(i,"action")&&hr(yd,a,i.action),a.initForm(),a}return br(t,e),pr(t,[{key:"initForm",value:function(){this.getOptions("autoInit",!0)&&this.initLibs(),this.getOptions("autoRender",!0)&&this.initUI()}},{key:"initLibs",value:function(){this.initFields(),this.initVariants(),this.initValidator()}},{key:"reInit",value:function(){this.initLibs(),this.updateUI(),this.resetLoading()}},{key:"initFields",value:function(){const e=this.getFormManifest();to.objHas(e,"fields")&&dr(bd,this).isEmpty()&&dr(bd,this).import(e.fields)}},{key:"initVariants",value:function(){this.getOptions("variants")&&dr(kd,this).import(this.getOptions("variants"))}},{key:"initValidator",value:function(){hr(pd,this,Rc.Runner(this.getFormValidators()))}},{key:"initUI",value:function(){try{const e=ar($d,this,Cd).call(this,{manifest:this.getFormManifest(),formOptions:this.getFormOptions(),data:this.getFormData(),injectedProps:this.getFormInjectedProps()}),t=this.getFormTargetEl();for(;t.children.length;)t.removeChild(t.firstChild);hr(md,this,new(dr(gd,this))({target:t,props:e})),ar($d,this,Od).call(this),this.validateForm()}catch(e){this.error(e)}}},{key:"updateUI",value:function(){try{const e=ar($d,this,Cd).call(this,{manifest:this.getFormManifest(),formOptions:this.getFormOptions(),data:this.getFormData(),injectedProps:this.getFormInjectedProps()});dr(md,this).$set(e),this.validateForm()}catch(e){this.error(e)}}},{key:"validateForm",value:async function(){if(!this.getOptions("readonly",!1))try{const e=await dr(pd,this).call(this,dr(md,this).collectData(),this.getFormAction());dr(md,this).updateFormValidationStatus(e.getReport()),e.clean||this.emit("error",e.getReport())}catch(e){const t={form:[_r.ERROR_DEFAULT,e.message]};dr(md,this)&&dr(md,this).updateFormValidationStatus(t),this.emit("error",t),to.report(e)}}},{key:"submit",value:function(e){this.emit("submit",e)}},{key:"reject",value:function(){this.emit("reject")}},{key:"$on",value:function(){dr(md,this)&&dr(md,this).$on(...arguments)}},{key:"setLoading",value:function(){this.emit("loading"),dr(md,this).setLoading()}},{key:"resetLoading",value:function(){this.emit("loaded"),dr(md,this).resetLoading()}},{key:"destroy",value:function(){this.emit("destroy"),dr(md,this)&&(dr(md,this).$destroy&&dr(md,this).$destroy(),dr(md,this).destroy&&dr(md,this).destroy(),hr(md,this,null)),hr(pd,this,null),hr(yd,this,null),hr(bd,this,null),hr(kd,this,null),this.setOptions(null),this.setWorking(null),this.setData(null)}},{key:"getName",value:function(){return this.getWorking("name")}},{key:"getFormAction",value:function(){return dr(yd,this)}},{key:"setFormAction",value:function(e){e&&e!==dr(yd,this)&&(hr(yd,this,e),dr(md,this)&&dr(md,this).$destroy(),this.initForm())}},{key:"processResult",value:function(e){return e.status===zo?(this.setFormSuccess(),!0):(this.setFormErrors(e),!1)}},{key:"setFormSuccess",value:function(){dr(md,this).showSuccess(),this.emit("success")}},{key:"setFormErrors",value:function(e){if(this.getOptions("readonly",!1))return;const t={form:[],fields:{}};e.message&&t.form.push(e.message),e.errors&&Object.keys(e.errors).length>0&&(t.fields={...e.errors}),dr(md,this).updateFormValidationStatus(t),this.emit("error",t)}},{key:"getVariant",value:function(e,t){let n=dr(kd,this).get(e).find((function(e){return e.id===t}));return n||null}},{key:"getFormTargetEl",value:function(){const e=this.getOptions("target",".form");if(e instanceof HTMLElement)return e;if("string"==typeof e)return document.querySelector(e);throw new Error("Form parent element is not defined")}},{key:"getFormValidators",value:function(){return this.getOptions("validators")?this.getOptions("validators",{}):(ar($d,this,Sd).call(this,"validators"),{})}},{key:"getFormManifest",value:function(){const e=this.getModelName();return e&&to.getApp()?to.getApp().getInterfaceManifest(e):this.getOptions("manifest",void 0)?this.getOptions("manifest",{}):(ar($d,this,Sd).call(this,"manifest"),{})}},{key:"getFormData",value:function(){return this.getData()?this.getData():(ar($d,this,Sd).call(this,"data"),{})}},{key:"getFormOptions",value:function(){return this.getOptions("ui",void 0)||this.getOptions("fields",void 0)?{ui:this.getOptions("ui",{}),fields:this.getOptions("fields",{})}:(ar($d,this,Sd).call(this,"options"),{ui:{},fields:{}})}},{key:"getFormInjectedProps",value:function(){return this.getOptions("injected",{})}},{key:"collectData",value:function(){if(this.getOptions("readonly",!1))return this.getData();const e=dr(md,this).collectData();return this.setData({...e}),e}},{key:"updateField",value:function(e,t){dr(md,this).updateField(e,t)}},{key:"getModel",value:function(e,t){return"string"==typeof e?this.getInterface(e)(t||{}):this.getInterface()(e||{})}},{key:"getInterface",value:function(e=!1){return to.getApp().getInterface(e||this.getModelName())}},{key:"getModelName",value:function(){return this.getOptions("model")}}])}(Kl);function Od(){var e=this;dr(md,this).$on("change",(function(){return e.validateForm()})),dr(md,this).$on("change",(function(t){e.emit("change",t.detail),e.emit(`change.${t.detail.field}`,t.detail.value)})),dr(md,this).$on("submit",(function(t){return e.submit(t.detail)})),dr(md,this).$on("reject",(function(){return e.reject()})),dr(md,this).$on("error",(function({detail:t}){return e.emit("error",t)})),ar($d,this,Id).call(this)}function Id(){const e=this.getOptions("masters",!1);if(e)for(let t in e){const n=e[t];for(let e in n){const i=n[e];ar($d,this,_d).call(this,e,t,i)}}}function _d(e,t,n=[]){var i=this;this.on(`change.${t}`,(function(r){ar($d,i,Ad).call(i,e,t,n,r)})),this.emit(`change.${t}`,this.getFormData()[t])}function Ad(e,t,n,i){var r=this;const o=hd.exec(e,t,n,i,this);n.forEach((function(e){r.updateField(e,o)}))}function Cd({manifest:e,formOptions:t={ui:{},fields:{}},data:n=null,injectedProps:i={}}){const r=dr(yd,this);null==t&&(t={ui:{},fields:{}});const o=Nc.initFormByField({},e.actions[r].fields,dr(kd,this),dr(bd,this),t.fields,n);return{loading:!this.getOptions("autoInit",!0),title:e.actions[r].title,description:e.actions[r].description,fields:e.actions[r].fields,form:o,...t.ui,...i}}function Sd(e){this.error(`${e} for ${this.getWorking("name")} form is not defined`)}var Ed=Wn('<div class="block-container"><div class="form-paper"></div> <!></div>');function Ld(e,t){pn(t,!0);let n=ir(),i=er(t,"name",3,"default-form"),r=er(t,"showModes",3,!1),o=er(t,"mode",15,"default"),s=er(t,"forms",19,(()=>[]));let a=H(Oe([]));function l(){Q(a,Oe(s().filter((e=>o()!==e.mode)).map((e=>({title:e.title,outlined:!0,type:"link",action(){var t;t=e.mode,o(t),n("mode",t),l()}})))))}tr((()=>{l()}));var u=Ed(),c=Ne(u),d=Ue(c,2),f=e=>{Uo(e,{centered:!0,classes:"mt-4",get values(){return cn(a)},set values(e){Q(a,Oe(e))}})};Zn(d,(e=>{r()&&e(f)})),ce(u),Xe((()=>{pi(u,"id",`${i()??""}-form-set`),pi(c,"id",`${i()??""}-form-set-container`)})),Vn(e,u),mn()}const Td="form-set";var xd=new WeakMap,Nd=new WeakMap,Fd=new WeakMap,Ud=new WeakMap,Md=new WeakSet;let Dd=function(e){function t({options:e={},formComponent:n=dd,formSetComponent:i=Ld}){var r;return cr(this,t),vr(r=lr(this,t,[{options:{name:Td,mode:"default",showModes:!0,...e}}]),Md),fr(r,xd,null),fr(r,Nd,null),fr(r,Fd,null),fr(r,Ud,null),hr(Nd,r,n),hr(xd,r,i),r.setFormMode(r.getOptions("mode")),r.initUI(),r}return br(t,e),pr(t,[{key:"initUI",value:function(){var e=this;const t=this.getFrameTargetEl();for(;t.children.length;)t.removeChild(t.firstChild);hr(Ud,this,new(dr(xd,this))({target:t,props:ar(Md,this,Pd).call(this)})),dr(Ud,this).$on("mode",(function(t){e.setFormMode(t.detail),e.updateForm()})),this.updateForm()}},{key:"setFormMode",value:function(e){this.isModeExists(e)?this.setWorking("mode",e):(this.setWorking("mode",this.getFirstMode()),this.updateFormModeInUI())}},{key:"updateFormModeInUI",value:function(){dr(Ud,this)&&null!==this.getWorking("mode")&&dr(Ud,this).$set({mode:this.getWorking("mode")})}},{key:"getFormMode",value:function(){return this.getWorking("mode")}},{key:"updateForm",value:function(){this.destroyForm(),null!==this.getWorking("mode")&&this.renderForm()}},{key:"renderForm",value:function(){var e=this;const t=this.getFormTargetEl(),n=this.getFormConfig();if(!(t instanceof HTMLElement&&n))throw new Error("error while form rendering");const i=function(t){e.setFormMode(t),e.updateForm()};if(n.form){for(;t.children.length;)t.removeChild(t.firstChild);hr(Fd,this,new n.form({options:{target:t,changeMode:i}}))}else n.props&&hr(Fd,this,new(dr(Nd,this))({target:t,...n.props,changeMode:i}))}},{key:"getFormConfig",value:function(){var e=this;return this.getOptions("forms").find((function(t){return t.mode===e.getFormMode()}))}},{key:"destroyForm",value:function(){const e=this.getFormTargetEl();if(e)for(;e.firstChild;)e.removeChild(e.lastChild);dr(Fd,this)&&dr(Fd,this).$destroy&&dr(Fd,this).$destroy(),hr(Fd,this,null)}},{key:"destroyFrame",value:function(){dr(Ud,this)&&dr(Ud,this).$destroy&&dr(Ud,this).$destroy(),hr(Ud,this,null)}},{key:"isModeExists",value:function(e){return this.getOptions("forms",[]).some((function(t){return t.mode===e}))}},{key:"getFirstMode",value:function(){const e=this.getOptions("forms",[]);return e.length>0?e[0].mode:null}},{key:"destroy",value:function(){hr(xd,this,null),hr(Nd,this,null),this.destroyForm(),this.destroyFrame(),this.setData(null),this.setOptions(null),this.setWorking(null)}},{key:"getFrameTargetEl",value:function(){const e=this.getOptions("target",".form-set");if(e instanceof HTMLElement)return e;if("string"==typeof e)return document.querySelector(e);throw new Error("form set target is not HTMLElement or string")}},{key:"getFormTargetEl",value:function(){const e=this.getOptions("name",Td);return document.querySelector(`#${e}-form-set-container`)}}])}(Kl);function Pd(){return{showModes:this.getOptions("showModes",!0),mode:this.getFormMode(),forms:this.getOptions("forms",[]),name:this.getOptions("name",Td)}}function Rd(e,t){return"function"!=typeof t()||(e.preventDefault(),t()(e.currentTarget.dataset.href),!1)}var jd=Wn('<li class="is-active"><a aria-current="page"> </a></li>'),Wd=Wn('<li class="is-plain-crumb"> </li>'),zd=Wn("<li><a> </a></li>"),Bd=Wn('<nav class="breadcrumb" aria-label="breadcrumbs"><ul></ul></nav>');Dn(["click"]);let Vd=function(){function e(){cr(this,e)}return pr(e,null,[{key:"render",value:function({target:t,root:n="",navigate:i}){this.remove(),e.UIConstructor&&(this.ui=new e.UIConstructor({target:t,props:{items:this.getBreadcrumbs(),root:n,go:i}}))}},{key:"setHead",value:function(e){return this.head.splice(0,this.head.length,...e),this}},{key:"setTail",value:function(e){return this.tail.splice(0,this.tail.length,...e),this}},{key:"getBreadcrumbs",value:function(){let e=[];return e.push(...this.head),e.push(...this.tail),e}},{key:"update",value:function(){this.ui&&this.ui.$set({items:this.getBreadcrumbs()})}},{key:"remove",value:function(){return this.ui&&(this.ui.$destroy(),this.ui=null),this}}])}();var qd;mr(Vd,"UIConstructor",null),mr(Vd,"ui",null),mr(Vd,"head",[]),mr(Vd,"tail",[]),Vd.UIConstructor=function(e,t){pn(t,!0);const n=Hi(),i=()=>qi(Mr,"$LOCALE",n);let r=er(t,"root",3,""),o=er(t,"items",19,(()=>[])),s=er(t,"go",3,null);var a=Bd(),l=Ne(a);ii(l,21,o,ni,((e,t,n)=>{var a=Bn(),l=Fe(a),u=e=>{var n=jd(),o=Ne(n),s=Ne(o,!0);ce(o),ce(n),Xe((()=>{pi(o,"href",`${r()??""}${cn(t).url??""}`),pi(o,"data-href",cn(t).url),Gn(s,i()[cn(t).title])})),Vn(e,n)},c=e=>{var n=Bn(),o=Fe(n),a=e=>{var n=Wd(),r=Ne(n,!0);ce(n),Xe((()=>Gn(r,i()[cn(t).title]))),Vn(e,n)},l=e=>{var n=zd(),o=Ne(n);o.__click=[Rd,s];var a=Ne(o,!0);ce(o),ce(n),Xe((()=>{pi(o,"href",`${r()??""}${cn(t).url??""}`),pi(o,"data-href",cn(t).url),Gn(a,i()[cn(t).title])})),Vn(e,n)};Zn(o,(e=>{!1===cn(t).url?e(a):e(l,!1)})),Vn(e,n)};Zn(l,(e=>{o().length===n+1?e(u):e(c,!1)})),Vn(e,a)})),ce(l),ce(a),Vn(e,a),mn()};let Hd=function(){return pr((function e(){cr(this,e)}),null,[{key:"hide",value:function(){}},{key:"setApp",value:function(e){return this.app||(this.app=e),this}},{key:"setOptions",value:function(e){return this.options={...this.options,...e},this}},{key:"getOptionsPathTo",value:function(e){return`menu.${this.options.type}.${e}`}},{key:"isDirectNavigation",value:function(){return this.app?this.app.getOptions(this.getOptionsPathTo("directNavigation"),this.options.directNavigation):this.options.directNavigation}},{key:"getOptions",value:function(){return this.app?{brand:this.app.getOptions("brand",this.options.brand),items:this.app.getOptions(this.getOptionsPathTo("items"),this.options.items),sections:this.app.getOptions(this.getOptionsPathTo("sections"),this.options.sections),targetSelector:this.app.getOptions(this.getOptionsPathTo("targetSelector"),this.options.targetSelector),toggleSelector:this.app.getOptions(this.getOptionsPathTo("toggleSelector"),this.options.toggleSelector),open:this.app.getOptions(this.getOptionsPathTo("open"),this.options.open),directNavigation:this.app.getOptions(this.getOptionsPathTo("directNavigation"),this.options.directNavigation),root:this.app.getOptions("router.root",this.options.root),navigate:this.options.navigate.bind(this),getComponent:this.getComponent.bind(this)}:this.options}},{key:"getComponent",value:function(e){return!!aa.contains(e)&&aa.get(e)}},{key:"initField",value:function(e,t=[]){var n=this;e.forEach((function(e){t.forEach((function(t){Object.hasOwn(e,t)||(e[t]=n.DEFAULT[t])})),Object.hasOwn(e,"items")&&n.initField(e.items,t)}))}},{key:"sortList",value:function(e){var t=this;e.sort((function(e,n){return Object.hasOwn(e,"items")&&t.sortList(e.items),Object.hasOwn(n,"items")&&t.sortList(n.items),e.priority===n.priority?e.title>n.title?1:-1:e.priority<n.priority?1:-1}))}},{key:"removeDublicates",value:function(e){for(let t=0;t<e.length;t++){let n=e[t].priority;e.filter((function(n){return n.id===e[t].id})).forEach((function(t,i){0!==i&&(t.priority<n&&(n=t.priority),e.splice(e.indexOf(t),1))})),e[t].priority=n}return e}},{key:"prepareData",value:function(){let e=[];e.push(...this.getOptions().items);let t=[];t.push(...this.getOptions().sections),this.initField(t,["priority"]),this.removeDublicates(t),this.initField(e,["priority","section","type"]),this.sortList(t),t.push({id:this.DEFAULT.section,title:this.DEFAULT.sectionTitle}),this.sortList(e),this.sections=t,this.items=e}},{key:"remove",value:function(){this.menu&&(this.menu.$destroy(),this.menu=null,clearInterval(this.interval))}},{key:"updateIndicator",value:function(e,t,n){this.updateSection(e,(function(e){e.indicator.state=n})),this.updateItem(t,(function(e){e.indicator.state=n}))}},{key:"updateTag",value:function(e,t,n){this.updateSection(e,(function(e){e.tag=n})),this.updateItem(t,(function(e){e.tag=n}))}},{key:"updateSectionTag",value:function(e,t){this.updateSection(e,(function(e){e.tag={...e.tag,...t}}))}},{key:"updateItemTag",value:function(e,t){this.updateItem(e,(function(e){e.tag={...e.tag,...t}}))}},{key:"updateSection",value:function(e,t){if(this.sections&&e){for(let n in this.sections)this.sections[n].id===e&&t(this.sections[n]);this.menu&&this.menu.$set({sections:this.sections})}}},{key:"updateSectionItems",value:function(e,t){if(this.sections&&e){let n=this.items.filter((function(t){return t.section===e}));for(let e of n)this.items.splice(this.items.indexOf(e),1);this.items.push(...t(n)),this.menu&&this.menu.$set({items:this.items})}}},{key:"updateItem",value:function(e,t){e&&this.items&&(this.items.forEach((function(n){n.id===e&&t(n)})),this.menu&&this.menu.$set({items:this.items}))}},{key:"isTouch",value:function(){return _r.isMobile(!0)}},{key:"getSectionComponent",value:function(){}}])}();function Gd(e,t){return e.preventDefault(),t()({full:e.target.getAttribute("href"),short:e.target.dataset.href}),!1}qd=Hd,mr(Hd,"MAX_TOUCH_WIDTH",1023),mr(Hd,"DEFAULT",{section:"any",sectionTitle:"Меню",priority:0,type:"link",open:!1}),mr(Hd,"app",null),mr(Hd,"directNavigation",!1),mr(Hd,"menu",void 0),mr(Hd,"options",{directNavigation:!1,navigate:function(e){if(qd.hide(),!qd.isDirectNavigation()&&qd.app){let t=qd.app.getWorking("router");if(t)return t.navigate(e.short)}document.location.assign(e.full)}}),mr(Hd,"items",[]),mr(Hd,"sections",[]),mr(Hd,"location",void 0),mr(Hd,"interval",void 0);var Kd=Wn("<li><a> <!> <!></a></li>"),Jd=Wn("<li> <!> <!></li>");function Yd(e,t,n){return e&&e.preventDefault()&&e.stopPropagation(),t(!t()),n()(t())||t(!t()),!1}Dn(["click"]);var Qd=Wn('<span class="icon is-small is-toggle-submenu is-pulled-right" role="button" tabindex="0"><i aria-hidden="true"></i></span>');function Xd(e,t){pn(t,!0);const n="fa-angle-down",i="fa-angle-up";let r=er(t,"icon_opened",19,(()=>n)),o=er(t,"icon_closed",19,(()=>i)),s=er(t,"closed",7),a=er(t,"ontoggle",3,(()=>!0));var l=Qd();l.__click=[Yd,s,a],l.__keyup=[Yd,s,a];var u=Ne(l);ce(l),Xe((()=>Oi(u,`fas ${(s()?o():r())??""}`))),Vn(e,l),mn()}Dn(["click","keyup"]);var Zd=Wn('<span class="is-no-link"> </span>'),ef=Wn("<!> <!> <!> <!>",1);function tf(e,t){pn(t,!0);const n=Hi();let i=er(t,"item",19,(()=>({})));var r=ef(),o=Fe(r),s=e=>{vs(e,Xi((()=>i().icon)))},a=e=>{var t=Bn(),r=Fe(t),o=e=>{var t=Bn();const n=De((()=>aa.get(i().component)));fi(Fe(t),(()=>cn(n)),((e,t)=>{t(e,Xi({get id(){return i().id}},(()=>i().props)))})),Vn(e,t)},s=e=>{var t=Zd(),r=Ne(t,!0);ce(t),Xe((()=>Gn(r,qi(Mr,"$LOCALE",n)[i().title]))),Vn(e,t)};Zn(r,(e=>{"component"===i().type&&i().component&&aa.contains(i().component)?e(o):e(s,!1)}),!0),Vn(e,t)};Zn(o,(e=>{i().icon?e(s):e(a,!1)}));var l=Ue(o,2),u=e=>{ao(e,Xi({get id(){return i().id}},(()=>i().tag)))};Zn(l,(e=>{i().tag&&e(u)}));var d=Ue(l,2),f=e=>{yo(e,Xi({get id(){return i().id}},(()=>i().indicator)))};Zn(d,(e=>{i().indicator&&e(f)})),di(Ue(d,2),(()=>t.children??c)),Vn(e,r),mn()}function nf(e,t){return e.preventDefault(),t()({full:e.target.getAttribute("href"),short:e.target.dataset.href}),!1}var rf=Wn('<a class="has-subitems"><!></a>'),of=Wn("<li><!> <!></li>"),sf=Wn("<ul></ul>");function af(e,t){pn(t,!0);let n=er(t,"root",3,""),i=er(t,"items",19,(()=>[])),r=er(t,"onnavigate",3,(()=>{}));let o=Oe((e=>{const t={};return e.forEach(((e,n)=>t[n]=e.closed)),t})(i()));var s=sf();ii(s,21,i,ni,((e,t,i)=>{var s=Bn(),a=Fe(s),l=e=>{var s=of(),a=Ne(s),l=e=>{var s=rf();s.__click=[nf,r],tf(Ne(s),{get item(){return cn(t)},children:(e,t)=>{Xd(e,{get closed(){return o[i]},set closed(e){o[i]=e}})},$$slots:{default:!0}}),ce(s),Xe((()=>{pi(s,"href",`${n()??""}${cn(t).url??""}`),pi(s,"data-href",cn(t).url)})),Vn(e,s)},u=e=>{tf(e,{get item(){return cn(t)},children:(e,t)=>{Xd(e,{get closed(){return o[i]},set closed(e){o[i]=e}})},$$slots:{default:!0}})};Zn(a,(e=>{void 0!==cn(t).url&&!1!==cn(t).url?e(l):e(u,!1)})),af(Ue(a,2),{get root(){return n()},get items(){return cn(t).items},get onnavigate(){return r()},get closed(){return o[i]},set closed(e){o[i]=e}}),ce(s),Xe((()=>Oi(s,`is-no-follow-subtitle ${cn(t).classes??""}`))),Vn(e,s)},u=e=>{!function(e,t){pn(t,!0);const n=Hi(),i=()=>qi(Mr,"$LOCALE",n);let r=er(t,"root",3,""),o=er(t,"item",19,(()=>({}))),s=er(t,"onnavigate",3,(()=>{}));var a=Bn(),l=Fe(a),u=e=>{var t=Kd(),n=Ne(t);n.__click=[Gd,s];var a=Ne(n),l=Ue(a),u=e=>{yo(e,Xi({get id(){return o().id}},(()=>o().tag)))};Zn(l,(e=>{o().tag&&e(u)}));var c=Ue(l,2),d=e=>{yo(e,Xi({get id(){return o().id}},(()=>o().indicator)))};Zn(c,(e=>{o().indicator&&e(d)})),ce(n),ce(t),Xe((()=>{Oi(t,o().classes),pi(n,"href",`${r()??""}${o().url??""}`),pi(n,"data-href",o().url),Gn(a,`${i()[o().title]??""} `)})),Vn(e,t)},c=e=>{var t=Jd(),n=Ne(t),r=Ue(n),s=e=>{yo(e,Xi({get id(){return o().id}},(()=>o().tag)))};Zn(r,(e=>{o().tag&&e(s)}));var a=Ue(r,2),l=e=>{yo(e,Xi({get id(){return o().id}},(()=>o().indicator)))};Zn(a,(e=>{o().indicator&&e(l)})),ce(t),Xe((()=>{Oi(t,`is-no-follow-subtitle ${o().classes??""}`),Gn(n,`${i()[o().title]??""} `)})),Vn(e,t)};Zn(l,(e=>{void 0!==o().url&&!1!==o().url?e(u):e(c,!1)})),Vn(e,a),mn()}(e,{get root(){return n()},get item(){return cn(t)},get onnavigate(){return r()}})};Zn(a,(e=>{cn(t).items&&cn(t).items.length?e(l):e(u,!1)})),Vn(e,s)})),ce(s),Xe((()=>Oi(s,`menu-list ${(t.closed?"is-closed":"")??""}`))),Vn(e,s),mn()}Dn(["click"]);var lf=Wn("<p><!> <!> <!></p>"),uf=Wn("<!> <!>",1);function cf(e,t){pn(t,!0);const n=Hi();let i=er(t,"items",19,(()=>[])),r=er(t,"root",3,""),o=er(t,"onnavigate",3,(()=>{})),s=De((()=>i().filter((e=>t.section.id===e.section))));var a=uf(),l=Fe(a),u=e=>{var i=Bn(),r=Fe(i),o=e=>{var i=lf(),r=Ne(i),o=e=>{var n=Bn();const i=De((()=>aa.get(t.section.component)));fi(Fe(n),(()=>cn(i)),((e,n)=>{n(e,Xi({get id(){return t.section.id}},(()=>t.section.props)))})),Vn(e,n)},s=e=>{var i=zn();Xe((()=>Gn(i,qi(Mr,"$LOCALE",n)[t.section.title]))),Vn(e,i)};Zn(r,(e=>{"component"===t.section.type&&t.section.component&&aa.contains(t.section.component)?e(o):e(s,!1)}));var a=Ue(r,2),l=e=>{yo(e,Xi({get id(){return t.section.id}},(()=>t.section.tag)))};Zn(a,(e=>{t.section.tag&&e(l)}));var u=Ue(a,2),c=e=>{yo(e,Xi({get id(){return t.section.id}},(()=>t.section.indicator)))};Zn(u,(e=>{t.section.indicator&&e(c)})),ce(i),Xe((()=>Oi(i,`menu-label ${t.section.classes??""}`))),Vn(e,i)};Zn(r,(e=>{(cn(s).length||t.section.component||t.section.tag||t.section.indicator)&&e(o)})),Vn(e,i)};Zn(l,(e=>{t.section&&e(u)}));var c=Ue(l,2),d=e=>{af(e,{get root(){return r()},get items(){return cn(s)},get onnavigate(){return o()}})};Zn(c,(e=>{cn(s).length&&e(d)})),Vn(e,a),mn()}function df(e,t){pn(t,!0);let n=er(t,"root",3,""),i=er(t,"items",19,(()=>[])),r=er(t,"sections",19,(()=>[])),o=er(t,"navigate",3,null);function s(e){"function"==typeof o()&&o()(e)}var a=Bn();ii(Fe(a),17,r,ni,((e,t)=>{cf(e,{get section(){return cn(t)},get items(){return i()},get root(){return n()},onnavigate:s})})),Vn(e,a),mn()}const ff=Fr({open:!0});var hf;const vf="side";let gf=function(e){function t(){return cr(this,t),lr(this,t,arguments)}return br(t,e),pr(t,null,[{key:"render",value:function(e){e&&this.setApp(e),this.prepareData(),this.menu||this.createUI()}},{key:"update",value:function(){this.menu&&(this.menu.$destroy(),this.createUI())}},{key:"createUI",value:function(){let e=document.querySelector(this.getOptions().targetSelector);e&&(this.menu=Kn(df,{target:e,props:{items:this.items,sections:this.sections,root:this.getOptions().root,navigate:this.getOptions().navigate}}),this.initSizeResponse(),this.interval=setInterval(this.updateMenuActiveItem.bind(this),200),this.bindToggle())}},{key:"itemIsActive",value:function(e){return(this.location+"/").indexOf(e+"/")>-1}},{key:"updateMenu",value:function(){var e=this;Array.from(document.querySelectorAll(this.getOptions().targetSelector+" a")).forEach((function(t){e.itemIsActive(t.getAttribute("href"))?t.classList.add("is-active"):t.classList.remove("is-active")}))}},{key:"updateMenuActiveItem",value:function(){let e=window.location.toString(),t=this.location;t?e!==t&&(this.location=e,this.updateMenu()):(this.location=e,this.updateMenu())}},{key:"initSizeResponse",value:function(){this.nav=document.querySelector("nav.navbar"),this.aside=document.querySelector("aside"),this.main=document.querySelector("main"),this.resizeAsideAndMain(this.aside,this.main,this.nav),this.resizeMain(this.main,this.aside),window.addEventListener("resize",this.resizeMain.bind(this)),this.isTouch()&&(this.getOptions().open?this.show():this.hide())}},{key:"resizeMain",value:function(){if(this.isTouch())this.aside.classList.contains("is-active")?this.main.style.display="none":(this.main.style.display="block",this.main.style.marginLeft="0px");else{let e=this.aside.getBoundingClientRect();this.main.style.display="block","0px"===this.main.style.height&&(this.main.style.height="auto"),this.main.style.marginLeft=e.width+e.left+"px"}}},{key:"resizeAside",value:function(){if("none"!==this.aside.style.display){let e=this.nav.getBoundingClientRect();this.aside.style.height=window.innerHeight-e.height+"px",this.aside.style.marginTop=e.height+"px"}}},{key:"resizeAsideAndMain",value:function(){let e=this.nav.getBoundingClientRect();this.aside.style.height=window.innerHeight-e.height+"px"}},{key:"bindToggle",value:function(){var e=this;let t=document.querySelectorAll(this.getOptions().toggleSelector);Array.from(t).forEach((function(t){t.removeEventListener("click",e.toggle.bind(e)),t.addEventListener("click",e.toggle.bind(e))}))}},{key:"toggle",value:function(e){return e&&e.preventDefault(),this.aside&&(this.isTouch()?this.aside.classList.toggle("is-active"):this.aside.classList.toggle("is-closed"),this.resizeMain()),!1}},{key:"hide",value:function(e){return e&&e.preventDefault(),this.aside&&(this.isTouch()?this.aside.classList.remove("is-active"):this.aside.classList.add("is-closed"),this.resizeMain()),ff.update((function(e){return e.open=!1,e})),!1}},{key:"show",value:function(e){return e&&e.preventDefault(),this.aside&&(this.isTouch()?this.aside.classList.add("is-active"):this.aside.classList.remove("is-closed"),this.resizeMain()),ff.update((function(e){return e.open=!0,e})),!1}},{key:"isOpen",value:function(){return!this.aside||(this.isTouch()?this.aside.classList.contains("is-active"):!this.aside.classList.contains("is-closed"))}}])}(Hd);hf=gf,mr(gf,"nav",void 0),mr(gf,"main",void 0),mr(gf,"aside",void 0),mr(gf,"DEFAULT",{section:"any",sectionTitle:"Меню",priority:0,open:!0,type:"link"}),mr(gf,"options",{directNavigation:!1,type:vf,items:[],sections:[],targetSelector:`#${vf}-menu`,toggleSelector:`.${vf}-menu-toggle`,root:"/",open:!0,navigate:function(e){if(hf.isTouch()&&(hf.hide(),hf.app&&hf.app.emit("top-navbar-burger:update",{closed:!0})),!hf.isDirectNavigation()&&hf.app){let t=hf.app.getWorking("router");if(t)return t.navigate(e.short)}document.location.assign(e.full)}});var pf=Wn('<a class="navbar-item"><!> <!></a>');var mf=Wn("<!> <!> <!>",1);function yf(e,t){pn(t,!0);const n=Hi();var i=mf(),r=Fe(i),o=e=>{ms(e,Xi((()=>t.item.icon)))},s=e=>{var i=Bn(),r=Fe(i),o=e=>{var n=Bn();const i=De((()=>aa.get(t.item.component)));fi(Fe(n),(()=>cn(i)),((e,n)=>{n(e,Xi({get id(){return t.item.id}},(()=>t.item.props)))})),Vn(e,n)},s=e=>{var i=zn();Xe((()=>Gn(i,qi(Mr,"$LOCALE",n)[t.item.title]))),Vn(e,i)};Zn(r,(e=>{"component"===t.item.type&&t.item.component&&aa.contains(t.item.component)?e(o):e(s,!1)}),!0),Vn(e,i)};Zn(r,(e=>{t.item.icon?e(o):e(s,!1)}));var a=Ue(r,2),l=e=>{ao(e,Xi({top:!0,right:!0,size:"small",get id(){return t.item.id}},(()=>t.item.tag)))};Zn(a,(e=>{t.item.tag&&e(l)}));var u=Ue(a,2),c=e=>{yo(e,Xi({get id(){return t.item.id}},(()=>t.item.indicator)))};Zn(u,(e=>{t.item.indicator&&e(c)})),Vn(e,i),mn()}function bf(e,t,n){t("click",{event:e,element:n()})}var kf=Wn("<hr>"),$f=Wn("<a><!></a>"),wf=Wn('<div role="button" tabindex="0"><!></div>'),Of=Wn("<!> <!>",1);function If(e,t){pn(t,!0);const n=ir();let i=er(t,"root",3,""),r=er(t,"item",19,(()=>({}))),o=er(t,"hidden",3,""),s=er(t,"classes",3,"");var a=Of(),l=Fe(a),u=e=>{var t=kf();Xe((()=>Oi(t,`navbar-divider ${(o()?`is-hidden-${o()}`:"")??""} `))),Vn(e,t)};Zn(l,(e=>{r().break&&e(u)}));var c=Ue(l,2),d=e=>{var t=$f();t.__click=[bf,n,r],yf(Ne(t),{get item(){return r()}}),ce(t),Xe((()=>{Oi(t,`navbar-item ${(o()?`is-hidden-${o()}`:"")??""} ${r().classes??""} ${s()??""} `),pi(t,"href",`${i()??""}${r().url??""}`),pi(t,"data-href",r().url)})),Vn(e,t)},f=e=>{var t=wf();t.__click=[bf,n,r],t.__keyup=[bf,n,r],yf(Ne(t),{get item(){return r()}}),ce(t),Xe((()=>Oi(t,`navbar-item ${(o()?`is-hidden-${o()}`:"")??""} ${r().classes??""} ${s()??""}`))),Vn(e,t)};Zn(c,(e=>{r().url?e(d):e(f,!1)})),Vn(e,a),mn()}function _f(e,t,n){t("click",{event:e,element:n()})}Dn(["click","keyup"]);var Af=Wn('<div><a href=""><!></a> <div></div></div>'),Cf=Wn("<a><!></a>"),Sf=Wn('<div role="button" tabindex="0"><!></div>');function Ef(e,t){pn(t,!0);const n=ir();let i=er(t,"root",3,""),r=er(t,"section",19,(()=>({}))),o=er(t,"items",19,(()=>[])),s=er(t,"hidden",3,""),a=er(t,"hoverable",3,!0),l=er(t,"arrowless",3,!1),u=er(t,"right",3,!1);var c=Bn(),d=Fe(c),f=e=>{var c=Af(),d=Ne(c);d.__click=[_f,n,r],yf(Ne(d),{get item(){return r()}}),ce(d);var f=Ue(d,2);ii(f,21,o,(e=>e.id),((e,n)=>{If(e,{get root(){return i()},get item(){return cn(n)},$$events:{click(e){Bi.call(this,t,e)}}})})),ce(f),ce(c),Xe((()=>{Oi(c,`navbar-item has-dropdown ${(a()?"is-hoverable":"")??""} ${(s()?`is-hidden-${s()}`:"")??""} `),Oi(d,`navbar-link ${(l()?"is-arrowless":"")??""}`),Oi(f,`navbar-dropdown ${(u()?"is-right":"")??""}`)})),Vn(e,c)},h=e=>{var t=Bn(),o=Fe(t),a=e=>{var t=Cf();t.__click=[_f,n,r],yf(Ne(t),{get item(){return r()}}),ce(t),Xe((()=>{Oi(t,`navbar-item ${(s()?`is-hidden-${s()}`:"")??""} `),pi(t,"href",`${i()??""}${r().url??""}`),pi(t,"data-href",r().url)})),Vn(e,t)},l=e=>{var t=Sf();t.__click=[_f,n,r],t.__keyup=[_f,n,r],yf(Ne(t),{get item(){return r()}}),ce(t),Xe((()=>Oi(t,`navbar-item ${(s()?`is-hidden-${s()}`:"")??""} `))),Vn(e,t)};Zn(o,(e=>{r().url?e(a):e(l,!1)}),!0),Vn(e,t)};Zn(d,(e=>{o().length?e(f):e(h,!1)})),Vn(e,c),mn()}function Lf(e,t,n){return e.preventDefault(),t(!t()),n("toggle",{closed:t()}),!1}Dn(["click","keyup"]);var Tf=Wn('<a href="" role="button" aria-label="menu" aria-expanded="false" data-target="navbar"><span aria-hidden="true"></span> <span aria-hidden="true"></span> <span aria-hidden="true"></span></a>');function xf(e,t){pn(t,!0);const n=ir();let i=er(t,"events",31,(()=>Oe({}))),r=er(t,"register",19,(()=>to.registerWidgetEvents.bind(to))),o=er(t,"closed",15,!0),s=er(t,"onUpdate",3,(e=>{o(e.closed)}));tr((()=>{to.objHas(i(),"top-navbar-burger:update")||i(i()["top-navbar-burger:update"]=s(),!0),r()(i())})),ff.subscribe((e=>(o(!e.open),e)));var a=Tf();a.__click=[Lf,o,n],Xe((()=>Oi(a,`navbar-burger ${(o()?"":"is-active")??""}`))),Vn(e,a),mn()}Dn(["click"]);var Nf,Ff=Wn('<div class="navbar-brand"><!> <!> <!> <!></div> <div id="navbar"><div class="navbar-start"></div> <div class="navbar-end"></div></div>',1);function Uf(e,t){pn(t,!0);const n=ir();let i=er(t,"sections",19,(()=>[])),r=er(t,"items",19,(()=>[])),o=er(t,"root",3,""),s=er(t,"navigate",3,null),a=er(t,"brand",3,!1),l=er(t,"showBurger",3,!0),u=er(t,"burgerControlsSidemenu",3,!0),c=H(!0);function d({detail:e}){let{event:t,element:n}=e;return Object.hasOwn(n,"action")?n.action(t,n):(t.preventDefault(),"function"==typeof s()&&s()({full:t.currentTarget.getAttribute("href"),short:t.currentTarget.dataset.href}),!1)}let f={},h={};function v({detail:e}){u()?gf.toggle():(n("toggleBurger",e),Q(c,Oe(e.closed)))}var g=Ff(),p=Fe(g),m=Ne(p),y=e=>{!function(e,t){let n=er(t,"url",3,"/"),i=er(t,"title",3,""),r=er(t,"icon",19,(()=>({src:"https://via.placeholder.com/56x28",width:28,height:56})));var o=pf(),s=Ne(o);ms(s,Xi(r));var a=Ue(s,2),l=e=>{var t=Bn();ui(Fe(t),(()=>`<span class="navbar-item-brand-title">${i()}</span>`)),Vn(e,t)};Zn(a,(e=>{i()&&e(l)})),ce(o),Xe((()=>pi(o,"href",n()))),Vn(e,o)}(e,Xi(a))};Zn(m,(e=>{a()&&e(y)}));var b=Ue(m,2);ii(b,17,i,(e=>e.id),((e,t)=>{var n=Bn(),i=Fe(n),r=e=>{If(e,{hidden:"desktop",get item(){return cn(t)},get root(){return o()},$$events:{click:d}})};Zn(i,(e=>{cn(t).showOnTouch&&e(r)})),Vn(e,n)}));var k=Ue(b,2);ii(k,17,r,(e=>e.id),((e,t)=>{var n=Bn(),i=Fe(n),r=e=>{If(e,{hidden:"desktop",get item(){return cn(t)},get root(){return o()},$$events:{click:d}})};Zn(i,(e=>{cn(t).showOnTouch&&e(r)})),Vn(e,n)}));var $=Ue(k,2),w=e=>{xf(e,{$$events:{toggle:v}})};Zn($,(e=>{l()&&e(w)})),ce(p);var O=Ue(p,2),I=Ne(O);ii(I,21,r,ni,((e,t)=>{var n=Bn(),i=Fe(n),r=e=>{If(e,{hidden:"touch",get item(){return cn(t)},$$events:{click:d}})};Zn(i,(e=>{"start"===cn(t).place&&e(r)})),Vn(e,n)})),ce(I);var _=Ue(I,2);ii(_,21,i,(e=>e.id),((e,t)=>{var n=Bn(),i=Fe(n),r=e=>{Ef(e,{right:!0,get hidden(){return cn(t).hidden},get root(){return o()},get section(){return cn(t)},get items(){return h[cn(t).id]},$$events:{click:d}})};Zn(i,(e=>{(f[cn(t).id]||cn(t).indicator||cn(t).tag)&&"end"==cn(t).place&&e(r)})),Vn(e,n)})),ce(_),ce(O),Xe((()=>Oi(O,`navbar-menu ${(cn(c)?"":"is-active")??""}`))),Vn(e,g),mn()}let Mf=function(e){function t(){return cr(this,t),lr(this,t,arguments)}return br(t,e),pr(t,null,[{key:"render",value:function(e){if(e&&this.setApp(e),this.prepareData(),!this.menu){let e=document.querySelector(this.getOptions().targetSelector);if(!e)return;this.menu=Kn(Uf,{target:e,props:{brand:this.getOptions().brand,items:this.items,sections:this.sections,root:this.getOptions().root,navigate:this.getOptions().navigate}}),this.interval=setInterval(this.updateMenuActiveItem.bind(this),200)}}},{key:"updateMenu",value:function(e){Array.from(document.querySelectorAll(this.getOptions().targetSelector+" aside.menu a")).forEach((function(t){t.href==e||e.href&&0==e.href.indexOf(t.href)?t.classList.add("is-active"):t.classList.remove("is-active")}))}},{key:"updateMenuActiveItem",value:function(){let e=window.location.toString(),t=this.location;t?e!==t&&(this.location=e,this.updateMenu(e)):(this.location=e,this.updateMenu(e))}},{key:"toggle",value:function(){document.querySelector(this.getOptions().targetSelector).classList.toggle("is-active")}},{key:"hide",value:function(){document.querySelector(this.getOptions().targetSelector).classList.remove("is-active")}},{key:"setBurgerState",value:function(e){this.menu.$set({menuClosed:e})}}])}(Hd);Nf=Mf,mr(Mf,"DEFAULT",{section:"any",sectionTitle:"Меню",priority:0,type:"link",place:"main"}),mr(Mf,"options",{brand:!1,type:"top",items:[],sections:[],targetSelector:"#top-menu",root:"/",directNavigation:!1,navigate:function(e){if(Nf.hide(),!Nf.isDirectNavigation()&&Nf.app){let t=Nf.app.getWorking("router");if(t)return t.navigate(e.short)}document.location.assign(e.full)}});const Df=function(e){return Object.hasOwn(e,"status")&&Object.hasOwn(e,"result")?e.result:e};const Pf=["create","update","list","delete","details"];let Rf=function(){return pr((function e(){cr(this,e)}),null,[{key:"preload",value:async function(e,t="list"){try{if(!Pf.includes(t))return;let n=e.getOptions(`${t}.preload`,{});if(0==Object.keys(n).length&&(n=e.getOptions("preload",{})),Object.keys(n).length>0){let i=Object.keys(n),r=[];i.forEach((function(t){let i=to.lowerFirstLetter(n[t]),o=e.make[i]({});r.push(o.$listAll())}));let o=await Promise.all(r);for(let n=0;n<i.length;n++){const r=i[n];if("ok"===o[n].status&&Array.isArray(o[n].result)){const i=o[n].result.map((function(e){return{id:e._id,title:e.title}}));e.setOptions(`variants.${t}.${r}`,i)}}}e.log("preload finished")}catch(t){e.report(t),e.showErrorMessage(t)}}}])}();let jf=function(){function e(){cr(this,e)}return pr(e,null,[{key:"extractActionName",value:function(e,t){let n="list";return 1===t.length?n="create"===t[0]?"create":e.actionHandlerExists(t[0])?t[0]:"details":t.length>1&&(n="delete"===t[1]?"delete":"update"===t[1]?"update":t[1]),n}},{key:"route",value:function(t,n){try{const i=e.extractActionName(t,n);return t.setCurrentAction(i),t.runAction(i,n)}catch(e){t.report(e),t.showErrorMessage(e)}}}])}(),Wf=function(){return pr((function e(){cr(this,e)}),null,[{key:"error",value:function(e,t,n){e.setUI("__message__",new Dl({target:e.getContainerInnerElement(),props:{title:t,message:n}}))}},{key:"success",value:function(e,t,n){e.setUI("__message__",new Rl({target:e.getContainerInnerElement(),props:{title:t,message:n}}))}}])}();const zf="Просмотр";let Bf=function(){return pr((function e(){cr(this,e)}),null,[{key:"NAVIGATION_DELAY",get:function(){return Vo}},{key:"deafultBreadcrumbsTail",get:function(){return zf}},{key:"breadcrumbsTails",get:function(){return{preset:zf,set:'Просмотр, "{:title}"'}}},{key:"getBreadcrumbsTail",value:function(e){return this.breadcrumbsTails?to.select(this.breadcrumbsTails,e,this.deafultBreadcrumbsTail):""}},{key:"ACTION",get:function(){return"details"}},{key:"MODEL_ACTION_GET",get:function(){return"get"}},{key:"MODEL_ACTION_PUT",get:function(){return"get"}},{key:"UIConstructor",get:function(){return wd}},{key:"TRANSFORMER",get:function(){return Df}},{key:"getIdField",value:function(e){return e.getOptions(`${this.ACTION}.idField`,"_id")}},{key:"loadDataQuery",value:function(e,t){const n=this.getIdField(e);return{[n]:t[0]}}},{key:"loadData",value:async function(e,t){const n=this.loadDataQuery(e,t),i=this.getModelActionName(e);return await e.getModel(n)[`$${i}`]()}},{key:"getModelActionName",value:function(e){return e.getOptions(`${this.ACTION}.actionName`,this.MODEL_ACTION_GET)}},{key:"presetBreadcrumbs",value:function(e,t){e.setBreadcrumbs([{title:this.getBreadcrumbsTail("preset"),url:e.getModelActionURL(t[0],!1)}])}},{key:"getTitle",value:function(e,t,n){return e.getItemTitle(n.result)}},{key:"setBreadcrumbs",value:function(e,t,n){const i=this.getTitle(e,t,n),r=this.getBreadcrumbsTail("set");e.setBreadcrumbs([{title:r?ro.format(r,{title:i}):i,url:e.getModelActionURL(t[0],!1)}])}},{key:"isResponseBad",value:function(e){return!e||"ok"!==e.status}},{key:"getValidators",value:function(e){return e.getValidators&&e.getValidators()||e.getOptions("Validators")}},{key:"prepareUIOptions",value:function(e,t){const n=this.getModelActionName(e);return{options:{target:e.getContainerInnerElement(),model:e.getModelName(),action:n,name:`${e.getName()}.${this.ACTION}Form`,fields:{readonly:!0},validators:this.getValidators(e),variants:e.getOptions(`variants.${this.ACTION}`,{}),masters:e.getOptions(`${this.ACTION}.masters`,{}),injected:e.getOptions(`${this.ACTION}.injected`,{})},data:this.TRANSFORMER(t.result)}}},{key:"getUI",value:function(e){return e.getUI(this.ACTION)}},{key:"setUI",value:function(e,t){e.setUI(this.ACTION,t)}},{key:"setUILoading",value:function(e){this.getUI(e).$set({loading:!0})}},{key:"setUILoaded",value:function(e){this.getUI(e).$set({loading:!1})}},{key:"setUIError",value:function(e,t){this.getUI(e).$set({error:t})}},{key:"bindUIEvents",value:function(e,t,n){to.isFunc(e.goBack)&&this.bindUIEvent(e,"reject",(function(){return e.goBack()}))}},{key:"bindUIEvent",value:function(e,t,n){const i=this.getUI(e);return i.$on?i.$on(t,n):i.on?i.on(t,n):void 0}},{key:"isUIRendered",value:function(e){return!!this.getUI(e)||(e.$destroyUI(),!1)}},{key:"tweakUIOptions",value:function(e){return e}},{key:"createUI",value:function(e,t,n){return to.isFunc(e)?Kn(e,this.tweakUIOptions(this.prepareUIOptions(t,n))):new e(this.tweakUIOptions(this.prepareUIOptions(t,n)))}},{key:"run",value:async function(e,t){try{if(e.emit(`before:render:${this.ACTION}`,t),this.isUIRendered(e))return;e.renderLoadingScreen&&e.renderLoadingScreen(),await e.preloadVariants(this.ACTION),this.presetBreadcrumbs(e,t);const n=await this.loadData(e,t);if(this.isResponseBad(n))return e.showErrorMessage(n);this.setBreadcrumbs(e,t,n);this.UIConstructor,this.createUI();this.setUI(e),this.bindUIEvents(e,t,n),e.emit(`after:render:${this.ACTION}`,t,n)}catch(n){e.emit(`exception:render:${this.ACTION}`,t,n),e.report(n),e.showErrorMessage(n)}finally{e.removeLoadingScreen&&e.removeLoadingScreen()}}},{key:"goBackAfterDelay",value:function(e){e.goBack(this.NAVIGATION_DELAY)}},{key:"goBack",value:function(e){e.goBack(0)}}])}();const Vf="create";let qf=function(e){function t(){return cr(this,t),lr(this,t,arguments)}return br(t,e),pr(t,null,[{key:"deafultBreadcrumbsTail",get:function(){return"Создание"}},{key:"breadcrumbsTails",get:function(){}},{key:"ACTION",get:function(){return Vf}},{key:"MODEL_ACTION_GET",get:function(){return Vf}},{key:"MODEL_ACTION_PUT",get:function(){return Vf}},{key:"loadData",value:function(e,t={}){let n=e.createDefault();return n.getData&&(n=n.getData()),{status:"ok",result:n}}},{key:"getTitle",value:function(e,t,n){return e.getItemTitle(n)}},{key:"prepareUIOptions",value:function(e,t){const n=this.getModelActionName(e);return{options:{target:e.getContainerInnerElement(),model:e.getModelName(),action:n,name:`${e.getName()}.${this.ACTION}Form`,validators:this.getValidators(e),variants:e.getOptions(`variants.${this.ACTION}`,{}),masters:e.getOptions(`${this.ACTION}.masters`,{})},data:this.TRANSFORMER(t)}}},{key:"bindUIEvents",value:function(e,t,n){var i=this;to.isFunc(e.goBack)&&this.bindUIEvent(e,"reject",(function(){return i.goBack(e)})),to.isFunc(e.onActionSubmit)&&this.bindUIEvent(e,"submit",(async function(n){await e.onActionSubmit(i.ACTION,{...i.loadDataQuery(e,t),...n.detail})&&i.goBackAfterDelay(e)}))}}])}(Bf),Hf=function(e){function t(){return cr(this,t),lr(this,t,arguments)}return br(t,e),pr(t)}(qf),Gf=function(e){function t(){return cr(this,t),lr(this,t,arguments)}return br(t,e),pr(t,null,[{key:"tweakUIOptions",value:function(e){return e.options.ui={submit:{enabled:!1}},e}},{key:"run",value:async function(e,t){try{if(e.emit(`before:render:${this.ACTION}`,t),this.isUIRendered(e))return;e.renderLoadingScreen&&e.renderLoadingScreen(),await e.preloadVariants(this.ACTION),this.presetBreadcrumbs(e,t);const n=await this.loadData(e,t);if(this.isResponseBad(n))return e.showErrorMessage(n);this.setBreadcrumbs(e,t,n);const i=this.UIConstructor;this.setUI(e,new i(this.tweakUIOptions(this.prepareUIOptions(e,n)))),this.bindUIEvents(e,t,n),e.emit(`after:render:${this.ACTION}`,t,n)}catch(n){e.emit(`exception:render:${this.ACTION}`,t,n),e.report(n),e.showErrorMessage(n)}finally{e.removeLoadingScreen&&e.removeLoadingScreen()}}}])}(Bf),Kf=function(e){function t(){return cr(this,t),lr(this,t,arguments)}return br(t,e),pr(t)}(Gf);const Jf="Редактирование";let Yf=function(e){function t(){return cr(this,t),lr(this,t,arguments)}return br(t,e),pr(t,null,[{key:"deafultBreadcrumbsTail",get:function(){return Jf}},{key:"breadcrumbsTails",get:function(){return{preset:Jf,set:`${Jf}: "{:title}"`}}},{key:"ACTION",get:function(){return"update"}},{key:"MODEL_ACTION_GET",get:function(){return"getRaw"}},{key:"MODEL_ACTION_PUT",get:function(){return"update"}},{key:"prepareUIOptions",value:function(e,t){return{options:{target:e.getContainerInnerElement(),model:e.getModelName(),action:this.MODEL_ACTION_PUT,name:`${e.getName()}.${this.ACTION}Form`,validators:this.getValidators(e),variants:e.getOptions(`variants.${this.ACTION}`,{}),ui:e.getOptions(`${this.ACTION}.ui`,{}),fields:e.getOptions(`${this.ACTION}.fields`,{}),masters:e.getOptions(`${this.ACTION}.masters`,{})},data:this.TRANSFORMER(to.stripProxy(t.result))}}},{key:"bindUIEvents",value:function(e,t,n){var i=this;to.isFunc(e.goBack)&&this.bindUIEvent(e,"reject",(function(){return i.goBack(e)})),to.isFunc(e.onActionSubmit)&&this.bindUIEvent(e,"submit",(async function(n){await e.onActionSubmit(i.ACTION,{...i.loadDataQuery(e,t),...n.detail})&&i.goBackAfterDelay(e)}))}},{key:"isUIRendered",value:function(e){return!!this.getUI(e)||(e.$destroyUI(),!1)}},{key:"run",value:async function(e,t){try{if(e.emit(`before:render:${this.ACTION}`,[t]),this.isUIRendered(e))return;e.renderLoadingScreen&&e.renderLoadingScreen(),await e.preloadVariants(this.ACTION),this.presetBreadcrumbs(e,t);const n=await this.loadData(e,t);if(this.isResponseBad(n))return e.showErrorMessage(n);this.setBreadcrumbs(e,t,n);const i=this.UIConstructor;this.setUI(e,new i(this.tweakUIOptions(this.prepareUIOptions(e,n)))),this.bindUIEvents(e,t,n),e.emit(`after:render:${this.ACTION}`,t)}catch(n){e.emit(`exception:render:${this.ACTION}`,t,n),e.report(n),e.showErrorMessage(n)}finally{e.removeLoadingScreen&&e.removeLoadingScreen()}}}])}(Bf),Qf=function(e){function t(){return cr(this,t),lr(this,t,arguments)}return br(t,e),pr(t)}(Yf);const Xf="delete";let Zf=function(){return pr((function e(){cr(this,e)}),null,[{key:"run",value:async function(e,t){try{if(e.ui[Xf])return;if(e.$destroyUI(),e.ui[Xf]=new sc({name:"CRUDDelete",target:e.getContainerInnerElement(),options:{loaderActive:!0,loaderStyle:"container",loaderTitle:"not-node:crud_delete_action_waiting",container:{id:`crud-delete-action-${t[0]}`}}}),e.setBreadcrumbs([{title:"Удаление",url:e.getModelActionURL(t[0],Xf)}]),confirm("Удалить запись?")){const n=e.getOptions(`${Xf}.actionName`,"delete");return void(await e.onActionSubmit(n,{_id:t[0]})&&e.goList())}e.goList()}catch(t){e.report(t),e.showErrorMessage(t)}}}])}();const eh="list";let th=function(){function e(){cr(this,e)}return pr(e,null,[{key:"tweakActionsList",value:function(e,t){return e.getOptions(`${eh}.createAction`,!0)&&t.push({title:"Создать",action:function(){return e.goCreate()}}),t}},{key:"tweakUIOptions",value:function(e){return e}},{key:"createActionsButtons",value:function(e,t,n=0,i=["details","update","delete"],r=[],o=[],s=!0){const a={details:{action:function(){return e.goDetails(t,n)},...s?{icon:"circle-info"}:{title:"Подробнее"},size:"small"},update:{action:function(){return e.goUpdate(t,n)},...s?{icon:"edit"}:{title:"Изменить"},color:"warning",size:"small"},delete:{action:function(){return e.goDelete(t,n)},color:"danger",...s?{icon:"trash"}:{title:"Удалить"},size:"small",style:"outlined"}},l=[...r];return Array.isArray(i)&&i.forEach((function(e){return l.push(a[e])})),l.push(...o),l}},{key:"run",value:async function(t,n){try{if(t.renderLoadingScreen&&t.renderLoadingScreen(),await t.preloadVariants(eh),t.setBreadcrumbs([{title:"Список",url:t.getModelURL()}]),t.ui[eh])return;t.$destroyUI(),t.ui[eh]=new ec(this.tweakUIOptions(e.prepareOptions(t))),t.emit(`after:render:${eh}`,n,t.ui[eh])}catch(e){t.emit(`exception:render:${eh}`,n,e),t.report(e),t.showErrorMessage(e)}finally{t.removeLoadingScreen&&t.removeLoadingScreen()}}},{key:"prepareOptions",value:function(e){const t={interface:e.getOptions(`${eh}.interface`,{combined:!0,factory:e.getInterface()}),fields:void 0,showSelect:void 0,getItemId:void 0,idField:void 0,preload:{},filterUI:e.getOptions(`${eh}.filterUI`),pager:{size:50,page:0},sorter:{id:-1},filter:void 0,ui:void 0};let n=[...e.getOptions(`${eh}.actions`,[])];n=this.tweakActionsList(e,n);const i={options:{targetEl:e.getContainerInnerElement(),endless:!1,actions:n}};return Object.keys(t).forEach((function(n){let r=e.getOptions(`${eh}.${n}`,t[n]);void 0!==r&&(i.options[n]=r)})),i}}])}();var nh={create:Hf,details:Kf,update:Qf,delete:Zf,list:th};const ih=[],rh=["title","label","id","name"],oh="loading_screen";var sh=new WeakMap,ah=new WeakMap,lh=new WeakMap;let uh=function(e){function t(e,n,{actions:i,router:r,preloader:o}={actions:void 0,router:void 0,preloader:void 0}){var s;return cr(this,t),fr(s=lr(this,t,[e,`CRUD.${n}`]),sh,{...nh}),fr(s,ah,jf),fr(s,lh,Rf),mr(s,"TITLE_FIELDS_PRIORITY",rh),mr(s,"TOP_CLASS",["box"]),mr(s,"MAIN_CLASS",["box"]),mr(s,"BOTTOM_CLASS",["box"]),mr(s,"WS_CHECK_INTERVAL",200),i&&hr(sh,s,{...dr(sh,s),...i}),r&&hr(ah,s,r),o&&hr(lh,s,o),s.ui={},s.els={},s.setOptions("names",{module:"",plural:"plural",single:"single"}),s.setOptions("containerSelector",s.app?.getOptions("crud.containerSelector")),s.buildFrame(),$r(s,s)}return br(t,e),pr(t,[{key:"setValidators",value:function(e){const t=this.getModuleName().split("-"),n=`ns${("not"===t[0]?t.splice(1):t).map(to.capitalizeFirstLetter).join("")}Common`,i=this.app?.getService(n);this.setWorking("validators",i.augmentValidators(e))}},{key:"getValidators",value:function(){return this.getWorking("validators")}},{key:"start",value:function(){var e=this;let t=[];this.getModuleName()&&this.getOptions("names.module")&&t.push({title:this.getOptions("names.module"),url:!1}),t.push({title:this.getOptions("names.plural"),url:this.getModelURL()}),ih.splice(0,ih.length,...t),Vd.setHead(ih).render({root:"",target:this.els.top,navigate:function(t){return e.app?.getWorking("router").navigate(t)}}),this.route(this.getOptions("params"))}},{key:"startWhenWSClientReady",value:function(){var e=this;this.app?.getWSClient()?this.app?.getWSClient().isConnected()?this.start():this.app.getWSClient().once("connected",this.startWhenWSClientReady.bind(this)):setTimeout((function(){return e.startWhenWSClientReady()}),this.WS_CHECK_INTERVAL)}},{key:"setBreadcrumbs",value:function(e){Vd.setTail(e).update()}},{key:"backToList",value:function(){this.navigate(this.linkBackToList())}},{key:"linkBackToList",value:function(){return this.getModelURL()}},{key:"afterAction",value:function(e="list"){let t=this.app?.getOptions("crud.navigateBackAfter",[]);t&&Array.isArray(t)&&t.indexOf(e)>-1?window.history.back():this.backToList()}},{key:"buildFrame",value:function(){var e=this;let t=document.querySelector(this.app?.getOptions("crud.containerSelector","body"));for(;t.firstChild;)t.removeChild(t.firstChild);this.els.top=document.createElement("div"),this.els.top.id="crud-top",this.getFrameClasses().TOP_CLASS.forEach((function(t){return e.els.top.classList.add(t)})),t.appendChild(this.els.top),this.els.main=document.createElement("div"),this.els.main.id="crud-main",this.getFrameClasses().MAIN_CLASS.forEach((function(t){return e.els.main.classList.add(t)})),t.appendChild(this.els.main),this.els.bottom=document.createElement("div"),this.els.bottom.id="crud-bottom",this.getFrameClasses().BOTTOM_CLASS.forEach((function(t){return e.els.bottom.classList.add(t)})),t.appendChild(this.els.bottom)}},{key:"getFrameClasses",value:function(){return{TOP_CLASS:this.TOP_CLASS,MAIN_CLASS:this.MAIN_CLASS,BOTTOM_CLASS:this.BOTTOM_CLASS}}},{key:"getContainerTopElement",value:function(){return this.els.top}},{key:"getContainerInnerElement",value:function(){return this.els.main}},{key:"getContainerBottomElement",value:function(){return this.els.bottom}},{key:"preloadVariants",value:async function(e="list"){await dr(lh,this).preload(this,e)}},{key:"getTitleFromLib",value:function(e,t){const n=this.getCurrentAction();return this.debug&&this.debug("notCRUD.getTitleFromLib is obsolete, use notCRUD.getPreloadedVariantTitle(actionName, propName, id)"),this.getPreloadedVariantTitle(n,e,t)}},{key:"getPreloadedVariants",value:function(e,t){return this.getOptions(`variants.${e}.${t}`,[])}},{key:"getPreloadedVariantTitle",value:function(e,t,n){const i=this.getPreloadedVariants(e,t).find((function(e){return e.id===n}));return i?i.title:n}},{key:"getItemTitle",value:function(e){const t=this.TITLE_FIELDS_PRIORITY.find((function(t){return to.objHas(e,t)}));return t?e[t]:""}},{key:"createDefault",value:function(){return this.getModel({}).toDefault()}},{key:"route",value:function(e=[]){try{return dr(ah,this).route(this,e)}catch(e){this.report(e),this.showErrorMessage(e)}}},{key:"actionHandlerExists",value:function(e){return!!Object.keys(dr(sh,this)).includes(e)||"function"==typeof this["run"+to.capitalizeFirstLetter(e)]}},{key:"runAction",value:function(e,t){if(Object.keys(dr(sh,this)).includes(e))return dr(sh,this)[e].run(this,t);if("function"==typeof this["run"+to.capitalizeFirstLetter(e)])return this["run"+to.capitalizeFirstLetter(e)](t);throw new Error(`No such action: ${e} in contoller ${this.getWorking("name")}`)}},{key:"goCreate",value:function(e=0){this.goAfterDelay(this.getModelActionURL("","create"),e)}},{key:"goDetails",value:function(e,t=0){this.goAfterDelay(this.getModelActionURL(e,""),t)}},{key:"goUpdate",value:function(e,t=0){this.goAfterDelay(this.getModelActionURL(e,"update"),t)}},{key:"goDelete",value:function(e,t=0){this.goAfterDelay(this.getModelActionURL(e,"delete"),t)}},{key:"goList",value:function(e=0){this.goAfterDelay(this.getModelURL(),e)}},{key:"goAfterDelay",value:function(e,t=0){var n=this;this.navigateWithDelay(e,t,(function(){return n.$destroyUI()}))}},{key:"goBack",value:function(e=0){this.goList(e)}},{key:"onActionSubmit",value:async function(e,t){let n=!0;const i=this.ui[e];if(!i)throw new Error("Action UI doesnt exist");try{i.setLoading();let r=await this.getModel(t)[`$${e}`]();n=i.processResult(r)}catch(e){n=i.processResult(e)}finally{return i.resetLoading(),n}}},{key:"$destroyUI",value:function(){for(let e in this.ui)this.destroyUIByName(e)}},{key:"destroyUIByName",value:function(e){Object.hasOwn(this.ui,e)&&(this.ui[e].$destroy&&this.ui[e].$destroy(),this.ui[e].destroy&&this.ui[e].destroy(),delete this.ui[e])}},{key:"showErrorMessage",value:function(e){this.error&&this.error(e),this.app&&this.app.emit("error",{title:"Произошла ошибка",message:e.message?e.message:_r.ERROR_DEFAULT}),Wf.error(this,"Произошла ошибка",e.message?e.message:_r.ERROR_DEFAULT)}},{key:"showSuccessMessage",value:function(e,t){this.app&&this.app.emit("success",{title:e,message:t}),Wf.success(this,e,t)}},{key:"setUI",value:function(e,t,n=!0){n&&this.$destroyUI(),this.ui[e]=t}},{key:"getUI",value:function(e){return this.ui[e]}},{key:"getActionUI",value:function(){return this.ui[this.getCurrentAction()]}},{key:"renderLoadingScreen",value:function(){this.setUI(oh,this.createLoaderUI())}},{key:"removeLoadingScreen",value:function(){this.destroyUIByName(oh)}},{key:"createLoaderUI",value:function(){return Kn(ko,{target:this.getContainerInnerElement(),props:{loading:!0,title:""}})}}],[{key:"LABELS",get:function(){return Object.freeze({plural:`${this.MODULE_NAME}:${this.MODEL_NAME}_label_plural`,single:`${this.MODULE_NAME}:${this.MODEL_NAME}_label_single`})}},{key:"getMenu",value:function(e={}){return[{section:this.MODULE_NAME,title:this.LABELS.plural,url:`/${to.lowerFirstLetter(this.MODULE_NAME)}/${to.lowerFirstLetter(this.MODEL_NAME)}`,...e}]}}])}(pu);mr(uh,"ERROR_DEFAULT",_r.ERROR_DEFAULT);let ch=function(){return pr((function e(){cr(this,e)}),null,[{key:"extractActionName",value:function(e){return e.length>0?e[0]:this.DEFAULT_ROUTE}},{key:"route",value:function(e,t){try{const n=this.extractActionName(t);return e.setCurrentAction(n),e.runAction(n,t)}catch(t){e.report(t),e.showErrorMessage(t)}}}])}();mr(ch,"DEFAULT_ROUTE","list");let dh=function(){return pr((function e(){cr(this,e)}),null,[{key:"routesVariants",get:function(){return{}}},{key:"isRouteVariantValid",value:function(e){return""!==e&&to.objHas(this.routesVariants,e)}},{key:"determineRoute",value:async function(e,t=[]){return""}},{key:"route",value:async function(e,t){try{const n=await this.determineRoute(e,t);if(!this.isRouteVariantValid(n))throw new Error(`No such action: ${n} in contoller ${e.getWorking("name")}`);{e.setCurrentAction(n);const i=this.routesVariants[n];to.isAsync(i.run)?await i.run(e,t):i.run(e,t)}}catch(t){e.report(t),e.showErrorMessage(t)}}}])}();let fh=function(){return pr((function e(t,n){cr(this,e),this.modelName=n,this.app=t}),[{key:"destroy",value:function(){delete this.app}},{key:"getSearchRouteName",value:function(){return"listAndCount"}},{key:"getDataLoadRouteName",value:function(){return"get"}},{key:"transformSearchResult",value:function(e){var t=this;return e.list=e.list.map((function(e){return{_id:e._id,id:e[`${t.modelName}ID`],title:e.name||e.title||e.label||e.username}})),e}},{key:"transformSelectedResult",value:function(e){return{_id:e._id,[`${this.modelName}ID`]:e.id,title:e.title}}},{key:"searchByTerm",value:async function(e){try{if(e.value.length>2){const t=this.app.getModel(this.modelName);t.setSearch(e.value);const n=await t[`$${this.getSearchRouteName()}`]();return"ok"===n.status?this.transformSearchResult(n.result):{list:[],count:0,page:0,pages:0,skip:0}}return{list:[],count:0,page:0,pages:0,skip:0}}catch{return{list:[],count:0,page:0,pages:0,skip:0}}}},{key:"openSelector",value:function(){var e=this;return new Promise((function(t,n){try{const i=Kn(Fl,{target:document.body,props:{}});i.$on("termChange",(async function({detail:t}){const n=await e.searchByTerm(t);i.$set({results:n})})),i.$on("next",(function(){console.log("next selector results")})),i.$on("prev",(function(){console.log("prev selector results")})),i.$on("reject",(function(){Xn(i),n()})),i.$on("resolve",(function({detail:n}){Xn(i),t(e.transformSelectedResult(n))}))}catch(t){e.app.error(t),n(t)}}))}},{key:"loadData",value:async function(e){try{if(e&&e.length>10){const t=this.app.getModel(this.modelName,{_id:e}),n=await t[`$${this.getDataLoadRouteName()}`]();return"ok"===n.status?n.result:null}return null}catch(e){return this.app.error(e),null}}}])}();const hh=uh;var vh=Object.freeze({__proto__:null,COMPONENTS:aa,FIELDS:la,UIForm:dd,VARIANTS:ua,createCRUDActionUIView:function({ACTION:e,TITLE:t,UIConstructor:n,dataProvider:i,goBack:r}){return function(){return pr((function e(){cr(this,e)}),null,[{key:"run",value:async function(o,s){try{if(o.setBreadcrumbs([{title:`Просмотр "${t}"`}]),await o.preloadVariants(e),o.ui[e])return;o.$destroyUI();let a={};i&&(a=to.isFunc(i)?to.isAsync(i)?await i(s):i(s):{...i});const l=o.getOptions(`${e}.transformer`,Df);o.ui[e]=new n({target:o.getContainerInnerElement(),props:{params:s,...l(a)}}),o.emit(`after:render:${e}`),r&&to.isFunc(r)&&o.ui[e].on("reject",(function(){return r()}))}catch(e){o.report(e),o.showErrorMessage(e)}}}])}()},ncCRUD:hh,notAPI:tu,notApp:hu,notBase:Kl,notBreadcrumbs:Vd,notCRUD:uh,notCRUDRouter:jf,notCRUDRouterPlain:ch,notCRUDRouterSwitch:dh,notCommon:to,notController:pu,notForm:wd,notFormHelpers:Nc,notFormRules:hd,notFormSet:Dd,notFormUtils:ac,notInterface:cu,notPath:Jr,notRecord:du,notRouter:Xl,notServiceModelSearch:fh,notSideMenu:gf,notStores:ru,notTable:ec,notTopMenu:Mf});const gh={LOCALE:Mr,say:oo,notLocale:ro},ph=_r,{notCommon:mh,COMPONENTS:yh,FIELDS:bh,VARIANTS:kh,notFormUtils:$h}=vh;return Object.keys(Bl).forEach((function(e){Object.keys(Bl[e]).forEach((function(t){ac.addComponent(t,Bl[e][t])}))})),e.COMPONENTS=yh,e.Elements=Bl,e.FIELDS=bh,e.Frame=vh,e.LOCALE=Mr,e.Locale=gh,e.UICommon=ph,e.VARIANTS=kh,e.notCommon=mh,e.notFormUtils=$h,e.notLocale=ro,e.say=oo,e.svelte=sr,e}({});
