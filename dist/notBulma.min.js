var notBulma=function(t){"use strict";"undefined"!=typeof window&&(window.__svelte||={v:new Set}).v.add("5");const e=Symbol();var i=Array.isArray,r=Array.from,n=Object.defineProperty,s=Object.getOwnPropertyDescriptor,o=Object.getOwnPropertyDescriptors,a=Object.prototype,l=Array.prototype,c=Object.getPrototypeOf;function u(t){return"function"==typeof t}const d=()=>{};function h(t){return t()}function g(t){for(var e=0;e<t.length;e++)t[e]()}const f=32,p=128,v=256,m=512,b=1024,y=2048,O=4096,$=8192,w=32768,k=1<<19,_=Symbol("$state"),I=Symbol("legacy props"),A=Symbol("");function S(t){return t===this.v}function C(t,e){return t!=t?e==e:t!==e||null!==t&&"object"==typeof t||"function"==typeof t}function L(t){return!C(t,this.v)}let E=!1;function T(t){return{f:0,v:t,reactions:null,equals:S,version:0}}function x(t){return M(T(t))}function N(t,e=!1){const i=T(t);return e||(i.equals=L),E&&null!==Mt&&null!==Mt.l&&(Mt.l.s??=[]).push(i),i}function F(t,e=!1){return M(N(t,e))}function M(t){return null!==It&&2&It.f&&(null===Lt?Lt=[t]:Lt.push(t)),t}function R(t,e){return D(t,Jt((()=>Gt(t)))),e}function D(t,e){return null!==It&&Dt()&&18&It.f&&(null===Lt||!Lt.includes(t))&&function(){throw new Error("state_unsafe_mutation")}(),U(t,e)}function U(t,e){return t.equals(e)||(t.v=e,t.version=Rt(),P(t,b),Dt()&&null!==St&&St.f&m&&!(St.f&f)&&(null!==Et&&Et.includes(t)?(Qt(St,b),Ht(St)):null===xt?function(t){xt=t}([t]):xt.push(t))),e}function P(t,e){var i=t.reactions;if(null!==i)for(var r=Dt(),n=i.length,s=0;s<n;s++){var o=i[s],a=o.f;a&b||(r||o!==St)&&(Qt(o,e),640&a&&(2&a?P(o,y):Ht(o)))}}function j(t){var e=1026;null===St?e|=p:St.f|=k;const i={children:null,ctx:Mt,deps:null,equals:S,f:e,fn:t,reactions:null,v:null,version:0,parent:St};if(null!==It&&2&It.f){var r=It;(r.children??=[]).push(i)}return i}function W(t){const e=j(t);return e.equals=L,e}function B(t){var e=t.children;if(null!==e){t.children=null;for(var i=0;i<e.length;i+=1){var r=e[i];2&r.f?q(r):ot(r)}}}function z(t){var e,i=St;Ct(t.parent);try{B(t),e=Pt(t)}finally{Ct(i)}return e}function V(t){var e=z(t);Qt(t,(Ft||t.f&p)&&null!==t.deps?y:m),t.equals(e)||(t.v=e,t.version=Rt())}function q(t){B(t),Wt(t,0),Qt(t,$),t.v=t.children=t.deps=t.ctx=t.reactions=null}function H(t){null===St&&null===It&&function(){throw new Error("effect_orphan")}(),null!==It&&It.f&p&&function(){throw new Error("effect_in_unowned_derived")}(),Ot&&function(){throw new Error("effect_in_teardown")}()}function K(t,e,i,r=!0){var n=!!(64&t),s=St,o={ctx:Mt,deps:null,deriveds:null,nodes_start:null,nodes_end:null,f:t|b,first:null,fn:e,last:null,next:null,parent:n?null:s,prev:null,teardown:null,transitions:null,version:0};if(i){var a=yt;try{$t(!0),Bt(o),o.f|=16384}catch(t){throw ot(o),t}finally{$t(a)}}else null!==e&&Ht(o);if(!(i&&null===o.deps&&null===o.first&&null===o.nodes_start&&null===o.teardown&&!(o.f&k))&&!n&&r&&(null!==s&&function(t,e){var i=e.last;null===i?e.last=e.first=t:(i.next=t,t.prev=i,e.last=t)}(o,s),null!==It&&2&It.f)){var l=It;(l.children??=[]).push(o)}return o}function G(t){const e=K(8,null,!1);return Qt(e,m),e.teardown=t,e}function J(t){if(H(),!(null!==St&&!!(St.f&f)&&null!==Mt&&!Mt.m))return Q(t);var e=Mt;(e.e??=[]).push({fn:t,effect:St,reaction:It})}function Y(t){return H(),Z(t)}function Q(t){return K(4,t,!1)}function X(t,e){var i=Mt,r={effect:null,ran:!1};i.l.r1.push(r),r.effect=Z((()=>{t(),r.ran||(r.ran=!0,D(i.l.r2,!0),Jt(e))}))}function Z(t){return K(8,t,!0)}function tt(t){return et(t)}function et(t,e=0){return K(24|e,t,!0)}function it(t,e=!0){return K(40,t,!0,e)}function rt(t){var e=t.teardown;if(null!==e){const t=Ot,i=It;wt(!0),At(null);try{e.call(null)}finally{wt(t),At(i)}}}function nt(t){var e=t.deriveds;if(null!==e){t.deriveds=null;for(var i=0;i<e.length;i+=1)q(e[i])}}function st(t,e=!1){var i=t.first;for(t.first=t.last=null;null!==i;){var r=i.next;ot(i,e),i=r}}function ot(t,e=!0){var i=!1;if((e||262144&t.f)&&null!==t.nodes_start){for(var r=t.nodes_start,n=t.nodes_end;null!==r;){var s=r===n?null:ue(r);r.remove(),r=s}i=!0}st(t,e&&!i),nt(t),Wt(t,0),Qt(t,$);var o=t.transitions;if(null!==o)for(const t of o)t.stop();rt(t);var a=t.parent;null!==a&&null!==a.first&&at(t),t.next=t.prev=t.teardown=t.ctx=t.deps=t.parent=t.fn=t.nodes_start=t.nodes_end=null}function at(t){var e=t.parent,i=t.prev,r=t.next;null!==i&&(i.next=r),null!==r&&(r.prev=i),null!==e&&(e.first===t&&(e.first=r),e.last===t&&(e.last=i))}function lt(t,e){var i=[];ut(t,i,!0),ct(i,(()=>{ot(t),e&&e()}))}function ct(t,e){var i=t.length;if(i>0){var r=()=>--i||e();for(var n of t)n.out(r)}else e()}function ut(t,e,i){if(!(t.f&O)){if(t.f^=O,null!==t.transitions)for(const r of t.transitions)(r.is_global||i)&&e.push(r);for(var r=t.first;null!==r;){var n=r.next;ut(r,e,!!(!!(r.f&w)||!!(r.f&f))&&i),r=n}}}function dt(t){ht(t,!0)}function ht(t,e){if(t.f&O){Ut(t)&&Bt(t),t.f^=O;for(var i=t.first;null!==i;){var r=i.next;ht(i,!!(!!(i.f&w)||!!(i.f&f))&&e),i=r}if(null!==t.transitions)for(const i of t.transitions)(i.is_global||e)&&i.in()}}let gt=!1,ft=[];function pt(){gt=!1;const t=ft.slice();ft=[],g(t)}function vt(t){gt||(gt=!0,queueMicrotask(pt)),ft.push(t)}function mt(t){throw new Error("lifecycle_outside_component")}let bt=!1,yt=!1,Ot=!1;function $t(t){yt=t}function wt(t){Ot=t}let kt=[],_t=0,It=null;function At(t){It=t}let St=null;function Ct(t){St=t}let Lt=null;let Et=null,Tt=0,xt=null;let Nt=0,Ft=!1,Mt=null;function Rt(){return++Nt}function Dt(){return!E||null!==Mt&&null===Mt.l}function Ut(t){var e=t.f;if(e&b)return!0;if(e&y){var i=t.deps,r=!!(e&p);if(null!==i){var n;if(e&v){for(n=0;n<i.length;n++)(i[n].reactions??=[]).push(t);t.f^=v}for(n=0;n<i.length;n++){var s=i[n];if(Ut(s)&&V(s),!r||null===St||Ft||s?.reactions?.includes(t)||(s.reactions??=[]).push(t),s.version>t.version)return!0}}r||Qt(t,m)}return!1}function Pt(t){var e=Et,i=Tt,r=xt,n=It,s=Ft,o=Lt,a=Mt,l=t.f;Et=null,Tt=0,xt=null,It=96&l?null:t,Ft=!yt&&!!(l&p),Lt=null,Mt=t.ctx;try{var c=(0,t.fn)(),u=t.deps;if(null!==Et){var d;if(Wt(t,Tt),null!==u&&Tt>0)for(u.length=Tt+Et.length,d=0;d<Et.length;d++)u[Tt+d]=Et[d];else t.deps=u=Et;if(!Ft)for(d=Tt;d<u.length;d++)(u[d].reactions??=[]).push(t)}else null!==u&&Tt<u.length&&(Wt(t,Tt),u.length=Tt);return c}finally{Et=e,Tt=i,xt=r,It=n,Ft=s,Lt=o,Mt=a}}function jt(t,e){let i=e.reactions;if(null!==i){var r=i.indexOf(t);if(-1!==r){var n=i.length-1;0===n?i=e.reactions=null:(i[r]=i[n],i.pop())}}null===i&&2&e.f&&(null===Et||!Et.includes(e))&&(Qt(e,y),384&e.f||(e.f^=v),Wt(e,0))}function Wt(t,e){var i=t.deps;if(null!==i)for(var r=e;r<i.length;r++)jt(t,i[r])}function Bt(t){var e=t.f;if(!(e&$)){Qt(t,m);var i=St;St=t;try{16&e?function(t){for(var e=t.first;null!==e;){var i=e.next;e.f&f||ot(e),e=i}}(t):st(t),nt(t),rt(t);var r=Pt(t);t.teardown="function"==typeof r?r:null,t.version=Nt}catch(t){!function(t){throw t}(t)}finally{St=i}}}function zt(){_t>1e3&&(_t=0,function(){throw new Error("effect_update_depth_exceeded")}()),_t++}function Vt(t){var e=t.length;if(0!==e)for(var i=0;i<e;i++){var r=t[i];12288&r.f||!Ut(r)||(Bt(r),null===r.deps&&null===r.first&&null===r.nodes_start&&(null===r.teardown?at(r):r.fn=null))}}function qt(){if(bt=!1,_t>1001)return;const t=kt;kt=[],function(t){var e=t.length;if(0!==e){zt();var i=yt;yt=!0;try{for(var r=0;r<e;r++){var n=t[r];n.f&m||(n.f^=m);var s=[];Kt(n,s),Vt(s)}}finally{yt=i}}}(t),bt||(_t=0)}function Ht(t){bt||(bt=!0,queueMicrotask(qt));for(var e=t;null!==e.parent;){var i=(e=e.parent).f;if(96&i){if(!(i&m))return;e.f^=m}}kt.push(e)}function Kt(t,e){var i=t.first,r=[];t:for(;null!==i;){var n=i.f,s=!!(n&f);if(!(s&&!!(n&m)||n&O))if(8&n){s?i.f^=m:Ut(i)&&Bt(i);var o=i.first;if(null!==o){i=o;continue}}else 4&n&&r.push(i);var a=i.next;if(null===a){let e=i.parent;for(;null!==e;){if(t===e)break t;var l=e.next;if(null!==l){i=l;continue t}e=e.parent}}i=a}for(var c=0;c<r.length;c++)o=r[c],e.push(o),Kt(o,e)}function Gt(t){var e=t.f,i=!!(2&e);if(i&&e&$){var r=z(t);return q(t),r}if(null!==It){null!==Lt&&Lt.includes(t)&&function(){throw new Error("state_unsafe_local_read")}();var n=It.deps;null===Et&&null!==n&&n[Tt]===t?Tt++:null===Et?Et=[t]:Et.push(t),null!==xt&&null!==St&&St.f&m&&!(St.f&f)&&xt.includes(t)&&(Qt(St,b),Ht(St))}else if(i&&null===t.deps){var s=t,o=s.parent;null===o||o.deriveds?.includes(s)||(o.deriveds??=[]).push(s)}return i&&Ut(s=t)&&V(s),t.v}function Jt(t){const e=It;try{return It=null,t()}finally{It=e}}const Yt=-3585;function Qt(t,e){t.f=t.f&Yt|e}function Xt(t,e=1){var i=+Gt(t);return D(t,i+e),i}function Zt(t,e=!1,i){Mt={p:Mt,c:null,e:null,m:!1,s:t,x:null,l:null},E&&!e&&(Mt.l={s:null,u:null,r1:[],r2:T(!1)})}function te(t){const e=Mt;if(null!==e){void 0!==t&&(e.x=t);const o=e.e;if(null!==o){var i=St,r=It;e.e=null;try{for(var n=0;n<o.length;n++){var s=o[n];Ct(s.effect),At(s.reaction),Q(s.fn)}}finally{Ct(i),At(r)}}Mt=e.p,e.m=!0}return t||{}}function ee(t){if("object"==typeof t&&t&&!(t instanceof EventTarget))if(_ in t)ie(t);else if(!Array.isArray(t))for(let e in t){const i=t[e];"object"==typeof i&&i&&_ in i&&ie(i)}}function ie(t,e=new Set){if(!("object"!=typeof t||null===t||t instanceof EventTarget||e.has(t))){e.add(t),t instanceof Date&&t.getTime();for(let i in t)try{ie(t[i],e)}catch(t){}const i=c(t);if(i!==Object.prototype&&i!==Array.prototype&&i!==Map.prototype&&i!==Set.prototype&&i!==Date.prototype){const e=o(i);for(let i in e){const r=e[i].get;if(r)try{r.call(t)}catch(t){}}}}}function re(t,r=null,n){if("object"!=typeof t||null===t||_ in t)return t;const o=c(t);if(o!==a&&o!==l)return t;var u,d=new Map,h=i(t),g=T(0);return h&&d.set("length",T(t.length)),new Proxy(t,{defineProperty(t,e,i){"value"in i&&!1!==i.configurable&&!1!==i.enumerable&&!1!==i.writable||function(){throw new Error("state_descriptors_fixed")}();var r=d.get(e);return void 0===r?(r=T(i.value),d.set(e,r)):D(r,re(i.value,u)),!0},deleteProperty(t,i){var r=d.get(i);if(void 0===r)i in t&&d.set(i,T(e));else{if(h&&"string"==typeof i){var n=d.get("length"),s=Number(i);Number.isInteger(s)&&s<n.v&&D(n,s)}D(r,e),ne(g)}return!0},get(i,r,n){if(r===_)return t;var o=d.get(r),a=r in i;if(void 0!==o||a&&!s(i,r)?.writable||(o=T(re(a?i[r]:e,u)),d.set(r,o)),void 0!==o){var l=Gt(o);return l===e?void 0:l}return Reflect.get(i,r,n)},getOwnPropertyDescriptor(t,i){var r=Reflect.getOwnPropertyDescriptor(t,i);if(r&&"value"in r){var n=d.get(i);n&&(r.value=Gt(n))}else if(void 0===r){var s=d.get(i),o=s?.v;if(void 0!==s&&o!==e)return{enumerable:!0,configurable:!0,value:o,writable:!0}}return r},has(t,i){if(i===_)return!0;var r=d.get(i),n=void 0!==r&&r.v!==e||Reflect.has(t,i);if((void 0!==r||null!==St&&(!n||s(t,i)?.writable))&&(void 0===r&&(r=T(n?re(t[i],u):e),d.set(i,r)),Gt(r)===e))return!1;return n},set(t,i,r,n){var o=d.get(i),a=i in t;if(h&&"length"===i)for(var l=r;l<o.v;l+=1){var c=d.get(l+"");void 0!==c?D(c,e):l in t&&(c=T(e),d.set(l+"",c))}void 0===o?a&&!s(t,i)?.writable||(D(o=T(void 0),re(r,u)),d.set(i,o)):(a=o.v!==e,D(o,re(r,u)));var f=Reflect.getOwnPropertyDescriptor(t,i);if(f?.set&&f.set.call(n,r),!a){if(h&&"string"==typeof i){var p=d.get("length"),v=Number(i);Number.isInteger(v)&&v>=p.v&&D(p,v+1)}ne(g)}return!0},ownKeys(t){Gt(g);var i=Reflect.ownKeys(t).filter((t=>{var i=d.get(t);return void 0===i||i.v!==e}));for(var[r,n]of d)n.v===e||r in t||i.push(r);return i},setPrototypeOf(){!function(){throw new Error("state_prototype_fixed")}()}})}function ne(t,e=1){D(t,t.v+e)}var se,oe,ae;function le(t=""){return document.createTextNode(t)}function ce(t){return oe.call(t)}function ue(t){return ae.call(t)}function de(t,e){return ce(t)}function he(t,e){var i=ce(t);return i instanceof Comment&&""===i.data?ue(i):i}function ge(t,e=1,i=!1){let r=t;for(;e--;)r=ue(r);return r}let fe=!1;function pe(t,e){if(e){const e=document.body;t.autofocus=!0,vt((()=>{document.activeElement===e&&t.focus()}))}}let ve=!1;function me(t){var e=It,i=St;At(null),Ct(null);try{return t()}finally{At(e),Ct(i)}}function be(t,e,i,r=i){t.addEventListener(e,(()=>me(i)));const n=t.__on_r;t.__on_r=n?()=>{n(),r()}:r,ve||(ve=!0,document.addEventListener("reset",(t=>{Promise.resolve().then((()=>{if(!t.defaultPrevented)for(const e of t.target.elements)e.__on_r?.()}))}),{capture:!0}))}const ye=new Set,Oe=new Set;function $e(t,e,i,r){function n(t){if(r.capture||_e.call(e,t),!t.cancelBubble)return me((()=>i.call(this,t)))}return t.startsWith("pointer")||t.startsWith("touch")||"wheel"===t?vt((()=>{e.addEventListener(t,n,r)})):e.addEventListener(t,n,r),n}function we(t,e,i,r,n){var s={capture:r,passive:n},o=$e(t,e,i,s);e!==document.body&&e!==window&&e!==document||G((()=>{e.removeEventListener(t,o,s)}))}function ke(t){for(var e=0;e<t.length;e++)ye.add(t[e]);for(var i of Oe)i(t)}function _e(t){var e=this,r=e.ownerDocument,s=t.type,o=t.composedPath?.()||[],a=o[0]||t.target,l=0,c=t.__root;if(c){var u=o.indexOf(c);if(-1!==u&&(e===document||e===window))return void(t.__root=e);var d=o.indexOf(e);if(-1===d)return;u<=d&&(l=u)}if((a=o[l]||t.target)!==e){n(t,"currentTarget",{configurable:!0,get:()=>a||r});var h=It,g=St;At(null),Ct(null);try{for(var f,p=[];null!==a;){var v=a.assignedSlot||a.parentNode||a.host||null;try{var m=a["__"+s];if(void 0!==m&&!a.disabled)if(i(m)){var[b,...y]=m;b.apply(a,[t,...y])}else m.call(a,t)}catch(t){f?p.push(t):f=t}if(t.cancelBubble||v===e||null===v)break;a=v}if(f){for(let t of p)queueMicrotask((()=>{throw t}));throw f}}finally{t.__root=e,delete t.currentTarget,At(h),Ct(g)}}}function Ie(t){var e=document.createElement("template");return e.innerHTML=t,e.content}function Ae(t,e){var i=St;null===i.nodes_start&&(i.nodes_start=t,i.nodes_end=e)}function Se(t,e){var i,r=!!(1&e),n=!!(2&e),s=!t.startsWith("<!>");return()=>{void 0===i&&(i=Ie(s?t:"<!>"+t),r||(i=ce(i)));var e=n?document.importNode(i,!0):i.cloneNode(!0);r?Ae(ce(e),e.lastChild):Ae(e,e);return e}}function Ce(t=""){var e=le(t+"");return Ae(e,e),e}function Le(){var t=document.createDocumentFragment(),e=document.createComment(""),i=le();return t.append(e,i),Ae(e,i),t}function Ee(t,e){null!==t&&t.before(e)}function Te(t){return t.endsWith("capture")&&"gotpointercapture"!==t&&"lostpointercapture"!==t}const xe=["beforeinput","click","change","dblclick","contextmenu","focusin","focusout","input","keydown","keyup","mousedown","mousemove","mouseout","mouseover","mouseup","pointerdown","pointermove","pointerout","pointerover","pointerup","touchend","touchmove","touchstart"];function Ne(t){return xe.includes(t)}const Fe={formnovalidate:"formNoValidate",ismap:"isMap",nomodule:"noModule",playsinline:"playsInline",readonly:"readOnly",srcobject:"srcObject"};function Me(t){return t=t.toLowerCase(),Fe[t]??t}const Re=["touchstart","touchmove"];function De(t){return Re.includes(t)}let Ue=!0;function Pe(t){Ue=t}function je(t,e){var i=null==e?"":"object"==typeof e?e+"":e;i!==(t.__t??=t.nodeValue)&&(t.__t=i,t.nodeValue=null==i?"":i+"")}function We(t,e){return function(t,{target:e,anchor:i,props:n={},events:o,context:a,intro:l=!0}){!function(){if(void 0===se){se=window;var t=Element.prototype,e=Node.prototype;oe=s(e,"firstChild").get,ae=s(e,"nextSibling").get,t.__click=void 0,t.__className="",t.__attributes=null,t.__styles=null,t.__e=void 0,Text.prototype.__t=void 0}}();var c=new Set,u=t=>{for(var i=0;i<t.length;i++){var r=t[i];if(!c.has(r)){c.add(r);var n=De(r);e.addEventListener(r,_e,{passive:n});var s=Be.get(r);void 0===s?(document.addEventListener(r,_e,{passive:n}),Be.set(r,1)):Be.set(r,s+1)}}};u(r(ye)),Oe.add(u);var d=void 0,h=function(t){const e=K(64,t,!0);return()=>{ot(e)}}((()=>{var r=i??e.appendChild(le());return it((()=>{a&&(Zt({}),Mt.c=a);o&&(n.$$events=o),Ue=l,d=t(r,n)||{},Ue=!0,a&&te()})),()=>{for(var t of c){e.removeEventListener(t,_e);var n=Be.get(t);0==--n?(document.removeEventListener(t,_e),Be.delete(t)):Be.set(t,n)}Oe.delete(u),ze.delete(d),r!==i&&r.parentNode?.removeChild(r)}}));return ze.set(d,h),d}(t,e)}const Be=new Map;let ze=new WeakMap;function Ve(t){const e=ze.get(t);e&&e()}function qe(t,e,i,r=null,n=!1){var s=t,o=null,a=null,l=null;et((()=>{l!==(l=!!e())&&(l?(o?dt(o):o=it((()=>i(s))),a&&lt(a,(()=>{a=null}))):(a?dt(a):r&&(a=it((()=>r(s)))),o&&lt(o,(()=>{o=null}))))}),n?w:0)}let He=null;function Ke(t){He=t}function Ge(t,e){return e}function Je(t,e,n,s,o,a=null){var l=t,c={flags:e,items:new Map,first:null};!(4&e)||(l=t.appendChild(le()));var u=null,d=!1;et((()=>{var t=n(),h=i(t)?t:null==t?[]:r(t),g=h.length;d&&0===g||(d=0===g,function(t,e,i,n,s,o,a){var l,c,u,d,h,g,f=!!(8&s),p=!!(3&s),v=t.length,m=e.items,b=e.first,y=b,$=null,w=[],k=[];if(f)for(g=0;g<v;g+=1)d=a(u=t[g],g),void 0!==(h=m.get(d))&&(h.a?.measure(),(c??=new Set).add(h));for(g=0;g<v;g+=1)if(d=a(u=t[g],g),void 0!==(h=m.get(d))){if(p&&Ye(h,u,g,s),h.e.f&O&&(dt(h.e),f&&(h.a?.unfix(),(c??=new Set).delete(h))),h!==y){if(void 0!==l&&l.has(h)){if(w.length<k.length){var _,I=k[0];$=I.prev;var A=w[0],S=w[w.length-1];for(_=0;_<w.length;_+=1)Xe(w[_],I,i);for(_=0;_<k.length;_+=1)l.delete(k[_]);Ze(e,A.prev,S.next),Ze(e,$,A),Ze(e,S,I),y=I,$=S,g-=1,w=[],k=[]}else l.delete(h),Xe(h,y,i),Ze(e,h.prev,h.next),Ze(e,h,null===$?e.first:$.next),Ze(e,$,h),$=h;continue}for(w=[],k=[];null!==y&&y.k!==d;)!o&&y.e.f&O||(l??=new Set).add(y),k.push(y),y=y.next;if(null===y)continue;h=y}w.push(h),$=h,y=h.next}else{$=Qe(y?y.e.nodes_start:i,e,$,null===$?e.first:$.next,u,d,g,n,s),m.set(d,$),w=[],k=[],y=$.next}if(null!==y||void 0!==l){for(var C=void 0===l?[]:r(l);null!==y;)!o&&y.e.f&O||C.push(y),y=y.next;var L=C.length;if(L>0){var E=4&s&&0===v?i:null;if(f){for(g=0;g<L;g+=1)C[g].a?.measure();for(g=0;g<L;g+=1)C[g].a?.fix()}!function(t,e,i,r){for(var n=[],s=e.length,o=0;o<s;o++)ut(e[o].e,n,!0);var a=s>0&&0===n.length&&null!==i;if(a){var l=i.parentNode;l.textContent="",l.append(i),r.clear(),Ze(t,e[0].prev,e[s-1].next)}ct(n,(()=>{for(var i=0;i<s;i++){var n=e[i];a||(r.delete(n.k),Ze(t,n.prev,n.next)),ot(n.e,!a)}}))}(e,C,E,m)}}f&&vt((()=>{if(void 0!==c)for(h of c)h.a?.apply()}));St.first=e.first&&e.first.e,St.last=$&&$.e}(h,c,l,o,e,!!(It.f&O),s),null!==a&&(0===g?u?dt(u):u=it((()=>a(l))):null!==u&&lt(u,(()=>{u=null}))),n())}))}function Ye(t,e,i,r){1&r&&U(t.v,e),2&r?U(t.i,i):t.i=i}function Qe(t,e,i,r,n,s,o,a,l){var c=He,u=!!(1&l)?!(16&l)?N(n):T(n):n,d=2&l?T(o):o,h={i:d,v:u,k:s,a:null,e:null,prev:i,next:r};He=h;try{return h.e=it((()=>a(t,u,d)),fe),h.e.prev=i&&i.e,h.e.next=r&&r.e,null===i?e.first=h:(i.next=h,i.e.next=h.e),null!==r&&(r.prev=h,r.e.prev=h.e),h}finally{He=c}}function Xe(t,e,i){for(var r=t.next?t.next.e.nodes_start:i,n=e?e.e.nodes_start:i,s=t.e.nodes_start;s!==r;){var o=ue(s);n.before(s),s=o}}function Ze(t,e,i){null===e?t.first=i:(e.next=i,e.e.next=i&&i.e),null!==i&&(i.prev=e,i.e.prev=e&&e.e)}function ti(t,e,i,r,n){var s,o=t,a="";et((()=>{a!==(a=e()??"")&&(void 0!==s&&(ot(s),s=void 0),""!==a&&(s=it((()=>{var t=Ie(a+"");Ae(ce(t),t.lastChild),o.before(t)}))))}))}function ei(t,e,i,r,n){var s=e.$$slots?.[i],o=!1;!0===s&&(s=e["default"===i?"children":i],o=!0),void 0===s?null!==n&&n(t):s(t,o?()=>r:r)}function ii(t,e,...i){var r,n=t,s=d;et((()=>{s!==(s=e())&&(r&&(ot(r),r=null),r=it((()=>s(n,...i))))}),w)}function ri(t,e,i){var r,n,s=t;et((()=>{r!==(r=e())&&(n&&(lt(n),n=null),r&&(n=it((()=>i(s,r)))))}),w)}function ni(t,e,i,r){var n=t.__attributes??={};n[e]!==(n[e]=i)&&("style"===e&&"__styles"in t&&(t.__styles={}),"loading"===e&&(t[A]=i),null==i?t.removeAttribute(e):"string"!=typeof i&&oi(t).includes(e)?t[e]=i:t.setAttribute(e,i))}var si=new Map;function oi(t){var e,i=si.get(t.nodeName);if(i)return i;si.set(t.nodeName,i=[]);for(var r=c(t),n=Element.prototype;n!==r;){for(var s in e=o(r))e[s].set&&i.push(s);r=c(r)}return i}function ai(t,e){var i=t.__className,r=function(t){return null==t?"":t}(e);i!==r&&(null==e?t.removeAttribute("class"):t.className=r,t.__className=r)}function li(t,e,i){if(i){if(t.classList.contains(e))return;t.classList.add(e)}else{if(!t.classList.contains(e))return;t.classList.remove(e)}}const ci={tick:t=>requestAnimationFrame(t),now:()=>performance.now(),tasks:new Set};function ui(t){ci.tasks.forEach((e=>{e.c(t)||(ci.tasks.delete(e),e.f())})),0!==ci.tasks.size&&ci.tick(ui)}function di(t,e){t.dispatchEvent(new CustomEvent(e))}function hi(t){if("float"===t)return"cssFloat";if("offset"===t)return"cssOffset";if(t.startsWith("--"))return t;const e=t.split("-");return 1===e.length?e[0]:e[0]+e.slice(1).map((t=>t[0].toUpperCase()+t.slice(1))).join("")}function gi(t){const e={},i=t.split(";");for(const t of i){const[i,r]=t.split(":");if(!i||void 0===r)break;e[hi(i.trim())]=r.trim()}return e}const fi=t=>t;function pi(t,e,i,r){var n,s,o,a=!!(4&t),l=e.inert;function c(){var t=It,s=St;At(null),Ct(null);try{return n??=i()(e,r?.()??{},{direction:"both"})}finally{At(t),Ct(s)}}var u={is_global:a,in(){e.inert=l,di(e,"introstart"),s=vi(e,c(),o,1,(()=>{di(e,"introend"),s?.abort(),s=n=void 0}))},out(t){e.inert=!0,di(e,"outrostart"),o=vi(e,c(),s,0,(()=>{di(e,"outroend"),t?.()}))},stop:()=>{s?.abort(),o?.abort()}},d=St;if((d.transitions??=[]).push(u),Ue){var h=a;if(!h){for(var g=d.parent;g&&g.f&w;)for(;(g=g.parent)&&!(16&g.f););h=!g||!!(16384&g.f)}h&&Q((()=>{Jt((()=>u.in()))}))}}function vi(t,e,i,r,n){var s=1===r;if(u(e)){var o,a=!1;return vt((()=>{if(!a){var l=e({direction:s?"in":"out"});o=vi(t,l,i,r,n)}})),{abort:()=>{a=!0,o?.abort()},deactivate:()=>o.deactivate(),reset:()=>o.reset(),t:()=>o.t()}}if(i?.deactivate(),!e?.duration)return n(),{abort:d,deactivate:d,reset:d,t:()=>r};const{delay:l=0,css:c,tick:h,easing:g=fi}=e;var f=[];if(s&&void 0===i&&(h&&h(0,1),c)){var p=gi(c(0,1));f.push(p,p)}var v=()=>1-r,m=t.animate(f,{duration:l});return m.onfinish=()=>{var s=i?.t()??1-r;i?.abort();var o=r-s,a=e.duration*Math.abs(o),l=[];if(a>0){if(c)for(var u=Math.ceil(a/(1e3/60)),d=0;d<=u;d+=1){var f=s+o*g(d/u),p=c(f,1-f);l.push(gi(p))}v=()=>{var t=m.currentTime;return s+o*g(t/a)},h&&function(t){let e;0===ci.tasks.size&&ci.tick(ui),new Promise((i=>{ci.tasks.add(e={c:t,f:i})}))}((()=>{if("running"!==m.playState)return!1;var t=v();return h(t,1-t),!0}))}(m=t.animate(l,{duration:a,fill:"forwards"})).onfinish=()=>{v=()=>r,h?.(r,1-r),n()}},{abort:()=>{m&&(m.cancel(),m.effect=null,m.onfinish=d)},deactivate:()=>{n=d},reset:()=>{0===r&&h?.(1,0)},t:()=>v()}}function mi(t,e,i=e){var r=Dt();be(t,"input",(()=>{var n=yi(t)?Oi(t.value):t.value;i(n),r&&n!==(n=e())&&(t.value=n??"")})),Z((()=>{var i=e();yi(t)&&i===Oi(t.value)||("date"!==t.type||i||t.value)&&i!==t.value&&(t.value=i??"")}))}function bi(t,e,i=e){be(t,"change",(()=>{var e=t.checked;i(e)})),null==e()&&i(!1),Z((()=>{var i=e();t.checked=Boolean(i)}))}function yi(t){var e=t.type;return"number"===e||"range"===e}function Oi(t){return""===t?null:+t}function $i(t,e){return t===e||t?.[_]===e}function wi(t={},e,i,r){return Q((()=>{var r,n;return Z((()=>{r=n,n=[],Jt((()=>{t!==i(...n)&&(e(t,...n),r&&$i(i(...r),t)&&e(null,...r))}))})),()=>{vt((()=>{n&&$i(i(...n),t)&&e(null,...n)}))}})),t}function ki(t){return function(...e){return e[0].preventDefault(),t?.apply(this,e)}}function _i(t,e){if(t.l.s)for(const e of t.l.s)Gt(e);e()}function Ii(t,e){var r=t.$$events?.[e.type],n=i(r)?r.slice():null==r?[]:[r];for(var s of n)s.call(this,e)}function Ai(t){null===Mt&&mt(),E&&null!==Mt.l?Li(Mt).m.push(t):J((()=>{const e=Jt(t);if("function"==typeof e)return e}))}function Si(){const t=Mt;return null===t&&mt(),(e,r,n)=>{const s=t.s.$$events?.[e];if(s){const o=i(s)?s.slice():[s],a=function(t,e,{bubbles:i=!1,cancelable:r=!1}={}){return new CustomEvent(t,{detail:e,bubbles:i,cancelable:r})}(e,r,n);for(const e of o)e.call(t.x,a);return!a.defaultPrevented}return!0}}function Ci(t){null===Mt&&mt(),null===Mt.l&&function(){throw new Error("lifecycle_legacy_only")}(),Li(Mt).a.push(t)}function Li(t){var e=t.l;return e.u??={a:[],b:[],m:[]}}let Ei=!1;function Ti(t,e,i){const r=i[e]??={store:null,source:N(void 0),unsubscribe:d};if(r.store!==t)if(r.unsubscribe(),r.store=t??null,null==t)r.source.v=void 0,r.unsubscribe=d;else{var n=!0;r.unsubscribe=function(t,e,i){if(null==t)return e(void 0),d;const r=Jt((()=>t.subscribe(e,i)));return r.unsubscribe?()=>r.unsubscribe():r}(t,(t=>{n?r.source.v=t:D(r.source,t)})),n=!1}return Gt(r.source)}function xi(){const t={};return G((()=>{for(var e in t){t[e].unsubscribe()}})),t}const Ni={get(t,e){if(!t.exclude.includes(e))return Gt(t.version),e in t.special?t.special[e]():t.props[e]},set:(t,e,i)=>(e in t.special||(t.special[e]=Ui({get[e](){return t.props[e]}},e,4)),t.special[e](i),Xt(t.version),!0),getOwnPropertyDescriptor(t,e){if(!t.exclude.includes(e))return e in t.props?{enumerable:!0,configurable:!0,value:t.props[e]}:void 0},deleteProperty:(t,e)=>(t.exclude.includes(e)||(t.exclude.push(e),Xt(t.version)),!0),has:(t,e)=>!t.exclude.includes(e)&&e in t.props,ownKeys:t=>Reflect.ownKeys(t.props).filter((e=>!t.exclude.includes(e)))};function Fi(t,e){return new Proxy({props:t,exclude:e,special:{},version:T(0)},Ni)}const Mi={get(t,e){let i=t.props.length;for(;i--;){let r=t.props[i];if(u(r)&&(r=r()),"object"==typeof r&&null!==r&&e in r)return r[e]}},set(t,e,i){let r=t.props.length;for(;r--;){let n=t.props[r];u(n)&&(n=n());const o=s(n,e);if(o&&o.set)return o.set(i),!0}return!1},getOwnPropertyDescriptor(t,e){let i=t.props.length;for(;i--;){let r=t.props[i];if(u(r)&&(r=r()),"object"==typeof r&&null!==r&&e in r){const t=s(r,e);return t&&!t.configurable&&(t.configurable=!0),t}}},has(t,e){if(e===_||e===I)return!1;for(let i of t.props)if(u(i)&&(i=i()),null!=i&&e in i)return!0;return!1},ownKeys(t){const e=[];for(let i of t.props){u(i)&&(i=i());for(const t in i)e.includes(t)||e.push(t)}return e}};function Ri(...t){return new Proxy({props:t},Mi)}function Di(t){for(var e=St,i=St;null!==e&&!(96&e.f);)e=e.parent;try{return Ct(e),t()}finally{Ct(i)}}function Ui(t,e,i,r){var n,o=!!(1&i),a=!E||!!(2&i),l=!!(8&i),c=!!(16&i),u=!1;l?[n,u]=function(t){var e=Ei;try{return Ei=!1,[t(),Ei]}finally{Ei=e}}((()=>t[e])):n=t[e];var d,h=_ in t||I in t,g=s(t,e)?.set??(h&&l&&e in t?i=>t[e]=i:void 0),f=r,p=!0,v=!1,m=()=>(v=!0,p&&(p=!1,f=c?Jt(r):r),f);if(void 0===n&&void 0!==r&&(g&&a&&function(){throw new Error("props_invalid_value")}(),n=m(),g&&g(n)),a)d=()=>{var i=t[e];return void 0===i?m():(p=!0,v=!1,i)};else{var b=Di((()=>(o?j:W)((()=>t[e]))));b.f|=65536,d=()=>{var t=Gt(b);return void 0!==t&&(f=void 0),void 0===t?f:t}}if(!(4&i))return d;if(g){var y=t.$$legacy;return function(t,e){return arguments.length>0?(a&&e&&!y&&!u||g(e?d():t),t):d()}}var O=!1,$=N(n),w=Di((()=>j((()=>{var t=d(),e=Gt($);return O?(O=!1,e):$.v=t}))));return o||(w.equals=L),function(t,e){if(arguments.length>0){const i=e?Gt(w):a&&l?re(t):t;return w.equals(i)||(O=!0,D($,i),v&&void 0!==f&&(f=i),Jt((()=>Gt(w)))),t}return Gt(w)}}function Pi(t){Y((()=>{t();var e=St;e.f&b&&(console.warn("legacy_recursive_reactive_block"),Qt(e,y))}))}function ji(){const t=Mt;return null===t&&mt(),e=>r=>{const n=t.s.$$events?.[e];if(n){const e=i(n)?n.slice():[n];for(const i of e)i.call(t.x,r);return!r.defaultPrevented}return!0}}var Wi=(t,e)=>e("click"),Bi=Se('<div role="button"><!></div>');function zi(t,e){Zt(e,!0);const i=ji(),r=Si();let n=Ui(e,"id",3,""),s=Ui(e,"classes",3,"");var o=Bi(),a=j((()=>i("click")));o.__click=function(...t){Gt(a)?.apply(this,t)},o.__keyup=[Wi,r],ii(de(o),(()=>e.children??d)),tt((()=>{ni(o,"id",n()),ai(o,`block ${s()??""}`)})),Ee(t,o),te()}ke(["click","keyup"]);var Vi=(t,e)=>e("click"),qi=Se('<div role="button"><!></div>');function Hi(t,e){Zt(e,!0);const i=ji(),r=Si();let n=Ui(e,"id",3,""),s=Ui(e,"classes",3,"");var o=qi(),a=j((()=>i("click")));o.__click=function(...t){Gt(a)?.apply(this,t)},o.__keyup=[Vi,r],ii(de(o),(()=>e.children??d)),tt((()=>{ni(o,"id",n()),ai(o,`box ${s()??""} `)})),Ee(t,o),te()}ke(["click","keyup"]);var Ki=(t,e)=>e("click"),Gi=Se('<div role="button" tabindex="0"><!></div>');function Ji(t,e){Zt(e,!0);const i=ji(),r=Si();let n=Ui(e,"id",3,""),s=Ui(e,"classes",3,"");var o=Gi(),a=j((()=>i("click")));o.__click=function(...t){Gt(a)?.apply(this,t)},o.__keyup=[Ki,r],ii(de(o),(()=>e.children??d)),tt((()=>{ni(o,"id",n()),ai(o,`content ${s()??""}`)})),Ee(t,o),te()}ke(["click","keyup"]);var Yi=Object.freeze({__proto__:null,UIBlock:zi,UIBlockInnerVertical:function(t,e){Zt(e,!0);let i=Ui(e,"id",11,""),r=Ui(e,"classes",3,""),n=x("block-inner-vertical");J((()=>{D(n,`block-inner-vertical ${r()}`)})),zi(t,{get id(){return i()},get classes(){return Gt(n)},children:(t,i)=>{var r=Le();ii(he(r),(()=>e.children??d)),Ee(t,r)},$$slots:{default:!0}}),te()},UIBox:Hi,UIContent:Ji});const Qi=[];function Xi(t,e=d){let i=null;const r=new Set;function n(e){if(C(t,e)&&(t=e,i)){const e=!Qi.length;for(const e of r)e[1](),Qi.push(e,t);if(e){for(let t=0;t<Qi.length;t+=2)Qi[t][0](Qi[t+1]);Qi.length=0}}}function s(e){n(e(t))}return{set:n,update:s,subscribe:function(o,a=d){const l=[o,a];return r.add(l),1===r.size&&(i=e(n,s)||d),o(t),()=>{r.delete(l),0===r.size&&i&&(i(),i=null)}}}}function Zi(t={}){const e={get:function(t,e){return Object.hasOwn(t,e)?Reflect.get(...arguments):e}};return new Proxy(t,e)}const tr=function(){const{subscribe:t,set:e,update:i}=Xi(Zi());return{subscribe:t,update:i,set:function(t){e(Zi(t))},reset:function(){return e(Zi())}}}();function er(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var ir,rr={exports:{}};
/*!
	 * EventEmitter v5.2.9 - git.io/ee
	 * Unlicense - http://unlicense.org/
	 * Oliver Caldwell - https://oli.me.uk/
	 * @preserve
	 */var nr,sr,or,ar,lr,cr=(ir||(ir=1,nr=rr,function(t){function e(){}var i=e.prototype,r=t.EventEmitter;function n(t,e){for(var i=t.length;i--;)if(t[i].listener===e)return i;return-1}function s(t){return function(){return this[t].apply(this,arguments)}}function o(t){return"function"==typeof t||t instanceof RegExp||!(!t||"object"!=typeof t)&&o(t.listener)}i.getListeners=function(t){var e,i,r=this._getEvents();if(t instanceof RegExp)for(i in e={},r)r.hasOwnProperty(i)&&t.test(i)&&(e[i]=r[i]);else e=r[t]||(r[t]=[]);return e},i.flattenListeners=function(t){var e,i=[];for(e=0;e<t.length;e+=1)i.push(t[e].listener);return i},i.getListenersAsObject=function(t){var e,i=this.getListeners(t);return i instanceof Array&&((e={})[t]=i),e||i},i.addListener=function(t,e){if(!o(e))throw new TypeError("listener must be a function");var i,r=this.getListenersAsObject(t),s="object"==typeof e;for(i in r)r.hasOwnProperty(i)&&-1===n(r[i],e)&&r[i].push(s?e:{listener:e,once:!1});return this},i.on=s("addListener"),i.addOnceListener=function(t,e){return this.addListener(t,{listener:e,once:!0})},i.once=s("addOnceListener"),i.defineEvent=function(t){return this.getListeners(t),this},i.defineEvents=function(t){for(var e=0;e<t.length;e+=1)this.defineEvent(t[e]);return this},i.removeListener=function(t,e){var i,r,s=this.getListenersAsObject(t);for(r in s)s.hasOwnProperty(r)&&-1!==(i=n(s[r],e))&&s[r].splice(i,1);return this},i.off=s("removeListener"),i.addListeners=function(t,e){return this.manipulateListeners(!1,t,e)},i.removeListeners=function(t,e){return this.manipulateListeners(!0,t,e)},i.manipulateListeners=function(t,e,i){var r,n,s=t?this.removeListener:this.addListener,o=t?this.removeListeners:this.addListeners;if("object"!=typeof e||e instanceof RegExp)for(r=i.length;r--;)s.call(this,e,i[r]);else for(r in e)e.hasOwnProperty(r)&&(n=e[r])&&("function"==typeof n?s.call(this,r,n):o.call(this,r,n));return this},i.removeEvent=function(t){var e,i=typeof t,r=this._getEvents();if("string"===i)delete r[t];else if(t instanceof RegExp)for(e in r)r.hasOwnProperty(e)&&t.test(e)&&delete r[e];else delete this._events;return this},i.removeAllListeners=s("removeEvent"),i.emitEvent=function(t,e){var i,r,n,s,o=this.getListenersAsObject(t);for(s in o)if(o.hasOwnProperty(s))for(i=o[s].slice(0),n=0;n<i.length;n++)!0===(r=i[n]).once&&this.removeListener(t,r.listener),r.listener.apply(this,e||[])===this._getOnceReturnValue()&&this.removeListener(t,r.listener);return this},i.trigger=s("emitEvent"),i.emit=function(t){var e=Array.prototype.slice.call(arguments,1);return this.emitEvent(t,e)},i.setOnceReturnValue=function(t){return this._onceReturnValue=t,this},i._getOnceReturnValue=function(){return!this.hasOwnProperty("_onceReturnValue")||this._onceReturnValue},i._getEvents=function(){return this._events||(this._events={})},e.noConflict=function(){return t.EventEmitter=r,e},nr.exports?nr.exports=e:t.EventEmitter=e}("undefined"!=typeof window?window:rr.exports||{})),rr.exports),ur=er(cr);function dr(t,e,i){if("function"==typeof t?t===e:t.has(e))return arguments.length<3?e:i;throw new TypeError("Private element is not present on this object")}function hr(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function gr(t,e){return t.get(dr(t,e))}function fr(t,e,i){hr(t,e),e.set(t,i)}function pr(t,e,i){return t.set(dr(t,e),i),i}function vr(t,e){hr(t,e),e.add(t)}function mr(t,e,i){return(e=function(t){var e=function(t,e){if("object"!=typeof t||!t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var r=i.call(t,e||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:e+""}(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var br,yr=(lr||(lr=1,ar=function(){if(or)return sr;or=1;const t=".",e=":",i="::",r="()";return sr=class{static get SUB_PATH_START(){return"{"}static get SUB_PATH_END(){return"}"}static get PATH_SPLIT(){return t}static get PATH_START_OBJECT(){return e}static get PATH_START_HELPERS(){return i}static get FUNCTION_MARKER(){return r}static get MAX_DEEP(){return 10}static findNextSubPath(t){let e="",i=!1;for(let r=0;r<t.length;r++)if("{"===t[r])i=!0,e="";else{if("}"===t[r]&&i)return e;e+=t[r]}return i?e:null}static replaceSubPath(t,e,i){let r="{"+e+"}",n=0;for(;t.indexOf(r)>-1&&n<10;)t=t.replace(r,i),n++;return t}static parseSubs(t,e,r){let n,s=this.findNextSubPath(t),o=0;for(;s&&(n=this.getValueByPath(s.indexOf(i)>-1?r:e,s,e,r),t=this.replaceSubPath(t,s,n),o++,!(o>10));)s=this.findNextSubPath(t);return t}static get(t,r,n=void 0){switch(t){case e:return r;case i:return n}return t=this.parseSubs(t,r,n),this.getValueByPath(t.indexOf(i)>-1?n:r,t,r,n)}static set(t,e,r,n=void 0){3===arguments.length&&(n=r,r=void 0);let s,o=this.findNextSubPath(t),a=0;for(;o&&(s=this.getValueByPath(o.indexOf(i)>-1?r:e,o,e,r),t=this.replaceSubPath(t,o,s),!(a>10));)o=this.findNextSubPath(t),a++;this.setValueByPath(e,t,n),e.isRecord&&this.normilizePath(t).length>1&&e.__isActive&&e.trigger("change",e,t,n)}static unset(t,e,i){this.set(t,e,i,null)}static parsePathStep(t,n,s){let o=null;if(0===t.indexOf(i)&&s){if(o=t.replace(i,""),o.indexOf(r)!==o.length-2)return s[o];if(o=o.replace(r,""),Object.prototype.hasOwnProperty.call(s,o))return s[o](n,void 0)}else if(0===t.indexOf(e)&&n){if(o=t.replace(e,""),o.indexOf(r)!==o.length-2)return n[o];if(o=o.replace(r,""),Object.prototype.hasOwnProperty.call(n,o))return n[o](n,void 0)}return t}static parsePath(e,i,r){Array.isArray(e)||(e=e.split(t));for(var n=0;n<e.length;n++)e[n]=this.parsePathStep(e[n],i,r);return e}static normilizePath(i){if(Array.isArray(i))return i;for(;i.indexOf(e)>-1;)i=i.replace(e,"");return i.split(t)}static ifFullSubPath(t,e){if(t.length<e.length)return!1;for(let i=0;i<e.length;i++)if(e[i]!==t[i])return!1;return!0}static getValueByPath(t,e,i,n){let s=(e=this.normilizePath(e)).shift(),o=s.indexOf(r)>-1;if(o&&(s=s.replace(r,"")),("object"==typeof t||"function"==typeof t)&&null!=t&&void 0!==t[s]&&null!==t[s]){let r=o?t[s]({item:i,helpers:n}):t[s];return e.length>0?this.getValueByPath(r,e,i,n):r}}static setValueByPath(t,e,i){let r=(e=this.normilizePath(e)).shift();e.length>0?(Object.prototype.hasOwnProperty.call(t,r)||(t[r]={}),this.setValueByPath(t[r],e,i)):t[r]=i}static join(){return Array.prototype.slice.call(arguments).join(t)}},sr}()),ar),Or=er(yr);let $r=function(t){return function(t){return!!t&&"object"==typeof t}(t)&&!function(t){var e=Object.prototype.toString.call(t);return"[object RegExp]"===e||"[object Date]"===e||function(t){return t.$$typeof===wr}(t)}(t)};var wr="function"==typeof Symbol&&Symbol.for?Symbol.for("react.element"):60103;function kr(t,e){return(!e||!1!==e.clone)&&$r(t)?Ir((i=t,Array.isArray(i)?[]:{}),t,e):t;var i}function _r(t,e,i){return t.concat(e).map((function(t){return kr(t,i)}))}function Ir(t,e,i){const r=Array.isArray(e);if(r===Array.isArray(t)){if(r){return((i||{arrayMerge:_r}).arrayMerge||_r)(t,e,i)}return function(t,e,i){const r={};return $r(t)&&Object.keys(t).forEach((function(e){r[e]=kr(t[e],i)})),Object.keys(e).forEach((function(n){$r(e[n])&&t[n]?r[n]=Ir(t[n],e[n],i):r[n]=kr(e[n],i)})),r}(t,e,i)}return kr(e,i)}Ir.all=function(t,e){if(!Array.isArray(t))throw new Error("first argument should be an array");return t.reduce((function(t,i){return Ir(t,i,e)}),{})};let Ar=class t{static isError(t){return t instanceof Error||Object.hasOwn(t,"status")&&"error"===t.status}static mute(){t.ENV_TYPE="production"}static pad(t){return t<10?"0"+t:t}static getTodayDate(){let t=new Date;return new Date(t.getFullYear(),t.getMonth(),t.getDate()).getTime()}static objHas(t,e){return Object.hasOwn(t,e)}static copyObj(t){return JSON.parse(JSON.stringify(t))}static partCopyObj(t,e){let i=Object.keys(t).reduce((function(i,r){return e.includes(r)&&(i[r]=t[r]),i}),{});return JSON.parse(JSON.stringify(i))}static compareTwoArrays(t,e){return t.length===e.length&&t.every((function(t,i){return t===e[i]}))}static isFunc(t){return"function"==typeof t}static isAsync(t){return"AsyncFunction"===t.constructor.name}static async executeObjectFunction(e,i,r){if(e){const n=Or.get(":"+i,e);if(t.isFunc(n))return t.isAsync(n)?await n(...r):n(...r)}}static mapBind(t,e,i){i.forEach((function(i){"function"==typeof t[i]&&(e[i]=t[i].bind(t))}))}static isClass(t){return/^\s*class/.test(t.toString())}static detectType(e){return"function"!=typeof e?typeof e:t.isClass(e)?"class":"function"}static isArray(t){return"object"==typeof t&&t instanceof Array}static localIsoDate(e){return(e=e||new Date).getFullYear()+"-"+t.pad(e.getMonth()+1)+"-"+t.pad(e.getDate())+"T"+t.pad(e.getHours())+":"+t.pad(e.getMinutes())+":"+t.pad(e.getSeconds())}static getToday(){let e=new Date;return e.getFullYear()+"-"+t.pad(e.getMonth()+1)+"-"+t.pad(e.getDate())}static backlogAdd(e,i="log"){!0===t.get("backlog")&&t.backlog.push({msg:e,type:i})}static dumpBacklog(){for(;t.backlog.length;){let e=t.backlog.shift();window[t.LOG][e.type](...e.msg)}}static logMsg(){let e=t.localIsoDate();window[t.LOG].log(`[${e}]: `,...arguments),t.backlogAdd([`[${e}]: `,...arguments],"log")}static log(){t.logMsg(...arguments)}static createLogger(e){return{log:t.genLogMsg(e),error:t.genLogError(e),debug:t.genLogDebug(e),report:t.report}}static genLogMsg(e){return function(){let i=t.localIsoDate();window[t.LOG].log(`[${i}]: ${e}::`,...arguments),t.backlogAdd([`[${i}]: ${e}::`,...arguments],"log")}}static isDev(){return t.ENV_TYPE===t.DEV_ENV}static debug(){return t.isDev()?t.logMsg(...arguments):t.NOOP}static genLogDebug(e){return t.isDev()?t.genLogMsg(e):t.NOOP}static error(){t.logError(...arguments)}static logError(){let e=t.localIsoDate();window[t.LOG].error(`[${e}]: `,...arguments),t.backlogAdd([`[${e}]: `,...arguments],"error")}static genLogError(e){return function(){let i=t.localIsoDate();window[t.LOG].error(`[${i}]: ${e}::`,...arguments),t.backlogAdd([`[${i}]: ${e}::`,...arguments],"error")}}static report(e){if(t.getApp()){let i=t.getApp().getService("nsErrorReporter");i&&i.report(e).catch(t.error)}else t.get("production")||t.error(...arguments)}static trace(){t.get("production")||t.trace(...arguments)}static trimBackslash(t){return 0===t.indexOf("/")&&(t=t.substring(1)),"/"===t[t.length-1]&&(t=t.substring(0,t.length-1)),t}static buildURL({prefix:e,module:i,model:r,id:n,action:s}={prefix:"",module:"",model:"",id:"",action:""}){let o=["/"];return e&&o.push(encodeURIComponent(t.trimBackslash(e))),i&&o.push(encodeURIComponent(t.trimBackslash(i))),r&&o.push(encodeURIComponent(t.trimBackslash(r))),n&&o.push(encodeURIComponent(t.trimBackslash(n))),s&&o.push(encodeURIComponent(t.trimBackslash(s))),o=o.filter((function(t){return""!==t})),o.join("/").replace(/\/\//g,"/")}static capitalizeFirstLetter(t){return t.charAt(0).toUpperCase()+t.slice(1)}static lowerFirstLetter(t){return t.charAt(0).toLowerCase()+t.slice(1)}static strLengthCap(t,e=50,i="..."){return"string"==typeof t&&t.length>e?t.substr(0,e)+i:t}static escapeHtml(t){return t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")}static startApp(t){document.addEventListener("DOMContentLoaded",t)}static getApp(){return t.get("app")}static extendAppConfig(e,i){return t.deepMerge(e,i)}static absorbModule(){let e,i,r={};1==arguments.length?(r={...arguments[0]},Object.hasOwnProperty.call(arguments[0],"defaultConf")&&(e=arguments[0].defaultConf,delete r.defaultConf),Object.hasOwnProperty.call(arguments[0],"mod")&&(i=arguments[0].mod,delete r.mod)):(t.log("WARNING: absorbModule format obsoleted, use object {defaultConf, mod, services, uis, wsc, etc}"),e=arguments[0],i=arguments[1],arguments.length>2&&(r.services=arguments[2]),arguments.length>3&&(r.uis=arguments[3]),arguments.length>4&&(r.wcs=arguments[4]));for(let n in i)"manifest"!==n?"function"==typeof t.get(`absorb.${n}`)?(Object.hasOwn(r,n)||(r[n]={},t.log(`WARNING: no accamulator object provided for '${n}' collection`)),t.get(`absorb.${n}`)(r[n],i[n])):0===n.indexOf("nc")?(Object.hasOwn(e,"controllers")||(e.controllers={}),e.controllers[n]=i[n]):(Object.hasOwn(window,"notEnv")||(window.notEnv={}),window.notEnv[n]=i[n]):e=t.extendAppConfig(e,i.manifest);return e}static defineIfNotExists(t,e,i){Object.hasOwn(t,e)||(t[e]=i)}static register(e,i){t.registry[e]=i}static get(e){return Object.hasOwn(t.registry,e)?t.registry[e]:null}static moveItem(t,e,i){const r=function(e){return e<t.length&&e>-1};r(i)&&r(e)&&t.splice(i,0,t.splice(e,1)[0])}static stripProxy(e){if(null!=e&&e.isProxy){e=Array.isArray(e)?Array.from(e):Object.assign({},e);for(let i in e)Object.hasOwn(e,i)&&(e[i]=t.stripProxy(e[i]))}return e}static pipe(t,e){let i;for(let r of e)i=r(i||t);return i}static getAPI(e){return t.getManager()?.getAPI(e)??null}static setManager(e){t.MANAGER=e}static getManager(){return t.MANAGER}static getJSON(t){return fetch(t).then((function(t){return t.json()}))}static wait(t){return new Promise((function(e){setTimeout(e,1e3*t)}))}static registerWidgetEvents(e){t.getApp()&&Object.keys(e).forEach((function(i){t.getApp().on(i,e[i])}))}static navigate(e){t.getApp()&&t.getApp().getWorking("router").navigate(e)}static select(e,i,r){return e&&"object"==typeof e&&t.objHas(e,i)&&void 0!==e[i]&&null!==e[i]?e[i]:r}};function Sr(t,e,i){Object.hasOwn(t,e)||(t[e]={connection:{},router:{routes:{}},messenger:{}});let r=t[e];if(Object.hasOwn(i,"router")&&Object.hasOwn(i.router,"routes"))for(let t in i.router.routes)Object.hasOwn(r.router.routes,t)||(r.router.routes[t]={}),Object.assign(r.router.routes[t],{...i.router.routes[t]});Object.hasOwn(i,"messenger")&&Object.assign(r.messenger,{...i.messenger}),Object.hasOwn(i,"connection")&&Object.assign(r.connection,{...i.connection});for(let t of["name","getToken","logger","identity","credentials"])Object.hasOwn(i,t)&&(r[t]=i[t])}br=Ar,mr(Ar,"MANAGER",null),mr(Ar,"LOG","console"),mr(Ar,"deepMerge",Ir),mr(Ar,"TZ_OFFSET",(new Date).getTimezoneOffset()/60*-1),mr(Ar,"DEV_ENV","production"),mr(Ar,"ENV_TYPE",window.NOT_ENV_TYPE??br.DEV_ENV),mr(Ar,"NOOP",(function(){})),mr(Ar,"backlog",[]),mr(Ar,"registry",{}),Ar.register("absorb.wsc",(function(t,e){if(t)for(let i in e)Sr(t,i,e[i])})),Ar.register("absorb.services",(function(t,e){if(t)for(let i in e)Object.hasOwn(t,i)&&Ar.logError(`services property duplication ${i}`),t[i]=e[i]})),Ar.register("absorb.uis",(function(t,e){if(t)for(let i in e)Object.hasOwn(t,i)&&Ar.logError(`uis property duplication ${i}`),t[i]=e[i]})),Ar.register("absorb.uis",(function(t,e){if(t)for(let i in e)Object.hasOwn(t,i)&&Ar.logError(`fields property duplication ${i}`),t[i]=e[i]}));var Cr=new class extends ur{constructor(){super(),this.dict={},this.helpers={};let t=this.restoreFromStorage();t&&this.set(t)}format(t,e){return Or.parseSubs(t,e,this.helpers)}say(t,e=!1){try{if(Ar.objHas(this.dict,t)){let i=this.dict[t],r="";return r=e?this.format(i,e):i,r}throw new Error(`Unknown locale phrase: ${t}`)}catch(e){return Ar.debug(e),t}}set(t){tr.set(t),this.saveToStorage(t),this.dict=Object.assign({},{...t}),this.emit("change")}saveToStorage(t){if(window.localStorage)try{return window.localStorage.setItem("dictionary",JSON.stringify(t))}catch(t){return Ar.debug(t),!1}return!1}restoreFromStorage(){if(window.localStorage)try{let t=window.localStorage.getItem("dictionary");if(t){return JSON.parse(t)}return!1}catch(t){return Ar.debug(t),!1}return!1}vocabulary(){return tr}};const Lr=Cr.say.bind(Cr);var Er=Se("<span> </span>");function Tr(t,e){Zt(e,!0);const i=xi();let r=x(!1),n=Ui(e,"id",3,"tagId"),s=Ui(e,"title",15,"tag"),o=Ui(e,"color",3,"info"),a=Ui(e,"size",3,"normal"),l=Ui(e,"padding",3,"normal"),c=Ui(e,"bold",3,!1),u=Ui(e,"right",3,!1),d=Ui(e,"left",3,!1),h=Ui(e,"top",3,!1),g=Ui(e,"bottom",3,!1),f=Ui(e,"classes",3,""),p=Ui(e,"events",31,(()=>re({}))),v=Ui(e,"register",19,(()=>Ar.registerWidgetEvents.bind(Ar))),m=Ui(e,"onUpdate",3,(t=>{Object.hasOwn(t,"title")&&s(t.title)})),b=Ui(e,"action",3,(()=>!0));function y(){return`tag-${n()}:update`}Ai((()=>{Object.hasOwn(p(),y())||p(p()[y()]=m(),!0),v()(p())})),Pi((()=>{D(r,re(u()||d()||h()||g()))}));var O=Le();qe(he(O),s,(t=>{var e=Er();e.__click=function(...t){(b()?b():void 0)?.apply(this,t)};var p=de(e);tt((()=>{ni(e,"id",`tag-${n()??""}`),ai(e,`\n  tag\n  ${(c()?"has-text-weight-bold":"")??""}\n  ${("normal"!==l()?`is-padded-${l()}`:"")??""}\n  is-${a()??""}\n  is-${o()??""}\n  ${(Gt(r)?"is-sided":"")??""}\n  ${(u()?"is-sided-right":"")??""}\n  ${(d()?"is-sided-left":"")??""}\n  ${(h()?"is-sided-top":"")??""}\n  ${(g()?"is-sided-bottom":"")??""}\n  ${f()??""}`),je(p,Ti(tr,"$LOCALE",i)[s()])})),Ee(t,e)})),Ee(t,O),te()}function xr(t,e){let i=Ui(e,"LC_TRUE",3,"not-node:booleans_true"),r=Ui(e,"LC_FALSE",3,"not-node:booleans_false"),n=Ui(e,"inverted",3,!1);const s={title:r(),color:n()?"success":"danger"},o={title:i(),color:n()?"danger":"success"};let a=j((()=>e.value?o:s));Tr(t,Ri((()=>Gt(a))))}ke(["click"]);var Nr=Se('<span class="label"> <!></span>');function Fr(t,e){Zt(e,!0);let i=Ui(e,"values",19,(()=>[])),r=Ui(e,"inverted",3,!1),n=Ui(e,"componentConstructor",3,xr),s=x(re([]));Ai((()=>{"boolean"==typeof i()?D(s,re([{value:i()}])):Array.isArray(i())&&(i().every((t=>"boolean"==typeof t))?D(s,re(i().map((t=>({value:t}))))):D(s,re([...i()])))}));var o=Le();qe(he(o),(()=>Gt(s).length),(t=>{var e=Le();Je(he(e),17,(()=>Gt(s)),Ge,((t,e)=>{var i=Le();const s=j(n);var o=he(i),a=j((()=>r()||Gt(e).inverted));ri(o,(()=>Gt(s)),((t,i)=>{i(t,Ri((()=>Gt(e)),{get inverted(){return Gt(a)}}))})),Ee(t,i)})),Ee(t,e)})),Ee(t,o),te()}function Mr(t,e){e(!e())}async function Rr(t,e,i,r,n,s,o){try{await navigator.clipboard.writeText(e()),i()&&(D(r,!0),Gt(n).dataset.tooltip=s(),setTimeout((()=>{D(r,!1),Gt(n).removeAttribute("data-tooltip")}),o()))}catch(t){console.error("Failed to copy: ",t)}}var Dr=Se("<span><i></i></span>"),Ur=Se('<span class="icon is-small is-right is-clickable is-vertical-middle"><i></i></span>'),Pr=Se("<span> </span> <!> <!>",1);ke(["click"]);var jr=Se("<span> </span>");function Wr(t,e){Zt(e,!0);const i=xi();let r=Ti(s(),"$state",i)(!1),n=Ui(e,"id",3,"tagId"),s=Ui(e,"state",15,"light"),o=Ui(e,"size",3,"normal"),a=Ui(e,"labels",19,(()=>({black:"black",dark:"dark",light:"light",white:"white",primary:"primary",link:"link",info:"info",success:"success",warning:"warning",danger:"danger"}))),l=Ui(e,"classes",3,"mx-1"),c=Ui(e,"padding",3,"normal"),u=Ui(e,"bold",3,!1),d=Ui(e,"right",3,!1),h=Ui(e,"left",3,!1),g=Ui(e,"top",3,!1),f=Ui(e,"bottom",3,!1),p=Ui(e,"events",31,(()=>re({}))),v=Ui(e,"register",19,(()=>Ar.registerWidgetEvents.bind(Ar))),m=Ui(e,"onUpdate",3,(t=>{Object.hasOwn(t,"state")&&s(t.state)}));function b(){return`indicator-${n()}:update`}Ai((()=>{Object.hasOwn(p(),b())||p(p()[b()]=m(),!0),v()(p())})),Pi((()=>{r=d()||h()||g()||f()}));var y=jr(),O=de(y);tt((()=>{ai(y,`tag\nis-${o()??""}\n${(u()?"has-text-weight-bold":"")??""}\n${("normal"!==c()?`is-padded-${c()}`:"")??""}\n${(r?"is-sided":"")??""}\n${(d()?"is-sided-right":"")??""}\n${(h()?"is-sided-left":"")??""}\n${(g()?"is-sided-top":"")??""}\n${(f()?"is-sided-bottom":"")??""}\n  is-${s()??""} ${l()??""}\n  `),je(O,a()[s()])})),Ee(t,y),te()}var Br=Se('<div><span class="title"> </span></div>');function zr(t,e){Zt(e,!0);const i=xi();let r=Ui(e,"loading",3,!1),n=Ui(e,"size",3,"container"),s=Ui(e,"title",3,"Waiting...");var o=Le();qe(he(o),(()=>"hidden"!==n()),(t=>{var e=Br(),o=de(e),a=de(o);tt((()=>{ai(e,`${("page"===n()?"pageloader":"containerloader")??""} ${(r()?"is-active":"")??""}`),je(a,Ti(tr,"$LOCALE",i)[s()])})),Ee(t,e)})),Ee(t,o),te()}var Vr=Se("<option> </option>");function qr(t,e){Zt(e,!0);const i=xi();var r=Vr(),n={},s=de(r);tt((()=>{n!==(n=e.value)&&(r.value=null==(r.__value=e.value)?"":e.value),r.selected=e.selected,je(s,Ti(tr,"$LOCALE",i)[e.title])})),Ee(t,r),te()}var Hr=Se("<span> </span>"),Kr=Se("<p><!></p>");function Gr(t,e){Zt(e,!0);const i=xi();let r=Ui(e,"errors",19,(()=>[])),n=Ui(e,"show",3,!1),s=Ui(e,"classes",3,""),o=Ui(e,"id",3,"errors-list");var a=Le();qe(he(a),(()=>Array.isArray(r())&&r().length),(t=>{var e=Kr();qe(de(e),n,(t=>{var e=Le();Je(he(e),17,r,Ge,((t,e)=>{var r=Hr(),n=de(r);tt((()=>je(n,Ti(tr,"$LOCALE",i)[Gt(e)]))),Ee(t,r)})),Ee(t,e)}),(t=>{Ee(t,Ce(" "))})),tt((()=>{ai(e,`help ${s()??""}`),ni(e,"id",o())})),Ee(t,e)})),Ee(t,a),te()}let Jr=class t{static isMobile(){const t=window.matchMedia||window.msMatchMedia;if(t){let e="(pointer:coarse)";if(arguments.length){e=`only screen and (max-width: ${"boolean"==typeof arguments[0]?this.MOBILE_WIDTH_BREAK_POINT:arguments[0]}px)`}return t(e).matches}return!1}static removeBodyScroll(){document.body.classList.add(this.SCROLL_DISABLER_CLASS)}static restoreBodyScroll(){document.body.classList.remove(this.SCROLL_DISABLER_CLASS)}static formatPhone(t,e=this.FILLER){const i=[1,2,2,2,3,3,3,4,4,5,5];let r=t.replace(/\D/g,"");if(r.length>11){let t=r.length-11;for(;t>0;)t--,i.unshift(1)}let n=["","","","",""];Array.from(r).forEach((function(t,e){let r=i[e];n[r-1]=n[r-1]+t}));const s=i.reduce((function(t,e){return void 0===t[e]?t[e]=1:t[e]+=1,t}),{});for(let t in n){let i=s[parseInt(t)+1]-n[t].length;for(;i>0;)n[t]=n[t]+e,i--}return`+${n[0]} (${n[1]}) ${n[2]}-${n[3]}-${n[4]}`}static setMoneySign(t){this.MONEY_SIGN=t}static formatPrice(t){let e=Math.floor(t/100),i=t%100;return`${this.MONEY_SIGN}${e.toString()}.${i.toString()}`}static formatLocaleDatetime(t,e={date:!0,time:!0}){const i=t.toLocaleDateString(window.navigator.language),r=t.toLocaleTimeString(window.navigator.language);return e.date&&e.time?`${i} ${r}`:e.date&&!e.time?i:r}static tryFormatLocaleDateTime(e,i={date:!0,time:!0}){if("string"==typeof e||"number"==typeof e){const r=new Date(e);return t.formatLocaleDatetime(r,i)}return"object"==typeof e?t.formatLocaleDatetime(e,i):""}static formatTimestamp(t,e=0){let i=60*((new Date).getTimezoneOffset()-e)*1e3;return new Date(parseInt(t)-i).toLocaleString(window.navigator.language)}static declOfNum(t,e){let i=(t=Math.abs(t)%100)%10;return t>10&&t<20?e[2]:i>1&&i<5?e[1]:1==i?e[0]:e[2]}static humanizedTimeDiff(t){let e,i=(new Date).getTime(),r=Math.round((i-t)/1e3);if(r<60)return e=this.declOfNum(r,this.TIME.SECONDS),`${r} ${e} назад`;if(r<3600){let t=Math.floor(r/60);return e=this.declOfNum(t,this.TIME.MINUTES),`${t} ${e} назад`}{let t=Math.floor(r/3600);return e=this.declOfNum(t,this.TIME.HOURS),`${t} ${e} назад`}}};mr(Jr,"CLEAR_MACRO","__CLEAR__"),mr(Jr,"ERROR_DEFAULT","Что пошло не так."),mr(Jr,"DEFAULT_REDIRECT_TIMEOUT",3e3),mr(Jr,"CLASS_OK","is-success"),mr(Jr,"CLASS_ERR","is-danger"),mr(Jr,"SCROLL_DISABLER_CLASS","remove-scroll"),mr(Jr,"FILLER","_"),mr(Jr,"SCROLL_OPTIONS",{top:0,behavior:"smooth"}),mr(Jr,"MOBILE_WIDTH_BREAK_POINT",760),mr(Jr,"MONEY_SIGN","&#8381;"),mr(Jr,"TIME",{SECONDS:["секунду","секунды","секунд"],MINUTES:["минуту","минуты","минут"],HOURS:["час","часа","часов"]});var Yr=Se('<span class="mr-2"> </span>'),Qr=Se('<span class="mr-2"> </span>'),Xr=Se('<span class="icon is-small is-left"><i></i></span>'),Zr=Se('<i class="fas fa-check"></i>'),tn=Se('<i class="fas fa-exclamation-triangle"></i>'),en=Se('<span class="icon is-small is-right"><!></span>'),rn=Se("<div><select><!><!></select></div> <!> <!>",1),nn=Se("<div><!></div> <!>",1);function sn(t,e){Zt(e,!0);const i=xi(),r=()=>Ti(tr,"$LOCALE",i);let n=Si(),s=Ui(e,"inputStarted",15,!1),o=Ui(e,"value",15,""),a=Ui(e,"variants",19,(()=>[])),l=Ui(e,"placeholder",3,""),c=Ui(e,"emptyValueTitle",3,""),u=Ui(e,"fieldname",3,"select"),d=Ui(e,"icon",3,!1),h=Ui(e,"required",3,!0),g=Ui(e,"readonly",3,!1),f=Ui(e,"multiple",3,!1),p=Ui(e,"size",3,8),v=Ui(e,"valid",3,!0),m=Ui(e,"validated",3,!1),b=Ui(e,"errors",3,!1),y=Ui(e,"formErrors",3,!1);Ui(e,"formLevelError",3,!1);let O,$=x(re([]));function w(t){return Array.isArray(o())&&f()?o().indexOf(t.id)>-1:!!o()&&o()==t.id}function k(t){let e={field:u(),value:t.currentTarget.value};return O===e.value||Array.isArray(e.value)&&Ar.compareTwoArrays(O,e.value)||(f()?(o(Array.from(t.target.selectedOptions).map((t=>t.value))),o().indexOf(Jr.CLEAR_MACRO)>-1&&o([]),e.value=o()):e.value===Jr.CLEAR_MACRO?o(""):o(e.value),s(!0),n("change",e)),!0}function _(t){let e={field:u(),value:t.currentTarget.value};return f()?(o(Array.from(t.target.selectedOptions).map((t=>t.value))),o().indexOf(Jr.CLEAR_MACRO)>-1&&o([]),e.value=o()):e.value===Jr.CLEAR_MACRO?o(""):o(e.value),s(!0),O=e.value,n("change",e),!0}let I,A,S,C=j((()=>(d()?" has-icons-left ":"")+" has-icons-right "));Pi((()=>{I=[].concat(b()?b():[],y()?y():[])})),Pi((()=>{A=!(m()&&v())&&s()})),Pi((()=>{S=!0!==v()&&s()?Jr.CLASS_ERR:Jr.CLASS_OK}));let L=j((()=>f()?" is-multiple ":""));Pi((()=>{o(),D($,re(Array.isArray(a())?a().filter(w):[]))}));var E=nn(),T=he(E);qe(de(T),g,(t=>{var e=Le();qe(he(e),o,(t=>{var e=Le();Je(he(e),17,(()=>Gt($)),Ge,((t,e)=>{var i=Yr(),n=de(i);tt((()=>je(n,r()[Gt(e).title]))),Ee(t,i)})),Ee(t,e)}),(t=>{var e=Qr(),i=de(e);tt((()=>je(i,r()[c()]))),Ee(t,e)})),Ee(t,e)}),(t=>{var e=rn(),i=he(e),r=de(i);r.__input=_;var n=de(r);qe(n,(()=>l().length>0),(t=>{var e=Le();qe(he(e),o,(t=>{qr(t,{get value(){return Jr.CLEAR_MACRO},get title(){return l()}})}),(t=>{qr(t,{get value(){return Jr.CLEAR_MACRO},selected:"selected",get title(){return l()}})})),Ee(t,e)})),Je(ge(n),17,a,Ge,((t,e)=>{var i=Le();qe(he(i),f,(t=>{var i=j((()=>o()&&o().indexOf(Gt(e).id)>-1));qr(t,{get value(){return Gt(e).id},get selected(){return Gt(i)},get title(){return Gt(e).title}})}),(t=>{var i=j((()=>o()==Gt(e).id));qr(t,{get value(){return Gt(e).id},get selected(){return Gt(i)},get title(){return Gt(e).title}})})),Ee(t,i)}));var s=ge(i,2);qe(s,d,(t=>{var e=Xr(),i=de(e);tt((()=>ai(i,`fas fa-${d()??""}`))),Ee(t,e)})),qe(ge(s,2),(()=>!0===m()),(t=>{var e=en();qe(de(e),(()=>!0===v()),(t=>{Ee(t,Zr())}),(t=>{var e=Le();qe(he(e),(()=>!1===v()),(t=>{Ee(t,tn())}),null,!0),Ee(t,e)})),Ee(t,e)})),tt((()=>{ai(i,`select ${S??""} ${Gt(L)??""}`),ni(r,"id",`form-field-select-${u()??""}`),ni(r,"name",u()),r.readOnly=g(),r.required=h(),r.multiple=f(),ni(r,"size",!!f()&&p())})),we("blur",r,k),Ee(t,e)})),Gr(ge(T,2),{get errors(){return I},set errors(t){I=t},get show(){return A},set show(t){A=t},get classes(){return S},set classes(t){S=t},get id(){return`input-field-helper-${u()??""}`}}),tt((()=>ai(T,`control ${Gt(C)??""}`))),Ee(t,E),te()}function on(t,e,i,r){return t.stopPropagation(),e("click",{event:t,value:i.value}),r()(t,i.value)}ke(["input"]);var an=Se('<span class="icon"><i></i></span>'),ln=Se("<span> </span>"),cn=Se('<span class="icon"><i></i></span>'),un=Se("<!> <!> <!>",1),dn=Se("<button><!></button>");function hn(t,e){Zt(e,!0);const i=xi(),r=()=>Ti(tr,"$LOCALE",i),n=Si();let s=Ui(e,"title",3,""),o=Ui(e,"light",3,!1),a=Ui(e,"loading",3,!1),l=Ui(e,"raised",3,!1),c=Ui(e,"outlined",3,!1),u=Ui(e,"inverted",3,!1),d=Ui(e,"rounded",3,!1),h=Ui(e,"disabled",3,!1),g=Ui(e,"state",3,""),f=Ui(e,"type",3,""),p=Ui(e,"color",3,""),v=Ui(e,"size",3,""),m=Ui(e,"classes",3,""),b=Ui(e,"icon",3,!1),y=Ui(e,"iconSide",3,"right"),O=Ui(e,"action",3,(()=>!0));var $=dn();$.__click=[on,n,e,O],qe(de($),(()=>e.children),(t=>{var i=Le();ii(he(i),(()=>e.children)),Ee(t,i)}),(t=>{var e=Le();qe(he(e),b,(t=>{var e=un(),i=he(e);qe(i,(()=>"left"===y()),(t=>{var e=an(),i=de(e);tt((()=>ai(i,`fas fa-${b()??""} ${(v()?`is-${v()}`:"")??""}`))),Ee(t,e)}));var n=ge(i,2);qe(n,s,(t=>{var e=ln(),i=de(e);tt((()=>je(i,r()[s()]))),Ee(t,e)})),qe(ge(n,2),(()=>"right"===y()),(t=>{var e=cn(),i=de(e);tt((()=>ai(i,`fas fa-${b()??""} ${(v()?`is-${v()}`:"")??""}`))),Ee(t,e)})),Ee(t,e)}),(t=>{var e=Ce();tt((()=>je(e,r()[s()]))),Ee(t,e)})),Ee(t,e)})),tt((()=>{$.disabled=h(),ni($,"type",f()?f():""),ai($,`\n  button\n  ${m()??""}\n  ${(g()?`is-${g()}`:"")??""}\n  ${(u()?"is-inverted":"")??""}\n  ${(c()?"is-outlined":"")??""}\n  ${(l()?"is-raised":"")??""}\n  ${(d()?"is-rounded":"")??""}\n  ${(o()?"is-light":"")??""}\n  ${(a()?"is-loading":"")??""}\n  ${(p()?`is-${p()}`:"")??""}\n  ${(v()?`is-${v()}`:"")??""}\n  `)})),Ee(t,$),te()}ke(["click"]);var gn=Se("<div></div>");function fn(t,e){Zt(e,!0);const i=Si();let r=Ui(e,"values",19,(()=>[])),n=Ui(e,"centered",3,!1),s=Ui(e,"right",3,!1),o=Ui(e,"classes",3,""),a=Ui(e,"buttonComponent",3,hn),l=Ui(e,"action",3,(t=>{i("click",t)}));var c=gn();Je(c,21,r,(t=>t.id),((t,i)=>{var r=Le();const n=j(a);var s=he(r),o=j((()=>Gt(i).action?Gt(i).action:l()));ri(s,(()=>Gt(n)),((t,r)=>{r(t,Ri((()=>Gt(i)),{get value(){return Gt(i).value},set value(t){Gt(i).value=t},get action(){return Gt(o)},$$events:{click(t){Ii.call(this,e,t)}}}))})),Ee(t,r)})),tt((()=>ai(c,`buttons has-addons ${(n()?"is-centered":"")??""} ${(s()?"is-right":"")??""} ${o()??""}`))),Ee(t,c),te()}var pn=Se('<div><div class="column"><!></div> <div class="column"><!></div> <div class="column"><!></div></div>');function vn(t,e){let i=Ui(e,"classes",3,""),r=Ui(e,"left",19,(()=>[])),n=Ui(e,"center",19,(()=>[])),s=Ui(e,"right",19,(()=>[]));var o=pn(),a=de(o);fn(de(a),{get values(){return r()}});var l=ge(a,2);fn(de(l),{get values(){return n()},centered:!0}),fn(de(ge(l,2)),{get values(){return s()},right:!0}),tt((()=>ai(o,`columns ${i()??""}`))),Ee(t,o)}function mn(t,e){Zt(e,!0);const i=xi(),r=Si();let n=Ui(e,"title",3,""),s=Ui(e,"light",3,!1),o=Ui(e,"loading",3,!1),a=Ui(e,"raised",3,!1),l=Ui(e,"outlined",3,!1),c=Ui(e,"inverted",3,!1),u=Ui(e,"rounded",3,!1),d=Ui(e,"disabled",3,!1),h=Ui(e,"state",3,""),g=Ui(e,"type",3,""),f=Ui(e,"color",3,""),p=Ui(e,"size",3,""),v=Ui(e,"classes",3,""),m=Ui(e,"icon",3,!1),b=Ui(e,"iconSide",3,"right"),y=Ui(e,"uiOff",3,(()=>({color:""}))),O=Ui(e,"uiOn",3,(()=>({color:"success"}))),$=Ui(e,"action",3,(()=>!w())),w=Ui(e,"selected",15,!1);let k=Ti(h(),"$state",i)();Pi((()=>{k&&(w()?k.$set(O()()):k.$set(y()()))})),wi(hn(t,{get title(){return n()},get light(){return s()},get loading(){return o()},get raised(){return a()},get outlined(){return l()},get inverted(){return c()},get rounded(){return u()},get disabled(){return d()},get state(){return h()},get type(){return g()},get color(){return f()},get size(){return p()},get classes(){return v()},get icon(){return m()},get iconSide(){return b()},get value(){return e.value},$$events:{click:function(t){w($()(t,e.value,w())),r("click",{value:e.value,selected:w()}),r("change",{value:e.value,selected:w()})}}}),(t=>k=t),(()=>k)),te()}var bn=Se("<div></div>");function yn(t,e){function i(t,e){let i=c()-t;if(i)for(let t in r())if(t!==e&&!r()[t].selected&&(r(r()[t].selected=!0,!0),i-=1,!i))break}Zt(e,!0),Si(),Ai((()=>{c()&&i(0,-1)}));let r=Ui(e,"values",31,(()=>re([]))),n=Ui(e,"centered",3,!1),s=Ui(e,"right",3,!1),o=Ui(e,"classes",3,""),a=Ui(e,"buttonComponent",3,mn),l=Ui(e,"action",3,((t,e,n)=>{let s=!n;const o=r().indexOf((t=>t.value===e)),a=r().filter((t=>t.selected)).length+(s?1:-1);return c()&&a<c()&&(i(a,o),r(r())),u()&&u()<a&&(!function(t,e){let i=t-u();if(i)for(let t in r())if(t!==e&&r()[t].selected&&(r(r()[t].selected=!1,!0),i-=1,!i))break}(a,o),r(r())),s})),c=Ui(e,"min",3,0),u=Ui(e,"max",3,100);var d=bn();return Je(d,21,r,(t=>t.id),((t,i)=>{var r=Le();const n=j(a);var s=he(r),o=j((()=>Gt(i).action?Gt(i).action:l()));ri(s,(()=>Gt(n)),((t,r)=>{r(t,Ri((()=>Gt(i)),{get value(){return Gt(i).value},set value(t){Gt(i).value=t},get selected(){return Gt(i).selected},set selected(t){Gt(i).selected=t},get action(){return Gt(o)},$$events:{click(t){Ii.call(this,e,t)},change(t){Ii.call(this,e,t)}}}))})),Ee(t,r)})),tt((()=>ai(d,`buttons has-addons ${(n()?"is-centered":"")??""} ${(s()?"is-right":"")??""} ${o()??""}`))),Ee(t,d),te({selectAll:function(){r().forEach((t=>{t.selected=!0})),r(r())},deselectAll:function(){r().forEach((t=>{t.selected=!1})),r(r())}})}var On=Object.freeze({__proto__:null,UIButton:hn,UIButtonSwitch:mn,UIButtons:fn,UIButtonsRow:vn,UIButtonsSwitchers:yn});const $n="ok",wn={SHORT:500,NORMAL:1500,LONG:5e3},kn=1500;var _n=Se('<div class="field has-addons"><!></div> <div class="control"><!></div>',1);var In=Se('<div class="control"><!></div>');var An=Se("<progress> </progress>");var Sn=Se("<div><!> <!> <!></div>");var Cn=Se("<!> <!>",1);function Ln(t,e){Zt(e,!0);const i=xi(),r=()=>Ti(tr,"$LOCALE",i);let n=Ui(e,"id",19,(()=>`title-${Math.random()}`)),s=Ui(e,"title",3,""),o=Ui(e,"size",3,1),a=Ui(e,"spaced",3,!1),l=Ui(e,"align",3,"left");let c=j((()=>e.subsize?e.subsize:parseInt(o())<6?parseInt(o())+1:o())),u=j((()=>a()?"is-spaced":"")),d=j((()=>`<h${o()} id="${n()}" style="text-align: ${l()};" class="title ${Gt(u)} is-${o()}">${r()[s()]}</h${o()}>`)),h=j((()=>`<h${Gt(c)} id="${n()}" style="text-align: ${l()};" class="subtitle is-${Gt(c)}">${r()[e.subtitle]}</h${Gt(c)}>`));var g=Cn(),f=he(g);return qe(f,s,(t=>{var e=Le();ti(he(e),(()=>Gt(d))),Ee(t,e)})),qe(ge(f,2),(()=>e.subtitle),(t=>{var e=Le();ti(he(e),(()=>Gt(h))),Ee(t,e)})),Ee(t,g),te({scrollToTop:(t=Jr.SCROLL_OPTIONS)=>{setTimeout((()=>{document.getElementById(n()).scrollIntoView(t)}),100)}})}var En=Se('<article class="media"><figure class="media-left"><p class="image is-32x32"><img></p></figure> <div class="media-content"><div class="content"><p><strong> </strong> <small>@</small> <strong> </strong></p></div></div></article>');function Tn(t,e,i,r,n){let s={field:e(),value:i()};return r(!0),n("change",s),!0}function xn(t,e,i,r){let n={field:e(),value:t.currentTarget.value};return i(!0),r("change",n),!0}var Nn=Se("<p> </p>"),Fn=Se('<span class="icon is-small is-left"><i></i></span>'),Mn=Se('<i class="fas fa-check"></i>'),Rn=Se('<i class="fas fa-exclamation-triangle"></i>'),Dn=Se('<span class="icon is-small is-right"><!></span>'),Un=Se('<input type="text"> <!> <!>',1),Pn=Se("<div><!></div> <!>",1);function jn(t,e){Zt(e,!0);const i=xi();let r,n,s=Si(),o=Ui(e,"inputStarted",15,!1),a=Ui(e,"value",15,""),l=Ui(e,"placeholder",3,""),c=Ui(e,"fieldname",3,"textfield"),u=Ui(e,"icon",3,!1),d=Ui(e,"required",3,!0),h=Ui(e,"disabled",3,!1),g=Ui(e,"readonly",3,!1),f=Ui(e,"valid",3,!0),p=Ui(e,"validated",3,!1),v=Ui(e,"errors",3,!1),m=Ui(e,"formErrors",3,!1),b=Ui(e,"formLevelError",3,!1),y=j((()=>(u()?" has-icons-left ":"")+" has-icons-right "));Pi((()=>{r=[].concat(v()?v():[],m()?m():[])})),Pi((()=>{n=!(p()&&f())&&o()}));let O,$=j((()=>!1===f()||b()));Pi((()=>{O=!0!==f()&&o()?Jr.CLASS_ERR:Jr.CLASS_OK}));var w=Pn(),k=he(w);qe(de(k),g,(t=>{var e=Nn(),i=de(e);tt((()=>je(i,a()))),Ee(t,e)}),(t=>{var e=Un(),r=he(e);ai(r,`input ${O??""}`),r.__change=[Tn,c,a,o,s],r.__input=[xn,c,o,s];var n=ge(r,2);qe(n,u,(t=>{var e=Fn(),i=de(e);tt((()=>ai(i,`fas fa-${u()??""}`))),Ee(t,e)})),qe(ge(n,2),(()=>!0===p()),(t=>{var e=Dn();qe(de(e),(()=>!0===f()),(t=>{Ee(t,Mn())}),(t=>{var e=Le();qe(he(e),(()=>!1===f()),(t=>{Ee(t,Rn())}),null,!0),Ee(t,e)})),Ee(t,e)})),tt((()=>{ni(r,"id",`form-field-textfield-${c()??""}`),ni(r,"name",c()),ni(r,"invalid",Gt($)),r.disabled=h(),r.required=d(),r.readOnly=g(),ni(r,"placeholder",Ti(tr,"$LOCALE",i)[l()]),ni(r,"autocomplete",c()),ni(r,"aria-controls",`input-field-helper-${c()??""}`),ni(r,"aria-describedby",`input-field-helper-${c()??""}`)})),mi(r,a),Ee(t,e)})),Gr(ge(k,2),{get errors(){return r},set errors(t){r=t},get show(){return n},set show(t){n=t},get classes(){return O},set classes(t){O=t},get id(){return`input-field-helper-${c()??""}`}}),tt((()=>ai(k,`control ${Gt(y)??""}`))),Ee(t,w),te()}ke(["change","input"]);var Wn=Se('<div class="columns"><div class="column"><div class="field"><!></div></div></div>');function Bn(t,e){Zt(e,!0);const i=xi(),r=Si();let n=Ui(e,"placeholder",19,(()=>Ti(tr,"$LOCALE",i)["not-node:field_search_placeholder"])),s=Ui(e,"term",15,"");var o=Wn(),a=de(o),l=de(a);jn(de(l),{get value(){return s()},set value(t){s(t)},get placeholder(){return n()},fieldname:"searchTermInput",icon:"magnifying-glass",$$events:{change:function({detail:t}){r("termChange",t)}}}),Ee(t,o),te()}var zn=Object.freeze({__proto__:null,UIBoolean:xr,UIBooleanLabeled:function(t,e){Zt(e,!0);const i=xi();let r=Ui(e,"inverted",3,!1);var n=Nr(),s=de(n);xr(ge(s),{get value(){return e.value},get inverted(){return r()}}),tt((()=>je(s,`${Ti(tr,"$LOCALE",i)[e.label]??""}: `))),Ee(t,n),te()},UIBooleans:Fr,UICensored:function(t,e){let i=Ui(e,"hidden",15,!0),r=Ui(e,"showable",3,!0),n=Ui(e,"copiable",3,!0),s=Ui(e,"copyIcon",3,"copy"),o=Ui(e,"showIcon",3,"eye"),a=Ui(e,"hideIcon",3,"eye-slash"),l=Ui(e,"maxLength",3,20),c=Ui(e,"shadowClass",3,"has-background-primary-90"),u=Ui(e,"tooltip",3,!0),d=Ui(e,"tooltipTTL",3,2e3),h=Ui(e,"tooltipText",3,"Скопировано в буфер"),g=Ui(e,"tooltipClass",3,"has-tooltip-info"),f=Ui(e,"value",3,""),p=x(!1),v=j((()=>u()&&Gt(p))),m=x(void 0);var b=Pr(),y=he(b),O=de(y),$=ge(y,2);qe($,n,(t=>{var e=Dr();e.__click=[Rr,f,u,p,m,h,d];var i=de(e);wi(e,(t=>D(m,t)),(()=>Gt(m))),tt((()=>{ai(e,"icon is-small is-right is-clickable "+(Gt(v)?` ${g()} `:"")+" is-vertical-middle"),ai(i,`fas fa-${s()??""}`)})),Ee(t,e)})),qe(ge($,2),r,(t=>{var e=Ur();e.__click=[Mr,i];var r=de(e);tt((()=>ai(r,`fas fa-${(i()?o():a())??""}`))),Ee(t,e)})),tt((()=>{ai(y,(i()?"is-censored "+c():"")+" is-vertical-middle "),ni(y,"style",`display:inline-block; width: ${l()}rem; height: var(--bulma-size-medium); overflow-x:hidden;`),je(O,i()?"":f())})),Ee(t,b)},UIErrorsList:Gr,UIIndicator:Wr,UILoader:zr,UIProgress:function(t,e){let i=Ui(e,"max",3,100),r=Ui(e,"color",3,""),n=Ui(e,"size",3,""),s=Ui(e,"classes",3,"");var o=An(),a=de(o);tt((()=>{ai(o,`\n  progress\n  ${s()??""}\n  ${(r()?`is-${r()}`:"")??""}\n  ${(n()?`is-${n()}`:"")??""}`),function(t,e){var i=t.__attributes??={};i.value!==(i.value=e)&&(t.value!==e||0===e&&"PROGRESS"===t.nodeName)&&(t.value=e)}(o,e.value),ni(o,"max",i()),je(a,`${e.value??""}%`)})),Ee(t,o)},UISelectFromModelOnDemandInline:function(t,e){Zt(e,!0);const i=Si();let r,n=Ui(e,"inputStarted",3,!1),s=Ui(e,"variants",31,(()=>re([]))),o=Ui(e,"placeholder",3,"empty select item"),a=Ui(e,"fieldname",3,"selectFromModel"),l=Ui(e,"modelName",3,""),c=Ui(e,"actionName",3,""),u=Ui(e,"actionFilter",19,(()=>({}))),d=Ui(e,"actionSorter",19,(()=>({}))),h=Ui(e,"actionPager",19,(()=>({}))),g=Ui(e,"actionSearch",3,void 0),f=Ui(e,"optionId",3,":_id"),p=Ui(e,"optionTitle",3,":title"),v=Ui(e,"icon",3,!1),m=Ui(e,"required",3,!0),b=Ui(e,"readonly",3,!1),y=Ui(e,"multiple",3,!1),O=Ui(e,"size",3,8),$=Ui(e,"valid",3,!0),w=Ui(e,"validated",3,!1),k=Ui(e,"errors",15,!1),_=Ui(e,"formErrors",3,!1),I=Ui(e,"formLevelError",3,!1),A=j((()=>!0)),S=x("hidden"),C=[];function L({detail:t}){r=C.find((e=>Or.get(f(),e)===t.value))}Ai((async()=>{if(l()&&c()&&u()){const t=Ar.getApp().getModel(l()).setFilter(u()).setSorter(d()).setPager(h()).setSearch(g()),e=await t["$"+c()]();e.status===$n?(C=e.result,s(C.map((t=>({id:Or.get(f(),t),title:Or.get(p(),t)}))))):k(result.errors||[result.message])}}));const E={add:{color:"primary",icon:"plus",action(){D(S,"show")}},resolve:{icon:"check",color:"primary",action(){D(S,"hidden"),i("resolve",r)}},reject:{icon:"close",color:"danger",action(){D(S,"hidden"),i("reject")}}};var T=Le();qe(he(T),(()=>"hidden"===Gt(S)),(t=>{hn(t,Ri((()=>E.add)))}),(t=>{var i=Le();qe(he(i),(()=>"show"==Gt(S)),(t=>{var i=_n(),r=he(i);sn(de(r),{get inputStarted(){return n()},get value(){return e.value},get variants(){return s()},get placeholder(){return o()},get fieldname(){return a()},get icon(){return v()},get required(){return m()},get readonly(){return b()},get disabled(){return Gt(A)},get multiple(){return y()},get size(){return O()},get valid(){return $()},get validated(){return w()},get errors(){return k()},get formErrors(){return _()},get formLevelError(){return I()},$$events:{change:L}});var l=de(ge(r,2)),c=j((()=>[E.resolve,E.reject]));fn(l,{get values(){return Gt(c)}}),Ee(t,i)}),null,!0),Ee(t,i)})),Ee(t,T),te()},UISelectFromModelWithSearchModal:function(t,e){Zt(e,!0);let i=Si(),r=Ui(e,"value",15),n=Ui(e,"inputStarted",15,!1),s=Ui(e,"icon",3,!1),o=Ui(e,"fieldname",3,""),a=Ui(e,"readonly",3,!1),l=Ui(e,"serviceName",3,""),c=Ui(e,"serviceOpenSelectorMethod",3,"openSelector"),u=Ui(e,"serviceLoadDataMethod",3,"loadData"),d=Ui(e,"modelData",15,null),h=Ui(e,"loading",15,!1),g=Ui(e,"selectedModelTitleFormatter",3,(t=>`${t._id}`)),f=Ui(e,"loadingLabel",3,"not-node:loading_label"),p=Ui(e,"isEmptyLabel",3,"not-node:field_value_is_empty_placeholder");function v(){if(!l())throw new Error("serviceName is not set");return Ar.getApp().getService(l())}function m(){if(!c())throw new Error("serviceOpenSelectorMethod is not set");v()[c()]().then((t=>(r(t._id),d(t),r()))).then((t=>{n(!0),i("change",{field:o(),value:t})})).catch((t=>{Ar.report(t)}))}Ai((()=>{!async function(){try{r()&&(h(!0),d(await v()[u()](r())))}catch(t){Ar.report(t)}finally{h(!1)}}()}));const b=[{id:1,action:m,icon:s(),color:"warning"},{id:2,action:function(){r(void 0),d(null),i("change",{field:o(),value:r()})},icon:"times",color:"danger"}];function y(){return h()?{disabled:!0,loading:h(),title:f()}:d()?{disabled:a(),action:m,title:g()(d())}:{disabled:!0,title:p()}}let O=x(re([]));Pi((()=>{r()?D(O,re([y(),...a()?[]:b])):D(O,re([y(),...a()?[]:[b[0]]]))}));var $=In();fn(de($),{get values(){return Gt(O)},classes:"is-no-flex-wrap"}),Ee(t,$),te()},UIShowOneFromList:function(t,e){Zt(e,!0);const i=t=>t[s()]===e.id;let r=Ui(e,"values",19,(()=>[])),n=Ui(e,"active",15),s=Ui(e,"idFieldName",3,"_id"),o=Ui(e,"filter",3,i);Pi((()=>{n(Array.isArray(r())&&r().length&&void 0!==e.id?r().find(o()||i):void 0)}));var a=Le();qe(he(a),n,(t=>{var i=Le();ri(he(i),(()=>e.UIComponent),((t,e)=>{e(t,Ri(n))})),Ee(t,i)}),(t=>{var i=Le();qe(he(i),(()=>e.UIPlaceholder),(t=>{var i=Le();ri(he(i),(()=>e.UIPlaceholder),((t,e)=>{e(t,{})})),Ee(t,i)}),null,!0),Ee(t,i)})),Ee(t,a),te()},UISimpleSearchInput:Bn,UITag:Tr,UITagValue:function(t,e){Zt(e,!0);let i=Ui(e,"id",3,"taggedValueId"),r=Ui(e,"actions",19,(()=>[])),n=Ui(e,"classes",3,""),s=Ui(e,"actionsGroupContructor",3,fn),o=Ui(e,"actionsGroupProps",19,(()=>({}))),a=Ui(e,"readonly",3,!1);var l=Sn(),c=de(l);qe(c,(()=>e.title),(t=>{Tr(t,Ri((()=>e.title)))}));var u=ge(c,2);qe(u,(()=>e.value),(t=>{Tr(t,Ri((()=>e.value)))})),qe(ge(u,2),(()=>!a()&&r()&&r().length),(t=>{var e=Le();const i=j(s);ri(he(e),(()=>Gt(i)),((t,e)=>{e(t,Ri({get values(){return r()}},o))})),Ee(t,e)})),tt((()=>{ai(l,`tags has-addons ${n()??""}`),ni(l,"id",i())})),Ee(t,l),te()},UITitle:Ln,UIUserCard:function(t,e){Zt(e,!0);let i=Ui(e,"id",3,"userCard"),r=Ui(e,"image",3,"https://bulma.io/images/placeholders/32x32.png"),n=Ui(e,"username",15,"John Doe"),s=Ui(e,"role",15,"admin"),o=Ui(e,"events",31,(()=>re({}))),a=Ui(e,"register",19,(()=>Ar.registerWidgetEvents)),l=Ui(e,"onUpdate",3,(t=>{Object.hasOwn(t,"username")&&n(t.username),Object.hasOwn(t,"role")&&s(t.role)}));function c(){return`usercard-${i()}`}function u(){return`${c()}:update`}Ai((()=>{Object.hasOwn(o(),u())||o(o()[u()]=l(),!0),a()(o())}));var d=En();tt((()=>ni(d,"id",c())));var h=de(d),g=de(h),f=de(g),p=de(ge(h,2)),v=de(p),m=de(v),b=de(m),y=de(ge(m,4));tt((()=>{ni(f,"src",r()),ni(f,"alt",n()),je(b,n()),je(y,s())})),Ee(t,d),te()}});function Vn(t){const e=t-1;return e*e*e+1}function qn(t,{from:e,to:i},r={}){var n=getComputedStyle(t),s=function(t){if("currentCSSZoom"in t)return t.currentCSSZoom;var e=t,i=1;for(;null!==e;)i*=+getComputedStyle(e).zoom,e=e.parentElement;return i}(t),o="none"===n.transform?"":n.transform,[a,l]=n.transformOrigin.split(" ").map(parseFloat),c=e.width/i.width,u=e.height/i.height,d=(e.left+c*a-(i.left+a))/s,h=(e.top+u*l-(i.top+l))/s,{delay:g=0,duration:f=t=>120*Math.sqrt(t),easing:p=Vn}=r;return{delay:g,duration:"function"==typeof f?f(Math.sqrt(d*d+h*h)):f,easing:p,css:(t,e)=>`transform: ${o} scale(${t+e*c}, ${t+e*u}) translate(${e*d}px, ${e*h}px);`}}E=!0;const Hn=t=>t;function Kn(t,{delay:e=0,duration:i=400,easing:r=Hn}={}){const n=+getComputedStyle(t).opacity;return{delay:e,duration:i,easing:r,css:t=>"opacity: "+t*n}}var Gn=Se('<option selected class="svelte-75ckfb"> </option>'),Jn=Se('<option selected class="svelte-75ckfb"> </option>'),Yn=Se('<div class="tags has-addons svelte-75ckfb"><span class="tag svelte-75ckfb"> </span> <span class="tag is-delete svelte-75ckfb"></span></div>'),Qn=Se('<div class="svelte-75ckfb"><!></div>'),Xn=Se('<span class="autocomplete-clear-button svelte-75ckfb"><!></span>'),Zn=Se('<div class="autocomplete-list-item svelte-75ckfb"><!></div>'),ts=Se('<div class="autocomplete-list-item-no-results svelte-75ckfb"> </div>'),es=Se("<!> <!> <!>",1),is=Se('<div class="autocomplete-list-item-loading svelte-75ckfb"><!></div>'),rs=Se('<div class="autocomplete-list-item-create svelte-75ckfb"><!></div>'),ns=Se('<div class="autocomplete-list-item-no-results svelte-75ckfb"><!></div>'),ss=Se('<div><select class="svelte-75ckfb"><!></select> <div class="input-container svelte-75ckfb"><!> <input> <!></div> <div><!></div></div>');function os(t,e){const i=Fi(e,["children","$$slots","$$events","$$legacy"]),r=Fi(i,["highlightFilter","items","searchFunction","labelFieldName","keywordsFieldName","valueFieldName","labelFunction","keywordsFunction","valueFunction","keywordsCleanFunction","textCleanFunction","beforeChange","onChange","onFocus","onBlur","onCreate","selectFirstIfEmpty","minCharactersToSearch","maxItemsToShowInList","multiple","create","ignoreAccents","matchAllKeywords","sortByMatchedKeywords","itemFilterFunction","itemSortFunction","lock","delay","localFiltering","localSorting","cleanUserText","lowercaseKeywords","closeOnBlur","orderableSelection","hideArrow","showClear","clearText","showLoadingIndicator","noResultsText","loadingText","moreItemsText","createText","placeholder","className","inputClassName","inputId","name","selectName","selectId","title","html5autocomplete","autocompleteOffValue","readonly","dropdownClassName","disabled","noInputStyles","required","debug","tabindex","selectedItem","value","highlightedItem","text"]);Zt(e,!1);const n=F(),o=F(),a=F(),l=F();let c=Ui(e,"items",28,(()=>[])),u=Ui(e,"searchFunction",8,!1),d=Ui(e,"labelFieldName",8,void 0),f=Ui(e,"keywordsFieldName",24,d),p=Ui(e,"valueFieldName",8,void 0),v=Ui(e,"labelFunction",8,(function(t){return null==t?"":d()?t[d()]:t})),b=Ui(e,"keywordsFunction",8,(function(t){return null==t?"":f()?t[f()]:v()(t)})),O=Ui(e,"valueFunction",8,(function(t,e=!1){return null==t?t:!T()||e?p()?t[p()]:t:t.map((t=>p()?t[p()]:t))})),$=Ui(e,"keywordsCleanFunction",8,(function(t){return t})),w=Ui(e,"textCleanFunction",8,(function(t){return t})),k=Ui(e,"beforeChange",8,(function(t,e){return!0})),_=Ui(e,"onChange",8,(function(t){})),I=Ui(e,"onFocus",8,(function(){})),A=Ui(e,"onBlur",8,(function(){})),S=Ui(e,"onCreate",8,(function(t){St()&&console.log("onCreate: "+t)})),C=Ui(e,"selectFirstIfEmpty",8,!1),L=Ui(e,"minCharactersToSearch",8,1),E=Ui(e,"maxItemsToShowInList",8,0),T=Ui(e,"multiple",8,!1),x=Ui(e,"create",8,!1),N=Ui(e,"ignoreAccents",8,!0),M=Ui(e,"matchAllKeywords",8,!0),U=Ui(e,"sortByMatchedKeywords",8,!1),P=Ui(e,"itemFilterFunction",8,void 0),B=Ui(e,"itemSortFunction",8,void 0),z=Ui(e,"lock",8,!1),V=Ui(e,"delay",8,0),q=Ui(e,"localFiltering",8,!0),H=Ui(e,"localSorting",8,!0),K=Ui(e,"cleanUserText",8,!0),Q=Ui(e,"lowercaseKeywords",8,!0),et=Ui(e,"closeOnBlur",8,!1),it=Ui(e,"orderableSelection",8,!1),rt=Ui(e,"hideArrow",8,!1),nt=Ui(e,"showClear",8,!1),st=Ui(e,"clearText",8,"&#10006;"),ot=Ui(e,"showLoadingIndicator",8,!1),at=Ui(e,"noResultsText",8,"No results found"),lt=Ui(e,"loadingText",8,"Loading results..."),ct=Ui(e,"moreItemsText",8,"items not shown"),ut=Ui(e,"createText",8,"Not found, add anyway?"),dt=Ui(e,"placeholder",8,void 0),ht=Ui(e,"className",8,void 0),gt=Ui(e,"inputClassName",8,void 0),ft=Ui(e,"inputId",8,void 0),pt=Ui(e,"name",8,void 0),mt=Ui(e,"selectName",8,void 0),bt=Ui(e,"selectId",8,void 0),yt=Ui(e,"title",8,void 0),Ot=Ui(e,"html5autocomplete",8,void 0),$t=Ui(e,"autocompleteOffValue",8,"off"),wt=Ui(e,"readonly",8,void 0),kt=Ui(e,"dropdownClassName",8,void 0),_t=Ui(e,"disabled",8,!1),It=Ui(e,"noInputStyles",8,!1),At=Ui(e,"required",8,null),St=Ui(e,"debug",8,!1),Ct=Ui(e,"tabindex",8,0),Lt=Ui(e,"selectedItem",28,(()=>T()?[]:void 0)),Et=Ui(e,"value",12,void 0),Tt=Ui(e,"highlightedItem",12,void 0);const xt="sautocomplete-"+Math.floor(1e3*Math.random());let Nt,Ft=F(),Rt=F(),Dt=F(),Pt=F(!1),jt=F(!1),Wt=F(-1),zt=Ui(e,"text",12,void 0),Vt=F(0),qt=F(),Ht=[],Kt=0,Yt=0,ie=F(!1);function re(t,e){let i=function(t,e){if("function"!=typeof t)return void console.error("Not a function: "+t+", argument: "+e);let i;try{i=t(e)}catch(i){console.warn("Error executing Autocomplete function on value: "+e+" function: "+t)}return i}(t,e);return null==i&&(i=""),"string"!=typeof i&&(i=i.toString()),i}function ne(t){return re(v(),t)}function oe(t){const e=re(b(),t);let i=re($(),e);return i=Q()?i.toLowerCase().trim():i,N()&&(i=Ve(i)),St()&&console.log("Extracted keywords: '"+i+"' from item: "+JSON.stringify(t)),i}function ae(){let t;St()&&(t="Autocomplete prepare list "+(ft()?`(id: ${ft()})`:""),console.time(t),console.log("Prepare items to search"),console.log("items: "+JSON.stringify(c()))),Array.isArray(c())||(console.warn("Autocomplete items / search function did not return array but",c()),c([]));const e=c()?c().length:0;Ht=new Array(e),e>0&&c().forEach(((t,e)=>{const i=function(t){return{keywords:q()?oe(t):[],label:ne(t),item:t}}(t);void 0===i&&console.log("Undefined item for: ",t),Ht[e]=i})),D(qt,Ht),St()&&(console.log(Ht.length+" items to search"),console.timeEnd(t))}function le(t,e){if(!t)return 0;const i=t.keywords;let r=0;return e.forEach((t=>{i.includes(t)&&(r+=1)})),r}async function ce(){let t;St()&&(t="Autocomplete search "+(ft()?`(id: ${ft()})`:""),console.time(t),console.log("Searching user entered text: '"+zt()+"'"));let e=function(t){if(null==t)return"";if(!K())return t;const e=t.replace(/[&/\\#,+()$~%.'":*?<>{}]/g," ").trim(),i=re(w(),e);return Q()?i.toLowerCase().trim():i.trim()}(zt());if(L()>1&&e.length<L()&&(e=""),D(Vt,e.length),St()&&console.log("Changed user entered text '"+zt()+"' into '"+e+"'"),""===e&&(u()?(c([]),St()&&console.log("User entered text is empty clear list of items")):(D(qt,Ht),St()&&console.log("User entered text is empty set the list of items to all items")),We()))St()&&console.timeEnd(t);else{if(u()){Kt+=1;const t=Kt;if(D(jt,!0),"AsyncGeneratorFunction"===u().constructor.name){for await(const i of u()(e,E())){if(t<Yt)return!1;t>Yt&&c([]),Yt=t,c([...c(),...i]),ue(e)}Yt<t&&(Yt=t,c([]),ue(e))}else{let i=await u()(e,E());if(t<Yt)return!1;Yt=t,c(i),ue(e)}D(jt,!1)}else ue(e);St()&&(console.timeEnd(t),console.log("Search found "+Gt(qt).length+" items"))}}function ue(t){ae();const e=(N()?Ve(t):t).split(/\s+/g).filter((t=>""!==t));let i;q()?(i=P()?Ht.filter((t=>P()(t.item,e))):Ht.filter((t=>function(t,e){const i=le(t,e);return M()?i>=e.length:i>0}(t,e))),H()&&(B()?i=i.sort(((t,i)=>B()(t.item,i.item,e))):U()&&(i=i.sort(((t,i)=>function(t,e,i){return le(e,i)-le(t,i)}(t,i,e)))))):i=Ht;const r=ze(e,"label");return D(qt,i.map(r)),We(),!0}function fe(t){let e;if(St()&&console.log("createdItem",t),void 0!==t){ae(),D(qt,Ht);let i=Re(t,Gt(qt));i<=0&&(c([t]),ae(),D(qt,Ht),i=0),i>=0&&(D(Wt,i),e=Gt(qt)[Gt(Wt)])}return e}function ve(t){if(St()&&console.log("selectListItem",t),void 0===t&&x()){const e=S()(zt());if(void 0!==e){if("function"==typeof e.then)return e.then((t=>{if(void 0!==t){const e=fe(t);void 0!==e&&ve(e)}})),!0;t=fe(e)}}if(void 0===t)return St()&&console.log("listItem is undefined. Can not select."),!1;if(Gt(l))return!0;const e=t.item;return k()(Lt(),e)&&(T()?Lt()?Lt().includes(e)?Lt(Lt().filter((t=>t!==e))):Lt([...Lt(),e]):Lt([e]):(Lt(void 0),Lt(e))),!0}function me(){St()&&console.log("selectItem",Gt(Wt));ve(Gt(qt)[Gt(Wt)])?(St()&&console.log("selectListItem true, closing"),Ue(),T()&&(zt(""),Gt(Ft).focus())):St()&&console.log("selectListItem false, not closing")}function be(){St()&&console.log("up"),De(),Gt(Wt)>0&&Xt(Wt,-1),Oe()}function ye(){St()&&console.log("down"),De(),Gt(Wt)<Gt(qt).length-1&&Xt(Wt),Oe()}function Oe(){St()&&console.log("highlight");const t=".selected";St()&&console.log("Seaching DOM element: "+t+" in "+Gt(Rt));const e=Gt(Rt)&&Gt(Rt).querySelector(t);e?"function"==typeof e.scrollIntoViewIfNeeded?(St()&&console.log("Scrolling selected item into view"),e.scrollIntoViewIfNeeded()):"function"===e.scrollIntoView?(St()&&console.log("Scrolling selected item into view"),e.scrollIntoView()):St()&&console.warn("Could not scroll selected item into view, scrollIntoViewIfNeeded not supported"):St()&&console.warn("Selected item not found to scroll into view")}function _e(t){St()&&console.log("onListItemClick"),ve(t)&&(Ue(),T()&&(zt(""),Gt(Ft).focus()))}function Ie(t){St()&&console.log("unselectItem",t),Lt(Lt().filter((e=>e!==t))),Gt(Ft).focus()}function Ae(){ce()&&(D(Wt,0),De())}function Se(t){St()&&console.log("onEsc"),t.stopPropagation(),Gt(Pt)&&(Gt(Ft).focus(),Ue())}function xe(t){St()&&console.log("onBackspace"),Ie(Lt()[Lt().length-1])}function Fe(){if(St()&&console.log("resetListToAllItemsAndOpen"),u()&&!Ht.length?ce():zt()||D(qt,Ht),De(),Lt()){St()&&console.log("Searching currently selected item: "+JSON.stringify(Lt()));const t=Re(Lt(),Gt(qt));t>=0&&(D(Wt,t),Oe())}}function Re(t,e){St()&&console.log("Finding index for item",t);let i=-1;for(let r=0;r<e.length;(r+=1)-1){const n=e[r];if(void 0!==n){if(St()&&console.log("Item "+r+": "+JSON.stringify(n)),t===n.item){i=r;break}}else St()&&console.log(`listItem ${r} is undefined. Skipping.`)}return St()&&(i>=0?console.log("Found index for item: "+i):console.warn("Not found index for item: "+t)),i}function De(){St()&&console.log("open"),Gt(l)||Pe()||(D(ie,!0),D(Pt,!0))}function Ue(){St()&&console.log("close"),D(Pt,!1),D(jt,!1),!zt()&&C()&&(D(Wt,0),me())}function Pe(){return L()>0&&Gt(Vt)<L()&&(u()||Gt(Vt)>0)}function We(){return!!Pe()&&(Ue(),!0)}function Be(){St()&&console.log("clear"),zt(""),Lt(T()?[]:void 0),setTimeout((()=>{Gt(Ft).focus()}))}function ze(t,e){return i=>{let r=i[e];const n=Object.assign({highlighted:void 0},i);n.highlighted=r;const s=r.toLowerCase(),o=N()?Ve(s):s;if(t&&t.length){const e=[];for(let i=0;i<t.length;(i+=1)-1){let r=t[i];N()&&(r=Ve(r));const n=r.length;let s=0;do{if(s=o.indexOf(r,s),s>=0){let t=s+n;e.push([s,t]),s=t}}while(-1!==s)}if(e.length>0){const t=new Set;for(let i=0;i<e.length;(i+=1)-1){const r=e[i],n=r[0],o=r[1],a=s.substring(n,o);t.add(a)}for(let e of t){if("b"===e)continue;const t=new RegExp("("+e+")","ig"),i=n.highlighted.replace(t,"<b>$1</b>");n.highlighted=i}}}return n}}function Ve(t){return t.normalize("NFD").replace(/[\u0300-\u036f]/g,"")}Ci((()=>{Gt(ie)&&function(){const{height:t}=window.visualViewport,{bottom:e,height:i}=Gt(Dt).getBoundingClientRect(),{height:r}=Gt(Rt).getBoundingClientRect();R(Rt,Gt(Rt).style.top=e+r>t?`-${i+r}px`:"0px")}(),D(ie,!1)}));let Ke=F(!1);function Ye(t,e){it()&&(t.preventDefault(),D(Ke,e))}function Qe(t,e){if(it()){t.preventDefault(),D(Ke,!1);let i=parseInt(t.dataTransfer.getData("source"));i!=e&&function(t,e){let i=[...Lt()];t<e?(i.splice(e+1,0,i[t]),i.splice(t,1)):(i.splice(e,0,i[t]),i.splice(t+1,1));Lt(i)}(i,e)}}var Xe;X((()=>(ee(c()),ee(u()))),(()=>{c(),u()||ae()})),X((()=>ee(Lt())),(()=>{Lt(),Et(O()(Lt())),Lt()&&!T()&&zt(ne(Lt())),D(qt,Ht),_()(Lt())})),X((()=>(Gt(qt),Gt(Wt))),(()=>{Tt(Gt(qt)&&Gt(Wt)&&Gt(Wt)>=0&&Gt(Wt)<Gt(qt).length?Gt(qt)[Gt(Wt)].item:null)})),X((()=>(Gt(Pt),ee(c()),Gt(Vt))),(()=>{D(n,Gt(Pt)&&(c()&&c().length>0||Gt(Vt)>0))})),X((()=>(ee(T()),ee(Lt()))),(()=>{D(o,T()&&Lt()&&Lt().length>0||!T()&&Lt())})),X((()=>(ee(nt()),ee(z()),ee(T()),Gt(o))),(()=>{D(a,nt()||(z()||T())&&Gt(o))})),X((()=>(ee(z()),Gt(o))),(()=>{D(l,z()&&Gt(o))})),Xe=Mt,Z((()=>{if(Gt(Xe.l.r2)){for(var t of Xe.l.r1){var e=t.effect;e.f&m&&Qt(e,y),Ut(e)&&Bt(e),t.ran=!1}Xe.l.r2.v=!1}})),function(t=!1){const e=Mt,i=e.l.u;if(!i)return;let r=()=>ee(e.s);if(t){let t=0,i={};const n=j((()=>{let r=!1;const n=e.s;for(const t in n)n[t]!==i[t]&&(i[t]=n[t],r=!0);return r&&t++,t}));r=()=>Gt(n)}i.b.length&&Y((()=>{_i(e,r),g(i.b)})),J((()=>{const t=Jt((()=>i.m.map(h)));return()=>{for(const e of t)"function"==typeof e&&e()}})),i.a.length&&J((()=>{_i(e,r),g(i.a)}))}();var Ze=ss();we("click",se,(function(t){St()&&console.log("onDocumentClick"),t.composedPath().some((t=>t.classList&&t.classList.contains(xt)))?(St()&&console.log("onDocumentClick inside"),Oe()):(St()&&console.log("onDocumentClick outside"),Ue())})),we("scroll",se,(()=>D(ie,!0)));var ii=de(Ze);qe(de(ii),(()=>!T()&&Gt(o)),(t=>{var e=Gn(),i={},r=de(e);tt((()=>je(r,ne(Lt())))),tt((()=>{i!==(i=O()(Lt(),!0))&&(e.value=null==(e.__value=O()(Lt(),!0))?"":O()(Lt(),!0))})),Ee(t,e)}),(t=>{var e=Le();qe(he(e),(()=>T()&&Gt(o)),(t=>{var e=Le();Je(he(e),1,Lt,Ge,((t,e)=>{var i=Jn(),r={},n=de(i);tt((()=>je(n,ne(Gt(e))))),tt((()=>{r!==(r=O()(Gt(e),!0))&&(i.value=null==(i.__value=O()(Gt(e),!0))?"":O()(Gt(e),!0))})),Ee(t,i)})),Ee(t,e)}),null,!0),Ee(t,e)}));var ri=ge(ii,2),si=de(ri);qe(si,(()=>T()&&Gt(o)),(t=>{var i=Le();Je(he(i),11,Lt,(t=>O()(t,!0)),((t,i,r)=>{var n=Qn();ni(n,"draggable",!0),ei(de(n),e,"tag",{get label(){return ne(Gt(i))},get item(){return Gt(i)},unselectItem:Ie},(t=>{var e=Yn(),r=de(e),n=de(r);tt((()=>je(n,ne(Gt(i)))));var s=ge(r,2),o=j((()=>Ie(Gt(i))));we("click",s,ki((function(...t){Gt(o)?.apply(this,t)}))),we("keypress",s,ki((t=>{"Enter"==t.key&&Ie(Gt(i))}))),Ee(t,e)})),tt((()=>li(n,"is-active",Gt(Ke)===Gt(r)))),function(t,e,i){var r,n,s,o=He,a=null;o.a??={element:t,measure(){r=this.element.getBoundingClientRect()},apply(){if(s?.abort(),n=this.element.getBoundingClientRect(),r.left!==n.left||r.right!==n.right||r.top!==n.top||r.bottom!==n.bottom){const t=e()(this.element,{from:r,to:n},i?.());s=vi(this.element,t,void 0,1,(()=>{s?.abort(),s=void 0}))}},fix(){if(!t.getAnimations().length){var{position:e,width:i,height:n}=getComputedStyle(t);if("absolute"!==e&&"fixed"!==e){var s=t.style;a={position:s.position,width:s.width,height:s.height,transform:s.transform},s.position="absolute",s.width=i,s.height=n;var o=t.getBoundingClientRect();if(r.left!==o.left||r.top!==o.top){var l=`translate(${r.left-o.left}px, ${r.top-o.top}px)`;s.transform=s.transform?`${s.transform} ${l}`:l}}}},unfix(){if(a){var e=t.style;e.position=a.position,e.width=a.width,e.height=a.height,e.transform=a.transform}}},o.a.element=t}(n,(()=>qn),(()=>({duration:200}))),pi(3,n,(()=>Kn),(()=>({duration:200}))),we("dragstart",n,(t=>function(t,e){it()&&t.dataTransfer.setData("source",e)}(t,Gt(r)))),we("dragover",n,(t=>Ye(t,Gt(r)))),we("dragleave",n,(t=>(Gt(r),void(it()&&D(Ke,!1))))),we("drop",n,(t=>Qe(t,Gt(r)))),Ee(t,n)})),Ee(t,i)}));var ci=ge(si,2);let ui;wi(ci,(t=>D(Ft,t)),(()=>Gt(Ft))),qe(ge(ci,2),(()=>Gt(a)),(t=>{var e=Xn();ti(de(e),st),we("click",e,Be),we("keypress",e,(t=>{"Enter"==t.key&&Be()})),Ee(t,e)})),wi(ri,(t=>D(Dt,t)),(()=>Gt(Dt)));var di=ge(ri,2);return qe(de(di),(()=>Gt(qt)&&Gt(qt).length>0),(t=>{var i=es(),r=he(i);ei(r,e,"dropdown-header",{get nbItems(){return Gt(qt).length},get maxItemsToShowInList(){return E()}},null);var n=ge(r,2);Je(n,1,(()=>Gt(qt)),Ge,((t,i,r)=>{var n=Le();qe(he(n),(()=>Gt(i)&&(E()<=0||r<E())),(t=>{var n=Zn();const s=W((()=>function(t){return!!Lt()&&(T()?Lt().includes(t):t===Lt())}(Gt(i).item)));tt((()=>li(n,"confirmed",Gt(s)))),ei(de(n),e,"item",{get item(){return Gt(i).item},get label(){return Gt(i).highlighted?Gt(i).highlighted:Gt(i).label}},(t=>{var e=Le();qe(he(e),(()=>Gt(i).highlighted),(t=>{var e=Le();ti(he(e),(()=>Gt(i).highlighted)),Ee(t,e)}),(t=>{var e=Le();ti(he(e),(()=>Gt(i).label)),Ee(t,e)})),Ee(t,e)})),tt((()=>li(n,"selected",r===Gt(Wt)))),we("click",n,(()=>_e(Gt(i)))),we("keypress",n,(t=>{"Enter"==t.key&&_e(Gt(i))})),we("pointerenter",n,(()=>{D(Wt,r)})),Ee(t,n)})),Ee(t,n)})),ei(ge(n,2),e,"dropdown-footer",{get nbItems(){return Gt(qt).length},get maxItemsToShowInList(){return E()}},(t=>{var e=Le();qe(he(e),(()=>E()>0&&Gt(qt).length>E()),(t=>{var e=Le();qe(he(e),ct,(t=>{var e=ts(),i=de(e);tt((()=>je(i,`...${Gt(qt).length-E()??""}\n              ${ct()??""}`))),Ee(t,e)})),Ee(t,e)})),Ee(t,e)})),Ee(t,i)}),(t=>{var i=Le();qe(he(i),(()=>Gt(jt)&&lt()),(t=>{var i=is();ei(de(i),e,"loading",{get loadingText(){return lt()}},(t=>{var e=Ce();tt((()=>je(e,lt()))),Ee(t,e)})),Ee(t,i)}),(t=>{var i=Le();qe(he(i),x,(t=>{var i=rs();ei(de(i),e,"create",{get createText(){return ut()}},(t=>{var e=Ce();tt((()=>je(e,ut()))),Ee(t,e)})),we("click",i,me),we("keypress",i,(t=>{"Enter"==t.key&&me()})),Ee(t,i)}),(t=>{var i=Le();qe(he(i),at,(t=>{var i=ns();ei(de(i),e,"no-results",{get noResultsText(){return at()}},(t=>{var e=Ce();tt((()=>je(e,at()))),Ee(t,e)})),Ee(t,i)}),null,!0),Ee(t,i)}),!0),Ee(t,i)}),!0),Ee(t,i)})),wi(di,(t=>D(Rt,t)),(()=>Gt(Rt))),tt((()=>{ai(Ze,`${(ht()?ht():"")??""} autocomplete select is-fullwidth ${xt??""} svelte-75ckfb`),li(Ze,"hide-arrow",rt()||!c().length),li(Ze,"is-multiple",T()),li(Ze,"show-clear",Gt(a)),li(Ze,"is-loading",ot()&&Gt(jt)),ni(ii,"name",mt()),ni(ii,"id",bt()),ii.multiple=T(),ui=function(t,e,i,r,n=!1,s=!1){var o=e||{},a="OPTION"===t.tagName;for(var l in e)l in i||(i[l]=null);i.class=i.class?i.class+" "+r:r;var c=oi(t),u=t.__attributes??={},d=[];for(const v in i){let m=i[v];if(a&&"value"===v&&null==m)t.value=t.__value="",o[v]=m;else{var h=o[v];if(m!==h){o[v]=m;var g=v[0]+v[1];if("$$"!==g){if("on"===g){const b={},y="$$"+v;let O=v.slice(2);var f=Ne(O);if(Te(O)&&(O=O.slice(0,-7),b.capture=!0),!f&&h){if(null!=m)continue;t.removeEventListener(O,o[y],b),o[y]=null}if(null!=m)if(f)t[`__${O}`]=m,ke([O]);else{function $(t){o[v].call(this,t)}e?o[y]=$e(O,t,$,b):d.push([v,m,()=>o[y]=$e(O,t,$,b)])}}else if("style"===v&&null!=m)t.style.cssText=m+"";else if("autofocus"===v)pe(t,Boolean(m));else if("__value"===v||"value"===v&&null!=m)t.value=t[v]=t.__value=m;else{var p=v;n||(p=Me(p)),null!=m||s?c.includes(p)&&(s||"string"!=typeof m)?t[p]=m:"function"!=typeof m&&ni(t,p,m):(u[v]=null,t.removeAttribute(v))}"style"===v&&"__styles"in t&&(t.__styles={})}}}}return e||vt((()=>{if(t.isConnected)for(const[t,e,i]of d)o[t]===e&&i()})),o}(ci,ui,{type:"text",class:`${(gt()?gt():"")??""} ${(It()?"":"input autocomplete-input")??""}`,id:ft()?ft():"",autocomplete:Ot()?"on":$t(),placeholder:dt(),name:pt(),disabled:_t(),required:At(),title:yt(),readonly:wt()||Gt(l),tabindex:Ct(),...r},"svelte-75ckfb"),ai(di,`${(kt()?kt():"")??""} autocomplete-list ${(Gt(n)?"":"hidden")??""}\n    is-fullwidth svelte-75ckfb`)})),mi(ci,zt),we("input",ci,(function(t){St()&&console.log("onInput"),zt(t.target.value),Nt&&clearTimeout(Nt),V()?Nt=setTimeout(Ae,V()):Ae()})),we("focus",ci,(function(){St()&&console.log("onFocus"),I()(),Fe()})),we("blur",ci,(function(){St()&&console.log("onBlur"),et()&&Ue(),A()()})),we("keydown",ci,(function(t){St()&&console.log("onKeyDown");let e=t.key;"Tab"===e&&t.shiftKey&&(e="ShiftTab");const i={Tab:Gt(Pt)?Ue:null,ShiftTab:Gt(Pt)?Ue:null,ArrowDown:ye.bind(this),ArrowUp:be.bind(this),Escape:Se.bind(this),Backspace:T()&&Gt(o)&&!zt()?xe.bind(this):null}[e];"function"==typeof i&&i(t)})),we("click",ci,(function(){St()&&console.log("onInputClick"),Fe()})),we("keypress",ci,(function(t){St()&&console.log("onKeyPress"),"Enter"===t.key&&function(t){Gt(Pt)&&(t.preventDefault(),me())}(t)})),we("dragover",ci,(t=>Ye(t,Lt().length-1))),we("drop",ci,(t=>Qe(t,Lt().length-1))),Ee(t,Ze),function(t,e,i){var r=s(t,e);r&&r.set&&(t[e]=i,G((()=>{t[e]=null})))}(e,"highlightFilter",ze),te({highlightFilter:ze})}var as=Se("<p> </p>"),ls=Se('<div class="control"><!></div> <!>',1);function cs(t,e,i,r,n){let s={field:e(),value:"checkbox"===t.currentTarget.type?t.currentTarget.checked:i()};return r(!0),n("change",s),!0}function us(t,e,i,r,n){let s={field:e(),value:"checkbox"===t.currentTarget.type?t.currentTarget.checked:i()};return r(!0),n("change",s),!0}var ds=Se('<input type="checkbox"> ',1),hs=Se('<div><label class="checkbox"><!></label></div> <!>',1);function gs(t,e,i,r,n){let s=parseInt(t.currentTarget.dataset.id),o=[...e()];o.find((t=>t.id==s)).value=t.currentTarget.checked;let a={id:s,field:i(),value:o};return r(!0),n("change",a),!0}function fs(t,e,i,r,n){let s=parseInt(t.currentTarget.dataset.id),o=[...e()];o.find((t=>t.id===s)).value=t.currentTarget.checked;let a={id:s,field:i(),value:o};return r(!0),n("change",a),!0}ke(["change","input"]);var ps=Se('<label class="checkbox pr-2"><input type="checkbox"> </label>'),vs=Se('<div class="control"></div> <!>',1);function ms(t,e,i,r){let n={field:e(),value:t.currentTarget.value};return i(!0),r("change",n),!0}function bs(t,e,i,r){let n={field:e(),value:t.currentTarget.value};return i(!0),r("change",n),!0}ke(["change","input"]);var ys=Se('<span class="icon is-small is-left"><i></i></span>'),Os=Se('<i class="fas fa-check"></i>'),$s=Se('<i class="fas fa-exclamation-triangle"></i>'),ws=Se('<span class="icon is-small is-right"><!></span>'),ks=Se('<div><input type="color"> <!> <!></div> <!>',1);ke(["change","input"]);var _s=Se("<div><!></div>");function Is(t,e,i,r){let n={field:e(),value:t.currentTarget.value};return i(!0),r("change",n),!0}function As(t,e,i,r){let n={field:e(),value:t.currentTarget.value};return i(!0),r("change",n),!0}var Ss=Se("<p><time> </time></p>"),Cs=Se('<span class="icon is-small is-left"><i></i></span>'),Ls=Se('<i class="fas fa-check"></i>'),Es=Se('<i class="fas fa-exclamation-triangle"></i>'),Ts=Se('<span class="icon is-small is-right"><!></span>'),xs=Se('<input type="date"> <!> <!>',1),Ns=Se("<div><!></div> <!>",1);ke(["change","input"]);var Fs=Se("<p> </p>"),Ms=Se('<span class="icon is-small is-left"><i></i></span>'),Rs=Se('<i class="fas fa-check"></i>'),Ds=Se('<i class="fas fa-exclamation-triangle"></i>'),Us=Se('<span class="icon is-small is-right"><!></span>'),Ps=Se('<input type="datetime-local"> <!> <!>',1),js=Se("<div><!></div> <!>",1);function Ws(t,e,i,r){let n={field:e(),value:t.currentTarget.value};return i(!0),r("change",n),!0}function Bs(t,e,i,r){let n={field:e(),value:t.currentTarget.value};return i(!0),r("change",n),!0}ke(["change","input"]);var zs=Se("<p> </p>"),Vs=Se('<span class="icon is-small is-left"><i></i></span>'),qs=Se('<i class="fas fa-check"></i>'),Hs=Se('<i class="fas fa-exclamation-triangle"></i>'),Ks=Se('<span class="icon is-small is-right"><!></span>'),Gs=Se('<input type="email"> <!> <!>',1),Js=Se("<div><!></div> <!>",1);ke(["change","input"]);var Ys=Se('<input type="hidden">');var Qs=Se("<p> </p>"),Xs=Se('<span class="icon is-small is-left"><i></i></span>'),Zs=Se('<i class="fas fa-check"></i>'),to=Se('<i class="fas fa-exclamation-triangle"></i>'),eo=Se('<span class="icon is-small is-right"><!></span>'),io=Se("<textarea></textarea> <!> <!>",1),ro=Se("<div><!></div> <!>",1);function no(t,e){Zt(e,!0);const i=xi();let r,n,s=Si(),o=Ui(e,"inputStarted",15,!1),a=Ui(e,"value",15,""),l=Ui(e,"placeholder",3,""),c=Ui(e,"fieldname",3,"textarea"),u=Ui(e,"icon",3,!1),d=Ui(e,"rows",3,10),h=Ui(e,"required",3,!0),g=Ui(e,"readonly",3,!1),f=Ui(e,"disabled",3,!1),p=Ui(e,"valid",3,!0),v=Ui(e,"validated",3,!1),m=Ui(e,"errors",3,!1),b=Ui(e,"formErrors",3,!1),y=Ui(e,"formLevelError",3,!1),O=j((()=>(u()?" has-icons-left ":"")+" has-icons-right "));Pi((()=>{r=[].concat(m()?m():[],b()?b():[])})),Pi((()=>{n=!(v()&&p())&&o()}));let $,w=j((()=>!1===p()||y()));function k(t){let e={field:c(),value:"checkbox"===t.target.type?t.target.checked:t.target.value};return o(!0),s("change",e),!0}Pi((()=>{$=!0!==p()&&o()?Jr.CLASS_ERR:Jr.CLASS_OK}));var _=ro(),I=he(_);qe(de(I),g,(t=>{var e=Qs(),i=de(e);tt((()=>je(i,a()))),Ee(t,e)}),(t=>{var e=io(),r=he(e);ai(r,`textarea ${$??""}`);var n=ge(r,2);qe(n,u,(t=>{var e=Xs(),i=de(e);tt((()=>ai(i,`fas fa-${u()??""}`))),Ee(t,e)})),qe(ge(n,2),(()=>!0===v()),(t=>{var e=eo();qe(de(e),(()=>!0===p()),(t=>{Ee(t,Zs())}),(t=>{var e=Le();qe(he(e),(()=>!1===p()),(t=>{Ee(t,to())}),null,!0),Ee(t,e)})),Ee(t,e)})),tt((()=>{ni(r,"id",`form-field-textarea-${c()??""}`),ni(r,"invalid",Gt(w)),r.disabled=f(),r.required=h(),r.readOnly=g(),ni(r,"name",c()),ni(r,"placeholder",Ti(tr,"$LOCALE",i)[l()]),ni(r,"rows",d()),ni(r,"aria-controls",`input-field-helper-${c()??""}`),ni(r,"aria-describedby",`input-field-helper-${c()??""}`)})),we("blur",r,k),mi(r,a),Ee(t,e)})),Gr(ge(I,2),{get errors(){return r},set errors(t){r=t},get show(){return n},set show(t){n=t},get classes(){return $},set classes(t){$=t},get id(){return`input-field-helper-${c()??""}`}}),tt((()=>ai(I,`control ${Gt(O)??""}`))),Ee(t,_),te()}var so=Se('<label class="label"> </label>');function oo(t,e){Zt(e,!0);const i=xi();let r=Ui(e,"label",3,"label");var n=so(),s=de(n);tt((()=>{ni(n,"for",e.id),je(s,Ti(tr,"$LOCALE",i)[r()])})),Ee(t,n),te()}var ao=new WeakMap;class lo{constructor(t){fr(this,ao,{}),t instanceof lo&&this.import(t.getContent())}add(t,e,i="replace"){this.contains(t)?"replace"===i?gr(ao,this)[t]=e:"add"===i&&(gr(ao,this)[t]=Object.assign(gr(ao,this)[t],e)):gr(ao,this)[t]=e}get(t){return gr(ao,this)[t]}contains(t){return Object.hasOwn(gr(ao,this),t)}import(t,e="replace"){for(let i in t)this.add(i,t[i],e)}isEmpty(){return 0===Object.keys(gr(ao,this)).length}getContent(){return{...gr(ao,this)}}}const co=new lo,uo=new lo,ho=new lo;function go(t){Ln(t,{title:"not-node:empty_list_placeholder",size:4,align:"center"})}var fo=Se('<span class="icon"><i></i></span>'),po=Se("<span> </span>"),vo=Se('<span class="icon"><i></i></span>'),mo=Se("<!> <!> <!> <!>",1),bo=Se(" <!>",1),yo=Se("<a><!></a>");function Oo(t,e){Zt(e,!0);const i=xi(),r=()=>Ti(tr,"$LOCALE",i);let n=Ui(e,"title",3,""),s=Ui(e,"url",3,""),o=Ui(e,"target",3,"_blank"),a=Ui(e,"light",3,!1),l=Ui(e,"loading",3,!1),c=Ui(e,"raised",3,!1),u=Ui(e,"outlined",3,!1),h=Ui(e,"inverted",3,!1),g=Ui(e,"rounded",3,!1),f=Ui(e,"button",3,!0),p=Ui(e,"state",3,""),v=Ui(e,"type",3,""),m=Ui(e,"color",3,""),b=Ui(e,"size",3,""),y=Ui(e,"classes",15,""),O=Ui(e,"icon",3,!1),$=Ui(e,"iconSide",3,"right"),w=Ui(e,"action",3,(()=>!0));Pi((()=>{y((f()?"button ":"")+(p()&&p().length>0?` is-${p()} `:"")+(a()?" is-light ":"")+(v()&&v().length>0?` is-${v()} `:"")+(b()&&b().length>0?` is-${b()} `:""))}));var k=yo();k.__click=function(...t){w()?.apply(this,t)},qe(de(k),O,(t=>{var i=mo(),s=he(i);qe(s,(()=>"left"===$()),(t=>{var e=fo(),i=de(e);tt((()=>ai(i,`fas fa-${O()??""} ${(b()?`is-${b()}`:"")??""}`))),Ee(t,e)}));var o=ge(s,2);qe(o,n,(t=>{var e=po(),i=de(e);tt((()=>je(i,r()[n()]))),Ee(t,e)}));var a=ge(o,2);ii(a,(()=>e.children??d)),qe(ge(a,2),(()=>"right"===$()),(t=>{var e=vo(),i=de(e);tt((()=>ai(i,`fas fa-${O()??""} ${(b()?`is-${b()}`:"")??""}`))),Ee(t,e)})),Ee(t,i)}),(t=>{var i=bo(),s=he(i);ii(ge(s),(()=>e.children??d)),tt((()=>je(s,`${r()[n()]??""} `))),Ee(t,i)})),tt((()=>{ni(k,"target",o()),ni(k,"href",s()),ni(k,"download",e.download),ni(k,"rel",e.rel),ai(k,`${y()??""} ${(p()?`is-${p()}`:"")??""} ${(h()?"is-inverted":"")??""} ${(u()?"is-outlined":"")??""} ${(c()?"is-raised":"")??""} ${(g()?"is-rounded":"")??""} ${(a()?"is-light":"")??""} ${(l()?"is-loading":"")??""} ${(m()?`is-${m()}`:"")??""} ${(v()?`is-${v()}`:"")??""} ${(b()?`is-${b()}`:"")??""}`)})),Ee(t,k),te()}ke(["click"]);var $o=Se('<div><p class="control"></p></div>'),wo=Se("<div></div>");function ko(t,e){let i=Ui(e,"values",19,(()=>[])),r=Ui(e,"classes",3,""),n=Ui(e,"centered",3,!1),s=Ui(e,"right",3,!1),o=Ui(e,"joined",3,!0);var a=Le();qe(he(a),o,(t=>{var e=$o();Je(de(e),21,i,(t=>t.id),((t,e)=>{Oo(t,Ri((()=>Gt(e))))})),tt((()=>ai(e,`field has-addons ${(n()?"is-centered":"")??""} ${(s()?"is-right":"")??""} ${r()??""}`))),Ee(t,e)}),(t=>{var e=wo();Je(e,21,i,(t=>t.id),((t,e)=>{Oo(t,Ri((()=>Gt(e))))})),tt((()=>ai(e,`buttons ${(n()?"is-centered":"")??""} ${(s()?"is-right":"")??""} ${r()??""}`))),Ee(t,e)})),Ee(t,a)}var _o=(t,e)=>{t&&"Enter"==t.key&&e()},Io=Se('<figure class="image is-64x64"><img class="is-rounded"></figure>'),Ao=Se('<div role="button" tabindex="0" class="list-item-image"><!></div>'),So=Se('<div class="list-item-title" role="button" tabindex="0"><!></div>'),Co=Se('<div role="button" tabindex="0" class="list-item-description"><!></div>'),Lo=Se('<div class="list-item-controls"><!> <!></div>'),Eo=Se('<div role="button" tabindex="0"><!> <div role="button" tabindex="0" class="list-item-content"><!> <!></div> <!></div>');function To(t,e){Zt(e,!0);const i=Si();let r=Ui(e,"actions",19,(()=>[])),n=Ui(e,"links",19,(()=>[])),s=Ui(e,"listActions",19,(()=>[])),o=Ui(e,"listLinks",19,(()=>[])),a=Ui(e,"classes",3,""),l=Ui(e,"commonClasses",3,""),c=Ui(e,"image",3,""),u=Ui(e,"index",19,(()=>-1)),d=Ui(e,"first",3,!1),h=Ui(e,"last",3,!1),g=Ui(e,"titleComponent",3,Ln),f=Ui(e,"titleComponentProps",19,(()=>({size:6}))),p=Ui(e,"descriptionComponentProps",19,(()=>({}))),v=Ui(e,"imageComponentProps",19,(()=>({})));function m(){i("click",e.value)}let b=x(re([]));Pi((()=>{D(b,re([...r(),...s()].map((t=>({...t,action:()=>t.action(e.value)})))))}));let y=x(re([]));Pi((()=>{D(y,re([...n(),...o()]))}));var O=Eo();O.__click=m,O.__keyup=[_o,m];var $=de(O);qe($,c,(t=>{var r=Ao(),n=j((()=>ki((t=>{t&&"Enter"==t.key&&(m(),i("clickImage",e.value))}))));r.__keyup=function(...t){Gt(n)?.apply(this,t)};var s=j((()=>ki((()=>{m(),i("clickImage",e.value)}))));r.__click=function(...t){Gt(s)?.apply(this,t)},qe(de(r),(()=>e.imageComponent),(t=>{var i=Le();qe(he(i),(()=>"string"==typeof c()),(t=>{var i=Le();const r=j((()=>e.imageComponent));ri(he(i),(()=>Gt(r)),((t,e)=>{e(t,Ri({get value(){return c()}},v))})),Ee(t,i)}),(t=>{var i=Le();const r=j((()=>e.imageComponent));ri(he(i),(()=>Gt(r)),((t,e)=>{e(t,Ri(c,v))})),Ee(t,i)})),Ee(t,i)}),(t=>{var i=Io(),r=de(i);tt((()=>{ni(r,"src",c()),ni(r,"alt",e.title)})),Ee(t,i)})),Ee(t,r)}));var w=ge($,2),k=j((()=>ki((()=>{m(),i("clickContent",e.value)}))));w.__click=function(...t){Gt(k)?.apply(this,t)};var _=j((()=>ki((t=>{t&&"Enter"==t.key&&(m(),i("clickContent",e.value))}))));w.__keyup=function(...t){Gt(_)?.apply(this,t)};var I=de(w);qe(I,(()=>e.title),(t=>{var r=So(),n=j((()=>ki((t=>{t&&"Enter"==t.key&&(m(),i("clickTitle",e.value))}))));r.__keyup=function(...t){Gt(n)?.apply(this,t)};var s=j((()=>ki((()=>{m(),i("clickTitle",e.value)}))));r.__click=function(...t){Gt(s)?.apply(this,t)},qe(de(r),g,(t=>{var i=Le();qe(he(i),(()=>"string"==typeof e.title),(t=>{var i=Le();const r=j(g);ri(he(i),(()=>Gt(r)),((t,i)=>{i(t,Ri({get title(){return e.title}},f,{$$events:{change(t){Ii.call(this,e,t)}}}))})),Ee(t,i)}),(t=>{var i=Le();const r=j(g);ri(he(i),(()=>Gt(r)),((t,i)=>{i(t,Ri((()=>e.title),f,{$$events:{change(t){Ii.call(this,e,t)}}}))})),Ee(t,i)})),Ee(t,i)}),(t=>{var i=Ce();tt((()=>je(i,e.title))),Ee(t,i)})),Ee(t,r)})),qe(ge(I,2),(()=>e.description),(t=>{var r=Co(),n=j((()=>ki((t=>{t&&"Enter"==t.key&&(m(),i("clickDescription",e.value))}))));r.__keyup=function(...t){Gt(n)?.apply(this,t)};var s=j((()=>ki((()=>{m(),i("clickDescription",e.value)}))));r.__click=function(...t){Gt(s)?.apply(this,t)},qe(de(r),(()=>e.descriptionComponent),(t=>{var i=Le();qe(he(i),(()=>"string"==typeof e.description),(t=>{var i=Le();const r=j((()=>e.descriptionComponent));ri(he(i),(()=>Gt(r)),((t,i)=>{i(t,Ri({get value(){return e.description}},p,{$$events:{change(t){Ii.call(this,e,t)},click(t){Ii.call(this,e,t)}}}))})),Ee(t,i)}),(t=>{var i=Le();const r=j((()=>e.descriptionComponent));ri(he(i),(()=>Gt(r)),((t,i)=>{i(t,Ri((()=>e.description),p,{$$events:{change(t){Ii.call(this,e,t)},click(t){Ii.call(this,e,t)}}}))})),Ee(t,i)})),Ee(t,i)}),(t=>{var i=Ce();tt((()=>je(i,e.description))),Ee(t,i)})),Ee(t,r)})),qe(ge(w,2),(()=>Gt(b)&&Gt(b).length||Gt(y)&&Gt(y).length),(t=>{var e=Lo(),i=de(e);qe(i,(()=>Gt(b)&&Gt(b).length),(t=>{fn(t,{get values(){return Gt(b)},right:!0})})),qe(ge(i,2),(()=>Gt(y)&&Gt(y).length),(t=>{ko(t,{get values(){return Gt(y)},right:!0})})),Ee(t,e)})),tt((()=>ai(O,`list-item ${a()??""} ${l()??""} ${(h()?"list-item-last":"")??""} ${(d()?"list-item-first":"")??""}  ${`list-item-at-${u()}`??""} ${"list-item-"+(u()%2?"odd":"even")??""}`))),Ee(t,O),te()}ke(["click","keyup"]);var xo=Se("<div><!></div>");function No(t,e){Zt(e,!0);let i=Ui(e,"classes",3,""),r=Ui(e,"items",31,(()=>re([]))),n=Ui(e,"actions",19,(()=>[])),s=Ui(e,"links",19,(()=>[])),o=Ui(e,"actionsVisible",3,!1),a=Ui(e,"itemsHoverable",3,!1),l=Ui(e,"overflowEllipsis",3,!1),c=Ui(e,"hiddenImages",3,!1),u=Ui(e,"itemClasses",3,""),d=Ui(e,"idFieldName",3,"id"),h=Ui(e,"emptyListPlaceholderComponent",3,go),g=Ui(e,"emptyListPlaceholderComponentProps",19,(()=>({}))),f=Ui(e,"listItemComponent",3,To),p=Ui(e,"listItemComponentProps",19,(()=>({}))),v=Ui(e,"titleComponent",3,Ln),m=Ui(e,"titleComponentProps",19,(()=>({size:6}))),b=Ui(e,"descriptionComponentProps",19,(()=>({}))),y=Ui(e,"imageComponentProps",19,(()=>({})));var O=Le();qe(he(O),(()=>r().length),(t=>{var h=xo();!function(t,e){Zt(e,!0);let i=Ui(e,"idFieldName",3,"id"),r=Ui(e,"items",23,(()=>[])),n=Ui(e,"actions",19,(()=>[])),s=Ui(e,"links",19,(()=>[])),o=Ui(e,"itemClasses",3,""),a=Ui(e,"listItemComponent",3,To),l=Ui(e,"listItemComponentProps",19,(()=>({}))),c=Ui(e,"titleComponent",3,Ln),u=Ui(e,"titleComponentProps",19,(()=>({size:6}))),d=Ui(e,"descriptionComponentProps",19,(()=>({}))),h=Ui(e,"imageComponentProps",19,(()=>({})));var g=Le();qe(he(g),r,(t=>{var g=Le();const f=j(a);Je(he(g),19,r,(t=>t[i()]),((t,i,a)=>{var g=Le(),p=he(g),v=j((()=>0===Gt(a))),m=j((()=>Gt(a)===r().length-1));ri(p,(()=>Gt(f)),((t,g)=>{g(t,Ri(l,{get titleComponent(){return c()},get titleComponentProps(){return u()},get descriptionComponent(){return e.descriptionComponent},get descriptionComponentProps(){return d()},get imageComponent(){return e.imageComponent},get imageComponentProps(){return h()}},(()=>Gt(i)),{get listActions(){return n()},get listLinks(){return s()},get commonClasses(){return o()},get value(){return r()[Gt(a)]},set value(t){r()[Gt(a)]=t},get index(){return Gt(a)},get first(){return Gt(v)},get last(){return Gt(m)},$$events:{click(t){Ii.call(this,e,t)},clickContent(t){Ii.call(this,e,t)},clickDescription(t){Ii.call(this,e,t)},clickImage(t){Ii.call(this,e,t)},clickTitle(t){Ii.call(this,e,t)}}}))})),Ee(t,g)})),Ee(t,g)})),Ee(t,g),te()}(de(h),{get items(){return r()},set items(t){r(t)},get itemClasses(){return u()},get listItemComponent(){return f()},get listItemComponentProps(){return p()},get idFieldName(){return d()},get titleComponent(){return v()},get titleComponentProps(){return m()},get descriptionComponent(){return e.descriptionComponent},get descriptionComponentProps(){return b()},get imageComponent(){return e.imageComponent},get imageComponentProps(){return y()},get actions(){return n()},get links(){return s()},$$events:{change(t){Ii.call(this,e,t)},click(t){Ii.call(this,e,t)},clickContent(t){Ii.call(this,e,t)},clickDescription(t){Ii.call(this,e,t)},clickImage(t){Ii.call(this,e,t)},clickTitle(t){Ii.call(this,e,t)}}}),tt((()=>{ni(h,"style",e.itemLength?`--length: ${e.itemLength};`:""),ai(h,`list ${i()??""} ${(o()?"has-visible-pointer-controls":"")??""} ${(a()?"has-hoverable-list-items":"")??""} ${(l()?"has-overflow-ellipsis":"")??""} ${(c()?"has-hidden-images":"")??""}`)})),Ee(t,h)}),(t=>{var e=Le();const i=j(h);ri(he(e),(()=>Gt(i)),((t,e)=>{e(t,Ri(g))})),Ee(t,e)})),Ee(t,O),te()}var Fo=Se("<!> <!>",1);var Mo=Se('<div role="button" tabindex="0"><!></div>');function Ro(t,e){Zt(e,!0);const i=ji();let r=Ui(e,"classes",3,""),n=Ui(e,"title",3,""),s=Ui(e,"narrow",3,!1);var o=Mo(),a=j((()=>i("click")));o.__click=function(...t){Gt(a)?.apply(this,t)};var l=j((()=>i("keyup")));o.__keyup=function(...t){Gt(l)?.apply(this,t)},ii(de(o),(()=>e.children??d)),tt((()=>{ni(o,"title",n()),ai(o,`column ${r()??""} ${(s()?"is-narrow":"")??""}`)})),Ee(t,o),te()}ke(["click","keyup"]);var Do=Se('<div role="button" tabindex="0"><!></div>');function Uo(t,e){Zt(e,!0);const i=ji();let r=Ui(e,"classes",3,"");var n=Do(),s=j((()=>i("click")));n.__click=function(...t){Gt(s)?.apply(this,t)};var o=j((()=>i("keyup")));n.__keyup=function(...t){Gt(o)?.apply(this,t)},ii(de(n),(()=>e.children??d)),tt((()=>ai(n,`columns ${r()??""}`))),Ee(t,n),te()}ke(["click","keyup"]);var Po=Se('<div role="button" tabindex="0"><!></div>');function jo(t,e){Zt(e,!0);const i=ji();let r=Ui(e,"id",3,""),n=Ui(e,"classes",3,""),s=Ui(e,"widescreen",3,!1),o=Ui(e,"fullhd",3,!1),a=Ui(e,"maxDesktop",3,!1),l=Ui(e,"maxWidescreen",3,!1),c=Ui(e,"fluid",3,!1);var u=Po(),h=j((()=>i("click")));u.__click=function(...t){Gt(h)?.apply(this,t)};var g=j((()=>i("keyup")));u.__keyup=function(...t){Gt(g)?.apply(this,t)},ii(de(u),(()=>e.children??d)),tt((()=>{ni(u,"id",r()),ai(u,`container ${n()??""}`),li(u,"is-widescreen",s()),li(u,"is-fullhd",o()),li(u,"is-max-desktop",a()),li(u,"is-max-widescreen",l()),li(u,"is-fluid",c())})),Ee(t,u),te()}ke(["click","keyup"]);var Wo=Se("<footer><!></footer>");var Bo=Se('<section role="button"><!></section>');ke(["click","keyup"]);var zo=Se('<nav class="level"><div class="level-left"><!></div> <div class="level-right"><!></div></nav>');var Vo=Object.freeze({__proto__:null,UIColumn:Ro,UIColumns:Uo,UIContainer:jo,UIFooter:function(t,e){Zt(e,!0);let i=Ui(e,"id",3,""),r=Ui(e,"classes",3,"");var n=Wo();ii(de(n),(()=>e.children??d)),tt((()=>{ni(n,"id",i()),ai(n,`footer  ${r()??""} `)})),Ee(t,n),te()},UILevel:function(t,e){Zt(e,!0);var i=zo(),r=de(i);ii(de(r),(()=>e.left??d)),ii(de(ge(r,2)),(()=>e.right??d)),Ee(t,i),te()},UILevelItem:function(t,e){Zt(e,!0);let i=Ui(e,"tag",3,"div");var r=Le();!function(t,e,i,r){var n,s,o,a=null,l=t,c=He;et((()=>{const t=e()||null;var i="svg"===t?"http://www.w3.org/2000/svg":null;if(t!==n){var u=He;Ke(c),o&&(null===t?lt(o,(()=>{o=null,s=null})):t===s?dt(o):(ot(o),Pe(!1))),t&&t!==s&&(o=it((()=>{if(Ae(a=i?document.createElementNS(i,t):document.createElement(t),a),r){var e=a.appendChild(le());r(a,e)}St.nodes_end=a,l.before(a)}))),(n=t)&&(s=n),Pe(!0),Ke(u)}}),w)}(he(r),i,0,((t,i)=>{var r=Le();qe(he(r),(()=>e.children),(t=>{var i=Le();ii(he(i),(()=>e.children)),Ee(t,i)}),(t=>{})),Ee(i,r)})),Ee(t,r),te()},UISection:function(t,e){Zt(e,!0);const i=ji();let r=Ui(e,"id",3,""),n=Ui(e,"classes",3,""),s=Ui(e,"tabindex",3,0);var o=Bo(),a=j((()=>i("click")));o.__click=function(...t){Gt(a)?.apply(this,t)};var l=j((()=>i("keyup")));o.__keyup=function(...t){Gt(l)?.apply(this,t)},ii(de(o),(()=>e.children??d)),tt((()=>{ni(o,"id",r()),ai(o,`section ${(e.size?"is-"+e.size:"")??""}  ${n()??""}`),ni(o,"tabindex",s())})),Ee(t,o),te()}});function qo(t,e,i,r,n){let s={field:e(),value:i()};return r(!0),n("change",s),!0}function Ho(t,e,i,r){let n={field:e(),value:t.currentTarget.value};return i(!0),r("change",n),!0}var Ko=Se("<p> </p>"),Go=Se('<span class="icon is-small is-left"><i></i></span>'),Jo=Se('<i class="fas fa-check"></i>'),Yo=Se('<i class="fas fa-exclamation-triangle"></i>'),Qo=Se('<span class="icon is-small is-right"><!></span>'),Xo=Se('<input type="number"> <!> <!>',1),Zo=Se("<div><!></div> <!>",1);function ta(t,e){Zt(e,!0);const i=xi();let r,n,s=Si(),o=Ui(e,"inputStarted",15,!1),a=Ui(e,"value",15,0),l=Ui(e,"placeholder",3,"0.0"),c=Ui(e,"min",3,0),u=Ui(e,"max",3,100),d=Ui(e,"step",3,1),h=Ui(e,"fieldname",3,"number"),g=Ui(e,"icon",3,!1),f=Ui(e,"required",3,!0),p=Ui(e,"disabled",3,!1),v=Ui(e,"readonly",3,!1),m=Ui(e,"valid",3,!0),b=Ui(e,"validated",3,!1),y=Ui(e,"errors",3,!1),O=Ui(e,"formErrors",3,!1),$=Ui(e,"formLevelError",3,!1),w=j((()=>(g()?" has-icons-left ":"")+" has-icons-right "));Pi((()=>{r=[].concat(y()?y():[],O()?O():[])})),Pi((()=>{n=!(b()&&m())&&o()}));let k,_=j((()=>!1===m()||$()));Pi((()=>{k=!0!==m()&&o()?Jr.CLASS_ERR:Jr.CLASS_OK}));var I=Zo(),A=he(I);qe(de(A),v,(t=>{var e=Ko(),i=de(e);tt((()=>je(i,a()))),Ee(t,e)}),(t=>{var e=Xo(),r=he(e);ai(r,`input ${k??""}`),r.__change=[qo,h,a,o,s],r.__input=[Ho,h,o,s];var n=ge(r,2);qe(n,g,(t=>{var e=Go(),i=de(e);tt((()=>ai(i,`fas fa-${g()??""}`))),Ee(t,e)})),qe(ge(n,2),(()=>!0===b()),(t=>{var e=Qo();qe(de(e),(()=>!0===m()),(t=>{Ee(t,Jo())}),(t=>{var e=Le();qe(he(e),(()=>!1===m()),(t=>{Ee(t,Yo())}),null,!0),Ee(t,e)})),Ee(t,e)})),tt((()=>{ni(r,"id",`form-field-textfield-${h()??""}`),ni(r,"min",c()),ni(r,"max",u()),ni(r,"step",d()),ni(r,"name",h()),ni(r,"invalid",Gt(_)),r.disabled=p(),r.required=f(),r.readOnly=v(),ni(r,"placeholder",Ti(tr,"$LOCALE",i)[l()]),ni(r,"autocomplete",h()),ni(r,"aria-controls",`input-field-helper-${h()??""}`),ni(r,"aria-describedby",`input-field-helper-${h()??""}`)})),mi(r,a),Ee(t,e)})),Gr(ge(A,2),{get errors(){return r},set errors(t){r=t},get show(){return n},set show(t){n=t},get classes(){return k},set classes(t){k=t},get id(){return`input-field-helper-${h()??""}`}}),tt((()=>ai(A,`control ${Gt(w)??""}`))),Ee(t,I),te()}ke(["change","input"]);var ea=Se("<!> <!> <!>",1),ia=Se("<!> <!> <!>",1),ra=Se("<!> <!> <!> <!>",1);function na(t,e,i,r){let n={field:e(),value:t.currentTarget.value};return i(!0),r("change",n),!0}function sa(t,e,i,r){let n={field:e(),value:t.currentTarget.value};return i(!0),r("change",n),!0}var oa=Se('<span class="icon is-small is-left"><i></i></span>'),aa=Se('<i class="fas fa-check"></i>'),la=Se('<i class="fas fa-exclamation-triangle"></i>'),ca=Se('<span class="icon is-small is-right"><!></span>'),ua=Se('<div><input type="password"> <!> <!></div> <!>',1);ke(["change","input"]);var da=Se("<a><figure><img></figure></a>"),ha=Se('<figure role="button" tabindex="0"><img></figure>');function ga(t,e){Zt(e,!0);const i=ji();let r=Ui(e,"cors",3,"anonymous"),n=Ui(e,"size",3,64),s=Ui(e,"contained",3,!0),o=Ui(e,"covered",3,!0),a=Ui(e,"classes",3,""),l=j((()=>isNaN(n())?`is-${n()}`:`is-${n()}x${n()}`)),c=j((()=>s()?"is-contained":"")),u=j((()=>o()?"is-covered":""));var d=Le();qe(he(d),(()=>e.urlFull),(t=>{var n=da(),s=j((()=>i("click")));n.__click=function(...t){Gt(s)?.apply(this,t)};var o=de(n),d=de(o);tt((()=>{ni(n,"href",e.urlFull),ni(n,"alt",e.title),ai(o,`image ${Gt(l)??""} ${Gt(c)??""} ${Gt(u)??""} ${a()??""}`),ni(d,"alt",e.title),ni(d,"src",e.url),ni(d,"crossorigin",r())})),Ee(t,n)}),(t=>{var n=ha(),s=j((()=>i("click")));n.__click=function(...t){Gt(s)?.apply(this,t)};var o=j((()=>i("keyup")));n.__keyup=function(...t){Gt(o)?.apply(this,t)};var d=de(n);tt((()=>{ai(n,`image ${Gt(l)??""} ${Gt(c)??""} ${Gt(u)??""} ${a()??""}`),ni(d,"alt",e.title),ni(d,"src",e.url),ni(d,"crossorigin",r())})),Ee(t,n)})),Ee(t,d),te()}function fa(t,e,i,r,n){let s={field:e(),value:i()};return r(!0),n("change",s),!0}function pa(t,e,i,r){let n={field:e(),value:t.currentTarget.value};return i(!0),r("change",n),!0}ke(["click","keyup"]);var va=Se("<p> </p>"),ma=Se("<option></option>"),ba=Se("<datalist></datalist>"),ya=Se('<span class="icon is-small is-left"><i></i></span>'),Oa=Se('<input type="range"> <output> </output> <!> <!>',1),$a=Se("<div><!></div> <!>",1);function wa(t,e,i,r,n,s){i(e(t.currentTarget.value));let o={field:r(),value:i()};return n(!0),s("change",o),!0}function ka(t,e,i,r,n,s){i(e(Math.round(parseInt(t.currentTarget.value))));let o={field:r(),value:i()};return n(!0),s("change",o),!0}ke(["change","input"]);var _a=Se("<p> </p>"),Ia=Se("<option></option>"),Aa=Se("<datalist></datalist>"),Sa=Se('<span class="icon is-small is-left"><i></i></span>'),Ca=Se('<input type="range"> <output editable="true"> </output> <!> <!>',1),La=Se("<div><!></div> <!>",1);function Ea(t,e,i,r,n){let s={field:e(),value:"checkbox"===t.currentTarget.type?t.currentTarget.checked:i()};return r(!0),n("change",s),!0}ke(["change","input"]);var Ta=Se('<!> <input type="checkbox"> <label class="label"><!></label>',1),xa=Se('<div class="control"><!></div> <!>',1);function Na(t,e,i,r,n,s,o){console.log("switch list element input",t);const a=t.target.id.split("-variant-").at(-1);console.log(a),t.target.checked?e(a):i(a);let l={field:r(),value:n()};return s(!0),o("change",l),!0}ke(["input"]);var Fa=Se('<div class="switch-list-item"><input type="checkbox"> <label class="label"> </label></div>'),Ma=Se('<div class="control"><!></div> <!>',1);function Ra(t,e,i){t&&t.preventDefault();let r=t.currentTarget.dataset.id;return e().includes(r)&&(e().splice(e().indexOf(r),1),e(e()),i()),!1}function Da(t,e,i,r,n,s){t&&t.preventDefault();let o=t.currentTarget.parentNode.querySelector("select").value;const a=e(o);return!!a&&(!!i()(a,r())&&(o&&-1===n().indexOf(o)&&(n().push(o),n(n()),s()),!1))}ke(["input"]);var Ua=Se('<button class="delete is-small"></button>'),Pa=Se("<span> <!></span>"),ja=Se("<option> </option>"),Wa=Se('<div class="column"><div class="control"><div class="select is-small"><select><option selected> </option><!></select></div> <button class="button is-primary is-small"> </button></div></div>'),Ba=Se('<div class="control columns"><div></div> <!></div> <!>',1);function za(t,e,i,r,n){t.preventDefault();let s=Jr.formatPhone(t.currentTarget.value),o={field:e(),value:s};return i(s),r(!0),n("change",o),!1}function Va(t,e,i,r,n){t.preventDefault();let s=Jr.formatPhone(t.currentTarget.value),o={field:e(),value:s};return i(s),r(!0),n("change",o),!1}ke(["click"]);var qa=Se("<p> </p>"),Ha=Se('<span class="icon is-small is-left"><i></i></span>'),Ka=Se('<i class="fas fa-check"></i>'),Ga=Se('<i class="fas fa-exclamation-triangle"></i>'),Ja=Se('<span class="icon is-small is-right"><!></span>'),Ya=Se('<input type="tel"> <!> <!>',1),Qa=Se("<div><!></div> <!>",1);ke(["change","input"]);var Xa=Object.freeze({__proto__:null,UIAutocomplete:function(t,e){Zt(e,!0);const i=xi();let r=Si(),n=Ui(e,"idField",3,"_id"),s=Ui(e,"labelField",3,"title"),o=Ui(e,"minCharactersToSearch",3,3),a=Ui(e,"selectFirstIfEmpty",3,!1),l=Ui(e,"maxItemsToShowInList",3,20),c=Ui(e,"noResultsText",3,"Ничего не найдено"),u=Ui(e,"showClear",3,!0),d=Ui(e,"value",15),h=Ui(e,"placeholder",3,""),g=Ui(e,"fieldname",3,"checkbox-list"),f=Ui(e,"disabled",3,!1),p=Ui(e,"readonly",3,!1),v=Ui(e,"icon",3,!1),m=Ui(e,"inputStarted",15,!1),b=Ui(e,"valid",3,!0),y=Ui(e,"validated",3,!1),O=Ui(e,"errors",3,!1),$=Ui(e,"formErrors",3,!1);Ui(e,"formLevelError",3,!1);let w,k,_,I=Ui(e,"searchFunction",3,(()=>[]));function A(){let t={field:g(),value:d()};return m(!0),r("change",t),!0}Pi((()=>{w=[].concat(O()?O():[],$()?$():[])})),Pi((()=>{k=!(y()&&b())&&m()})),Pi((()=>{_=!0!==b()&&m()?Jr.CLASS_ERR:Jr.CLASS_OK}));var S=Le();qe(he(S),p,(t=>{var e=j((()=>d()?d().title:""));jn(t,{get value(){return Gt(e)},get fieldname(){return g()},get placeholder(){return h()},get icon(){return v()}})}),(t=>{var e=ls(),r=he(e);qe(de(r),p,(t=>{var e=as(),r=de(e);tt((()=>je(r,Ti(tr,"$LOCALE",i)[d()]))),Ee(t,e)}),(t=>{os(t,{get showClear(){return u()},get disabled(){return f()},get placeholder(){return h()},get noResultsText(){return c()},onChange:A,get searchFunction(){return I()},hideArrow:!0,get labelFieldName(){return s()},get valueFieldName(){return n()},get minCharactersToSearch(){return o()},get selectFirstIfEmpty(){return a()},get maxItemsToShowInList(){return l()},get selectedItem(){return d()},set selectedItem(t){d(t)}})})),Gr(ge(r,2),{get errors(){return w},set errors(t){w=t},get show(){return k},set show(t){k=t},get classes(){return _},set classes(t){_=t},get id(){return`input-field-helper-${g()??""}`}}),Ee(t,e)})),Ee(t,S),te()},UICheckbox:function(t,e){Zt(e,!0);const i=xi(),r=()=>Ti(tr,"$LOCALE",i);let n,s,o=Si(),a=Ui(e,"inputStarted",15,!1),l=Ui(e,"value",15,!1),c=Ui(e,"label",3,"checkbox"),u=Ui(e,"placeholder",3,""),d=Ui(e,"fieldname",3,"checkbox"),h=Ui(e,"icon",3,!1),g=Ui(e,"required",3,!0),f=Ui(e,"readonly",3,!1),p=Ui(e,"disabled",3,!1),v=Ui(e,"valid",3,!0),m=Ui(e,"validated",3,!1),b=Ui(e,"errors",3,!1),y=Ui(e,"formErrors",3,!1),O=Ui(e,"formLevelError",3,!1),$=j((()=>(h()?" has-icons-left ":"")+" has-icons-right "));Pi((()=>{n=[].concat(b()?b():[],y()?y():[])})),Pi((()=>{s=!(m()&&v())&&a()}));let w,k=j((()=>!1===v()||O()));Pi((()=>{w=!0!==v()&&a()?Jr.CLASS_ERR:Jr.CLASS_OK}));var _=hs(),I=he(_),A=de(I);qe(de(A),f,(t=>{var e=j((()=>[{value:l()}]));Fr(t,{get LC_TRUE(){return c()},get LC_FALSE(){return c()},get values(){return Gt(e)}})}),(t=>{var e=ds(),i=he(e);i.__change=[cs,d,l,a,o],i.__input=[us,d,l,a,o];var n=ge(i);tt((()=>{ni(i,"id",`form-field-checkbox-${d()??""}`),ni(i,"placeholder",r()[u()]),ni(i,"name",d()),i.required=g(),i.readOnly=f(),ni(i,"invalid",Gt(k)),ni(i,"aria-controls",`input-field-helper-${d()??""}`),ni(i,"aria-describedby",`input-field-helper-${d()??""}`),i.disabled=p(),je(n,` ${r()[c()]??""}`)})),bi(i,l),Ee(t,e)})),Gr(ge(I,2),{get errors(){return n},set errors(t){n=t},get show(){return s},set show(t){s=t},get classes(){return w},set classes(t){w=t},get id(){return`input-field-helper-${d()??""}`}}),tt((()=>{ai(I,`control ${Gt($)??""}`),A.disabled=p(),ni(A,"for",`form-field-checkbox-${d()??""}`)})),Ee(t,_),te()},UICheckboxList:function(t,e){Zt(e,!0);const i=xi();let r,n,s=Si(),o=Ui(e,"inputStarted",15,!1),a=Ui(e,"value",19,(()=>[])),l=Ui(e,"fieldname",3,"checkbox-list"),c=Ui(e,"readonly",3,!1),u=Ui(e,"disabled",3,!1),d=Ui(e,"valid",3,!0),h=Ui(e,"validated",3,!1),g=Ui(e,"errors",3,!1),f=Ui(e,"formErrors",3,!1),p=Ui(e,"formLevelError",3,!1);Pi((()=>{r=[].concat(g()?g():[],f()?f():[])})),Pi((()=>{n=!(h()&&d())&&o()}));let v,m=j((()=>!1===d()||p()));Pi((()=>{v=!0!==d()&&o()?Jr.CLASS_ERR:Jr.CLASS_OK}));var b=vs(),y=he(b);Je(y,21,a,(t=>t.id),((t,e)=>{var r=ps(),n=de(r);n.__change=[gs,a,l,o,s],n.__input=[fs,a,l,o,s];var d=ge(n);tt((()=>{r.disabled=u()||Gt(e).disabled,ni(r,"for",`form-field-checkbox-${l()+"_"+Gt(e).id??""}`),ni(n,"data-id",Gt(e).id),ni(n,"id",`form-field-checkboxlist-${l()+"_"+Gt(e).id??""}`),ni(n,"placeholder",tr[Gt(e).placeholder]),ni(n,"name",l()+"_"+Gt(e).id),n.readOnly=c(),ni(n,"invalid",Gt(m)),ni(n,"aria-controls",`input-field-helper-${l()+"_"+Gt(e).id??""}`),ni(n,"aria-describedby",`input-field-helper-${l()+"_"+Gt(e).id??""}`),n.disabled=u()||Gt(e).disabled,je(d,` ${Ti(tr,"$LOCALE",i)[Gt(e).label]??""}`)})),bi(n,(()=>Gt(e).value),(t=>Gt(e).value=t)),Ee(t,r)})),Gr(ge(y,2),{get errors(){return r},set errors(t){r=t},get show(){return n},set show(t){n=t},get classes(){return v},set classes(t){v=t},get id(){return`input-field-helper-${l()??""}`}}),Ee(t,b),te()},UIColor:function(t,e){Zt(e,!0);const i=xi();let r,n,s=Si(),o=Ui(e,"inputStarted",15,!1),a=Ui(e,"value",15,""),l=Ui(e,"placeholder",3,""),c=Ui(e,"fieldname",3,"color"),u=Ui(e,"icon",3,!1),d=Ui(e,"required",3,!0),h=Ui(e,"readonly",3,!1),g=Ui(e,"valid",3,!0),f=Ui(e,"validated",3,!1),p=Ui(e,"errors",3,!1),v=Ui(e,"formErrors",3,!1),m=Ui(e,"formLevelError",3,!1),b=j((()=>(u()?" has-icons-left ":"")+" has-icons-right "));Pi((()=>{r=[].concat(p()?p():[],v()?v():[])})),Pi((()=>{n=!(f()&&g())&&o()}));let y,O=j((()=>!1===g()||m()));Pi((()=>{y=!0!==g()&&o()?Jr.CLASS_ERR:Jr.CLASS_OK}));var $=ks(),w=he($),k=de(w);ai(k,`input ${y??""}`),k.__change=[ms,c,o,s],k.__input=[bs,c,o,s];var _=ge(k,2);qe(_,u,(t=>{var e=ys(),i=de(e);tt((()=>ai(i,`fas fa-${u()??""}`))),Ee(t,e)})),qe(ge(_,2),(()=>!0===f()),(t=>{var e=ws();qe(de(e),(()=>!0===g()),(t=>{Ee(t,Os())}),(t=>{var e=Le();qe(he(e),(()=>!1===g()),(t=>{Ee(t,$s())}),null,!0),Ee(t,e)})),Ee(t,e)})),Gr(ge(w,2),{get errors(){return r},set errors(t){r=t},get show(){return n},set show(t){n=t},get classes(){return y},set classes(t){y=t},get id(){return`input-field-helper-${c()??""}`}}),tt((()=>{ai(w,`control ${Gt(b)??""}`),ni(k,"id",`form-field-color-${c()??""}`),ni(k,"name",c()),ni(k,"invalid",Gt(O)),k.required=d(),ni(k,"placeholder",Ti(tr,"$LOCALE",i)[l()]),ni(k,"autocomplete",c()),ni(k,"aria-controls",`input-field-helper-${c()??""}`),k.readOnly=h(),ni(k,"aria-describedby",`input-field-helper-${c()??""}`)})),mi(k,a),Ee(t,$),te()},UIControl:function(t,e){Zt(e,!0);let i=Ui(e,"classes",3,"");var r=_s();ii(de(r),(()=>e.children??d)),tt((()=>ai(r,`control ${i()??""}`))),Ee(t,r),te()},UIDate:function(t,e){Zt(e,!0);const i=xi();let r,n=Si(),s=Ui(e,"inputStarted",15,!1),o=Ui(e,"value",31,(()=>re(new Date))),a=Ui(e,"placeholder",3,""),l=Ui(e,"fieldname",3,"datetime"),c=Ui(e,"pattern",3,"d{4}-d{2}-d{2}"),u=Ui(e,"icon",3,!1),d=Ui(e,"required",3,!0),h=Ui(e,"readonly",3,!1),g=Ui(e,"valid",3,!0),f=Ui(e,"validated",3,!1),p=Ui(e,"errors",3,!1),v=Ui(e,"formErrors",3,!1),m=Ui(e,"formLevelError",3,!1),b=j((()=>(u()?" has-icons-left ":"")+" has-icons-right "));Pi((()=>{r=[].concat(p()?p():[],v()?v():[])}));let y,O,$=j((()=>!1===g()||m()));Pi((()=>{y=!(f()&&g())&&s()})),Pi((()=>{O=!0!==g()&&s()?Jr.CLASS_ERR:Jr.CLASS_OK})),Ai((()=>{o()instanceof Date?o(o().toISOString().split("T")[0]):o().indexOf("T")>0&&o(o().split("T")[0])}));var w=Ns(),k=he(w);qe(de(k),h,(t=>{var e=Ss(),i=de(e),r=de(i);tt((()=>je(r,Jr.tryFormatLocaleDateTime(o())))),tt((()=>ni(i,"datetime",o()))),Ee(t,e)}),(t=>{var e=xs(),r=he(e);ai(r,`input ${O??""}`),r.__change=[Is,l,s,n],r.__input=[As,l,s,n];var p=ge(r,2);qe(p,u,(t=>{var e=Cs(),i=de(e);tt((()=>ai(i,`fas fa-${u()??""}`))),Ee(t,e)})),qe(ge(p,2),(()=>!0===f()),(t=>{var e=Ts();qe(de(e),(()=>!0===g()),(t=>{Ee(t,Ls())}),(t=>{var e=Le();qe(he(e),(()=>!1===g()),(t=>{Ee(t,Es())}),null,!0),Ee(t,e)})),Ee(t,e)})),tt((()=>{ni(r,"id",`form-field-date-${l()??""}`),ni(r,"name",l()),ni(r,"invalid",Gt($)),r.required=d(),ni(r,"placeholder",Ti(tr,"$LOCALE",i)[a()]),ni(r,"pattern",c()),r.readOnly=h(),ni(r,"autocomplete",l()),ni(r,"aria-controls",`input-field-helper-${l()??""}`),ni(r,"aria-describedby",`input-field-helper-${l()??""}`)})),mi(r,o),Ee(t,e)})),Gr(ge(k,2),{get errors(){return r},set errors(t){r=t},get show(){return y},set show(t){y=t},get classes(){return O},set classes(t){O=t},get id(){return`input-field-helper-${l()??""}`}}),tt((()=>ai(k,`control ${Gt(b)??""}`))),Ee(t,w),te()},UIDatetimeInTZ:function(t,e){Zt(e,!0);let i=Si();function r(t,e=!1){return t.split(".")[0]+(e?"":"Z")}function n(t,e){try{const i=new Date(s(t)).getTime(),n=-6e4*e;if(S(i+n)){const t=new Date(i+n);return r(t.toISOString(),!0)}}catch(t){return}}function s(t){return t&&"Z"!==t.at(-1)?t+"Z":t}let o,a,l=Ui(e,"inputStarted",15,!1),c=Ui(e,"fieldname",3,"datetime"),u=Ui(e,"value",31,(()=>re(r((new Date).toISOString())))),d=Ui(e,"timezoneOffset",3,0),h=Ui(e,"icon",3,!1),g=Ui(e,"required",3,!1),f=Ui(e,"disabled",3,!1),p=Ui(e,"readonly",3,!1),v=Ui(e,"valid",3,!0),m=Ui(e,"validated",3,!1),b=Ui(e,"errors",3,!1),y=Ui(e,"formErrors",3,!1),O=Ui(e,"formLevelError",3,!1),$=j((()=>(h()?" has-icons-left ":"")+" has-icons-right "));Pi((()=>{o=[].concat(b()?b():[],y()?y():[])})),Pi((()=>{a=!(m()&&v())&&l()}));let w,k=j((()=>!1===v()||O()));Pi((()=>{w=!0!==v()&&l()?Jr.CLASS_ERR:Jr.CLASS_OK}));let _,I=x(void 0);const A=t=>{S(t)&&(_=Gt(I),D(I,re(t)))};Ai((()=>{A(n(u(),d()))}));const S=t=>{try{return new Date(t),!0}catch(t){return!1}};let C=j((()=>isNaN(d())?"":(d()>0?"":"+")+(d()/-60).toFixed(1)));function L(t){return t.currentTarget.value&&Gt(I)&&S(Gt(I))?(u()!==n(Gt(I),-d())&&(()=>{A(Gt(I)),u(s(n(Gt(I),-d())));let t={field:c(),value:u()};l(!0),i("change",t)})(),!0):(D(I,re(_)),!1)}var E=Le();qe(he(E),(()=>Gt(I)),(t=>{var e=js(),i=he(e);qe(de(i),p,(t=>{var e=Fs(),i=de(e);tt((()=>je(i,Gt(I)))),Ee(t,e)}),(t=>{var e=Ps(),i=he(e);ai(i,`input ${w??""}`),i.__change=L,i.__input=L;var r=ge(i,2);qe(r,h,(t=>{var e=Ms(),i=de(e);tt((()=>{ni(e,"title",Gt(C)),ai(i,`fas fa-${h()??""}`)})),Ee(t,e)})),qe(ge(r,2),(()=>!0===m()),(t=>{var e=Us();qe(de(e),(()=>!0===v()),(t=>{Ee(t,Rs())}),(t=>{var e=Le();qe(he(e),(()=>!1===v()),(t=>{Ee(t,Ds())}),null,!0),Ee(t,e)})),Ee(t,e)})),tt((()=>{ni(i,"id",`form-field-datetime-in-timezone-${c()??""}`),ni(i,"name",c()),ni(i,"invalid",Gt(k)),i.disabled=f(),i.required=g(),i.readOnly=p(),ni(i,"autocomplete",c()),ni(i,"aria-controls",`input-field-helper-${c()??""}`),ni(i,"aria-describedby",`input-field-helper-${c()??""}`)})),we("blur",i,L),mi(i,(()=>Gt(I)),(t=>D(I,t))),Ee(t,e)})),Gr(ge(i,2),{get errors(){return o},set errors(t){o=t},get show(){return a},set show(t){a=t},get classes(){return w},set classes(t){w=t},get id(){return`input-field-helper-${c()??""}`}}),tt((()=>ai(i,`control ${Gt($)??""}`))),Ee(t,e)})),Ee(t,E),te()},UIEmail:function(t,e){Zt(e,!0);const i=xi();let r,n,s=Si(),o=Ui(e,"inputStarted",15,!1),a=Ui(e,"value",15,""),l=Ui(e,"placeholder",3,""),c=Ui(e,"fieldname",3,"email"),u=Ui(e,"icon",3,!1),d=Ui(e,"required",3,!0),h=Ui(e,"readonly",3,!1),g=Ui(e,"disabled",3,!1),f=Ui(e,"valid",3,!0),p=Ui(e,"validated",3,!1),v=Ui(e,"errors",3,!1),m=Ui(e,"formErrors",3,!1),b=Ui(e,"formLevelError",3,!1),y=j((()=>(u()?" has-icons-left ":"")+" has-icons-right "));Pi((()=>{r=[].concat(v()?v():[],m()?m():[])})),Pi((()=>{n=!(p()&&f())&&o()}));let O,$=j((()=>!1===f()||b()));Pi((()=>{O=!0!==f()&&o()?Jr.CLASS_ERR:Jr.CLASS_OK}));var w=Js(),k=he(w);qe(de(k),h,(t=>{var e=zs(),i=de(e);tt((()=>je(i,a()))),Ee(t,e)}),(t=>{var e=Gs(),r=he(e);ai(r,`input ${O??""}`),r.__change=[Ws,c,o,s],r.__input=[Bs,c,o,s];var n=ge(r,2);qe(n,u,(t=>{var e=Vs(),i=de(e);tt((()=>ai(i,`fas fa-${u()??""}`))),Ee(t,e)})),qe(ge(n,2),(()=>!0===p()),(t=>{var e=Ks();qe(de(e),(()=>!0===f()),(t=>{Ee(t,qs())}),(t=>{var e=Le();qe(he(e),(()=>!1===f()),(t=>{Ee(t,Hs())}),null,!0),Ee(t,e)})),Ee(t,e)})),tt((()=>{ni(r,"id",`form-field-email-${c()??""}`),ni(r,"name",c()),ni(r,"invalid",Gt($)),r.required=d(),r.readOnly=h(),r.disabled=g(),ni(r,"placeholder",Ti(tr,"$LOCALE",i)[l()]),ni(r,"autocomplete",c()),ni(r,"aria-controls",`input-field-helper-${c()??""}`),ni(r,"aria-describedby",`input-field-helper-${c()??""}`)})),mi(r,a),Ee(t,e)})),Gr(ge(k,2),{get errors(){return r},set errors(t){r=t},get show(){return n},set show(t){n=t},get classes(){return O},set classes(t){O=t},get id(){return`input-field-helper-${c()??""}`}}),tt((()=>ai(k,`control ${Gt(y)??""}`))),Ee(t,w),te()},UIHidden:function(t,e){let i=Ui(e,"value",15,""),r=Ui(e,"fieldname",3,"hidden"),n=Ui(e,"required",3,!0),s=Ui(e,"readonly",3,!1);var o=Ys();tt((()=>{o.required=n(),o.readOnly=s(),ni(o,"name",r())})),mi(o,i),Ee(t,o)},UIJSONArea:function(t,e){Zt(e,!0);let i=Si(),r=Ui(e,"inputStarted",15,!1),n=Ui(e,"value",31,(()=>re({}))),s=Ui(e,"placeholder",3,""),o=Ui(e,"fieldname",3,"jsonarea"),a=Ui(e,"icon",3,!1),l=Ui(e,"rows",3,10),c=Ui(e,"required",3,!0),u=Ui(e,"readonly",3,!1),d=Ui(e,"disabled",3,!1),h=Ui(e,"valid",15,!0),g=Ui(e,"validated",3,!1),f=Ui(e,"errors",15,!1),p=Ui(e,"formErrors",3,!1),v=Ui(e,"formLevelError",3,!1),m=x("{}");function b(t){try{n(JSON.parse(t)),h(!0),f(!1),r(!0),i("change",{field:o(),value:n()})}catch(t){h(!1),f([t.message])}}Ai((()=>{D(m,re(JSON.stringify(n(),null,4)))})),no(t,{get inputStarted(){return r()},set inputStarted(t){r(t)},get value(){return Gt(m)},set value(t){D(m,re(t))},get placeholder(){return s()},get icon(){return a()},get rows(){return l()},get required(){return c()},get readonly(){return u()},get disabled(){return d()},get validated(){return g()},get formErrors(){return p()},get formLevelError(){return v()},$$events:{change:function(t){return b(t.detail.value),!0}}}),te()},UILabel:oo,UIListOfModels:function(t,e){Zt(e,!0),Si(),Ui(e,"inputStarted",3,!1);let i=Ui(e,"value",31,(()=>re([]))),r=Ui(e,"placeholder",15,""),n=Ui(e,"fieldname",15,"selectFromModel"),s=Ui(e,"required",15,!0),o=Ui(e,"readonly",3,!1),a=Ui(e,"multiple",15,!1),l=Ui(e,"size",15,8),c=Ui(e,"valid",15,!0),u=Ui(e,"validated",15,!1),d=Ui(e,"errors",15,!1),h=Ui(e,"formErrors",15,!1),g=Ui(e,"formLevelError",15,!1),f=Ui(e,"modelName",3,""),p=Ui(e,"actionName",3,""),v=Ui(e,"actionFilter",19,(()=>({}))),m=Ui(e,"actionSorter",19,(()=>({}))),b=Ui(e,"actionPager",19,(()=>({}))),y=Ui(e,"actionSearch",3,void 0),O=Ui(e,"optionId",3,":_id"),$=Ui(e,"optionTitle",3,":title"),w=Ui(e,"selectorUI",3,"UISelectFromModelOnDemandInline"),k=Ui(e,"selectorUIProps",19,(()=>({}))),_=Ui(e,"itemUI",3,"UIListItem"),I=Ui(e,"itemUIProps",19,(()=>({}))),A=Ui(e,"transformValueItemToListItem",3,(t=>t?{id:t._id,title:t.title,description:t.description,value:t}:void 0)),S=j((()=>i().map?i().map(A()):[]));const C=[{action(t){const e=t.value,r=i().findIndex((t=>t===e));if(r>-1){const t=[...i()];Ar.moveItem(t,r,r-1),i(t)}},title:"",icon:"arrow-up",color:"normal"},{action:t=>{const e=t.value,r=i().findIndex((t=>t===e));if(r>-1){const t=[...i()];Ar.moveItem(t,r,r+1),i(t)}},title:"",icon:"arrow-down",color:"normal"},{action:t=>{const e=t.value,r=i().findIndex((t=>t===e));r>-1&&(i().splice(r,1),i(i()))},title:"",icon:"trash",color:"danger"}];var L=Fo(),E=he(L),T=j((()=>co.get(_())));No(E,Ri({get listItemComponent(){return Gt(T)}},I,{get items(){return Gt(S)},actions:C})),qe(ge(E,2),(()=>!o()),(t=>{var e=Le();const o=j((()=>co.get(w())));ri(he(e),(()=>Gt(o)),((t,e)=>{e(t,Ri(k,{get modelName(){return f()},get actionName(){return p()},get actionFilter(){return v()},get actionSorter(){return m()},get actionPager(){return b()},get actionSearch(){return y()},get optionId(){return O()},get optionTitle(){return $()},get placeholder(){return r()},set placeholder(t){r(t)},get fieldname(){return n()},set fieldname(t){n(t)},get required(){return s()},set required(t){s(t)},get multiple(){return a()},set multiple(t){a(t)},get size(){return l()},set size(t){l(t)},get valid(){return c()},set valid(t){c(t)},get validated(){return u()},set validated(t){u(t)},get errors(){return d()},set errors(t){d(t)},get formErrors(){return h()},set formErrors(t){h(t)},get formLevelError(){return g()},set formLevelError(t){g(t)},$$events:{resolve:t=>{return e=t.detail,Array.isArray(i())||i([]),i().push(e),void i(i());var e}}}))})),Ee(t,e)})),Ee(t,L),te()},UINamedNumbersList:function(t,e){Zt(e,!0);let i,r,n,s=Si(),o=Ui(e,"fieldname",3,"numbers_list"),a=Ui(e,"value",31,(()=>re({}))),l=Ui(e,"label",3,"named numbers list"),c=Ui(e,"inputStarted",3,!1),u=Ui(e,"placeholder",15,"new item"),d=Ui(e,"readonly",3,!1),h=Ui(e,"valid",3,!0),g=Ui(e,"validated",3,!1),f=Ui(e,"errors",3,!1),p=Ui(e,"formErrors",3,!1),v=j((()=>Object.keys(a()).map((t=>({id:t,title:t,number:a()[t]})))));Pi((()=>{i=[].concat(f()?f():[],p()?p():[])})),Pi((()=>{r=!(g()&&h())&&c()})),Pi((()=>{n=!0!==h()&&c()?Jr.CLASS_ERR:Jr.CLASS_OK}));let m=re({id:"",number:0});var b=ra(),y=he(b);Ln(y,{get title(){return l()},size:5});var O=ge(y,2);Je(O,17,(()=>Gt(v)),(t=>t.id),((t,e)=>{Uo(t,{children:(t,i)=>{var r=ea(),n=he(r);Ro(n,{classes:"is-6",children:(t,i)=>{var r=Ce();tt((()=>je(r,Gt(e).title))),Ee(t,r)},$$slots:{default:!0}});var l=ge(n,2);Ro(l,{classes:"is-4",children:(t,i)=>{var r=Ce();tt((()=>je(r,Gt(e).number))),Ee(t,r)},$$slots:{default:!0}}),qe(ge(l,2),(()=>!d()),(t=>{Ro(t,{classes:"is-2",children:(t,i)=>{hn(t,{icon:"minus",action:()=>{return t=Gt(e).id,void(Ar.objHas(a(),t)&&(delete a()[t],a(a()),s("change",{value:a(),field:o()})));var t}})},$$slots:{default:!0}})})),Ee(t,r)},$$slots:{default:!0}})}));var $=ge(O,2);qe($,(()=>!d()),(t=>{Uo(t,{children:(t,e)=>{var i=ia(),r=he(i);Ro(r,{classes:"is-6",children:(t,e)=>{jn(t,{get value(){return m.id},set value(t){m.id=t},get placeholder(){return u()},set placeholder(t){u(t)}})},$$slots:{default:!0}});var n=ge(r,2);Ro(n,{classes:"is-4",children:(t,e)=>{ta(t,{get value(){return m.number},set value(t){m.number=t}})},$$slots:{default:!0}}),Ro(ge(n,2),{classes:"is-2",children:(t,e)=>{hn(t,{icon:"plus",action:()=>function(){const t=m.id.trim(),e=parseInt(m.number);!t||""===t||isNaN(e)||Ar.objHas(a(),t)||a(a()[t]=e,!0),s("change",{value:a(),field:o()})}()})},$$slots:{default:!0}}),Ee(t,i)},$$slots:{default:!0}})})),Gr(ge($,2),{get errors(){return i},set errors(t){i=t},get show(){return r},set show(t){r=t},get classes(){return n},set classes(t){n=t},get id(){return`input-field-helper-${o()??""}`}}),Ee(t,b),te()},UINumber:ta,UIPassword:function(t,e){Zt(e,!0);const i=xi();let r,n,s=Si(),o=Ui(e,"inputStarted",15,!1),a=Ui(e,"value",15,""),l=Ui(e,"placeholder",3,""),c=Ui(e,"fieldname",3,"password"),u=Ui(e,"icon",3,!1),d=Ui(e,"required",3,!0),h=Ui(e,"readonly",3,!1),g=Ui(e,"valid",3,!0),f=Ui(e,"validated",3,!1),p=Ui(e,"errors",3,!1),v=Ui(e,"formErrors",3,!1),m=Ui(e,"formLevelError",3,!1),b=j((()=>(u()?" has-icons-left ":"")+" has-icons-right "));Pi((()=>{r=[].concat(p()?p():[],v()?v():[])})),Pi((()=>{n=!(f()&&g())&&o()}));let y,O=j((()=>!1===g()||m()));Pi((()=>{y=!0!==g()&&o()?Jr.CLASS_ERR:Jr.CLASS_OK})),Pi((()=>{}));var $=ua(),w=he($),k=de(w);ai(k,`input ${y??""}`),k.__change=[na,c,o,s],k.__input=[sa,c,o,s];var _=ge(k,2);qe(_,u,(t=>{var e=oa(),i=de(e);tt((()=>ai(i,`fas fa-${u()??""}`))),Ee(t,e)})),qe(ge(_,2),(()=>!0===f()),(t=>{var e=ca();qe(de(e),(()=>!0===g()),(t=>{Ee(t,aa())}),(t=>{var e=Le();qe(he(e),(()=>!1===g()),(t=>{Ee(t,la())}),null,!0),Ee(t,e)})),Ee(t,e)})),Gr(ge(w,2),{get errors(){return r},set errors(t){r=t},get show(){return n},set show(t){n=t},get classes(){return y},set classes(t){y=t},get id(){return`input-field-helper-${c()??""}`}}),tt((()=>{ai(w,`control ${Gt(b)??""}`),k.readOnly=h(),ni(k,"id",`form-field-password-${c()??""}`),ni(k,"name",c()),ni(k,"invalid",Gt(O)),k.required=d(),ni(k,"placeholder",Ti(tr,"$LOCALE",i)[l()]),ni(k,"autocomplete",c()),ni(k,"aria-controls",`input-field-helper-${c()??""}`),ni(k,"aria-describedby",`input-field-helper-${c()??""}`)})),mi(k,a),Ee(t,$),te()},UIRadioButtons:function(t,e){Zt(e,!0);const i=Si();let r=Ui(e,"fieldname",3,"radio-buttons"),n=Ui(e,"variants",19,(()=>[])),s=Ui(e,"value",15),o=Ui(e,"buttonProps",19,(()=>({}))),a=Ui(e,"titleComponent",3,Ln),l=Ui(e,"titleComponentProps",19,(()=>({size:5}))),c=Ui(e,"imageComponent",3,ga),u=Ui(e,"imageComponentProps",19,(()=>({covered:!0}))),d=Ui(e,"descriptionComponent",3,fn),h=Ui(e,"descriptionComponentProps",19,(()=>({}))),g=Ui(e,"listComponent",3,No),f=Ui(e,"listComponentProps",19,(()=>({}))),p=Ui(e,"getUIItem",3,(t=>y.find((e=>e.value===t)))),v=Ui(e,"getDefaultItemSublime",3,(()=>n()[0].value)),m=Ui(e,"uiOn",3,(t=>{t.color="success",t.outlined=!1})),b=Ui(e,"uiOff",3,(t=>{t.color=!1,t.outlined=!0}));Ai((()=>{y=n().map((t=>({...o(),...t}))),D(O,re([{id:0,title:e.title,image:e.image,description:{values:y}}])),function(){if(n().length>0)if(void 0!==s())w({on:s()});else{$(v()())}}()}));let y=[],O=x(re([]));function $(t){let e={on:void 0,off:void 0};s()&&(e.off=s(),e.on=t),s(t),w(e),i("change",{field:r(),value:s()})}function w(t){t.off&&b()(p()(t.off)),t.on&&m()(p()(t.on)),D(O,re(Gt(O)))}const k=j(g);var _=Le(),I=he(_),A=j((()=>({...h(),action(t,e){$(e)}})));ri(I,(()=>Gt(k)),((t,e)=>{e(t,Ri(f,{get items(){return Gt(O)},set items(t){D(O,re(t))},get titleComponent(){return a()},get titleComponentProps(){return l()},get descriptionComponent(){return d()},get descriptionComponentProps(){return Gt(A)},get imageComponent(){return c()},get imageComponentProps(){return u()}}))})),Ee(t,_),te()},UIRange:function(t,e){Zt(e,!0);const i=xi(),r=Si();let n,s,o=Ui(e,"inputStarted",15,!1),a=Ui(e,"value",15,10),l=Ui(e,"min",3,0),c=Ui(e,"max",3,100),u=Ui(e,"step",3,1),d=Ui(e,"tickmarks",3,!1),h=Ui(e,"placeholder",3,""),g=Ui(e,"fieldname",3,"range"),f=Ui(e,"icon",3,!1),p=Ui(e,"required",3,!0),v=Ui(e,"disabled",3,!1),m=Ui(e,"readonly",3,!1),b=Ui(e,"valid",3,!0),y=Ui(e,"validated",3,!1),O=Ui(e,"errors",3,!1),$=Ui(e,"formErrors",3,!1),w=Ui(e,"formLevelError",3,!1),k=j((()=>(f()?" has-icons-left ":"")+" has-icons-right "));Pi((()=>{n=[].concat(O()?O():[],$()?$():[])})),Pi((()=>{s=!(y()&&b())&&o()}));let _,I=j((()=>!1===b()||w()));Pi((()=>{_=!0!==b()&&o()?Jr.CLASS_ERR:Jr.CLASS_OK}));var A=$a(),S=he(A);qe(de(S),m,(t=>{var e=va(),i=de(e);tt((()=>je(i,a()))),Ee(t,e)}),(t=>{var e=Oa(),n=he(e);ai(n,`input big-number slider has-output is-fullwidth is-success ${_??""}`),n.__change=[fa,g,a,o,r],n.__input=[pa,g,o,r];var s=ge(n,2),b=de(s),y=ge(s,2);qe(y,(()=>Array.isArray(d())&&d().length),(t=>{var e=ba();Je(e,21,d,Ge,((t,e)=>{var i=ma(),r={};tt((()=>{r!==(r=Gt(e).value)&&(i.value=null==(i.__value=Gt(e).value)?"":Gt(e).value),ni(i,"label",Gt(e).label)})),Ee(t,i)})),tt((()=>ni(e,"id",`form-field-range-${g()??""}-tickmarks`))),Ee(t,e)})),qe(ge(y,2),f,(t=>{var e=ya(),i=de(e);tt((()=>ai(i,`fas fa-${f()??""}`))),Ee(t,e)})),tt((()=>{ni(n,"id",`form-field-range-${g()??""}`),ni(n,"name",g()),ni(n,"min",l()),ni(n,"max",c()),ni(n,"step",u()),ni(n,"list",`form-field-range-${g()??""}-tickmarks`),ni(n,"invalid",Gt(I)),n.disabled=v(),n.required=p(),n.readOnly=m(),ni(n,"placeholder",Ti(tr,"$LOCALE",i)[h()]),ni(n,"autocomplete",g()),ni(n,"aria-controls",`input-field-helper-${g()??""}`),ni(n,"aria-describedby",`input-field-helper-${g()??""}`),ni(s,"for",`form-field-range-${g()??""}`),je(b,a())})),mi(n,a),Ee(t,e)})),Gr(ge(S,2),{get errors(){return n},set errors(t){n=t},get show(){return s},set show(t){s=t},get classes(){return _},set classes(t){_=t},get id(){return`input-field-helper-${g()??""}`}}),tt((()=>ai(S,`control ${Gt(k)??""}`))),Ee(t,A),te()},UIRangeLogarithmic:function(t,e){Zt(e,!0);const i=xi(),r=Number.MAX_SAFE_INTEGER;let n,s,o=Si(),a=Ui(e,"inputStarted",15,!1),l=Ui(e,"value",15,10),c=Ui(e,"min",3,0),u=Ui(e,"max",3,100),d=Ui(e,"tickmarks",3,!1),h=Ui(e,"placeholder",3,""),g=Ui(e,"fieldname",3,"range"),f=Ui(e,"icon",3,!1),p=Ui(e,"required",3,!0),v=Ui(e,"disabled",3,!1),m=Ui(e,"readonly",3,!1),b=Ui(e,"valid",3,!0),y=Ui(e,"validated",3,!1),O=Ui(e,"errors",3,!1),$=Ui(e,"formErrors",3,!1),w=Ui(e,"formLevelError",3,!1),k=j((()=>(f()?" has-icons-left ":"")+" has-icons-right "));Pi((()=>{n=[].concat(O()?O():[],$()?$():[])})),Pi((()=>{s=!(y()&&b())&&a()}));let _,I=j((()=>!1===b()||w()));Pi((()=>{_=!0!==b()&&a()?Jr.CLASS_ERR:Jr.CLASS_OK}));let A=0,S=100,C=10,L=x(1);function E(){A=Math.log(c()||1),S=Math.log(u()||r),C=(S-A)/100,l()>u()?l(u()):l()<c()?l(c()):l(l())}function T(t){return t=parseInt(t),Math.round(Math.exp((t-0)*C+A))}Pi((()=>{c(),u(),E()})),Ai((()=>{E()}));var N=La(),F=he(N);qe(de(F),m,(t=>{var e=_a(),i=de(e);tt((()=>je(i,l()))),Ee(t,e)}),(t=>{var e=Ca(),r=he(e);ai(r,`input big-number slider has-output is-fullwidth is-success ${_??""}`),ni(r,"min",0),ni(r,"max",100),ni(r,"step",.01),r.__change=[wa,T,l,g,a,o],r.__input=[ka,T,l,g,a,o];var n=ge(r,2),s=de(n),c=ge(n,2);qe(c,(()=>Array.isArray(d())&&d().length),(t=>{var e=Aa();Je(e,21,d,Ge,((t,e)=>{var i=Ia(),r={};tt((()=>{r!==(r=Gt(e).value)&&(i.value=null==(i.__value=Gt(e).value)?"":Gt(e).value),ni(i,"label",Gt(e).label)})),Ee(t,i)})),tt((()=>ni(e,"id",`form-field-range-${g()??""}-tickmarks`))),Ee(t,e)})),qe(ge(c,2),f,(t=>{var e=Sa(),i=de(e);tt((()=>ai(i,`fas fa-${f()??""}`))),Ee(t,e)})),tt((()=>{ni(r,"id",`form-field-range-${g()??""}`),ni(r,"name",g()),ni(r,"list",`form-field-range-${g()??""}-tickmarks`),ni(r,"invalid",Gt(I)),r.disabled=v(),r.required=p(),r.readOnly=m(),ni(r,"placeholder",Ti(tr,"$LOCALE",i)[h()]),ni(r,"autocomplete",g()),ni(r,"aria-controls",`input-field-helper-${g()??""}`),ni(r,"aria-describedby",`input-field-helper-${g()??""}`),ni(n,"for",`form-field-range-${g()??""}`),je(s,l())})),mi(r,(()=>Gt(L)),(t=>D(L,t))),Ee(t,e)})),Gr(ge(F,2),{get errors(){return n},set errors(t){n=t},get show(){return s},set show(t){s=t},get classes(){return _},set classes(t){_=t},get id(){return`input-field-helper-${g()??""}`}}),tt((()=>ai(F,`control ${Gt(k)??""}`))),Ee(t,N),te()},UISelect:sn,UISelectFromModel:function(t,e){Zt(e,!0);const i=Si();let r=Ui(e,"inputStarted",3,!1),n=Ui(e,"placeholder",3,""),s=Ui(e,"emptyValueTitle",3,""),o=Ui(e,"fieldname",3,"selectFromModel"),a=Ui(e,"modelName",3,""),l=Ui(e,"actionName",3,""),c=Ui(e,"actionFilter",19,(()=>({}))),u=Ui(e,"actionSorter",19,(()=>({}))),d=Ui(e,"actionPager",19,(()=>({}))),h=Ui(e,"actionSearch",3,void 0),g=Ui(e,"optionId",3,":_id"),f=Ui(e,"optionTitle",3,":title"),p=Ui(e,"icon",3,!1),v=Ui(e,"required",3,!0),m=Ui(e,"readonly",3,!1),b=Ui(e,"multiple",3,!1),y=Ui(e,"size",3,8),O=Ui(e,"valid",3,!0),$=Ui(e,"validated",3,!1),w=Ui(e,"errors",15,!1),k=Ui(e,"formErrors",3,!1),_=Ui(e,"formLevelError",3,!1),I=Ui(e,"returnVariant",3,!1),A=x(re([])),S=j((()=>!0));Ai((async()=>{if(a()&&l()&&c()){const t=Ar.getApp().getModel(a()).setFilter(c()).setSorter(u()).setPager(d()).setSearch(h()),e=await t["$"+l()]();if(e.status===$n){const t=e.result;D(A,re(t.map((t=>({id:Or.get(g(),t),title:Or.get(f(),t)})))))}else w(result.errors||[result.message])}})),sn(t,{get inputStarted(){return r()},get value(){return e.value},get variants(){return Gt(A)},set variants(t){D(A,re(t))},get placeholder(){return n()},get emptyValueTitle(){return s()},get fieldname(){return o()},get icon(){return p()},get required(){return v()},get readonly(){return m()},get disabled(){return Gt(S)},get multiple(){return b()},get size(){return y()},get valid(){return O()},get validated(){return $()},get errors(){return w()},get formErrors(){return k()},get formLevelError(){return _()},$$events:{change:function(t){I()?i("change",{...t.detail,value:Gt(A).find((e=>e.id===t.detail.value))}):i("change",t.detail)}}}),te()},UISwitch:function(t,e){Zt(e,!0);const i=xi(),r=()=>Ti(tr,"$LOCALE",i);let n=Si(),s=Ui(e,"inputStarted",15,!1),o=Ui(e,"value",15,!1),a=Ui(e,"label",3,""),l=Ui(e,"hideLabel",3,!1),c=Ui(e,"placeholder",3,""),u=Ui(e,"fieldname",3,"textfield");Ui(e,"icon",3,!1);let d,h,g=Ui(e,"required",3,!0),f=Ui(e,"readonly",3,!1),p=Ui(e,"disabled",3,!1),v=Ui(e,"valid",3,!0),m=Ui(e,"styling",3," is-rounded is-success "),b=Ui(e,"validated",3,!1),y=Ui(e,"errors",3,!1),O=Ui(e,"formErrors",3,!1),$=Ui(e,"formLevelError",3,!1);Pi((()=>{d=[].concat(y()?y():[],O()?O():[])})),Pi((()=>{h=!(b()&&v())&&s()}));let w,k=j((()=>!1===v()||$()));function _(t){let e={field:u(),value:"checkbox"===t.currentTarget.type?t.currentTarget.checked:o()};return s(!0),n("change",e),!0}Pi((()=>{w=!0!==v()&&s()?Jr.CLASS_ERR:Jr.CLASS_OK}));var I=xa(),A=he(I);qe(de(A),f,(t=>{var e=Le();qe(he(e),o,(t=>{Fr(t,{values:[{value:!0}]})}),(t=>{Fr(t,{values:[{value:!1}]})})),Ee(t,e)}),(t=>{var e=Ta(),i=he(e);qe(i,(()=>!a()&&!l()),(t=>{Fr(t,{values:[{value:!1}]})}));var d=ge(i,2);d.__input=[Ea,u,o,s,n];var h=ge(d,2);qe(de(h),(()=>!l()),(t=>{var e=Le();qe(he(e),a,(t=>{var e=Ce();tt((()=>je(e,r()[a()]))),Ee(t,e)}),(t=>{Fr(t,{values:[{value:!0}]})})),Ee(t,e)})),tt((()=>{ai(d,`switch ${m()??""}`),ni(d,"id",`form-field-switch-${u()??""}`),ni(d,"placeholder",r()[c()]),ni(d,"name",u()),d.disabled=p(),d.required=g(),d.readOnly=f(),ni(d,"invalid",Gt(k)),ni(d,"aria-controls",`input-field-helper-${u()??""}`),ni(d,"aria-describedby",`input-field-helper-${u()??""}`),ni(h,"for",`form-field-switch-${u()??""}`)})),we("blur",d,_),bi(d,o),Ee(t,e)})),Gr(ge(A,2),{get errors(){return d},set errors(t){d=t},get show(){return h},set show(t){h=t},get classes(){return w},set classes(t){w=t},get id(){return`input-field-helper-${u()??""}`}}),Ee(t,I),te()},UISwitchList:function(t,e){Zt(e,!0);const i=xi();let r=Si(),n=Ui(e,"inputStarted",15,!1),s=Ui(e,"value",31,(()=>re([]))),o=Ui(e,"variants",19,(()=>[]));Ui(e,"label",3,""),Ui(e,"hideLabel",3,!1),Ui(e,"placeholder",3,"");let a=Ui(e,"fieldname",3,"textfield");Ui(e,"icon",3,!1);let l=Ui(e,"required",3,!0),c=Ui(e,"readonly",3,!1);Ui(e,"multiple",3,!0);let u,d,h=Ui(e,"disabled",3,!1),g=Ui(e,"valid",3,!0),f=Ui(e,"styling",3," is-rounded is-success "),p=Ui(e,"validated",3,!1),v=Ui(e,"errors",3,!1),m=Ui(e,"formErrors",3,!1),b=Ui(e,"formLevelError",3,!1);Pi((()=>{u=[].concat(v()?v():[],m()?m():[])})),Pi((()=>{d=!(p()&&g())&&n()}));let y,O=j((()=>!1===g()||b()));function $(t){s().includes(t)||(s().push(t),s(s()))}function w(t){s().includes(t)&&(s().splice(s().indexOf(t),1),s(s()))}function k(t){console.log("switch list element blur",t);const e=t.target.id.split("-variant-").at(-1);console.log(e),t.target.checked?$(e):w(e);let i={field:a(),value:s()};return n(!0),r("change",i),!0}Pi((()=>{y=!0!==g()&&n()?Jr.CLASS_ERR:Jr.CLASS_OK}));var _=Ma(),I=he(_);qe(de(I),c,(t=>{var e=Le();qe(he(e),s,(t=>{var e=Ce();tt((()=>je(e,o().filter((t=>s().includes(t.id))).map((t=>t.title)).join(", ")))),Ee(t,e)})),Ee(t,e)}),(t=>{var e=Le();Je(he(e),17,o,(t=>t.id),((t,e)=>{var o=Fa(),u=de(o);tt((()=>function(t,e){var i=t.__attributes??={};i.checked!==(i.checked=e)&&(t.checked=e)}(u,s().includes(Gt(e).id)))),u.__input=[Na,$,w,a,s,n,r];var d=ge(u,2),g=de(d);tt((()=>{ai(u,`switch ${f()??""}`),ni(u,"id",`form-field-switch-${a()??""}-variant-${Gt(e).id??""}`),ni(u,"name",a()),u.disabled=h(),u.required=l(),u.readOnly=c(),ni(u,"invalid",Gt(O)),ni(u,"aria-controls",`input-field-helper-${a()??""}-variant-${Gt(e).id??""}`),ni(u,"aria-describedby",`input-field-helper-${a()??""}-variant-${Gt(e).id??""}`),ni(d,"for",`form-field-switch-${a()??""}-variant-${Gt(e).id??""}`),je(g,Ti(tr,"$LOCALE",i)[Gt(e).title])})),we("blur",u,k),Ee(t,o)})),Ee(t,e)})),Gr(ge(I,2),{get errors(){return u},set errors(t){u=t},get show(){return d},set show(t){d=t},get classes(){return y},set classes(t){y=t},get id(){return`input-field-helper-${a()??""}`}}),Ee(t,_),te()},UITagSelect:function(t,e){Zt(e,!0);const i=xi(),r=()=>Ti(tr,"$LOCALE",i);let n=Si();Ai((()=>{s(s().filter((t=>y(t)))),s()}));let s=Ui(e,"value",31,(()=>re([]))),o=Ui(e,"inputStarted",3,!1),a=Ui(e,"variants",19,(()=>[])),l=Ui(e,"fieldname",3,"tag"),c=Ui(e,"readonly",3,!1),u=Ui(e,"valid",3,!0),d=Ui(e,"validated",3,!1),h=Ui(e,"errors",3,!1),g=Ui(e,"formErrors",3,!1);Ui(e,"formLevelError",3,!1);let f=Ui(e,"beforeAdd",3,(()=>!0)),p=Ui(e,"getItemId",3,(t=>t.id)),v=Ui(e,"getItemTitle",3,(t=>t.title)),m=Ui(e,"getItemType",3,(t=>"info")),b=Ui(e,"buildItem",3,(t=>({id:p()(t),title:v()(t),type:m()(t)})));function y(t){return a().find((e=>p()(e)===t))}function O(){let t={field:l(),value:s()};n("change",t)}let $,w,k,_=j((()=>s().map(y).filter((t=>t)).map(b())));Pi((()=>{$=[].concat(h()?h():[],g()?g():[])})),Pi((()=>{w=!(d()&&u())&&o()})),Pi((()=>{k=!0!==u()&&o()?Jr.CLASS_ERR:Jr.CLASS_OK}));var I=Ba(),A=he(I),S=de(A);ai(S,`column ${k??""}`),Je(S,21,(()=>Gt(_)),(t=>t.id),((t,e)=>{var i=Pa(),n=de(i);qe(ge(n),(()=>!c()),(t=>{var i=Ua();i.__click=[Ra,s,O],tt((()=>ni(i,"data-id",Gt(e).id))),Ee(t,i)})),tt((()=>{ai(i,`mx-1 tag is-${Gt(e).type??""}`),je(n,`${r()[Gt(e).title]??""} `)})),Ee(t,i)})),qe(ge(S,2),(()=>!c()),(t=>{var e=Wa(),i=de(e),n=de(i),o=de(n),l=de(o);l.value=null==(l.__value="-1")?"":"-1";var c=de(l);Je(ge(l),17,a,Ge,((t,e)=>{var i=ja(),n={},s=de(i);tt((()=>{n!==(n=Gt(e).id)&&(i.value=null==(i.__value=Gt(e).id)?"":Gt(e).id),je(s,r()[Gt(e).title])})),Ee(t,i)}));var u=ge(n,2);u.__click=[Da,y,f,a,s,O];var d=de(u);tt((()=>{je(c,r()["not-node:select_from_list_label"]),je(d,r()["not-node:add_label"])})),Ee(t,e)})),Gr(ge(A,2),{get errors(){return $},set errors(t){$=t},get show(){return w},set show(t){w=t},get classes(){return k},set classes(t){k=t},get id(){return`input-field-helper-${l()??""}`}}),Ee(t,I),te()},UITelephone:function(t,e){Zt(e,!0);const i=xi();let r,n,s=Si(),o=Ui(e,"inputStarted",15,!1),a=Ui(e,"value",15,""),l=Ui(e,"placeholder",3,"+7 (987) 654-32-10"),c=Ui(e,"fieldname",3,"telephone"),u=Ui(e,"icon",3,!1),d=Ui(e,"required",3,!0),h=Ui(e,"readonly",3,!1),g=Ui(e,"valid",3,!0),f=Ui(e,"validated",3,!1),p=Ui(e,"errors",3,!1),v=Ui(e,"formErrors",3,!1),m=Ui(e,"formLevelError",3,!1),b=j((()=>(u()?" has-icons-left ":"")+" has-icons-right "));Pi((()=>{r=[].concat(p()?p():[],v()?v():[])})),Pi((()=>{n=!(f()&&g())&&o()}));let y,O=j((()=>!1===g()||m()));Pi((()=>{y=!0!==g()&&o()?Jr.CLASS_ERR:Jr.CLASS_OK}));var $=Qa(),w=he($);qe(de(w),h,(t=>{var e=qa(),i=de(e);tt((()=>je(i,a()))),Ee(t,e)}),(t=>{var e=Ya(),r=he(e);ai(r,`input ${y??""}`),r.__change=[za,c,a,o,s],r.__input=[Va,c,a,o,s];var n=ge(r,2);qe(n,u,(t=>{var e=Ha(),i=de(e);tt((()=>ai(i,`fas fa-${u()??""}`))),Ee(t,e)})),qe(ge(n,2),(()=>!0===f()),(t=>{var e=Ja();qe(de(e),(()=>!0===g()),(t=>{Ee(t,Ka())}),(t=>{var e=Le();qe(he(e),(()=>!1===g()),(t=>{Ee(t,Ga())}),null,!0),Ee(t,e)})),Ee(t,e)})),tt((()=>{ni(r,"id",`form-field-telephone-${c()??""}`),ni(r,"name",c()),ni(r,"invalid",Gt(O)),r.required=d(),r.readOnly=h(),ni(r,"placeholder",Ti(tr,"$LOCALE",i)[l()]),ni(r,"autocomplete",c()),ni(r,"aria-controls",`input-field-helper-${c()??""}`),ni(r,"aria-describedby",`input-field-helper-${c()??""}`)})),mi(r,a),Ee(t,e)})),Gr(ge(w,2),{get errors(){return r},set errors(t){r=t},get show(){return n},set show(t){n=t},get classes(){return y},set classes(t){y=t},get id(){return`input-field-helper-${c()??""}`}}),tt((()=>ai(w,`control ${Gt(b)??""}`))),Ee(t,$),te()},UITextarea:no,UITextfield:jn}),Za=Se("<!> <!>",1);var tl=Se('<div class="is-fab svelte-1haul9u"><!></div>');var el=Se("<span><span><i></i> <span> </span></span></span>"),il=Se("<span><i></i></span>");function rl(t,e){Zt(e,!0);const i=xi();let r=Ui(e,"title",3,""),n=Ui(e,"font",3,""),s=Ui(e,"size",3,""),o=Ui(e,"pointable",3,!1);var a=Le();qe(he(a),r,(t=>{var e=el(),a=de(e),l=de(a),c=de(ge(l,2));tt((()=>{ai(e,`icon-text ${(o()?"is-clickable":"")??""}`),ai(a,`icon ${(s()?`is-${s()}`:"")??""}`),ai(l,`is-title-icon fas\n      fa-${n()??""}\n      ${("medium"==s()?"fa-lg":"")??""}\n      ${("large"==s()?"fa-2x":"")??""}\n      `),je(c,Ti(tr,"$LOCALE",i)[r()])})),Ee(t,e)}),(t=>{var e=il(),i=de(e);tt((()=>{ai(e,`\n        ${(o()?"is-clickable":"")??""}\n        icon ${(s()?`is-${s()}`:"")??""} ${("medium"==s()?"fa-lg":"")??""}\n${("large"==s()?"fa-2x":"")??""}`),ai(i,`fas fa-${n()??""}`)})),Ee(t,e)})),Ee(t,a),te()}var nl=Se('<span class="icon"><!></span>'),sl=Se("<figure><img></figure>");function ol(t,e){let i=Ui(e,"title",3,""),r=Ui(e,"size",3,""),n=Ui(e,"font",3,""),s=Ui(e,"svg",3,""),o=Ui(e,"src",3,"");var a=Le();qe(he(a),n,(t=>{rl(t,{get font(){return n()},get size(){return r()},get title(){return i()}})}),(t=>{var r=Le();qe(he(r),s,(t=>{var e=nl();ti(de(e),s),Ee(t,e)}),(t=>{var r=Le();qe(he(r),o,(t=>{var r=sl(),n=de(r);tt((()=>{ai(r,`image ${(e.width&&e.height?`is-${e.width}x${e.height}`:"")??""} `),ni(n,"src",o()),ni(n,"title",i()),ni(n,"alt",i()),ni(n,"width",e.width),ni(n,"height",e.height)})),Ee(t,r)}),null,!0),Ee(t,r)}),!0),Ee(t,r)})),Ee(t,a)}var al=Object.freeze({__proto__:null,UIIcon:ol,UIIconButtonWithTag:function(t,e){let i=Ui(e,"button",19,(()=>({}))),r=Ui(e,"tag",19,(()=>({})));var n=Za(),s=he(n);hn(s,Ri(i)),Tr(ge(s,2),Ri(r,{classes:"is-top-right"})),Ee(t,n)},UIIconFloating:function(t,e){Zt(e,!0);let i=Ui(e,"trigger",19,(()=>({title:"Click me!",icon:"plus",color:"primary",size:"medium"}))),r=x("");Ai((()=>{D(r,"")}));var n=tl();hn(de(n),Ri({action:function(){}},i)),tt((()=>ni(n,"style",Gt(r)))),Ee(t,n),te()},UIIconFont:rl});function ll(t,e){let i=Ui(e,"values",19,(()=>[]));var r=Le();Je(he(r),17,i,(t=>t.url),((t,i)=>{ga(t,Ri((()=>Gt(i)),{$$events:{click(t){Ii.call(this,e,t)}}}))})),Ee(t,r)}var cl=Object.freeze({__proto__:null,UIImage:ga,UIImages:ll}),ul=Object.freeze({__proto__:null,UILink:Oo,UILinks:ko}),dl=Se('<div class="column box"> </div>'),hl=Se('<div class="columns"><div class="column"><!></div> <!> <div class="column"><!></div></div>');function gl(t,e){Zt(e,!0);const i=xi(),r=()=>Ti(tr,"$LOCALE",i),n=Si();let s=Ui(e,"page",3,0),o=Ui(e,"pages",3,0),a=Ui(e,"buttonComponent",3,hn),l=Ui(e,"buttonComponentProps",19,(()=>({})));var c=Le();qe(he(c),(()=>o()>0),(t=>{var e=hl(),i=de(e);qe(de(i),(()=>s()>1),(t=>{var e=Le();const i=j(a);ri(he(e),(()=>Gt(i)),((t,e)=>{e(t,Ri(l,{action:()=>n("prev"),children:(t,e)=>{var i=Ce();tt((()=>je(i,r()["not-node:list_navigation_prev_button_label"]))),Ee(t,i)},$$slots:{default:!0}}))})),Ee(t,e)}));var c=ge(i,2);qe(c,(()=>o()>1),(t=>{var e=dl(),i=de(e);tt((()=>je(i,`${s()??""} / ${o()??""}`))),Ee(t,e)})),qe(de(ge(c,2)),(()=>s()<o()),(t=>{var e=Le();const i=j(a);ri(he(e),(()=>Gt(i)),((t,e)=>{e(t,Ri(l,{action:()=>n("next"),children:(t,e)=>{var i=Ce();tt((()=>je(i,r()["not-node:list_navigation_next_button_label"]))),Ee(t,i)},$$slots:{default:!0}}))})),Ee(t,e)})),Ee(t,e)})),Ee(t,c),te()}var fl=Se('<div class="box list-item-selectable svelte-ialyiy" role="button" tabindex="0"><span> </span></div>');function pl(t,e){Zt(e,!0);const i=Si();function r(){i("click",{_id:e._id,id:e.id,title:e.title})}var n=fl(),s=j((()=>ki(r)));n.__click=function(...t){Gt(s)?.apply(this,t)},n.__keyup=r;var o=de(n),a=de(o);tt((()=>je(a,e.title))),Ee(t,n),te()}ke(["click","keyup"]);var vl=Se("<div><!></div> <!>",1);function ml(t,e){Zt(e,!0);const i=Si();let r=Ui(e,"data",31,(()=>re({list:[],skip:0,count:0,page:0,pages:0}))),n=Ui(e,"itemComponent",3,pl),s=Ui(e,"itemComponentProps",19,(()=>({}))),o=Ui(e,"emptyListPlaceholderComponent",3,go),a=Ui(e,"emptyListPlaceholderComponentProps",19,(()=>({}))),l=Ui(e,"listNavigationComponent",3,gl),c=Ui(e,"listNavigationComponentProps",19,(()=>({})));function u({detail:t}){i("select",t)}const d=j(l);var h=vl(),g=he(h);qe(de(g),(()=>r().list.length),(t=>{var e=Le();Je(he(e),17,(()=>r().list),(t=>t.id),((t,e)=>{var i=Le();const r=j(n);ri(he(i),(()=>Gt(r)),((t,i)=>{i(t,Ri(s,(()=>Gt(e)),{$$events:{click:u}}))})),Ee(t,i)})),Ee(t,e)}),(t=>{var e=Le();const i=j(o);ri(he(e),(()=>Gt(i)),((t,e)=>{e(t,Ri(a))})),Ee(t,e)})),ri(ge(g,2),(()=>Gt(d)),((t,i)=>{i(t,Ri(c,{get page(){return r().page},set page(t){r(r().page=t,!0)},get pages(){return r().pages},set pages(t){r(r().pages=t,!0)},get skip(){return r().skip},set skip(t){r(r().skip=t,!0)},get count(){return r().count},set count(t){r(r().count=t,!0)},$$events:{prev(t){Ii.call(this,e,t)},next(t){Ii.call(this,e,t)}}}))})),Ee(t,h),te()}var bl=Se("<!> <!>",1);var yl=Object.freeze({__proto__:null,UIEndlessList:ml,UIEndlessListNavigation:gl,UIEndlessListSimpleItem:pl,UIList:No,UIListEmptyPlaceholder:go,UIListItem:To,UIListSelect:function(t,e){Zt(e,!0);const i=Si();let r=Ui(e,"fieldname",3,"list-select"),n=Ui(e,"multiple",3,!1),s=Ui(e,"atLeastOne",3,!0),o=Ui(e,"variants",31,(()=>re([]))),a=Ui(e,"value",15),l=Ui(e,"selectedVariantsIds",31,(()=>re([]))),c=Ui(e,"titleComponent",3,Ln),u=Ui(e,"titleComponentProps",19,(()=>({size:5}))),d=Ui(e,"imageComponent",3,ga),h=Ui(e,"imageComponentProps",19,(()=>({covered:!0}))),g=Ui(e,"descriptionComponent",3,fn),f=Ui(e,"descriptionComponentProps",19,(()=>({}))),p=Ui(e,"listComponent",3,No),v=Ui(e,"listComponentProps",19,(()=>({}))),m=Ui(e,"sublimeValue",3,(t=>t.id)),b=Ui(e,"getItem",3,(({valueId:t})=>o().find((e=>e.value.id===t)))),y=Ui(e,"getItemValue",3,(({valueId:t})=>b()({valueId:t}).value)),O=Ui(e,"getDefaultItemSublime",3,(()=>o()[0].id)),$=Ui(e,"uiOn",3,(t=>{t.color="success",t.outlined=!1})),w=Ui(e,"uiOff",3,(t=>{t.color=!1,t.outlined=!0}));function k(){return Array.isArray(a())?l().length:0}Ai((()=>{a()&&Array.isArray(a())?s()&&a().length&&a().forEach((t=>{S(I(t))})):function(){if(s()&&o().length>0){A({id:O()()})}}()}));const _=()=>!(s()&&1===k());function I(t){const e=m()(t);let i={on:void 0,off:void 0};return Array.isArray(l())||l([]),n()?l().includes(e)?_()&&(l().splice(l().indexOf(e),1),i.off={valueId:e}):(l().push(e),i.on={valueId:e}):s()?l().includes(e)||(k()>0&&(i.off={valueId:l().pop()}),i.on={valueId:e},l([e])):l().includes(e)?(i.off={valueId:e},l().splice(l().indexOf(e),1)):(i.on={valueId:e},l().push(e)),l(l()),i}function A(t){S(I(t)),function(){let t=[];void 0!==l()&&Array.isArray(l())&&(t=l().filter((t=>void 0!==t)).map((t=>y()({valueId:t}))));a(t)}(),i("change",{field:r(),value:a()})}function S(t){t.off&&w()(b()(t.off)),t.on&&$()(b()(t.on)),o(o())}const C=j(p);var L=Le(),E=he(L),T=j((()=>({...f(),action(t,e){A(e)}})));ri(E,(()=>Gt(C)),((t,e)=>{e(t,Ri(v,{get items(){return o()},set items(t){o(t)},get titleComponent(){return c()},get titleComponentProps(){return u()},get descriptionComponent(){return g()},get descriptionComponentProps(){return Gt(T)},get imageComponent(){return d()},get imageComponentProps(){return h()}}))})),Ee(t,L),te()},UIListSelectButtonsWithGroups:function(t,e){Zt(e,!0);const i=Si();let r=Ui(e,"fieldname",3,"list-select-tags"),n=Ui(e,"variants",31,(()=>re([])));Ui(e,"variantsSelected",19,(()=>({})));let s=Ui(e,"value",15),o=Ui(e,"titleComponent",3,Ln),a=Ui(e,"titleComponentProps",19,(()=>({size:5}))),l=Ui(e,"imageComponent",3,ga),c=Ui(e,"imageComponentProps",19,(()=>({covered:!0}))),u=Ui(e,"descriptionComponent",3,yn),d=Ui(e,"descriptionComponentProps",19,(()=>({}))),h=Ui(e,"listComponent",3,No),g=Ui(e,"listComponentProps",19,(()=>({}))),f=Ui(e,"actionsList",19,(()=>["selectAll","deselectAll"])),p=Ui(e,"sublimeValue",3,(t=>({groupId:t.group,valueId:t.id})));const v={selectAll:{title:"Выбрать все",color:"success",action(){b()}},deselectAll:{title:"Снять выделение со всех",color:"",action(){y()}}};let m=x(re([]));Ai((()=>{f().forEach((t=>{Object.hasOwn(v,t)&&Gt(m).push(v[t])})),D(m,re(Gt(m)))}));const b=()=>{$(!0)},y=()=>{$(!1)},O=(t,e)=>{n().forEach((i=>{t===i.id&&i.description.values.forEach((t=>{t.selected=e}))})),n(n()),k()},$=t=>{n().forEach((e=>{e.description.values.forEach((e=>{e.selected=t}))})),n(n()),k()};function w(){let t={};return n().forEach((e=>{Object.hasOwn(t,e.id)||(t[e.id]=[]),e.description.values.forEach((i=>{i.selected&&t[e.id].push(p()(i.value))}))})),t}function k(){s(w()),i("change",{fieldname:r(),value:s()})}const _=j(h);var I=bl(),A=he(I);fn(A,{get values(){return Gt(m)},centered:!0});var S=ge(A,2),C=j((()=>({action:(t,e,i)=>(setTimeout(k,0),!i),...d()})));return ri(S,(()=>Gt(_)),((t,e)=>{e(t,Ri(g,{get items(){return n()},set items(t){n(t)},get titleComponent(){return o()},get titleComponentProps(){return a()},get descriptionComponent(){return u()},get descriptionComponentProps(){return Gt(C)},get imageComponent(){return l()},get imageComponentProps(){return c()}}))})),Ee(t,I),te({selectAll:b,deselectAll:y,selectGroup:t=>{O(t,!0)},deselectGroup:t=>{O(t,!1)},setSelectionOfGroup:O,setSelectionOfAll:$,getSelectedItems:w})},UIListSelectWithGroups:function(t,e){Zt(e,!0);const i=Si();let r=Ui(e,"fieldname",3,"list-select-tags"),n=Ui(e,"multiple",3,!1),s=Ui(e,"onlyOneInGroup",3,!0),o=Ui(e,"atLeastOne",3,!0),a=Ui(e,"variants",31,(()=>re([]))),l=Ui(e,"variantsSelected",31,(()=>re({}))),c=Ui(e,"value",15),u=Ui(e,"titleComponent",3,Ln),d=Ui(e,"titleComponentProps",19,(()=>({size:5}))),h=Ui(e,"imageComponent",3,ga),g=Ui(e,"imageComponentProps",19,(()=>({covered:!0}))),f=Ui(e,"descriptionComponent",3,fn),p=Ui(e,"descriptionComponentProps",19,(()=>({}))),v=Ui(e,"listComponent",3,No),m=Ui(e,"listComponentProps",19,(()=>({}))),b=Ui(e,"sublimeValue",3,(t=>({groupId:t.group,valueId:t.id}))),y=Ui(e,"getItem",3,(({groupId:t,valueId:e})=>a().find((e=>e.id===t)).description.values.find((t=>t.value.id===e)))),O=Ui(e,"getItemValue",3,(({groupId:t,valueId:e})=>y()({groupId:t,valueId:e}).value)),$=Ui(e,"getDefaultItemSublime",3,(()=>({groupId:a()[0].id,valueId:a()[0].description.values[0].value.id}))),w=Ui(e,"uiOn",3,(t=>{t.color="success",t.outlined=!1})),k=Ui(e,"uiOff",3,(t=>{t.color=!1,t.outlined=!1}));function _(t){const{valueId:e,groupId:i}=b()(t);let r={on:void 0,off:void 0};return n()?(s()?(void 0!==l()[i]&&(r.off={groupId:i,valueId:l()[i]}),l(l()[i]=e,!0),r.on={groupId:i,valueId:e}):(Array.isArray(l()[i])||l(l()[i]=[],!0),l()[i].includes(e)?function(){let t=0;if(n())for(let e of Object.values(l()))s()?void 0!==e&&(t+=1):void 0!==e&&Array.isArray(e)&&(t+=e.length);else void 0!==l()&&void 0!==l().value&&void 0!==l().group&&(t+=1);return t}()>1&&(l()[i].splice(l()[i].indexOf(e),1),r.off={groupId:i,valueId:e}):(l()[i].push(e),r.on={groupId:i,valueId:e}),l(l()[i]=l()[i],!0)),l(l())):l()&&l().groupId===i&&l().valueId===e?o()||(l(void 0),r.off={groupId:i,valueId:e}):(l()&&void 0!==l().groupId&&(r.off={groupId:l().groupId,valueId:l().valueId}),r.on={groupId:i,valueId:e},l({groupId:i,valueId:e})),r}function I(t){let e=_(t);console.log("image value",c(),e),A(e),function(){if(n()){let t={};if(s())for(let e in l())void 0!==l()[e]&&(t[e]=O()({groupId:e,valueId:l()[e]}));else for(let e in l())void 0!==l()[e]&&Array.isArray(l()[e])&&(t[e]=l()[e].filter((t=>void 0!==t)).map((t=>O()({groupId:e,valueId:t}))));0==Object.keys(t).length?c(void 0):c(t)}else l()?c(O()(l())):c(void 0)}(),i("change",{field:r(),value:c()})}function A(t){t.off&&k()(y()(t.off)),t.on&&w()(y()(t.on)),a(a())}Ai((()=>{if(c())if(n())if(s())for(let t of Object.keys(c())){A(_(c()[t]))}else for(let t of Object.keys(c()))c()[t].forEach((t=>{A(_(t))}));else{A(_(c()))}else!function(){if(o()&&a().length>0){const t=$()();I({id:t.valueId,group:t.groupId})}}()}));const S=j(v);var C=Le(),L=he(C),E=j((()=>({...p(),action(t,e){I(e)}})));ri(L,(()=>Gt(S)),((t,e)=>{e(t,Ri(m,{get items(){return a()},set items(t){a(t)},get titleComponent(){return u()},get titleComponentProps(){return d()},get descriptionComponent(){return f()},get descriptionComponentProps(){return Gt(E)},get imageComponent(){return h()},get imageComponentProps(){return g()}}))})),Ee(t,C),te()}});function Ol(t,e,i){e()&&i(t)}function $l(t,e){e()}var wl=Se("<button></button>"),kl=Se('<div role="button" tabindex="0"><!> <!></div>');function _l(t,e){Zt(e,!0);let i=x("");const r=Si();let n=Ui(e,"closeButton",3,!1),s=Ui(e,"show",3,!0),o=Ui(e,"closeOnClick",3,!0),a=Ui(e,"closeSize",3,"normal"),l=Ui(e,"layer",3,1),c=Ui(e,"classes",3,"");function u(t){try{if(t&&t.originalTarget){const e=t.originalTarget;e.classList&&e.classList.contains("is-overlay")&&h()}}catch(t){}}function h(t={}){r("reject",t)}var g;Pi((()=>{s()?document.body.style.overflow="hidden":document.body.style.overflow=Gt(i)})),Ai((()=>{D(i,re(document.body.style.overflow))})),g=()=>{document.body.style.overflow=Gt(i)},null===Mt&&mt(),Ai((()=>()=>Jt(g)));var f=Le();qe(he(f),s,(t=>{var i=kl();i.__click=[Ol,o,u],i.__keyup=[Ol,o,u];var r=de(i);qe(r,n,(t=>{var e=wl();e.__click=[$l,h],tt((()=>ai(e,`delete is-${a()??""}`))),Ee(t,e)})),ii(ge(r,2),(()=>e.children??d)),tt((()=>{ai(i,`is-overlay not-overlay ${c()??""}`),ni(i,"style",`z-index: ${1e3*l()??""};`)})),pi(3,i,(()=>Kn)),Ee(t,i)})),Ee(t,f),te()}ke(["click","keyup"]);var Il=Se('<div><span class="title"> </span></div> <!> <!> <!>',1),Al=Se("<!> <!>",1);var Sl=Se("<div><!> <!> <!></div>");function Cl(t,e){Zt(e,!0);const i=xi();let r=Si(),n=Ui(e,"show",3,!0),s=Ui(e,"term",15,""),o=Ui(e,"size",3,"narrow"),a=Ui(e,"inputComponent",3,Bn),l=Ui(e,"inputComponentProps",19,(()=>({}))),c=Ui(e,"outputComponent",3,ml),u=Ui(e,"outputComponentProps",19,(()=>({}))),d=Ui(e,"results",31,(()=>re({list:[],page:0,pages:0,skip:0,count:0})));Ai((()=>{}));const h=[{title:Ti(tr,"$LOCALE",i)["not-node:button_cancel_label"],action:()=>{r("reject")}}];function g({detail:t}){console.log("selected user",t),r("resolve",t)}_l(t,{get show(){return n()},closeOnClick:!0,closeButton:!1,$$events:{reject:function(){r("reject")}},children:(t,i)=>{var r=Sl();const n=j(a),f=j(c);var p=de(r);ri(p,(()=>Gt(n)),((t,i)=>{i(t,Ri({get term(){return s()},set term(t){s(t)}},l,{$$events:{termChange(t){Ii.call(this,e,t)}}}))}));var v=ge(p,2);ri(v,(()=>Gt(f)),((t,i)=>{i(t,Ri({get data(){return d()},set data(t){d(t)}},u,{$$events:{prev(t){Ii.call(this,e,t)},next(t){Ii.call(this,e,t)},select:g}}))})),fn(ge(v,2),{values:h,centered:!0,classes:"mt-5"}),tt((()=>ai(r,`paper box block ${o()??""} svelte-1gllhdk`))),Ee(t,r)},$$slots:{default:!0}}),te()}var Ll=Object.freeze({__proto__:null,UIGenericSelector:Cl,UIModal:function(t,e){Zt(e,!0);const i=xi(),r=()=>Ti(tr,"$LOCALE",i);let n=Ui(e,"buttonsPosition",3,"bottom"),s=Ui(e,"closeButton",3,!1),o=Ui(e,"applyButton",3,!1),a=Ui(e,"titleSize",3,2),l=Ui(e,"show",3,!1),c=Ui(e,"loading",3,!1),u=Ui(e,"title",3,"Modal window"),h=Ui(e,"subtitle",3,""),g=Ui(e,"classes",3,""),f=Ui(e,"overlayClasses",3,""),p=Ui(e,"buttonsClasses",3,""),v=Ui(e,"WAITING_TEXT",3,"Обработка");_l(t,{get show(){return l()},closeOnClick:!1,closeButton:!1,get classes(){return f()},children:(t,i)=>{Hi(t,{get classes(){return g()},children:(t,i)=>{var l=Al(),g=he(l);Ln(g,{get size(){return a()},get title(){return r()[u()]},get subtitle(){return r()[h()]}}),Ji(ge(g,2),{children:(t,i)=>{var a=Il(),l=he(a),u=de(l),h=de(u),g=ge(l,2);qe(g,(()=>"top"===n()),(t=>{var e=j((()=>s()?[s()]:[])),i=j((()=>o()?[o()]:[]));vn(t,{get classes(){return p()},get left(){return Gt(e)},get right(){return Gt(i)}})}));var f=ge(g,2);ii(f,(()=>e.children??d)),qe(ge(f,2),(()=>"bottom"===n()),(t=>{var e=j((()=>p()||"is-footer is-mobile")),i=j((()=>s()?[s()]:[])),r=j((()=>o()?[o()]:[]));vn(t,{get classes(){return Gt(e)},get left(){return Gt(i)},get right(){return Gt(r)}})})),tt((()=>{ai(l,`pageloader ${(c()?"is-active":"")??""}`),je(h,r()[v()])})),Ee(t,a)},$$slots:{default:!0}}),Ee(t,l)},$$slots:{default:!0}})},$$slots:{default:!0}}),te()},UIOverlay:_l}),El=Se('<article class="message is-danger"><div class="message-header"><p> </p></div> <div class="message-body"> </div></article>');function Tl(t,e){Zt(e,!0);const i=xi(),r=()=>Ti(tr,"$LOCALE",i);var n=El(),s=de(n),o=de(s),a=de(o),l=de(ge(s,2));tt((()=>{je(a,r()[e.title]),je(l,r()[e.message])})),Ee(t,n),te()}var xl=Se('<article class="message is-success"><div class="message-header"><p> </p></div> <div class="message-body"> </div></article>');function Nl(t,e){Zt(e,!0);const i=xi(),r=()=>Ti(tr,"$LOCALE",i);var n=xl(),s=de(n),o=de(s),a=de(o),l=de(ge(s,2));tt((()=>{je(a,r()[e.title]),je(l,r()[e.message])})),Ee(t,n),te()}function Fl(t,e){localStorage.setItem("cookie_date",Date.now()),e(!1)}var Ml=Se('<div id="cookie_notification" class="svelte-19d5xat"><p class="svelte-19d5xat"> </p> <button class="button is-success cookie_accept svelte-19d5xat"> </button></div>');ke(["click"]);var Rl=Object.freeze({__proto__:null,UICookieNotification:function(t,e){Zt(e,!0);const i=xi(),r=()=>Ti(tr,"$LOCALE",i);let n=Ui(e,"show",15,!1),s=Ui(e,"message",3,"Для улучшения работы сайта и его взаимодействия с пользователями мы используем файлы cookie. Продолжая работу с сайтом, Вы разрешаете использование cookie-файлов. Вы всегда можете отключить файлы cookie в настройках Вашего браузера."),o=Ui(e,"agree",3,"Хорошо");Ai((()=>{let t=localStorage.getItem("cookie_date");(!t||+t+31536e6<Date.now())&&n(!0)}));var a=Le();qe(he(a),n,(t=>{var e=Ml(),i=de(e),a=de(i),l=ge(i,2);l.__click=[Fl,n];var c=de(l);tt((()=>{je(a,r()[s()]),je(c,r()[o()])})),Ee(t,e)})),Ee(t,a),te()},UIError:Tl,UISuccess:Nl}),Dl=Object.freeze({__proto__:null,Blocks:Yi,Buttons:On,Forms:Xa,Icons:al,Images:cl,Layouts:Vo,Links:ul,Lists:yl,Modals:Ll,Notifications:Rl,UICommon:Jr,Various:zn});const Ul=Symbol("init"),Pl=Symbol("data"),jl=Symbol("working"),Wl=Symbol("options");class Bl extends ur{constructor(t){return super(),this[Pl]={},this[jl]={},this[Wl]={},this[Ul](t),this}[Ul](t){t||(t={}),Object.hasOwn(t,"data")&&this.setData(t.data),Object.hasOwn(t,"working")&&this.setWorking(t.working),Object.hasOwn(t,"options")&&this.setOptions(t.options),this.log=Ar.genLogMsg(this.getWorking("name")),this.info=this.log,this.debug=Ar.genLogDebug(this.getWorking("name")),this.error=Ar.genLogError(this.getWorking("name"))}setCommon(t,e){switch(e.length){case 1:t=e[0];break;case 2:Or.set(e[0],t,void 0,e[1])}return this}getCommon(t,e){switch(e.length){case 1:return Or.get(e[0],t);case 2:{let i=Or.get(e[0],t);return void 0===i?e[1]:i}default:return t}}setData(){return 1===arguments.length?this[Pl]=arguments[0]:this.setCommon(this.getData(),arguments),this.emit("change"),this}getData(){return this.getCommon(this[Pl],arguments)}setOptions(){return 1===arguments.length?this[Wl]=arguments[0]:this.setCommon(this.getOptions(),arguments),this}getOptions(){return this.getCommon(this[Wl],arguments)}setWorking(){return 1===arguments.length?this[jl]=arguments[0]:this.setCommon(this.getWorking(),arguments),this}getWorking(){return this.getCommon(this[jl],arguments)}report(t){Ar.report&&Ar.report(t)}getApp(){return Ar.getApp()}destroy(){this.removeEvent(),this.setOptions(null),this.setWorking(null),this.setData(null),this.emit("destroy")}}const zl=Symbol("history"),Vl=Symbol("hash");var ql=new class extends Bl{constructor(){return super({working:{routes:[],mode:zl,root:"/",initialized:!1,delays:wn,delay_default:kn}}),mr(this,"host",""),this}setDelays(t){return this.setWorking("delays",t),this}setDefaultNavigationDelay(t){return this.setWorking("delay_default",this.delayAsMs(t)),this}getDefaultNavigationDelay(){return this.getWorking("delay_default",kn)}delayAsMs(t){return"number"==typeof t?t:"string"==typeof t&&t.length>0?this.getWorking(`delays.${t}`,this.getDefaultNavigationDelay()):this.getDefaultNavigationDelay()}navigateWithDelay(t,e,i){var r=this;return setTimeout((function(){"function"==typeof i&&i(),r.navigate(t)}),this.delayAsMs(e))}history(){this.setWorking("mode",zl)}hash(){this.setWorking("mode",Vl)}setRoot(t){return this.setWorking("root",t&&"/"!==t?"/"+this.clearSlashes(t)+"/":"/"),this}clearSlashes(t){return t.toString().replace(/\/$/,"").replace(/^\//,"")}add(t,e){"function"==typeof t&&(e=t,t="");let i={re:t,handler:e};return this.getWorking("routes").push(i),this}addList(t){for(let e in t)this.add(e,t[e]);return this}remove(t){for(var e,i=0;this.getWorking("routes").length,e=this.getWorking("routes")[i];i++)if(e.handler===t||e.re===t)return this.getWorking("routes").splice(i,1),this;return this}flush(){return this.setWorking({routes:[],mode:zl,root:"/"}),this}isInitialized(){return this.getWorking("initialized")}setInitialized(t=!0){return this.setWorking("initialized",t)}getFragment(){var t="";if(this.getWorking("mode")===zl){if(!location)return"";t=(t=this.clearSlashes(decodeURI(location.pathname+location.search))).replace(/\?(.*)$/,""),t="/"!=this.getWorking("root")?t.replace(this.getWorking("root"),""):t}else{if(!window)return"";var e=window.location.href.match(/#(.*)$/);t=e?e[1]:""}return this.clearSlashes(t)}checkLocation(){let t=this.getWorking("current"),e=this.getFragment(),i=this.isInitialized();t===e&&i||(this.setWorking("current",e),this.check(e),this.setInitialized(!0))}hrefClick(){}getRoot(){return this.getWorking("root")}listen(t=50){return this.setWorking("current","notInitialized"),clearInterval(this.getWorking("interval")),this.setWorking("interval",setInterval(this.checkLocation.bind(this),t)),window.addEventListener("popstate",this.hrefClick.bind(this)),this}check(t){let e=t||this.getFragment(),i=null;for(let t=0;t<this.getWorking("routes").length;t++){let r=this.getWorking("root")+this.getWorking("routes")[t].re,n=this.clearSlashes(decodeURI(r)),s=e.match(n);if(s&&s.length){if(""!==n)return s.shift(),this.getWorking("routes")[t].handler.apply(this.host||{},s),this.emit("afterRoute",this.getWorking("routes")[t]),this;s.shift(),i={route:this.getWorking("routes")[t],match:s}}}return i&&(i.route.handler.apply(this.host||{},i.match),this.emit("afterRoute",i.route)),this}refresh(t=0){var e=this;t>0?setTimeout((function(){return e.refresh()}),t):this.check(this.getWorking("current"))}navigate(t){switch(t=t||"",this.getWorking("mode")){case zl:{const e=this.getFullRoute(t);e===this.lastRoute?this.refresh():(this.lastRoute=e,history.pushState(null,"",this.lastRoute));break}case Vl:window.location.href.match(/#(.*)$/),window.location.href=window.location.href.replace(/#(.*)$/,"")+"#"+t}return this}getFullRoute(t=""){t=this.clearSlashes(t);const e=this.getWorking("root");return"/"!==e&&0===t.indexOf(e.substring(1))?"/"+t:this.getWorking("root")+this.clearSlashes(t)}getAllLinks(){const t=document.body.querySelectorAll("a");let e=[];for(let i=0;i<t.length;i++)for(let r=0,n=t[i].attributes,s=n.length;r<s;r++)if(0===n[r].nodeName.indexOf("n-href")){e.push(t[i]);break}return e}reRouteExisted(){const t=this.getAllLinks();for(let e=0;e<t.length;e++)this.initRerouting(t[e],t[e].getAttribute("n-href"));return this}initRerouting(t,e){var i=this;if(!t.notRouterInitialized){let r=this.getFullRoute(e);t.setAttribute("href",r),t.addEventListener("click",(function(t){return t.preventDefault(),i.navigate(e),!1})),t.notRouterInitialized=!0}return this}};class Hl extends Bl{constructor(t={}){return super({working:{name:t.name?t.name:"APIQuee"},options:t}),this.busy=!1,this.queue=[],this.busySince=-1,this.afterEmpty=void 0,this.start(),this}stop(){this.interval&&(clearInterval(this.interval),this.interval=void 0,this.busy=!1,this.busySince=-1)}start(){this.stop(),this.interval=setInterval(this.checkQueue.bind(this),this.QUEUE_CHECK_INTERVAL)}checkQueue(){var t=this;if(this.isEmpty()||this.isBusy()){if(!this.isBusy()&&this.afterEmpty){let t=this.afterEmpty;this.afterEmpty=void 0,t()}}else this.setBusy().runNext().then(this.setFree.bind(this)).catch((function(e){t.error&&t.error(e),t.setFree()}))}addToQueue(t){this.queue.push(t)}runNext(){let t=this.queue.map((function(t){return t.title})).join(", ");this.debug&&this.debug(`tasks [${t}]`);let e=this.queue.shift();return Ar.isFunc(e.action)?Ar.isFunc(e.resolve)?e.action().then(e.resolve):(this.error&&this.error("В задании нет возвратной части, resolve не функция",e.title),e.action()):(this.error&&this.error("В задании нет исполнимой части, action не функция",e.title),Promise.resolve())}isBusy(){let t=!!this.busy,e=Date.now()/1e3;return!!(t&&this.busySince>-1)&&(!(e-this.busySince>Hl.MAX_BUSY_TIME)||(this.setFree(),!1))}setBusy(){return this.busy=!0,this.busySince=Date.now()/1e3,this}setFree(){return this.busy=!1,this.busySince=-1,this}isEmpty(){return 0===this.queue.length}run(t,e=void 0,i=""){var r=this;return e&&void 0===this.afterEmpty&&(this.afterEmpty=e),new Promise((function(e,n){try{r.addToQueue({action:t,resolve:e,title:i})}catch(t){r.error&&r.error(t),n(t)}}))}actionIsQueued(t){return this.queue.some((function(e){return e.title==t}))}runIfNotQueued(t,e=void 0,i=""){return this.actionIsQueued(i)?Promise.resolve():this.run(t,e,i)}}mr(Hl,"QUEUE_CHECK_INTERVAL",100),mr(Hl,"MAX_BUSY_TIME",300);class Kl extends Bl{constructor(t){return super({options:t,working:{name:t.name?t.name:"APIConnection"}}),this.online=null,this.run(),this}run(){this.int=window.setInterval(this.check.bind(this),1e3)}pause(){window.clearInterval(this.int)}resume(){this.run()}isOnline(){return window.navigator.onLine}check(){let t=this.isOnline();null!==this.online&&this.online!==t&&this.changeState(t),this.online=t}changeState(t=!1){t?this.emit("online"):this.emit("offline")}}mr(Kl,"int",void 0),mr(Kl,"online",void 0);var Gl=Object.freeze({__proto__:null,notAPIConnection:Kl,notAPIOptions:{rps:50,protocol:"http",host:"localhost",port:9e3},notAPIQueue:Hl});const Jl={};function Yl(t){return Ar.objHas(Jl,t)}var Ql=Object.freeze({__proto__:null,create:function(t,e={raw:[],filtered:[],selected:{}}){if(!Yl(t)){if(!(Object.keys(e).length>0))throw new Error("store's props wasn't specified");Jl[t]={},Object.keys(e).forEach((function(i){Jl[t][i]=Xi(e[i])}))}return Jl[t]},fake:function(t){return{subscribe:e=>(e(t),function(){}),set(){}}},get:function(t){return!!Yl(t)&&Jl[t]}});const Xl=Symbol("interface"),Zl=["getActionsCount","getActions","setFindBy","resetFilter","setFilter","getFilter","setSorter","getSorter","resetSorter","setPageNumber","setPageSize","setPager","setReturn","setSearch","getSearch","resetSearch","resetPager","getPager","addFormFieldType","addFormField","getFieldTypes","getActionFormFields"],tc=["_id","id","ID"],ec={},ic={};class rc extends Bl{constructor(t,e){return super({working:{name:"network interface for: "+(t.model?t.model:"unknown"),filter:ec,search:"",return:ic,pager:{size:10,page:0}},options:e}),this.manifest=t,this.initActions(),this}initActions(){if(this.getActionsCount()>0){let t=this.getActions();for(let e in t)this.initAction(e)}}initAction(t){var e=this;Ar.objHas(this,"$"+t)||(this["$"+t]=function(i,r,n=!1,s){return e.request(e,t,i,r,n,s)})}requestHTTP(t,e,i,r={},n=!1,s){try{let o=Object.assign({},t.getData&&"function"==typeof t.getData?t.getData():t,i),a=this.getActionData(e),l=this.collectRequestData(a),c=this.encodeRequest(l),u=this.getServerURL(),d=this.getURL(o,a,e),h={};if(n){d=this.getURL(i,a,e);const t=new FormData;t.append("file",s),h.body=t}else-1===["OPTIONS","GET"].indexOf(a.method.toUpperCase())&&(h={method:a.method,body:JSON.stringify(t.getData&&"function"==typeof t.getData?t.getData():t),headers:{Accept:"application/json","Content-Type":"application/json"}});return h.method=a.method.toUpperCase(),r&&Object.keys(r).length&&(h.headers=r),fetch(u+d+c,h).then((function(t){return t.json()}))}catch(t){Ar.error(t),Ar.report(t)}}requestWS(t,e){try{let i=this.getActionData(e),r=this.collectRequestData(i);const n=Ar.getApp().getWSClient(),s=this.getWSRequestName(e),o=Object.assign({},r,t.getData());return Ar.objHas(i,"type")&&"string"==typeof i.type&&i.type.length&&"request"!==i.type?n.message(i.type,s,o).then((function(t){return t.payload})):n.request(s,o).then((function(t){return t.payload}))}catch(t){Ar.error(t),Ar.report(t)}}request(){let t=this.getActionData(arguments[1]);switch(this.selectTransport(t)){case"ws":return this.requestWS(...arguments);case"http":return this.requestHTTP(...arguments);default:throw new Error("Offline")}}wsIsUp(t){if(!0===t.ws){let e;if(e=Ar.objHas(t,"wsClient")&&t.wsClient?Ar.getApp().getWSClient(t.wsClient):Ar.getApp().getWSClient(),e)return!0}return!1}selectTransport(t){return this.wsIsUp(t)?"ws":!!Ar.objHas(t,"method")&&"http"}getModelName(){return this&&this.manifest?this.manifest.model:null}getActionData(t){return this.getActions()&&this.getActions()[t]?this.getActions()[t]:null}getActionsCount(){return this.getActions()?Object.keys(this.getActions()).length:0}getActions(){return this.manifest&&this.manifest.actions?this.manifest.actions:{}}parseParams(t,e,i,r){let n="",s=t.length;for(;i.indexOf(t)>-1;){let o=i.indexOf(t),a=o+s,l=i.indexOf(e);if(o>l)break;if(n=i.slice(a,l),""==n)break;this.log&&this.log(t+n+e,Or.get(n,r)),i=i.replace(t+n+e,Or.get(n,r))}return i}parseLine(t,e,i){return t=(t=t.replace(":modelName",this.manifest.model)).replace(":actionName",i),t=this.parseParams(":record[","]",t,e),t=this.parseParams(":","?",t,e)}getURL(t,e,i){return this.parseLine(this.manifest.url,t,i)+(Ar.objHas(e,"postFix")?this.parseLine(e.postFix,t,i):"")}getServerURL(){return Ar.getApp()?Ar.getApp().getOptions("api.server.url",""):""}getWSRequestName(t){return`${this.manifest.model}//${t}`}encodeRequest(t){let e="?";for(let i in t)void 0!==t[i]&&null!==t[i]&&(e+=encodeURIComponent(i)+"="+encodeURIComponent(t[i].constructor===Object?JSON.stringify(t[i]):t[i])+"&");return this.getOptions("test")&&(e+="&test=1",this.getOptions("test.session")&&(e+="&session="+this.getOptions("test.session")),this.getOptions("test.session")&&(e+="&role="+this.getOptions("test.role"))),e}collectRequestData(t){let e={};if(Ar.objHas(t,"data")&&Array.isArray(t.data))for(let i=0;i<t.data.length;i++){let r="get"+Ar.capitalizeFirstLetter(t.data[i]);if(this[r]&&"function"==typeof this[r]){let n=this[r](),s={};["pager","sorter","filter","search","return"].indexOf(t.data[i])>-1?s[t.data[i]]=n:s=n,e=Object.assign(e,s)}}return e}getID(t,e){let i,r=tc,n=["",this.manifest.model];Ar.objHas(e,"index")&&e.index&&(r=[e.index].concat(tc));for(let e of n)for(let n of r)if(Ar.objHas(t,e+n)){i=t[e+n];break}return i}setFindBy(t,e){var i={};return i[t]=e,this.setFilter(i)}setFilter(t=ec){return this.setWorking("filter",t),this}resetFilter(){return this.setFilter()}getFilter(){return this.getWorking("filter")}setSearch(t=""){return this.setWorking("search",t),this}resetSearch(){return this.setSearch()}getSearch(){return this.getWorking("search")}setSorter(t){return this.setWorking("sorter",t),this}resetSorter(){return this.setSorter({})}getSorter(){return this.getWorking("sorter")}setReturn(t=ic){return this.setWorking("return",t),this}resetReturn(){return this.setReturn({})}getReturn(){return this.getWorking("return")}setPageNumber(t){return this.setWorking("pager.page",t),this}setPageSize(t){return this.setWorking("pager.size",t),this}setPager(){if((arguments.length<2||isNaN(arguments[0])||isNaN(arguments[1]))&&arguments[0].constructor===Object&&Ar.objHas(arguments[0],"page")&&Ar.objHas(arguments[0],"size")){const t=arguments[0];this.setWorking("pager",{size:t.size||10,page:t.page||0})}else 2!==arguments.length||isNaN(arguments[0])||isNaN(arguments[1])||this.setWorking("pager",{size:arguments[0]||10,page:arguments[1]||0});return this}resetPager(){return this.setPager()}getPager(){return this.getWorking("pager")}getRecord(){this.getData()}getDefaultAsPlainObject(){if(!this.manifest||!this.manifest.fields)return{};const t={};for(const e of Object.keys(this.manifest.fields))if(Object.hasOwn(this.manifest.fields[e],"default")){const i=this.manifest.fields[e].default;Array.isArray(i)?t[e]=[...i]:t[e]="object"==typeof i?{...i}:i}return t}}class nc extends Bl{constructor(t,e){return super(),null==e||"object"!=typeof e?e:e&&e.isProxy?(Ar.error("this is Proxy item"),e):e&&(e.isRecord||e.isProperty)?e:Array.isArray(e)?this.createCollection(t,e):(this.setOptions({}),this[Xl]=new rc(t,{}),this.setData(e),this.interfaceUp(),this.mapToInterface(),this.mapToMethods(),this)}toDefault(){return this.setData(this[Xl].getDefaultAsPlainObject())}mapToInterface(){let t=this;for(let e of Zl)this[Xl][e]&&"function"==typeof this[Xl][e]&&(this[e]=function(){let i=t[Xl][e](...arguments);return i==t[Xl]?t:i})}mapToMethods(){let t=this[Xl].manifest,e=Ar.getApp(),i={};if(t.methods?i=t.methods:e&&(i=e.getOptions(["models",this[Xl].manifest.model].join("."),{})),i)for(let t in i)Object.hasOwn(i,t)&&(this[t]=i[t])}createCollection(t,e){for(var i=[],r=0;r<e.length;r++)i.push(new nc(t,e[r]));return i}interfaceUp(){if(this[Xl].getActionsCount()>0){let t=this[Xl].getActions();for(let e in t)this.actionUp(e,t[e])}}actionUp(t){var e=this;Object.hasOwn(this,["$"+t])||(this["$"+t]=function(...i){return e[Xl].request(e,t,...i)})}setAttr(t,e){return this.setData(t,e)}setAttrs(t){if(t&&"object"==typeof t&&Object.keys(t).length>0)for(let e in t)this.setAttr(e,t[e])}getAttr(t,e=!1){let i=this.getData(t,{});return e?Ar.stripProxy(i):i}getAttrs(t){let e=[];if(t&&t.length>0)for(let i of t)e.push(this.getAttr(i));return e}getManifest(){return this[Xl]?this[Xl].manifest:{}}setItem(t){return this.setData(t),this}}const sc="main";class oc extends Bl{constructor(t){return super({working:{name:t.name,interfaces:{},controllers:Ar.objHas(t,"controllers")?t.controllers:{},initController:null,currentController:null,uis:{},wsc:{},wss:{},services:{}},options:t}),this?.log&&this.log("start app"),Ar.register("app",this),this.initManifest(),this}initManifest(){var t=this;Ar.getJSON(this.getOptions("manifestURL")).then((function(e){return t.setInterfaceManifest(e)})).catch((function(t){return Ar.report(t)}))}initRouter(){this.setWorking("router",ql),this.getWorking("router").setRoot(this.getOptions("router.root")),ql.reRouteExisted()}execRouter(){var t={};for(let e=0;e<this.getOptions("router.manifest").length;e++){let i=this.getOptions("router.manifest")[e],r=i.paths,n=i.schemes,s=i.controller;for(let e=0;e<r.length;e++){let i=!!(n&&Array.isArray(n)&&n.length>e)&&n[e];t[r[e]]=this.bindController(s,i)}}this.getWorking("router").addList(t).listen()}setInterfaceManifest(t){Object.freeze(t),this.setOptions("interfaceManifest",t),this.initRouter(),this.update()}getInterfaceManifest(t){return t?this.getOptions("interfaceManifest")[t]:this.getOptions("interfaceManifest")}update(){this.updateInterfaces(),this.initController(),this.startApp()}startApp(){this.initServices(),this.execRouter(),this.emit("afterStarted",this)}bindController(t,e){let i=this;return function(){new t(i,arguments,e)}}initController(){if(void 0!==this.getOptions("initController")){let t=this.getOptions("initController");this.setWorking("initController",new t(this))}}getCurrentController(){return this.getWorking("currentController")}setCurrentController(t){let e=this.getCurrentController();return e&&e.destroy&&e.destroy(),this.setWorking("currentController",t),this}createInterfaceModelFactory(t){return function(e){return new nc(t,e)}}updateInterfaces(){this.clearInterfaces();let t=this.getOptions("interfaceManifest");if(t)for(let e in t){let i=t[e],r=this.getOptions(["models",e].join("."),{});i.methods=r;const n=this.createInterfaceModelFactory(i);this.setInterface(e,n)}}getRecordName(t){return"nr"+Ar.capitalizeFirstLetter(t)}getControllerName(t){return"nc"+Ar.capitalizeFirstLetter(t)}setInterface(t,e){return this.setWorking(`interfaces.${t}`,e)}getInterfaces(){return this.getWorking("interfaces")}clearInterfaces(){return this.setWorking("interfaces",{}),this}setWSClient(t=sc,e){return this.setWorking(`wsc.${t}`,e)}getWSClient(t=sc){return this.getWorking(`wsc.${t}`)}getInterface(t){return this.getInterfaces()[t]}getModel(t,e={}){return this.getInterface(t)(e)}setService(t,e){return this.setWorking(`services.${t}`,e)}getService(t){return this.getWorking(`services.${t}`)}initServices(){if(this.getOptions("services"))for(let t in this.getOptions("services"))try{let e=this.getOptions(`services.${t}`);switch(Ar.detectType(e)){case"function":case"class":this.setService(t,new e(this));break;default:this.setService(t,e)}}catch(e){this?.error&&this.error(`Service (${t}) init error`,e)}}getConfigReaderForModule(t=""){var e=this;const i=["modules",t].join(".");return{get:function(t,r){return t&&"string"==typeof t&&t.length?e.getOptions([i,t].join("."),r):e.getOptions(i,r)}}}moduleConfig(t=""){return this.getConfigReaderForModule(t)}}mr(oc,"DEFAULT_WS_CLIENT_NAME",sc);const ac="default",lc="main";class cc extends Bl{static get MODULE_NAME(){return lc}static get MODEL_NAME(){return"ModelName"}static get LABELS(){return{plural:`${lc}:model_label_plural`,single:`${lc}:model_label_single`}}constructor(t,e){var i;super({}),i=this,mr(this,"els",void 0),mr(this,"make",void 0),mr(this,"app",void 0),this.app=t,this.app.setCurrentController(this),this.setWorking({name:e,ready:!1,views:{},libs:{},helpers:{}}),this.ui={},this.els={},this.setData({}),this.setOptions({moduleName:lc,containerSelector:"main.content",prefix:t.getOptions("paths.module"),names:{plural:"Models",single:"Model"}}),this.setURLPrefix(t.getOptions("router.root"));let r=t.getInterfaces();this.make={};for(let t in r)Object.hasOwn(r,t)&&(this.make[t]=r[t]);return this.on("destroy",(function(){i.app=null;for(let t in i.ui)i.ui[t].destroy&&i.ui[t].destroy(),i.ui[t].$destroy&&i.ui[t].$destroy(),i.ui[t]=null;i.els=null,i.make=null})),this}getApp(){return Ar.getApp()}setModel(t){return this.setWorking("model",t),this}getModel(t,e){if("string"==typeof t){const i=this.getInterface(t);return i&&i(e||{})}{const e=this.getInterface();return e&&e(t||{})}}getInterface(t=""){return this.app?.getInterface(t||this.getModelName())}getModelName(){return this.getWorking("modelName")}setModelName(t){return this.setWorking("modelName",Ar.lowerFirstLetter(t)),this}getModelIDFieldName(){return this.getWorking("modelIDFieldName","_id")}setModelIDFieldName(t="_id"){return this.setWorking("modelIDFieldName",t)}setReady(t=!0){this.setWorking("ready",t),t?this.emit("ready"):this.emit("busy")}setURLPrefix(t){return this.setOptions("urlPrefix",t),this.updateAutoName(),this}getURLPrefix(){return this.getOptions("urlPrefix")}setModuleName(t){return this.setOptions("moduleName",Ar.lowerFirstLetter(t)),this.updateAutoName(),this}getModuleName(){return this.getOptions("moduleName")}getModulePrefix(){return[Ar.getApp().getOptions("paths.modules"),this.getModuleName()].join("/")}getModelURL(){return Ar.buildURL({prefix:this.getURLPrefix(),module:this.getModuleName(),model:this.getModelName()})}getModelActionURL(t,e=""){return Ar.buildURL({prefix:this.getURLPrefix(),module:this.getModuleName(),model:this.getModelName(),id:t,action:e})}buildURL(t){return Ar.buildURL(t)}updateAutoName(){return this.getOptions("autoName",true),this}setName(t){return this.setWorking("name",t),this.setOptions("autoName",!1),this}getName(){return this.getWorking("name")}preloadLib(t={}){var e=this;return new Promise((function(i,r){if("object"!=typeof t)i(void 0);else{e.setWorking("loading",[]);for(let n in t)e.getWorking("loading").push(t[n]),e.make[t[n]]({}).$listAll().then((function(r){e.getOptions("libs")||e.setOptions("libs",{}),e.getOptions("libs")[n]=r,e.getWorking("loading").indexOf(t[n])>-1&&e.getWorking("loading").splice(e.getWorking("loading").indexOf(t[n]),1),0===e.getWorking("loading").length&&i(void 0)})).catch((function(t){e.report(t),r()}));0===e.getWorking("loading").length&&i(void 0)}}))}onAfterRender(){this.emit("afterRender")}getActionName(t=ac){return"run"+Ar.capitalizeFirstLetter(t)}getDefaultActionName(){return this.getActionName(this.getOptions("defaultAction",ac))}route(t){let[e,...i]=t,r=this.getActionName(e||ac);"function"==typeof this[r]?(this.setCurrentAction(r),this[r](i)):this[this.getDefaultActionName()]?(this.setCurrentAction(this.getDefaultActionName()),this[this.getDefaultActionName()](i)):(this.setCurrentAction(void 0),this.error&&this.error("No action in router",t))}setCurrentAction(t){this.setWorking("action",t)}getCurrentAction(){return this.getWorking("action")}getAppOptions(){try{return this.getApp().getOptions()}catch(t){this.error&&this.error(t)}}getModuleOptions(t){try{return this.getApp().getOptions(["modules",t||this.getModuleName()].join("."))}catch(t){this.error&&this.error(t)}}getServices(t){try{return this.getApp().getOptions(["services",t||this.getModuleName()].join("."))}catch(t){this.error&&this.error(t)}}getComponents(t){try{return this.getApp().getOptions(["components",t||this.getModuleName()].join("."))}catch(t){this.error&&this.error(t)}}refresh(t=0){this.app?.getWorking("router").refresh(t)}static getControllerRoute(t=0){let e=[];this.MODULE_NAME&&this.MODULE_NAME.length>0&&e.push(Ar.lowerFirstLetter(this.MODULE_NAME)),this.MODEL_NAME&&this.MODEL_NAME.length>0&&e.push(Ar.lowerFirstLetter(this.MODEL_NAME)),e=[e.join("/")];for(let i=0;i<t;i++)e.push("/([^/]+)");return e.join("")}static getControllerRoutes(t=0){let e=[this.getControllerRoute(0)];for(let i=0;i<t;i++)e.unshift(this.getControllerRoute(i+1));return e}static getRoutes(){return{paths:this.getControllerRoutes(this.PARAMS_LENGTH),controller:this}}getRouter(){return this.app?.getWorking("router")}navigateWithDelay(t,e=1500,i=function(){}){return this.getRouter().navigateWithDelay(t,e,i)}navigate(t){return this.getRouter().navigate(t)}navigateAction(t,e="",i=0,r=function(){}){return this.navigateModuleAction(this.getModuleName(),this.getModelName(),t,e,i,r)}navigateModelAction(t,e,i="",r=0,n=function(){}){return this.navigateModuleAction(this.getModuleName(),t,e,i,r,n)}navigateModuleAction(t,e,i,r="",n=0,s=function(){}){return n?this.getRouter().navigateWithDelay(Ar.buildURL({prefix:this.getURLPrefix(),module:t,model:e,id:i,action:r}),n,s):this.getRouter().navigate(Ar.buildURL({prefix:this.getURLPrefix(),module:t,model:e,id:i,action:r}))}static getCommonMenu(t){return[{section:t.MODULE_NAME,title:t.LABELS.plural,url:`/${Ar.lowerFirstLetter(t.MODULE_NAME)}/${Ar.lowerFirstLetter(t.MODEL_NAME)}`}]}static getMenu(){}}mr(cc,"PARAMS_LENGTH",2);const uc={};function dc(t){return Object.hasOwn(uc,t)}function hc(t){return!!dc(t)&&uc[t]}function gc(t,e,i,r){return r("change",{id:e(),field:i(),value:"checkbox"===t.target.type?t.target.checked:t.target.value}),!0}var fc=Se('<input type="checkbox"> <label class="label"></label>',1);ke(["input"]);var pc=Se("<a> </a>"),vc=Se('<div class="mx-1 tags has-addons svelte-38rpfk"><span class="tag"> </span> <span><!></span></div>'),mc=Se("<a> </a>"),bc=Se("<span><!></span>");var yc=Se("<td><!></td>");function Oc(t,e){Zt(e,!0);const i=xi();let r=x("");Ai((()=>{void 0===s().type&&(Object.hasOwn(s(),"titlePath")?D(r,re(Or.get(s().titlePath,o(),a()))):Object.hasOwn(s(),"titleComposer")&&"function"==typeof s().titleComposer?D(r,re(s().titleComposer(o(),a()))):D(r,re(Or.get(s().path,o(),a()))))}));let n=Ui(e,"getItemId",3,(t=>t._id)),s=Ui(e,"field",19,(()=>({}))),o=Ui(e,"item",19,(()=>({}))),a=Ui(e,"helpers",19,(()=>({})));var l=yc();qe(de(l),(()=>"link"===s().type),(t=>{var e=j((()=>Or.get(s().path,o(),a())));ko(t,{get values(){return Gt(e)}})}),(t=>{var e=Le();qe(he(e),(()=>"button"===s().type),(t=>{var e=j((()=>Or.get(s().path,o(),a())));fn(t,{get values(){return Gt(e)}})}),(t=>{var e=Le();qe(he(e),(()=>"image"===s().type),(t=>{var e=j((()=>Or.get(s().path,o(),a())));ll(t,{get values(){return Gt(e)}})}),(t=>{var e=Le();qe(he(e),(()=>"boolean"===s().type),(t=>{var e=j((()=>Or.get(s().path,o(),a())));Fr(t,{get values(){return Gt(e)}})}),(t=>{var e=Le();qe(he(e),(()=>"tag"===s().type),(t=>{var e=j((()=>Or.get(s().path,o(),a())));!function(t,e){let i=Ui(e,"values",19,(()=>[]));var r=Le();Je(he(r),17,i,(t=>t.id),((t,e)=>{var i=Le();qe(he(i),(()=>Object.hasOwn(Gt(e),"value")),(t=>{var i=vc(),r=de(i),n=de(r),s=ge(r,2);qe(de(s),(()=>Gt(e).url),(t=>{var i=pc(),r=de(i);tt((()=>{ni(i,"href",Gt(e).url),ai(i,`${Gt(e).urlCustomClasses??""} svelte-38rpfk`),je(r,Gt(e).value)})),Ee(t,i)}),(t=>{var i=Ce();tt((()=>je(i,Gt(e).value))),Ee(t,i)})),tt((()=>{je(n,Gt(e).title),ai(s,`tag is-${Gt(e).color??""} ${Gt(e).customClasses??""} svelte-38rpfk`)})),Ee(t,i)}),(t=>{var i=bc();qe(de(i),(()=>Gt(e).url),(t=>{var i=mc(),r=de(i);tt((()=>{ni(i,"href",Gt(e).url),ai(i,`${Gt(e).urlCustomClasses??""} svelte-38rpfk`),je(r,Gt(e).title)})),Ee(t,i)}),(t=>{var i=Ce();tt((()=>je(i,Gt(e).title))),Ee(t,i)})),tt((()=>ai(i,`mx-1 tag is-${Gt(e).color??""} ${Gt(e).customClasses??""} svelte-38rpfk`))),Ee(t,i)})),Ee(t,i)})),Ee(t,r)}(t,{get values(){return Gt(e)}})}),(t=>{var e=Le();qe(he(e),(()=>"switch"===s().type),(t=>{var e=j((()=>n()(o()))),i=j((()=>Or.get(s().path,o(),a())));!function(t,e){Zt(e,!0);let i=Si(),r=Ui(e,"id",3,""),n=Ui(e,"value",15,!1),s=Ui(e,"fieldname",3,"switch"),o=Ui(e,"disabled",3,!1),a=Ui(e,"readonly",3,!1),l=Ui(e,"styling",3," is-rounded is-success ");var c=fc(),u=he(c);u.__input=[gc,r,s,i];var d=ge(u,2);tt((()=>{ai(u,`switch ${l()??""}`),ni(u,"id",`edit-table-row-cell-inline-switch-${s()??""}-${r()??""}`),ni(u,"name",s()),u.readOnly=a(),u.disabled=o(),ni(d,"for",`edit-table-row-cell-inline-switch-${s()??""}-${r()??""}`)})),bi(u,n),Ee(t,c),te()}(t,{get id(){return Gt(e)},get fieldname(){return s().path},get value(){return Gt(i)},get disabled(){return s().disabled},get readonly(){return s().readonly},$$events:{change(...t){s().onChange?.apply(this,t)}}})}),(t=>{var e=Le();qe(he(e),(()=>s().component),(t=>{var e=Le(),i=he(e),r=j((()=>n()(o()))),l=j((()=>Or.get(s().path,o(),a())));ri(i,(()=>s().component),((t,e)=>{e(t,Ri({get id(){return Gt(r)},get fieldname(){return s().path},get disabled(){return s().disabled},get readonly(){return s().readonly},get value(){return Gt(l)}},(()=>s().options),{$$events:{change(...t){s().onChange?.apply(this,t)}}}))})),Ee(t,e)}),(t=>{var e=Le();qe(he(e),(()=>s()&&void 0!==s()&&!isNaN(s().maxLength)&&s().maxLength),(t=>{var e=Ce();tt((()=>je(e,Ar.strLengthCap(Or.get(s().path,o(),a()),s().maxLength)))),Ee(t,e)}),(t=>{var e=Ce();tt((()=>je(e,Ti(tr,"$LOCALE",i)[Or.get(s().path,o(),a())]))),Ee(t,e)}),!0),Ee(t,e)}),!0),Ee(t,e)}),!0),Ee(t,e)}),!0),Ee(t,e)}),!0),Ee(t,e)}),!0),Ee(t,e)}),!0),Ee(t,e)})),tt((()=>{ai(l,(s().hideOnMobile?" is-hidden-touch ":"")+(s().classes?` ${s().classes} `:"")),ni(l,"title",Gt(r))})),Ee(t,l),te()}function $c(t,e,i,r,n){return t.preventDefault(),e("rowSelectChange",{id:Gt(i),selected:r()[Gt(i)]}),!1}var wc=Se('<td><input type="checkbox" placeholder=""></td>'),kc=Se("<tr><!><!></tr>");function _c(t,e){Zt(e,!0);const i=xi(),r=()=>Ti(n,"$selectedList",i);let n,s=Si(),o=x(void 0);Ai((()=>{D(o,re(d()(a()))),n=hc(e.id).selected}));let a=Ui(e,"item",19,(()=>({}))),l=Ui(e,"helpers",19,(()=>({}))),c=Ui(e,"fields",19,(()=>[])),u=Ui(e,"showSelect",3,!1),d=Ui(e,"getItemId",3,(()=>{}));var h=kc(),g=de(h);qe(g,(()=>u()&&r()),(t=>{var e=wc(),i=de(e);tt((()=>ni(i,"id",`table-row-select-${d()(a())??""}`))),tt((()=>ni(i,"data-id",d()(a())))),tt((()=>ni(i,"name",`row_selected_${d()(a())??""}`))),i.__change=[$c,s,o,r,n],bi(i,(()=>r()[Gt(o)]),(t=>{return e=n,i=Jt(r)[Gt(o)]=t,s=Jt(r),e.set(s),i;var e,i,s})),Ee(t,e)})),Je(ge(g),17,c,Ge,((t,e)=>{Oc(t,{get field(){return Gt(e)},get helpers(){return l()},get item(){return a()},get getItemId(){return d()}})})),Ee(t,h),te()}function Ic(t,e){try{e("searchChange",t.currentTarget.value.trim())}catch{return}}function Ac(t,e){e("goToPrevPage")}function Sc(t,e){e("goToNextPage")}function Cc(t,e){t.preventDefault();let i=t.target;return e("goToPage",parseInt(i.dataset.page)),!1}function Lc(t,e,i,r,n){hc(e.id).selected.update((t=>(i().forEach((e=>{t[r()(e)]=n()})),t)))}ke(["change"]);var Ec=Se('<div class="field is-grouped"><!></div>'),Tc=Se('<div class="field is-grouped"><!></div>'),xc=Se('<div class="field"><div class="control"><input class="input" type="text" placeholder="Поиск"></div></div>'),Nc=Se('<th><input type="checkbox" id="table-row-select-page" placeholder="" name="row_selected_all"></th>'),Fc=Se("<th><!></th>"),Mc=Se('<a href="" class="pagination-link is-current" aria-current="page"> </a>'),Rc=Se('<a href="" class="pagination-link"> </a>'),Dc=Se("<li><!></li>"),Uc=Se('<nav class="pagination is-centered" aria-label="pagination"><a href="" class="pagination-previous">Назад</a> <a href="" class="pagination-next">Вперед</a> <ul class="pagination-list"><!></ul></nav>'),Pc=Se('<!> <!> <!> <table class="table"><thead><tr><!><!></tr></thead><tbody></tbody></table> <!>',1);ke(["input","change","click"]);const jc="__dublicate__",Wc={},Bc=!1,zc="listAndCount",Vc="count",qc="preprocessor",Hc={ui:function(t,e){Zt(e,!0);const i=xi();let r=Si(),n=Ui(e,"helpers",19,(()=>({}))),s=Ui(e,"state",31,(()=>re({}))),o=Ui(e,"filter",31,(()=>re({}))),a=Ui(e,"sorter",31,(()=>re({}))),l=Ui(e,"fields",19,(()=>[])),c=Ui(e,"selected",31,(()=>re({}))),u=Ui(e,"items",31,(()=>re([]))),d=Ui(e,"actions",19,(()=>[])),h=Ui(e,"links",19,(()=>[])),g=Ui(e,"search",15,""),f=Ui(e,"showSearch",3,!0),p=Ui(e,"showSelect",3,!0),v=Ui(e,"selectAll",15,!1),m=Ui(e,"getItemId",3,(t=>t._id));function b({detail:t}){try{r("searchChange",t)}catch{return}}function y({detail:t}){try{r("filterChange",t)}catch{return}}Ai((()=>{p()&&hc(e.id).selected.subscribe((t=>{c(t)})),hc(e.id).refined.subscribe((t=>{if(u(t),p()){for(let t in c())u().some((e=>m()(e)===t))?Object.hasOwn(c(),t)||c(c()[t]=!1,!0):delete c()[t];c(c())}})),hc(e.id).state.subscribe((t=>{s(t)}))}));var O=Pc(),$=he(O);qe($,(()=>h().length),(t=>{var e=Ec();ko(de(e),{get values(){return h()}}),Ee(t,e)}));var w=ge($,2);qe(w,(()=>d().length),(t=>{var e=Tc();fn(de(e),{get values(){return d()}}),Ee(t,e)}));var k=ge(w,2);qe(k,f,(t=>{var i=Le();qe(he(i),(()=>e.filterUI),(t=>{var i=Le();const r=j((()=>e.filterUI));ri(he(i),(()=>Gt(r)),((t,e)=>{e(t,{get filter(){return o()},set filter(t){o(t)},$$events:{change:y,searchChange:b}})})),Ee(t,i)}),(t=>{var e=xc(),i=de(e),n=de(i);n.__input=[Ic,r],mi(n,g),Ee(t,e)})),Ee(t,i)}));var _=ge(k,2),I=de(_),A=de(I),S=de(A);qe(S,p,(t=>{var i=Nc(),r=de(i);r.__change=[Lc,e,u,m,v],bi(r,v),Ee(t,i)})),Je(ge(S),17,l,Ge,((t,e)=>{var n=Fc();const s=j((()=>Gt(e).path.substring(1)));var o=j((()=>function(t){const e=t.path.substring(1);Object.hasOwn(a(),e)?a(a()[e]=-1*parseInt(a()[e]),!0):a({[e]:1}),r("sorterChange",a())}(Gt(e))));n.__click=function(...t){Gt(o)?.apply(this,t)},qe(de(n),(()=>Gt(e).sortable&&Object.hasOwn(a(),Gt(s))),(t=>{var i=j((()=>a()[Gt(s)]>0?"sort-up":"sort-down"));rl(t,{get font(){return Gt(i)},get title(){return Gt(e).title},pointable:!0})}),(t=>{var r=Ce();tt((()=>je(r,Ti(tr,"$LOCALE",i)[Gt(e).title]))),Ee(t,r)})),tt((()=>ai(n,(Gt(e).hideOnMobile?" is-hidden-touch":"")+(Gt(e).sortable?" is-clickable":"")))),Ee(t,n)})),Je(ge(I),21,u,(t=>t._id),((t,i)=>{_c(t,{get id(){return e.id},get item(){return Gt(i)},get fields(){return l()},get helpers(){return n()},get showSelect(){return p()},get getItemId(){return m()},$$events:{rowSelectChange(t){Ii.call(this,e,t)}}})})),qe(ge(_,2),(()=>s()?.pagination?.pages?.list.length>1),(t=>{var e=Uc(),i=de(e);i.__click=[Ac,r];var n=ge(i,2);n.__click=[Sc,r],qe(de(ge(n,2)),(()=>s().pagination&&s().pagination.pages&&s().pagination.pages.list),(t=>{var e=Le();Je(he(e),17,(()=>s().pagination.pages.list),Ge,((t,e)=>{var i=Dc();qe(de(i),(()=>Gt(e).active),(t=>{var i=Mc(),r=de(i);tt((()=>{ni(i,"aria-label",`Страница ${Gt(e).index??""}`),je(r,Gt(e).index+1)})),Ee(t,i)}),(t=>{var i=Rc();i.__click=[Cc,r];var n=de(i);tt((()=>{ni(i,"aria-label",`Страница ${Gt(e).index??""}`),ni(i,"data-page",Gt(e).index),je(n,Gt(e).index+1)})),Ee(t,i)})),Ee(t,i)})),Ee(t,e)})),Ee(t,e)})),Ee(t,O),te()},links:[],actions:[],endless:!1,idField:"_id",getItemId:function(t){return t._id}};class Kc extends ur{constructor(t={}){return super(),this.id="table-"+Math.random(),this.options={...Hc,...t.options?t.options:{}},this.ui={},this.data={raw:[],filtered:[],refined:[],selected:{}},this.state={pagination:{items:{count:0,from:0,to:0},pages:{count:0,from:0,to:0,current:0,list:[]}}},this.working={},this.stores=function(t,e={raw:[],filtered:[],selected:{}}){if(!dc(t)){if(!(Object.keys(e).length>0))throw new Error("store's props wasn't specified");uc[t]={},Object.keys(e).forEach((function(i){uc[t][i]=Xi(e[i])}))}return uc[t]}(this.id,{raw:[],filtered:[],refined:[],selected:{},state:this.state,working:this.working}),this.stores.working.subscribe(this.onWorkingUpdate.bind(this)),this.stores.raw.subscribe(this.onRawUpdate.bind(this)),this.stores.filtered.subscribe(this.onFilteredUpdate.bind(this)),this.stores.refined.subscribe(this.onRefinedUpdate.bind(this)),this.stores.selected.subscribe(this.onSelectedUpdate.bind(this)),this.stores.state.subscribe(this.onStateUpdate.bind(this)),Ar.objHas(t,"data")&&Array.isArray(t.data)&&this.stores.raw.update((function(e){return t.data})),this.setCombinedActionName(this.getOptions("interface.combinedAction",zc)),Ar.objHas(this.options,"filter")?this.setFilter(this.options.filter,!0):this.resetFilter(),Ar.objHas(this.options,"pager")?this.setPager(this.options.pager,!0):this.resetPager(),Ar.objHas(this.options,"sorter")?this.setSorter(this.options.sorter,!0):this.resetSorter(!0),Ar.objHas(this.options,"return")?this.setReturn(this.options.return):this.setReturn(),Ar.objHas(this.options,"search")?this.setSearch(this.options.search,!0):this.setSearch(),this.render(),this.updateData(),this}onWorkingUpdate(t){return this.working=t,t}onRawUpdate(t){return this.data.raw=t,t}onFilteredUpdate(t){return this.data.filtered=t,this.refineFiltered(),t}onRefinedUpdate(t){return this.data.refined=t,this.clearSelected(),t}onStateUpdate(t){return this.state=t,t}onSearchChange(t){t.length>3?this.setSearch(t):this.setSearch()}onSorterChange(t){t?this.setSorter(t):this.resetSorter()}onFilterChange({filter:t,actionName:e}){0===e.indexOf(zc)&&this.setCombinedActionName(e),t?this.setFilter(t):this.resetFilter()}onSelectedUpdate(t){this.data.selected=t}clearSelected(){this.data.selected={}}getSelected(t=!1,e="refined"){let i=[];for(let r in this.data.selected)if(this.data.selected[r])if(t){let t=this.data[e].findIndex((function(t){return t._id===r}));t>-1&&i.push(this.data[e][t])}else i.push(r);return i}getItemId(t){return this.getOptions("getItemId",Hc.getItemId)(t)}selectAll(){var t=this;this.stores.selected.update((function(){let e={};return t.data.filtered.forEach((function(i){e[t.getItemId(i)]=!0})),e}))}selectNone(){var t=this;this.stores.selected.update((function(){let e={};return t.data.filtered.forEach((function(i){e[t.getItemId(i)]=!1})),e}))}render(){var t=this;this.ui.table||(this.ui.table=new this.options.ui({target:this.options.targetEl,props:{filterUI:this.getOptions("filterUI",void 0),id:this.id,helpers:Object.assign({},this.getHelpers()),fields:this.getOptions("fields"),actions:this.getActions(),links:this.getLinks(),search:"",showSelect:this.getOptions("showSelect"),showSearch:this.getOptions("showSearch"),showSort:this.getOptions("showSort"),idField:this.getOptions("idField"),getItemId:this.getOptions("getItemId"),filter:this.getFilter()}})),this.ui.table.$on("searchChange",(function(e){return t.onSearchChange(e.detail)})),this.ui.table.$on("sorterChange",(function(e){return t.onSorterChange(e.detail)})),this.ui.table.$on("filterChange",(function(e){return t.onFilterChange(e.detail)})),this.ui.table.$on("goToPage",(function(e){return t.goToPage(e.detail)})),this.ui.table.$on("goToNextPage",(function(){return t.goToNext()})),this.ui.table.$on("goToPrevPage",(function(){return t.goToPrev()}))}getActions(){return this.getOptions("actions",[])}getLinks(){return this.getOptions("links",[])}getHelpers(){return this.options.helpers||{}}setWorking(t,e){var i=this;return this.stores.working.update((function(r){return Or.set(t,r,i.getHelpers(),e),r})),this}getWorking(t,e){let i=Or.get(t,this.working,this.getHelpers());return void 0===i?e:i}setState(t,e){var i=this;return this.stores.state.update((function(r){return Or.set(t,r,i.getHelpers(),e),r})),this}getState(t,e){let i=Or.get(t,this.state,this.getHelpers());return void 0===i?e:i}setOptions(t,e){return Or.set(t,this.options,this.getHelpers(),e),this}getOptions(t,e){let i=Or.get(t,this.options,this.getHelpers());return void 0===i?e:i}setFilter(t,e=!1){return this.setState("filter",t),e||(this.invalidateData(),this.updateData()),this}resetFilter(){return this.setState("filter",{}),this}getFilter(){return this.getState("filter")}setPager(t,e=!1){return this.setState("pager",t),e||this.updateData(),this}getDefaultPageNumber(){return isNaN(this.getOptions("pager.page"))?0:this.getOptions("pager.page")}getDefaultPageSize(){return isNaN(this.getOptions("pager.size"))?20:this.getOptions("pager.size")}resetPager(){this.setState("pager",{size:this.getDefaultPageSize(),page:this.getDefaultPageNumber()})}getPager(){return this.getState("pager")}setSorter(t,e=!1){return this.setWorking("sorter",t),e||(this.invalidateData(),this.updateData()),this}resetSorter(t=!1){let e={_id:1};return this.setSorter(e,t)}getSorter(){return this.getWorking("sorter")}getSorterDirection(){try{let t=Object.keys(this.getSorter());return this.getSorter()[t[0]]}catch{return 1}}getSearch(){return void 0!==this.getWorking("search")&&null!==this.getWorking("search")?this.getWorking("search"):""}setSearch(t="",e=!1){return this.setWorking("search",t),e||(this.invalidateData(),this.updateData()),this}getReturn(){return this.getWorking("return")}setReturn(t=Wc){return this.setWorking("return",t),this}clearFilteredData(){this.stores.filtered.update((function(t){return t.splice(0,t.length),t}))}clearRawData(){this.stores.raw.update((function(t){return t.splice(0,t.length),t}))}clearRefinedData(){this.stores.refined.update((function(t){return t.splice(0,t.length),t}))}invalidateData(){this.clearFilteredData(),this.isLive()&&this.clearRawData(),this.resetPager()}isLive(){return this.getOptions("interface")&&this.getOptions("interface.factory")}setUpdating(){this.setState("updating",!0)}setUpdated(){this.setState("updating",!1)}ifUpdating(){return this.getState("updating")}getDataInterface(){let t=this.getOptions("interface.factory");return"function"==typeof t?t({}):t}getLoadDataActionName(){return this.getOptions("interface.listAction")?this.getOptions("interface.listAction"):"list"}setCombinedActionName(t=Vc){this.setWorking("interface.combinedAction",t)}getCombinedActionName(){return this.getWorking("interface.combinedAction")?this.getWorking("interface.combinedAction"):zc}getCountActionName(){return this.getOptions("interface.countAction")?this.getOptions("interface.countAction"):Vc}loadData(){let t,e=this.getDataInterface().setFilter(this.getFilter()).setSorter(this.getSorter()).setReturn(this.getReturn()).setSearch(this.getSearch()).setPager(this.getPager());return t=this.getOptions("interface.combined",Bc)?this.getCombinedActionName():this.getLoadDataActionName(),e["$"+t]()}goToNext(){let t=isNaN(this.getState("pager.page"))?this.getDefaultPageNumber():this.getState("pager.page")+1;this.setState("pager.page",Math.min(t,this.getState("pagination.pages.to"))),this.updateData()}goToPrev(){let t=isNaN(this.getState("pager.page"))?this.getDefaultPageNumber():this.getState("pager.page")-1;this.setState("pager.page",Math.max(t,this.getState("pagination.pages.from"))),this.updateData()}goToFirst(){this.setState("pager.page",this.getState("pagination.pages.from")),this.updateData()}goToLast(){this.setState("pager.page",this.getState("pagination.pages.to")),this.updateData()}goToPage(t){this.setState("pager.page",t),this.updateData()}testDataItem(t){var e=this.getSearch().toLowerCase();for(var i in t){if(t[i].toString().toLowerCase().indexOf(e)>-1)return!0}return!1}getRowsCount(){var t=this;return this.getDataInterface().setFilter(this.getFilter())["$"+this.getCountActionName()]().then((function(e){t.updatePagination(e.count)})).catch((function(e){t.error(e)}))}updatePagination(t){var e=this;this.log("update pagination",t),this.state.pagination.pages.list.splice(0,this.state.pagination.pages.list.length);let i=(this.getPager().page-0)*this.getPager().size+1,r=t%this.getPager().size?Math.floor(t/this.getPager().size)+1:Math.round(t/this.getPager().size),n=Math.max(0,this.getPager().page-6),s=Math.min(r-1,this.getPager().page+6),o=[],a=Math.min(i+this.getPager().size-1,t);for(let t=n;t<=s;t++)o.push({index:t,active:t===this.getPager().page});this.stores.state.update((function(l){return e.log("update pagination",l),l.pagination.items.count=t,l.pagination.items.from=i,l.pagination.items.to=a,l.pagination.pages.count=r,l.pagination.pages.from=n,l.pagination.pages.to=s,l.pagination.pages.current=e.getPager().page,l.pagination.pages.list.splice(0,l.pagination.pages.list.length,...o),l}))}updateData(){var t=this;if(this.isLive()){if(this.ifUpdating())return;this.getOptions("endless",!1)||this.clearRawData(),this.setUpdating(),this.getOptions("interface.combined",Bc)?this.loadData().then((function(e){let i=Ar.objHas(e,"status")&&Ar.objHas(e,"result");t.stores.filtered.update((function(r){return t.getOptions("endless",!1)||t.clearFilteredData(),i?r.push(...e.result.list):Ar.objHas(e,"list")&&Array.isArray(e.list)?r.push(...e.list):Array.isArray(e)&&r.push(...e),r})),t.setWorking("lastCount",i?e.result.count:e.count)})).then((function(){t.updatePagination(t.getWorking("lastCount"))})).catch(this.error.bind(this)).then(this.setUpdated.bind(this)):this.loadData().then((function(e){t.stores.filtered.update((function(t){return t.push(...e),t}))})).then(this.getRowsCount.bind(this)).catch(this.error.bind(this)).then(this.setUpdated.bind(this))}else this.setUpdating(),this.processData(),this.setUpdated()}getData(){return this.data}processData(){var t=this;let e=this.getFilter();this.log(this.getData()),null!=e&&void 0!==e.filterSearch&&null!==e.filterSearch&&e.filterSearch.length>0?this.stores.filtered.update((function(e){return e.splice(0,e.length,...t.data.raw.filter(t.testDataItem.bind(t))),e})):this.stores.filtered.update((function(e){return e.splice(0,e.length,...t.data.raw),e}));let i=this.getSorter();null!=i&&this.stores.filtered.update((function(t){return t.sort((function(t,e){let r=Or.get(i.sortByField,t,{}),n=Or.get(i.sortByField,e,{});return isNaN(r)?void 0!==r&&void 0!==n&&r.localeCompare?r.localeCompare()*-i.sortDirection:0:(r<n?1:-1)*i.sortDirection})),t}))}error(){this.options.logger&&this.options.logger.error(...arguments)}log(){this.options.logger&&this.options.logger.log(...arguments)}checkFieldsNames(){const t=":"+this.getOptions("idField");this.getOptions("fields",[]).forEach((function(e){t===e.path&&(e.path=e.path+jc)}))}readFieldValue(t,e,i){if(t.indexOf(jc)>-1){const t=":"+this.getOptions("idField");return Or.get(t,e,i)}return Or.get(t,e,i)}refineFiltered(){var t=this;let e=[];this.checkFieldsNames(),this.data.filtered.forEach((function(i,r){let n={};t.getOptions("idField")&&(n[t.getOptions("idField")]=i[t.getOptions("idField")]),t.getOptions("fields",[]).forEach((function(e){let s=null,o=t.readFieldValue(e.path,i,t.getOptions("helpers"));if(Ar.objHas(e,qc)){try{s=e[qc](o,i,r)}catch(e){t.error("Error while preprocessing cell value",o,i,r),t.error(e)}Or.set(e.path,n,s)}else Or.set(e.path,n,o)})),e.push(n)})),this.stores.refined.update((function(t){return t.splice(0,t.length,...e),t}))}$destroy(){for(let t in this.ui)this.ui[t].$destroy&&this.ui[t].$destroy(),delete this.ui[t]}}var Gc=Se("<!> <!>",1),Jc=Se("<!> <!>",1);function Yc(t,e){Zt(e,!0);let i=x(!1),r=x(!1),n=Ui(e,"container",19,(()=>({}))),s=Ui(e,"loaderTitle",15,"Отправка данных на сервер"),o=Ui(e,"loaderActive",15,!1),a=Ui(e,"loaderSize",15,"container"),l=Ui(e,"successTitle",15,"OK"),c=Ui(e,"successMessage",15,""),u=Ui(e,"errorTitle",15,"Error"),d=Ui(e,"errorMessage",15,"");var h=Jc(),g=he(h);return zr(g,{get loading(){return o()},set loading(t){o(t)},get title(){return s()},set title(t){s(t)},get size(){return a()},set size(t){a(t)}}),jo(ge(g,2),Ri(n,{children:(t,e)=>{var n=Gc(),s=he(n);qe(s,(()=>Gt(r)),(t=>{Tl(t,{get title(){return u()},set title(t){u(t)},get message(){return d()},set message(t){d(t)}})})),qe(ge(s,2),(()=>Gt(i)),(t=>{Nl(t,{get title(){return l()},set title(t){l(t)},get message(){return c()},set message(t){c(t)}})})),Ee(t,n)},$$slots:{default:!0}})),Ee(t,h),te({showSuccess:function(t,e){D(r,!1),D(i,!0),null!=e&&c(e),null!=t&&l(t)},showError:function(t,e){D(i,!1),D(r,!0),null!=e&&d(e),null!=t&&u(t)},setLoading:function(){o(!0),D(i,!1),D(r,!1)},resetLoading:function(){o(!1)},hideAll:function(){o(!1),D(i,!1),D(r,!1)}})}var Qc=new WeakMap,Xc=new WeakMap;class Zc extends Bl{constructor({target:t=null,name:e="Default",options:i={},working:r={},data:n={},ui:s=Yc}){super({working:{name:`${e}ActionUI`,...r},options:i,data:n}),fr(this,Qc,null),fr(this,Xc,null),t&&this.setOptions("target",t),pr(Qc,this,s),this.initUI()}initUI(){try{const t=this.getTargetEl();for(;t.children.length;)t.removeChild(t.firstChild);pr(Xc,this,new(gr(Qc,this))({target:t,props:this.getOptions()}))}catch(t){this.error(t)}}setLoading(){this.emit("loading"),gr(Xc,this).setLoading()}resetLoading(){this.emit("loaded"),gr(Xc,this).resetLoading()}destroy(){this.emit("destroy"),gr(Xc,this)&&(gr(Xc,this).$destroy&&gr(Xc,this).$destroy(),gr(Xc,this).destroy&&gr(Xc,this).destroy(),pr(Xc,this,null)),this.setOptions(null),this.setWorking(null),this.setData(null)}processResult(t){return t.status===$n?(this.setFormSuccess(),!0):(this.setFormErrors(t),!1)}setFormSuccess(){gr(Xc,this).showSuccess(),this.emit("success")}setFormErrors(t){const e={form:[],fields:{}};t.message&&e.form.push(t.message),t.errors&&Object.keys(t.errors).length>0&&(e.fields={...t.errors}),gr(Xc,this).showError(e),this.emit("error",e)}getTargetEl(){const t=this.getOptions("target",".container");if(t instanceof HTMLElement)return t;if("string"==typeof t)return document.querySelector(t);throw new Error("ActionUI parent element is not defined")}}let tu=class{static addComponent(t,e){co.add(t,e)}static addVariants(t,e){ho.add(t,e)}static addField(t,e){uo.add(t,e)}static actionFieldsInit(t,e,i){var r=this;Array.isArray(t)?t.forEach((function(t){r.actionFieldsInit(t,e,i)})):(Ar.objHas(e,"fields")||(e.fields={}),Ar.objHas(e.fields,t)||(e.fields[t]={}),null!=i&&void 0!==i[t]&&null!==i[t]&&(e.fields[t].value=i[t]))}};mr(tu,"validator",null);const eu={label:"",placeholder:"",enabled:!0,visible:!0,required:!0,validated:!1,valid:!1,errors:!1};function iu(t,e={},i,r){let n={...eu};return r.contains(t)&&(n={...n,...r.get(t)}),e&&(n={...n,...e}),Ar.objHas(n,"variantsSource")&&i.contains(n.variantsSource)?n.variants=i.get(n.variantsSource):n.variants&&0!==n.variants.length||(n.variants=[]),n}function ru(t,e,i){return t[e].formErrors=[...i],t[e].validated=!0,t[e].inputStarted=!0,t[e].valid=!1,t[e].formLevelError=!0,t}function nu(t,e){return t[e].formErrors=!1,t[e].validated=!0,t[e].valid=!0,t[e].formLevelError=!1,t}function su(t,e){return Ar.objHas(t,e)&&t[e].enabled&&t[e].visible&&void 0!==t[e].value}var ou,au,lu,cu,uu,du,hu,gu,fu,pu,vu,mu,bu,yu,Ou,$u,wu,ku,_u,Iu,Au={fieldInit:iu,initFormByField:function t(e={},i=[],r,n,s,o){if(Array.isArray(i))i.forEach((function(i){return t(e,i,r,n,s,o)}));else{let t={};s&&Ar.objHas(s,"mutations")&&Ar.objHas(s.mutations,i)&&(t=s.mutations[i]),o&&Ar.objHas(o,i)&&(t.value=o[i]),e[i]=iu(i,t,r,n),s&&s.readonly&&(e[i].readonly=!0)}return e},setFieldInvalid:function(t,e,i,r){return t[e].errors=[...r],t[e].validated=!0,t[e].valid=!1,t[e].value=i,t},setFieldValid:function(t,e,i){t[e].errors=!1,t[e].validated=!0,t[e].valid=!0,t[e].value=i;for(let i in t)if(i!==e&&(Array.isArray(t[i].errors)&&0===t[i].errors.length&&(t[i].errors=!1),!1!==t[i].errors))break;return t},isFieldValid:function(t,e){return!Array.isArray(t[e].errors)},setFormFieldInvalid:ru,setFormFieldValid:nu,updateFormValidationStatus:function({form:t,formErrors:e,validationStatus:i}){if(Array.isArray(i.form)&&i.form.length?e.splice(0,e.length,...i.form):e.splice(0,e.length),i.fields)for(let e in i.fields)Array.isArray(i.fields[e])&&i.fields[e].length?ru(t,e,i.fields[e]):nu(t,e)},fieldIsVisibleAndFilled:su,setFieldsVisibility:function(t,e,i){return!!Array.isArray(e)&&(Object.keys(t).forEach((function(r){t[r].visible=e.includes(r)?i:!i})),!0)},setFieldValue:function(t,e,i){return!!Ar.objHas(t,e)&&(t[e].value=i,!0)},collectData:function(t,e){let i={};return t.flat().forEach((function(t){su(e,t)&&(i[t]=e[t].value)})),i}};function Su(){if(au)return ou;au=1;const t=t=>Object.keys(t).reduce(((t,e)=>(t[e]=[],t)),{}),e=["fields","form"];return ou=class{#t=!0;#e;constructor(t){this.#e=JSON.parse(JSON.stringify(t)),Object.keys(this.#e).forEach((t=>{e.includes(t)||delete this.#e[t]})),this.#t=0===this.#e.form.errors.length;const i=this.#i();for(let t of i)this.isFieldDirty(t)&&(this.#t=!1)}destroy(){this.#e=void 0}get clean(){return this.#t}static getDefaultResult(e){return{fields:t(e),form:{fields:t(e),errors:[],exceptions:[]}}}getReport(){return JSON.parse(JSON.stringify(this.#r()))}getDetailedReport(){return"object"==typeof this.#e?JSON.parse(JSON.stringify(this.#e)):void 0}isFieldDirty(t){return!(!Array.isArray(this.#e.fields[t])||!this.#e.fields[t].length)||!(!Array.isArray(this.#e.form.fields[t])||!this.#e.form.fields[t].length)}getCompleteResultForField(t){const e=[];return Array.isArray(this.#e.fields[t])&&e.push(...this.#e.fields[t]),Array.isArray(this.#e.form.fields[t])&&e.push(...this.#e.form.fields[t]),e}#r(){const t={clean:this.#t,fields:{},form:[]},e=this.#i();for(let i of e){const e=this.getCompleteResultForField(i);e.length&&(t.fields[i]=e)}return t.form=[...this.#e.form.errors],0===t.form.length&&delete t.form,t}#i(){const t=Object.keys(this.#e.fields),e=Object.keys(this.#e.form.fields);return[...new Set([...e,...t])]}}}function Cu(){if(du)return uu;du=1;const t=function(){if(cu)return lu;cu=1;class t extends Error{constructor(t,e={},i=null){return super(t),this.options=e,this.adopt(i),this.fill(),this.getTime(),this}adopt(t){return t instanceof Error&&(this.parent=t),this}getStack(){return this.parent?this.parent.stack:this.stack}getDetails(){let t=this;return this.parent&&(t=this.parent),{columnNumber:t.columnNumber,fileName:t.fileName,lineNumber:t.lineNumber,name:t.name,message:t.message,stack:t.stack}}getTime(){let t=new Date;return this.env.date={timestamp:t.getTime(),offset:t.getTimezoneOffset()},this.env.date}filterEnv(t,e){let i={};for(let r of e)Object.prototype.hasOwnProperty.call(t,r)&&(i[r]=t[r]);return i}fill(){return this.env={browser:!1,node:!0,versions:Object.assign({},process.versions),vars:this.filterEnv(process.env,this.options.whitelist||["NODE_ENV"])},this}}return lu=t}();return uu=class extends t{constructor(t,e={},i=null,r={}){return super(t,{fields:e,params:r},i),this}setFieldsErrors(t){this.options.fields=t}getFieldsErrors(){return this.options.fields}}}function Lu(){if(pu)return fu;pu=1;const t=Su(),e=Cu(),i=gu?hu:(gu=1,hu=async(t,e)=>{if("function"==typeof t)return"AsyncFunction"===t.constructor.name?await t(...e):t(...e)});fu=async(e,i)=>{const n=t.getDefaultResult(i);return await r({validators:e,data:i,result:n}),await l({validators:e,data:i,result:n}),new t(n)};const r=async({validators:t,data:e,result:i})=>{for(let r in e)await n(r,e[r],t,i)},n=async(t,e,i,r)=>{const n=s(t,i);return await o(t,e,n,r)},s=(t,e)=>e&&e.fields&&e.fields[t]?e.fields[t]:[],o=async(t,r,n,s)=>{for(let o of n)try{await i(o.validator,[r])||a(t,o.message,s)}catch(i){i instanceof e||!o.message?a(t,i.message,s):a(t,o.message,s)}},a=(t,e,i)=>{i.fields[t].includes(e)||i.fields[t].push(e)},l=async({validators:t,data:e,result:i})=>{const r=c(t);await u(e,r,i)},c=t=>t&&t.form?t.form:[],u=async(t,e,i)=>{for(let r of e)try{await r(t)}catch(t){if(!t||"function"!=typeof t.getFieldsErrors)throw t;{const e=t.getFieldsErrors();Array.isArray(e.form)&&d(e.form,i),e.fields&&g(e.fields,i)}}},d=(t,e)=>{t.forEach((t=>{h(t,e)}))},h=(t,e)=>{e.form.errors.includes(t)||e.form.errors.push(t)},g=(t,e)=>{for(let i in t)f(i,t[i],e)},f=(t,e,i)=>{e.forEach((e=>{p(t,e,i)}))},p=(t,e,i)=>{Array.isArray(i.form.fields[t])||(i.form.fields[t]=[]),i.form.fields[t].includes(e)||i.form.fields[t].push(e)};return fu}function Eu(){if(yu)return bu;yu=1;const{composeFieldsValidators:t,composeFormValidators:e}=mu?vu:(mu=1,vu={composeFieldsValidators:(t,e)=>{if(e&&e.fields){const i=Object.keys(t),r={};return i.forEach((t=>{Array.isArray(e.fields[t])&&(r[t]=e.fields[t])})),r}return{}},composeFormValidators:(t,e)=>e?e.forms&&Array.isArray(e.forms[t])?e.forms[t]:Array.isArray(e.form)?e.form:[]:[]}),i=Lu();return bu=r=>(n,s)=>{const o={fields:t(n,r),form:e(s,r)};return i(o,n)}}function Tu(){if(ku)return wu;ku=1;const t=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),{augmentFieldsValidators:e,augmentFormValidators:i}=function(){if($u)return Ou;$u=1;const t=(t,e)=>{if(t.validator&&"function"==typeof t.validator){const i=t.validator,r={...t};return delete r.validator,r.validator=t=>i(t,e()),r}return t},e=(t,e)=>i=>t(i,e());return Ou={augmentFieldsValidators:(e,i)=>e.map((e=>t(e,i))),augmentFieldValidator:t,augmentFormValidators:(t,i)=>t.map((t=>e(t,i))),augmentFormValidator:e}}();wu=(e,s)=>{if(null==e)return{fields:{},forms:{}};const o={};return t(e,"fields")&&(o.fields=r(e.fields,s)),t(e,"forms")?o.forms=n(e.forms,s):t(e,"form")&&(o.form=i(e.form,s)),o};const r=(t,i)=>{const r={};for(let n in t)Array.isArray(t[n])&&(r[n]=e(t[n],i));return r},n=(t,e)=>{const r={};for(let n in t)Array.isArray(t[n])&&(r[n]=i(t[n],e));return r};return wu}var xu=function(){if(Iu)return _u;Iu=1;const t=Lu(),e=Eu(),i=Tu(),r=Su();return _u={name:"not-validation",Session:t,Runner:e,Builder:i,Result:r}}(),Nu=Se('<div><div class="field-label is-normal"><!></div> <div class="field-body"></div></div>'),Fu=Se("<!> <!>",1),Mu=Se("<div></div>");function Ru(t,e){Zt(e,!0);let i=Si(),r=Ui(e,"label",3,""),n=Ui(e,"name",3,"generic field"),s=Ui(e,"readonly",3,!1),o=Ui(e,"horizontal",3,!1),a=Ui(e,"controls",19,(()=>[])),l=Ui(e,"classes",3,""),c=Ui(e,"addons",3,!1),u=Ui(e,"addonsCentered",3,!1),d=Ui(e,"addonsRight",3,!1),h=Ui(e,"grouped",3,!1),g=Ui(e,"groupedMultiline",3,!1),f=Ui(e,"groupedRight",3,!1),p=Ui(e,"groupedCentered",3,!1),v=x(""),m=x(!1),b=x(void 0);function y(t){let e=t.detail;i("change",e)}Ai((()=>{D(v,Gt(v)+" "+l()),D(v,Gt(v)+(c()?" has-addons ":"")),D(v,Gt(v)+(u()?" has-addons-centered ":"")),D(v,Gt(v)+(d()?" has-addons-right ":"")),D(v,Gt(v)+(h()?" is-grouped ":"")),D(v,Gt(v)+(g()?" is-grouped-multiline ":"")),D(v,Gt(v)+(f()?" is-grouped-right ":"")),D(v,Gt(v)+(p()?" is-grouped-centered ":"")),s()&&a().forEach((t=>{t.readonly=!0}));let t=a().filter((t=>"UIHidden"!==t.component));D(m,0===t.length);let e=a().map((t=>t.component)).join("_");D(b,`form-field-${e}-${n()}`)}));var O=Le();qe(he(O),(()=>Gt(m)),(t=>{var e=Le();Je(he(e),17,a,Ge,((t,e)=>{var i=Le();const r=j((()=>co.get(Gt(e).component)));ri(he(i),(()=>Gt(r)),((t,i)=>{i(t,Ri((()=>Gt(e)),{get fieldname(){return n()},$$events:{change:y}}))})),Ee(t,i)})),Ee(t,e)}),(t=>{var e=Le();qe(he(e),o,(t=>{var e=Nu(),i=de(e),s=de(i),o=j((()=>r()||a()[0].label));oo(s,{get id(){return Gt(b)},get label(){return Gt(o)}});var l=ge(i,2);Je(l,21,a,Ge,((t,e)=>{var i=Le();const r=j((()=>co.get(Gt(e).component)));ri(he(i),(()=>Gt(r)),((t,i)=>{i(t,Ri((()=>Gt(e)),{get fieldname(){return n()},$$events:{change:y}}))})),Ee(t,i)})),tt((()=>{ai(e,`field is-horizontal ${Gt(v)??""} ${Gt(b)??""}`),ni(l,"id",Gt(b))})),Ee(t,e)}),(t=>{var e=Mu();Je(e,21,a,Ge,((t,e)=>{var i=Fu();const r=j((()=>co.get(Gt(e).component)));var s=he(i);oo(s,{get id(){return`form-field-${Gt(e).component??""}-${n()??""}`},get label(){return Gt(e).label}}),ri(ge(s,2),(()=>Gt(r)),((t,i)=>{i(t,Ri((()=>Gt(e)),{get fieldname(){return n()},$$events:{change:y}}))})),Ee(t,i)})),tt((()=>ai(e,`field ${Gt(v)??""} ${Gt(b)??""}`))),Ee(t,e)}),!0),Ee(t,e)})),Ee(t,O),te()}function Du(t,e,i){return t&&t.preventDefault(),e("submit",i()),!1}function Uu(t,e){e("reject")}var Pu=Se('<div><span class="title"> </span></div>'),ju=Se('<div class="notification is-success"><h3 class="form-success-message"> </h3></div>'),Wu=Se('<h5 class="title is-5"> </h5>'),Bu=Se('<h6 class="subtitle is-6"> </h6>'),zu=Se("<button> </button>"),Vu=Se("<button> </button>"),qu=Se('<div class="edit-form-error notification is-danger"> </div>'),Hu=Se('<div class="buttons is-grouped is-centered"><!> <!></div> <!>',1),Ku=Se("<div><!></div>"),Gu=Se('<div class="column notification is-danger"> </div>'),Ju=Se('<div class="columns"></div>'),Yu=Se('<div class="notification is-danger"> </div>'),Qu=Se("<span> </span>"),Xu=Se('<div class="edit-form-error notification is-danger"></div>'),Zu=Se("<button> </button>"),td=Se("<button> </button>"),ed=Se('<!> <div class="buttons is-grouped is-centered"><!> <!></div>',1),id=Se("<!> <!> <!> <!> <!>",1),rd=Se('<div class="form-container"><!> <!></div>');function nd(t,e){Zt(e,!0);const i=xi(),r=()=>Ti(tr,"$LOCALE",i);let n=Si(),s=x(re([])),o=x(!1),a=x(!1),l=x(!1),c=Ui(e,"form",31,(()=>re({}))),u=Ui(e,"loading",15,!1),d=Ui(e,"loader",3,"container"),h=Ui(e,"fields",19,(()=>[])),g=Ui(e,"SUCCESS_TEXT",3,"Операция завершена"),f=Ui(e,"WAITING_TEXT",3,"Отправка данных на сервер"),p=Ui(e,"title",3,""),v=Ui(e,"description",3,""),m=Ui(e,"buttonsFirst",3,!1),b=Ui(e,"horizontal",3,!1),y=Ui(e,"submit",19,(()=>({caption:"Отправить",enabled:!0}))),O=Ui(e,"cancel",19,(()=>({caption:"Назад",enabled:!0}))),$=j((()=>Gt(o)||Gt(a)));function w(){return Au.collectData(h(),c())}function k(t,e){Au.setFieldsVisibility(c(),t,e)&&c(c())}function _(t){let e=t.detail;c(c()[e.field].value=e.value,!0),c(c()),n("change",e)}var I=rd(),A=de(I);return qe(A,(()=>"hidden"!==d()),(t=>{var e=Pu(),i=de(e),n=de(i);tt((()=>{ai(e,`${("page"===d()?"pageloader":"containerloader")??""} ${(u()?"is-active":"")??""}`),je(n,r()[f()])})),Ee(t,e)})),qe(ge(A,2),(()=>Gt(l)),(t=>{var e=ju(),i=de(e),n=de(i);tt((()=>je(n,r()[g()]))),Ee(t,e)}),(t=>{var e=id(),i=he(e);qe(i,p,(t=>{var e=Wu(),i=de(e);tt((()=>je(i,r()[p()]))),Ee(t,e)}));var o=ge(i,2);qe(o,v,(t=>{var e=Bu(),i=de(e);tt((()=>je(i,r()[v()]))),Ee(t,e)}));var a=ge(o,2);qe(a,m,(t=>{var e=Hu(),i=he(e),o=de(i);qe(o,(()=>O().enabled),(t=>{var e=zu();e.__click=[Uu,n];var i=de(e);tt((()=>{ai(e,`button is-outlined ${O().classes??""}`),je(i,r()[O().caption])})),Ee(t,e)})),qe(ge(o,2),(()=>y().enabled),(t=>{var e=Vu();e.__click=[Du,n,w];var i=de(e);tt((()=>{e.disabled=Gt($),ai(e,`button is-primary is-hovered ${y().classes??""}`),je(i,r()[y().caption])})),Ee(t,e)})),qe(ge(i,2),(()=>Gt(s).length>0),(t=>{var e=qu(),i=de(e);tt((()=>je(i,Gt(s).join(", ")))),Ee(t,e)})),Ee(t,e)}));var l=ge(a,2);Je(l,17,h,Ge,((t,e)=>{var i=Le();qe(he(i),(()=>Array.isArray(Gt(e))),(t=>{var i=Ju();Je(i,21,(()=>Gt(e)),Ge,((t,e)=>{var i=Le();qe(he(i),(()=>c()[Gt(e)]&&c()[Gt(e)].component),(t=>{var i=Le();qe(he(i),(()=>c()[Gt(e)].visible),(t=>{var i=Ku(),r=de(i),n=j((()=>[c()[Gt(e)]]));Ru(r,{get controls(){return Gt(n)},get name(){return Gt(e)},get horizontal(){return b()},get label(){return c()[Gt(e)].label},$$events:{change:_}}),tt((()=>ai(i,`column ${(c()[Gt(e)].fieldSize?"is-"+c()[Gt(e)].fieldSize:"")??""} `))),Ee(t,i)})),Ee(t,i)}),(t=>{var i=Gu(),r=de(i);tt((()=>je(r,`Subfield '${Gt(e)??""}' is not registered`))),Ee(t,i)})),Ee(t,i)})),Ee(t,i)}),(t=>{var i=Le();qe(he(i),(()=>c()[Gt(e)]&&c()[Gt(e)].component),(t=>{var i=Le();qe(he(i),(()=>c()[Gt(e)].visible),(t=>{var i=j((()=>[c()[Gt(e)]]));Ru(t,{get controls(){return Gt(i)},get name(){return Gt(e)},get horizontal(){return b()},get label(){return c()[Gt(e)].label},$$events:{change:_}})})),Ee(t,i)}),(t=>{var i=Yu(),r=de(i);tt((()=>je(r,`Field '${Gt(e)??""}' is not registered`))),Ee(t,i)}),!0),Ee(t,i)})),Ee(t,i)})),qe(ge(l,2),(()=>!m()),(t=>{var e=ed(),i=he(e);qe(i,(()=>Gt(s).length>0),(t=>{var e=Xu();Je(e,21,(()=>Gt(s)),Ge,((t,e)=>{var i=Qu(),n=de(i);tt((()=>je(n,r()[Gt(e)]))),Ee(t,i)})),Ee(t,e)}));var o=de(ge(i,2));qe(o,(()=>O().enabled),(t=>{var e=Zu();e.__click=[Uu,n];var i=de(e);tt((()=>{ai(e,`button ${(O().classes?O().classes:"")??""}`),je(i,r()[O().caption])})),Ee(t,e)})),qe(ge(o,2),(()=>y().enabled),(t=>{var e=td();e.__click=[Du,n,w];var i=de(e);tt((()=>{e.disabled=Gt($),ai(e,`button is-primary is-hovered ${(y().classes?y().classes:"")??""}`),je(i,r()[y().caption])})),Ee(t,e)})),Ee(t,e)})),Ee(t,e)})),Ee(t,I),te({collectData:w,setFieldInvalid:function(t,e,i){c(Au.setFieldInvalid(c(),t,e,i)),D(a,!0)},setFieldValid:function(t,e){c(Au.setFieldValid(c(),t,e))},isFieldValid:function(t){return Au.isFieldValid(c(),t)},setFormFieldInvalid:function(t,e){c(Au.setFormFieldInvalid(c(),t,e)),n("field.invalid",{fieldName:t})},setFormFieldValid:function(t){c(Au.setFormFieldValid(c(),t)),n("field.valid",{fieldName:t})},updateFormValidationStatus:function(t){if(D(o,!1),D(a,!1),Array.isArray(t.form)&&t.form.length?(Gt(s).splice(0,Gt(s).length,...t.form),D(o,!0)):Gt(s).splice(0,Gt(s).length),D(s,re(Gt(s))),t.fields)for(let e of Object.keys(c()))Array.isArray(t.fields[e])&&t.fields[e].length?(Au.setFormFieldInvalid(c(),e,t.fields[e]),D(a,!0)):Au.setFormFieldValid(c(),e)},showSuccess:function(){D(l,!0)},setLoading:function(){u(!0)},resetLoading:function(){u(!1)},setFieldsVisibility:k,setVisibleFields:function(t){k(t,!0)},setInvisibleFields:function(t){k(t,!1)},setFieldValue:function(t,e){Au.setFieldValue(c(),t,e)&&_({detail:{field:t,value:e}})},updateField:function(t,e){c(c()[t]={...c()[t],...e},!0),c(c())}})}ke(["click"]);const sd={notReadonly:t=>({readonly:!t}),readonly:t=>({readonly:t}),enable:t=>({disabled:!t}),disable:t=>({disabled:t})};class od{static add(t,e){Ar.objHas(dr(od,this,ad)._,t)||(dr(od,this,ad)._[t]=e)}static remove(t){Ar.objHas(dr(od,this,ad)._,t)&&!Object.keys(sd).includes(t)&&delete dr(od,this,ad)._[t]}static exec(t,e,i,r,n){return dr(od,this,ad)._[t](r,e,i,n)}}var ad={_:{...sd}};var ld=new WeakMap,cd=new WeakMap,ud=new WeakMap,dd=new WeakMap,hd=new WeakMap,gd=new WeakMap,fd=new WeakSet;class pd extends Bl{constructor({target:t=null,name:e="Default",options:i={},working:r={},data:n={},ui:s=nd}){super({working:{name:`${e}Form`,...r},options:i,data:n}),vr(this,fd),fr(this,ld,null),fr(this,cd,null),fr(this,ud,null),fr(this,dd,"default"),fr(this,hd,new lo),fr(this,gd,null),pr(gd,this,new lo(ho.getContent())),t&&this.setOptions("target",t),pr(ld,this,s),Ar.objHas(i,"action")&&pr(dd,this,i.action),this.initForm()}initForm(){this.getOptions("autoInit",!0)&&this.initLibs(),this.getOptions("autoRender",!0)&&this.initUI()}initLibs(){this.initFields(),this.initVariants(),this.initValidator()}reInit(){this.initLibs(),this.updateUI(),this.resetLoading()}initFields(){const t=this.getFormManifest();Ar.objHas(t,"fields")&&gr(hd,this).isEmpty()&&gr(hd,this).import(t.fields)}initVariants(){this.getOptions("variants")&&gr(gd,this).import(this.getOptions("variants"))}initValidator(){pr(cd,this,xu.Runner(this.getFormValidators()))}initUI(){try{const t=dr(fd,this,Od).call(this,{manifest:this.getFormManifest(),formOptions:this.getFormOptions(),data:this.getFormData(),injectedProps:this.getFormInjectedProps()}),e=this.getFormTargetEl();for(;e.children.length;)e.removeChild(e.firstChild);pr(ud,this,new(gr(ld,this))({target:e,props:t})),dr(fd,this,vd).call(this),this.validateForm()}catch(t){this.error(t)}}updateUI(){try{const t=dr(fd,this,Od).call(this,{manifest:this.getFormManifest(),formOptions:this.getFormOptions(),data:this.getFormData(),injectedProps:this.getFormInjectedProps()});gr(ud,this).$set(t),this.validateForm()}catch(t){this.error(t)}}async validateForm(){if(!this.getOptions("readonly",!1))try{const t=await gr(cd,this).call(this,gr(ud,this).collectData(),this.getFormAction());gr(ud,this).updateFormValidationStatus(t.getReport()),t.clean||this.emit("error",t.getReport())}catch(t){const e={form:[Jr.ERROR_DEFAULT,t.message]};gr(ud,this)&&gr(ud,this).updateFormValidationStatus(e),this.emit("error",e),Ar.report(t)}}submit(t){this.emit("submit",t)}reject(){this.emit("reject")}$on(){gr(ud,this)&&gr(ud,this).$on(...arguments)}setLoading(){this.emit("loading"),gr(ud,this).setLoading()}resetLoading(){this.emit("loaded"),gr(ud,this).resetLoading()}destroy(){this.emit("destroy"),gr(ud,this)&&(gr(ud,this).$destroy&&gr(ud,this).$destroy(),gr(ud,this).destroy&&gr(ud,this).destroy(),pr(ud,this,null)),pr(cd,this,null),pr(dd,this,null),pr(hd,this,null),pr(gd,this,null),this.setOptions(null),this.setWorking(null),this.setData(null)}getName(){return this.getWorking("name")}getFormAction(){return gr(dd,this)}setFormAction(t){t&&t!==gr(dd,this)&&(pr(dd,this,t),gr(ud,this)&&gr(ud,this).$destroy(),this.initForm())}processResult(t){return t.status===$n?(this.setFormSuccess(),!0):(this.setFormErrors(t),!1)}setFormSuccess(){gr(ud,this).showSuccess(),this.emit("success")}setFormErrors(t){if(this.getOptions("readonly",!1))return;const e={form:[],fields:{}};t.message&&e.form.push(t.message),t.errors&&Object.keys(t.errors).length>0&&(e.fields={...t.errors}),gr(ud,this).updateFormValidationStatus(e),this.emit("error",e)}getVariant(t,e){let i=gr(gd,this).get(t).find((function(t){return t.id===e}));return i||null}getFormTargetEl(){const t=this.getOptions("target",".form");if(t instanceof HTMLElement)return t;if("string"==typeof t)return document.querySelector(t);throw new Error("Form parent element is not defined")}getFormValidators(){return this.getOptions("validators")?this.getOptions("validators",{}):(dr(fd,this,$d).call(this,"validators"),{})}getFormManifest(){const t=this.getModelName();return t&&Ar.getApp()?Ar.getApp().getInterfaceManifest(t):this.getOptions("manifest",void 0)?this.getOptions("manifest",{}):(dr(fd,this,$d).call(this,"manifest"),{})}getFormData(){return this.getData()?this.getData():(dr(fd,this,$d).call(this,"data"),{})}getFormOptions(){return this.getOptions("ui",void 0)||this.getOptions("fields",void 0)?{ui:this.getOptions("ui",{}),fields:this.getOptions("fields",{})}:(dr(fd,this,$d).call(this,"options"),{ui:{},fields:{}})}getFormInjectedProps(){return this.getOptions("injected",{})}collectData(){if(this.getOptions("readonly",!1))return this.getData();const t=gr(ud,this).collectData();return this.setData({...t}),t}updateField(t,e){gr(ud,this).updateField(t,e)}getModel(t,e){return"string"==typeof t?this.getInterface(t)(e||{}):this.getInterface()(t||{})}getInterface(t=!1){return Ar.getApp().getInterface(t||this.getModelName())}getModelName(){return this.getOptions("model")}}function vd(){var t=this;gr(ud,this).$on("change",(function(){return t.validateForm()})),gr(ud,this).$on("change",(function(e){t.emit("change",e.detail),t.emit(`change.${e.detail.field}`,e.detail.value)})),gr(ud,this).$on("submit",(function(e){return t.submit(e.detail)})),gr(ud,this).$on("reject",(function(){return t.reject()})),gr(ud,this).$on("error",(function({detail:e}){return t.emit("error",e)})),dr(fd,this,md).call(this)}function md(){const t=this.getOptions("masters",!1);if(t)for(let e in t){const i=t[e];for(let t in i){const r=i[t];dr(fd,this,bd).call(this,t,e,r)}}}function bd(t,e,i=[]){var r=this;this.on(`change.${e}`,(function(n){dr(fd,r,yd).call(r,t,e,i,n)})),this.emit(`change.${e}`,this.getFormData()[e])}function yd(t,e,i,r){var n=this;const s=od.exec(t,e,i,r,this);i.forEach((function(t){n.updateField(t,s)}))}function Od({manifest:t,formOptions:e={ui:{},fields:{}},data:i=null,injectedProps:r={}}){const n=gr(dd,this);null==e&&(e={ui:{},fields:{}});const s=Au.initFormByField({},t.actions[n].fields,gr(gd,this),gr(hd,this),e.fields,i);return{loading:!this.getOptions("autoInit",!0),title:t.actions[n].title,description:t.actions[n].description,fields:t.actions[n].fields,form:s,...e.ui,...r}}function $d(t){this.error(`${t} for ${this.getWorking("name")} form is not defined`)}var wd=Se('<div class="block-container"><div class="form-paper"></div> <!></div>');function kd(t,e){Zt(e,!0);let i=Si(),r=Ui(e,"name",3,"default-form"),n=Ui(e,"showModes",3,!1),s=Ui(e,"mode",15,"default"),o=Ui(e,"forms",19,(()=>[]));let a=x(re([]));function l(){D(a,re(o().filter((t=>s()!==t.mode)).map((t=>({title:t.title,outlined:!0,type:"link",action(){var e;e=t.mode,s(e),i("mode",e),l()}})))))}Ai((()=>{l()}));var c=wd(),u=de(c);qe(ge(u,2),n,(t=>{fn(t,{centered:!0,get values(){return Gt(a)},set values(t){D(a,re(t))},classes:"mt-4"})})),tt((()=>{ni(c,"id",`${r()??""}-form-set`),ni(u,"id",`${r()??""}-form-set-container`)})),Ee(t,c),te()}const _d="form-set";var Id=new WeakMap,Ad=new WeakMap,Sd=new WeakMap,Cd=new WeakMap,Ld=new WeakSet;function Ed(){return{showModes:this.getOptions("showModes",!0),mode:this.getFormMode(),forms:this.getOptions("forms",[]),name:this.getOptions("name",_d)}}function Td(t,e){return"function"!=typeof e()||(t.preventDefault(),e()(t.currentTarget.dataset.href),!1)}var xd,Nd=Se('<li class="is-active"><a aria-current="page"> </a></li>'),Fd=Se('<li class="is-plain-crumb"> </li>'),Md=Se("<li><a> </a></li>"),Rd=Se('<nav class="breadcrumb" aria-label="breadcrumbs"><ul></ul></nav>');ke(["click"]);class Dd{static render({target:t,root:e="",navigate:i}){this.remove(),Dd.UIConstructor&&(this.ui=new Dd.UIConstructor({target:t,props:{items:this.getBreadcrumbs(),root:e,go:i}}))}static setHead(t){return this.head.splice(0,this.head.length,...t),this}static setTail(t){return this.tail.splice(0,this.tail.length,...t),this}static getBreadcrumbs(){let t=[];return t.push(...this.head),t.push(...this.tail),t}static update(){this.ui&&this.ui.$set({items:this.getBreadcrumbs()})}static remove(){return this.ui&&(this.ui.$destroy(),this.ui=null),this}}mr(Dd,"UIConstructor",null),mr(Dd,"ui",null),mr(Dd,"head",[]),mr(Dd,"tail",[]),Dd.UIConstructor=function(t,e){Zt(e,!0);const i=xi(),r=()=>Ti(tr,"$LOCALE",i);let n=Ui(e,"root",3,""),s=Ui(e,"items",19,(()=>[])),o=Ui(e,"go",3,null);var a=Rd();Je(de(a),21,s,Ge,((t,e,i)=>{var a=Le();qe(he(a),(()=>s().length===i+1),(t=>{var i=Nd(),s=de(i),o=de(s);tt((()=>{ni(s,"href",`${n()??""}${Gt(e).url??""}`),ni(s,"data-href",Gt(e).url),je(o,r()[Gt(e).title])})),Ee(t,i)}),(t=>{var i=Le();qe(he(i),(()=>!1===Gt(e).url),(t=>{var i=Fd(),n=de(i);tt((()=>je(n,r()[Gt(e).title]))),Ee(t,i)}),(t=>{var i=Md(),s=de(i);s.__click=[Td,o];var a=de(s);tt((()=>{ni(s,"href",`${n()??""}${Gt(e).url??""}`),ni(s,"data-href",Gt(e).url),je(a,r()[Gt(e).title])})),Ee(t,i)})),Ee(t,i)})),Ee(t,a)})),Ee(t,a),te()};class Ud{static hide(){}static setApp(t){return this.app||(this.app=t),this}static setOptions(t){return this.options={...this.options,...t},this}static getOptionsPathTo(t){return`menu.${this.options.type}.${t}`}static isDirectNavigation(){return this.app?this.app.getOptions(this.getOptionsPathTo("directNavigation"),this.options.directNavigation):this.options.directNavigation}static getOptions(){return this.app?{brand:this.app.getOptions("brand",this.options.brand),items:this.app.getOptions(this.getOptionsPathTo("items"),this.options.items),sections:this.app.getOptions(this.getOptionsPathTo("sections"),this.options.sections),targetSelector:this.app.getOptions(this.getOptionsPathTo("targetSelector"),this.options.targetSelector),toggleSelector:this.app.getOptions(this.getOptionsPathTo("toggleSelector"),this.options.toggleSelector),open:this.app.getOptions(this.getOptionsPathTo("open"),this.options.open),directNavigation:this.app.getOptions(this.getOptionsPathTo("directNavigation"),this.options.directNavigation),root:this.app.getOptions("router.root",this.options.root),navigate:this.options.navigate.bind(this),getComponent:this.getComponent.bind(this)}:this.options}static getComponent(t){return!!co.contains(t)&&co.get(t)}static initField(t,e=[]){var i=this;t.forEach((function(t){e.forEach((function(e){Object.hasOwn(t,e)||(t[e]=i.DEFAULT[e])})),Object.hasOwn(t,"items")&&i.initField(t.items,e)}))}static sortList(t){var e=this;t.sort((function(t,i){return Object.hasOwn(t,"items")&&e.sortList(t.items),Object.hasOwn(i,"items")&&e.sortList(i.items),t.priority===i.priority?t.title>i.title?1:-1:t.priority<i.priority?1:-1}))}static removeDublicates(t){for(let e=0;e<t.length;e++){let i=t[e].priority;t.filter((function(i){return i.id===t[e].id})).forEach((function(e,r){0!==r&&(e.priority<i&&(i=e.priority),t.splice(t.indexOf(e),1))})),t[e].priority=i}return t}static prepareData(){let t=[];t.push(...this.getOptions().items);let e=[];e.push(...this.getOptions().sections),this.initField(e,["priority"]),this.removeDublicates(e),this.initField(t,["priority","section","type"]),this.sortList(e),e.push({id:this.DEFAULT.section,title:this.DEFAULT.sectionTitle}),this.sortList(t),this.sections=e,this.items=t}static remove(){this.menu&&(this.menu.$destroy(),this.menu=null,clearInterval(this.interval))}static updateIndicator(t,e,i){this.updateSection(t,(function(t){t.indicator.state=i})),this.updateItem(e,(function(t){t.indicator.state=i}))}static updateTag(t,e,i){this.updateSection(t,(function(t){t.tag=i})),this.updateItem(e,(function(t){t.tag=i}))}static updateSectionTag(t,e){this.updateSection(t,(function(t){t.tag={...t.tag,...e}}))}static updateItemTag(t,e){this.updateItem(t,(function(t){t.tag={...t.tag,...e}}))}static updateSection(t,e){if(this.sections&&t){for(let i in this.sections)this.sections[i].id===t&&e(this.sections[i]);this.menu&&this.menu.$set({sections:this.sections})}}static updateSectionItems(t,e){if(this.sections&&t){let i=this.items.filter((function(e){return e.section===t}));for(let t of i)this.items.splice(this.items.indexOf(t),1);this.items.push(...e(i)),this.menu&&this.menu.$set({items:this.items})}}static updateItem(t,e){t&&this.items&&(this.items.forEach((function(i){i.id===t&&e(i)})),this.menu&&this.menu.$set({items:this.items}))}static isTouch(){return Jr.isMobile(!0)}static getSectionComponent(){}}function Pd(t,e){return t.preventDefault(),e("navigate",{full:t.target.getAttribute("href"),short:t.target.dataset.href}),!1}xd=Ud,mr(Ud,"MAX_TOUCH_WIDTH",1023),mr(Ud,"DEFAULT",{section:"any",sectionTitle:"Меню",priority:0,type:"link",open:!1}),mr(Ud,"app",null),mr(Ud,"directNavigation",!1),mr(Ud,"menu",void 0),mr(Ud,"options",{directNavigation:!1,navigate:function(t){if(xd.hide(),!xd.isDirectNavigation()&&xd.app){let e=xd.app.getWorking("router");if(e)return e.navigate(t.short)}document.location.assign(t.full)}}),mr(Ud,"items",[]),mr(Ud,"sections",[]),mr(Ud,"location",void 0),mr(Ud,"interval",void 0);var jd=Se("<li><a> <!> <!></a></li>"),Wd=Se("<li> <!> <!></li>");function Bd(t,e,i){return t&&t.preventDefault()&&t.stopPropagation(),e(!e()),i("toggle",{closed:e()}),!1}ke(["click"]);var zd=Se('<span class="icon is-small is-toggle-submenu is-pulled-right" role="button" tabindex="0"><i aria-hidden="true"></i></span>');function Vd(t,e){Zt(e,!0);const i=Si(),r="fa-angle-down",n="fa-angle-up";let s=Ui(e,"icon_opened",19,(()=>r)),o=Ui(e,"icon_closed",19,(()=>n)),a=Ui(e,"closed",15,!1);var l=zd();l.__click=[Bd,a,i],l.__keyup=[Bd,a,i];var c=de(l);tt((()=>ai(c,`fas ${(a()?o():s())??""}`))),Ee(t,l),te()}ke(["click","keyup"]);var qd=Se('<span class="is-no-link"> </span>'),Hd=Se("<!> <!> <!> <!>",1);function Kd(t,e){Zt(e,!0);const i=xi();let r=Ui(e,"item",19,(()=>({})));var n=Hd(),s=he(n);qe(s,(()=>r().icon),(t=>{rl(t,Ri((()=>r().icon)))}),(t=>{var e=Le();qe(he(e),(()=>"component"===r().type&&r().component&&co.contains(r().component)),(t=>{var e=Le();const i=j((()=>co.get(r().component)));ri(he(e),(()=>Gt(i)),((t,e)=>{e(t,Ri({get id(){return r().id}},(()=>r().props)))})),Ee(t,e)}),(t=>{var e=qd(),n=de(e);tt((()=>je(n,Ti(tr,"$LOCALE",i)[r().title]))),Ee(t,e)}),!0),Ee(t,e)}));var o=ge(s,2);qe(o,(()=>r().tag),(t=>{Tr(t,Ri({get id(){return r().id}},(()=>r().tag)))}));var a=ge(o,2);qe(a,(()=>r().indicator),(t=>{Wr(t,Ri({get id(){return r().id}},(()=>r().indicator)))})),ii(ge(a,2),(()=>e.children??d)),Ee(t,n),te()}function Gd(t,e){return t.preventDefault(),e("navigate",{full:t.target.getAttribute("href"),short:t.target.dataset.href}),!1}var Jd=Se('<a class="has-subitems"><!></a>'),Yd=Se("<li><!> <!></li>"),Qd=Se("<ul></ul>");function Xd(t,e){Zt(e,!0);const i=Si();let r=re({}),n=Ui(e,"root",3,""),s=Ui(e,"items",19,(()=>[])),o=Ui(e,"closed",3,!1);var a=Qd();Je(a,21,s,Ge,((t,s,o)=>{var a=Le();qe(he(a),(()=>Gt(s).items&&Gt(s).items.length),(t=>{var a=Yd(),l=de(a);qe(l,(()=>void 0!==Gt(s).url&&!1!==Gt(s).url),(t=>{var e=Jd();e.__click=[Gd,i],Kd(de(e),{get item(){return Gt(s)},children:(t,e)=>{Vd(t,{$$events:{toggle:({detail:t})=>{r[o]=t.closed}}})},$$slots:{default:!0}}),tt((()=>{ni(e,"href",`${n()??""}${Gt(s).url??""}`),ni(e,"data-href",Gt(s).url)})),Ee(t,e)}),(t=>{Kd(t,{get item(){return Gt(s)},children:(t,e)=>{Vd(t,{$$events:{toggle:({detail:t})=>{r[o]=t.closed}}})},$$slots:{default:!0}})})),Xd(ge(l,2),{get root(){return n()},get items(){return Gt(s).items},get closed(){return r[o]},set closed(t){r[o]=t},$$events:{navigate(t){Ii.call(this,e,t)}}}),tt((()=>ai(a,`is-no-follow-subtitle ${Gt(s).classes??""}`))),Ee(t,a)}),(t=>{!function(t,e){Zt(e,!0);const i=xi(),r=()=>Ti(tr,"$LOCALE",i),n=Si();let s=Ui(e,"root",3,""),o=Ui(e,"item",19,(()=>({})));var a=Le();qe(he(a),(()=>void 0!==o().url&&!1!==o().url),(t=>{var e=jd(),i=de(e);i.__click=[Pd,n];var a=de(i),l=ge(a);qe(l,(()=>o().tag),(t=>{Wr(t,Ri({get id(){return o().id}},(()=>o().tag)))})),qe(ge(l,2),(()=>o().indicator),(t=>{Wr(t,Ri({get id(){return o().id}},(()=>o().indicator)))})),tt((()=>{ai(e,o().classes),ni(i,"href",`${s()??""}${o().url??""}`),ni(i,"data-href",o().url),je(a,`${r()[o().title]??""} `)})),Ee(t,e)}),(t=>{var e=Wd(),i=de(e),n=ge(i);qe(n,(()=>o().tag),(t=>{Wr(t,Ri({get id(){return o().id}},(()=>o().tag)))})),qe(ge(n,2),(()=>o().indicator),(t=>{Wr(t,Ri({get id(){return o().id}},(()=>o().indicator)))})),tt((()=>{ai(e,`is-no-follow-subtitle ${o().classes??""}`),je(i,`${r()[o().title]??""} `)})),Ee(t,e)})),Ee(t,a),te()}(t,{get root(){return n()},get item(){return Gt(s)},$$events:{navigate(t){Ii.call(this,e,t)}}})})),Ee(t,a)})),tt((()=>ai(a,`menu-list ${(o()?"is-closed":"")??""}`))),Ee(t,a),te()}ke(["click"]);var Zd=Se("<p><!> <!> <!></p>"),th=Se("<!> <!>",1);function eh(t,e){Zt(e,!0);const i=xi();let r=Ui(e,"items",19,(()=>[])),n=Ui(e,"root",3,""),s=j((()=>r().filter((t=>e.section.id===t.section))));var o=th(),a=he(o);qe(a,(()=>e.section),(t=>{var r=Le();qe(he(r),(()=>Gt(s).length||e.section.component||e.section.tag||e.section.indicator),(t=>{var r=Zd(),n=de(r);qe(n,(()=>"component"===e.section.type&&e.section.component&&co.contains(e.section.component)),(t=>{var i=Le();const r=j((()=>co.get(e.section.component)));ri(he(i),(()=>Gt(r)),((t,i)=>{i(t,Ri({get id(){return e.section.id}},(()=>e.section.props)))})),Ee(t,i)}),(t=>{var r=Ce();tt((()=>je(r,Ti(tr,"$LOCALE",i)[e.section.title]))),Ee(t,r)}));var s=ge(n,2);qe(s,(()=>e.section.tag),(t=>{Wr(t,Ri({get id(){return e.section.id}},(()=>e.section.tag)))})),qe(ge(s,2),(()=>e.section.indicator),(t=>{Wr(t,Ri({get id(){return e.section.id}},(()=>e.section.indicator)))})),tt((()=>ai(r,`menu-label ${e.section.classes??""}`))),Ee(t,r)})),Ee(t,r)})),qe(ge(a,2),(()=>Gt(s).length),(t=>{Xd(t,{get root(){return n()},get items(){return Gt(s)},$$events:{navigate(t){Ii.call(this,e,t)}}})})),Ee(t,o),te()}function ih(t,e){Zt(e,!0);let i=Ui(e,"root",3,""),r=Ui(e,"items",19,(()=>[])),n=Ui(e,"sections",19,(()=>[])),s=Ui(e,"navigate",3,null);function o(t){"function"==typeof s()&&s()(t.detail)}var a=Le();Je(he(a),17,n,Ge,((t,e)=>{eh(t,{get section(){return Gt(e)},get items(){return r()},get root(){return i()},$$events:{navigate:o}})})),Ee(t,a),te()}const rh=Xi({open:!0});var nh;const sh="side";class oh extends Ud{static render(t){t&&this.setApp(t),this.prepareData(),this.menu||this.createUI()}static update(){this.menu&&(this.menu.$destroy(),this.createUI())}static createUI(){let t=document.querySelector(this.getOptions().targetSelector);t&&(this.menu=We(ih,{target:t,props:{items:this.items,sections:this.sections,root:this.getOptions().root,navigate:this.getOptions().navigate}}),this.initSizeResponse(),this.interval=setInterval(this.updateMenuActiveItem.bind(this),200),this.bindToggle())}static itemIsActive(t){return(this.location+"/").indexOf(t+"/")>-1}static updateMenu(){var t=this;Array.from(document.querySelectorAll(this.getOptions().targetSelector+" a")).forEach((function(e){t.itemIsActive(e.getAttribute("href"))?e.classList.add("is-active"):e.classList.remove("is-active")}))}static updateMenuActiveItem(){let t=window.location.toString(),e=this.location;e?t!==e&&(this.location=t,this.updateMenu()):(this.location=t,this.updateMenu())}static initSizeResponse(){this.nav=document.querySelector("nav.navbar"),this.aside=document.querySelector("aside"),this.main=document.querySelector("main"),this.resizeAsideAndMain(this.aside,this.main,this.nav),this.resizeMain(this.main,this.aside),window.addEventListener("resize",this.resizeMain.bind(this)),this.isTouch()&&(this.getOptions().open?this.show():this.hide())}static resizeMain(){if(this.isTouch())this.aside.classList.contains("is-active")?this.main.style.display="none":(this.main.style.display="block",this.main.style.marginLeft="0px");else{let t=this.aside.getBoundingClientRect();this.main.style.display="block","0px"===this.main.style.height&&(this.main.style.height="auto"),this.main.style.marginLeft=t.width+t.left+"px"}}static resizeAside(){if("none"!==this.aside.style.display){let t=this.nav.getBoundingClientRect();this.aside.style.height=window.innerHeight-t.height+"px",this.aside.style.marginTop=t.height+"px"}}static resizeAsideAndMain(){let t=this.nav.getBoundingClientRect();this.aside.style.height=window.innerHeight-t.height+"px"}static bindToggle(){var t=this;let e=document.querySelectorAll(this.getOptions().toggleSelector);Array.from(e).forEach((function(e){e.removeEventListener("click",t.toggle.bind(t)),e.addEventListener("click",t.toggle.bind(t))}))}static toggle(t){return t&&t.preventDefault(),this.aside&&(this.isTouch()?this.aside.classList.toggle("is-active"):this.aside.classList.toggle("is-closed"),this.resizeMain()),!1}static hide(t){return t&&t.preventDefault(),this.aside&&(this.isTouch()?this.aside.classList.remove("is-active"):this.aside.classList.add("is-closed"),this.resizeMain()),rh.update((function(t){return t.open=!1,t})),!1}static show(t){return t&&t.preventDefault(),this.aside&&(this.isTouch()?this.aside.classList.add("is-active"):this.aside.classList.remove("is-closed"),this.resizeMain()),rh.update((function(t){return t.open=!0,t})),!1}static isOpen(){return!this.aside||(this.isTouch()?this.aside.classList.contains("is-active"):!this.aside.classList.contains("is-closed"))}}nh=oh,mr(oh,"nav",void 0),mr(oh,"main",void 0),mr(oh,"aside",void 0),mr(oh,"DEFAULT",{section:"any",sectionTitle:"Меню",priority:0,open:!0,type:"link"}),mr(oh,"options",{directNavigation:!1,type:sh,items:[],sections:[],targetSelector:`#${sh}-menu`,toggleSelector:`.${sh}-menu-toggle`,root:"/",open:!0,navigate:function(t){if(nh.isTouch()&&(nh.hide(),nh.app&&nh.app.emit("top-navbar-burger:update",{closed:!0})),!nh.isDirectNavigation()&&nh.app){let e=nh.app.getWorking("router");if(e)return e.navigate(t.short)}document.location.assign(t.full)}});var ah=Se('<a class="navbar-item"><!> <!></a>');var lh=Se("<!> <!> <!>",1);function ch(t,e){Zt(e,!0);const i=xi();var r=lh(),n=he(r);qe(n,(()=>e.item.icon),(t=>{ol(t,Ri((()=>e.item.icon)))}),(t=>{var r=Le();qe(he(r),(()=>"component"===e.item.type&&e.item.component&&co.contains(e.item.component)),(t=>{var i=Le();const r=j((()=>co.get(e.item.component)));ri(he(i),(()=>Gt(r)),((t,i)=>{i(t,Ri({get id(){return e.item.id}},(()=>e.item.props)))})),Ee(t,i)}),(t=>{var r=Ce();tt((()=>je(r,Ti(tr,"$LOCALE",i)[e.item.title]))),Ee(t,r)}),!0),Ee(t,r)}));var s=ge(n,2);qe(s,(()=>e.item.tag),(t=>{Tr(t,Ri({top:!0,right:!0,size:"small",get id(){return e.item.id}},(()=>e.item.tag)))})),qe(ge(s,2),(()=>e.item.indicator),(t=>{Wr(t,Ri({get id(){return e.item.id}},(()=>e.item.indicator)))})),Ee(t,r),te()}function uh(t,e,i){e("click",{event:t,element:i()})}var dh=Se("<hr>"),hh=Se("<a><!></a>"),gh=Se('<div role="button" tabindex="0"><!></div>'),fh=Se("<!> <!>",1);function ph(t,e){Zt(e,!0);const i=Si();let r=Ui(e,"root",3,""),n=Ui(e,"item",19,(()=>({}))),s=Ui(e,"hidden",3,""),o=Ui(e,"classes",3,"");var a=fh(),l=he(a);qe(l,(()=>n().break),(t=>{var e=dh();tt((()=>ai(e,`navbar-divider ${(s()?`is-hidden-${s()}`:"")??""} `))),Ee(t,e)})),qe(ge(l,2),(()=>n().url),(t=>{var e=hh();e.__click=[uh,i,n],ch(de(e),{get item(){return n()}}),tt((()=>{ai(e,`navbar-item ${(s()?`is-hidden-${s()}`:"")??""} ${n().classes??""} ${o()??""} `),ni(e,"href",`${r()??""}${n().url??""}`),ni(e,"data-href",n().url)})),Ee(t,e)}),(t=>{var e=gh();e.__click=[uh,i,n],e.__keyup=[uh,i,n],ch(de(e),{get item(){return n()}}),tt((()=>ai(e,`navbar-item ${(s()?`is-hidden-${s()}`:"")??""} ${n().classes??""} ${o()??""}`))),Ee(t,e)})),Ee(t,a),te()}function vh(t,e,i){e("click",{event:t,element:i()})}ke(["click","keyup"]);var mh=Se('<div><a href=""><!></a> <div></div></div>'),bh=Se("<a><!></a>"),yh=Se('<div role="button" tabindex="0"><!></div>');function Oh(t,e){Zt(e,!0);const i=Si();let r=Ui(e,"root",3,""),n=Ui(e,"section",19,(()=>({}))),s=Ui(e,"items",19,(()=>[])),o=Ui(e,"hidden",3,""),a=Ui(e,"hoverable",3,!0),l=Ui(e,"arrowless",3,!1),c=Ui(e,"right",3,!1);var u=Le();qe(he(u),(()=>s().length),(t=>{var u=mh(),d=de(u);d.__click=[vh,i,n],ch(de(d),{get item(){return n()}});var h=ge(d,2);Je(h,21,s,(t=>t.id),((t,i)=>{ph(t,{get root(){return r()},get item(){return Gt(i)},$$events:{click(t){Ii.call(this,e,t)}}})})),tt((()=>{ai(u,`navbar-item has-dropdown ${(a()?"is-hoverable":"")??""} ${(o()?`is-hidden-${o()}`:"")??""} `),ai(d,`navbar-link ${(l()?"is-arrowless":"")??""}`),ai(h,`navbar-dropdown ${(c()?"is-right":"")??""}`)})),Ee(t,u)}),(t=>{var e=Le();qe(he(e),(()=>n().url),(t=>{var e=bh();e.__click=[vh,i,n],ch(de(e),{get item(){return n()}}),tt((()=>{ai(e,`navbar-item ${(o()?`is-hidden-${o()}`:"")??""} `),ni(e,"href",`${r()??""}${n().url??""}`),ni(e,"data-href",n().url)})),Ee(t,e)}),(t=>{var e=yh();e.__click=[vh,i,n],e.__keyup=[vh,i,n],ch(de(e),{get item(){return n()}}),tt((()=>ai(e,`navbar-item ${(o()?`is-hidden-${o()}`:"")??""} `))),Ee(t,e)}),!0),Ee(t,e)})),Ee(t,u),te()}function $h(t,e,i){return t.preventDefault(),e(!e()),i("toggle",{closed:e()}),!1}ke(["click","keyup"]);var wh=Se('<a href="" role="button" aria-label="menu" aria-expanded="false" data-target="navbar"><span aria-hidden="true"></span> <span aria-hidden="true"></span> <span aria-hidden="true"></span></a>');function kh(t,e){Zt(e,!0);const i=Si();let r=Ui(e,"events",31,(()=>re({}))),n=Ui(e,"register",19,(()=>Ar.registerWidgetEvents.bind(Ar))),s=Ui(e,"closed",15,!0),o=Ui(e,"onUpdate",3,(t=>{s(t.closed)}));Ai((()=>{Ar.objHas(r(),"top-navbar-burger:update")||r(r()["top-navbar-burger:update"]=o(),!0),n()(r())})),rh.subscribe((t=>(s(!t.open),t)));var a=wh();a.__click=[$h,s,i],tt((()=>ai(a,`navbar-burger ${(s()?"":"is-active")??""}`))),Ee(t,a),te()}ke(["click"]);var _h,Ih=Se('<div class="navbar-brand"><!> <!> <!> <!></div> <div id="navbar"><div class="navbar-start"></div> <div class="navbar-end"></div></div>',1);function Ah(t,e){Zt(e,!0);const i=Si();let r=Ui(e,"sections",19,(()=>[])),n=Ui(e,"items",19,(()=>[])),s=Ui(e,"root",3,""),o=Ui(e,"navigate",3,null),a=Ui(e,"brand",3,!1),l=Ui(e,"showBurger",3,!0),c=Ui(e,"burgerControlsSidemenu",3,!0),u=x(!0);function d({detail:t}){let{event:e,element:i}=t;return Object.hasOwn(i,"action")?i.action(e,i):(e.preventDefault(),"function"==typeof o()&&o()({full:e.currentTarget.getAttribute("href"),short:e.currentTarget.dataset.href}),!1)}let h={},g={};function f({detail:t}){c()?oh.toggle():(i("toggleBurger",t),D(u,re(t.closed)))}var p=Ih(),v=he(p),m=de(v);qe(m,a,(t=>{!function(t,e){let i=Ui(e,"url",3,"/"),r=Ui(e,"title",3,""),n=Ui(e,"icon",19,(()=>({src:"https://via.placeholder.com/56x28",width:28,height:56})));var s=ah(),o=de(s);ol(o,Ri(n)),qe(ge(o,2),r,(t=>{var e=Le();ti(he(e),(()=>`<span class="navbar-item-brand-title">${r()}</span>`)),Ee(t,e)})),tt((()=>ni(s,"href",i()))),Ee(t,s)}(t,Ri(a))}));var b=ge(m,2);Je(b,17,r,(t=>t.id),((t,e)=>{var i=Le();qe(he(i),(()=>Gt(e).showOnTouch),(t=>{ph(t,{hidden:"desktop",get item(){return Gt(e)},get root(){return s()},$$events:{click:d}})})),Ee(t,i)}));var y=ge(b,2);Je(y,17,n,(t=>t.id),((t,e)=>{var i=Le();qe(he(i),(()=>Gt(e).showOnTouch),(t=>{ph(t,{hidden:"desktop",get item(){return Gt(e)},get root(){return s()},$$events:{click:d}})})),Ee(t,i)})),qe(ge(y,2),l,(t=>{kh(t,{$$events:{toggle:f}})}));var O=ge(v,2),$=de(O);Je($,21,n,Ge,((t,e)=>{var i=Le();qe(he(i),(()=>"start"===Gt(e).place),(t=>{ph(t,{hidden:"touch",get item(){return Gt(e)},$$events:{click:d}})})),Ee(t,i)})),Je(ge($,2),21,r,(t=>t.id),((t,e)=>{var i=Le();qe(he(i),(()=>(h[Gt(e).id]||Gt(e).indicator||Gt(e).tag)&&"end"==Gt(e).place),(t=>{Oh(t,{right:!0,get hidden(){return Gt(e).hidden},get root(){return s()},get section(){return Gt(e)},get items(){return g[Gt(e).id]},$$events:{click:d}})})),Ee(t,i)})),tt((()=>ai(O,`navbar-menu ${(Gt(u)?"":"is-active")??""}`))),Ee(t,p),te()}class Sh extends Ud{static render(t){if(t&&this.setApp(t),this.prepareData(),!this.menu){let t=document.querySelector(this.getOptions().targetSelector);if(!t)return;this.menu=We(Ah,{target:t,props:{brand:this.getOptions().brand,items:this.items,sections:this.sections,root:this.getOptions().root,navigate:this.getOptions().navigate}}),this.interval=setInterval(this.updateMenuActiveItem.bind(this),200)}}static updateMenu(t){Array.from(document.querySelectorAll(this.getOptions().targetSelector+" aside.menu a")).forEach((function(e){e.href==t||t.href&&0==t.href.indexOf(e.href)?e.classList.add("is-active"):e.classList.remove("is-active")}))}static updateMenuActiveItem(){let t=window.location.toString(),e=this.location;e?t!==e&&(this.location=t,this.updateMenu(t)):(this.location=t,this.updateMenu(t))}static toggle(){document.querySelector(this.getOptions().targetSelector).classList.toggle("is-active")}static hide(){document.querySelector(this.getOptions().targetSelector).classList.remove("is-active")}static setBurgerState(t){this.menu.$set({menuClosed:t})}}_h=Sh,mr(Sh,"DEFAULT",{section:"any",sectionTitle:"Меню",priority:0,type:"link",place:"main"}),mr(Sh,"options",{brand:!1,type:"top",items:[],sections:[],targetSelector:"#top-menu",root:"/",directNavigation:!1,navigate:function(t){if(_h.hide(),!_h.isDirectNavigation()&&_h.app){let e=_h.app.getWorking("router");if(e)return e.navigate(t.short)}document.location.assign(t.full)}});const Ch=function(t){return Object.hasOwn(t,"status")&&Object.hasOwn(t,"result")?t.result:t};const Lh=["create","update","list","delete","details"];class Eh{static async preload(t,e="list"){try{if(!Lh.includes(e))return;let i=t.getOptions(`${e}.preload`,{});if(0==Object.keys(i).length&&(i=t.getOptions("preload",{})),Object.keys(i).length>0){let r=Object.keys(i),n=[];r.forEach((function(e){let r=Ar.lowerFirstLetter(i[e]),s=t.make[r]({});n.push(s.$listAll())}));let s=await Promise.all(n);for(let i=0;i<r.length;i++){const n=r[i];if("ok"===s[i].status&&Array.isArray(s[i].result)){const r=s[i].result.map((function(t){return{id:t._id,title:t.title}}));t.setOptions(`variants.${e}.${n}`,r)}}}t.log("preload finished")}catch(e){t.report(e),t.showErrorMessage(e)}}}class Th{static extractActionName(t,e){let i="list";return 1===e.length?i="create"===e[0]?"create":t.actionHandlerExists(e[0])?e[0]:"details":e.length>1&&(i="delete"===e[1]?"delete":"update"===e[1]?"update":e[1]),i}static route(t,e){try{const i=Th.extractActionName(t,e);return t.setCurrentAction(i),t.runAction(i,e)}catch(e){t.report(e),t.showErrorMessage(e)}}}class xh{static error(t,e,i){t.setUI("__message__",new Tl({target:t.getContainerInnerElement(),props:{title:e,message:i}}))}static success(t,e,i){t.setUI("__message__",new Nl({target:t.getContainerInnerElement(),props:{title:e,message:i}}))}}const Nh="Просмотр";class Fh{static get NAVIGATION_DELAY(){return kn}static get deafultBreadcrumbsTail(){return Nh}static get breadcrumbsTails(){return{preset:Nh,set:'Просмотр, "{:title}"'}}static getBreadcrumbsTail(t){return this.breadcrumbsTails?Ar.select(this.breadcrumbsTails,t,this.deafultBreadcrumbsTail):""}static get ACTION(){return"details"}static get MODEL_ACTION_GET(){return"get"}static get MODEL_ACTION_PUT(){return"get"}static get UIConstructor(){return pd}static get TRANSFORMER(){return Ch}static getIdField(t){return t.getOptions(`${this.ACTION}.idField`,"_id")}static loadDataQuery(t,e){const i=this.getIdField(t);return{[i]:e[0]}}static async loadData(t,e){const i=this.loadDataQuery(t,e),r=this.getModelActionName(t);return await t.getModel(i)[`$${r}`]()}static getModelActionName(t){return t.getOptions(`${this.ACTION}.actionName`,this.MODEL_ACTION_GET)}static presetBreadcrumbs(t,e){t.setBreadcrumbs([{title:this.getBreadcrumbsTail("preset"),url:t.getModelActionURL(e[0],!1)}])}static getTitle(t,e,i){return t.getItemTitle(i.result)}static setBreadcrumbs(t,e,i){const r=this.getTitle(t,e,i),n=this.getBreadcrumbsTail("set");t.setBreadcrumbs([{title:n?Cr.format(n,{title:r}):r,url:t.getModelActionURL(e[0],!1)}])}static isResponseBad(t){return!t||"ok"!==t.status}static getValidators(t){return t.getValidators&&t.getValidators()||t.getOptions("Validators")}static prepareUIOptions(t,e){const i=this.getModelActionName(t);return{options:{target:t.getContainerInnerElement(),model:t.getModelName(),action:i,name:`${t.getName()}.${this.ACTION}Form`,fields:{readonly:!0},validators:this.getValidators(t),variants:t.getOptions(`variants.${this.ACTION}`,{}),masters:t.getOptions(`${this.ACTION}.masters`,{}),injected:t.getOptions(`${this.ACTION}.injected`,{})},data:this.TRANSFORMER(e.result)}}static getUI(t){return t.getUI(this.ACTION)}static setUI(t,e){t.setUI(this.ACTION,e)}static setUILoading(t){this.getUI(t).$set({loading:!0})}static setUILoaded(t){this.getUI(t).$set({loading:!1})}static setUIError(t,e){this.getUI(t).$set({error:e})}static bindUIEvents(t,e,i){Ar.isFunc(t.goBack)&&this.bindUIEvent(t,"reject",(function(){return t.goBack()}))}static bindUIEvent(t,e,i){const r=this.getUI(t);return r.$on?r.$on(e,i):r.on?r.on(e,i):void 0}static isUIRendered(t){return!!this.getUI(t)||(t.$destroyUI(),!1)}static tweakUIOptions(t){return t}static async run(t,e){try{if(t.emit(`before:render:${this.ACTION}`,e),this.isUIRendered(t))return;t.renderLoadingScreen&&t.renderLoadingScreen(),await t.preloadVariants(this.ACTION),this.presetBreadcrumbs(t,e);const i=await this.loadData(t,e);if(this.isResponseBad(i))return t.showErrorMessage(i);this.setBreadcrumbs(t,e,i);const r=this.UIConstructor;this.setUI(t,new r(this.tweakUIOptions(this.prepareUIOptions(t,i)))),this.bindUIEvents(t,e,i),t.emit(`after:render:${this.ACTION}`,e,i)}catch(i){t.emit(`exception:render:${this.ACTION}`,e,i),t.report(i),t.showErrorMessage(i)}finally{t.removeLoadingScreen&&t.removeLoadingScreen()}}static goBackAfterDelay(t){t.goBack(this.NAVIGATION_DELAY)}static goBack(t){t.goBack(0)}}const Mh="create";class Rh extends Fh{static get deafultBreadcrumbsTail(){return"Создание"}static get breadcrumbsTails(){}static get ACTION(){return Mh}static get MODEL_ACTION_GET(){return Mh}static get MODEL_ACTION_PUT(){return Mh}static loadData(t,e){let i=t.createDefault();return i.getData&&(i=i.getData()),{status:"ok",result:i}}static getTitle(t,e,i){return t.getItemTitle(i)}static prepareUIOptions(t,e){const i=this.getModelActionName(t);return{options:{target:t.getContainerInnerElement(),model:t.getModelName(),action:i,name:`${t.getName()}.${this.ACTION}Form`,validators:this.getValidators(t),variants:t.getOptions(`variants.${this.ACTION}`,{}),masters:t.getOptions(`${this.ACTION}.masters`,{})},data:this.TRANSFORMER(e)}}static bindUIEvents(t,e,i){var r=this;Ar.isFunc(t.goBack)&&this.bindUIEvent(t,"reject",(function(){return r.goBack(t)})),Ar.isFunc(t.onActionSubmit)&&this.bindUIEvent(t,"submit",(async function(i){await t.onActionSubmit(r.ACTION,{...r.loadDataQuery(t,e),...i.detail})&&r.goBackAfterDelay(t)}))}}class Dh extends Fh{static tweakUIOptions(t){return t.options.ui={submit:{enabled:!1}},t}static async run(t,e){try{if(t.emit(`before:render:${this.ACTION}`,e),this.isUIRendered(t))return;t.renderLoadingScreen&&t.renderLoadingScreen(),await t.preloadVariants(this.ACTION),this.presetBreadcrumbs(t,e);const i=await this.loadData(t,e);if(this.isResponseBad(i))return t.showErrorMessage(i);this.setBreadcrumbs(t,e,i);const r=this.UIConstructor;this.setUI(t,new r(this.tweakUIOptions(this.prepareUIOptions(t,i)))),this.bindUIEvents(t,e,i),t.emit(`after:render:${this.ACTION}`,e,i)}catch(i){t.emit(`exception:render:${this.ACTION}`,e,i),t.report(i),t.showErrorMessage(i)}finally{t.removeLoadingScreen&&t.removeLoadingScreen()}}}const Uh="Редактирование";class Ph extends Fh{static get deafultBreadcrumbsTail(){return Uh}static get breadcrumbsTails(){return{preset:Uh,set:`${Uh}: "{:title}"`}}static get ACTION(){return"update"}static get MODEL_ACTION_GET(){return"getRaw"}static get MODEL_ACTION_PUT(){return"update"}static prepareUIOptions(t,e){return{options:{target:t.getContainerInnerElement(),model:t.getModelName(),action:this.MODEL_ACTION_PUT,name:`${t.getName()}.${this.ACTION}Form`,validators:this.getValidators(t),variants:t.getOptions(`variants.${this.ACTION}`,{}),ui:t.getOptions(`${this.ACTION}.ui`,{}),fields:t.getOptions(`${this.ACTION}.fields`,{}),masters:t.getOptions(`${this.ACTION}.masters`,{})},data:this.TRANSFORMER(Ar.stripProxy(e.result))}}static bindUIEvents(t,e,i){var r=this;Ar.isFunc(t.goBack)&&this.bindUIEvent(t,"reject",(function(){return r.goBack(t)})),Ar.isFunc(t.onActionSubmit)&&this.bindUIEvent(t,"submit",(async function(i){await t.onActionSubmit(r.ACTION,{...r.loadDataQuery(t,e),...i.detail})&&r.goBackAfterDelay(t)}))}static isUIRendered(t){return!!this.getUI(t)||(t.$destroyUI(),!1)}static async run(t,e){try{if(t.emit(`before:render:${this.ACTION}`,[e]),this.isUIRendered(t))return;t.renderLoadingScreen&&t.renderLoadingScreen(),await t.preloadVariants(this.ACTION),this.presetBreadcrumbs(t,e);const i=await this.loadData(t,e);if(this.isResponseBad(i))return t.showErrorMessage(i);this.setBreadcrumbs(t,e,i);const r=this.UIConstructor;this.setUI(t,new r(this.tweakUIOptions(this.prepareUIOptions(t,i)))),this.bindUIEvents(t,e,i),t.emit(`after:render:${this.ACTION}`,e)}catch(i){t.emit(`exception:render:${this.ACTION}`,e,i),t.report(i),t.showErrorMessage(i)}finally{t.removeLoadingScreen&&t.removeLoadingScreen()}}}const jh="delete";const Wh="list";class Bh{static tweakActionsList(t,e){return t.getOptions(`${Wh}.createAction`,!0)&&e.push({title:"Создать",action:function(){return t.goCreate()}}),e}static tweakUIOptions(t){return t}static createActionsButtons(t,e,i=0,r=["details","update","delete"],n=[],s=[],o=!0){const a={details:{action:function(){return t.goDetails(e,i)},...o?{icon:"circle-info"}:{title:"Подробнее"},size:"small"},update:{action:function(){return t.goUpdate(e,i)},...o?{icon:"edit"}:{title:"Изменить"},color:"warning",size:"small"},delete:{action:function(){return t.goDelete(e,i)},color:"danger",...o?{icon:"trash"}:{title:"Удалить"},size:"small",style:"outlined"}},l=[...n];return Array.isArray(r)&&r.forEach((function(t){return l.push(a[t])})),l.push(...s),l}static async run(t,e){try{if(t.renderLoadingScreen&&t.renderLoadingScreen(),await t.preloadVariants(Wh),t.setBreadcrumbs([{title:"Список",url:t.getModelURL()}]),t.ui[Wh])return;t.$destroyUI(),t.ui[Wh]=new Kc(this.tweakUIOptions(Bh.prepareOptions(t))),t.emit(`after:render:${Wh}`,e,t.ui[Wh])}catch(i){t.emit(`exception:render:${Wh}`,e,i),t.report(i),t.showErrorMessage(i)}finally{t.removeLoadingScreen&&t.removeLoadingScreen()}}static prepareOptions(t){const e={interface:t.getOptions(`${Wh}.interface`,{combined:!0,factory:t.getInterface()}),fields:void 0,showSelect:void 0,getItemId:void 0,idField:void 0,preload:{},filterUI:t.getOptions(`${Wh}.filterUI`),pager:{size:50,page:0},sorter:{id:-1},filter:void 0,ui:void 0};let i=[...t.getOptions(`${Wh}.actions`,[])];i=this.tweakActionsList(t,i);const r={options:{targetEl:t.getContainerInnerElement(),endless:!1,actions:i}};return Object.keys(e).forEach((function(i){let n=t.getOptions(`${Wh}.${i}`,e[i]);void 0!==n&&(r.options[i]=n)})),r}}var zh={create:class extends Rh{},details:class extends Dh{},update:class extends Ph{},delete:class{static async run(t,e){try{if(t.ui[jh])return;if(t.$destroyUI(),t.ui[jh]=new Zc({name:"CRUDDelete",target:t.getContainerInnerElement(),options:{loaderActive:!0,loaderStyle:"container",loaderTitle:"not-node:crud_delete_action_waiting",container:{id:`crud-delete-action-${e[0]}`}}}),t.setBreadcrumbs([{title:"Удаление",url:t.getModelActionURL(e[0],jh)}]),confirm("Удалить запись?")){const i=t.getOptions(`${jh}.actionName`,"delete");return void(await t.onActionSubmit(i,{_id:e[0]})&&t.goList())}t.goList()}catch(e){t.report(e),t.showErrorMessage(e)}}},list:Bh};const Vh=[],qh=["title","label","id","name"],Hh="loading_screen";var Kh=new WeakMap,Gh=new WeakMap,Jh=new WeakMap;class Yh extends cc{static get LABELS(){return Object.freeze({plural:`${this.MODULE_NAME}:${this.MODEL_NAME}_label_plural`,single:`${this.MODULE_NAME}:${this.MODEL_NAME}_label_single`})}static getMenu(t={}){return[{section:this.MODULE_NAME,title:this.LABELS.plural,url:`/${Ar.lowerFirstLetter(this.MODULE_NAME)}/${Ar.lowerFirstLetter(this.MODEL_NAME)}`,...t}]}constructor(t,e,{actions:i,router:r,preloader:n}={actions:void 0,router:void 0,preloader:void 0}){return super(t,`CRUD.${e}`),fr(this,Kh,{...zh}),fr(this,Gh,Th),fr(this,Jh,Eh),mr(this,"TITLE_FIELDS_PRIORITY",qh),mr(this,"TOP_CLASS",["box"]),mr(this,"MAIN_CLASS",["box"]),mr(this,"BOTTOM_CLASS",["box"]),mr(this,"WS_CHECK_INTERVAL",200),i&&pr(Kh,this,{...gr(Kh,this),...i}),r&&pr(Gh,this,r),n&&pr(Jh,this,n),this.ui={},this.els={},this.setOptions("names",{module:"",plural:"plural",single:"single"}),this.setOptions("containerSelector",this.app?.getOptions("crud.containerSelector")),this.buildFrame(),this}setValidators(t){const e=this.getModuleName().split("-"),i=`ns${("not"===e[0]?e.splice(1):e).map(Ar.capitalizeFirstLetter).join("")}Common`,r=this.app?.getService(i);this.setWorking("validators",r.augmentValidators(t))}getValidators(){return this.getWorking("validators")}start(){var t=this;let e=[];this.getModuleName()&&this.getOptions("names.module")&&e.push({title:this.getOptions("names.module"),url:!1}),e.push({title:this.getOptions("names.plural"),url:this.getModelURL()}),Vh.splice(0,Vh.length,...e),Dd.setHead(Vh).render({root:"",target:this.els.top,navigate:function(e){return t.app?.getWorking("router").navigate(e)}}),this.route(this.getOptions("params"))}startWhenWSClientReady(){var t=this;this.app?.getWSClient()?this.app?.getWSClient().isConnected()?this.start():this.app.getWSClient().once("connected",this.startWhenWSClientReady.bind(this)):setTimeout((function(){return t.startWhenWSClientReady()}),this.WS_CHECK_INTERVAL)}setBreadcrumbs(t){Dd.setTail(t).update()}backToList(){this.navigate(this.linkBackToList())}linkBackToList(){return this.getModelURL()}afterAction(t="list"){let e=this.app?.getOptions("crud.navigateBackAfter",[]);e&&Array.isArray(e)&&e.indexOf(t)>-1?window.history.back():this.backToList()}buildFrame(){var t=this;let e=document.querySelector(this.app?.getOptions("crud.containerSelector","body"));for(;e.firstChild;)e.removeChild(e.firstChild);this.els.top=document.createElement("div"),this.els.top.id="crud-top",this.getFrameClasses().TOP_CLASS.forEach((function(e){return t.els.top.classList.add(e)})),e.appendChild(this.els.top),this.els.main=document.createElement("div"),this.els.main.id="crud-main",this.getFrameClasses().MAIN_CLASS.forEach((function(e){return t.els.main.classList.add(e)})),e.appendChild(this.els.main),this.els.bottom=document.createElement("div"),this.els.bottom.id="crud-bottom",this.getFrameClasses().BOTTOM_CLASS.forEach((function(e){return t.els.bottom.classList.add(e)})),e.appendChild(this.els.bottom)}getFrameClasses(){return{TOP_CLASS:this.TOP_CLASS,MAIN_CLASS:this.MAIN_CLASS,BOTTOM_CLASS:this.BOTTOM_CLASS}}getContainerTopElement(){return this.els.top}getContainerInnerElement(){return this.els.main}getContainerBottomElement(){return this.els.bottom}async preloadVariants(t="list"){await gr(Jh,this).preload(this,t)}getTitleFromLib(t,e){const i=this.getCurrentAction();return this.debug&&this.debug("notCRUD.getTitleFromLib is obsolete, use notCRUD.getPreloadedVariantTitle(actionName, propName, id)"),this.getPreloadedVariantTitle(i,t,e)}getPreloadedVariants(t,e){return this.getOptions(`variants.${t}.${e}`,[])}getPreloadedVariantTitle(t,e,i){const r=this.getPreloadedVariants(t,e).find((function(t){return t.id===i}));return r?r.title:i}getItemTitle(t){const e=this.TITLE_FIELDS_PRIORITY.find((function(e){return Ar.objHas(t,e)}));return e?t[e]:""}createDefault(){return this.getModel({}).toDefault()}route(t=[]){try{return gr(Gh,this).route(this,t)}catch(t){this.report(t),this.showErrorMessage(t)}}actionHandlerExists(t){return!!Object.keys(gr(Kh,this)).includes(t)||"function"==typeof this["run"+Ar.capitalizeFirstLetter(t)]}runAction(t,e){if(Object.keys(gr(Kh,this)).includes(t))return gr(Kh,this)[t].run(this,e);if("function"==typeof this["run"+Ar.capitalizeFirstLetter(t)])return this["run"+Ar.capitalizeFirstLetter(t)](e);throw new Error(`No such action: ${t} in contoller ${this.getWorking("name")}`)}goCreate(t=0){this.goAfterDelay(this.getModelActionURL("","create"),t)}goDetails(t,e=0){this.goAfterDelay(this.getModelActionURL(t,""),e)}goUpdate(t,e=0){this.goAfterDelay(this.getModelActionURL(t,"update"),e)}goDelete(t,e=0){this.goAfterDelay(this.getModelActionURL(t,"delete"),e)}goList(t=0){this.goAfterDelay(this.getModelURL(),t)}goAfterDelay(t,e=0){var i=this;this.navigateWithDelay(t,e,(function(){return i.$destroyUI()}))}goBack(t=0){this.goList(t)}async onActionSubmit(t,e){let i=!0;const r=this.ui[t];if(!r)throw new Error("Action UI doesnt exist");try{r.setLoading();let n=await this.getModel(e)[`$${t}`]();i=r.processResult(n)}catch(t){i=r.processResult(t)}finally{return r.resetLoading(),i}}$destroyUI(){for(let t in this.ui)this.destroyUIByName(t)}destroyUIByName(t){Object.hasOwn(this.ui,t)&&(this.ui[t].$destroy&&this.ui[t].$destroy(),this.ui[t].destroy&&this.ui[t].destroy(),delete this.ui[t])}showErrorMessage(t){this.error&&this.error(t),this.app&&this.app.emit("error",{title:"Произошла ошибка",message:t.message?t.message:Jr.ERROR_DEFAULT}),xh.error(this,"Произошла ошибка",t.message?t.message:Jr.ERROR_DEFAULT)}showSuccessMessage(t,e){this.app&&this.app.emit("success",{title:t,message:e}),xh.success(this,t,e)}setUI(t,e,i=!0){i&&this.$destroyUI(),this.ui[t]=e}getUI(t){return this.ui[t]}getActionUI(){return this.ui[this.getCurrentAction()]}renderLoadingScreen(){this.setUI(Hh,this.createLoaderUI())}removeLoadingScreen(){this.destroyUIByName(Hh)}createLoaderUI(){return We(zr,{target:this.getContainerInnerElement(),props:{loading:!0,title:""}})}}mr(Yh,"ERROR_DEFAULT",Jr.ERROR_DEFAULT);class Qh{static extractActionName(t){return t.length>0?t[0]:this.DEFAULT_ROUTE}static route(t,e){try{const i=this.extractActionName(e);return t.setCurrentAction(i),t.runAction(i,e)}catch(e){t.report(e),t.showErrorMessage(e)}}}mr(Qh,"DEFAULT_ROUTE","list");const Xh=Yh;var Zh=Object.freeze({__proto__:null,COMPONENTS:co,FIELDS:uo,UIForm:nd,VARIANTS:ho,createCRUDActionUIView:function({ACTION:t,TITLE:e,UIConstructor:i,dataProvider:r,goBack:n}){return class{static async run(s,o){try{if(s.setBreadcrumbs([{title:`Просмотр "${e}"`}]),await s.preloadVariants(t),s.ui[t])return;s.$destroyUI();let a={};r&&(a=Ar.isFunc(r)?Ar.isAsync(r)?await r(o):r(o):{...r});const l=s.getOptions(`${t}.transformer`,Ch);s.ui[t]=new i({target:s.getContainerInnerElement(),props:{params:o,...l(a)}}),s.emit(`after:render:${t}`),n&&Ar.isFunc(n)&&s.ui[t].on("reject",(function(){return n()}))}catch(t){s.report(t),s.showErrorMessage(t)}}}},ncCRUD:Xh,notAPI:Gl,notApp:oc,notBase:Bl,notBreadcrumbs:Dd,notCRUD:Yh,notCRUDRouter:Th,notCRUDRouterPlain:Qh,notCRUDRouterSwitch:class{static get routesVariants(){return{}}static isRouteVariantValid(t){return""!==t&&Ar.objHas(this.routesVariants,t)}static async determineRoute(t,e=[]){return""}static async route(t,e){try{const i=await this.determineRoute(t,e);if(!this.isRouteVariantValid(i))throw new Error(`No such action: ${i} in contoller ${t.getWorking("name")}`);{t.setCurrentAction(i);const r=this.routesVariants[i];Ar.isAsync(r.run)?await r.run(t,e):r.run(t,e)}}catch(e){t.report(e),t.showErrorMessage(e)}}},notCommon:Ar,notController:cc,notForm:pd,notFormHelpers:Au,notFormRules:od,notFormSet:class extends Bl{constructor({options:t={},formComponent:e=nd,formSetComponent:i=kd}){super({options:{name:_d,mode:"default",showModes:!0,...t}}),vr(this,Ld),fr(this,Id,null),fr(this,Ad,null),fr(this,Sd,null),fr(this,Cd,null),pr(Ad,this,e),pr(Id,this,i),this.setFormMode(this.getOptions("mode")),this.initUI()}initUI(){var t=this;const e=this.getFrameTargetEl();for(;e.children.length;)e.removeChild(e.firstChild);pr(Cd,this,new(gr(Id,this))({target:e,props:dr(Ld,this,Ed).call(this)})),gr(Cd,this).$on("mode",(function(e){t.setFormMode(e.detail),t.updateForm()})),this.updateForm()}setFormMode(t){this.isModeExists(t)?this.setWorking("mode",t):(this.setWorking("mode",this.getFirstMode()),this.updateFormModeInUI())}updateFormModeInUI(){gr(Cd,this)&&null!==this.getWorking("mode")&&gr(Cd,this).$set({mode:this.getWorking("mode")})}getFormMode(){return this.getWorking("mode")}updateForm(){this.destroyForm(),null!==this.getWorking("mode")&&this.renderForm()}renderForm(){var t=this;const e=this.getFormTargetEl(),i=this.getFormConfig();if(!(e instanceof HTMLElement&&i))throw new Error("error while form rendering");const r=function(e){t.setFormMode(e),t.updateForm()};if(i.form){for(;e.children.length;)e.removeChild(e.firstChild);pr(Sd,this,new i.form({options:{target:e,changeMode:r}}))}else i.props&&pr(Sd,this,new(gr(Ad,this))({target:e,...i.props,changeMode:r}))}getFormConfig(){var t=this;return this.getOptions("forms").find((function(e){return e.mode===t.getFormMode()}))}destroyForm(){const t=this.getFormTargetEl();if(t)for(;t.firstChild;)t.removeChild(t.lastChild);gr(Sd,this)&&gr(Sd,this).$destroy&&gr(Sd,this).$destroy(),pr(Sd,this,null)}destroyFrame(){gr(Cd,this)&&gr(Cd,this).$destroy&&gr(Cd,this).$destroy(),pr(Cd,this,null)}isModeExists(t){return this.getOptions("forms",[]).some((function(e){return e.mode===t}))}getFirstMode(){const t=this.getOptions("forms",[]);return t.length>0?t[0].mode:null}destroy(){pr(Id,this,null),pr(Ad,this,null),this.destroyForm(),this.destroyFrame(),this.setData(null),this.setOptions(null),this.setWorking(null)}getFrameTargetEl(){const t=this.getOptions("target",".form-set");if(t instanceof HTMLElement)return t;if("string"==typeof t)return document.querySelector(t);throw new Error("form set target is not HTMLElement or string")}getFormTargetEl(){const t=this.getOptions("name",_d);return document.querySelector(`#${t}-form-set-container`)}},notFormUtils:tu,notInterface:rc,notPath:Or,notRecord:nc,notRouter:ql,notServiceModelSearch:class{constructor(t,e){this.modelName=e,this.app=t}destroy(){delete this.app}getSearchRouteName(){return"listAndCount"}getDataLoadRouteName(){return"get"}transformSearchResult(t){var e=this;return t.list=t.list.map((function(t){return{_id:t._id,id:t[`${e.modelName}ID`],title:t.name||t.title||t.label||t.username}})),t}transformSelectedResult(t){return{_id:t._id,[`${this.modelName}ID`]:t.id,title:t.title}}async searchByTerm(t){try{if(t.value.length>2){const e=this.app.getModel(this.modelName);e.setSearch(t.value);const i=await e[`$${this.getSearchRouteName()}`]();return"ok"===i.status?this.transformSearchResult(i.result):{list:[],count:0,page:0,pages:0,skip:0}}return{list:[],count:0,page:0,pages:0,skip:0}}catch(t){return{list:[],count:0,page:0,pages:0,skip:0}}}openSelector(){var t=this;return new Promise((function(e,i){try{const r=We(Cl,{target:document.body,props:{}});r.$on("termChange",(async function({detail:e}){const i=await t.searchByTerm(e);r.$set({results:i})})),r.$on("next",(function(){console.log("next selector results")})),r.$on("prev",(function(){console.log("prev selector results")})),r.$on("reject",(function(){Ve(r),i()})),r.$on("resolve",(function({detail:i}){Ve(r),e(t.transformSelectedResult(i))}))}catch(e){t.app.error(e),i(e)}}))}async loadData(t){try{if(t&&t.length>10){const e=this.app.getModel(this.modelName,{_id:t}),i=await e[`$${this.getDataLoadRouteName()}`]();return"ok"===i.status?i.result:null}return null}catch(t){return this.app.error(t),null}}},notSideMenu:oh,notStores:Ql,notTable:Kc,notTopMenu:Sh});const tg={LOCALE:tr,say:Lr,notLocale:Cr},eg=Jr,{notCommon:ig,COMPONENTS:rg,FIELDS:ng,VARIANTS:sg,notFormUtils:og}=Zh;return Object.keys(Dl).forEach((function(t){Object.keys(Dl[t]).forEach((function(e){tu.addComponent(e,Dl[t][e])}))})),t.COMPONENTS=rg,t.Elements=Dl,t.FIELDS=ng,t.Frame=Zh,t.LOCALE=tr,t.Locale=tg,t.UICommon=eg,t.VARIANTS=sg,t.notCommon=ig,t.notFormUtils=og,t.notLocale=Cr,t.say=Lr,t}({});
