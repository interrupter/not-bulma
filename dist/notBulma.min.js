var notBulma=function(t){"use strict";"undefined"!=typeof window&&(window.__svelte||={v:new Set}).v.add("5");const e=Symbol();var i=Array.isArray,r=Array.from,n=Object.defineProperty,s=Object.getOwnPropertyDescriptor,o=Object.getOwnPropertyDescriptors,a=Object.prototype,l=Array.prototype,c=Object.getPrototypeOf;function u(t){return"function"==typeof t}const d=()=>{};function h(t){return t()}function g(t){for(var e=0;e<t.length;e++)t[e]()}const f=32,p=128,v=256,m=512,b=1024,y=2048,O=4096,$=8192,w=32768,k=1<<19,_=Symbol("$state"),I=Symbol("legacy props"),A=Symbol("");function S(t){return t===this.v}function C(t,e){return t!=t?e==e:t!==e||null!==t&&"object"==typeof t||"function"==typeof t}function E(t){return!C(t,this.v)}let L=!1;function T(t){return{f:0,v:t,reactions:null,equals:S,version:0}}function x(t){return M(T(t))}function N(t,e=!1){const i=T(t);return e||(i.equals=E),L&&null!==Mt&&null!==Mt.l&&(Mt.l.s??=[]).push(i),i}function F(t,e=!1){return M(N(t,e))}function M(t){return null!==It&&2&It.f&&(null===Et?Et=[t]:Et.push(t)),t}function R(t,e){return U(t,Jt((()=>Gt(t)))),e}function U(t,e){return null!==It&&Ut()&&18&It.f&&(null===Et||!Et.includes(t))&&function(){throw new Error("state_unsafe_mutation")}(),D(t,e)}function D(t,e){return t.equals(e)||(t.v=e,t.version=Rt(),P(t,b),Ut()&&null!==St&&St.f&m&&!(St.f&f)&&(null!==Lt&&Lt.includes(t)?(Qt(St,b),Ht(St)):null===xt?function(t){xt=t}([t]):xt.push(t))),e}function P(t,e){var i=t.reactions;if(null!==i)for(var r=Ut(),n=i.length,s=0;s<n;s++){var o=i[s],a=o.f;a&b||(r||o!==St)&&(Qt(o,e),640&a&&(2&a?P(o,y):Ht(o)))}}function j(t){var e=1026;null===St?e|=p:St.f|=k;const i={children:null,ctx:Mt,deps:null,equals:S,f:e,fn:t,reactions:null,v:null,version:0,parent:St};if(null!==It&&2&It.f){var r=It;(r.children??=[]).push(i)}return i}function W(t){const e=j(t);return e.equals=E,e}function B(t){var e=t.children;if(null!==e){t.children=null;for(var i=0;i<e.length;i+=1){var r=e[i];2&r.f?q(r):ot(r)}}}function z(t){var e,i=St;Ct(t.parent);try{B(t),e=Pt(t)}finally{Ct(i)}return e}function V(t){var e=z(t);Qt(t,(Ft||t.f&p)&&null!==t.deps?y:m),t.equals(e)||(t.v=e,t.version=Rt())}function q(t){B(t),Wt(t,0),Qt(t,$),t.v=t.children=t.deps=t.ctx=t.reactions=null}function H(t){null===St&&null===It&&function(){throw new Error("effect_orphan")}(),null!==It&&It.f&p&&function(){throw new Error("effect_in_unowned_derived")}(),Ot&&function(){throw new Error("effect_in_teardown")}()}function K(t,e,i,r=!0){var n=!!(64&t),s=St,o={ctx:Mt,deps:null,deriveds:null,nodes_start:null,nodes_end:null,f:t|b,first:null,fn:e,last:null,next:null,parent:n?null:s,prev:null,teardown:null,transitions:null,version:0};if(i){var a=yt;try{$t(!0),Bt(o),o.f|=16384}catch(t){throw ot(o),t}finally{$t(a)}}else null!==e&&Ht(o);if(!(i&&null===o.deps&&null===o.first&&null===o.nodes_start&&null===o.teardown&&!(o.f&k))&&!n&&r&&(null!==s&&function(t,e){var i=e.last;null===i?e.last=e.first=t:(i.next=t,t.prev=i,e.last=t)}(o,s),null!==It&&2&It.f)){var l=It;(l.children??=[]).push(o)}return o}function G(t){const e=K(8,null,!1);return Qt(e,m),e.teardown=t,e}function J(t){if(H(),!(null!==St&&!!(St.f&f)&&null!==Mt&&!Mt.m))return Q(t);var e=Mt;(e.e??=[]).push({fn:t,effect:St,reaction:It})}function Y(t){return H(),Z(t)}function Q(t){return K(4,t,!1)}function X(t,e){var i=Mt,r={effect:null,ran:!1};i.l.r1.push(r),r.effect=Z((()=>{t(),r.ran||(r.ran=!0,U(i.l.r2,!0),Jt(e))}))}function Z(t){return K(8,t,!0)}function tt(t){return et(t)}function et(t,e=0){return K(24|e,t,!0)}function it(t,e=!0){return K(40,t,!0,e)}function rt(t){var e=t.teardown;if(null!==e){const t=Ot,i=It;wt(!0),At(null);try{e.call(null)}finally{wt(t),At(i)}}}function nt(t){var e=t.deriveds;if(null!==e){t.deriveds=null;for(var i=0;i<e.length;i+=1)q(e[i])}}function st(t,e=!1){var i=t.first;for(t.first=t.last=null;null!==i;){var r=i.next;ot(i,e),i=r}}function ot(t,e=!0){var i=!1;if((e||262144&t.f)&&null!==t.nodes_start){for(var r=t.nodes_start,n=t.nodes_end;null!==r;){var s=r===n?null:ue(r);r.remove(),r=s}i=!0}st(t,e&&!i),nt(t),Wt(t,0),Qt(t,$);var o=t.transitions;if(null!==o)for(const t of o)t.stop();rt(t);var a=t.parent;null!==a&&null!==a.first&&at(t),t.next=t.prev=t.teardown=t.ctx=t.deps=t.parent=t.fn=t.nodes_start=t.nodes_end=null}function at(t){var e=t.parent,i=t.prev,r=t.next;null!==i&&(i.next=r),null!==r&&(r.prev=i),null!==e&&(e.first===t&&(e.first=r),e.last===t&&(e.last=i))}function lt(t,e){var i=[];ut(t,i,!0),ct(i,(()=>{ot(t),e&&e()}))}function ct(t,e){var i=t.length;if(i>0){var r=()=>--i||e();for(var n of t)n.out(r)}else e()}function ut(t,e,i){if(!(t.f&O)){if(t.f^=O,null!==t.transitions)for(const r of t.transitions)(r.is_global||i)&&e.push(r);for(var r=t.first;null!==r;){var n=r.next;ut(r,e,!!(!!(r.f&w)||!!(r.f&f))&&i),r=n}}}function dt(t){ht(t,!0)}function ht(t,e){if(t.f&O){Dt(t)&&Bt(t),t.f^=O;for(var i=t.first;null!==i;){var r=i.next;ht(i,!!(!!(i.f&w)||!!(i.f&f))&&e),i=r}if(null!==t.transitions)for(const i of t.transitions)(i.is_global||e)&&i.in()}}let gt=!1,ft=[];function pt(){gt=!1;const t=ft.slice();ft=[],g(t)}function vt(t){gt||(gt=!0,queueMicrotask(pt)),ft.push(t)}function mt(t){throw new Error("lifecycle_outside_component")}let bt=!1,yt=!1,Ot=!1;function $t(t){yt=t}function wt(t){Ot=t}let kt=[],_t=0,It=null;function At(t){It=t}let St=null;function Ct(t){St=t}let Et=null;let Lt=null,Tt=0,xt=null;let Nt=0,Ft=!1,Mt=null;function Rt(){return++Nt}function Ut(){return!L||null!==Mt&&null===Mt.l}function Dt(t){var e=t.f;if(e&b)return!0;if(e&y){var i=t.deps,r=!!(e&p);if(null!==i){var n;if(e&v){for(n=0;n<i.length;n++)(i[n].reactions??=[]).push(t);t.f^=v}for(n=0;n<i.length;n++){var s=i[n];if(Dt(s)&&V(s),!r||null===St||Ft||s?.reactions?.includes(t)||(s.reactions??=[]).push(t),s.version>t.version)return!0}}r||Qt(t,m)}return!1}function Pt(t){var e=Lt,i=Tt,r=xt,n=It,s=Ft,o=Et,a=Mt,l=t.f;Lt=null,Tt=0,xt=null,It=96&l?null:t,Ft=!yt&&!!(l&p),Et=null,Mt=t.ctx;try{var c=(0,t.fn)(),u=t.deps;if(null!==Lt){var d;if(Wt(t,Tt),null!==u&&Tt>0)for(u.length=Tt+Lt.length,d=0;d<Lt.length;d++)u[Tt+d]=Lt[d];else t.deps=u=Lt;if(!Ft)for(d=Tt;d<u.length;d++)(u[d].reactions??=[]).push(t)}else null!==u&&Tt<u.length&&(Wt(t,Tt),u.length=Tt);return c}finally{Lt=e,Tt=i,xt=r,It=n,Ft=s,Et=o,Mt=a}}function jt(t,e){let i=e.reactions;if(null!==i){var r=i.indexOf(t);if(-1!==r){var n=i.length-1;0===n?i=e.reactions=null:(i[r]=i[n],i.pop())}}null===i&&2&e.f&&(null===Lt||!Lt.includes(e))&&(Qt(e,y),384&e.f||(e.f^=v),Wt(e,0))}function Wt(t,e){var i=t.deps;if(null!==i)for(var r=e;r<i.length;r++)jt(t,i[r])}function Bt(t){var e=t.f;if(!(e&$)){Qt(t,m);var i=St;St=t;try{16&e?function(t){for(var e=t.first;null!==e;){var i=e.next;e.f&f||ot(e),e=i}}(t):st(t),nt(t),rt(t);var r=Pt(t);t.teardown="function"==typeof r?r:null,t.version=Nt}catch(t){!function(t){throw t}(t)}finally{St=i}}}function zt(){_t>1e3&&(_t=0,function(){throw new Error("effect_update_depth_exceeded")}()),_t++}function Vt(t){var e=t.length;if(0!==e)for(var i=0;i<e;i++){var r=t[i];12288&r.f||!Dt(r)||(Bt(r),null===r.deps&&null===r.first&&null===r.nodes_start&&(null===r.teardown?at(r):r.fn=null))}}function qt(){if(bt=!1,_t>1001)return;const t=kt;kt=[],function(t){var e=t.length;if(0!==e){zt();var i=yt;yt=!0;try{for(var r=0;r<e;r++){var n=t[r];n.f&m||(n.f^=m);var s=[];Kt(n,s),Vt(s)}}finally{yt=i}}}(t),bt||(_t=0)}function Ht(t){bt||(bt=!0,queueMicrotask(qt));for(var e=t;null!==e.parent;){var i=(e=e.parent).f;if(96&i){if(!(i&m))return;e.f^=m}}kt.push(e)}function Kt(t,e){var i=t.first,r=[];t:for(;null!==i;){var n=i.f,s=!!(n&f);if(!(s&&!!(n&m)||n&O))if(8&n){s?i.f^=m:Dt(i)&&Bt(i);var o=i.first;if(null!==o){i=o;continue}}else 4&n&&r.push(i);var a=i.next;if(null===a){let e=i.parent;for(;null!==e;){if(t===e)break t;var l=e.next;if(null!==l){i=l;continue t}e=e.parent}}i=a}for(var c=0;c<r.length;c++)o=r[c],e.push(o),Kt(o,e)}function Gt(t){var e=t.f,i=!!(2&e);if(i&&e&$){var r=z(t);return q(t),r}if(null!==It){null!==Et&&Et.includes(t)&&function(){throw new Error("state_unsafe_local_read")}();var n=It.deps;null===Lt&&null!==n&&n[Tt]===t?Tt++:null===Lt?Lt=[t]:Lt.push(t),null!==xt&&null!==St&&St.f&m&&!(St.f&f)&&xt.includes(t)&&(Qt(St,b),Ht(St))}else if(i&&null===t.deps){var s=t,o=s.parent;null===o||o.deriveds?.includes(s)||(o.deriveds??=[]).push(s)}return i&&Dt(s=t)&&V(s),t.v}function Jt(t){const e=It;try{return It=null,t()}finally{It=e}}const Yt=-3585;function Qt(t,e){t.f=t.f&Yt|e}function Xt(t,e=1){var i=+Gt(t);return U(t,i+e),i}function Zt(t,e=!1,i){Mt={p:Mt,c:null,e:null,m:!1,s:t,x:null,l:null},L&&!e&&(Mt.l={s:null,u:null,r1:[],r2:T(!1)})}function te(t){const e=Mt;if(null!==e){void 0!==t&&(e.x=t);const o=e.e;if(null!==o){var i=St,r=It;e.e=null;try{for(var n=0;n<o.length;n++){var s=o[n];Ct(s.effect),At(s.reaction),Q(s.fn)}}finally{Ct(i),At(r)}}Mt=e.p,e.m=!0}return t||{}}function ee(t){if("object"==typeof t&&t&&!(t instanceof EventTarget))if(_ in t)ie(t);else if(!Array.isArray(t))for(let e in t){const i=t[e];"object"==typeof i&&i&&_ in i&&ie(i)}}function ie(t,e=new Set){if(!("object"!=typeof t||null===t||t instanceof EventTarget||e.has(t))){e.add(t),t instanceof Date&&t.getTime();for(let i in t)try{ie(t[i],e)}catch(t){}const i=c(t);if(i!==Object.prototype&&i!==Array.prototype&&i!==Map.prototype&&i!==Set.prototype&&i!==Date.prototype){const e=o(i);for(let i in e){const r=e[i].get;if(r)try{r.call(t)}catch(t){}}}}}function re(t,r=null,n){if("object"!=typeof t||null===t||_ in t)return t;const o=c(t);if(o!==a&&o!==l)return t;var u,d=new Map,h=i(t),g=T(0);return h&&d.set("length",T(t.length)),new Proxy(t,{defineProperty(t,e,i){"value"in i&&!1!==i.configurable&&!1!==i.enumerable&&!1!==i.writable||function(){throw new Error("state_descriptors_fixed")}();var r=d.get(e);return void 0===r?(r=T(i.value),d.set(e,r)):U(r,re(i.value,u)),!0},deleteProperty(t,i){var r=d.get(i);if(void 0===r)i in t&&d.set(i,T(e));else{if(h&&"string"==typeof i){var n=d.get("length"),s=Number(i);Number.isInteger(s)&&s<n.v&&U(n,s)}U(r,e),ne(g)}return!0},get(i,r,n){if(r===_)return t;var o=d.get(r),a=r in i;if(void 0!==o||a&&!s(i,r)?.writable||(o=T(re(a?i[r]:e,u)),d.set(r,o)),void 0!==o){var l=Gt(o);return l===e?void 0:l}return Reflect.get(i,r,n)},getOwnPropertyDescriptor(t,i){var r=Reflect.getOwnPropertyDescriptor(t,i);if(r&&"value"in r){var n=d.get(i);n&&(r.value=Gt(n))}else if(void 0===r){var s=d.get(i),o=s?.v;if(void 0!==s&&o!==e)return{enumerable:!0,configurable:!0,value:o,writable:!0}}return r},has(t,i){if(i===_)return!0;var r=d.get(i),n=void 0!==r&&r.v!==e||Reflect.has(t,i);if((void 0!==r||null!==St&&(!n||s(t,i)?.writable))&&(void 0===r&&(r=T(n?re(t[i],u):e),d.set(i,r)),Gt(r)===e))return!1;return n},set(t,i,r,n){var o=d.get(i),a=i in t;if(h&&"length"===i)for(var l=r;l<o.v;l+=1){var c=d.get(l+"");void 0!==c?U(c,e):l in t&&(c=T(e),d.set(l+"",c))}void 0===o?a&&!s(t,i)?.writable||(U(o=T(void 0),re(r,u)),d.set(i,o)):(a=o.v!==e,U(o,re(r,u)));var f=Reflect.getOwnPropertyDescriptor(t,i);if(f?.set&&f.set.call(n,r),!a){if(h&&"string"==typeof i){var p=d.get("length"),v=Number(i);Number.isInteger(v)&&v>=p.v&&U(p,v+1)}ne(g)}return!0},ownKeys(t){Gt(g);var i=Reflect.ownKeys(t).filter((t=>{var i=d.get(t);return void 0===i||i.v!==e}));for(var[r,n]of d)n.v===e||r in t||i.push(r);return i},setPrototypeOf(){!function(){throw new Error("state_prototype_fixed")}()}})}function ne(t,e=1){U(t,t.v+e)}var se,oe,ae;function le(t=""){return document.createTextNode(t)}function ce(t){return oe.call(t)}function ue(t){return ae.call(t)}function de(t,e){return ce(t)}function he(t,e){var i=ce(t);return i instanceof Comment&&""===i.data?ue(i):i}function ge(t,e=1,i=!1){let r=t;for(;e--;)r=ue(r);return r}let fe=!1;function pe(t,e){if(e){const e=document.body;t.autofocus=!0,vt((()=>{document.activeElement===e&&t.focus()}))}}let ve=!1;function me(t){var e=It,i=St;At(null),Ct(null);try{return t()}finally{At(e),Ct(i)}}function be(t,e,i,r=i){t.addEventListener(e,(()=>me(i)));const n=t.__on_r;t.__on_r=n?()=>{n(),r()}:r,ve||(ve=!0,document.addEventListener("reset",(t=>{Promise.resolve().then((()=>{if(!t.defaultPrevented)for(const e of t.target.elements)e.__on_r?.()}))}),{capture:!0}))}const ye=new Set,Oe=new Set;function $e(t,e,i,r){function n(t){if(r.capture||_e.call(e,t),!t.cancelBubble)return me((()=>i.call(this,t)))}return t.startsWith("pointer")||t.startsWith("touch")||"wheel"===t?vt((()=>{e.addEventListener(t,n,r)})):e.addEventListener(t,n,r),n}function we(t,e,i,r,n){var s={capture:r,passive:n},o=$e(t,e,i,s);e!==document.body&&e!==window&&e!==document||G((()=>{e.removeEventListener(t,o,s)}))}function ke(t){for(var e=0;e<t.length;e++)ye.add(t[e]);for(var i of Oe)i(t)}function _e(t){var e=this,r=e.ownerDocument,s=t.type,o=t.composedPath?.()||[],a=o[0]||t.target,l=0,c=t.__root;if(c){var u=o.indexOf(c);if(-1!==u&&(e===document||e===window))return void(t.__root=e);var d=o.indexOf(e);if(-1===d)return;u<=d&&(l=u)}if((a=o[l]||t.target)!==e){n(t,"currentTarget",{configurable:!0,get:()=>a||r});var h=It,g=St;At(null),Ct(null);try{for(var f,p=[];null!==a;){var v=a.assignedSlot||a.parentNode||a.host||null;try{var m=a["__"+s];if(void 0!==m&&!a.disabled)if(i(m)){var[b,...y]=m;b.apply(a,[t,...y])}else m.call(a,t)}catch(t){f?p.push(t):f=t}if(t.cancelBubble||v===e||null===v)break;a=v}if(f){for(let t of p)queueMicrotask((()=>{throw t}));throw f}}finally{t.__root=e,delete t.currentTarget,At(h),Ct(g)}}}function Ie(t){var e=document.createElement("template");return e.innerHTML=t,e.content}function Ae(t,e){var i=St;null===i.nodes_start&&(i.nodes_start=t,i.nodes_end=e)}function Se(t,e){var i,r=!!(1&e),n=!!(2&e),s=!t.startsWith("<!>");return()=>{void 0===i&&(i=Ie(s?t:"<!>"+t),r||(i=ce(i)));var e=n?document.importNode(i,!0):i.cloneNode(!0);r?Ae(ce(e),e.lastChild):Ae(e,e);return e}}function Ce(t=""){var e=le(t+"");return Ae(e,e),e}function Ee(){var t=document.createDocumentFragment(),e=document.createComment(""),i=le();return t.append(e,i),Ae(e,i),t}function Le(t,e){null!==t&&t.before(e)}function Te(t){return t.endsWith("capture")&&"gotpointercapture"!==t&&"lostpointercapture"!==t}const xe=["beforeinput","click","change","dblclick","contextmenu","focusin","focusout","input","keydown","keyup","mousedown","mousemove","mouseout","mouseover","mouseup","pointerdown","pointermove","pointerout","pointerover","pointerup","touchend","touchmove","touchstart"];function Ne(t){return xe.includes(t)}const Fe={formnovalidate:"formNoValidate",ismap:"isMap",nomodule:"noModule",playsinline:"playsInline",readonly:"readOnly",srcobject:"srcObject"};function Me(t){return t=t.toLowerCase(),Fe[t]??t}const Re=["touchstart","touchmove"];function Ue(t){return Re.includes(t)}let De=!0;function Pe(t){De=t}function je(t,e){var i=null==e?"":"object"==typeof e?e+"":e;i!==(t.__t??=t.nodeValue)&&(t.__t=i,t.nodeValue=null==i?"":i+"")}function We(t,e){return function(t,{target:e,anchor:i,props:n={},events:o,context:a,intro:l=!0}){!function(){if(void 0===se){se=window;var t=Element.prototype,e=Node.prototype;oe=s(e,"firstChild").get,ae=s(e,"nextSibling").get,t.__click=void 0,t.__className="",t.__attributes=null,t.__styles=null,t.__e=void 0,Text.prototype.__t=void 0}}();var c=new Set,u=t=>{for(var i=0;i<t.length;i++){var r=t[i];if(!c.has(r)){c.add(r);var n=Ue(r);e.addEventListener(r,_e,{passive:n});var s=Be.get(r);void 0===s?(document.addEventListener(r,_e,{passive:n}),Be.set(r,1)):Be.set(r,s+1)}}};u(r(ye)),Oe.add(u);var d=void 0,h=function(t){const e=K(64,t,!0);return()=>{ot(e)}}((()=>{var r=i??e.appendChild(le());return it((()=>{a&&(Zt({}),Mt.c=a);o&&(n.$$events=o),De=l,d=t(r,n)||{},De=!0,a&&te()})),()=>{for(var t of c){e.removeEventListener(t,_e);var n=Be.get(t);0==--n?(document.removeEventListener(t,_e),Be.delete(t)):Be.set(t,n)}Oe.delete(u),ze.delete(d),r!==i&&r.parentNode?.removeChild(r)}}));return ze.set(d,h),d}(t,e)}const Be=new Map;let ze=new WeakMap;function Ve(t){const e=ze.get(t);e&&e()}function qe(t,e,i,r=null,n=!1){var s=t,o=null,a=null,l=null;et((()=>{l!==(l=!!e())&&(l?(o?dt(o):o=it((()=>i(s))),a&&lt(a,(()=>{a=null}))):(a?dt(a):r&&(a=it((()=>r(s)))),o&&lt(o,(()=>{o=null}))))}),n?w:0)}let He=null;function Ke(t){He=t}function Ge(t,e){return e}function Je(t,e,n,s,o,a=null){var l=t,c={flags:e,items:new Map,first:null};!(4&e)||(l=t.appendChild(le()));var u=null,d=!1;et((()=>{var t=n(),h=i(t)?t:null==t?[]:r(t),g=h.length;d&&0===g||(d=0===g,function(t,e,i,n,s,o,a){var l,c,u,d,h,g,f=!!(8&s),p=!!(3&s),v=t.length,m=e.items,b=e.first,y=b,$=null,w=[],k=[];if(f)for(g=0;g<v;g+=1)d=a(u=t[g],g),void 0!==(h=m.get(d))&&(h.a?.measure(),(c??=new Set).add(h));for(g=0;g<v;g+=1)if(d=a(u=t[g],g),void 0!==(h=m.get(d))){if(p&&Ye(h,u,g,s),h.e.f&O&&(dt(h.e),f&&(h.a?.unfix(),(c??=new Set).delete(h))),h!==y){if(void 0!==l&&l.has(h)){if(w.length<k.length){var _,I=k[0];$=I.prev;var A=w[0],S=w[w.length-1];for(_=0;_<w.length;_+=1)Xe(w[_],I,i);for(_=0;_<k.length;_+=1)l.delete(k[_]);Ze(e,A.prev,S.next),Ze(e,$,A),Ze(e,S,I),y=I,$=S,g-=1,w=[],k=[]}else l.delete(h),Xe(h,y,i),Ze(e,h.prev,h.next),Ze(e,h,null===$?e.first:$.next),Ze(e,$,h),$=h;continue}for(w=[],k=[];null!==y&&y.k!==d;)!o&&y.e.f&O||(l??=new Set).add(y),k.push(y),y=y.next;if(null===y)continue;h=y}w.push(h),$=h,y=h.next}else{$=Qe(y?y.e.nodes_start:i,e,$,null===$?e.first:$.next,u,d,g,n,s),m.set(d,$),w=[],k=[],y=$.next}if(null!==y||void 0!==l){for(var C=void 0===l?[]:r(l);null!==y;)!o&&y.e.f&O||C.push(y),y=y.next;var E=C.length;if(E>0){var L=4&s&&0===v?i:null;if(f){for(g=0;g<E;g+=1)C[g].a?.measure();for(g=0;g<E;g+=1)C[g].a?.fix()}!function(t,e,i,r){for(var n=[],s=e.length,o=0;o<s;o++)ut(e[o].e,n,!0);var a=s>0&&0===n.length&&null!==i;if(a){var l=i.parentNode;l.textContent="",l.append(i),r.clear(),Ze(t,e[0].prev,e[s-1].next)}ct(n,(()=>{for(var i=0;i<s;i++){var n=e[i];a||(r.delete(n.k),Ze(t,n.prev,n.next)),ot(n.e,!a)}}))}(e,C,L,m)}}f&&vt((()=>{if(void 0!==c)for(h of c)h.a?.apply()}));St.first=e.first&&e.first.e,St.last=$&&$.e}(h,c,l,o,e,!!(It.f&O),s),null!==a&&(0===g?u?dt(u):u=it((()=>a(l))):null!==u&&lt(u,(()=>{u=null}))),n())}))}function Ye(t,e,i,r){1&r&&D(t.v,e),2&r?D(t.i,i):t.i=i}function Qe(t,e,i,r,n,s,o,a,l){var c=He,u=!!(1&l)?!(16&l)?N(n):T(n):n,d=2&l?T(o):o,h={i:d,v:u,k:s,a:null,e:null,prev:i,next:r};He=h;try{return h.e=it((()=>a(t,u,d)),fe),h.e.prev=i&&i.e,h.e.next=r&&r.e,null===i?e.first=h:(i.next=h,i.e.next=h.e),null!==r&&(r.prev=h,r.e.prev=h.e),h}finally{He=c}}function Xe(t,e,i){for(var r=t.next?t.next.e.nodes_start:i,n=e?e.e.nodes_start:i,s=t.e.nodes_start;s!==r;){var o=ue(s);n.before(s),s=o}}function Ze(t,e,i){null===e?t.first=i:(e.next=i,e.e.next=i&&i.e),null!==i&&(i.prev=e,i.e.prev=e&&e.e)}function ti(t,e,i,r,n){var s,o=t,a="";et((()=>{a!==(a=e()??"")&&(void 0!==s&&(ot(s),s=void 0),""!==a&&(s=it((()=>{var t=Ie(a+"");Ae(ce(t),t.lastChild),o.before(t)}))))}))}function ei(t,e,i,r,n){var s=e.$$slots?.[i],o=!1;!0===s&&(s=e["default"===i?"children":i],o=!0),void 0===s?null!==n&&n(t):s(t,o?()=>r:r)}function ii(t,e,...i){var r,n=t,s=d;et((()=>{s!==(s=e())&&(r&&(ot(r),r=null),r=it((()=>s(n,...i))))}),w)}function ri(t,e,i){var r,n,s=t;et((()=>{r!==(r=e())&&(n&&(lt(n),n=null),r&&(n=it((()=>i(s,r)))))}),w)}function ni(t,e,i,r){var n=t.__attributes??={};n[e]!==(n[e]=i)&&("style"===e&&"__styles"in t&&(t.__styles={}),"loading"===e&&(t[A]=i),null==i?t.removeAttribute(e):"string"!=typeof i&&oi(t).includes(e)?t[e]=i:t.setAttribute(e,i))}var si=new Map;function oi(t){var e,i=si.get(t.nodeName);if(i)return i;si.set(t.nodeName,i=[]);for(var r=c(t),n=Element.prototype;n!==r;){for(var s in e=o(r))e[s].set&&i.push(s);r=c(r)}return i}function ai(t,e){var i=t.__className,r=function(t){return null==t?"":t}(e);i!==r&&(null==e?t.removeAttribute("class"):t.className=r,t.__className=r)}function li(t,e,i){if(i){if(t.classList.contains(e))return;t.classList.add(e)}else{if(!t.classList.contains(e))return;t.classList.remove(e)}}const ci={tick:t=>requestAnimationFrame(t),now:()=>performance.now(),tasks:new Set};function ui(t){ci.tasks.forEach((e=>{e.c(t)||(ci.tasks.delete(e),e.f())})),0!==ci.tasks.size&&ci.tick(ui)}function di(t,e){t.dispatchEvent(new CustomEvent(e))}function hi(t){if("float"===t)return"cssFloat";if("offset"===t)return"cssOffset";if(t.startsWith("--"))return t;const e=t.split("-");return 1===e.length?e[0]:e[0]+e.slice(1).map((t=>t[0].toUpperCase()+t.slice(1))).join("")}function gi(t){const e={},i=t.split(";");for(const t of i){const[i,r]=t.split(":");if(!i||void 0===r)break;e[hi(i.trim())]=r.trim()}return e}const fi=t=>t;function pi(t,e,i,r){var n,s,o,a=!!(4&t),l=e.inert;function c(){var t=It,s=St;At(null),Ct(null);try{return n??=i()(e,r?.()??{},{direction:"both"})}finally{At(t),Ct(s)}}var u={is_global:a,in(){e.inert=l,di(e,"introstart"),s=vi(e,c(),o,1,(()=>{di(e,"introend"),s?.abort(),s=n=void 0}))},out(t){e.inert=!0,di(e,"outrostart"),o=vi(e,c(),s,0,(()=>{di(e,"outroend"),t?.()}))},stop:()=>{s?.abort(),o?.abort()}},d=St;if((d.transitions??=[]).push(u),De){var h=a;if(!h){for(var g=d.parent;g&&g.f&w;)for(;(g=g.parent)&&!(16&g.f););h=!g||!!(16384&g.f)}h&&Q((()=>{Jt((()=>u.in()))}))}}function vi(t,e,i,r,n){var s=1===r;if(u(e)){var o,a=!1;return vt((()=>{if(!a){var l=e({direction:s?"in":"out"});o=vi(t,l,i,r,n)}})),{abort:()=>{a=!0,o?.abort()},deactivate:()=>o.deactivate(),reset:()=>o.reset(),t:()=>o.t()}}if(i?.deactivate(),!e?.duration)return n(),{abort:d,deactivate:d,reset:d,t:()=>r};const{delay:l=0,css:c,tick:h,easing:g=fi}=e;var f=[];if(s&&void 0===i&&(h&&h(0,1),c)){var p=gi(c(0,1));f.push(p,p)}var v=()=>1-r,m=t.animate(f,{duration:l});return m.onfinish=()=>{var s=i?.t()??1-r;i?.abort();var o=r-s,a=e.duration*Math.abs(o),l=[];if(a>0){if(c)for(var u=Math.ceil(a/(1e3/60)),d=0;d<=u;d+=1){var f=s+o*g(d/u),p=c(f,1-f);l.push(gi(p))}v=()=>{var t=m.currentTime;return s+o*g(t/a)},h&&function(t){let e;0===ci.tasks.size&&ci.tick(ui),new Promise((i=>{ci.tasks.add(e={c:t,f:i})}))}((()=>{if("running"!==m.playState)return!1;var t=v();return h(t,1-t),!0}))}(m=t.animate(l,{duration:a,fill:"forwards"})).onfinish=()=>{v=()=>r,h?.(r,1-r),n()}},{abort:()=>{m&&(m.cancel(),m.effect=null,m.onfinish=d)},deactivate:()=>{n=d},reset:()=>{0===r&&h?.(1,0)},t:()=>v()}}function mi(t,e,i=e){var r=Ut();be(t,"input",(()=>{var n=yi(t)?Oi(t.value):t.value;i(n),r&&n!==(n=e())&&(t.value=n??"")})),Z((()=>{var i=e();yi(t)&&i===Oi(t.value)||("date"!==t.type||i||t.value)&&i!==t.value&&(t.value=i??"")}))}function bi(t,e,i=e){be(t,"change",(()=>{var e=t.checked;i(e)})),null==e()&&i(!1),Z((()=>{var i=e();t.checked=Boolean(i)}))}function yi(t){var e=t.type;return"number"===e||"range"===e}function Oi(t){return""===t?null:+t}function $i(t,e){return t===e||t?.[_]===e}function wi(t={},e,i,r){return Q((()=>{var r,n;return Z((()=>{r=n,n=[],Jt((()=>{t!==i(...n)&&(e(t,...n),r&&$i(i(...r),t)&&e(null,...r))}))})),()=>{vt((()=>{n&&$i(i(...n),t)&&e(null,...n)}))}})),t}function ki(t){return function(...e){return e[0].preventDefault(),t?.apply(this,e)}}function _i(t,e){if(t.l.s)for(const e of t.l.s)Gt(e);e()}function Ii(t,e){var r=t.$$events?.[e.type],n=i(r)?r.slice():null==r?[]:[r];for(var s of n)s.call(this,e)}function Ai(t){null===Mt&&mt(),L&&null!==Mt.l?Ei(Mt).m.push(t):J((()=>{const e=Jt(t);if("function"==typeof e)return e}))}function Si(){const t=Mt;return null===t&&mt(),(e,r,n)=>{const s=t.s.$$events?.[e];if(s){const o=i(s)?s.slice():[s],a=function(t,e,{bubbles:i=!1,cancelable:r=!1}={}){return new CustomEvent(t,{detail:e,bubbles:i,cancelable:r})}(e,r,n);for(const e of o)e.call(t.x,a);return!a.defaultPrevented}return!0}}function Ci(t){null===Mt&&mt(),null===Mt.l&&function(){throw new Error("lifecycle_legacy_only")}(),Ei(Mt).a.push(t)}function Ei(t){var e=t.l;return e.u??={a:[],b:[],m:[]}}let Li=!1;function Ti(t,e,i){const r=i[e]??={store:null,source:N(void 0),unsubscribe:d};if(r.store!==t)if(r.unsubscribe(),r.store=t??null,null==t)r.source.v=void 0,r.unsubscribe=d;else{var n=!0;r.unsubscribe=function(t,e,i){if(null==t)return e(void 0),d;const r=Jt((()=>t.subscribe(e,i)));return r.unsubscribe?()=>r.unsubscribe():r}(t,(t=>{n?r.source.v=t:U(r.source,t)})),n=!1}return Gt(r.source)}function xi(){const t={};return G((()=>{for(var e in t){t[e].unsubscribe()}})),t}const Ni={get(t,e){if(!t.exclude.includes(e))return Gt(t.version),e in t.special?t.special[e]():t.props[e]},set:(t,e,i)=>(e in t.special||(t.special[e]=Di({get[e](){return t.props[e]}},e,4)),t.special[e](i),Xt(t.version),!0),getOwnPropertyDescriptor(t,e){if(!t.exclude.includes(e))return e in t.props?{enumerable:!0,configurable:!0,value:t.props[e]}:void 0},deleteProperty:(t,e)=>(t.exclude.includes(e)||(t.exclude.push(e),Xt(t.version)),!0),has:(t,e)=>!t.exclude.includes(e)&&e in t.props,ownKeys:t=>Reflect.ownKeys(t.props).filter((e=>!t.exclude.includes(e)))};function Fi(t,e){return new Proxy({props:t,exclude:e,special:{},version:T(0)},Ni)}const Mi={get(t,e){let i=t.props.length;for(;i--;){let r=t.props[i];if(u(r)&&(r=r()),"object"==typeof r&&null!==r&&e in r)return r[e]}},set(t,e,i){let r=t.props.length;for(;r--;){let n=t.props[r];u(n)&&(n=n());const o=s(n,e);if(o&&o.set)return o.set(i),!0}return!1},getOwnPropertyDescriptor(t,e){let i=t.props.length;for(;i--;){let r=t.props[i];if(u(r)&&(r=r()),"object"==typeof r&&null!==r&&e in r){const t=s(r,e);return t&&!t.configurable&&(t.configurable=!0),t}}},has(t,e){if(e===_||e===I)return!1;for(let i of t.props)if(u(i)&&(i=i()),null!=i&&e in i)return!0;return!1},ownKeys(t){const e=[];for(let i of t.props){u(i)&&(i=i());for(const t in i)e.includes(t)||e.push(t)}return e}};function Ri(...t){return new Proxy({props:t},Mi)}function Ui(t){for(var e=St,i=St;null!==e&&!(96&e.f);)e=e.parent;try{return Ct(e),t()}finally{Ct(i)}}function Di(t,e,i,r){var n,o=!!(1&i),a=!L||!!(2&i),l=!!(8&i),c=!!(16&i),u=!1;l?[n,u]=function(t){var e=Li;try{return Li=!1,[t(),Li]}finally{Li=e}}((()=>t[e])):n=t[e];var d,h=_ in t||I in t,g=s(t,e)?.set??(h&&l&&e in t?i=>t[e]=i:void 0),f=r,p=!0,v=!1,m=()=>(v=!0,p&&(p=!1,f=c?Jt(r):r),f);if(void 0===n&&void 0!==r&&(g&&a&&function(){throw new Error("props_invalid_value")}(),n=m(),g&&g(n)),a)d=()=>{var i=t[e];return void 0===i?m():(p=!0,v=!1,i)};else{var b=Ui((()=>(o?j:W)((()=>t[e]))));b.f|=65536,d=()=>{var t=Gt(b);return void 0!==t&&(f=void 0),void 0===t?f:t}}if(!(4&i))return d;if(g){var y=t.$$legacy;return function(t,e){return arguments.length>0?(a&&e&&!y&&!u||g(e?d():t),t):d()}}var O=!1,$=N(n),w=Ui((()=>j((()=>{var t=d(),e=Gt($);return O?(O=!1,e):$.v=t}))));return o||(w.equals=E),function(t,e){if(arguments.length>0){const i=e?Gt(w):a&&l?re(t):t;return w.equals(i)||(O=!0,U($,i),v&&void 0!==f&&(f=i),Jt((()=>Gt(w)))),t}return Gt(w)}}function Pi(t){Y((()=>{t();var e=St;e.f&b&&(console.warn("legacy_recursive_reactive_block"),Qt(e,y))}))}function ji(){const t=Mt;return null===t&&mt(),e=>r=>{const n=t.s.$$events?.[e];if(n){const e=i(n)?n.slice():[n];for(const i of e)i.call(t.x,r);return!r.defaultPrevented}return!0}}function Wi(t,e,i){if("function"==typeof t?t===e:t.has(e))return arguments.length<3?e:i;throw new TypeError("Private element is not present on this object")}function Bi(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function zi(t,e){return t.get(Wi(t,e))}function Vi(t,e,i){Bi(t,e),e.set(t,i)}function qi(t,e,i){return t.set(Wi(t,e),i),i}function Hi(t,e){Bi(t,e),e.add(t)}function Ki(t,e,i){return(e=function(t){var e=function(t,e){if("object"!=typeof t||!t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var r=i.call(t,e||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:e+""}(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}let Gi=class t{static isEnterEvent(t){return"Enter"===t.key&&!t.altKey&&!t.ctrlKey&&!t.shiftKey}static onlyOnEnter(e){return function(i){return!t.isEnterEvent(i)||e(i)}}static isMobile(){const t=window.matchMedia||window.msMatchMedia;if(t){let e="(pointer:coarse)";if(arguments.length){e=`only screen and (max-width: ${"boolean"==typeof arguments[0]?this.MOBILE_WIDTH_BREAK_POINT:arguments[0]}px)`}return t(e).matches}return!1}static removeBodyScroll(){document.body.classList.add(this.SCROLL_DISABLER_CLASS)}static restoreBodyScroll(){document.body.classList.remove(this.SCROLL_DISABLER_CLASS)}static formatPhone(t,e=this.FILLER){const i=[1,2,2,2,3,3,3,4,4,5,5];let r=t.replace(/\D/g,"");if(r.length>11){let t=r.length-11;for(;t>0;)t--,i.unshift(1)}let n=["","","","",""];Array.from(r).forEach((function(t,e){let r=i[e];n[r-1]=n[r-1]+t}));const s=i.reduce((function(t,e){return void 0===t[e]?t[e]=1:t[e]+=1,t}),{});for(let t in n){let i=s[parseInt(t)+1]-n[t].length;for(;i>0;)n[t]=n[t]+e,i--}return`+${n[0]} (${n[1]}) ${n[2]}-${n[3]}-${n[4]}`}static setMoneySign(t){this.MONEY_SIGN=t}static formatPrice(t){let e=Math.floor(t/100),i=t%100;return`${this.MONEY_SIGN}${e.toString()}.${i.toString()}`}static formatLocaleDatetime(t,e={date:!0,time:!0}){const i=t.toLocaleDateString(window.navigator.language),r=t.toLocaleTimeString(window.navigator.language);return e.date&&e.time?`${i} ${r}`:e.date&&!e.time?i:r}static tryFormatLocaleDateTime(e,i={date:!0,time:!0}){if("string"==typeof e||"number"==typeof e){const r=new Date(e);return t.formatLocaleDatetime(r,i)}return"object"==typeof e?t.formatLocaleDatetime(e,i):""}static formatTimestamp(t,e=0){let i=60*((new Date).getTimezoneOffset()-e)*1e3;return new Date(parseInt(t)-i).toLocaleString(window.navigator.language)}static declOfNum(t,e){let i=(t=Math.abs(t)%100)%10;return t>10&&t<20?e[2]:i>1&&i<5?e[1]:1==i?e[0]:e[2]}static humanizedTimeDiff(t){let e,i=(new Date).getTime(),r=Math.round((i-t)/1e3);if(r<60)return e=this.declOfNum(r,this.TIME.SECONDS),`${r} ${e} назад`;if(r<3600){let t=Math.floor(r/60);return e=this.declOfNum(t,this.TIME.MINUTES),`${t} ${e} назад`}{let t=Math.floor(r/3600);return e=this.declOfNum(t,this.TIME.HOURS),`${t} ${e} назад`}}};Ki(Gi,"CLEAR_MACRO","__CLEAR__"),Ki(Gi,"ERROR_DEFAULT","Что пошло не так."),Ki(Gi,"DEFAULT_REDIRECT_TIMEOUT",3e3),Ki(Gi,"CLASS_OK","is-success"),Ki(Gi,"CLASS_ERR","is-danger"),Ki(Gi,"SCROLL_DISABLER_CLASS","remove-scroll"),Ki(Gi,"FILLER","_"),Ki(Gi,"SCROLL_OPTIONS",{top:0,behavior:"smooth"}),Ki(Gi,"MOBILE_WIDTH_BREAK_POINT",760),Ki(Gi,"MONEY_SIGN","&#8381;"),Ki(Gi,"TIME",{SECONDS:["секунду","секунды","секунд"],MINUTES:["минуту","минуты","минут"],HOURS:["час","часа","часов"]});var Ji=Se('<div role="button" tabindex="0"><!></div>');function Yi(t,e){Zt(e,!0);let i=Di(e,"id",3,""),r=Di(e,"classes",3,""),n=Di(e,"onclick",3,(()=>!0));var s=Ji();s.__click=function(...t){n()?.apply(this,t)};var o=j((()=>Gi.onlyOnEnter(n())));s.__keyup=function(...t){Gt(o)?.apply(this,t)},ii(de(s),(()=>e.children??d)),tt((()=>{ni(s,"id",i()),ai(s,`block ${r()??""}`)})),Le(t,s),te()}ke(["click","keyup"]);var Qi=Se('<div role="button" tabindex="0"><!></div>');function Xi(t,e){Zt(e,!0);let i=Di(e,"id",3,""),r=Di(e,"classes",3,""),n=Di(e,"onclick",3,(()=>!0));var s=Qi();s.__click=function(...t){n()?.apply(this,t)};var o=j((()=>Gi.onlyOnEnter(n())));s.__keyup=function(...t){Gt(o)?.apply(this,t)},ii(de(s),(()=>e.children??d)),tt((()=>{ni(s,"id",i()),ai(s,`box ${r()??""} `)})),Le(t,s),te()}ke(["click","keyup"]);var Zi=Se('<div role="button" tabindex="0"><!></div>');function tr(t,e){Zt(e,!0);let i=Di(e,"id",3,""),r=Di(e,"classes",3,""),n=Di(e,"onclick",3,(()=>!0));var s=Zi();s.__click=function(...t){n()?.apply(this,t)};var o=j((()=>Gi.onlyOnEnter(n())));s.__keyup=function(...t){Gt(o)?.apply(this,t)},ii(de(s),(()=>e.children??d)),tt((()=>{ni(s,"id",i()),ai(s,`content ${r()??""}`)})),Le(t,s),te()}ke(["click","keyup"]);var er=Object.freeze({__proto__:null,UIBlock:Yi,UIBlockInnerVertical:function(t,e){Zt(e,!0);let i=Di(e,"id",11,""),r=Di(e,"classes",3,""),n=Di(e,"onclick",3,(()=>!0)),s=x("block-inner-vertical");J((()=>{U(s,`block-inner-vertical ${r()}`)})),Yi(t,{get id(){return i()},get classes(){return Gt(s)},get onclick(){return n()},children:(t,i)=>{var r=Ee();ii(he(r),(()=>e.children??d)),Le(t,r)},$$slots:{default:!0}}),te()},UIBox:Xi,UIContent:tr});const ir=[];function rr(t,e=d){let i=null;const r=new Set;function n(e){if(C(t,e)&&(t=e,i)){const e=!ir.length;for(const e of r)e[1](),ir.push(e,t);if(e){for(let t=0;t<ir.length;t+=2)ir[t][0](ir[t+1]);ir.length=0}}}function s(e){n(e(t))}return{set:n,update:s,subscribe:function(o,a=d){const l=[o,a];return r.add(l),1===r.size&&(i=e(n,s)||d),o(t),()=>{r.delete(l),0===r.size&&i&&(i(),i=null)}}}}function nr(t={}){const e={get:function(t,e){return Object.hasOwn(t,e)?Reflect.get(...arguments):e}};return new Proxy(t,e)}const sr=function(){const{subscribe:t,set:e,update:i}=rr(nr());return{subscribe:t,update:i,set:function(t){e(nr(t))},reset:function(){return e(nr())}}}();function or(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var ar,lr={exports:{}};
/*!
	 * EventEmitter v5.2.9 - git.io/ee
	 * Unlicense - http://unlicense.org/
	 * Oliver Caldwell - https://oli.me.uk/
	 * @preserve
	 */var cr,ur,dr,hr,gr,fr=(ar||(ar=1,cr=lr,function(t){function e(){}var i=e.prototype,r=t.EventEmitter;function n(t,e){for(var i=t.length;i--;)if(t[i].listener===e)return i;return-1}function s(t){return function(){return this[t].apply(this,arguments)}}function o(t){return"function"==typeof t||t instanceof RegExp||!(!t||"object"!=typeof t)&&o(t.listener)}i.getListeners=function(t){var e,i,r=this._getEvents();if(t instanceof RegExp)for(i in e={},r)r.hasOwnProperty(i)&&t.test(i)&&(e[i]=r[i]);else e=r[t]||(r[t]=[]);return e},i.flattenListeners=function(t){var e,i=[];for(e=0;e<t.length;e+=1)i.push(t[e].listener);return i},i.getListenersAsObject=function(t){var e,i=this.getListeners(t);return i instanceof Array&&((e={})[t]=i),e||i},i.addListener=function(t,e){if(!o(e))throw new TypeError("listener must be a function");var i,r=this.getListenersAsObject(t),s="object"==typeof e;for(i in r)r.hasOwnProperty(i)&&-1===n(r[i],e)&&r[i].push(s?e:{listener:e,once:!1});return this},i.on=s("addListener"),i.addOnceListener=function(t,e){return this.addListener(t,{listener:e,once:!0})},i.once=s("addOnceListener"),i.defineEvent=function(t){return this.getListeners(t),this},i.defineEvents=function(t){for(var e=0;e<t.length;e+=1)this.defineEvent(t[e]);return this},i.removeListener=function(t,e){var i,r,s=this.getListenersAsObject(t);for(r in s)s.hasOwnProperty(r)&&-1!==(i=n(s[r],e))&&s[r].splice(i,1);return this},i.off=s("removeListener"),i.addListeners=function(t,e){return this.manipulateListeners(!1,t,e)},i.removeListeners=function(t,e){return this.manipulateListeners(!0,t,e)},i.manipulateListeners=function(t,e,i){var r,n,s=t?this.removeListener:this.addListener,o=t?this.removeListeners:this.addListeners;if("object"!=typeof e||e instanceof RegExp)for(r=i.length;r--;)s.call(this,e,i[r]);else for(r in e)e.hasOwnProperty(r)&&(n=e[r])&&("function"==typeof n?s.call(this,r,n):o.call(this,r,n));return this},i.removeEvent=function(t){var e,i=typeof t,r=this._getEvents();if("string"===i)delete r[t];else if(t instanceof RegExp)for(e in r)r.hasOwnProperty(e)&&t.test(e)&&delete r[e];else delete this._events;return this},i.removeAllListeners=s("removeEvent"),i.emitEvent=function(t,e){var i,r,n,s,o=this.getListenersAsObject(t);for(s in o)if(o.hasOwnProperty(s))for(i=o[s].slice(0),n=0;n<i.length;n++)!0===(r=i[n]).once&&this.removeListener(t,r.listener),r.listener.apply(this,e||[])===this._getOnceReturnValue()&&this.removeListener(t,r.listener);return this},i.trigger=s("emitEvent"),i.emit=function(t){var e=Array.prototype.slice.call(arguments,1);return this.emitEvent(t,e)},i.setOnceReturnValue=function(t){return this._onceReturnValue=t,this},i._getOnceReturnValue=function(){return!this.hasOwnProperty("_onceReturnValue")||this._onceReturnValue},i._getEvents=function(){return this._events||(this._events={})},e.noConflict=function(){return t.EventEmitter=r,e},cr.exports?cr.exports=e:t.EventEmitter=e}("undefined"!=typeof window?window:lr.exports||{})),lr.exports),pr=or(fr);var vr,mr=(gr||(gr=1,hr=function(){if(dr)return ur;dr=1;const t=".",e=":",i="::",r="()";return ur=class{static get SUB_PATH_START(){return"{"}static get SUB_PATH_END(){return"}"}static get PATH_SPLIT(){return t}static get PATH_START_OBJECT(){return e}static get PATH_START_HELPERS(){return i}static get FUNCTION_MARKER(){return r}static get MAX_DEEP(){return 10}static findNextSubPath(t){let e="",i=!1;for(let r=0;r<t.length;r++)if("{"===t[r])i=!0,e="";else{if("}"===t[r]&&i)return e;e+=t[r]}return i?e:null}static replaceSubPath(t,e,i){let r="{"+e+"}",n=0;for(;t.indexOf(r)>-1&&n<10;)t=t.replace(r,i),n++;return t}static parseSubs(t,e,r){let n,s=this.findNextSubPath(t),o=0;for(;s&&(n=this.getValueByPath(s.indexOf(i)>-1?r:e,s,e,r),t=this.replaceSubPath(t,s,n),o++,!(o>10));)s=this.findNextSubPath(t);return t}static get(t,r,n=void 0){switch(t){case e:return r;case i:return n}return t=this.parseSubs(t,r,n),this.getValueByPath(t.indexOf(i)>-1?n:r,t,r,n)}static set(t,e,r,n=void 0){3===arguments.length&&(n=r,r=void 0);let s,o=this.findNextSubPath(t),a=0;for(;o&&(s=this.getValueByPath(o.indexOf(i)>-1?r:e,o,e,r),t=this.replaceSubPath(t,o,s),!(a>10));)o=this.findNextSubPath(t),a++;this.setValueByPath(e,t,n),e.isRecord&&this.normilizePath(t).length>1&&e.__isActive&&e.trigger("change",e,t,n)}static unset(t,e,i){this.set(t,e,i,null)}static parsePathStep(t,n,s){let o=null;if(0===t.indexOf(i)&&s){if(o=t.replace(i,""),o.indexOf(r)!==o.length-2)return s[o];if(o=o.replace(r,""),Object.prototype.hasOwnProperty.call(s,o))return s[o](n,void 0)}else if(0===t.indexOf(e)&&n){if(o=t.replace(e,""),o.indexOf(r)!==o.length-2)return n[o];if(o=o.replace(r,""),Object.prototype.hasOwnProperty.call(n,o))return n[o](n,void 0)}return t}static parsePath(e,i,r){Array.isArray(e)||(e=e.split(t));for(var n=0;n<e.length;n++)e[n]=this.parsePathStep(e[n],i,r);return e}static normilizePath(i){if(Array.isArray(i))return i;for(;i.indexOf(e)>-1;)i=i.replace(e,"");return i.split(t)}static ifFullSubPath(t,e){if(t.length<e.length)return!1;for(let i=0;i<e.length;i++)if(e[i]!==t[i])return!1;return!0}static getValueByPath(t,e,i,n){let s=(e=this.normilizePath(e)).shift(),o=s.indexOf(r)>-1;if(o&&(s=s.replace(r,"")),("object"==typeof t||"function"==typeof t)&&null!=t&&void 0!==t[s]&&null!==t[s]){let r=o?t[s]({item:i,helpers:n}):t[s];return e.length>0?this.getValueByPath(r,e,i,n):r}}static setValueByPath(t,e,i){let r=(e=this.normilizePath(e)).shift();e.length>0?(Object.prototype.hasOwnProperty.call(t,r)||(t[r]={}),this.setValueByPath(t[r],e,i)):t[r]=i}static join(){return Array.prototype.slice.call(arguments).join(t)}},ur}()),hr),br=or(mr);let yr=function(t){return function(t){return!!t&&"object"==typeof t}(t)&&!function(t){var e=Object.prototype.toString.call(t);return"[object RegExp]"===e||"[object Date]"===e||function(t){return t.$$typeof===Or}(t)}(t)};var Or="function"==typeof Symbol&&Symbol.for?Symbol.for("react.element"):60103;function $r(t,e){return(!e||!1!==e.clone)&&yr(t)?kr((i=t,Array.isArray(i)?[]:{}),t,e):t;var i}function wr(t,e,i){return t.concat(e).map((function(t){return $r(t,i)}))}function kr(t,e,i){const r=Array.isArray(e);if(r===Array.isArray(t)){if(r){return((i||{arrayMerge:wr}).arrayMerge||wr)(t,e,i)}return function(t,e,i){const r={};return yr(t)&&Object.keys(t).forEach((function(e){r[e]=$r(t[e],i)})),Object.keys(e).forEach((function(n){yr(e[n])&&t[n]?r[n]=kr(t[n],e[n],i):r[n]=$r(e[n],i)})),r}(t,e,i)}return $r(e,i)}kr.all=function(t,e){if(!Array.isArray(t))throw new Error("first argument should be an array");return t.reduce((function(t,i){return kr(t,i,e)}),{})};let _r=class t{static isError(t){return t instanceof Error||Object.hasOwn(t,"status")&&"error"===t.status}static mute(){t.ENV_TYPE="production"}static pad(t){return t<10?"0"+t:t}static getTodayDate(){let t=new Date;return new Date(t.getFullYear(),t.getMonth(),t.getDate()).getTime()}static objHas(t,e){return Object.hasOwn(t,e)}static copyObj(t){return JSON.parse(JSON.stringify(t))}static partCopyObj(t,e){let i=Object.keys(t).reduce((function(i,r){return e.includes(r)&&(i[r]=t[r]),i}),{});return JSON.parse(JSON.stringify(i))}static compareTwoArrays(t,e){return t.length===e.length&&t.every((function(t,i){return t===e[i]}))}static isFunc(t){return"function"==typeof t}static isAsync(t){return"AsyncFunction"===t.constructor.name}static async executeObjectFunction(e,i,r){if(e){const n=br.get(":"+i,e);if(t.isFunc(n))return t.isAsync(n)?await n(...r):n(...r)}}static mapBind(t,e,i){i.forEach((function(i){"function"==typeof t[i]&&(e[i]=t[i].bind(t))}))}static isClass(t){return/^\s*class/.test(t.toString())}static detectType(e){return"function"!=typeof e?typeof e:t.isClass(e)?"class":"function"}static isArray(t){return"object"==typeof t&&t instanceof Array}static localIsoDate(e){return(e=e||new Date).getFullYear()+"-"+t.pad(e.getMonth()+1)+"-"+t.pad(e.getDate())+"T"+t.pad(e.getHours())+":"+t.pad(e.getMinutes())+":"+t.pad(e.getSeconds())}static getToday(){let e=new Date;return e.getFullYear()+"-"+t.pad(e.getMonth()+1)+"-"+t.pad(e.getDate())}static backlogAdd(e,i="log"){!0===t.get("backlog")&&t.backlog.push({msg:e,type:i})}static dumpBacklog(){for(;t.backlog.length;){let e=t.backlog.shift();window[t.LOG][e.type](...e.msg)}}static logMsg(){let e=t.localIsoDate();window[t.LOG].log(`[${e}]: `,...arguments),t.backlogAdd([`[${e}]: `,...arguments],"log")}static log(){t.logMsg(...arguments)}static createLogger(e){return{log:t.genLogMsg(e),error:t.genLogError(e),debug:t.genLogDebug(e),report:t.report}}static genLogMsg(e){return function(){let i=t.localIsoDate();window[t.LOG].log(`[${i}]: ${e}::`,...arguments),t.backlogAdd([`[${i}]: ${e}::`,...arguments],"log")}}static isDev(){return t.ENV_TYPE===t.DEV_ENV}static debug(){return t.isDev()?t.logMsg(...arguments):t.NOOP}static genLogDebug(e){return t.isDev()?t.genLogMsg(e):t.NOOP}static error(){t.logError(...arguments)}static logError(){let e=t.localIsoDate();window[t.LOG].error(`[${e}]: `,...arguments),t.backlogAdd([`[${e}]: `,...arguments],"error")}static genLogError(e){return function(){let i=t.localIsoDate();window[t.LOG].error(`[${i}]: ${e}::`,...arguments),t.backlogAdd([`[${i}]: ${e}::`,...arguments],"error")}}static report(e){if(t.getApp()){let i=t.getApp().getService("nsErrorReporter");i&&i.report(e).catch(t.error)}else t.get("production")||t.error(...arguments)}static trace(){t.get("production")||t.trace(...arguments)}static trimBackslash(t){return 0===t.indexOf("/")&&(t=t.substring(1)),"/"===t[t.length-1]&&(t=t.substring(0,t.length-1)),t}static buildURL({prefix:e,module:i,model:r,id:n,action:s}={prefix:"",module:"",model:"",id:"",action:""}){let o=["/"];return e&&o.push(encodeURIComponent(t.trimBackslash(e))),i&&o.push(encodeURIComponent(t.trimBackslash(i))),r&&o.push(encodeURIComponent(t.trimBackslash(r))),n&&o.push(encodeURIComponent(t.trimBackslash(n))),s&&o.push(encodeURIComponent(t.trimBackslash(s))),o=o.filter((function(t){return""!==t})),o.join("/").replace(/\/\//g,"/")}static capitalizeFirstLetter(t){return t.charAt(0).toUpperCase()+t.slice(1)}static lowerFirstLetter(t){return t.charAt(0).toLowerCase()+t.slice(1)}static strLengthCap(t,e=50,i="..."){return"string"==typeof t&&t.length>e?t.substr(0,e)+i:t}static escapeHtml(t){return t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")}static startApp(t){document.addEventListener("DOMContentLoaded",t)}static getApp(){return t.get("app")}static extendAppConfig(e,i){return t.deepMerge(e,i)}static absorbModule(){let e,i,r={};1==arguments.length?(r={...arguments[0]},Object.hasOwnProperty.call(arguments[0],"defaultConf")&&(e=arguments[0].defaultConf,delete r.defaultConf),Object.hasOwnProperty.call(arguments[0],"mod")&&(i=arguments[0].mod,delete r.mod)):(t.log("WARNING: absorbModule format obsoleted, use object {defaultConf, mod, services, uis, wsc, etc}"),e=arguments[0],i=arguments[1],arguments.length>2&&(r.services=arguments[2]),arguments.length>3&&(r.uis=arguments[3]),arguments.length>4&&(r.wcs=arguments[4]));for(let n in i)"manifest"!==n?"function"==typeof t.get(`absorb.${n}`)?(Object.hasOwn(r,n)||(r[n]={},t.log(`WARNING: no accamulator object provided for '${n}' collection`)),t.get(`absorb.${n}`)(r[n],i[n])):0===n.indexOf("nc")?(Object.hasOwn(e,"controllers")||(e.controllers={}),e.controllers[n]=i[n]):(Object.hasOwn(window,"notEnv")||(window.notEnv={}),window.notEnv[n]=i[n]):e=t.extendAppConfig(e,i.manifest);return e}static defineIfNotExists(t,e,i){Object.hasOwn(t,e)||(t[e]=i)}static register(e,i){t.registry[e]=i}static get(e){return Object.hasOwn(t.registry,e)?t.registry[e]:null}static moveItem(t,e,i){const r=function(e){return e<t.length&&e>-1};r(i)&&r(e)&&t.splice(i,0,t.splice(e,1)[0])}static stripProxy(e){if(null!=e&&e.isProxy){e=Array.isArray(e)?Array.from(e):Object.assign({},e);for(let i in e)Object.hasOwn(e,i)&&(e[i]=t.stripProxy(e[i]))}return e}static pipe(t,e){let i;for(let r of e)i=r(i||t);return i}static getAPI(e){return t.getManager()?.getAPI(e)??null}static setManager(e){t.MANAGER=e}static getManager(){return t.MANAGER}static getJSON(t){return fetch(t).then((function(t){return t.json()}))}static wait(t){return new Promise((function(e){setTimeout(e,1e3*t)}))}static registerWidgetEvents(e){t.getApp()&&Object.keys(e).forEach((function(i){t.getApp().on(i,e[i])}))}static navigate(e){t.getApp()&&t.getApp().getWorking("router").navigate(e)}static select(e,i,r){return e&&"object"==typeof e&&t.objHas(e,i)&&void 0!==e[i]&&null!==e[i]?e[i]:r}};function Ir(t,e,i){Object.hasOwn(t,e)||(t[e]={connection:{},router:{routes:{}},messenger:{}});let r=t[e];if(Object.hasOwn(i,"router")&&Object.hasOwn(i.router,"routes"))for(let t in i.router.routes)Object.hasOwn(r.router.routes,t)||(r.router.routes[t]={}),Object.assign(r.router.routes[t],{...i.router.routes[t]});Object.hasOwn(i,"messenger")&&Object.assign(r.messenger,{...i.messenger}),Object.hasOwn(i,"connection")&&Object.assign(r.connection,{...i.connection});for(let t of["name","getToken","logger","identity","credentials"])Object.hasOwn(i,t)&&(r[t]=i[t])}vr=_r,Ki(_r,"MANAGER",null),Ki(_r,"LOG","console"),Ki(_r,"deepMerge",kr),Ki(_r,"TZ_OFFSET",(new Date).getTimezoneOffset()/60*-1),Ki(_r,"DEV_ENV","production"),Ki(_r,"ENV_TYPE",window.NOT_ENV_TYPE??vr.DEV_ENV),Ki(_r,"NOOP",(function(){})),Ki(_r,"backlog",[]),Ki(_r,"registry",{}),_r.register("absorb.wsc",(function(t,e){if(t)for(let i in e)Ir(t,i,e[i])})),_r.register("absorb.services",(function(t,e){if(t)for(let i in e)Object.hasOwn(t,i)&&_r.logError(`services property duplication ${i}`),t[i]=e[i]})),_r.register("absorb.uis",(function(t,e){if(t)for(let i in e)Object.hasOwn(t,i)&&_r.logError(`uis property duplication ${i}`),t[i]=e[i]})),_r.register("absorb.uis",(function(t,e){if(t)for(let i in e)Object.hasOwn(t,i)&&_r.logError(`fields property duplication ${i}`),t[i]=e[i]}));var Ar=new class extends pr{constructor(){super(),this.dict={},this.helpers={};let t=this.restoreFromStorage();t&&this.set(t)}format(t,e){return br.parseSubs(t,e,this.helpers)}say(t,e=!1){try{if(_r.objHas(this.dict,t)){let i=this.dict[t],r="";return r=e?this.format(i,e):i,r}throw new Error(`Unknown locale phrase: ${t}`)}catch(e){return _r.debug(e),t}}set(t){sr.set(t),this.saveToStorage(t),this.dict=Object.assign({},{...t}),this.emit("change")}saveToStorage(t){if(window.localStorage)try{return window.localStorage.setItem("dictionary",JSON.stringify(t))}catch(t){return _r.debug(t),!1}return!1}restoreFromStorage(){if(window.localStorage)try{let t=window.localStorage.getItem("dictionary");if(t){return JSON.parse(t)}return!1}catch(t){return _r.debug(t),!1}return!1}vocabulary(){return sr}};const Sr=Ar.say.bind(Ar);var Cr=Se("<span> </span>");function Er(t,e){Zt(e,!0);const i=xi();let r=x(!1),n=Di(e,"id",3,"tagId"),s=Di(e,"title",15,"tag"),o=Di(e,"color",3,"info"),a=Di(e,"size",3,"normal"),l=Di(e,"padding",3,"normal"),c=Di(e,"bold",3,!1),u=Di(e,"right",3,!1),d=Di(e,"left",3,!1),h=Di(e,"top",3,!1),g=Di(e,"bottom",3,!1),f=Di(e,"classes",3,""),p=Di(e,"events",31,(()=>re({}))),v=Di(e,"register",19,(()=>_r.registerWidgetEvents.bind(_r))),m=Di(e,"onUpdate",3,(t=>{Object.hasOwn(t,"title")&&s(t.title)})),b=Di(e,"action",3,(()=>!0));function y(){return`tag-${n()}:update`}Ai((()=>{Object.hasOwn(p(),y())||p(p()[y()]=m(),!0),v()(p())})),Pi((()=>{U(r,re(u()||d()||h()||g()))}));var O=Ee();qe(he(O),s,(t=>{var e=Cr();e.__click=function(...t){(b()?b():void 0)?.apply(this,t)};var p=de(e);tt((()=>{ni(e,"id",`tag-${n()??""}`),ai(e,`\n  tag\n  ${(c()?"has-text-weight-bold":"")??""}\n  ${("normal"!==l()?`is-padded-${l()}`:"")??""}\n  is-${a()??""}\n  is-${o()??""}\n  ${(Gt(r)?"is-sided":"")??""}\n  ${(u()?"is-sided-right":"")??""}\n  ${(d()?"is-sided-left":"")??""}\n  ${(h()?"is-sided-top":"")??""}\n  ${(g()?"is-sided-bottom":"")??""}\n  ${f()??""}`),je(p,Ti(sr,"$LOCALE",i)[s()])})),Le(t,e)})),Le(t,O),te()}function Lr(t,e){let i=Di(e,"LC_TRUE",3,"not-node:booleans_true"),r=Di(e,"LC_FALSE",3,"not-node:booleans_false"),n=Di(e,"inverted",3,!1);const s={title:r(),color:n()?"success":"danger"},o={title:i(),color:n()?"danger":"success"};let a=j((()=>e.value?o:s));Er(t,Ri((()=>Gt(a))))}ke(["click"]);var Tr=Se('<span class="label"> <!></span>');function xr(t,e){Zt(e,!0);let i=Di(e,"values",19,(()=>[])),r=Di(e,"inverted",3,!1),n=Di(e,"componentConstructor",3,Lr),s=x(re([]));Ai((()=>{"boolean"==typeof i()?U(s,re([{value:i()}])):Array.isArray(i())&&(i().every((t=>"boolean"==typeof t))?U(s,re(i().map((t=>({value:t}))))):U(s,re([...i()])))}));var o=Ee();qe(he(o),(()=>Gt(s).length),(t=>{var e=Ee();Je(he(e),17,(()=>Gt(s)),Ge,((t,e)=>{var i=Ee();const s=j(n);var o=he(i),a=j((()=>r()||Gt(e).inverted));ri(o,(()=>Gt(s)),((t,i)=>{i(t,Ri((()=>Gt(e)),{get inverted(){return Gt(a)}}))})),Le(t,i)})),Le(t,e)})),Le(t,o),te()}function Nr(t,e){e(!e())}async function Fr(t,e,i,r,n,s,o){try{await navigator.clipboard.writeText(e()),i()&&(U(r,!0),Gt(n).dataset.tooltip=s(),setTimeout((()=>{U(r,!1),Gt(n).removeAttribute("data-tooltip")}),o()))}catch(t){console.error("Failed to copy: ",t)}}var Mr=Se("<span><i></i></span>"),Rr=Se('<span class="icon is-small is-right is-clickable is-vertical-middle"><i></i></span>'),Ur=Se("<span> </span> <!> <!>",1);ke(["click"]);var Dr=Se("<span> </span>");function Pr(t,e){Zt(e,!0);const i=xi();let r=Ti(s(),"$state",i)(!1),n=Di(e,"id",3,"tagId"),s=Di(e,"state",15,"light"),o=Di(e,"size",3,"normal"),a=Di(e,"labels",19,(()=>({black:"black",dark:"dark",light:"light",white:"white",primary:"primary",link:"link",info:"info",success:"success",warning:"warning",danger:"danger"}))),l=Di(e,"classes",3,"mx-1"),c=Di(e,"padding",3,"normal"),u=Di(e,"bold",3,!1),d=Di(e,"right",3,!1),h=Di(e,"left",3,!1),g=Di(e,"top",3,!1),f=Di(e,"bottom",3,!1),p=Di(e,"events",31,(()=>re({}))),v=Di(e,"register",19,(()=>_r.registerWidgetEvents.bind(_r))),m=Di(e,"onUpdate",3,(t=>{Object.hasOwn(t,"state")&&s(t.state)}));function b(){return`indicator-${n()}:update`}Ai((()=>{Object.hasOwn(p(),b())||p(p()[b()]=m(),!0),v()(p())})),Pi((()=>{r=d()||h()||g()||f()}));var y=Dr(),O=de(y);tt((()=>{ai(y,`tag\nis-${o()??""}\n${(u()?"has-text-weight-bold":"")??""}\n${("normal"!==c()?`is-padded-${c()}`:"")??""}\n${(r?"is-sided":"")??""}\n${(d()?"is-sided-right":"")??""}\n${(h()?"is-sided-left":"")??""}\n${(g()?"is-sided-top":"")??""}\n${(f()?"is-sided-bottom":"")??""}\n  is-${s()??""} ${l()??""}\n  `),je(O,a()[s()])})),Le(t,y),te()}var jr=Se('<div><span class="title"> </span></div>');function Wr(t,e){Zt(e,!0);const i=xi();let r=Di(e,"loading",3,!1),n=Di(e,"size",3,"container"),s=Di(e,"title",3,"Waiting...");var o=Ee();qe(he(o),(()=>"hidden"!==n()),(t=>{var e=jr(),o=de(e),a=de(o);tt((()=>{ai(e,`${("page"===n()?"pageloader":"containerloader")??""} ${(r()?"is-active":"")??""}`),je(a,Ti(sr,"$LOCALE",i)[s()])})),Le(t,e)})),Le(t,o),te()}var Br=Se("<option> </option>");function zr(t,e){Zt(e,!0);const i=xi();var r=Br(),n={},s=de(r);tt((()=>{n!==(n=e.value)&&(r.value=null==(r.__value=e.value)?"":e.value),r.selected=e.selected,je(s,Ti(sr,"$LOCALE",i)[e.title])})),Le(t,r),te()}var Vr=Se("<span> </span>"),qr=Se("<p><!></p>");function Hr(t,e){Zt(e,!0);const i=xi();let r=Di(e,"errors",19,(()=>[])),n=Di(e,"show",3,!1),s=Di(e,"classes",3,""),o=Di(e,"id",3,"errors-list");var a=Ee();qe(he(a),(()=>Array.isArray(r())&&r().length),(t=>{var e=qr();qe(de(e),n,(t=>{var e=Ee();Je(he(e),17,r,Ge,((t,e)=>{var r=Vr(),n=de(r);tt((()=>je(n,Ti(sr,"$LOCALE",i)[Gt(e)]))),Le(t,r)})),Le(t,e)}),(t=>{Le(t,Ce(" "))})),tt((()=>{ai(e,`help ${s()??""}`),ni(e,"id",o())})),Le(t,e)})),Le(t,a),te()}var Kr=Se('<span class="mr-2"> </span>'),Gr=Se('<span class="mr-2"> </span>'),Jr=Se('<span class="icon is-small is-left"><i></i></span>'),Yr=Se('<i class="fas fa-check"></i>'),Qr=Se('<i class="fas fa-exclamation-triangle"></i>'),Xr=Se('<span class="icon is-small is-right"><!></span>'),Zr=Se("<div><select><!><!></select></div> <!> <!>",1),tn=Se("<div><!></div> <!>",1);function en(t,e){Zt(e,!0);const i=xi(),r=()=>Ti(sr,"$LOCALE",i);let n=Si(),s=Di(e,"inputStarted",15,!1),o=Di(e,"value",15,""),a=Di(e,"variants",19,(()=>[])),l=Di(e,"placeholder",3,""),c=Di(e,"emptyValueTitle",3,""),u=Di(e,"fieldname",3,"select"),d=Di(e,"icon",3,!1),h=Di(e,"required",3,!0),g=Di(e,"readonly",3,!1),f=Di(e,"multiple",3,!1),p=Di(e,"size",3,8),v=Di(e,"valid",3,!0),m=Di(e,"validated",3,!1),b=Di(e,"errors",3,!1),y=Di(e,"formErrors",3,!1);Di(e,"formLevelError",3,!1);let O,$=x(re([]));function w(t){return Array.isArray(o())&&f()?o().indexOf(t.id)>-1:!!o()&&o()==t.id}function k(t){let e={field:u(),value:t.currentTarget.value};return O===e.value||Array.isArray(e.value)&&_r.compareTwoArrays(O,e.value)||(f()?(o(Array.from(t.target.selectedOptions).map((t=>t.value))),o().indexOf(Gi.CLEAR_MACRO)>-1&&o([]),e.value=o()):e.value===Gi.CLEAR_MACRO?o(""):o(e.value),s(!0),n("change",e)),!0}function _(t){let e={field:u(),value:t.currentTarget.value};return f()?(o(Array.from(t.target.selectedOptions).map((t=>t.value))),o().indexOf(Gi.CLEAR_MACRO)>-1&&o([]),e.value=o()):e.value===Gi.CLEAR_MACRO?o(""):o(e.value),s(!0),O=e.value,n("change",e),!0}let I,A,S,C=j((()=>(d()?" has-icons-left ":"")+" has-icons-right "));Pi((()=>{I=[].concat(b()?b():[],y()?y():[])})),Pi((()=>{A=!(m()&&v())&&s()})),Pi((()=>{S=!0!==v()&&s()?Gi.CLASS_ERR:Gi.CLASS_OK}));let E=j((()=>f()?" is-multiple ":""));Pi((()=>{o(),U($,re(Array.isArray(a())?a().filter(w):[]))}));var L=tn(),T=he(L);qe(de(T),g,(t=>{var e=Ee();qe(he(e),o,(t=>{var e=Ee();Je(he(e),17,(()=>Gt($)),Ge,((t,e)=>{var i=Kr(),n=de(i);tt((()=>je(n,r()[Gt(e).title]))),Le(t,i)})),Le(t,e)}),(t=>{var e=Gr(),i=de(e);tt((()=>je(i,r()[c()]))),Le(t,e)})),Le(t,e)}),(t=>{var e=Zr(),i=he(e),r=de(i);r.__input=_;var n=de(r);qe(n,(()=>l().length>0),(t=>{var e=Ee();qe(he(e),o,(t=>{zr(t,{get value(){return Gi.CLEAR_MACRO},get title(){return l()}})}),(t=>{zr(t,{get value(){return Gi.CLEAR_MACRO},selected:"selected",get title(){return l()}})})),Le(t,e)})),Je(ge(n),17,a,Ge,((t,e)=>{var i=Ee();qe(he(i),f,(t=>{var i=j((()=>o()&&o().indexOf(Gt(e).id)>-1));zr(t,{get value(){return Gt(e).id},get selected(){return Gt(i)},get title(){return Gt(e).title}})}),(t=>{var i=j((()=>o()==Gt(e).id));zr(t,{get value(){return Gt(e).id},get selected(){return Gt(i)},get title(){return Gt(e).title}})})),Le(t,i)}));var s=ge(i,2);qe(s,d,(t=>{var e=Jr(),i=de(e);tt((()=>ai(i,`fas fa-${d()??""}`))),Le(t,e)})),qe(ge(s,2),(()=>!0===m()),(t=>{var e=Xr();qe(de(e),(()=>!0===v()),(t=>{Le(t,Yr())}),(t=>{var e=Ee();qe(he(e),(()=>!1===v()),(t=>{Le(t,Qr())}),null,!0),Le(t,e)})),Le(t,e)})),tt((()=>{ai(i,`select ${S??""} ${Gt(E)??""}`),ni(r,"id",`form-field-select-${u()??""}`),ni(r,"name",u()),r.readOnly=g(),r.required=h(),r.multiple=f(),ni(r,"size",!!f()&&p())})),we("blur",r,k),Le(t,e)})),Hr(ge(T,2),{get errors(){return I},set errors(t){I=t},get show(){return A},set show(t){A=t},get classes(){return S},set classes(t){S=t},get id(){return`input-field-helper-${u()??""}`}}),tt((()=>ai(T,`control ${Gt(C)??""}`))),Le(t,L),te()}function rn(t,e,i,r){return t.stopPropagation(),e("click",{event:t,value:i.value}),r()(t,i.value)}ke(["input"]);var nn=Se('<span class="icon"><i></i></span>'),sn=Se("<span> </span>"),on=Se('<span class="icon"><i></i></span>'),an=Se("<!> <!> <!>",1),ln=Se("<button><!></button>");function cn(t,e){Zt(e,!0);const i=xi(),r=()=>Ti(sr,"$LOCALE",i),n=Si();let s=Di(e,"title",3,""),o=Di(e,"light",3,!1),a=Di(e,"loading",3,!1),l=Di(e,"raised",3,!1),c=Di(e,"outlined",3,!1),u=Di(e,"inverted",3,!1),d=Di(e,"rounded",3,!1),h=Di(e,"disabled",3,!1),g=Di(e,"state",3,""),f=Di(e,"type",3,""),p=Di(e,"color",3,""),v=Di(e,"size",3,""),m=Di(e,"classes",3,""),b=Di(e,"icon",3,!1),y=Di(e,"iconSide",3,"right"),O=Di(e,"action",3,(()=>!0));var $=ln();$.__click=[rn,n,e,O],qe(de($),(()=>e.children),(t=>{var i=Ee();ii(he(i),(()=>e.children)),Le(t,i)}),(t=>{var e=Ee();qe(he(e),b,(t=>{var e=an(),i=he(e);qe(i,(()=>"left"===y()),(t=>{var e=nn(),i=de(e);tt((()=>ai(i,`fas fa-${b()??""} ${(v()?`is-${v()}`:"")??""}`))),Le(t,e)}));var n=ge(i,2);qe(n,s,(t=>{var e=sn(),i=de(e);tt((()=>je(i,r()[s()]))),Le(t,e)})),qe(ge(n,2),(()=>"right"===y()),(t=>{var e=on(),i=de(e);tt((()=>ai(i,`fas fa-${b()??""} ${(v()?`is-${v()}`:"")??""}`))),Le(t,e)})),Le(t,e)}),(t=>{var e=Ce();tt((()=>je(e,r()[s()]))),Le(t,e)})),Le(t,e)})),tt((()=>{$.disabled=h(),ni($,"type",f()?f():""),ai($,`\n  button\n  ${m()??""}\n  ${(g()?`is-${g()}`:"")??""}\n  ${(u()?"is-inverted":"")??""}\n  ${(c()?"is-outlined":"")??""}\n  ${(l()?"is-raised":"")??""}\n  ${(d()?"is-rounded":"")??""}\n  ${(o()?"is-light":"")??""}\n  ${(a()?"is-loading":"")??""}\n  ${(p()?`is-${p()}`:"")??""}\n  ${(v()?`is-${v()}`:"")??""}\n  `)})),Le(t,$),te()}ke(["click"]);var un=Se("<div></div>");function dn(t,e){Zt(e,!0);const i=Si();let r=Di(e,"values",19,(()=>[])),n=Di(e,"centered",3,!1),s=Di(e,"right",3,!1),o=Di(e,"classes",3,""),a=Di(e,"buttonComponent",3,cn),l=Di(e,"action",3,(t=>{i("click",t)}));var c=un();Je(c,21,r,(t=>t.id),((t,i)=>{var r=Ee();const n=j(a);var s=he(r),o=j((()=>Gt(i).action?Gt(i).action:l()));ri(s,(()=>Gt(n)),((t,r)=>{r(t,Ri((()=>Gt(i)),{get value(){return Gt(i).value},set value(t){Gt(i).value=t},get action(){return Gt(o)},$$events:{click(t){Ii.call(this,e,t)}}}))})),Le(t,r)})),tt((()=>ai(c,`buttons has-addons ${(n()?"is-centered":"")??""} ${(s()?"is-right":"")??""} ${o()??""}`))),Le(t,c),te()}var hn=Se('<div><div class="column"><!></div> <div class="column"><!></div> <div class="column"><!></div></div>');function gn(t,e){let i=Di(e,"classes",3,""),r=Di(e,"left",19,(()=>[])),n=Di(e,"center",19,(()=>[])),s=Di(e,"right",19,(()=>[]));var o=hn(),a=de(o);dn(de(a),{get values(){return r()}});var l=ge(a,2);dn(de(l),{get values(){return n()},centered:!0}),dn(de(ge(l,2)),{get values(){return s()},right:!0}),tt((()=>ai(o,`columns ${i()??""}`))),Le(t,o)}function fn(t,e){Zt(e,!0);const i=xi(),r=Si();let n=Di(e,"title",3,""),s=Di(e,"light",3,!1),o=Di(e,"loading",3,!1),a=Di(e,"raised",3,!1),l=Di(e,"outlined",3,!1),c=Di(e,"inverted",3,!1),u=Di(e,"rounded",3,!1),d=Di(e,"disabled",3,!1),h=Di(e,"state",3,""),g=Di(e,"type",3,""),f=Di(e,"color",3,""),p=Di(e,"size",3,""),v=Di(e,"classes",3,""),m=Di(e,"icon",3,!1),b=Di(e,"iconSide",3,"right"),y=Di(e,"uiOff",3,(()=>({color:""}))),O=Di(e,"uiOn",3,(()=>({color:"success"}))),$=Di(e,"action",3,(()=>!w())),w=Di(e,"selected",15,!1);let k=Ti(h(),"$state",i)();Pi((()=>{k&&(w()?k.$set(O()()):k.$set(y()()))})),wi(cn(t,{get title(){return n()},get light(){return s()},get loading(){return o()},get raised(){return a()},get outlined(){return l()},get inverted(){return c()},get rounded(){return u()},get disabled(){return d()},get state(){return h()},get type(){return g()},get color(){return f()},get size(){return p()},get classes(){return v()},get icon(){return m()},get iconSide(){return b()},get value(){return e.value},$$events:{click:function(t){w($()(t,e.value,w())),r("click",{value:e.value,selected:w()}),r("change",{value:e.value,selected:w()})}}}),(t=>k=t),(()=>k)),te()}var pn=Se("<div></div>");function vn(t,e){function i(t,e){let i=c()-t;if(i)for(let t in r())if(t!==e&&!r()[t].selected&&(r(r()[t].selected=!0,!0),i-=1,!i))break}Zt(e,!0),Si(),Ai((()=>{c()&&i(0,-1)}));let r=Di(e,"values",31,(()=>re([]))),n=Di(e,"centered",3,!1),s=Di(e,"right",3,!1),o=Di(e,"classes",3,""),a=Di(e,"buttonComponent",3,fn),l=Di(e,"action",3,((t,e,n)=>{let s=!n;const o=r().indexOf((t=>t.value===e)),a=r().filter((t=>t.selected)).length+(s?1:-1);return c()&&a<c()&&(i(a,o),r(r())),u()&&u()<a&&(!function(t,e){let i=t-u();if(i)for(let t in r())if(t!==e&&r()[t].selected&&(r(r()[t].selected=!1,!0),i-=1,!i))break}(a,o),r(r())),s})),c=Di(e,"min",3,0),u=Di(e,"max",3,100);var d=pn();return Je(d,21,r,(t=>t.id),((t,i)=>{var r=Ee();const n=j(a);var s=he(r),o=j((()=>Gt(i).action?Gt(i).action:l()));ri(s,(()=>Gt(n)),((t,r)=>{r(t,Ri((()=>Gt(i)),{get value(){return Gt(i).value},set value(t){Gt(i).value=t},get selected(){return Gt(i).selected},set selected(t){Gt(i).selected=t},get action(){return Gt(o)},$$events:{click(t){Ii.call(this,e,t)},change(t){Ii.call(this,e,t)}}}))})),Le(t,r)})),tt((()=>ai(d,`buttons has-addons ${(n()?"is-centered":"")??""} ${(s()?"is-right":"")??""} ${o()??""}`))),Le(t,d),te({selectAll:function(){r().forEach((t=>{t.selected=!0})),r(r())},deselectAll:function(){r().forEach((t=>{t.selected=!1})),r(r())}})}var mn=Object.freeze({__proto__:null,UIButton:cn,UIButtonSwitch:fn,UIButtons:dn,UIButtonsRow:gn,UIButtonsSwitchers:vn});const bn="ok",yn={SHORT:500,NORMAL:1500,LONG:5e3},On=1500;var $n=Se('<div class="field has-addons"><!></div> <div class="control"><!></div>',1);var wn=Se('<div class="control"><!></div>');var kn=Se("<progress> </progress>");var _n=Se("<div><!> <!> <!></div>");var In=Se("<!> <!>",1);function An(t,e){Zt(e,!0);const i=xi(),r=()=>Ti(sr,"$LOCALE",i);let n=Di(e,"id",19,(()=>`title-${Math.random()}`)),s=Di(e,"title",3,""),o=Di(e,"size",3,1),a=Di(e,"spaced",3,!1),l=Di(e,"align",3,"left");let c=j((()=>e.subsize?e.subsize:parseInt(o())<6?parseInt(o())+1:o())),u=j((()=>a()?"is-spaced":"")),d=j((()=>`<h${o()} id="${n()}" style="text-align: ${l()};" class="title ${Gt(u)} is-${o()}">${r()[s()]}</h${o()}>`)),h=j((()=>`<h${Gt(c)} id="${n()}" style="text-align: ${l()};" class="subtitle is-${Gt(c)}">${r()[e.subtitle]}</h${Gt(c)}>`));var g=In(),f=he(g);return qe(f,s,(t=>{var e=Ee();ti(he(e),(()=>Gt(d))),Le(t,e)})),qe(ge(f,2),(()=>e.subtitle),(t=>{var e=Ee();ti(he(e),(()=>Gt(h))),Le(t,e)})),Le(t,g),te({scrollToTop:(t=Gi.SCROLL_OPTIONS)=>{setTimeout((()=>{document.getElementById(n()).scrollIntoView(t)}),100)}})}var Sn=Se('<article class="media"><figure class="media-left"><p class="image is-32x32"><img></p></figure> <div class="media-content"><div class="content"><p><strong> </strong> <small>@</small> <strong> </strong></p></div></div></article>');function Cn(t,e,i,r,n){let s={field:e(),value:i()};return r(!0),n("change",s),!0}function En(t,e,i,r){let n={field:e(),value:t.currentTarget.value};return i(!0),r("change",n),!0}var Ln=Se("<p> </p>"),Tn=Se('<span class="icon is-small is-left"><i></i></span>'),xn=Se('<i class="fas fa-check"></i>'),Nn=Se('<i class="fas fa-exclamation-triangle"></i>'),Fn=Se('<span class="icon is-small is-right"><!></span>'),Mn=Se('<input type="text"> <!> <!>',1),Rn=Se("<div><!></div> <!>",1);function Un(t,e){Zt(e,!0);const i=xi();let r,n,s=Si(),o=Di(e,"inputStarted",15,!1),a=Di(e,"value",15,""),l=Di(e,"placeholder",3,""),c=Di(e,"fieldname",3,"textfield"),u=Di(e,"icon",3,!1),d=Di(e,"required",3,!0),h=Di(e,"disabled",3,!1),g=Di(e,"readonly",3,!1),f=Di(e,"valid",3,!0),p=Di(e,"validated",3,!1),v=Di(e,"errors",3,!1),m=Di(e,"formErrors",3,!1),b=Di(e,"formLevelError",3,!1),y=j((()=>(u()?" has-icons-left ":"")+" has-icons-right "));Pi((()=>{r=[].concat(v()?v():[],m()?m():[])})),Pi((()=>{n=!(p()&&f())&&o()}));let O,$=j((()=>!1===f()||b()));Pi((()=>{O=!0!==f()&&o()?Gi.CLASS_ERR:Gi.CLASS_OK}));var w=Rn(),k=he(w);qe(de(k),g,(t=>{var e=Ln(),i=de(e);tt((()=>je(i,a()))),Le(t,e)}),(t=>{var e=Mn(),r=he(e);ai(r,`input ${O??""}`),r.__change=[Cn,c,a,o,s],r.__input=[En,c,o,s];var n=ge(r,2);qe(n,u,(t=>{var e=Tn(),i=de(e);tt((()=>ai(i,`fas fa-${u()??""}`))),Le(t,e)})),qe(ge(n,2),(()=>!0===p()),(t=>{var e=Fn();qe(de(e),(()=>!0===f()),(t=>{Le(t,xn())}),(t=>{var e=Ee();qe(he(e),(()=>!1===f()),(t=>{Le(t,Nn())}),null,!0),Le(t,e)})),Le(t,e)})),tt((()=>{ni(r,"id",`form-field-textfield-${c()??""}`),ni(r,"name",c()),ni(r,"invalid",Gt($)),r.disabled=h(),r.required=d(),r.readOnly=g(),ni(r,"placeholder",Ti(sr,"$LOCALE",i)[l()]),ni(r,"autocomplete",c()),ni(r,"aria-controls",`input-field-helper-${c()??""}`),ni(r,"aria-describedby",`input-field-helper-${c()??""}`)})),mi(r,a),Le(t,e)})),Hr(ge(k,2),{get errors(){return r},set errors(t){r=t},get show(){return n},set show(t){n=t},get classes(){return O},set classes(t){O=t},get id(){return`input-field-helper-${c()??""}`}}),tt((()=>ai(k,`control ${Gt(y)??""}`))),Le(t,w),te()}ke(["change","input"]);var Dn=Se('<div class="columns"><div class="column"><div class="field"><!></div></div></div>');function Pn(t,e){Zt(e,!0);const i=xi(),r=Si();let n=Di(e,"placeholder",19,(()=>Ti(sr,"$LOCALE",i)["not-node:field_search_placeholder"])),s=Di(e,"term",15,"");var o=Dn(),a=de(o),l=de(a);Un(de(l),{get value(){return s()},set value(t){s(t)},get placeholder(){return n()},fieldname:"searchTermInput",icon:"magnifying-glass",$$events:{change:function({detail:t}){r("termChange",t)}}}),Le(t,o),te()}var jn=Object.freeze({__proto__:null,UIBoolean:Lr,UIBooleanLabeled:function(t,e){Zt(e,!0);const i=xi();let r=Di(e,"inverted",3,!1);var n=Tr(),s=de(n);Lr(ge(s),{get value(){return e.value},get inverted(){return r()}}),tt((()=>je(s,`${Ti(sr,"$LOCALE",i)[e.label]??""}: `))),Le(t,n),te()},UIBooleans:xr,UICensored:function(t,e){let i=Di(e,"hidden",15,!0),r=Di(e,"showable",3,!0),n=Di(e,"copiable",3,!0),s=Di(e,"copyIcon",3,"copy"),o=Di(e,"showIcon",3,"eye"),a=Di(e,"hideIcon",3,"eye-slash"),l=Di(e,"maxLength",3,20),c=Di(e,"shadowClass",3,"has-background-primary-90"),u=Di(e,"tooltip",3,!0),d=Di(e,"tooltipTTL",3,2e3),h=Di(e,"tooltipText",3,"Скопировано в буфер"),g=Di(e,"tooltipClass",3,"has-tooltip-info"),f=Di(e,"value",3,""),p=x(!1),v=j((()=>u()&&Gt(p))),m=x(void 0);var b=Ur(),y=he(b),O=de(y),$=ge(y,2);qe($,n,(t=>{var e=Mr();e.__click=[Fr,f,u,p,m,h,d];var i=de(e);wi(e,(t=>U(m,t)),(()=>Gt(m))),tt((()=>{ai(e,"icon is-small is-right is-clickable "+(Gt(v)?` ${g()} `:"")+" is-vertical-middle"),ai(i,`fas fa-${s()??""}`)})),Le(t,e)})),qe(ge($,2),r,(t=>{var e=Rr();e.__click=[Nr,i];var r=de(e);tt((()=>ai(r,`fas fa-${(i()?o():a())??""}`))),Le(t,e)})),tt((()=>{ai(y,(i()?"is-censored "+c():"")+" is-vertical-middle "),ni(y,"style",`display:inline-block; width: ${l()}rem; height: var(--bulma-size-medium); overflow-x:hidden;`),je(O,i()?"":f())})),Le(t,b)},UIErrorsList:Hr,UIIndicator:Pr,UILoader:Wr,UIProgress:function(t,e){let i=Di(e,"max",3,100),r=Di(e,"color",3,""),n=Di(e,"size",3,""),s=Di(e,"classes",3,"");var o=kn(),a=de(o);tt((()=>{ai(o,`\n  progress\n  ${s()??""}\n  ${(r()?`is-${r()}`:"")??""}\n  ${(n()?`is-${n()}`:"")??""}`),function(t,e){var i=t.__attributes??={};i.value!==(i.value=e)&&(t.value!==e||0===e&&"PROGRESS"===t.nodeName)&&(t.value=e)}(o,e.value),ni(o,"max",i()),je(a,`${e.value??""}%`)})),Le(t,o)},UISelectFromModelOnDemandInline:function(t,e){Zt(e,!0);const i=Si();let r,n=Di(e,"inputStarted",3,!1),s=Di(e,"variants",31,(()=>re([]))),o=Di(e,"placeholder",3,"empty select item"),a=Di(e,"fieldname",3,"selectFromModel"),l=Di(e,"modelName",3,""),c=Di(e,"actionName",3,""),u=Di(e,"actionFilter",19,(()=>({}))),d=Di(e,"actionSorter",19,(()=>({}))),h=Di(e,"actionPager",19,(()=>({}))),g=Di(e,"actionSearch",3,void 0),f=Di(e,"optionId",3,":_id"),p=Di(e,"optionTitle",3,":title"),v=Di(e,"icon",3,!1),m=Di(e,"required",3,!0),b=Di(e,"readonly",3,!1),y=Di(e,"multiple",3,!1),O=Di(e,"size",3,8),$=Di(e,"valid",3,!0),w=Di(e,"validated",3,!1),k=Di(e,"errors",15,!1),_=Di(e,"formErrors",3,!1),I=Di(e,"formLevelError",3,!1),A=j((()=>!0)),S=x("hidden"),C=[];function E({detail:t}){r=C.find((e=>br.get(f(),e)===t.value))}Ai((async()=>{if(l()&&c()&&u()){const t=_r.getApp().getModel(l()).setFilter(u()).setSorter(d()).setPager(h()).setSearch(g()),e=await t["$"+c()]();e.status===bn?(C=e.result,s(C.map((t=>({id:br.get(f(),t),title:br.get(p(),t)}))))):k(result.errors||[result.message])}}));const L={add:{color:"primary",icon:"plus",action(){U(S,"show")}},resolve:{icon:"check",color:"primary",action(){U(S,"hidden"),i("resolve",r)}},reject:{icon:"close",color:"danger",action(){U(S,"hidden"),i("reject")}}};var T=Ee();qe(he(T),(()=>"hidden"===Gt(S)),(t=>{cn(t,Ri((()=>L.add)))}),(t=>{var i=Ee();qe(he(i),(()=>"show"==Gt(S)),(t=>{var i=$n(),r=he(i);en(de(r),{get inputStarted(){return n()},get value(){return e.value},get variants(){return s()},get placeholder(){return o()},get fieldname(){return a()},get icon(){return v()},get required(){return m()},get readonly(){return b()},get disabled(){return Gt(A)},get multiple(){return y()},get size(){return O()},get valid(){return $()},get validated(){return w()},get errors(){return k()},get formErrors(){return _()},get formLevelError(){return I()},$$events:{change:E}});var l=de(ge(r,2)),c=j((()=>[L.resolve,L.reject]));dn(l,{get values(){return Gt(c)}}),Le(t,i)}),null,!0),Le(t,i)})),Le(t,T),te()},UISelectFromModelWithSearchModal:function(t,e){Zt(e,!0);let i=Si(),r=Di(e,"value",15),n=Di(e,"inputStarted",15,!1),s=Di(e,"icon",3,!1),o=Di(e,"fieldname",3,""),a=Di(e,"readonly",3,!1),l=Di(e,"serviceName",3,""),c=Di(e,"serviceOpenSelectorMethod",3,"openSelector"),u=Di(e,"serviceLoadDataMethod",3,"loadData"),d=Di(e,"modelData",15,null),h=Di(e,"loading",15,!1),g=Di(e,"selectedModelTitleFormatter",3,(t=>`${t._id}`)),f=Di(e,"loadingLabel",3,"not-node:loading_label"),p=Di(e,"isEmptyLabel",3,"not-node:field_value_is_empty_placeholder");function v(){if(!l())throw new Error("serviceName is not set");return _r.getApp().getService(l())}function m(){if(!c())throw new Error("serviceOpenSelectorMethod is not set");v()[c()]().then((t=>(r(t._id),d(t),r()))).then((t=>{n(!0),i("change",{field:o(),value:t})})).catch((t=>{_r.report(t)}))}Ai((()=>{!async function(){try{r()&&(h(!0),d(await v()[u()](r())))}catch(t){_r.report(t)}finally{h(!1)}}()}));const b=[{id:1,action:m,icon:s(),color:"warning"},{id:2,action:function(){r(void 0),d(null),i("change",{field:o(),value:r()})},icon:"times",color:"danger"}];function y(){return h()?{disabled:!0,loading:h(),title:f()}:d()?{disabled:a(),action:m,title:g()(d())}:{disabled:!0,title:p()}}let O=x(re([]));Pi((()=>{r()?U(O,re([y(),...a()?[]:b])):U(O,re([y(),...a()?[]:[b[0]]]))}));var $=wn();dn(de($),{get values(){return Gt(O)},classes:"is-no-flex-wrap"}),Le(t,$),te()},UIShowOneFromList:function(t,e){Zt(e,!0);const i=t=>t[s()]===e.id;let r=Di(e,"values",19,(()=>[])),n=Di(e,"active",15),s=Di(e,"idFieldName",3,"_id"),o=Di(e,"filter",3,i);Pi((()=>{n(Array.isArray(r())&&r().length&&void 0!==e.id?r().find(o()||i):void 0)}));var a=Ee();qe(he(a),n,(t=>{var i=Ee();ri(he(i),(()=>e.UIComponent),((t,e)=>{e(t,Ri(n))})),Le(t,i)}),(t=>{var i=Ee();qe(he(i),(()=>e.UIPlaceholder),(t=>{var i=Ee();ri(he(i),(()=>e.UIPlaceholder),((t,e)=>{e(t,{})})),Le(t,i)}),null,!0),Le(t,i)})),Le(t,a),te()},UISimpleSearchInput:Pn,UITag:Er,UITagValue:function(t,e){Zt(e,!0);let i=Di(e,"id",3,"taggedValueId"),r=Di(e,"actions",19,(()=>[])),n=Di(e,"classes",3,""),s=Di(e,"actionsGroupContructor",3,dn),o=Di(e,"actionsGroupProps",19,(()=>({}))),a=Di(e,"readonly",3,!1);var l=_n(),c=de(l);qe(c,(()=>e.title),(t=>{Er(t,Ri((()=>e.title)))}));var u=ge(c,2);qe(u,(()=>e.value),(t=>{Er(t,Ri((()=>e.value)))})),qe(ge(u,2),(()=>!a()&&r()&&r().length),(t=>{var e=Ee();const i=j(s);ri(he(e),(()=>Gt(i)),((t,e)=>{e(t,Ri({get values(){return r()}},o))})),Le(t,e)})),tt((()=>{ai(l,`tags has-addons ${n()??""}`),ni(l,"id",i())})),Le(t,l),te()},UITitle:An,UIUserCard:function(t,e){Zt(e,!0);let i=Di(e,"id",3,"userCard"),r=Di(e,"image",3,"https://bulma.io/images/placeholders/32x32.png"),n=Di(e,"username",15,"John Doe"),s=Di(e,"role",15,"admin"),o=Di(e,"events",31,(()=>re({}))),a=Di(e,"register",19,(()=>_r.registerWidgetEvents)),l=Di(e,"onUpdate",3,(t=>{Object.hasOwn(t,"username")&&n(t.username),Object.hasOwn(t,"role")&&s(t.role)}));function c(){return`usercard-${i()}`}function u(){return`${c()}:update`}Ai((()=>{Object.hasOwn(o(),u())||o(o()[u()]=l(),!0),a()(o())}));var d=Sn();tt((()=>ni(d,"id",c())));var h=de(d),g=de(h),f=de(g),p=de(ge(h,2)),v=de(p),m=de(v),b=de(m),y=de(ge(m,4));tt((()=>{ni(f,"src",r()),ni(f,"alt",n()),je(b,n()),je(y,s())})),Le(t,d),te()}});function Wn(t){const e=t-1;return e*e*e+1}function Bn(t,{from:e,to:i},r={}){var n=getComputedStyle(t),s=function(t){if("currentCSSZoom"in t)return t.currentCSSZoom;var e=t,i=1;for(;null!==e;)i*=+getComputedStyle(e).zoom,e=e.parentElement;return i}(t),o="none"===n.transform?"":n.transform,[a,l]=n.transformOrigin.split(" ").map(parseFloat),c=e.width/i.width,u=e.height/i.height,d=(e.left+c*a-(i.left+a))/s,h=(e.top+u*l-(i.top+l))/s,{delay:g=0,duration:f=t=>120*Math.sqrt(t),easing:p=Wn}=r;return{delay:g,duration:"function"==typeof f?f(Math.sqrt(d*d+h*h)):f,easing:p,css:(t,e)=>`transform: ${o} scale(${t+e*c}, ${t+e*u}) translate(${e*d}px, ${e*h}px);`}}L=!0;const zn=t=>t;function Vn(t,{delay:e=0,duration:i=400,easing:r=zn}={}){const n=+getComputedStyle(t).opacity;return{delay:e,duration:i,easing:r,css:t=>"opacity: "+t*n}}var qn=Se('<option selected class="svelte-75ckfb"> </option>'),Hn=Se('<option selected class="svelte-75ckfb"> </option>'),Kn=Se('<div class="tags has-addons svelte-75ckfb"><span class="tag svelte-75ckfb"> </span> <span class="tag is-delete svelte-75ckfb"></span></div>'),Gn=Se('<div class="svelte-75ckfb"><!></div>'),Jn=Se('<span class="autocomplete-clear-button svelte-75ckfb"><!></span>'),Yn=Se('<div class="autocomplete-list-item svelte-75ckfb"><!></div>'),Qn=Se('<div class="autocomplete-list-item-no-results svelte-75ckfb"> </div>'),Xn=Se("<!> <!> <!>",1),Zn=Se('<div class="autocomplete-list-item-loading svelte-75ckfb"><!></div>'),ts=Se('<div class="autocomplete-list-item-create svelte-75ckfb"><!></div>'),es=Se('<div class="autocomplete-list-item-no-results svelte-75ckfb"><!></div>'),is=Se('<div><select class="svelte-75ckfb"><!></select> <div class="input-container svelte-75ckfb"><!> <input> <!></div> <div><!></div></div>');function rs(t,e){const i=Fi(e,["children","$$slots","$$events","$$legacy"]),r=Fi(i,["highlightFilter","items","searchFunction","labelFieldName","keywordsFieldName","valueFieldName","labelFunction","keywordsFunction","valueFunction","keywordsCleanFunction","textCleanFunction","beforeChange","onChange","onFocus","onBlur","onCreate","selectFirstIfEmpty","minCharactersToSearch","maxItemsToShowInList","multiple","create","ignoreAccents","matchAllKeywords","sortByMatchedKeywords","itemFilterFunction","itemSortFunction","lock","delay","localFiltering","localSorting","cleanUserText","lowercaseKeywords","closeOnBlur","orderableSelection","hideArrow","showClear","clearText","showLoadingIndicator","noResultsText","loadingText","moreItemsText","createText","placeholder","className","inputClassName","inputId","name","selectName","selectId","title","html5autocomplete","autocompleteOffValue","readonly","dropdownClassName","disabled","noInputStyles","required","debug","tabindex","selectedItem","value","highlightedItem","text"]);Zt(e,!1);const n=F(),o=F(),a=F(),l=F();let c=Di(e,"items",28,(()=>[])),u=Di(e,"searchFunction",8,!1),d=Di(e,"labelFieldName",8,void 0),f=Di(e,"keywordsFieldName",24,d),p=Di(e,"valueFieldName",8,void 0),v=Di(e,"labelFunction",8,(function(t){return null==t?"":d()?t[d()]:t})),b=Di(e,"keywordsFunction",8,(function(t){return null==t?"":f()?t[f()]:v()(t)})),O=Di(e,"valueFunction",8,(function(t,e=!1){return null==t?t:!T()||e?p()?t[p()]:t:t.map((t=>p()?t[p()]:t))})),$=Di(e,"keywordsCleanFunction",8,(function(t){return t})),w=Di(e,"textCleanFunction",8,(function(t){return t})),k=Di(e,"beforeChange",8,(function(t,e){return!0})),_=Di(e,"onChange",8,(function(t){})),I=Di(e,"onFocus",8,(function(){})),A=Di(e,"onBlur",8,(function(){})),S=Di(e,"onCreate",8,(function(t){St()&&console.log("onCreate: "+t)})),C=Di(e,"selectFirstIfEmpty",8,!1),E=Di(e,"minCharactersToSearch",8,1),L=Di(e,"maxItemsToShowInList",8,0),T=Di(e,"multiple",8,!1),x=Di(e,"create",8,!1),N=Di(e,"ignoreAccents",8,!0),M=Di(e,"matchAllKeywords",8,!0),D=Di(e,"sortByMatchedKeywords",8,!1),P=Di(e,"itemFilterFunction",8,void 0),B=Di(e,"itemSortFunction",8,void 0),z=Di(e,"lock",8,!1),V=Di(e,"delay",8,0),q=Di(e,"localFiltering",8,!0),H=Di(e,"localSorting",8,!0),K=Di(e,"cleanUserText",8,!0),Q=Di(e,"lowercaseKeywords",8,!0),et=Di(e,"closeOnBlur",8,!1),it=Di(e,"orderableSelection",8,!1),rt=Di(e,"hideArrow",8,!1),nt=Di(e,"showClear",8,!1),st=Di(e,"clearText",8,"&#10006;"),ot=Di(e,"showLoadingIndicator",8,!1),at=Di(e,"noResultsText",8,"No results found"),lt=Di(e,"loadingText",8,"Loading results..."),ct=Di(e,"moreItemsText",8,"items not shown"),ut=Di(e,"createText",8,"Not found, add anyway?"),dt=Di(e,"placeholder",8,void 0),ht=Di(e,"className",8,void 0),gt=Di(e,"inputClassName",8,void 0),ft=Di(e,"inputId",8,void 0),pt=Di(e,"name",8,void 0),mt=Di(e,"selectName",8,void 0),bt=Di(e,"selectId",8,void 0),yt=Di(e,"title",8,void 0),Ot=Di(e,"html5autocomplete",8,void 0),$t=Di(e,"autocompleteOffValue",8,"off"),wt=Di(e,"readonly",8,void 0),kt=Di(e,"dropdownClassName",8,void 0),_t=Di(e,"disabled",8,!1),It=Di(e,"noInputStyles",8,!1),At=Di(e,"required",8,null),St=Di(e,"debug",8,!1),Ct=Di(e,"tabindex",8,0),Et=Di(e,"selectedItem",28,(()=>T()?[]:void 0)),Lt=Di(e,"value",12,void 0),Tt=Di(e,"highlightedItem",12,void 0);const xt="sautocomplete-"+Math.floor(1e3*Math.random());let Nt,Ft=F(),Rt=F(),Ut=F(),Pt=F(!1),jt=F(!1),Wt=F(-1),zt=Di(e,"text",12,void 0),Vt=F(0),qt=F(),Ht=[],Kt=0,Yt=0,ie=F(!1);function re(t,e){let i=function(t,e){if("function"!=typeof t)return void console.error("Not a function: "+t+", argument: "+e);let i;try{i=t(e)}catch(i){console.warn("Error executing Autocomplete function on value: "+e+" function: "+t)}return i}(t,e);return null==i&&(i=""),"string"!=typeof i&&(i=i.toString()),i}function ne(t){return re(v(),t)}function oe(t){const e=re(b(),t);let i=re($(),e);return i=Q()?i.toLowerCase().trim():i,N()&&(i=Ve(i)),St()&&console.log("Extracted keywords: '"+i+"' from item: "+JSON.stringify(t)),i}function ae(){let t;St()&&(t="Autocomplete prepare list "+(ft()?`(id: ${ft()})`:""),console.time(t),console.log("Prepare items to search"),console.log("items: "+JSON.stringify(c()))),Array.isArray(c())||(console.warn("Autocomplete items / search function did not return array but",c()),c([]));const e=c()?c().length:0;Ht=new Array(e),e>0&&c().forEach(((t,e)=>{const i=function(t){return{keywords:q()?oe(t):[],label:ne(t),item:t}}(t);void 0===i&&console.log("Undefined item for: ",t),Ht[e]=i})),U(qt,Ht),St()&&(console.log(Ht.length+" items to search"),console.timeEnd(t))}function le(t,e){if(!t)return 0;const i=t.keywords;let r=0;return e.forEach((t=>{i.includes(t)&&(r+=1)})),r}async function ce(){let t;St()&&(t="Autocomplete search "+(ft()?`(id: ${ft()})`:""),console.time(t),console.log("Searching user entered text: '"+zt()+"'"));let e=function(t){if(null==t)return"";if(!K())return t;const e=t.replace(/[&/\\#,+()$~%.'":*?<>{}]/g," ").trim(),i=re(w(),e);return Q()?i.toLowerCase().trim():i.trim()}(zt());if(E()>1&&e.length<E()&&(e=""),U(Vt,e.length),St()&&console.log("Changed user entered text '"+zt()+"' into '"+e+"'"),""===e&&(u()?(c([]),St()&&console.log("User entered text is empty clear list of items")):(U(qt,Ht),St()&&console.log("User entered text is empty set the list of items to all items")),We()))St()&&console.timeEnd(t);else{if(u()){Kt+=1;const t=Kt;if(U(jt,!0),"AsyncGeneratorFunction"===u().constructor.name){for await(const i of u()(e,L())){if(t<Yt)return!1;t>Yt&&c([]),Yt=t,c([...c(),...i]),ue(e)}Yt<t&&(Yt=t,c([]),ue(e))}else{let i=await u()(e,L());if(t<Yt)return!1;Yt=t,c(i),ue(e)}U(jt,!1)}else ue(e);St()&&(console.timeEnd(t),console.log("Search found "+Gt(qt).length+" items"))}}function ue(t){ae();const e=(N()?Ve(t):t).split(/\s+/g).filter((t=>""!==t));let i;q()?(i=P()?Ht.filter((t=>P()(t.item,e))):Ht.filter((t=>function(t,e){const i=le(t,e);return M()?i>=e.length:i>0}(t,e))),H()&&(B()?i=i.sort(((t,i)=>B()(t.item,i.item,e))):D()&&(i=i.sort(((t,i)=>function(t,e,i){return le(e,i)-le(t,i)}(t,i,e)))))):i=Ht;const r=ze(e,"label");return U(qt,i.map(r)),We(),!0}function fe(t){let e;if(St()&&console.log("createdItem",t),void 0!==t){ae(),U(qt,Ht);let i=Re(t,Gt(qt));i<=0&&(c([t]),ae(),U(qt,Ht),i=0),i>=0&&(U(Wt,i),e=Gt(qt)[Gt(Wt)])}return e}function ve(t){if(St()&&console.log("selectListItem",t),void 0===t&&x()){const e=S()(zt());if(void 0!==e){if("function"==typeof e.then)return e.then((t=>{if(void 0!==t){const e=fe(t);void 0!==e&&ve(e)}})),!0;t=fe(e)}}if(void 0===t)return St()&&console.log("listItem is undefined. Can not select."),!1;if(Gt(l))return!0;const e=t.item;return k()(Et(),e)&&(T()?Et()?Et().includes(e)?Et(Et().filter((t=>t!==e))):Et([...Et(),e]):Et([e]):(Et(void 0),Et(e))),!0}function me(){St()&&console.log("selectItem",Gt(Wt));ve(Gt(qt)[Gt(Wt)])?(St()&&console.log("selectListItem true, closing"),De(),T()&&(zt(""),Gt(Ft).focus())):St()&&console.log("selectListItem false, not closing")}function be(){St()&&console.log("up"),Ue(),Gt(Wt)>0&&Xt(Wt,-1),Oe()}function ye(){St()&&console.log("down"),Ue(),Gt(Wt)<Gt(qt).length-1&&Xt(Wt),Oe()}function Oe(){St()&&console.log("highlight");const t=".selected";St()&&console.log("Seaching DOM element: "+t+" in "+Gt(Rt));const e=Gt(Rt)&&Gt(Rt).querySelector(t);e?"function"==typeof e.scrollIntoViewIfNeeded?(St()&&console.log("Scrolling selected item into view"),e.scrollIntoViewIfNeeded()):"function"===e.scrollIntoView?(St()&&console.log("Scrolling selected item into view"),e.scrollIntoView()):St()&&console.warn("Could not scroll selected item into view, scrollIntoViewIfNeeded not supported"):St()&&console.warn("Selected item not found to scroll into view")}function _e(t){St()&&console.log("onListItemClick"),ve(t)&&(De(),T()&&(zt(""),Gt(Ft).focus()))}function Ie(t){St()&&console.log("unselectItem",t),Et(Et().filter((e=>e!==t))),Gt(Ft).focus()}function Ae(){ce()&&(U(Wt,0),Ue())}function Se(t){St()&&console.log("onEsc"),t.stopPropagation(),Gt(Pt)&&(Gt(Ft).focus(),De())}function xe(t){St()&&console.log("onBackspace"),Ie(Et()[Et().length-1])}function Fe(){if(St()&&console.log("resetListToAllItemsAndOpen"),u()&&!Ht.length?ce():zt()||U(qt,Ht),Ue(),Et()){St()&&console.log("Searching currently selected item: "+JSON.stringify(Et()));const t=Re(Et(),Gt(qt));t>=0&&(U(Wt,t),Oe())}}function Re(t,e){St()&&console.log("Finding index for item",t);let i=-1;for(let r=0;r<e.length;(r+=1)-1){const n=e[r];if(void 0!==n){if(St()&&console.log("Item "+r+": "+JSON.stringify(n)),t===n.item){i=r;break}}else St()&&console.log(`listItem ${r} is undefined. Skipping.`)}return St()&&(i>=0?console.log("Found index for item: "+i):console.warn("Not found index for item: "+t)),i}function Ue(){St()&&console.log("open"),Gt(l)||Pe()||(U(ie,!0),U(Pt,!0))}function De(){St()&&console.log("close"),U(Pt,!1),U(jt,!1),!zt()&&C()&&(U(Wt,0),me())}function Pe(){return E()>0&&Gt(Vt)<E()&&(u()||Gt(Vt)>0)}function We(){return!!Pe()&&(De(),!0)}function Be(){St()&&console.log("clear"),zt(""),Et(T()?[]:void 0),setTimeout((()=>{Gt(Ft).focus()}))}function ze(t,e){return i=>{let r=i[e];const n=Object.assign({highlighted:void 0},i);n.highlighted=r;const s=r.toLowerCase(),o=N()?Ve(s):s;if(t&&t.length){const e=[];for(let i=0;i<t.length;(i+=1)-1){let r=t[i];N()&&(r=Ve(r));const n=r.length;let s=0;do{if(s=o.indexOf(r,s),s>=0){let t=s+n;e.push([s,t]),s=t}}while(-1!==s)}if(e.length>0){const t=new Set;for(let i=0;i<e.length;(i+=1)-1){const r=e[i],n=r[0],o=r[1],a=s.substring(n,o);t.add(a)}for(let e of t){if("b"===e)continue;const t=new RegExp("("+e+")","ig"),i=n.highlighted.replace(t,"<b>$1</b>");n.highlighted=i}}}return n}}function Ve(t){return t.normalize("NFD").replace(/[\u0300-\u036f]/g,"")}Ci((()=>{Gt(ie)&&function(){const{height:t}=window.visualViewport,{bottom:e,height:i}=Gt(Ut).getBoundingClientRect(),{height:r}=Gt(Rt).getBoundingClientRect();R(Rt,Gt(Rt).style.top=e+r>t?`-${i+r}px`:"0px")}(),U(ie,!1)}));let Ke=F(!1);function Ye(t,e){it()&&(t.preventDefault(),U(Ke,e))}function Qe(t,e){if(it()){t.preventDefault(),U(Ke,!1);let i=parseInt(t.dataTransfer.getData("source"));i!=e&&function(t,e){let i=[...Et()];t<e?(i.splice(e+1,0,i[t]),i.splice(t,1)):(i.splice(e,0,i[t]),i.splice(t+1,1));Et(i)}(i,e)}}var Xe;X((()=>(ee(c()),ee(u()))),(()=>{c(),u()||ae()})),X((()=>ee(Et())),(()=>{Et(),Lt(O()(Et())),Et()&&!T()&&zt(ne(Et())),U(qt,Ht),_()(Et())})),X((()=>(Gt(qt),Gt(Wt))),(()=>{Tt(Gt(qt)&&Gt(Wt)&&Gt(Wt)>=0&&Gt(Wt)<Gt(qt).length?Gt(qt)[Gt(Wt)].item:null)})),X((()=>(Gt(Pt),ee(c()),Gt(Vt))),(()=>{U(n,Gt(Pt)&&(c()&&c().length>0||Gt(Vt)>0))})),X((()=>(ee(T()),ee(Et()))),(()=>{U(o,T()&&Et()&&Et().length>0||!T()&&Et())})),X((()=>(ee(nt()),ee(z()),ee(T()),Gt(o))),(()=>{U(a,nt()||(z()||T())&&Gt(o))})),X((()=>(ee(z()),Gt(o))),(()=>{U(l,z()&&Gt(o))})),Xe=Mt,Z((()=>{if(Gt(Xe.l.r2)){for(var t of Xe.l.r1){var e=t.effect;e.f&m&&Qt(e,y),Dt(e)&&Bt(e),t.ran=!1}Xe.l.r2.v=!1}})),function(t=!1){const e=Mt,i=e.l.u;if(!i)return;let r=()=>ee(e.s);if(t){let t=0,i={};const n=j((()=>{let r=!1;const n=e.s;for(const t in n)n[t]!==i[t]&&(i[t]=n[t],r=!0);return r&&t++,t}));r=()=>Gt(n)}i.b.length&&Y((()=>{_i(e,r),g(i.b)})),J((()=>{const t=Jt((()=>i.m.map(h)));return()=>{for(const e of t)"function"==typeof e&&e()}})),i.a.length&&J((()=>{_i(e,r),g(i.a)}))}();var Ze=is();we("click",se,(function(t){St()&&console.log("onDocumentClick"),t.composedPath().some((t=>t.classList&&t.classList.contains(xt)))?(St()&&console.log("onDocumentClick inside"),Oe()):(St()&&console.log("onDocumentClick outside"),De())})),we("scroll",se,(()=>U(ie,!0)));var ii=de(Ze);qe(de(ii),(()=>!T()&&Gt(o)),(t=>{var e=qn(),i={},r=de(e);tt((()=>je(r,ne(Et())))),tt((()=>{i!==(i=O()(Et(),!0))&&(e.value=null==(e.__value=O()(Et(),!0))?"":O()(Et(),!0))})),Le(t,e)}),(t=>{var e=Ee();qe(he(e),(()=>T()&&Gt(o)),(t=>{var e=Ee();Je(he(e),1,Et,Ge,((t,e)=>{var i=Hn(),r={},n=de(i);tt((()=>je(n,ne(Gt(e))))),tt((()=>{r!==(r=O()(Gt(e),!0))&&(i.value=null==(i.__value=O()(Gt(e),!0))?"":O()(Gt(e),!0))})),Le(t,i)})),Le(t,e)}),null,!0),Le(t,e)}));var ri=ge(ii,2),si=de(ri);qe(si,(()=>T()&&Gt(o)),(t=>{var i=Ee();Je(he(i),11,Et,(t=>O()(t,!0)),((t,i,r)=>{var n=Gn();ni(n,"draggable",!0),ei(de(n),e,"tag",{get label(){return ne(Gt(i))},get item(){return Gt(i)},unselectItem:Ie},(t=>{var e=Kn(),r=de(e),n=de(r);tt((()=>je(n,ne(Gt(i)))));var s=ge(r,2),o=j((()=>Ie(Gt(i))));we("click",s,ki((function(...t){Gt(o)?.apply(this,t)}))),we("keypress",s,ki((t=>{"Enter"==t.key&&Ie(Gt(i))}))),Le(t,e)})),tt((()=>li(n,"is-active",Gt(Ke)===Gt(r)))),function(t,e,i){var r,n,s,o=He,a=null;o.a??={element:t,measure(){r=this.element.getBoundingClientRect()},apply(){if(s?.abort(),n=this.element.getBoundingClientRect(),r.left!==n.left||r.right!==n.right||r.top!==n.top||r.bottom!==n.bottom){const t=e()(this.element,{from:r,to:n},i?.());s=vi(this.element,t,void 0,1,(()=>{s?.abort(),s=void 0}))}},fix(){if(!t.getAnimations().length){var{position:e,width:i,height:n}=getComputedStyle(t);if("absolute"!==e&&"fixed"!==e){var s=t.style;a={position:s.position,width:s.width,height:s.height,transform:s.transform},s.position="absolute",s.width=i,s.height=n;var o=t.getBoundingClientRect();if(r.left!==o.left||r.top!==o.top){var l=`translate(${r.left-o.left}px, ${r.top-o.top}px)`;s.transform=s.transform?`${s.transform} ${l}`:l}}}},unfix(){if(a){var e=t.style;e.position=a.position,e.width=a.width,e.height=a.height,e.transform=a.transform}}},o.a.element=t}(n,(()=>Bn),(()=>({duration:200}))),pi(3,n,(()=>Vn),(()=>({duration:200}))),we("dragstart",n,(t=>function(t,e){it()&&t.dataTransfer.setData("source",e)}(t,Gt(r)))),we("dragover",n,(t=>Ye(t,Gt(r)))),we("dragleave",n,(t=>(Gt(r),void(it()&&U(Ke,!1))))),we("drop",n,(t=>Qe(t,Gt(r)))),Le(t,n)})),Le(t,i)}));var ci=ge(si,2);let ui;wi(ci,(t=>U(Ft,t)),(()=>Gt(Ft))),qe(ge(ci,2),(()=>Gt(a)),(t=>{var e=Jn();ti(de(e),st),we("click",e,Be),we("keypress",e,(t=>{"Enter"==t.key&&Be()})),Le(t,e)})),wi(ri,(t=>U(Ut,t)),(()=>Gt(Ut)));var di=ge(ri,2);return qe(de(di),(()=>Gt(qt)&&Gt(qt).length>0),(t=>{var i=Xn(),r=he(i);ei(r,e,"dropdown-header",{get nbItems(){return Gt(qt).length},get maxItemsToShowInList(){return L()}},null);var n=ge(r,2);Je(n,1,(()=>Gt(qt)),Ge,((t,i,r)=>{var n=Ee();qe(he(n),(()=>Gt(i)&&(L()<=0||r<L())),(t=>{var n=Yn();const s=W((()=>function(t){return!!Et()&&(T()?Et().includes(t):t===Et())}(Gt(i).item)));tt((()=>li(n,"confirmed",Gt(s)))),ei(de(n),e,"item",{get item(){return Gt(i).item},get label(){return Gt(i).highlighted?Gt(i).highlighted:Gt(i).label}},(t=>{var e=Ee();qe(he(e),(()=>Gt(i).highlighted),(t=>{var e=Ee();ti(he(e),(()=>Gt(i).highlighted)),Le(t,e)}),(t=>{var e=Ee();ti(he(e),(()=>Gt(i).label)),Le(t,e)})),Le(t,e)})),tt((()=>li(n,"selected",r===Gt(Wt)))),we("click",n,(()=>_e(Gt(i)))),we("keypress",n,(t=>{"Enter"==t.key&&_e(Gt(i))})),we("pointerenter",n,(()=>{U(Wt,r)})),Le(t,n)})),Le(t,n)})),ei(ge(n,2),e,"dropdown-footer",{get nbItems(){return Gt(qt).length},get maxItemsToShowInList(){return L()}},(t=>{var e=Ee();qe(he(e),(()=>L()>0&&Gt(qt).length>L()),(t=>{var e=Ee();qe(he(e),ct,(t=>{var e=Qn(),i=de(e);tt((()=>je(i,`...${Gt(qt).length-L()??""}\n              ${ct()??""}`))),Le(t,e)})),Le(t,e)})),Le(t,e)})),Le(t,i)}),(t=>{var i=Ee();qe(he(i),(()=>Gt(jt)&&lt()),(t=>{var i=Zn();ei(de(i),e,"loading",{get loadingText(){return lt()}},(t=>{var e=Ce();tt((()=>je(e,lt()))),Le(t,e)})),Le(t,i)}),(t=>{var i=Ee();qe(he(i),x,(t=>{var i=ts();ei(de(i),e,"create",{get createText(){return ut()}},(t=>{var e=Ce();tt((()=>je(e,ut()))),Le(t,e)})),we("click",i,me),we("keypress",i,(t=>{"Enter"==t.key&&me()})),Le(t,i)}),(t=>{var i=Ee();qe(he(i),at,(t=>{var i=es();ei(de(i),e,"no-results",{get noResultsText(){return at()}},(t=>{var e=Ce();tt((()=>je(e,at()))),Le(t,e)})),Le(t,i)}),null,!0),Le(t,i)}),!0),Le(t,i)}),!0),Le(t,i)})),wi(di,(t=>U(Rt,t)),(()=>Gt(Rt))),tt((()=>{ai(Ze,`${(ht()?ht():"")??""} autocomplete select is-fullwidth ${xt??""} svelte-75ckfb`),li(Ze,"hide-arrow",rt()||!c().length),li(Ze,"is-multiple",T()),li(Ze,"show-clear",Gt(a)),li(Ze,"is-loading",ot()&&Gt(jt)),ni(ii,"name",mt()),ni(ii,"id",bt()),ii.multiple=T(),ui=function(t,e,i,r,n=!1,s=!1){var o=e||{},a="OPTION"===t.tagName;for(var l in e)l in i||(i[l]=null);i.class=i.class?i.class+" "+r:r;var c=oi(t),u=t.__attributes??={},d=[];for(const v in i){let m=i[v];if(a&&"value"===v&&null==m)t.value=t.__value="",o[v]=m;else{var h=o[v];if(m!==h){o[v]=m;var g=v[0]+v[1];if("$$"!==g){if("on"===g){const b={},y="$$"+v;let O=v.slice(2);var f=Ne(O);if(Te(O)&&(O=O.slice(0,-7),b.capture=!0),!f&&h){if(null!=m)continue;t.removeEventListener(O,o[y],b),o[y]=null}if(null!=m)if(f)t[`__${O}`]=m,ke([O]);else{function $(t){o[v].call(this,t)}e?o[y]=$e(O,t,$,b):d.push([v,m,()=>o[y]=$e(O,t,$,b)])}}else if("style"===v&&null!=m)t.style.cssText=m+"";else if("autofocus"===v)pe(t,Boolean(m));else if("__value"===v||"value"===v&&null!=m)t.value=t[v]=t.__value=m;else{var p=v;n||(p=Me(p)),null!=m||s?c.includes(p)&&(s||"string"!=typeof m)?t[p]=m:"function"!=typeof m&&ni(t,p,m):(u[v]=null,t.removeAttribute(v))}"style"===v&&"__styles"in t&&(t.__styles={})}}}}return e||vt((()=>{if(t.isConnected)for(const[t,e,i]of d)o[t]===e&&i()})),o}(ci,ui,{type:"text",class:`${(gt()?gt():"")??""} ${(It()?"":"input autocomplete-input")??""}`,id:ft()?ft():"",autocomplete:Ot()?"on":$t(),placeholder:dt(),name:pt(),disabled:_t(),required:At(),title:yt(),readonly:wt()||Gt(l),tabindex:Ct(),...r},"svelte-75ckfb"),ai(di,`${(kt()?kt():"")??""} autocomplete-list ${(Gt(n)?"":"hidden")??""}\n    is-fullwidth svelte-75ckfb`)})),mi(ci,zt),we("input",ci,(function(t){St()&&console.log("onInput"),zt(t.target.value),Nt&&clearTimeout(Nt),V()?Nt=setTimeout(Ae,V()):Ae()})),we("focus",ci,(function(){St()&&console.log("onFocus"),I()(),Fe()})),we("blur",ci,(function(){St()&&console.log("onBlur"),et()&&De(),A()()})),we("keydown",ci,(function(t){St()&&console.log("onKeyDown");let e=t.key;"Tab"===e&&t.shiftKey&&(e="ShiftTab");const i={Tab:Gt(Pt)?De:null,ShiftTab:Gt(Pt)?De:null,ArrowDown:ye.bind(this),ArrowUp:be.bind(this),Escape:Se.bind(this),Backspace:T()&&Gt(o)&&!zt()?xe.bind(this):null}[e];"function"==typeof i&&i(t)})),we("click",ci,(function(){St()&&console.log("onInputClick"),Fe()})),we("keypress",ci,(function(t){St()&&console.log("onKeyPress"),"Enter"===t.key&&function(t){Gt(Pt)&&(t.preventDefault(),me())}(t)})),we("dragover",ci,(t=>Ye(t,Et().length-1))),we("drop",ci,(t=>Qe(t,Et().length-1))),Le(t,Ze),function(t,e,i){var r=s(t,e);r&&r.set&&(t[e]=i,G((()=>{t[e]=null})))}(e,"highlightFilter",ze),te({highlightFilter:ze})}var ns=Se("<p> </p>"),ss=Se('<div class="control"><!></div> <!>',1);function os(t,e,i,r,n){let s={field:e(),value:"checkbox"===t.currentTarget.type?t.currentTarget.checked:i()};return r(!0),n("change",s),!0}function as(t,e,i,r,n){let s={field:e(),value:"checkbox"===t.currentTarget.type?t.currentTarget.checked:i()};return r(!0),n("change",s),!0}var ls=Se('<input type="checkbox"> ',1),cs=Se('<div><label class="checkbox"><!></label></div> <!>',1);function us(t,e,i,r,n){let s=parseInt(t.currentTarget.dataset.id),o=[...e()];o.find((t=>t.id==s)).value=t.currentTarget.checked;let a={id:s,field:i(),value:o};return r(!0),n("change",a),!0}function ds(t,e,i,r,n){let s=parseInt(t.currentTarget.dataset.id),o=[...e()];o.find((t=>t.id===s)).value=t.currentTarget.checked;let a={id:s,field:i(),value:o};return r(!0),n("change",a),!0}ke(["change","input"]);var hs=Se('<label class="checkbox pr-2"><input type="checkbox"> </label>'),gs=Se('<div class="control"></div> <!>',1);function fs(t,e,i,r){let n={field:e(),value:t.currentTarget.value};return i(!0),r("change",n),!0}function ps(t,e,i,r){let n={field:e(),value:t.currentTarget.value};return i(!0),r("change",n),!0}ke(["change","input"]);var vs=Se('<span class="icon is-small is-left"><i></i></span>'),ms=Se('<i class="fas fa-check"></i>'),bs=Se('<i class="fas fa-exclamation-triangle"></i>'),ys=Se('<span class="icon is-small is-right"><!></span>'),Os=Se('<div><input type="color"> <!> <!></div> <!>',1);ke(["change","input"]);var $s=Se("<div><!></div>");function ws(t,e,i,r){let n={field:e(),value:t.currentTarget.value};return i(!0),r("change",n),!0}function ks(t,e,i,r){let n={field:e(),value:t.currentTarget.value};return i(!0),r("change",n),!0}var _s=Se("<p><time> </time></p>"),Is=Se('<span class="icon is-small is-left"><i></i></span>'),As=Se('<i class="fas fa-check"></i>'),Ss=Se('<i class="fas fa-exclamation-triangle"></i>'),Cs=Se('<span class="icon is-small is-right"><!></span>'),Es=Se('<input type="date"> <!> <!>',1),Ls=Se("<div><!></div> <!>",1);ke(["change","input"]);var Ts=Se("<p> </p>"),xs=Se('<span class="icon is-small is-left"><i></i></span>'),Ns=Se('<i class="fas fa-check"></i>'),Fs=Se('<i class="fas fa-exclamation-triangle"></i>'),Ms=Se('<span class="icon is-small is-right"><!></span>'),Rs=Se('<input type="datetime-local"> <!> <!>',1),Us=Se("<div><!></div> <!>",1);function Ds(t,e,i,r){let n={field:e(),value:t.currentTarget.value};return i(!0),r("change",n),!0}function Ps(t,e,i,r){let n={field:e(),value:t.currentTarget.value};return i(!0),r("change",n),!0}ke(["change","input"]);var js=Se("<p> </p>"),Ws=Se('<span class="icon is-small is-left"><i></i></span>'),Bs=Se('<i class="fas fa-check"></i>'),zs=Se('<i class="fas fa-exclamation-triangle"></i>'),Vs=Se('<span class="icon is-small is-right"><!></span>'),qs=Se('<input type="email"> <!> <!>',1),Hs=Se("<div><!></div> <!>",1);ke(["change","input"]);var Ks=Se('<input type="hidden">');var Gs=Se("<p> </p>"),Js=Se('<span class="icon is-small is-left"><i></i></span>'),Ys=Se('<i class="fas fa-check"></i>'),Qs=Se('<i class="fas fa-exclamation-triangle"></i>'),Xs=Se('<span class="icon is-small is-right"><!></span>'),Zs=Se("<textarea></textarea> <!> <!>",1),to=Se("<div><!></div> <!>",1);function eo(t,e){Zt(e,!0);const i=xi();let r,n,s=Si(),o=Di(e,"inputStarted",15,!1),a=Di(e,"value",15,""),l=Di(e,"placeholder",3,""),c=Di(e,"fieldname",3,"textarea"),u=Di(e,"icon",3,!1),d=Di(e,"rows",3,10),h=Di(e,"required",3,!0),g=Di(e,"readonly",3,!1),f=Di(e,"disabled",3,!1),p=Di(e,"valid",3,!0),v=Di(e,"validated",3,!1),m=Di(e,"errors",3,!1),b=Di(e,"formErrors",3,!1),y=Di(e,"formLevelError",3,!1),O=j((()=>(u()?" has-icons-left ":"")+" has-icons-right "));Pi((()=>{r=[].concat(m()?m():[],b()?b():[])})),Pi((()=>{n=!(v()&&p())&&o()}));let $,w=j((()=>!1===p()||y()));function k(t){let e={field:c(),value:"checkbox"===t.target.type?t.target.checked:t.target.value};return o(!0),s("change",e),!0}Pi((()=>{$=!0!==p()&&o()?Gi.CLASS_ERR:Gi.CLASS_OK}));var _=to(),I=he(_);qe(de(I),g,(t=>{var e=Gs(),i=de(e);tt((()=>je(i,a()))),Le(t,e)}),(t=>{var e=Zs(),r=he(e);ai(r,`textarea ${$??""}`);var n=ge(r,2);qe(n,u,(t=>{var e=Js(),i=de(e);tt((()=>ai(i,`fas fa-${u()??""}`))),Le(t,e)})),qe(ge(n,2),(()=>!0===v()),(t=>{var e=Xs();qe(de(e),(()=>!0===p()),(t=>{Le(t,Ys())}),(t=>{var e=Ee();qe(he(e),(()=>!1===p()),(t=>{Le(t,Qs())}),null,!0),Le(t,e)})),Le(t,e)})),tt((()=>{ni(r,"id",`form-field-textarea-${c()??""}`),ni(r,"invalid",Gt(w)),r.disabled=f(),r.required=h(),r.readOnly=g(),ni(r,"name",c()),ni(r,"placeholder",Ti(sr,"$LOCALE",i)[l()]),ni(r,"rows",d()),ni(r,"aria-controls",`input-field-helper-${c()??""}`),ni(r,"aria-describedby",`input-field-helper-${c()??""}`)})),we("blur",r,k),mi(r,a),Le(t,e)})),Hr(ge(I,2),{get errors(){return r},set errors(t){r=t},get show(){return n},set show(t){n=t},get classes(){return $},set classes(t){$=t},get id(){return`input-field-helper-${c()??""}`}}),tt((()=>ai(I,`control ${Gt(O)??""}`))),Le(t,_),te()}var io=Se('<label class="label"> </label>');function ro(t,e){Zt(e,!0);const i=xi();let r=Di(e,"label",3,"label");var n=io(),s=de(n);tt((()=>{ni(n,"for",e.id),je(s,Ti(sr,"$LOCALE",i)[r()])})),Le(t,n),te()}var no=new WeakMap;class so{constructor(t){Vi(this,no,{}),t instanceof so&&this.import(t.getContent())}add(t,e,i="replace"){this.contains(t)?"replace"===i?zi(no,this)[t]=e:"add"===i&&(zi(no,this)[t]=Object.assign(zi(no,this)[t],e)):zi(no,this)[t]=e}get(t){return zi(no,this)[t]}contains(t){return Object.hasOwn(zi(no,this),t)}import(t,e="replace"){for(let i in t)this.add(i,t[i],e)}isEmpty(){return 0===Object.keys(zi(no,this)).length}getContent(){return{...zi(no,this)}}}const oo=new so,ao=new so,lo=new so;function co(t){An(t,{title:"not-node:empty_list_placeholder",size:4,align:"center"})}var uo=Se('<span class="icon"><i></i></span>'),ho=Se("<span> </span>"),go=Se('<span class="icon"><i></i></span>'),fo=Se("<!> <!> <!> <!>",1),po=Se(" <!>",1),vo=Se("<a><!></a>");function mo(t,e){Zt(e,!0);const i=xi(),r=()=>Ti(sr,"$LOCALE",i);let n=Di(e,"title",3,""),s=Di(e,"url",3,""),o=Di(e,"target",3,"_blank"),a=Di(e,"light",3,!1),l=Di(e,"loading",3,!1),c=Di(e,"raised",3,!1),u=Di(e,"outlined",3,!1),h=Di(e,"inverted",3,!1),g=Di(e,"rounded",3,!1),f=Di(e,"button",3,!0),p=Di(e,"state",3,""),v=Di(e,"type",3,""),m=Di(e,"color",3,""),b=Di(e,"size",3,""),y=Di(e,"classes",15,""),O=Di(e,"icon",3,!1),$=Di(e,"iconSide",3,"right"),w=Di(e,"action",3,(()=>!0));Pi((()=>{y((f()?"button ":"")+(p()&&p().length>0?` is-${p()} `:"")+(a()?" is-light ":"")+(v()&&v().length>0?` is-${v()} `:"")+(b()&&b().length>0?` is-${b()} `:""))}));var k=vo();k.__click=function(...t){w()?.apply(this,t)},qe(de(k),O,(t=>{var i=fo(),s=he(i);qe(s,(()=>"left"===$()),(t=>{var e=uo(),i=de(e);tt((()=>ai(i,`fas fa-${O()??""} ${(b()?`is-${b()}`:"")??""}`))),Le(t,e)}));var o=ge(s,2);qe(o,n,(t=>{var e=ho(),i=de(e);tt((()=>je(i,r()[n()]))),Le(t,e)}));var a=ge(o,2);ii(a,(()=>e.children??d)),qe(ge(a,2),(()=>"right"===$()),(t=>{var e=go(),i=de(e);tt((()=>ai(i,`fas fa-${O()??""} ${(b()?`is-${b()}`:"")??""}`))),Le(t,e)})),Le(t,i)}),(t=>{var i=po(),s=he(i);ii(ge(s),(()=>e.children??d)),tt((()=>je(s,`${r()[n()]??""} `))),Le(t,i)})),tt((()=>{ni(k,"target",o()),ni(k,"href",s()),ni(k,"download",e.download),ni(k,"rel",e.rel),ai(k,`${y()??""} ${(p()?`is-${p()}`:"")??""} ${(h()?"is-inverted":"")??""} ${(u()?"is-outlined":"")??""} ${(c()?"is-raised":"")??""} ${(g()?"is-rounded":"")??""} ${(a()?"is-light":"")??""} ${(l()?"is-loading":"")??""} ${(m()?`is-${m()}`:"")??""} ${(v()?`is-${v()}`:"")??""} ${(b()?`is-${b()}`:"")??""}`)})),Le(t,k),te()}ke(["click"]);var bo=Se('<div><p class="control"></p></div>'),yo=Se("<div></div>");function Oo(t,e){let i=Di(e,"values",19,(()=>[])),r=Di(e,"classes",3,""),n=Di(e,"centered",3,!1),s=Di(e,"right",3,!1),o=Di(e,"joined",3,!0);var a=Ee();qe(he(a),o,(t=>{var e=bo();Je(de(e),21,i,(t=>t.id),((t,e)=>{mo(t,Ri((()=>Gt(e))))})),tt((()=>ai(e,`field has-addons ${(n()?"is-centered":"")??""} ${(s()?"is-right":"")??""} ${r()??""}`))),Le(t,e)}),(t=>{var e=yo();Je(e,21,i,(t=>t.id),((t,e)=>{mo(t,Ri((()=>Gt(e))))})),tt((()=>ai(e,`buttons ${(n()?"is-centered":"")??""} ${(s()?"is-right":"")??""} ${r()??""}`))),Le(t,e)})),Le(t,a)}var $o=(t,e)=>{t&&"Enter"==t.key&&e()},wo=Se('<figure class="image is-64x64"><img class="is-rounded"></figure>'),ko=Se('<div role="button" tabindex="0" class="list-item-image"><!></div>'),_o=Se('<div class="list-item-title" role="button" tabindex="0"><!></div>'),Io=Se('<div role="button" tabindex="0" class="list-item-description"><!></div>'),Ao=Se('<div class="list-item-controls"><!> <!></div>'),So=Se('<div role="button" tabindex="0"><!> <div role="button" tabindex="0" class="list-item-content"><!> <!></div> <!></div>');function Co(t,e){Zt(e,!0);const i=Si();let r=Di(e,"actions",19,(()=>[])),n=Di(e,"links",19,(()=>[])),s=Di(e,"listActions",19,(()=>[])),o=Di(e,"listLinks",19,(()=>[])),a=Di(e,"classes",3,""),l=Di(e,"commonClasses",3,""),c=Di(e,"image",3,""),u=Di(e,"index",19,(()=>-1)),d=Di(e,"first",3,!1),h=Di(e,"last",3,!1),g=Di(e,"titleComponent",3,An),f=Di(e,"titleComponentProps",19,(()=>({size:6}))),p=Di(e,"descriptionComponentProps",19,(()=>({}))),v=Di(e,"imageComponentProps",19,(()=>({})));function m(){i("click",e.value)}let b=x(re([]));Pi((()=>{U(b,re([...r(),...s()].map((t=>({...t,action:()=>t.action(e.value)})))))}));let y=x(re([]));Pi((()=>{U(y,re([...n(),...o()]))}));var O=So();O.__click=m,O.__keyup=[$o,m];var $=de(O);qe($,c,(t=>{var r=ko(),n=j((()=>ki((t=>{t&&"Enter"==t.key&&(m(),i("clickImage",e.value))}))));r.__keyup=function(...t){Gt(n)?.apply(this,t)};var s=j((()=>ki((()=>{m(),i("clickImage",e.value)}))));r.__click=function(...t){Gt(s)?.apply(this,t)},qe(de(r),(()=>e.imageComponent),(t=>{var i=Ee();qe(he(i),(()=>"string"==typeof c()),(t=>{var i=Ee();const r=j((()=>e.imageComponent));ri(he(i),(()=>Gt(r)),((t,e)=>{e(t,Ri({get value(){return c()}},v))})),Le(t,i)}),(t=>{var i=Ee();const r=j((()=>e.imageComponent));ri(he(i),(()=>Gt(r)),((t,e)=>{e(t,Ri(c,v))})),Le(t,i)})),Le(t,i)}),(t=>{var i=wo(),r=de(i);tt((()=>{ni(r,"src",c()),ni(r,"alt",e.title)})),Le(t,i)})),Le(t,r)}));var w=ge($,2),k=j((()=>ki((()=>{m(),i("clickContent",e.value)}))));w.__click=function(...t){Gt(k)?.apply(this,t)};var _=j((()=>ki((t=>{t&&"Enter"==t.key&&(m(),i("clickContent",e.value))}))));w.__keyup=function(...t){Gt(_)?.apply(this,t)};var I=de(w);qe(I,(()=>e.title),(t=>{var r=_o(),n=j((()=>ki((t=>{t&&"Enter"==t.key&&(m(),i("clickTitle",e.value))}))));r.__keyup=function(...t){Gt(n)?.apply(this,t)};var s=j((()=>ki((()=>{m(),i("clickTitle",e.value)}))));r.__click=function(...t){Gt(s)?.apply(this,t)},qe(de(r),g,(t=>{var i=Ee();qe(he(i),(()=>"string"==typeof e.title),(t=>{var i=Ee();const r=j(g);ri(he(i),(()=>Gt(r)),((t,i)=>{i(t,Ri({get title(){return e.title}},f,{$$events:{change(t){Ii.call(this,e,t)}}}))})),Le(t,i)}),(t=>{var i=Ee();const r=j(g);ri(he(i),(()=>Gt(r)),((t,i)=>{i(t,Ri((()=>e.title),f,{$$events:{change(t){Ii.call(this,e,t)}}}))})),Le(t,i)})),Le(t,i)}),(t=>{var i=Ce();tt((()=>je(i,e.title))),Le(t,i)})),Le(t,r)})),qe(ge(I,2),(()=>e.description),(t=>{var r=Io(),n=j((()=>ki((t=>{t&&"Enter"==t.key&&(m(),i("clickDescription",e.value))}))));r.__keyup=function(...t){Gt(n)?.apply(this,t)};var s=j((()=>ki((()=>{m(),i("clickDescription",e.value)}))));r.__click=function(...t){Gt(s)?.apply(this,t)},qe(de(r),(()=>e.descriptionComponent),(t=>{var i=Ee();qe(he(i),(()=>"string"==typeof e.description),(t=>{var i=Ee();const r=j((()=>e.descriptionComponent));ri(he(i),(()=>Gt(r)),((t,i)=>{i(t,Ri({get value(){return e.description}},p,{$$events:{change(t){Ii.call(this,e,t)},click(t){Ii.call(this,e,t)}}}))})),Le(t,i)}),(t=>{var i=Ee();const r=j((()=>e.descriptionComponent));ri(he(i),(()=>Gt(r)),((t,i)=>{i(t,Ri((()=>e.description),p,{$$events:{change(t){Ii.call(this,e,t)},click(t){Ii.call(this,e,t)}}}))})),Le(t,i)})),Le(t,i)}),(t=>{var i=Ce();tt((()=>je(i,e.description))),Le(t,i)})),Le(t,r)})),qe(ge(w,2),(()=>Gt(b)&&Gt(b).length||Gt(y)&&Gt(y).length),(t=>{var e=Ao(),i=de(e);qe(i,(()=>Gt(b)&&Gt(b).length),(t=>{dn(t,{get values(){return Gt(b)},right:!0})})),qe(ge(i,2),(()=>Gt(y)&&Gt(y).length),(t=>{Oo(t,{get values(){return Gt(y)},right:!0})})),Le(t,e)})),tt((()=>ai(O,`list-item ${a()??""} ${l()??""} ${(h()?"list-item-last":"")??""} ${(d()?"list-item-first":"")??""}  ${`list-item-at-${u()}`??""} ${"list-item-"+(u()%2?"odd":"even")??""}`))),Le(t,O),te()}ke(["click","keyup"]);var Eo=Se("<div><!></div>");function Lo(t,e){Zt(e,!0);let i=Di(e,"classes",3,""),r=Di(e,"items",31,(()=>re([]))),n=Di(e,"actions",19,(()=>[])),s=Di(e,"links",19,(()=>[])),o=Di(e,"actionsVisible",3,!1),a=Di(e,"itemsHoverable",3,!1),l=Di(e,"overflowEllipsis",3,!1),c=Di(e,"hiddenImages",3,!1),u=Di(e,"itemClasses",3,""),d=Di(e,"idFieldName",3,"id"),h=Di(e,"emptyListPlaceholderComponent",3,co),g=Di(e,"emptyListPlaceholderComponentProps",19,(()=>({}))),f=Di(e,"listItemComponent",3,Co),p=Di(e,"listItemComponentProps",19,(()=>({}))),v=Di(e,"titleComponent",3,An),m=Di(e,"titleComponentProps",19,(()=>({size:6}))),b=Di(e,"descriptionComponentProps",19,(()=>({}))),y=Di(e,"imageComponentProps",19,(()=>({})));var O=Ee();qe(he(O),(()=>r().length),(t=>{var h=Eo();!function(t,e){Zt(e,!0);let i=Di(e,"idFieldName",3,"id"),r=Di(e,"items",23,(()=>[])),n=Di(e,"actions",19,(()=>[])),s=Di(e,"links",19,(()=>[])),o=Di(e,"itemClasses",3,""),a=Di(e,"listItemComponent",3,Co),l=Di(e,"listItemComponentProps",19,(()=>({}))),c=Di(e,"titleComponent",3,An),u=Di(e,"titleComponentProps",19,(()=>({size:6}))),d=Di(e,"descriptionComponentProps",19,(()=>({}))),h=Di(e,"imageComponentProps",19,(()=>({})));var g=Ee();qe(he(g),r,(t=>{var g=Ee();const f=j(a);Je(he(g),19,r,(t=>t[i()]),((t,i,a)=>{var g=Ee(),p=he(g),v=j((()=>0===Gt(a))),m=j((()=>Gt(a)===r().length-1));ri(p,(()=>Gt(f)),((t,g)=>{g(t,Ri(l,{get titleComponent(){return c()},get titleComponentProps(){return u()},get descriptionComponent(){return e.descriptionComponent},get descriptionComponentProps(){return d()},get imageComponent(){return e.imageComponent},get imageComponentProps(){return h()}},(()=>Gt(i)),{get listActions(){return n()},get listLinks(){return s()},get commonClasses(){return o()},get value(){return r()[Gt(a)]},set value(t){r()[Gt(a)]=t},get index(){return Gt(a)},get first(){return Gt(v)},get last(){return Gt(m)},$$events:{click(t){Ii.call(this,e,t)},clickContent(t){Ii.call(this,e,t)},clickDescription(t){Ii.call(this,e,t)},clickImage(t){Ii.call(this,e,t)},clickTitle(t){Ii.call(this,e,t)}}}))})),Le(t,g)})),Le(t,g)})),Le(t,g),te()}(de(h),{get items(){return r()},set items(t){r(t)},get itemClasses(){return u()},get listItemComponent(){return f()},get listItemComponentProps(){return p()},get idFieldName(){return d()},get titleComponent(){return v()},get titleComponentProps(){return m()},get descriptionComponent(){return e.descriptionComponent},get descriptionComponentProps(){return b()},get imageComponent(){return e.imageComponent},get imageComponentProps(){return y()},get actions(){return n()},get links(){return s()},$$events:{change(t){Ii.call(this,e,t)},click(t){Ii.call(this,e,t)},clickContent(t){Ii.call(this,e,t)},clickDescription(t){Ii.call(this,e,t)},clickImage(t){Ii.call(this,e,t)},clickTitle(t){Ii.call(this,e,t)}}}),tt((()=>{ni(h,"style",e.itemLength?`--length: ${e.itemLength};`:""),ai(h,`list ${i()??""} ${(o()?"has-visible-pointer-controls":"")??""} ${(a()?"has-hoverable-list-items":"")??""} ${(l()?"has-overflow-ellipsis":"")??""} ${(c()?"has-hidden-images":"")??""}`)})),Le(t,h)}),(t=>{var e=Ee();const i=j(h);ri(he(e),(()=>Gt(i)),((t,e)=>{e(t,Ri(g))})),Le(t,e)})),Le(t,O),te()}var To=Se("<!> <!>",1);var xo=Se('<div role="button" tabindex="0"><!></div>');function No(t,e){Zt(e,!0);const i=ji();let r=Di(e,"classes",3,""),n=Di(e,"title",3,""),s=Di(e,"narrow",3,!1);var o=xo(),a=j((()=>i("click")));o.__click=function(...t){Gt(a)?.apply(this,t)};var l=j((()=>i("keyup")));o.__keyup=function(...t){Gt(l)?.apply(this,t)},ii(de(o),(()=>e.children??d)),tt((()=>{ni(o,"title",n()),ai(o,`column ${r()??""} ${(s()?"is-narrow":"")??""}`)})),Le(t,o),te()}ke(["click","keyup"]);var Fo=Se('<div role="button" tabindex="0"><!></div>');function Mo(t,e){Zt(e,!0);const i=ji();let r=Di(e,"classes",3,"");var n=Fo(),s=j((()=>i("click")));n.__click=function(...t){Gt(s)?.apply(this,t)};var o=j((()=>i("keyup")));n.__keyup=function(...t){Gt(o)?.apply(this,t)},ii(de(n),(()=>e.children??d)),tt((()=>ai(n,`columns ${r()??""}`))),Le(t,n),te()}ke(["click","keyup"]);var Ro=Se('<div role="button" tabindex="0"><!></div>');function Uo(t,e){Zt(e,!0);const i=ji();let r=Di(e,"id",3,""),n=Di(e,"classes",3,""),s=Di(e,"widescreen",3,!1),o=Di(e,"fullhd",3,!1),a=Di(e,"maxDesktop",3,!1),l=Di(e,"maxWidescreen",3,!1),c=Di(e,"fluid",3,!1);var u=Ro(),h=j((()=>i("click")));u.__click=function(...t){Gt(h)?.apply(this,t)};var g=j((()=>i("keyup")));u.__keyup=function(...t){Gt(g)?.apply(this,t)},ii(de(u),(()=>e.children??d)),tt((()=>{ni(u,"id",r()),ai(u,`container ${n()??""}`),li(u,"is-widescreen",s()),li(u,"is-fullhd",o()),li(u,"is-max-desktop",a()),li(u,"is-max-widescreen",l()),li(u,"is-fluid",c())})),Le(t,u),te()}ke(["click","keyup"]);var Do=Se("<footer><!></footer>");var Po=Se('<section role="button"><!></section>');ke(["click","keyup"]);var jo=Se('<nav class="level"><div class="level-left"><!></div> <div class="level-right"><!></div></nav>');var Wo=Object.freeze({__proto__:null,UIColumn:No,UIColumns:Mo,UIContainer:Uo,UIFooter:function(t,e){Zt(e,!0);let i=Di(e,"id",3,""),r=Di(e,"classes",3,"");var n=Do();ii(de(n),(()=>e.children??d)),tt((()=>{ni(n,"id",i()),ai(n,`footer  ${r()??""} `)})),Le(t,n),te()},UILevel:function(t,e){Zt(e,!0);var i=jo(),r=de(i);ii(de(r),(()=>e.left??d)),ii(de(ge(r,2)),(()=>e.right??d)),Le(t,i),te()},UILevelItem:function(t,e){Zt(e,!0);let i=Di(e,"tag",3,"div");var r=Ee();!function(t,e,i,r){var n,s,o,a=null,l=t,c=He;et((()=>{const t=e()||null;var i="svg"===t?"http://www.w3.org/2000/svg":null;if(t!==n){var u=He;Ke(c),o&&(null===t?lt(o,(()=>{o=null,s=null})):t===s?dt(o):(ot(o),Pe(!1))),t&&t!==s&&(o=it((()=>{if(Ae(a=i?document.createElementNS(i,t):document.createElement(t),a),r){var e=a.appendChild(le());r(a,e)}St.nodes_end=a,l.before(a)}))),(n=t)&&(s=n),Pe(!0),Ke(u)}}),w)}(he(r),i,0,((t,i)=>{var r=Ee();qe(he(r),(()=>e.children),(t=>{var i=Ee();ii(he(i),(()=>e.children)),Le(t,i)}),(t=>{})),Le(i,r)})),Le(t,r),te()},UISection:function(t,e){Zt(e,!0);const i=ji();let r=Di(e,"id",3,""),n=Di(e,"classes",3,""),s=Di(e,"tabindex",3,0);var o=Po(),a=j((()=>i("click")));o.__click=function(...t){Gt(a)?.apply(this,t)};var l=j((()=>i("keyup")));o.__keyup=function(...t){Gt(l)?.apply(this,t)},ii(de(o),(()=>e.children??d)),tt((()=>{ni(o,"id",r()),ai(o,`section ${(e.size?"is-"+e.size:"")??""}  ${n()??""}`),ni(o,"tabindex",s())})),Le(t,o),te()}});function Bo(t,e,i,r,n){let s={field:e(),value:i()};return r(!0),n("change",s),!0}function zo(t,e,i,r){let n={field:e(),value:t.currentTarget.value};return i(!0),r("change",n),!0}var Vo=Se("<p> </p>"),qo=Se('<span class="icon is-small is-left"><i></i></span>'),Ho=Se('<i class="fas fa-check"></i>'),Ko=Se('<i class="fas fa-exclamation-triangle"></i>'),Go=Se('<span class="icon is-small is-right"><!></span>'),Jo=Se('<input type="number"> <!> <!>',1),Yo=Se("<div><!></div> <!>",1);function Qo(t,e){Zt(e,!0);const i=xi();let r,n,s=Si(),o=Di(e,"inputStarted",15,!1),a=Di(e,"value",15,0),l=Di(e,"placeholder",3,"0.0"),c=Di(e,"min",3,0),u=Di(e,"max",3,100),d=Di(e,"step",3,1),h=Di(e,"fieldname",3,"number"),g=Di(e,"icon",3,!1),f=Di(e,"required",3,!0),p=Di(e,"disabled",3,!1),v=Di(e,"readonly",3,!1),m=Di(e,"valid",3,!0),b=Di(e,"validated",3,!1),y=Di(e,"errors",3,!1),O=Di(e,"formErrors",3,!1),$=Di(e,"formLevelError",3,!1),w=j((()=>(g()?" has-icons-left ":"")+" has-icons-right "));Pi((()=>{r=[].concat(y()?y():[],O()?O():[])})),Pi((()=>{n=!(b()&&m())&&o()}));let k,_=j((()=>!1===m()||$()));Pi((()=>{k=!0!==m()&&o()?Gi.CLASS_ERR:Gi.CLASS_OK}));var I=Yo(),A=he(I);qe(de(A),v,(t=>{var e=Vo(),i=de(e);tt((()=>je(i,a()))),Le(t,e)}),(t=>{var e=Jo(),r=he(e);ai(r,`input ${k??""}`),r.__change=[Bo,h,a,o,s],r.__input=[zo,h,o,s];var n=ge(r,2);qe(n,g,(t=>{var e=qo(),i=de(e);tt((()=>ai(i,`fas fa-${g()??""}`))),Le(t,e)})),qe(ge(n,2),(()=>!0===b()),(t=>{var e=Go();qe(de(e),(()=>!0===m()),(t=>{Le(t,Ho())}),(t=>{var e=Ee();qe(he(e),(()=>!1===m()),(t=>{Le(t,Ko())}),null,!0),Le(t,e)})),Le(t,e)})),tt((()=>{ni(r,"id",`form-field-textfield-${h()??""}`),ni(r,"min",c()),ni(r,"max",u()),ni(r,"step",d()),ni(r,"name",h()),ni(r,"invalid",Gt(_)),r.disabled=p(),r.required=f(),r.readOnly=v(),ni(r,"placeholder",Ti(sr,"$LOCALE",i)[l()]),ni(r,"autocomplete",h()),ni(r,"aria-controls",`input-field-helper-${h()??""}`),ni(r,"aria-describedby",`input-field-helper-${h()??""}`)})),mi(r,a),Le(t,e)})),Hr(ge(A,2),{get errors(){return r},set errors(t){r=t},get show(){return n},set show(t){n=t},get classes(){return k},set classes(t){k=t},get id(){return`input-field-helper-${h()??""}`}}),tt((()=>ai(A,`control ${Gt(w)??""}`))),Le(t,I),te()}ke(["change","input"]);var Xo=Se("<!> <!> <!>",1),Zo=Se("<!> <!> <!>",1),ta=Se("<!> <!> <!> <!>",1);function ea(t,e,i,r){let n={field:e(),value:t.currentTarget.value};return i(!0),r("change",n),!0}function ia(t,e,i,r){let n={field:e(),value:t.currentTarget.value};return i(!0),r("change",n),!0}var ra=Se('<span class="icon is-small is-left"><i></i></span>'),na=Se('<i class="fas fa-check"></i>'),sa=Se('<i class="fas fa-exclamation-triangle"></i>'),oa=Se('<span class="icon is-small is-right"><!></span>'),aa=Se('<div><input type="password"> <!> <!></div> <!>',1);ke(["change","input"]);var la=Se("<a><figure><img></figure></a>"),ca=Se('<figure role="button" tabindex="0"><img></figure>');function ua(t,e){Zt(e,!0);const i=ji();let r=Di(e,"cors",3,"anonymous"),n=Di(e,"size",3,64),s=Di(e,"contained",3,!0),o=Di(e,"covered",3,!0),a=Di(e,"classes",3,""),l=j((()=>isNaN(n())?`is-${n()}`:`is-${n()}x${n()}`)),c=j((()=>s()?"is-contained":"")),u=j((()=>o()?"is-covered":""));var d=Ee();qe(he(d),(()=>e.urlFull),(t=>{var n=la(),s=j((()=>i("click")));n.__click=function(...t){Gt(s)?.apply(this,t)};var o=de(n),d=de(o);tt((()=>{ni(n,"href",e.urlFull),ni(n,"alt",e.title),ai(o,`image ${Gt(l)??""} ${Gt(c)??""} ${Gt(u)??""} ${a()??""}`),ni(d,"alt",e.title),ni(d,"src",e.url),ni(d,"crossorigin",r())})),Le(t,n)}),(t=>{var n=ca(),s=j((()=>i("click")));n.__click=function(...t){Gt(s)?.apply(this,t)};var o=j((()=>i("keyup")));n.__keyup=function(...t){Gt(o)?.apply(this,t)};var d=de(n);tt((()=>{ai(n,`image ${Gt(l)??""} ${Gt(c)??""} ${Gt(u)??""} ${a()??""}`),ni(d,"alt",e.title),ni(d,"src",e.url),ni(d,"crossorigin",r())})),Le(t,n)})),Le(t,d),te()}function da(t,e,i,r,n){let s={field:e(),value:i()};return r(!0),n("change",s),!0}function ha(t,e,i,r){let n={field:e(),value:t.currentTarget.value};return i(!0),r("change",n),!0}ke(["click","keyup"]);var ga=Se("<p> </p>"),fa=Se("<option></option>"),pa=Se("<datalist></datalist>"),va=Se('<span class="icon is-small is-left"><i></i></span>'),ma=Se('<input type="range"> <output> </output> <!> <!>',1),ba=Se("<div><!></div> <!>",1);function ya(t,e,i,r,n,s){i(e(t.currentTarget.value));let o={field:r(),value:i()};return n(!0),s("change",o),!0}function Oa(t,e,i,r,n,s){i(e(Math.round(parseInt(t.currentTarget.value))));let o={field:r(),value:i()};return n(!0),s("change",o),!0}ke(["change","input"]);var $a=Se("<p> </p>"),wa=Se("<option></option>"),ka=Se("<datalist></datalist>"),_a=Se('<span class="icon is-small is-left"><i></i></span>'),Ia=Se('<input type="range"> <output editable="true"> </output> <!> <!>',1),Aa=Se("<div><!></div> <!>",1);function Sa(t,e,i,r,n){let s={field:e(),value:"checkbox"===t.currentTarget.type?t.currentTarget.checked:i()};return r(!0),n("change",s),!0}ke(["change","input"]);var Ca=Se('<!> <input type="checkbox"> <label class="label"><!></label>',1),Ea=Se('<div class="control"><!></div> <!>',1);function La(t,e,i,r,n,s,o){console.log("switch list element input",t);const a=t.target.id.split("-variant-").at(-1);console.log(a),t.target.checked?e(a):i(a);let l={field:r(),value:n()};return s(!0),o("change",l),!0}ke(["input"]);var Ta=Se('<div class="switch-list-item"><input type="checkbox"> <label class="label"> </label></div>'),xa=Se('<div class="control"><!></div> <!>',1);function Na(t,e,i){t&&t.preventDefault();let r=t.currentTarget.dataset.id;return e().includes(r)&&(e().splice(e().indexOf(r),1),e(e()),i()),!1}function Fa(t,e,i,r,n,s){t&&t.preventDefault();let o=t.currentTarget.parentNode.querySelector("select").value;const a=e(o);return!!a&&(!!i()(a,r())&&(o&&-1===n().indexOf(o)&&(n().push(o),n(n()),s()),!1))}ke(["input"]);var Ma=Se('<button class="delete is-small"></button>'),Ra=Se("<span> <!></span>"),Ua=Se("<option> </option>"),Da=Se('<div class="column"><div class="control"><div class="select is-small"><select><option selected> </option><!></select></div> <button class="button is-primary is-small"> </button></div></div>'),Pa=Se('<div class="control columns"><div></div> <!></div> <!>',1);function ja(t,e,i,r,n){t.preventDefault();let s=Gi.formatPhone(t.currentTarget.value),o={field:e(),value:s};return i(s),r(!0),n("change",o),!1}function Wa(t,e,i,r,n){t.preventDefault();let s=Gi.formatPhone(t.currentTarget.value),o={field:e(),value:s};return i(s),r(!0),n("change",o),!1}ke(["click"]);var Ba=Se("<p> </p>"),za=Se('<span class="icon is-small is-left"><i></i></span>'),Va=Se('<i class="fas fa-check"></i>'),qa=Se('<i class="fas fa-exclamation-triangle"></i>'),Ha=Se('<span class="icon is-small is-right"><!></span>'),Ka=Se('<input type="tel"> <!> <!>',1),Ga=Se("<div><!></div> <!>",1);ke(["change","input"]);var Ja=Object.freeze({__proto__:null,UIAutocomplete:function(t,e){Zt(e,!0);const i=xi();let r=Si(),n=Di(e,"idField",3,"_id"),s=Di(e,"labelField",3,"title"),o=Di(e,"minCharactersToSearch",3,3),a=Di(e,"selectFirstIfEmpty",3,!1),l=Di(e,"maxItemsToShowInList",3,20),c=Di(e,"noResultsText",3,"Ничего не найдено"),u=Di(e,"showClear",3,!0),d=Di(e,"value",15),h=Di(e,"placeholder",3,""),g=Di(e,"fieldname",3,"checkbox-list"),f=Di(e,"disabled",3,!1),p=Di(e,"readonly",3,!1),v=Di(e,"icon",3,!1),m=Di(e,"inputStarted",15,!1),b=Di(e,"valid",3,!0),y=Di(e,"validated",3,!1),O=Di(e,"errors",3,!1),$=Di(e,"formErrors",3,!1);Di(e,"formLevelError",3,!1);let w,k,_,I=Di(e,"searchFunction",3,(()=>[]));function A(){let t={field:g(),value:d()};return m(!0),r("change",t),!0}Pi((()=>{w=[].concat(O()?O():[],$()?$():[])})),Pi((()=>{k=!(y()&&b())&&m()})),Pi((()=>{_=!0!==b()&&m()?Gi.CLASS_ERR:Gi.CLASS_OK}));var S=Ee();qe(he(S),p,(t=>{var e=j((()=>d()?d().title:""));Un(t,{get value(){return Gt(e)},get fieldname(){return g()},get placeholder(){return h()},get icon(){return v()}})}),(t=>{var e=ss(),r=he(e);qe(de(r),p,(t=>{var e=ns(),r=de(e);tt((()=>je(r,Ti(sr,"$LOCALE",i)[d()]))),Le(t,e)}),(t=>{rs(t,{get showClear(){return u()},get disabled(){return f()},get placeholder(){return h()},get noResultsText(){return c()},onChange:A,get searchFunction(){return I()},hideArrow:!0,get labelFieldName(){return s()},get valueFieldName(){return n()},get minCharactersToSearch(){return o()},get selectFirstIfEmpty(){return a()},get maxItemsToShowInList(){return l()},get selectedItem(){return d()},set selectedItem(t){d(t)}})})),Hr(ge(r,2),{get errors(){return w},set errors(t){w=t},get show(){return k},set show(t){k=t},get classes(){return _},set classes(t){_=t},get id(){return`input-field-helper-${g()??""}`}}),Le(t,e)})),Le(t,S),te()},UICheckbox:function(t,e){Zt(e,!0);const i=xi(),r=()=>Ti(sr,"$LOCALE",i);let n,s,o=Si(),a=Di(e,"inputStarted",15,!1),l=Di(e,"value",15,!1),c=Di(e,"label",3,"checkbox"),u=Di(e,"placeholder",3,""),d=Di(e,"fieldname",3,"checkbox"),h=Di(e,"icon",3,!1),g=Di(e,"required",3,!0),f=Di(e,"readonly",3,!1),p=Di(e,"disabled",3,!1),v=Di(e,"valid",3,!0),m=Di(e,"validated",3,!1),b=Di(e,"errors",3,!1),y=Di(e,"formErrors",3,!1),O=Di(e,"formLevelError",3,!1),$=j((()=>(h()?" has-icons-left ":"")+" has-icons-right "));Pi((()=>{n=[].concat(b()?b():[],y()?y():[])})),Pi((()=>{s=!(m()&&v())&&a()}));let w,k=j((()=>!1===v()||O()));Pi((()=>{w=!0!==v()&&a()?Gi.CLASS_ERR:Gi.CLASS_OK}));var _=cs(),I=he(_),A=de(I);qe(de(A),f,(t=>{var e=j((()=>[{value:l()}]));xr(t,{get LC_TRUE(){return c()},get LC_FALSE(){return c()},get values(){return Gt(e)}})}),(t=>{var e=ls(),i=he(e);i.__change=[os,d,l,a,o],i.__input=[as,d,l,a,o];var n=ge(i);tt((()=>{ni(i,"id",`form-field-checkbox-${d()??""}`),ni(i,"placeholder",r()[u()]),ni(i,"name",d()),i.required=g(),i.readOnly=f(),ni(i,"invalid",Gt(k)),ni(i,"aria-controls",`input-field-helper-${d()??""}`),ni(i,"aria-describedby",`input-field-helper-${d()??""}`),i.disabled=p(),je(n,` ${r()[c()]??""}`)})),bi(i,l),Le(t,e)})),Hr(ge(I,2),{get errors(){return n},set errors(t){n=t},get show(){return s},set show(t){s=t},get classes(){return w},set classes(t){w=t},get id(){return`input-field-helper-${d()??""}`}}),tt((()=>{ai(I,`control ${Gt($)??""}`),A.disabled=p(),ni(A,"for",`form-field-checkbox-${d()??""}`)})),Le(t,_),te()},UICheckboxList:function(t,e){Zt(e,!0);const i=xi();let r,n,s=Si(),o=Di(e,"inputStarted",15,!1),a=Di(e,"value",19,(()=>[])),l=Di(e,"fieldname",3,"checkbox-list"),c=Di(e,"readonly",3,!1),u=Di(e,"disabled",3,!1),d=Di(e,"valid",3,!0),h=Di(e,"validated",3,!1),g=Di(e,"errors",3,!1),f=Di(e,"formErrors",3,!1),p=Di(e,"formLevelError",3,!1);Pi((()=>{r=[].concat(g()?g():[],f()?f():[])})),Pi((()=>{n=!(h()&&d())&&o()}));let v,m=j((()=>!1===d()||p()));Pi((()=>{v=!0!==d()&&o()?Gi.CLASS_ERR:Gi.CLASS_OK}));var b=gs(),y=he(b);Je(y,21,a,(t=>t.id),((t,e)=>{var r=hs(),n=de(r);n.__change=[us,a,l,o,s],n.__input=[ds,a,l,o,s];var d=ge(n);tt((()=>{r.disabled=u()||Gt(e).disabled,ni(r,"for",`form-field-checkbox-${l()+"_"+Gt(e).id??""}`),ni(n,"data-id",Gt(e).id),ni(n,"id",`form-field-checkboxlist-${l()+"_"+Gt(e).id??""}`),ni(n,"placeholder",sr[Gt(e).placeholder]),ni(n,"name",l()+"_"+Gt(e).id),n.readOnly=c(),ni(n,"invalid",Gt(m)),ni(n,"aria-controls",`input-field-helper-${l()+"_"+Gt(e).id??""}`),ni(n,"aria-describedby",`input-field-helper-${l()+"_"+Gt(e).id??""}`),n.disabled=u()||Gt(e).disabled,je(d,` ${Ti(sr,"$LOCALE",i)[Gt(e).label]??""}`)})),bi(n,(()=>Gt(e).value),(t=>Gt(e).value=t)),Le(t,r)})),Hr(ge(y,2),{get errors(){return r},set errors(t){r=t},get show(){return n},set show(t){n=t},get classes(){return v},set classes(t){v=t},get id(){return`input-field-helper-${l()??""}`}}),Le(t,b),te()},UIColor:function(t,e){Zt(e,!0);const i=xi();let r,n,s=Si(),o=Di(e,"inputStarted",15,!1),a=Di(e,"value",15,""),l=Di(e,"placeholder",3,""),c=Di(e,"fieldname",3,"color"),u=Di(e,"icon",3,!1),d=Di(e,"required",3,!0),h=Di(e,"readonly",3,!1),g=Di(e,"valid",3,!0),f=Di(e,"validated",3,!1),p=Di(e,"errors",3,!1),v=Di(e,"formErrors",3,!1),m=Di(e,"formLevelError",3,!1),b=j((()=>(u()?" has-icons-left ":"")+" has-icons-right "));Pi((()=>{r=[].concat(p()?p():[],v()?v():[])})),Pi((()=>{n=!(f()&&g())&&o()}));let y,O=j((()=>!1===g()||m()));Pi((()=>{y=!0!==g()&&o()?Gi.CLASS_ERR:Gi.CLASS_OK}));var $=Os(),w=he($),k=de(w);ai(k,`input ${y??""}`),k.__change=[fs,c,o,s],k.__input=[ps,c,o,s];var _=ge(k,2);qe(_,u,(t=>{var e=vs(),i=de(e);tt((()=>ai(i,`fas fa-${u()??""}`))),Le(t,e)})),qe(ge(_,2),(()=>!0===f()),(t=>{var e=ys();qe(de(e),(()=>!0===g()),(t=>{Le(t,ms())}),(t=>{var e=Ee();qe(he(e),(()=>!1===g()),(t=>{Le(t,bs())}),null,!0),Le(t,e)})),Le(t,e)})),Hr(ge(w,2),{get errors(){return r},set errors(t){r=t},get show(){return n},set show(t){n=t},get classes(){return y},set classes(t){y=t},get id(){return`input-field-helper-${c()??""}`}}),tt((()=>{ai(w,`control ${Gt(b)??""}`),ni(k,"id",`form-field-color-${c()??""}`),ni(k,"name",c()),ni(k,"invalid",Gt(O)),k.required=d(),ni(k,"placeholder",Ti(sr,"$LOCALE",i)[l()]),ni(k,"autocomplete",c()),ni(k,"aria-controls",`input-field-helper-${c()??""}`),k.readOnly=h(),ni(k,"aria-describedby",`input-field-helper-${c()??""}`)})),mi(k,a),Le(t,$),te()},UIControl:function(t,e){Zt(e,!0);let i=Di(e,"classes",3,"");var r=$s();ii(de(r),(()=>e.children??d)),tt((()=>ai(r,`control ${i()??""}`))),Le(t,r),te()},UIDate:function(t,e){Zt(e,!0);const i=xi();let r,n=Si(),s=Di(e,"inputStarted",15,!1),o=Di(e,"value",31,(()=>re(new Date))),a=Di(e,"placeholder",3,""),l=Di(e,"fieldname",3,"datetime"),c=Di(e,"pattern",3,"d{4}-d{2}-d{2}"),u=Di(e,"icon",3,!1),d=Di(e,"required",3,!0),h=Di(e,"readonly",3,!1),g=Di(e,"valid",3,!0),f=Di(e,"validated",3,!1),p=Di(e,"errors",3,!1),v=Di(e,"formErrors",3,!1),m=Di(e,"formLevelError",3,!1),b=j((()=>(u()?" has-icons-left ":"")+" has-icons-right "));Pi((()=>{r=[].concat(p()?p():[],v()?v():[])}));let y,O,$=j((()=>!1===g()||m()));Pi((()=>{y=!(f()&&g())&&s()})),Pi((()=>{O=!0!==g()&&s()?Gi.CLASS_ERR:Gi.CLASS_OK})),Ai((()=>{o()instanceof Date?o(o().toISOString().split("T")[0]):o().indexOf("T")>0&&o(o().split("T")[0])}));var w=Ls(),k=he(w);qe(de(k),h,(t=>{var e=_s(),i=de(e),r=de(i);tt((()=>je(r,Gi.tryFormatLocaleDateTime(o())))),tt((()=>ni(i,"datetime",o()))),Le(t,e)}),(t=>{var e=Es(),r=he(e);ai(r,`input ${O??""}`),r.__change=[ws,l,s,n],r.__input=[ks,l,s,n];var p=ge(r,2);qe(p,u,(t=>{var e=Is(),i=de(e);tt((()=>ai(i,`fas fa-${u()??""}`))),Le(t,e)})),qe(ge(p,2),(()=>!0===f()),(t=>{var e=Cs();qe(de(e),(()=>!0===g()),(t=>{Le(t,As())}),(t=>{var e=Ee();qe(he(e),(()=>!1===g()),(t=>{Le(t,Ss())}),null,!0),Le(t,e)})),Le(t,e)})),tt((()=>{ni(r,"id",`form-field-date-${l()??""}`),ni(r,"name",l()),ni(r,"invalid",Gt($)),r.required=d(),ni(r,"placeholder",Ti(sr,"$LOCALE",i)[a()]),ni(r,"pattern",c()),r.readOnly=h(),ni(r,"autocomplete",l()),ni(r,"aria-controls",`input-field-helper-${l()??""}`),ni(r,"aria-describedby",`input-field-helper-${l()??""}`)})),mi(r,o),Le(t,e)})),Hr(ge(k,2),{get errors(){return r},set errors(t){r=t},get show(){return y},set show(t){y=t},get classes(){return O},set classes(t){O=t},get id(){return`input-field-helper-${l()??""}`}}),tt((()=>ai(k,`control ${Gt(b)??""}`))),Le(t,w),te()},UIDatetimeInTZ:function(t,e){Zt(e,!0);let i=Si();function r(t,e=!1){return t.split(".")[0]+(e?"":"Z")}function n(t,e){try{const i=new Date(s(t)).getTime(),n=-6e4*e;if(S(i+n)){const t=new Date(i+n);return r(t.toISOString(),!0)}}catch(t){return}}function s(t){return t&&"Z"!==t.at(-1)?t+"Z":t}let o,a,l=Di(e,"inputStarted",15,!1),c=Di(e,"fieldname",3,"datetime"),u=Di(e,"value",31,(()=>re(r((new Date).toISOString())))),d=Di(e,"timezoneOffset",3,0),h=Di(e,"icon",3,!1),g=Di(e,"required",3,!1),f=Di(e,"disabled",3,!1),p=Di(e,"readonly",3,!1),v=Di(e,"valid",3,!0),m=Di(e,"validated",3,!1),b=Di(e,"errors",3,!1),y=Di(e,"formErrors",3,!1),O=Di(e,"formLevelError",3,!1),$=j((()=>(h()?" has-icons-left ":"")+" has-icons-right "));Pi((()=>{o=[].concat(b()?b():[],y()?y():[])})),Pi((()=>{a=!(m()&&v())&&l()}));let w,k=j((()=>!1===v()||O()));Pi((()=>{w=!0!==v()&&l()?Gi.CLASS_ERR:Gi.CLASS_OK}));let _,I=x(void 0);const A=t=>{S(t)&&(_=Gt(I),U(I,re(t)))};Ai((()=>{A(n(u(),d()))}));const S=t=>{try{return new Date(t),!0}catch(t){return!1}};let C=j((()=>isNaN(d())?"":(d()>0?"":"+")+(d()/-60).toFixed(1)));function E(t){return t.currentTarget.value&&Gt(I)&&S(Gt(I))?(u()!==n(Gt(I),-d())&&(()=>{A(Gt(I)),u(s(n(Gt(I),-d())));let t={field:c(),value:u()};l(!0),i("change",t)})(),!0):(U(I,re(_)),!1)}var L=Ee();qe(he(L),(()=>Gt(I)),(t=>{var e=Us(),i=he(e);qe(de(i),p,(t=>{var e=Ts(),i=de(e);tt((()=>je(i,Gt(I)))),Le(t,e)}),(t=>{var e=Rs(),i=he(e);ai(i,`input ${w??""}`),i.__change=E,i.__input=E;var r=ge(i,2);qe(r,h,(t=>{var e=xs(),i=de(e);tt((()=>{ni(e,"title",Gt(C)),ai(i,`fas fa-${h()??""}`)})),Le(t,e)})),qe(ge(r,2),(()=>!0===m()),(t=>{var e=Ms();qe(de(e),(()=>!0===v()),(t=>{Le(t,Ns())}),(t=>{var e=Ee();qe(he(e),(()=>!1===v()),(t=>{Le(t,Fs())}),null,!0),Le(t,e)})),Le(t,e)})),tt((()=>{ni(i,"id",`form-field-datetime-in-timezone-${c()??""}`),ni(i,"name",c()),ni(i,"invalid",Gt(k)),i.disabled=f(),i.required=g(),i.readOnly=p(),ni(i,"autocomplete",c()),ni(i,"aria-controls",`input-field-helper-${c()??""}`),ni(i,"aria-describedby",`input-field-helper-${c()??""}`)})),we("blur",i,E),mi(i,(()=>Gt(I)),(t=>U(I,t))),Le(t,e)})),Hr(ge(i,2),{get errors(){return o},set errors(t){o=t},get show(){return a},set show(t){a=t},get classes(){return w},set classes(t){w=t},get id(){return`input-field-helper-${c()??""}`}}),tt((()=>ai(i,`control ${Gt($)??""}`))),Le(t,e)})),Le(t,L),te()},UIEmail:function(t,e){Zt(e,!0);const i=xi();let r,n,s=Si(),o=Di(e,"inputStarted",15,!1),a=Di(e,"value",15,""),l=Di(e,"placeholder",3,""),c=Di(e,"fieldname",3,"email"),u=Di(e,"icon",3,!1),d=Di(e,"required",3,!0),h=Di(e,"readonly",3,!1),g=Di(e,"disabled",3,!1),f=Di(e,"valid",3,!0),p=Di(e,"validated",3,!1),v=Di(e,"errors",3,!1),m=Di(e,"formErrors",3,!1),b=Di(e,"formLevelError",3,!1),y=j((()=>(u()?" has-icons-left ":"")+" has-icons-right "));Pi((()=>{r=[].concat(v()?v():[],m()?m():[])})),Pi((()=>{n=!(p()&&f())&&o()}));let O,$=j((()=>!1===f()||b()));Pi((()=>{O=!0!==f()&&o()?Gi.CLASS_ERR:Gi.CLASS_OK}));var w=Hs(),k=he(w);qe(de(k),h,(t=>{var e=js(),i=de(e);tt((()=>je(i,a()))),Le(t,e)}),(t=>{var e=qs(),r=he(e);ai(r,`input ${O??""}`),r.__change=[Ds,c,o,s],r.__input=[Ps,c,o,s];var n=ge(r,2);qe(n,u,(t=>{var e=Ws(),i=de(e);tt((()=>ai(i,`fas fa-${u()??""}`))),Le(t,e)})),qe(ge(n,2),(()=>!0===p()),(t=>{var e=Vs();qe(de(e),(()=>!0===f()),(t=>{Le(t,Bs())}),(t=>{var e=Ee();qe(he(e),(()=>!1===f()),(t=>{Le(t,zs())}),null,!0),Le(t,e)})),Le(t,e)})),tt((()=>{ni(r,"id",`form-field-email-${c()??""}`),ni(r,"name",c()),ni(r,"invalid",Gt($)),r.required=d(),r.readOnly=h(),r.disabled=g(),ni(r,"placeholder",Ti(sr,"$LOCALE",i)[l()]),ni(r,"autocomplete",c()),ni(r,"aria-controls",`input-field-helper-${c()??""}`),ni(r,"aria-describedby",`input-field-helper-${c()??""}`)})),mi(r,a),Le(t,e)})),Hr(ge(k,2),{get errors(){return r},set errors(t){r=t},get show(){return n},set show(t){n=t},get classes(){return O},set classes(t){O=t},get id(){return`input-field-helper-${c()??""}`}}),tt((()=>ai(k,`control ${Gt(y)??""}`))),Le(t,w),te()},UIHidden:function(t,e){let i=Di(e,"value",15,""),r=Di(e,"fieldname",3,"hidden"),n=Di(e,"required",3,!0),s=Di(e,"readonly",3,!1);var o=Ks();tt((()=>{o.required=n(),o.readOnly=s(),ni(o,"name",r())})),mi(o,i),Le(t,o)},UIJSONArea:function(t,e){Zt(e,!0);let i=Si(),r=Di(e,"inputStarted",15,!1),n=Di(e,"value",31,(()=>re({}))),s=Di(e,"placeholder",3,""),o=Di(e,"fieldname",3,"jsonarea"),a=Di(e,"icon",3,!1),l=Di(e,"rows",3,10),c=Di(e,"required",3,!0),u=Di(e,"readonly",3,!1),d=Di(e,"disabled",3,!1),h=Di(e,"valid",15,!0),g=Di(e,"validated",3,!1),f=Di(e,"errors",15,!1),p=Di(e,"formErrors",3,!1),v=Di(e,"formLevelError",3,!1),m=x("{}");function b(t){try{n(JSON.parse(t)),h(!0),f(!1),r(!0),i("change",{field:o(),value:n()})}catch(t){h(!1),f([t.message])}}Ai((()=>{U(m,re(JSON.stringify(n(),null,4)))})),eo(t,{get inputStarted(){return r()},set inputStarted(t){r(t)},get value(){return Gt(m)},set value(t){U(m,re(t))},get placeholder(){return s()},get icon(){return a()},get rows(){return l()},get required(){return c()},get readonly(){return u()},get disabled(){return d()},get validated(){return g()},get formErrors(){return p()},get formLevelError(){return v()},$$events:{change:function(t){return b(t.detail.value),!0}}}),te()},UILabel:ro,UIListOfModels:function(t,e){Zt(e,!0),Si(),Di(e,"inputStarted",3,!1);let i=Di(e,"value",31,(()=>re([]))),r=Di(e,"placeholder",15,""),n=Di(e,"fieldname",15,"selectFromModel"),s=Di(e,"required",15,!0),o=Di(e,"readonly",3,!1),a=Di(e,"multiple",15,!1),l=Di(e,"size",15,8),c=Di(e,"valid",15,!0),u=Di(e,"validated",15,!1),d=Di(e,"errors",15,!1),h=Di(e,"formErrors",15,!1),g=Di(e,"formLevelError",15,!1),f=Di(e,"modelName",3,""),p=Di(e,"actionName",3,""),v=Di(e,"actionFilter",19,(()=>({}))),m=Di(e,"actionSorter",19,(()=>({}))),b=Di(e,"actionPager",19,(()=>({}))),y=Di(e,"actionSearch",3,void 0),O=Di(e,"optionId",3,":_id"),$=Di(e,"optionTitle",3,":title"),w=Di(e,"selectorUI",3,"UISelectFromModelOnDemandInline"),k=Di(e,"selectorUIProps",19,(()=>({}))),_=Di(e,"itemUI",3,"UIListItem"),I=Di(e,"itemUIProps",19,(()=>({}))),A=Di(e,"transformValueItemToListItem",3,(t=>t?{id:t._id,title:t.title,description:t.description,value:t}:void 0)),S=j((()=>i().map?i().map(A()):[]));const C=[{action(t){const e=t.value,r=i().findIndex((t=>t===e));if(r>-1){const t=[...i()];_r.moveItem(t,r,r-1),i(t)}},title:"",icon:"arrow-up",color:"normal"},{action:t=>{const e=t.value,r=i().findIndex((t=>t===e));if(r>-1){const t=[...i()];_r.moveItem(t,r,r+1),i(t)}},title:"",icon:"arrow-down",color:"normal"},{action:t=>{const e=t.value,r=i().findIndex((t=>t===e));r>-1&&(i().splice(r,1),i(i()))},title:"",icon:"trash",color:"danger"}];var E=To(),L=he(E),T=j((()=>oo.get(_())));Lo(L,Ri({get listItemComponent(){return Gt(T)}},I,{get items(){return Gt(S)},actions:C})),qe(ge(L,2),(()=>!o()),(t=>{var e=Ee();const o=j((()=>oo.get(w())));ri(he(e),(()=>Gt(o)),((t,e)=>{e(t,Ri(k,{get modelName(){return f()},get actionName(){return p()},get actionFilter(){return v()},get actionSorter(){return m()},get actionPager(){return b()},get actionSearch(){return y()},get optionId(){return O()},get optionTitle(){return $()},get placeholder(){return r()},set placeholder(t){r(t)},get fieldname(){return n()},set fieldname(t){n(t)},get required(){return s()},set required(t){s(t)},get multiple(){return a()},set multiple(t){a(t)},get size(){return l()},set size(t){l(t)},get valid(){return c()},set valid(t){c(t)},get validated(){return u()},set validated(t){u(t)},get errors(){return d()},set errors(t){d(t)},get formErrors(){return h()},set formErrors(t){h(t)},get formLevelError(){return g()},set formLevelError(t){g(t)},$$events:{resolve:t=>{return e=t.detail,Array.isArray(i())||i([]),i().push(e),void i(i());var e}}}))})),Le(t,e)})),Le(t,E),te()},UINamedNumbersList:function(t,e){Zt(e,!0);let i,r,n,s=Si(),o=Di(e,"fieldname",3,"numbers_list"),a=Di(e,"value",31,(()=>re({}))),l=Di(e,"label",3,"named numbers list"),c=Di(e,"inputStarted",3,!1),u=Di(e,"placeholder",15,"new item"),d=Di(e,"readonly",3,!1),h=Di(e,"valid",3,!0),g=Di(e,"validated",3,!1),f=Di(e,"errors",3,!1),p=Di(e,"formErrors",3,!1),v=j((()=>Object.keys(a()).map((t=>({id:t,title:t,number:a()[t]})))));Pi((()=>{i=[].concat(f()?f():[],p()?p():[])})),Pi((()=>{r=!(g()&&h())&&c()})),Pi((()=>{n=!0!==h()&&c()?Gi.CLASS_ERR:Gi.CLASS_OK}));let m=re({id:"",number:0});var b=ta(),y=he(b);An(y,{get title(){return l()},size:5});var O=ge(y,2);Je(O,17,(()=>Gt(v)),(t=>t.id),((t,e)=>{Mo(t,{children:(t,i)=>{var r=Xo(),n=he(r);No(n,{classes:"is-6",children:(t,i)=>{var r=Ce();tt((()=>je(r,Gt(e).title))),Le(t,r)},$$slots:{default:!0}});var l=ge(n,2);No(l,{classes:"is-4",children:(t,i)=>{var r=Ce();tt((()=>je(r,Gt(e).number))),Le(t,r)},$$slots:{default:!0}}),qe(ge(l,2),(()=>!d()),(t=>{No(t,{classes:"is-2",children:(t,i)=>{cn(t,{icon:"minus",action:()=>{return t=Gt(e).id,void(_r.objHas(a(),t)&&(delete a()[t],a(a()),s("change",{value:a(),field:o()})));var t}})},$$slots:{default:!0}})})),Le(t,r)},$$slots:{default:!0}})}));var $=ge(O,2);qe($,(()=>!d()),(t=>{Mo(t,{children:(t,e)=>{var i=Zo(),r=he(i);No(r,{classes:"is-6",children:(t,e)=>{Un(t,{get value(){return m.id},set value(t){m.id=t},get placeholder(){return u()},set placeholder(t){u(t)}})},$$slots:{default:!0}});var n=ge(r,2);No(n,{classes:"is-4",children:(t,e)=>{Qo(t,{get value(){return m.number},set value(t){m.number=t}})},$$slots:{default:!0}}),No(ge(n,2),{classes:"is-2",children:(t,e)=>{cn(t,{icon:"plus",action:()=>function(){const t=m.id.trim(),e=parseInt(m.number);!t||""===t||isNaN(e)||_r.objHas(a(),t)||a(a()[t]=e,!0),s("change",{value:a(),field:o()})}()})},$$slots:{default:!0}}),Le(t,i)},$$slots:{default:!0}})})),Hr(ge($,2),{get errors(){return i},set errors(t){i=t},get show(){return r},set show(t){r=t},get classes(){return n},set classes(t){n=t},get id(){return`input-field-helper-${o()??""}`}}),Le(t,b),te()},UINumber:Qo,UIPassword:function(t,e){Zt(e,!0);const i=xi();let r,n,s=Si(),o=Di(e,"inputStarted",15,!1),a=Di(e,"value",15,""),l=Di(e,"placeholder",3,""),c=Di(e,"fieldname",3,"password"),u=Di(e,"icon",3,!1),d=Di(e,"required",3,!0),h=Di(e,"readonly",3,!1),g=Di(e,"valid",3,!0),f=Di(e,"validated",3,!1),p=Di(e,"errors",3,!1),v=Di(e,"formErrors",3,!1),m=Di(e,"formLevelError",3,!1),b=j((()=>(u()?" has-icons-left ":"")+" has-icons-right "));Pi((()=>{r=[].concat(p()?p():[],v()?v():[])})),Pi((()=>{n=!(f()&&g())&&o()}));let y,O=j((()=>!1===g()||m()));Pi((()=>{y=!0!==g()&&o()?Gi.CLASS_ERR:Gi.CLASS_OK})),Pi((()=>{}));var $=aa(),w=he($),k=de(w);ai(k,`input ${y??""}`),k.__change=[ea,c,o,s],k.__input=[ia,c,o,s];var _=ge(k,2);qe(_,u,(t=>{var e=ra(),i=de(e);tt((()=>ai(i,`fas fa-${u()??""}`))),Le(t,e)})),qe(ge(_,2),(()=>!0===f()),(t=>{var e=oa();qe(de(e),(()=>!0===g()),(t=>{Le(t,na())}),(t=>{var e=Ee();qe(he(e),(()=>!1===g()),(t=>{Le(t,sa())}),null,!0),Le(t,e)})),Le(t,e)})),Hr(ge(w,2),{get errors(){return r},set errors(t){r=t},get show(){return n},set show(t){n=t},get classes(){return y},set classes(t){y=t},get id(){return`input-field-helper-${c()??""}`}}),tt((()=>{ai(w,`control ${Gt(b)??""}`),k.readOnly=h(),ni(k,"id",`form-field-password-${c()??""}`),ni(k,"name",c()),ni(k,"invalid",Gt(O)),k.required=d(),ni(k,"placeholder",Ti(sr,"$LOCALE",i)[l()]),ni(k,"autocomplete",c()),ni(k,"aria-controls",`input-field-helper-${c()??""}`),ni(k,"aria-describedby",`input-field-helper-${c()??""}`)})),mi(k,a),Le(t,$),te()},UIRadioButtons:function(t,e){Zt(e,!0);const i=Si();let r=Di(e,"fieldname",3,"radio-buttons"),n=Di(e,"variants",19,(()=>[])),s=Di(e,"value",15),o=Di(e,"buttonProps",19,(()=>({}))),a=Di(e,"titleComponent",3,An),l=Di(e,"titleComponentProps",19,(()=>({size:5}))),c=Di(e,"imageComponent",3,ua),u=Di(e,"imageComponentProps",19,(()=>({covered:!0}))),d=Di(e,"descriptionComponent",3,dn),h=Di(e,"descriptionComponentProps",19,(()=>({}))),g=Di(e,"listComponent",3,Lo),f=Di(e,"listComponentProps",19,(()=>({}))),p=Di(e,"getUIItem",3,(t=>y.find((e=>e.value===t)))),v=Di(e,"getDefaultItemSublime",3,(()=>n()[0].value)),m=Di(e,"uiOn",3,(t=>{t.color="success",t.outlined=!1})),b=Di(e,"uiOff",3,(t=>{t.color=!1,t.outlined=!0}));Ai((()=>{y=n().map((t=>({...o(),...t}))),U(O,re([{id:0,title:e.title,image:e.image,description:{values:y}}])),function(){if(n().length>0)if(void 0!==s())w({on:s()});else{$(v()())}}()}));let y=[],O=x(re([]));function $(t){let e={on:void 0,off:void 0};s()&&(e.off=s(),e.on=t),s(t),w(e),i("change",{field:r(),value:s()})}function w(t){t.off&&b()(p()(t.off)),t.on&&m()(p()(t.on)),U(O,re(Gt(O)))}const k=j(g);var _=Ee(),I=he(_),A=j((()=>({...h(),action(t,e){$(e)}})));ri(I,(()=>Gt(k)),((t,e)=>{e(t,Ri(f,{get items(){return Gt(O)},set items(t){U(O,re(t))},get titleComponent(){return a()},get titleComponentProps(){return l()},get descriptionComponent(){return d()},get descriptionComponentProps(){return Gt(A)},get imageComponent(){return c()},get imageComponentProps(){return u()}}))})),Le(t,_),te()},UIRange:function(t,e){Zt(e,!0);const i=xi(),r=Si();let n,s,o=Di(e,"inputStarted",15,!1),a=Di(e,"value",15,10),l=Di(e,"min",3,0),c=Di(e,"max",3,100),u=Di(e,"step",3,1),d=Di(e,"tickmarks",3,!1),h=Di(e,"placeholder",3,""),g=Di(e,"fieldname",3,"range"),f=Di(e,"icon",3,!1),p=Di(e,"required",3,!0),v=Di(e,"disabled",3,!1),m=Di(e,"readonly",3,!1),b=Di(e,"valid",3,!0),y=Di(e,"validated",3,!1),O=Di(e,"errors",3,!1),$=Di(e,"formErrors",3,!1),w=Di(e,"formLevelError",3,!1),k=j((()=>(f()?" has-icons-left ":"")+" has-icons-right "));Pi((()=>{n=[].concat(O()?O():[],$()?$():[])})),Pi((()=>{s=!(y()&&b())&&o()}));let _,I=j((()=>!1===b()||w()));Pi((()=>{_=!0!==b()&&o()?Gi.CLASS_ERR:Gi.CLASS_OK}));var A=ba(),S=he(A);qe(de(S),m,(t=>{var e=ga(),i=de(e);tt((()=>je(i,a()))),Le(t,e)}),(t=>{var e=ma(),n=he(e);ai(n,`input big-number slider has-output is-fullwidth is-success ${_??""}`),n.__change=[da,g,a,o,r],n.__input=[ha,g,o,r];var s=ge(n,2),b=de(s),y=ge(s,2);qe(y,(()=>Array.isArray(d())&&d().length),(t=>{var e=pa();Je(e,21,d,Ge,((t,e)=>{var i=fa(),r={};tt((()=>{r!==(r=Gt(e).value)&&(i.value=null==(i.__value=Gt(e).value)?"":Gt(e).value),ni(i,"label",Gt(e).label)})),Le(t,i)})),tt((()=>ni(e,"id",`form-field-range-${g()??""}-tickmarks`))),Le(t,e)})),qe(ge(y,2),f,(t=>{var e=va(),i=de(e);tt((()=>ai(i,`fas fa-${f()??""}`))),Le(t,e)})),tt((()=>{ni(n,"id",`form-field-range-${g()??""}`),ni(n,"name",g()),ni(n,"min",l()),ni(n,"max",c()),ni(n,"step",u()),ni(n,"list",`form-field-range-${g()??""}-tickmarks`),ni(n,"invalid",Gt(I)),n.disabled=v(),n.required=p(),n.readOnly=m(),ni(n,"placeholder",Ti(sr,"$LOCALE",i)[h()]),ni(n,"autocomplete",g()),ni(n,"aria-controls",`input-field-helper-${g()??""}`),ni(n,"aria-describedby",`input-field-helper-${g()??""}`),ni(s,"for",`form-field-range-${g()??""}`),je(b,a())})),mi(n,a),Le(t,e)})),Hr(ge(S,2),{get errors(){return n},set errors(t){n=t},get show(){return s},set show(t){s=t},get classes(){return _},set classes(t){_=t},get id(){return`input-field-helper-${g()??""}`}}),tt((()=>ai(S,`control ${Gt(k)??""}`))),Le(t,A),te()},UIRangeLogarithmic:function(t,e){Zt(e,!0);const i=xi(),r=Number.MAX_SAFE_INTEGER;let n,s,o=Si(),a=Di(e,"inputStarted",15,!1),l=Di(e,"value",15,10),c=Di(e,"min",3,0),u=Di(e,"max",3,100),d=Di(e,"tickmarks",3,!1),h=Di(e,"placeholder",3,""),g=Di(e,"fieldname",3,"range"),f=Di(e,"icon",3,!1),p=Di(e,"required",3,!0),v=Di(e,"disabled",3,!1),m=Di(e,"readonly",3,!1),b=Di(e,"valid",3,!0),y=Di(e,"validated",3,!1),O=Di(e,"errors",3,!1),$=Di(e,"formErrors",3,!1),w=Di(e,"formLevelError",3,!1),k=j((()=>(f()?" has-icons-left ":"")+" has-icons-right "));Pi((()=>{n=[].concat(O()?O():[],$()?$():[])})),Pi((()=>{s=!(y()&&b())&&a()}));let _,I=j((()=>!1===b()||w()));Pi((()=>{_=!0!==b()&&a()?Gi.CLASS_ERR:Gi.CLASS_OK}));let A=0,S=100,C=10,E=x(1);function L(){A=Math.log(c()||1),S=Math.log(u()||r),C=(S-A)/100,l()>u()?l(u()):l()<c()?l(c()):l(l())}function T(t){return t=parseInt(t),Math.round(Math.exp((t-0)*C+A))}Pi((()=>{c(),u(),L()})),Ai((()=>{L()}));var N=Aa(),F=he(N);qe(de(F),m,(t=>{var e=$a(),i=de(e);tt((()=>je(i,l()))),Le(t,e)}),(t=>{var e=Ia(),r=he(e);ai(r,`input big-number slider has-output is-fullwidth is-success ${_??""}`),ni(r,"min",0),ni(r,"max",100),ni(r,"step",.01),r.__change=[ya,T,l,g,a,o],r.__input=[Oa,T,l,g,a,o];var n=ge(r,2),s=de(n),c=ge(n,2);qe(c,(()=>Array.isArray(d())&&d().length),(t=>{var e=ka();Je(e,21,d,Ge,((t,e)=>{var i=wa(),r={};tt((()=>{r!==(r=Gt(e).value)&&(i.value=null==(i.__value=Gt(e).value)?"":Gt(e).value),ni(i,"label",Gt(e).label)})),Le(t,i)})),tt((()=>ni(e,"id",`form-field-range-${g()??""}-tickmarks`))),Le(t,e)})),qe(ge(c,2),f,(t=>{var e=_a(),i=de(e);tt((()=>ai(i,`fas fa-${f()??""}`))),Le(t,e)})),tt((()=>{ni(r,"id",`form-field-range-${g()??""}`),ni(r,"name",g()),ni(r,"list",`form-field-range-${g()??""}-tickmarks`),ni(r,"invalid",Gt(I)),r.disabled=v(),r.required=p(),r.readOnly=m(),ni(r,"placeholder",Ti(sr,"$LOCALE",i)[h()]),ni(r,"autocomplete",g()),ni(r,"aria-controls",`input-field-helper-${g()??""}`),ni(r,"aria-describedby",`input-field-helper-${g()??""}`),ni(n,"for",`form-field-range-${g()??""}`),je(s,l())})),mi(r,(()=>Gt(E)),(t=>U(E,t))),Le(t,e)})),Hr(ge(F,2),{get errors(){return n},set errors(t){n=t},get show(){return s},set show(t){s=t},get classes(){return _},set classes(t){_=t},get id(){return`input-field-helper-${g()??""}`}}),tt((()=>ai(F,`control ${Gt(k)??""}`))),Le(t,N),te()},UISelect:en,UISelectFromModel:function(t,e){Zt(e,!0);const i=Si();let r=Di(e,"inputStarted",3,!1),n=Di(e,"placeholder",3,""),s=Di(e,"emptyValueTitle",3,""),o=Di(e,"fieldname",3,"selectFromModel"),a=Di(e,"modelName",3,""),l=Di(e,"actionName",3,""),c=Di(e,"actionFilter",19,(()=>({}))),u=Di(e,"actionSorter",19,(()=>({}))),d=Di(e,"actionPager",19,(()=>({}))),h=Di(e,"actionSearch",3,void 0),g=Di(e,"optionId",3,":_id"),f=Di(e,"optionTitle",3,":title"),p=Di(e,"icon",3,!1),v=Di(e,"required",3,!0),m=Di(e,"readonly",3,!1),b=Di(e,"multiple",3,!1),y=Di(e,"size",3,8),O=Di(e,"valid",3,!0),$=Di(e,"validated",3,!1),w=Di(e,"errors",15,!1),k=Di(e,"formErrors",3,!1),_=Di(e,"formLevelError",3,!1),I=Di(e,"returnVariant",3,!1),A=x(re([])),S=j((()=>!0));Ai((async()=>{if(a()&&l()&&c()){const t=_r.getApp().getModel(a()).setFilter(c()).setSorter(u()).setPager(d()).setSearch(h()),e=await t["$"+l()]();if(e.status===bn){const t=e.result;U(A,re(t.map((t=>({id:br.get(g(),t),title:br.get(f(),t)})))))}else w(result.errors||[result.message])}})),en(t,{get inputStarted(){return r()},get value(){return e.value},get variants(){return Gt(A)},set variants(t){U(A,re(t))},get placeholder(){return n()},get emptyValueTitle(){return s()},get fieldname(){return o()},get icon(){return p()},get required(){return v()},get readonly(){return m()},get disabled(){return Gt(S)},get multiple(){return b()},get size(){return y()},get valid(){return O()},get validated(){return $()},get errors(){return w()},get formErrors(){return k()},get formLevelError(){return _()},$$events:{change:function(t){I()?i("change",{...t.detail,value:Gt(A).find((e=>e.id===t.detail.value))}):i("change",t.detail)}}}),te()},UISwitch:function(t,e){Zt(e,!0);const i=xi(),r=()=>Ti(sr,"$LOCALE",i);let n=Si(),s=Di(e,"inputStarted",15,!1),o=Di(e,"value",15,!1),a=Di(e,"label",3,""),l=Di(e,"hideLabel",3,!1),c=Di(e,"placeholder",3,""),u=Di(e,"fieldname",3,"textfield");Di(e,"icon",3,!1);let d,h,g=Di(e,"required",3,!0),f=Di(e,"readonly",3,!1),p=Di(e,"disabled",3,!1),v=Di(e,"valid",3,!0),m=Di(e,"styling",3," is-rounded is-success "),b=Di(e,"validated",3,!1),y=Di(e,"errors",3,!1),O=Di(e,"formErrors",3,!1),$=Di(e,"formLevelError",3,!1);Pi((()=>{d=[].concat(y()?y():[],O()?O():[])})),Pi((()=>{h=!(b()&&v())&&s()}));let w,k=j((()=>!1===v()||$()));function _(t){let e={field:u(),value:"checkbox"===t.currentTarget.type?t.currentTarget.checked:o()};return s(!0),n("change",e),!0}Pi((()=>{w=!0!==v()&&s()?Gi.CLASS_ERR:Gi.CLASS_OK}));var I=Ea(),A=he(I);qe(de(A),f,(t=>{var e=Ee();qe(he(e),o,(t=>{xr(t,{values:[{value:!0}]})}),(t=>{xr(t,{values:[{value:!1}]})})),Le(t,e)}),(t=>{var e=Ca(),i=he(e);qe(i,(()=>!a()&&!l()),(t=>{xr(t,{values:[{value:!1}]})}));var d=ge(i,2);d.__input=[Sa,u,o,s,n];var h=ge(d,2);qe(de(h),(()=>!l()),(t=>{var e=Ee();qe(he(e),a,(t=>{var e=Ce();tt((()=>je(e,r()[a()]))),Le(t,e)}),(t=>{xr(t,{values:[{value:!0}]})})),Le(t,e)})),tt((()=>{ai(d,`switch ${m()??""}`),ni(d,"id",`form-field-switch-${u()??""}`),ni(d,"placeholder",r()[c()]),ni(d,"name",u()),d.disabled=p(),d.required=g(),d.readOnly=f(),ni(d,"invalid",Gt(k)),ni(d,"aria-controls",`input-field-helper-${u()??""}`),ni(d,"aria-describedby",`input-field-helper-${u()??""}`),ni(h,"for",`form-field-switch-${u()??""}`)})),we("blur",d,_),bi(d,o),Le(t,e)})),Hr(ge(A,2),{get errors(){return d},set errors(t){d=t},get show(){return h},set show(t){h=t},get classes(){return w},set classes(t){w=t},get id(){return`input-field-helper-${u()??""}`}}),Le(t,I),te()},UISwitchList:function(t,e){Zt(e,!0);const i=xi();let r=Si(),n=Di(e,"inputStarted",15,!1),s=Di(e,"value",31,(()=>re([]))),o=Di(e,"variants",19,(()=>[]));Di(e,"label",3,""),Di(e,"hideLabel",3,!1),Di(e,"placeholder",3,"");let a=Di(e,"fieldname",3,"textfield");Di(e,"icon",3,!1);let l=Di(e,"required",3,!0),c=Di(e,"readonly",3,!1);Di(e,"multiple",3,!0);let u,d,h=Di(e,"disabled",3,!1),g=Di(e,"valid",3,!0),f=Di(e,"styling",3," is-rounded is-success "),p=Di(e,"validated",3,!1),v=Di(e,"errors",3,!1),m=Di(e,"formErrors",3,!1),b=Di(e,"formLevelError",3,!1);Pi((()=>{u=[].concat(v()?v():[],m()?m():[])})),Pi((()=>{d=!(p()&&g())&&n()}));let y,O=j((()=>!1===g()||b()));function $(t){s().includes(t)||(s().push(t),s(s()))}function w(t){s().includes(t)&&(s().splice(s().indexOf(t),1),s(s()))}function k(t){console.log("switch list element blur",t);const e=t.target.id.split("-variant-").at(-1);console.log(e),t.target.checked?$(e):w(e);let i={field:a(),value:s()};return n(!0),r("change",i),!0}Pi((()=>{y=!0!==g()&&n()?Gi.CLASS_ERR:Gi.CLASS_OK}));var _=xa(),I=he(_);qe(de(I),c,(t=>{var e=Ee();qe(he(e),s,(t=>{var e=Ce();tt((()=>je(e,o().filter((t=>s().includes(t.id))).map((t=>t.title)).join(", ")))),Le(t,e)})),Le(t,e)}),(t=>{var e=Ee();Je(he(e),17,o,(t=>t.id),((t,e)=>{var o=Ta(),u=de(o);tt((()=>function(t,e){var i=t.__attributes??={};i.checked!==(i.checked=e)&&(t.checked=e)}(u,s().includes(Gt(e).id)))),u.__input=[La,$,w,a,s,n,r];var d=ge(u,2),g=de(d);tt((()=>{ai(u,`switch ${f()??""}`),ni(u,"id",`form-field-switch-${a()??""}-variant-${Gt(e).id??""}`),ni(u,"name",a()),u.disabled=h(),u.required=l(),u.readOnly=c(),ni(u,"invalid",Gt(O)),ni(u,"aria-controls",`input-field-helper-${a()??""}-variant-${Gt(e).id??""}`),ni(u,"aria-describedby",`input-field-helper-${a()??""}-variant-${Gt(e).id??""}`),ni(d,"for",`form-field-switch-${a()??""}-variant-${Gt(e).id??""}`),je(g,Ti(sr,"$LOCALE",i)[Gt(e).title])})),we("blur",u,k),Le(t,o)})),Le(t,e)})),Hr(ge(I,2),{get errors(){return u},set errors(t){u=t},get show(){return d},set show(t){d=t},get classes(){return y},set classes(t){y=t},get id(){return`input-field-helper-${a()??""}`}}),Le(t,_),te()},UITagSelect:function(t,e){Zt(e,!0);const i=xi(),r=()=>Ti(sr,"$LOCALE",i);let n=Si();Ai((()=>{s(s().filter((t=>y(t)))),s()}));let s=Di(e,"value",31,(()=>re([]))),o=Di(e,"inputStarted",3,!1),a=Di(e,"variants",19,(()=>[])),l=Di(e,"fieldname",3,"tag"),c=Di(e,"readonly",3,!1),u=Di(e,"valid",3,!0),d=Di(e,"validated",3,!1),h=Di(e,"errors",3,!1),g=Di(e,"formErrors",3,!1);Di(e,"formLevelError",3,!1);let f=Di(e,"beforeAdd",3,(()=>!0)),p=Di(e,"getItemId",3,(t=>t.id)),v=Di(e,"getItemTitle",3,(t=>t.title)),m=Di(e,"getItemType",3,(t=>"info")),b=Di(e,"buildItem",3,(t=>({id:p()(t),title:v()(t),type:m()(t)})));function y(t){return a().find((e=>p()(e)===t))}function O(){let t={field:l(),value:s()};n("change",t)}let $,w,k,_=j((()=>s().map(y).filter((t=>t)).map(b())));Pi((()=>{$=[].concat(h()?h():[],g()?g():[])})),Pi((()=>{w=!(d()&&u())&&o()})),Pi((()=>{k=!0!==u()&&o()?Gi.CLASS_ERR:Gi.CLASS_OK}));var I=Pa(),A=he(I),S=de(A);ai(S,`column ${k??""}`),Je(S,21,(()=>Gt(_)),(t=>t.id),((t,e)=>{var i=Ra(),n=de(i);qe(ge(n),(()=>!c()),(t=>{var i=Ma();i.__click=[Na,s,O],tt((()=>ni(i,"data-id",Gt(e).id))),Le(t,i)})),tt((()=>{ai(i,`mx-1 tag is-${Gt(e).type??""}`),je(n,`${r()[Gt(e).title]??""} `)})),Le(t,i)})),qe(ge(S,2),(()=>!c()),(t=>{var e=Da(),i=de(e),n=de(i),o=de(n),l=de(o);l.value=null==(l.__value="-1")?"":"-1";var c=de(l);Je(ge(l),17,a,Ge,((t,e)=>{var i=Ua(),n={},s=de(i);tt((()=>{n!==(n=Gt(e).id)&&(i.value=null==(i.__value=Gt(e).id)?"":Gt(e).id),je(s,r()[Gt(e).title])})),Le(t,i)}));var u=ge(n,2);u.__click=[Fa,y,f,a,s,O];var d=de(u);tt((()=>{je(c,r()["not-node:select_from_list_label"]),je(d,r()["not-node:add_label"])})),Le(t,e)})),Hr(ge(A,2),{get errors(){return $},set errors(t){$=t},get show(){return w},set show(t){w=t},get classes(){return k},set classes(t){k=t},get id(){return`input-field-helper-${l()??""}`}}),Le(t,I),te()},UITelephone:function(t,e){Zt(e,!0);const i=xi();let r,n,s=Si(),o=Di(e,"inputStarted",15,!1),a=Di(e,"value",15,""),l=Di(e,"placeholder",3,"+7 (987) 654-32-10"),c=Di(e,"fieldname",3,"telephone"),u=Di(e,"icon",3,!1),d=Di(e,"required",3,!0),h=Di(e,"readonly",3,!1),g=Di(e,"valid",3,!0),f=Di(e,"validated",3,!1),p=Di(e,"errors",3,!1),v=Di(e,"formErrors",3,!1),m=Di(e,"formLevelError",3,!1),b=j((()=>(u()?" has-icons-left ":"")+" has-icons-right "));Pi((()=>{r=[].concat(p()?p():[],v()?v():[])})),Pi((()=>{n=!(f()&&g())&&o()}));let y,O=j((()=>!1===g()||m()));Pi((()=>{y=!0!==g()&&o()?Gi.CLASS_ERR:Gi.CLASS_OK}));var $=Ga(),w=he($);qe(de(w),h,(t=>{var e=Ba(),i=de(e);tt((()=>je(i,a()))),Le(t,e)}),(t=>{var e=Ka(),r=he(e);ai(r,`input ${y??""}`),r.__change=[ja,c,a,o,s],r.__input=[Wa,c,a,o,s];var n=ge(r,2);qe(n,u,(t=>{var e=za(),i=de(e);tt((()=>ai(i,`fas fa-${u()??""}`))),Le(t,e)})),qe(ge(n,2),(()=>!0===f()),(t=>{var e=Ha();qe(de(e),(()=>!0===g()),(t=>{Le(t,Va())}),(t=>{var e=Ee();qe(he(e),(()=>!1===g()),(t=>{Le(t,qa())}),null,!0),Le(t,e)})),Le(t,e)})),tt((()=>{ni(r,"id",`form-field-telephone-${c()??""}`),ni(r,"name",c()),ni(r,"invalid",Gt(O)),r.required=d(),r.readOnly=h(),ni(r,"placeholder",Ti(sr,"$LOCALE",i)[l()]),ni(r,"autocomplete",c()),ni(r,"aria-controls",`input-field-helper-${c()??""}`),ni(r,"aria-describedby",`input-field-helper-${c()??""}`)})),mi(r,a),Le(t,e)})),Hr(ge(w,2),{get errors(){return r},set errors(t){r=t},get show(){return n},set show(t){n=t},get classes(){return y},set classes(t){y=t},get id(){return`input-field-helper-${c()??""}`}}),tt((()=>ai(w,`control ${Gt(b)??""}`))),Le(t,$),te()},UITextarea:eo,UITextfield:Un}),Ya=Se("<!> <!>",1);var Qa=Se('<div class="is-fab svelte-1haul9u"><!></div>');var Xa=Se("<span><span><i></i> <span> </span></span></span>"),Za=Se("<span><i></i></span>");function tl(t,e){Zt(e,!0);const i=xi();let r=Di(e,"title",3,""),n=Di(e,"font",3,""),s=Di(e,"size",3,""),o=Di(e,"pointable",3,!1);var a=Ee();qe(he(a),r,(t=>{var e=Xa(),a=de(e),l=de(a),c=de(ge(l,2));tt((()=>{ai(e,`icon-text ${(o()?"is-clickable":"")??""}`),ai(a,`icon ${(s()?`is-${s()}`:"")??""}`),ai(l,`is-title-icon fas\n      fa-${n()??""}\n      ${("medium"==s()?"fa-lg":"")??""}\n      ${("large"==s()?"fa-2x":"")??""}\n      `),je(c,Ti(sr,"$LOCALE",i)[r()])})),Le(t,e)}),(t=>{var e=Za(),i=de(e);tt((()=>{ai(e,`\n        ${(o()?"is-clickable":"")??""}\n        icon ${(s()?`is-${s()}`:"")??""} ${("medium"==s()?"fa-lg":"")??""}\n${("large"==s()?"fa-2x":"")??""}`),ai(i,`fas fa-${n()??""}`)})),Le(t,e)})),Le(t,a),te()}var el=Se('<span class="icon"><!></span>'),il=Se("<figure><img></figure>");function rl(t,e){let i=Di(e,"title",3,""),r=Di(e,"size",3,""),n=Di(e,"font",3,""),s=Di(e,"svg",3,""),o=Di(e,"src",3,"");var a=Ee();qe(he(a),n,(t=>{tl(t,{get font(){return n()},get size(){return r()},get title(){return i()}})}),(t=>{var r=Ee();qe(he(r),s,(t=>{var e=el();ti(de(e),s),Le(t,e)}),(t=>{var r=Ee();qe(he(r),o,(t=>{var r=il(),n=de(r);tt((()=>{ai(r,`image ${(e.width&&e.height?`is-${e.width}x${e.height}`:"")??""} `),ni(n,"src",o()),ni(n,"title",i()),ni(n,"alt",i()),ni(n,"width",e.width),ni(n,"height",e.height)})),Le(t,r)}),null,!0),Le(t,r)}),!0),Le(t,r)})),Le(t,a)}var nl=Object.freeze({__proto__:null,UIIcon:rl,UIIconButtonWithTag:function(t,e){let i=Di(e,"button",19,(()=>({}))),r=Di(e,"tag",19,(()=>({})));var n=Ya(),s=he(n);cn(s,Ri(i)),Er(ge(s,2),Ri(r,{classes:"is-top-right"})),Le(t,n)},UIIconFloating:function(t,e){Zt(e,!0);let i=Di(e,"trigger",19,(()=>({title:"Click me!",icon:"plus",color:"primary",size:"medium"}))),r=x("");Ai((()=>{U(r,"")}));var n=Qa();cn(de(n),Ri({action:function(){}},i)),tt((()=>ni(n,"style",Gt(r)))),Le(t,n),te()},UIIconFont:tl});function sl(t,e){let i=Di(e,"values",19,(()=>[]));var r=Ee();Je(he(r),17,i,(t=>t.url),((t,i)=>{ua(t,Ri((()=>Gt(i)),{$$events:{click(t){Ii.call(this,e,t)}}}))})),Le(t,r)}var ol=Object.freeze({__proto__:null,UIImage:ua,UIImages:sl}),al=Object.freeze({__proto__:null,UILink:mo,UILinks:Oo}),ll=Se('<div class="column box"> </div>'),cl=Se('<div class="columns"><div class="column"><!></div> <!> <div class="column"><!></div></div>');function ul(t,e){Zt(e,!0);const i=xi(),r=()=>Ti(sr,"$LOCALE",i),n=Si();let s=Di(e,"page",3,0),o=Di(e,"pages",3,0),a=Di(e,"buttonComponent",3,cn),l=Di(e,"buttonComponentProps",19,(()=>({})));var c=Ee();qe(he(c),(()=>o()>0),(t=>{var e=cl(),i=de(e);qe(de(i),(()=>s()>1),(t=>{var e=Ee();const i=j(a);ri(he(e),(()=>Gt(i)),((t,e)=>{e(t,Ri(l,{action:()=>n("prev"),children:(t,e)=>{var i=Ce();tt((()=>je(i,r()["not-node:list_navigation_prev_button_label"]))),Le(t,i)},$$slots:{default:!0}}))})),Le(t,e)}));var c=ge(i,2);qe(c,(()=>o()>1),(t=>{var e=ll(),i=de(e);tt((()=>je(i,`${s()??""} / ${o()??""}`))),Le(t,e)})),qe(de(ge(c,2)),(()=>s()<o()),(t=>{var e=Ee();const i=j(a);ri(he(e),(()=>Gt(i)),((t,e)=>{e(t,Ri(l,{action:()=>n("next"),children:(t,e)=>{var i=Ce();tt((()=>je(i,r()["not-node:list_navigation_next_button_label"]))),Le(t,i)},$$slots:{default:!0}}))})),Le(t,e)})),Le(t,e)})),Le(t,c),te()}var dl=Se('<div class="box list-item-selectable svelte-ialyiy" role="button" tabindex="0"><span> </span></div>');function hl(t,e){Zt(e,!0);const i=Si();function r(){i("click",{_id:e._id,id:e.id,title:e.title})}var n=dl(),s=j((()=>ki(r)));n.__click=function(...t){Gt(s)?.apply(this,t)},n.__keyup=r;var o=de(n),a=de(o);tt((()=>je(a,e.title))),Le(t,n),te()}ke(["click","keyup"]);var gl=Se("<div><!></div> <!>",1);function fl(t,e){Zt(e,!0);const i=Si();let r=Di(e,"data",31,(()=>re({list:[],skip:0,count:0,page:0,pages:0}))),n=Di(e,"itemComponent",3,hl),s=Di(e,"itemComponentProps",19,(()=>({}))),o=Di(e,"emptyListPlaceholderComponent",3,co),a=Di(e,"emptyListPlaceholderComponentProps",19,(()=>({}))),l=Di(e,"listNavigationComponent",3,ul),c=Di(e,"listNavigationComponentProps",19,(()=>({})));function u({detail:t}){i("select",t)}const d=j(l);var h=gl(),g=he(h);qe(de(g),(()=>r().list.length),(t=>{var e=Ee();Je(he(e),17,(()=>r().list),(t=>t.id),((t,e)=>{var i=Ee();const r=j(n);ri(he(i),(()=>Gt(r)),((t,i)=>{i(t,Ri(s,(()=>Gt(e)),{$$events:{click:u}}))})),Le(t,i)})),Le(t,e)}),(t=>{var e=Ee();const i=j(o);ri(he(e),(()=>Gt(i)),((t,e)=>{e(t,Ri(a))})),Le(t,e)})),ri(ge(g,2),(()=>Gt(d)),((t,i)=>{i(t,Ri(c,{get page(){return r().page},set page(t){r(r().page=t,!0)},get pages(){return r().pages},set pages(t){r(r().pages=t,!0)},get skip(){return r().skip},set skip(t){r(r().skip=t,!0)},get count(){return r().count},set count(t){r(r().count=t,!0)},$$events:{prev(t){Ii.call(this,e,t)},next(t){Ii.call(this,e,t)}}}))})),Le(t,h),te()}var pl=Se("<!> <!>",1);var vl=Object.freeze({__proto__:null,UIEndlessList:fl,UIEndlessListNavigation:ul,UIEndlessListSimpleItem:hl,UIList:Lo,UIListEmptyPlaceholder:co,UIListItem:Co,UIListSelect:function(t,e){Zt(e,!0);const i=Si();let r=Di(e,"fieldname",3,"list-select"),n=Di(e,"multiple",3,!1),s=Di(e,"atLeastOne",3,!0),o=Di(e,"variants",31,(()=>re([]))),a=Di(e,"value",15),l=Di(e,"selectedVariantsIds",31,(()=>re([]))),c=Di(e,"titleComponent",3,An),u=Di(e,"titleComponentProps",19,(()=>({size:5}))),d=Di(e,"imageComponent",3,ua),h=Di(e,"imageComponentProps",19,(()=>({covered:!0}))),g=Di(e,"descriptionComponent",3,dn),f=Di(e,"descriptionComponentProps",19,(()=>({}))),p=Di(e,"listComponent",3,Lo),v=Di(e,"listComponentProps",19,(()=>({}))),m=Di(e,"sublimeValue",3,(t=>t.id)),b=Di(e,"getItem",3,(({valueId:t})=>o().find((e=>e.value.id===t)))),y=Di(e,"getItemValue",3,(({valueId:t})=>b()({valueId:t}).value)),O=Di(e,"getDefaultItemSublime",3,(()=>o()[0].id)),$=Di(e,"uiOn",3,(t=>{t.color="success",t.outlined=!1})),w=Di(e,"uiOff",3,(t=>{t.color=!1,t.outlined=!0}));function k(){return Array.isArray(a())?l().length:0}Ai((()=>{a()&&Array.isArray(a())?s()&&a().length&&a().forEach((t=>{S(I(t))})):function(){if(s()&&o().length>0){A({id:O()()})}}()}));const _=()=>!(s()&&1===k());function I(t){const e=m()(t);let i={on:void 0,off:void 0};return Array.isArray(l())||l([]),n()?l().includes(e)?_()&&(l().splice(l().indexOf(e),1),i.off={valueId:e}):(l().push(e),i.on={valueId:e}):s()?l().includes(e)||(k()>0&&(i.off={valueId:l().pop()}),i.on={valueId:e},l([e])):l().includes(e)?(i.off={valueId:e},l().splice(l().indexOf(e),1)):(i.on={valueId:e},l().push(e)),l(l()),i}function A(t){S(I(t)),function(){let t=[];void 0!==l()&&Array.isArray(l())&&(t=l().filter((t=>void 0!==t)).map((t=>y()({valueId:t}))));a(t)}(),i("change",{field:r(),value:a()})}function S(t){t.off&&w()(b()(t.off)),t.on&&$()(b()(t.on)),o(o())}const C=j(p);var E=Ee(),L=he(E),T=j((()=>({...f(),action(t,e){A(e)}})));ri(L,(()=>Gt(C)),((t,e)=>{e(t,Ri(v,{get items(){return o()},set items(t){o(t)},get titleComponent(){return c()},get titleComponentProps(){return u()},get descriptionComponent(){return g()},get descriptionComponentProps(){return Gt(T)},get imageComponent(){return d()},get imageComponentProps(){return h()}}))})),Le(t,E),te()},UIListSelectButtonsWithGroups:function(t,e){Zt(e,!0);const i=Si();let r=Di(e,"fieldname",3,"list-select-tags"),n=Di(e,"variants",31,(()=>re([])));Di(e,"variantsSelected",19,(()=>({})));let s=Di(e,"value",15),o=Di(e,"titleComponent",3,An),a=Di(e,"titleComponentProps",19,(()=>({size:5}))),l=Di(e,"imageComponent",3,ua),c=Di(e,"imageComponentProps",19,(()=>({covered:!0}))),u=Di(e,"descriptionComponent",3,vn),d=Di(e,"descriptionComponentProps",19,(()=>({}))),h=Di(e,"listComponent",3,Lo),g=Di(e,"listComponentProps",19,(()=>({}))),f=Di(e,"actionsList",19,(()=>["selectAll","deselectAll"])),p=Di(e,"sublimeValue",3,(t=>({groupId:t.group,valueId:t.id})));const v={selectAll:{title:"Выбрать все",color:"success",action(){b()}},deselectAll:{title:"Снять выделение со всех",color:"",action(){y()}}};let m=x(re([]));Ai((()=>{f().forEach((t=>{Object.hasOwn(v,t)&&Gt(m).push(v[t])})),U(m,re(Gt(m)))}));const b=()=>{$(!0)},y=()=>{$(!1)},O=(t,e)=>{n().forEach((i=>{t===i.id&&i.description.values.forEach((t=>{t.selected=e}))})),n(n()),k()},$=t=>{n().forEach((e=>{e.description.values.forEach((e=>{e.selected=t}))})),n(n()),k()};function w(){let t={};return n().forEach((e=>{Object.hasOwn(t,e.id)||(t[e.id]=[]),e.description.values.forEach((i=>{i.selected&&t[e.id].push(p()(i.value))}))})),t}function k(){s(w()),i("change",{fieldname:r(),value:s()})}const _=j(h);var I=pl(),A=he(I);dn(A,{get values(){return Gt(m)},centered:!0});var S=ge(A,2),C=j((()=>({action:(t,e,i)=>(setTimeout(k,0),!i),...d()})));return ri(S,(()=>Gt(_)),((t,e)=>{e(t,Ri(g,{get items(){return n()},set items(t){n(t)},get titleComponent(){return o()},get titleComponentProps(){return a()},get descriptionComponent(){return u()},get descriptionComponentProps(){return Gt(C)},get imageComponent(){return l()},get imageComponentProps(){return c()}}))})),Le(t,I),te({selectAll:b,deselectAll:y,selectGroup:t=>{O(t,!0)},deselectGroup:t=>{O(t,!1)},setSelectionOfGroup:O,setSelectionOfAll:$,getSelectedItems:w})},UIListSelectWithGroups:function(t,e){Zt(e,!0);const i=Si();let r=Di(e,"fieldname",3,"list-select-tags"),n=Di(e,"multiple",3,!1),s=Di(e,"onlyOneInGroup",3,!0),o=Di(e,"atLeastOne",3,!0),a=Di(e,"variants",31,(()=>re([]))),l=Di(e,"variantsSelected",31,(()=>re({}))),c=Di(e,"value",15),u=Di(e,"titleComponent",3,An),d=Di(e,"titleComponentProps",19,(()=>({size:5}))),h=Di(e,"imageComponent",3,ua),g=Di(e,"imageComponentProps",19,(()=>({covered:!0}))),f=Di(e,"descriptionComponent",3,dn),p=Di(e,"descriptionComponentProps",19,(()=>({}))),v=Di(e,"listComponent",3,Lo),m=Di(e,"listComponentProps",19,(()=>({}))),b=Di(e,"sublimeValue",3,(t=>({groupId:t.group,valueId:t.id}))),y=Di(e,"getItem",3,(({groupId:t,valueId:e})=>a().find((e=>e.id===t)).description.values.find((t=>t.value.id===e)))),O=Di(e,"getItemValue",3,(({groupId:t,valueId:e})=>y()({groupId:t,valueId:e}).value)),$=Di(e,"getDefaultItemSublime",3,(()=>({groupId:a()[0].id,valueId:a()[0].description.values[0].value.id}))),w=Di(e,"uiOn",3,(t=>{t.color="success",t.outlined=!1})),k=Di(e,"uiOff",3,(t=>{t.color=!1,t.outlined=!1}));function _(t){const{valueId:e,groupId:i}=b()(t);let r={on:void 0,off:void 0};return n()?(s()?(void 0!==l()[i]&&(r.off={groupId:i,valueId:l()[i]}),l(l()[i]=e,!0),r.on={groupId:i,valueId:e}):(Array.isArray(l()[i])||l(l()[i]=[],!0),l()[i].includes(e)?function(){let t=0;if(n())for(let e of Object.values(l()))s()?void 0!==e&&(t+=1):void 0!==e&&Array.isArray(e)&&(t+=e.length);else void 0!==l()&&void 0!==l().value&&void 0!==l().group&&(t+=1);return t}()>1&&(l()[i].splice(l()[i].indexOf(e),1),r.off={groupId:i,valueId:e}):(l()[i].push(e),r.on={groupId:i,valueId:e}),l(l()[i]=l()[i],!0)),l(l())):l()&&l().groupId===i&&l().valueId===e?o()||(l(void 0),r.off={groupId:i,valueId:e}):(l()&&void 0!==l().groupId&&(r.off={groupId:l().groupId,valueId:l().valueId}),r.on={groupId:i,valueId:e},l({groupId:i,valueId:e})),r}function I(t){let e=_(t);console.log("image value",c(),e),A(e),function(){if(n()){let t={};if(s())for(let e in l())void 0!==l()[e]&&(t[e]=O()({groupId:e,valueId:l()[e]}));else for(let e in l())void 0!==l()[e]&&Array.isArray(l()[e])&&(t[e]=l()[e].filter((t=>void 0!==t)).map((t=>O()({groupId:e,valueId:t}))));0==Object.keys(t).length?c(void 0):c(t)}else l()?c(O()(l())):c(void 0)}(),i("change",{field:r(),value:c()})}function A(t){t.off&&k()(y()(t.off)),t.on&&w()(y()(t.on)),a(a())}Ai((()=>{if(c())if(n())if(s())for(let t of Object.keys(c())){A(_(c()[t]))}else for(let t of Object.keys(c()))c()[t].forEach((t=>{A(_(t))}));else{A(_(c()))}else!function(){if(o()&&a().length>0){const t=$()();I({id:t.valueId,group:t.groupId})}}()}));const S=j(v);var C=Ee(),E=he(C),L=j((()=>({...p(),action(t,e){I(e)}})));ri(E,(()=>Gt(S)),((t,e)=>{e(t,Ri(m,{get items(){return a()},set items(t){a(t)},get titleComponent(){return u()},get titleComponentProps(){return d()},get descriptionComponent(){return f()},get descriptionComponentProps(){return Gt(L)},get imageComponent(){return h()},get imageComponentProps(){return g()}}))})),Le(t,C),te()}});function ml(t,e,i){e()&&i(t)}function bl(t,e){e()}var yl=Se("<button></button>"),Ol=Se('<div role="button" tabindex="0"><!> <!></div>');function $l(t,e){Zt(e,!0);let i=x("");const r=Si();let n=Di(e,"closeButton",3,!1),s=Di(e,"show",3,!0),o=Di(e,"closeOnClick",3,!0),a=Di(e,"closeSize",3,"normal"),l=Di(e,"layer",3,1),c=Di(e,"classes",3,"");function u(t){try{if(t&&t.originalTarget){const e=t.originalTarget;e.classList&&e.classList.contains("is-overlay")&&h()}}catch(t){}}function h(t={}){r("reject",t)}var g;Pi((()=>{s()?document.body.style.overflow="hidden":document.body.style.overflow=Gt(i)})),Ai((()=>{U(i,re(document.body.style.overflow))})),g=()=>{document.body.style.overflow=Gt(i)},null===Mt&&mt(),Ai((()=>()=>Jt(g)));var f=Ee();qe(he(f),s,(t=>{var i=Ol();i.__click=[ml,o,u],i.__keyup=[ml,o,u];var r=de(i);qe(r,n,(t=>{var e=yl();e.__click=[bl,h],tt((()=>ai(e,`delete is-${a()??""}`))),Le(t,e)})),ii(ge(r,2),(()=>e.children??d)),tt((()=>{ai(i,`is-overlay not-overlay ${c()??""}`),ni(i,"style",`z-index: ${1e3*l()??""};`)})),pi(3,i,(()=>Vn)),Le(t,i)})),Le(t,f),te()}ke(["click","keyup"]);var wl=Se('<div><span class="title"> </span></div> <!> <!> <!>',1),kl=Se("<!> <!>",1);var _l=Se("<div><!> <!> <!></div>");function Il(t,e){Zt(e,!0);const i=xi();let r=Si(),n=Di(e,"show",3,!0),s=Di(e,"term",15,""),o=Di(e,"size",3,"narrow"),a=Di(e,"inputComponent",3,Pn),l=Di(e,"inputComponentProps",19,(()=>({}))),c=Di(e,"outputComponent",3,fl),u=Di(e,"outputComponentProps",19,(()=>({}))),d=Di(e,"results",31,(()=>re({list:[],page:0,pages:0,skip:0,count:0})));Ai((()=>{}));const h=[{title:Ti(sr,"$LOCALE",i)["not-node:button_cancel_label"],action:()=>{r("reject")}}];function g({detail:t}){console.log("selected user",t),r("resolve",t)}$l(t,{get show(){return n()},closeOnClick:!0,closeButton:!1,$$events:{reject:function(){r("reject")}},children:(t,i)=>{var r=_l();const n=j(a),f=j(c);var p=de(r);ri(p,(()=>Gt(n)),((t,i)=>{i(t,Ri({get term(){return s()},set term(t){s(t)}},l,{$$events:{termChange(t){Ii.call(this,e,t)}}}))}));var v=ge(p,2);ri(v,(()=>Gt(f)),((t,i)=>{i(t,Ri({get data(){return d()},set data(t){d(t)}},u,{$$events:{prev(t){Ii.call(this,e,t)},next(t){Ii.call(this,e,t)},select:g}}))})),dn(ge(v,2),{values:h,centered:!0,classes:"mt-5"}),tt((()=>ai(r,`paper box block ${o()??""} svelte-1gllhdk`))),Le(t,r)},$$slots:{default:!0}}),te()}var Al=Object.freeze({__proto__:null,UIGenericSelector:Il,UIModal:function(t,e){Zt(e,!0);const i=xi(),r=()=>Ti(sr,"$LOCALE",i);let n=Di(e,"buttonsPosition",3,"bottom"),s=Di(e,"closeButton",3,!1),o=Di(e,"applyButton",3,!1),a=Di(e,"titleSize",3,2),l=Di(e,"show",3,!1),c=Di(e,"loading",3,!1),u=Di(e,"title",3,"Modal window"),h=Di(e,"subtitle",3,""),g=Di(e,"classes",3,""),f=Di(e,"overlayClasses",3,""),p=Di(e,"buttonsClasses",3,""),v=Di(e,"WAITING_TEXT",3,"Обработка");$l(t,{get show(){return l()},closeOnClick:!1,closeButton:!1,get classes(){return f()},children:(t,i)=>{Xi(t,{get classes(){return g()},children:(t,i)=>{var l=kl(),g=he(l);An(g,{get size(){return a()},get title(){return r()[u()]},get subtitle(){return r()[h()]}}),tr(ge(g,2),{children:(t,i)=>{var a=wl(),l=he(a),u=de(l),h=de(u),g=ge(l,2);qe(g,(()=>"top"===n()),(t=>{var e=j((()=>s()?[s()]:[])),i=j((()=>o()?[o()]:[]));gn(t,{get classes(){return p()},get left(){return Gt(e)},get right(){return Gt(i)}})}));var f=ge(g,2);ii(f,(()=>e.children??d)),qe(ge(f,2),(()=>"bottom"===n()),(t=>{var e=j((()=>p()||"is-footer is-mobile")),i=j((()=>s()?[s()]:[])),r=j((()=>o()?[o()]:[]));gn(t,{get classes(){return Gt(e)},get left(){return Gt(i)},get right(){return Gt(r)}})})),tt((()=>{ai(l,`pageloader ${(c()?"is-active":"")??""}`),je(h,r()[v()])})),Le(t,a)},$$slots:{default:!0}}),Le(t,l)},$$slots:{default:!0}})},$$slots:{default:!0}}),te()},UIOverlay:$l}),Sl=Se('<article class="message is-danger"><div class="message-header"><p> </p></div> <div class="message-body"> </div></article>');function Cl(t,e){Zt(e,!0);const i=xi(),r=()=>Ti(sr,"$LOCALE",i);var n=Sl(),s=de(n),o=de(s),a=de(o),l=de(ge(s,2));tt((()=>{je(a,r()[e.title]),je(l,r()[e.message])})),Le(t,n),te()}var El=Se('<article class="message is-success"><div class="message-header"><p> </p></div> <div class="message-body"> </div></article>');function Ll(t,e){Zt(e,!0);const i=xi(),r=()=>Ti(sr,"$LOCALE",i);var n=El(),s=de(n),o=de(s),a=de(o),l=de(ge(s,2));tt((()=>{je(a,r()[e.title]),je(l,r()[e.message])})),Le(t,n),te()}function Tl(t,e){localStorage.setItem("cookie_date",Date.now()),e(!1)}var xl=Se('<div id="cookie_notification" class="svelte-19d5xat"><p class="svelte-19d5xat"> </p> <button class="button is-success cookie_accept svelte-19d5xat"> </button></div>');ke(["click"]);var Nl=Object.freeze({__proto__:null,UICookieNotification:function(t,e){Zt(e,!0);const i=xi(),r=()=>Ti(sr,"$LOCALE",i);let n=Di(e,"show",15,!1),s=Di(e,"message",3,"Для улучшения работы сайта и его взаимодействия с пользователями мы используем файлы cookie. Продолжая работу с сайтом, Вы разрешаете использование cookie-файлов. Вы всегда можете отключить файлы cookie в настройках Вашего браузера."),o=Di(e,"agree",3,"Хорошо");Ai((()=>{let t=localStorage.getItem("cookie_date");(!t||+t+31536e6<Date.now())&&n(!0)}));var a=Ee();qe(he(a),n,(t=>{var e=xl(),i=de(e),a=de(i),l=ge(i,2);l.__click=[Tl,n];var c=de(l);tt((()=>{je(a,r()[s()]),je(c,r()[o()])})),Le(t,e)})),Le(t,a),te()},UIError:Cl,UISuccess:Ll}),Fl=Object.freeze({__proto__:null,Blocks:er,Buttons:mn,Forms:Ja,Icons:nl,Images:ol,Layouts:Wo,Links:al,Lists:vl,Modals:Al,Notifications:Nl,UICommon:Gi,Various:jn});const Ml=Symbol("init"),Rl=Symbol("data"),Ul=Symbol("working"),Dl=Symbol("options");class Pl extends pr{constructor(t){return super(),this[Rl]={},this[Ul]={},this[Dl]={},this[Ml](t),this}[Ml](t){t||(t={}),Object.hasOwn(t,"data")&&this.setData(t.data),Object.hasOwn(t,"working")&&this.setWorking(t.working),Object.hasOwn(t,"options")&&this.setOptions(t.options),this.log=_r.genLogMsg(this.getWorking("name")),this.info=this.log,this.debug=_r.genLogDebug(this.getWorking("name")),this.error=_r.genLogError(this.getWorking("name"))}setCommon(t,e){switch(e.length){case 1:t=e[0];break;case 2:br.set(e[0],t,void 0,e[1])}return this}getCommon(t,e){switch(e.length){case 1:return br.get(e[0],t);case 2:{let i=br.get(e[0],t);return void 0===i?e[1]:i}default:return t}}setData(){return 1===arguments.length?this[Rl]=arguments[0]:this.setCommon(this.getData(),arguments),this.emit("change"),this}getData(){return this.getCommon(this[Rl],arguments)}setOptions(){return 1===arguments.length?this[Dl]=arguments[0]:this.setCommon(this.getOptions(),arguments),this}getOptions(){return this.getCommon(this[Dl],arguments)}setWorking(){return 1===arguments.length?this[Ul]=arguments[0]:this.setCommon(this.getWorking(),arguments),this}getWorking(){return this.getCommon(this[Ul],arguments)}report(t){_r.report&&_r.report(t)}getApp(){return _r.getApp()}destroy(){this.removeEvent(),this.setOptions(null),this.setWorking(null),this.setData(null),this.emit("destroy")}}const jl=Symbol("history"),Wl=Symbol("hash");var Bl=new class extends Pl{constructor(){return super({working:{routes:[],mode:jl,root:"/",initialized:!1,delays:yn,delay_default:On}}),Ki(this,"host",""),this}setDelays(t){return this.setWorking("delays",t),this}setDefaultNavigationDelay(t){return this.setWorking("delay_default",this.delayAsMs(t)),this}getDefaultNavigationDelay(){return this.getWorking("delay_default",On)}delayAsMs(t){return"number"==typeof t?t:"string"==typeof t&&t.length>0?this.getWorking(`delays.${t}`,this.getDefaultNavigationDelay()):this.getDefaultNavigationDelay()}navigateWithDelay(t,e,i){var r=this;return setTimeout((function(){"function"==typeof i&&i(),r.navigate(t)}),this.delayAsMs(e))}history(){this.setWorking("mode",jl)}hash(){this.setWorking("mode",Wl)}setRoot(t){return this.setWorking("root",t&&"/"!==t?"/"+this.clearSlashes(t)+"/":"/"),this}clearSlashes(t){return t.toString().replace(/\/$/,"").replace(/^\//,"")}add(t,e){"function"==typeof t&&(e=t,t="");let i={re:t,handler:e};return this.getWorking("routes").push(i),this}addList(t){for(let e in t)this.add(e,t[e]);return this}remove(t){for(var e,i=0;this.getWorking("routes").length,e=this.getWorking("routes")[i];i++)if(e.handler===t||e.re===t)return this.getWorking("routes").splice(i,1),this;return this}flush(){return this.setWorking({routes:[],mode:jl,root:"/"}),this}isInitialized(){return this.getWorking("initialized")}setInitialized(t=!0){return this.setWorking("initialized",t)}getFragment(){var t="";if(this.getWorking("mode")===jl){if(!location)return"";t=(t=this.clearSlashes(decodeURI(location.pathname+location.search))).replace(/\?(.*)$/,""),t="/"!=this.getWorking("root")?t.replace(this.getWorking("root"),""):t}else{if(!window)return"";var e=window.location.href.match(/#(.*)$/);t=e?e[1]:""}return this.clearSlashes(t)}checkLocation(){let t=this.getWorking("current"),e=this.getFragment(),i=this.isInitialized();t===e&&i||(this.setWorking("current",e),this.check(e),this.setInitialized(!0))}hrefClick(){}getRoot(){return this.getWorking("root")}listen(t=50){return this.setWorking("current","notInitialized"),clearInterval(this.getWorking("interval")),this.setWorking("interval",setInterval(this.checkLocation.bind(this),t)),window.addEventListener("popstate",this.hrefClick.bind(this)),this}check(t){let e=t||this.getFragment(),i=null;for(let t=0;t<this.getWorking("routes").length;t++){let r=this.getWorking("root")+this.getWorking("routes")[t].re,n=this.clearSlashes(decodeURI(r)),s=e.match(n);if(s&&s.length){if(""!==n)return s.shift(),this.getWorking("routes")[t].handler.apply(this.host||{},s),this.emit("afterRoute",this.getWorking("routes")[t]),this;s.shift(),i={route:this.getWorking("routes")[t],match:s}}}return i&&(i.route.handler.apply(this.host||{},i.match),this.emit("afterRoute",i.route)),this}refresh(t=0){var e=this;t>0?setTimeout((function(){return e.refresh()}),t):this.check(this.getWorking("current"))}navigate(t){switch(t=t||"",this.getWorking("mode")){case jl:{const e=this.getFullRoute(t);e===this.lastRoute?this.refresh():(this.lastRoute=e,history.pushState(null,"",this.lastRoute));break}case Wl:window.location.href.match(/#(.*)$/),window.location.href=window.location.href.replace(/#(.*)$/,"")+"#"+t}return this}getFullRoute(t=""){t=this.clearSlashes(t);const e=this.getWorking("root");return"/"!==e&&0===t.indexOf(e.substring(1))?"/"+t:this.getWorking("root")+this.clearSlashes(t)}getAllLinks(){const t=document.body.querySelectorAll("a");let e=[];for(let i=0;i<t.length;i++)for(let r=0,n=t[i].attributes,s=n.length;r<s;r++)if(0===n[r].nodeName.indexOf("n-href")){e.push(t[i]);break}return e}reRouteExisted(){const t=this.getAllLinks();for(let e=0;e<t.length;e++)this.initRerouting(t[e],t[e].getAttribute("n-href"));return this}initRerouting(t,e){var i=this;if(!t.notRouterInitialized){let r=this.getFullRoute(e);t.setAttribute("href",r),t.addEventListener("click",(function(t){return t.preventDefault(),i.navigate(e),!1})),t.notRouterInitialized=!0}return this}};class zl extends Pl{constructor(t={}){return super({working:{name:t.name?t.name:"APIQuee"},options:t}),this.busy=!1,this.queue=[],this.busySince=-1,this.afterEmpty=void 0,this.start(),this}stop(){this.interval&&(clearInterval(this.interval),this.interval=void 0,this.busy=!1,this.busySince=-1)}start(){this.stop(),this.interval=setInterval(this.checkQueue.bind(this),this.QUEUE_CHECK_INTERVAL)}checkQueue(){var t=this;if(this.isEmpty()||this.isBusy()){if(!this.isBusy()&&this.afterEmpty){let t=this.afterEmpty;this.afterEmpty=void 0,t()}}else this.setBusy().runNext().then(this.setFree.bind(this)).catch((function(e){t.error&&t.error(e),t.setFree()}))}addToQueue(t){this.queue.push(t)}runNext(){let t=this.queue.map((function(t){return t.title})).join(", ");this.debug&&this.debug(`tasks [${t}]`);let e=this.queue.shift();return _r.isFunc(e.action)?_r.isFunc(e.resolve)?e.action().then(e.resolve):(this.error&&this.error("В задании нет возвратной части, resolve не функция",e.title),e.action()):(this.error&&this.error("В задании нет исполнимой части, action не функция",e.title),Promise.resolve())}isBusy(){let t=!!this.busy,e=Date.now()/1e3;return!!(t&&this.busySince>-1)&&(!(e-this.busySince>zl.MAX_BUSY_TIME)||(this.setFree(),!1))}setBusy(){return this.busy=!0,this.busySince=Date.now()/1e3,this}setFree(){return this.busy=!1,this.busySince=-1,this}isEmpty(){return 0===this.queue.length}run(t,e=void 0,i=""){var r=this;return e&&void 0===this.afterEmpty&&(this.afterEmpty=e),new Promise((function(e,n){try{r.addToQueue({action:t,resolve:e,title:i})}catch(t){r.error&&r.error(t),n(t)}}))}actionIsQueued(t){return this.queue.some((function(e){return e.title==t}))}runIfNotQueued(t,e=void 0,i=""){return this.actionIsQueued(i)?Promise.resolve():this.run(t,e,i)}}Ki(zl,"QUEUE_CHECK_INTERVAL",100),Ki(zl,"MAX_BUSY_TIME",300);class Vl extends Pl{constructor(t){return super({options:t,working:{name:t.name?t.name:"APIConnection"}}),this.online=null,this.run(),this}run(){this.int=window.setInterval(this.check.bind(this),1e3)}pause(){window.clearInterval(this.int)}resume(){this.run()}isOnline(){return window.navigator.onLine}check(){let t=this.isOnline();null!==this.online&&this.online!==t&&this.changeState(t),this.online=t}changeState(t=!1){t?this.emit("online"):this.emit("offline")}}Ki(Vl,"int",void 0),Ki(Vl,"online",void 0);var ql=Object.freeze({__proto__:null,notAPIConnection:Vl,notAPIOptions:{rps:50,protocol:"http",host:"localhost",port:9e3},notAPIQueue:zl});const Hl={};function Kl(t){return _r.objHas(Hl,t)}var Gl=Object.freeze({__proto__:null,create:function(t,e={raw:[],filtered:[],selected:{}}){if(!Kl(t)){if(!(Object.keys(e).length>0))throw new Error("store's props wasn't specified");Hl[t]={},Object.keys(e).forEach((function(i){Hl[t][i]=rr(e[i])}))}return Hl[t]},fake:function(t){return{subscribe:e=>(e(t),function(){}),set(){}}},get:function(t){return!!Kl(t)&&Hl[t]}});const Jl=Symbol("interface"),Yl=["getActionsCount","getActions","setFindBy","resetFilter","setFilter","getFilter","setSorter","getSorter","resetSorter","setPageNumber","setPageSize","setPager","setReturn","setSearch","getSearch","resetSearch","resetPager","getPager","addFormFieldType","addFormField","getFieldTypes","getActionFormFields"],Ql=["_id","id","ID"],Xl={},Zl={};class tc extends Pl{constructor(t,e){return super({working:{name:"network interface for: "+(t.model?t.model:"unknown"),filter:Xl,search:"",return:Zl,pager:{size:10,page:0}},options:e}),this.manifest=t,this.initActions(),this}initActions(){if(this.getActionsCount()>0){let t=this.getActions();for(let e in t)this.initAction(e)}}initAction(t){var e=this;_r.objHas(this,"$"+t)||(this["$"+t]=function(i,r,n=!1,s){return e.request(e,t,i,r,n,s)})}requestHTTP(t,e,i,r={},n=!1,s){try{let o=Object.assign({},t.getData&&"function"==typeof t.getData?t.getData():t,i),a=this.getActionData(e),l=this.collectRequestData(a),c=this.encodeRequest(l),u=this.getServerURL(),d=this.getURL(o,a,e),h={};if(n){d=this.getURL(i,a,e);const t=new FormData;t.append("file",s),h.body=t}else-1===["OPTIONS","GET"].indexOf(a.method.toUpperCase())&&(h={method:a.method,body:JSON.stringify(t.getData&&"function"==typeof t.getData?t.getData():t),headers:{Accept:"application/json","Content-Type":"application/json"}});return h.method=a.method.toUpperCase(),r&&Object.keys(r).length&&(h.headers=r),fetch(u+d+c,h).then((function(t){return t.json()}))}catch(t){_r.error(t),_r.report(t)}}requestWS(t,e){try{let i=this.getActionData(e),r=this.collectRequestData(i);const n=_r.getApp().getWSClient(),s=this.getWSRequestName(e),o=Object.assign({},r,t.getData());return _r.objHas(i,"type")&&"string"==typeof i.type&&i.type.length&&"request"!==i.type?n.message(i.type,s,o).then((function(t){return t.payload})):n.request(s,o).then((function(t){return t.payload}))}catch(t){_r.error(t),_r.report(t)}}request(){let t=this.getActionData(arguments[1]);switch(this.selectTransport(t)){case"ws":return this.requestWS(...arguments);case"http":return this.requestHTTP(...arguments);default:throw new Error("Offline")}}wsIsUp(t){if(!0===t.ws){let e;if(e=_r.objHas(t,"wsClient")&&t.wsClient?_r.getApp().getWSClient(t.wsClient):_r.getApp().getWSClient(),e)return!0}return!1}selectTransport(t){return this.wsIsUp(t)?"ws":!!_r.objHas(t,"method")&&"http"}getModelName(){return this&&this.manifest?this.manifest.model:null}getActionData(t){return this.getActions()&&this.getActions()[t]?this.getActions()[t]:null}getActionsCount(){return this.getActions()?Object.keys(this.getActions()).length:0}getActions(){return this.manifest&&this.manifest.actions?this.manifest.actions:{}}parseParams(t,e,i,r){let n="",s=t.length;for(;i.indexOf(t)>-1;){let o=i.indexOf(t),a=o+s,l=i.indexOf(e);if(o>l)break;if(n=i.slice(a,l),""==n)break;this.log&&this.log(t+n+e,br.get(n,r)),i=i.replace(t+n+e,br.get(n,r))}return i}parseLine(t,e,i){return t=(t=t.replace(":modelName",this.manifest.model)).replace(":actionName",i),t=this.parseParams(":record[","]",t,e),t=this.parseParams(":","?",t,e)}getURL(t,e,i){return this.parseLine(this.manifest.url,t,i)+(_r.objHas(e,"postFix")?this.parseLine(e.postFix,t,i):"")}getServerURL(){return _r.getApp()?_r.getApp().getOptions("api.server.url",""):""}getWSRequestName(t){return`${this.manifest.model}//${t}`}encodeRequest(t){let e="?";for(let i in t)void 0!==t[i]&&null!==t[i]&&(e+=encodeURIComponent(i)+"="+encodeURIComponent(t[i].constructor===Object?JSON.stringify(t[i]):t[i])+"&");return this.getOptions("test")&&(e+="&test=1",this.getOptions("test.session")&&(e+="&session="+this.getOptions("test.session")),this.getOptions("test.session")&&(e+="&role="+this.getOptions("test.role"))),e}collectRequestData(t){let e={};if(_r.objHas(t,"data")&&Array.isArray(t.data))for(let i=0;i<t.data.length;i++){let r="get"+_r.capitalizeFirstLetter(t.data[i]);if(this[r]&&"function"==typeof this[r]){let n=this[r](),s={};["pager","sorter","filter","search","return"].indexOf(t.data[i])>-1?s[t.data[i]]=n:s=n,e=Object.assign(e,s)}}return e}getID(t,e){let i,r=Ql,n=["",this.manifest.model];_r.objHas(e,"index")&&e.index&&(r=[e.index].concat(Ql));for(let e of n)for(let n of r)if(_r.objHas(t,e+n)){i=t[e+n];break}return i}setFindBy(t,e){var i={};return i[t]=e,this.setFilter(i)}setFilter(t=Xl){return this.setWorking("filter",t),this}resetFilter(){return this.setFilter()}getFilter(){return this.getWorking("filter")}setSearch(t=""){return this.setWorking("search",t),this}resetSearch(){return this.setSearch()}getSearch(){return this.getWorking("search")}setSorter(t){return this.setWorking("sorter",t),this}resetSorter(){return this.setSorter({})}getSorter(){return this.getWorking("sorter")}setReturn(t=Zl){return this.setWorking("return",t),this}resetReturn(){return this.setReturn({})}getReturn(){return this.getWorking("return")}setPageNumber(t){return this.setWorking("pager.page",t),this}setPageSize(t){return this.setWorking("pager.size",t),this}setPager(){if((arguments.length<2||isNaN(arguments[0])||isNaN(arguments[1]))&&arguments[0].constructor===Object&&_r.objHas(arguments[0],"page")&&_r.objHas(arguments[0],"size")){const t=arguments[0];this.setWorking("pager",{size:t.size||10,page:t.page||0})}else 2!==arguments.length||isNaN(arguments[0])||isNaN(arguments[1])||this.setWorking("pager",{size:arguments[0]||10,page:arguments[1]||0});return this}resetPager(){return this.setPager()}getPager(){return this.getWorking("pager")}getRecord(){this.getData()}getDefaultAsPlainObject(){if(!this.manifest||!this.manifest.fields)return{};const t={};for(const e of Object.keys(this.manifest.fields))if(Object.hasOwn(this.manifest.fields[e],"default")){const i=this.manifest.fields[e].default;Array.isArray(i)?t[e]=[...i]:t[e]="object"==typeof i?{...i}:i}return t}}class ec extends Pl{constructor(t,e){return super(),null==e||"object"!=typeof e?e:e&&e.isProxy?(_r.error("this is Proxy item"),e):e&&(e.isRecord||e.isProperty)?e:Array.isArray(e)?this.createCollection(t,e):(this.setOptions({}),this[Jl]=new tc(t,{}),this.setData(e),this.interfaceUp(),this.mapToInterface(),this.mapToMethods(),this)}toDefault(){return this.setData(this[Jl].getDefaultAsPlainObject())}mapToInterface(){let t=this;for(let e of Yl)this[Jl][e]&&"function"==typeof this[Jl][e]&&(this[e]=function(){let i=t[Jl][e](...arguments);return i==t[Jl]?t:i})}mapToMethods(){let t=this[Jl].manifest,e=_r.getApp(),i={};if(t.methods?i=t.methods:e&&(i=e.getOptions(["models",this[Jl].manifest.model].join("."),{})),i)for(let t in i)Object.hasOwn(i,t)&&(this[t]=i[t])}createCollection(t,e){for(var i=[],r=0;r<e.length;r++)i.push(new ec(t,e[r]));return i}interfaceUp(){if(this[Jl].getActionsCount()>0){let t=this[Jl].getActions();for(let e in t)this.actionUp(e,t[e])}}actionUp(t){var e=this;Object.hasOwn(this,["$"+t])||(this["$"+t]=function(...i){return e[Jl].request(e,t,...i)})}setAttr(t,e){return this.setData(t,e)}setAttrs(t){if(t&&"object"==typeof t&&Object.keys(t).length>0)for(let e in t)this.setAttr(e,t[e])}getAttr(t,e=!1){let i=this.getData(t,{});return e?_r.stripProxy(i):i}getAttrs(t){let e=[];if(t&&t.length>0)for(let i of t)e.push(this.getAttr(i));return e}getManifest(){return this[Jl]?this[Jl].manifest:{}}setItem(t){return this.setData(t),this}}const ic="main";class rc extends Pl{constructor(t){return super({working:{name:t.name,interfaces:{},controllers:_r.objHas(t,"controllers")?t.controllers:{},initController:null,currentController:null,uis:{},wsc:{},wss:{},services:{}},options:t}),this?.log&&this.log("start app"),_r.register("app",this),this.initManifest(),this}initManifest(){var t=this;_r.getJSON(this.getOptions("manifestURL")).then((function(e){return t.setInterfaceManifest(e)})).catch((function(t){return _r.report(t)}))}initRouter(){this.setWorking("router",Bl),this.getWorking("router").setRoot(this.getOptions("router.root")),Bl.reRouteExisted()}execRouter(){var t={};for(let e=0;e<this.getOptions("router.manifest").length;e++){let i=this.getOptions("router.manifest")[e],r=i.paths,n=i.schemes,s=i.controller;for(let e=0;e<r.length;e++){let i=!!(n&&Array.isArray(n)&&n.length>e)&&n[e];t[r[e]]=this.bindController(s,i)}}this.getWorking("router").addList(t).listen()}setInterfaceManifest(t){Object.freeze(t),this.setOptions("interfaceManifest",t),this.initRouter(),this.update()}getInterfaceManifest(t){return t?this.getOptions("interfaceManifest")[t]:this.getOptions("interfaceManifest")}update(){this.updateInterfaces(),this.initController(),this.startApp()}startApp(){this.initServices(),this.execRouter(),this.emit("afterStarted",this)}bindController(t,e){let i=this;return function(){new t(i,arguments,e)}}initController(){if(void 0!==this.getOptions("initController")){let t=this.getOptions("initController");this.setWorking("initController",new t(this))}}getCurrentController(){return this.getWorking("currentController")}setCurrentController(t){let e=this.getCurrentController();return e&&e.destroy&&e.destroy(),this.setWorking("currentController",t),this}createInterfaceModelFactory(t){return function(e){return new ec(t,e)}}updateInterfaces(){this.clearInterfaces();let t=this.getOptions("interfaceManifest");if(t)for(let e in t){let i=t[e],r=this.getOptions(["models",e].join("."),{});i.methods=r;const n=this.createInterfaceModelFactory(i);this.setInterface(e,n)}}getRecordName(t){return"nr"+_r.capitalizeFirstLetter(t)}getControllerName(t){return"nc"+_r.capitalizeFirstLetter(t)}setInterface(t,e){return this.setWorking(`interfaces.${t}`,e)}getInterfaces(){return this.getWorking("interfaces")}clearInterfaces(){return this.setWorking("interfaces",{}),this}setWSClient(t=ic,e){return this.setWorking(`wsc.${t}`,e)}getWSClient(t=ic){return this.getWorking(`wsc.${t}`)}getInterface(t){return this.getInterfaces()[t]}getModel(t,e={}){return this.getInterface(t)(e)}setService(t,e){return this.setWorking(`services.${t}`,e)}getService(t){return this.getWorking(`services.${t}`)}initServices(){if(this.getOptions("services"))for(let t in this.getOptions("services"))try{let e=this.getOptions(`services.${t}`);switch(_r.detectType(e)){case"function":case"class":this.setService(t,new e(this));break;default:this.setService(t,e)}}catch(e){this?.error&&this.error(`Service (${t}) init error`,e)}}getConfigReaderForModule(t=""){var e=this;const i=["modules",t].join(".");return{get:function(t,r){return t&&"string"==typeof t&&t.length?e.getOptions([i,t].join("."),r):e.getOptions(i,r)}}}moduleConfig(t=""){return this.getConfigReaderForModule(t)}}Ki(rc,"DEFAULT_WS_CLIENT_NAME",ic);const nc="default",sc="main";class oc extends Pl{static get MODULE_NAME(){return sc}static get MODEL_NAME(){return"ModelName"}static get LABELS(){return{plural:`${sc}:model_label_plural`,single:`${sc}:model_label_single`}}constructor(t,e){var i;super({}),i=this,Ki(this,"els",void 0),Ki(this,"make",void 0),Ki(this,"app",void 0),this.app=t,this.app.setCurrentController(this),this.setWorking({name:e,ready:!1,views:{},libs:{},helpers:{}}),this.ui={},this.els={},this.setData({}),this.setOptions({moduleName:sc,containerSelector:"main.content",prefix:t.getOptions("paths.module"),names:{plural:"Models",single:"Model"}}),this.setURLPrefix(t.getOptions("router.root"));let r=t.getInterfaces();this.make={};for(let t in r)Object.hasOwn(r,t)&&(this.make[t]=r[t]);return this.on("destroy",(function(){i.app=null;for(let t in i.ui)i.ui[t].destroy&&i.ui[t].destroy(),i.ui[t].$destroy&&i.ui[t].$destroy(),i.ui[t]=null;i.els=null,i.make=null})),this}getApp(){return _r.getApp()}setModel(t){return this.setWorking("model",t),this}getModel(t,e){if("string"==typeof t){const i=this.getInterface(t);return i&&i(e||{})}{const e=this.getInterface();return e&&e(t||{})}}getInterface(t=""){return this.app?.getInterface(t||this.getModelName())}getModelName(){return this.getWorking("modelName")}setModelName(t){return this.setWorking("modelName",_r.lowerFirstLetter(t)),this}getModelIDFieldName(){return this.getWorking("modelIDFieldName","_id")}setModelIDFieldName(t="_id"){return this.setWorking("modelIDFieldName",t)}setReady(t=!0){this.setWorking("ready",t),t?this.emit("ready"):this.emit("busy")}setURLPrefix(t){return this.setOptions("urlPrefix",t),this.updateAutoName(),this}getURLPrefix(){return this.getOptions("urlPrefix")}setModuleName(t){return this.setOptions("moduleName",_r.lowerFirstLetter(t)),this.updateAutoName(),this}getModuleName(){return this.getOptions("moduleName")}getModulePrefix(){return[_r.getApp().getOptions("paths.modules"),this.getModuleName()].join("/")}getModelURL(){return _r.buildURL({prefix:this.getURLPrefix(),module:this.getModuleName(),model:this.getModelName()})}getModelActionURL(t,e=""){return _r.buildURL({prefix:this.getURLPrefix(),module:this.getModuleName(),model:this.getModelName(),id:t,action:e})}buildURL(t){return _r.buildURL(t)}updateAutoName(){return this.getOptions("autoName",true),this}setName(t){return this.setWorking("name",t),this.setOptions("autoName",!1),this}getName(){return this.getWorking("name")}preloadLib(t={}){var e=this;return new Promise((function(i,r){if("object"!=typeof t)i(void 0);else{e.setWorking("loading",[]);for(let n in t)e.getWorking("loading").push(t[n]),e.make[t[n]]({}).$listAll().then((function(r){e.getOptions("libs")||e.setOptions("libs",{}),e.getOptions("libs")[n]=r,e.getWorking("loading").indexOf(t[n])>-1&&e.getWorking("loading").splice(e.getWorking("loading").indexOf(t[n]),1),0===e.getWorking("loading").length&&i(void 0)})).catch((function(t){e.report(t),r()}));0===e.getWorking("loading").length&&i(void 0)}}))}onAfterRender(){this.emit("afterRender")}getActionName(t=nc){return"run"+_r.capitalizeFirstLetter(t)}getDefaultActionName(){return this.getActionName(this.getOptions("defaultAction",nc))}route(t){let[e,...i]=t,r=this.getActionName(e||nc);"function"==typeof this[r]?(this.setCurrentAction(r),this[r](i)):this[this.getDefaultActionName()]?(this.setCurrentAction(this.getDefaultActionName()),this[this.getDefaultActionName()](i)):(this.setCurrentAction(void 0),this.error&&this.error("No action in router",t))}setCurrentAction(t){this.setWorking("action",t)}getCurrentAction(){return this.getWorking("action")}getAppOptions(){try{return this.getApp().getOptions()}catch(t){this.error&&this.error(t)}}getModuleOptions(t){try{return this.getApp().getOptions(["modules",t||this.getModuleName()].join("."))}catch(t){this.error&&this.error(t)}}getServices(t){try{return this.getApp().getOptions(["services",t||this.getModuleName()].join("."))}catch(t){this.error&&this.error(t)}}getComponents(t){try{return this.getApp().getOptions(["components",t||this.getModuleName()].join("."))}catch(t){this.error&&this.error(t)}}refresh(t=0){this.app?.getWorking("router").refresh(t)}static getControllerRoute(t=0){let e=[];this.MODULE_NAME&&this.MODULE_NAME.length>0&&e.push(_r.lowerFirstLetter(this.MODULE_NAME)),this.MODEL_NAME&&this.MODEL_NAME.length>0&&e.push(_r.lowerFirstLetter(this.MODEL_NAME)),e=[e.join("/")];for(let i=0;i<t;i++)e.push("/([^/]+)");return e.join("")}static getControllerRoutes(t=0){let e=[this.getControllerRoute(0)];for(let i=0;i<t;i++)e.unshift(this.getControllerRoute(i+1));return e}static getRoutes(){return{paths:this.getControllerRoutes(this.PARAMS_LENGTH),controller:this}}getRouter(){return this.app?.getWorking("router")}navigateWithDelay(t,e=1500,i=function(){}){return this.getRouter().navigateWithDelay(t,e,i)}navigate(t){return this.getRouter().navigate(t)}navigateAction(t,e="",i=0,r=function(){}){return this.navigateModuleAction(this.getModuleName(),this.getModelName(),t,e,i,r)}navigateModelAction(t,e,i="",r=0,n=function(){}){return this.navigateModuleAction(this.getModuleName(),t,e,i,r,n)}navigateModuleAction(t,e,i,r="",n=0,s=function(){}){return n?this.getRouter().navigateWithDelay(_r.buildURL({prefix:this.getURLPrefix(),module:t,model:e,id:i,action:r}),n,s):this.getRouter().navigate(_r.buildURL({prefix:this.getURLPrefix(),module:t,model:e,id:i,action:r}))}static getCommonMenu(t){return[{section:t.MODULE_NAME,title:t.LABELS.plural,url:`/${_r.lowerFirstLetter(t.MODULE_NAME)}/${_r.lowerFirstLetter(t.MODEL_NAME)}`}]}static getMenu(){}}Ki(oc,"PARAMS_LENGTH",2);const ac={};function lc(t){return Object.hasOwn(ac,t)}function cc(t){return!!lc(t)&&ac[t]}function uc(t,e,i,r){return r("change",{id:e(),field:i(),value:"checkbox"===t.target.type?t.target.checked:t.target.value}),!0}var dc=Se('<input type="checkbox"> <label class="label"></label>',1);ke(["input"]);var hc=Se("<a> </a>"),gc=Se('<div class="mx-1 tags has-addons svelte-38rpfk"><span class="tag"> </span> <span><!></span></div>'),fc=Se("<a> </a>"),pc=Se("<span><!></span>");var vc=Se("<td><!></td>");function mc(t,e){Zt(e,!0);const i=xi();let r=x("");Ai((()=>{void 0===s().type&&(Object.hasOwn(s(),"titlePath")?U(r,re(br.get(s().titlePath,o(),a()))):Object.hasOwn(s(),"titleComposer")&&"function"==typeof s().titleComposer?U(r,re(s().titleComposer(o(),a()))):U(r,re(br.get(s().path,o(),a()))))}));let n=Di(e,"getItemId",3,(t=>t._id)),s=Di(e,"field",19,(()=>({}))),o=Di(e,"item",19,(()=>({}))),a=Di(e,"helpers",19,(()=>({})));var l=vc();qe(de(l),(()=>"link"===s().type),(t=>{var e=j((()=>br.get(s().path,o(),a())));Oo(t,{get values(){return Gt(e)}})}),(t=>{var e=Ee();qe(he(e),(()=>"button"===s().type),(t=>{var e=j((()=>br.get(s().path,o(),a())));dn(t,{get values(){return Gt(e)}})}),(t=>{var e=Ee();qe(he(e),(()=>"image"===s().type),(t=>{var e=j((()=>br.get(s().path,o(),a())));sl(t,{get values(){return Gt(e)}})}),(t=>{var e=Ee();qe(he(e),(()=>"boolean"===s().type),(t=>{var e=j((()=>br.get(s().path,o(),a())));xr(t,{get values(){return Gt(e)}})}),(t=>{var e=Ee();qe(he(e),(()=>"tag"===s().type),(t=>{var e=j((()=>br.get(s().path,o(),a())));!function(t,e){let i=Di(e,"values",19,(()=>[]));var r=Ee();Je(he(r),17,i,(t=>t.id),((t,e)=>{var i=Ee();qe(he(i),(()=>Object.hasOwn(Gt(e),"value")),(t=>{var i=gc(),r=de(i),n=de(r),s=ge(r,2);qe(de(s),(()=>Gt(e).url),(t=>{var i=hc(),r=de(i);tt((()=>{ni(i,"href",Gt(e).url),ai(i,`${Gt(e).urlCustomClasses??""} svelte-38rpfk`),je(r,Gt(e).value)})),Le(t,i)}),(t=>{var i=Ce();tt((()=>je(i,Gt(e).value))),Le(t,i)})),tt((()=>{je(n,Gt(e).title),ai(s,`tag is-${Gt(e).color??""} ${Gt(e).customClasses??""} svelte-38rpfk`)})),Le(t,i)}),(t=>{var i=pc();qe(de(i),(()=>Gt(e).url),(t=>{var i=fc(),r=de(i);tt((()=>{ni(i,"href",Gt(e).url),ai(i,`${Gt(e).urlCustomClasses??""} svelte-38rpfk`),je(r,Gt(e).title)})),Le(t,i)}),(t=>{var i=Ce();tt((()=>je(i,Gt(e).title))),Le(t,i)})),tt((()=>ai(i,`mx-1 tag is-${Gt(e).color??""} ${Gt(e).customClasses??""} svelte-38rpfk`))),Le(t,i)})),Le(t,i)})),Le(t,r)}(t,{get values(){return Gt(e)}})}),(t=>{var e=Ee();qe(he(e),(()=>"switch"===s().type),(t=>{var e=j((()=>n()(o()))),i=j((()=>br.get(s().path,o(),a())));!function(t,e){Zt(e,!0);let i=Si(),r=Di(e,"id",3,""),n=Di(e,"value",15,!1),s=Di(e,"fieldname",3,"switch"),o=Di(e,"disabled",3,!1),a=Di(e,"readonly",3,!1),l=Di(e,"styling",3," is-rounded is-success ");var c=dc(),u=he(c);u.__input=[uc,r,s,i];var d=ge(u,2);tt((()=>{ai(u,`switch ${l()??""}`),ni(u,"id",`edit-table-row-cell-inline-switch-${s()??""}-${r()??""}`),ni(u,"name",s()),u.readOnly=a(),u.disabled=o(),ni(d,"for",`edit-table-row-cell-inline-switch-${s()??""}-${r()??""}`)})),bi(u,n),Le(t,c),te()}(t,{get id(){return Gt(e)},get fieldname(){return s().path},get value(){return Gt(i)},get disabled(){return s().disabled},get readonly(){return s().readonly},$$events:{change(...t){s().onChange?.apply(this,t)}}})}),(t=>{var e=Ee();qe(he(e),(()=>s().component),(t=>{var e=Ee(),i=he(e),r=j((()=>n()(o()))),l=j((()=>br.get(s().path,o(),a())));ri(i,(()=>s().component),((t,e)=>{e(t,Ri({get id(){return Gt(r)},get fieldname(){return s().path},get disabled(){return s().disabled},get readonly(){return s().readonly},get value(){return Gt(l)}},(()=>s().options),{$$events:{change(...t){s().onChange?.apply(this,t)}}}))})),Le(t,e)}),(t=>{var e=Ee();qe(he(e),(()=>s()&&void 0!==s()&&!isNaN(s().maxLength)&&s().maxLength),(t=>{var e=Ce();tt((()=>je(e,_r.strLengthCap(br.get(s().path,o(),a()),s().maxLength)))),Le(t,e)}),(t=>{var e=Ce();tt((()=>je(e,Ti(sr,"$LOCALE",i)[br.get(s().path,o(),a())]))),Le(t,e)}),!0),Le(t,e)}),!0),Le(t,e)}),!0),Le(t,e)}),!0),Le(t,e)}),!0),Le(t,e)}),!0),Le(t,e)}),!0),Le(t,e)})),tt((()=>{ai(l,(s().hideOnMobile?" is-hidden-touch ":"")+(s().classes?` ${s().classes} `:"")),ni(l,"title",Gt(r))})),Le(t,l),te()}function bc(t,e,i,r,n){return t.preventDefault(),e("rowSelectChange",{id:Gt(i),selected:r()[Gt(i)]}),!1}var yc=Se('<td><input type="checkbox" placeholder=""></td>'),Oc=Se("<tr><!><!></tr>");function $c(t,e){Zt(e,!0);const i=xi(),r=()=>Ti(n,"$selectedList",i);let n,s=Si(),o=x(void 0);Ai((()=>{U(o,re(d()(a()))),n=cc(e.id).selected}));let a=Di(e,"item",19,(()=>({}))),l=Di(e,"helpers",19,(()=>({}))),c=Di(e,"fields",19,(()=>[])),u=Di(e,"showSelect",3,!1),d=Di(e,"getItemId",3,(()=>{}));var h=Oc(),g=de(h);qe(g,(()=>u()&&r()),(t=>{var e=yc(),i=de(e);tt((()=>ni(i,"id",`table-row-select-${d()(a())??""}`))),tt((()=>ni(i,"data-id",d()(a())))),tt((()=>ni(i,"name",`row_selected_${d()(a())??""}`))),i.__change=[bc,s,o,r,n],bi(i,(()=>r()[Gt(o)]),(t=>{return e=n,i=Jt(r)[Gt(o)]=t,s=Jt(r),e.set(s),i;var e,i,s})),Le(t,e)})),Je(ge(g),17,c,Ge,((t,e)=>{mc(t,{get field(){return Gt(e)},get helpers(){return l()},get item(){return a()},get getItemId(){return d()}})})),Le(t,h),te()}function wc(t,e){try{e("searchChange",t.currentTarget.value.trim())}catch{return}}function kc(t,e){e("goToPrevPage")}function _c(t,e){e("goToNextPage")}function Ic(t,e){t.preventDefault();let i=t.target;return e("goToPage",parseInt(i.dataset.page)),!1}function Ac(t,e,i,r,n){cc(e.id).selected.update((t=>(i().forEach((e=>{t[r()(e)]=n()})),t)))}ke(["change"]);var Sc=Se('<div class="field is-grouped"><!></div>'),Cc=Se('<div class="field is-grouped"><!></div>'),Ec=Se('<div class="field"><div class="control"><input class="input" type="text" placeholder="Поиск"></div></div>'),Lc=Se('<th><input type="checkbox" id="table-row-select-page" placeholder="" name="row_selected_all"></th>'),Tc=Se("<th><!></th>"),xc=Se('<a href="" class="pagination-link is-current" aria-current="page"> </a>'),Nc=Se('<a href="" class="pagination-link"> </a>'),Fc=Se("<li><!></li>"),Mc=Se('<nav class="pagination is-centered" aria-label="pagination"><a href="" class="pagination-previous">Назад</a> <a href="" class="pagination-next">Вперед</a> <ul class="pagination-list"><!></ul></nav>'),Rc=Se('<!> <!> <!> <table class="table"><thead><tr><!><!></tr></thead><tbody></tbody></table> <!>',1);ke(["input","change","click"]);const Uc="__dublicate__",Dc={},Pc=!1,jc="listAndCount",Wc="count",Bc="preprocessor",zc={ui:function(t,e){Zt(e,!0);const i=xi();let r=Si(),n=Di(e,"helpers",19,(()=>({}))),s=Di(e,"state",31,(()=>re({}))),o=Di(e,"filter",31,(()=>re({}))),a=Di(e,"sorter",31,(()=>re({}))),l=Di(e,"fields",19,(()=>[])),c=Di(e,"selected",31,(()=>re({}))),u=Di(e,"items",31,(()=>re([]))),d=Di(e,"actions",19,(()=>[])),h=Di(e,"links",19,(()=>[])),g=Di(e,"search",15,""),f=Di(e,"showSearch",3,!0),p=Di(e,"showSelect",3,!0),v=Di(e,"selectAll",15,!1),m=Di(e,"getItemId",3,(t=>t._id));function b({detail:t}){try{r("searchChange",t)}catch{return}}function y({detail:t}){try{r("filterChange",t)}catch{return}}Ai((()=>{p()&&cc(e.id).selected.subscribe((t=>{c(t)})),cc(e.id).refined.subscribe((t=>{if(u(t),p()){for(let t in c())u().some((e=>m()(e)===t))?Object.hasOwn(c(),t)||c(c()[t]=!1,!0):delete c()[t];c(c())}})),cc(e.id).state.subscribe((t=>{s(t)}))}));var O=Rc(),$=he(O);qe($,(()=>h().length),(t=>{var e=Sc();Oo(de(e),{get values(){return h()}}),Le(t,e)}));var w=ge($,2);qe(w,(()=>d().length),(t=>{var e=Cc();dn(de(e),{get values(){return d()}}),Le(t,e)}));var k=ge(w,2);qe(k,f,(t=>{var i=Ee();qe(he(i),(()=>e.filterUI),(t=>{var i=Ee();const r=j((()=>e.filterUI));ri(he(i),(()=>Gt(r)),((t,e)=>{e(t,{get filter(){return o()},set filter(t){o(t)},$$events:{change:y,searchChange:b}})})),Le(t,i)}),(t=>{var e=Ec(),i=de(e),n=de(i);n.__input=[wc,r],mi(n,g),Le(t,e)})),Le(t,i)}));var _=ge(k,2),I=de(_),A=de(I),S=de(A);qe(S,p,(t=>{var i=Lc(),r=de(i);r.__change=[Ac,e,u,m,v],bi(r,v),Le(t,i)})),Je(ge(S),17,l,Ge,((t,e)=>{var n=Tc();const s=j((()=>Gt(e).path.substring(1)));var o=j((()=>function(t){const e=t.path.substring(1);Object.hasOwn(a(),e)?a(a()[e]=-1*parseInt(a()[e]),!0):a({[e]:1}),r("sorterChange",a())}(Gt(e))));n.__click=function(...t){Gt(o)?.apply(this,t)},qe(de(n),(()=>Gt(e).sortable&&Object.hasOwn(a(),Gt(s))),(t=>{var i=j((()=>a()[Gt(s)]>0?"sort-up":"sort-down"));tl(t,{get font(){return Gt(i)},get title(){return Gt(e).title},pointable:!0})}),(t=>{var r=Ce();tt((()=>je(r,Ti(sr,"$LOCALE",i)[Gt(e).title]))),Le(t,r)})),tt((()=>ai(n,(Gt(e).hideOnMobile?" is-hidden-touch":"")+(Gt(e).sortable?" is-clickable":"")))),Le(t,n)})),Je(ge(I),21,u,(t=>t._id),((t,i)=>{$c(t,{get id(){return e.id},get item(){return Gt(i)},get fields(){return l()},get helpers(){return n()},get showSelect(){return p()},get getItemId(){return m()},$$events:{rowSelectChange(t){Ii.call(this,e,t)}}})})),qe(ge(_,2),(()=>s()?.pagination?.pages?.list.length>1),(t=>{var e=Mc(),i=de(e);i.__click=[kc,r];var n=ge(i,2);n.__click=[_c,r],qe(de(ge(n,2)),(()=>s().pagination&&s().pagination.pages&&s().pagination.pages.list),(t=>{var e=Ee();Je(he(e),17,(()=>s().pagination.pages.list),Ge,((t,e)=>{var i=Fc();qe(de(i),(()=>Gt(e).active),(t=>{var i=xc(),r=de(i);tt((()=>{ni(i,"aria-label",`Страница ${Gt(e).index??""}`),je(r,Gt(e).index+1)})),Le(t,i)}),(t=>{var i=Nc();i.__click=[Ic,r];var n=de(i);tt((()=>{ni(i,"aria-label",`Страница ${Gt(e).index??""}`),ni(i,"data-page",Gt(e).index),je(n,Gt(e).index+1)})),Le(t,i)})),Le(t,i)})),Le(t,e)})),Le(t,e)})),Le(t,O),te()},links:[],actions:[],endless:!1,idField:"_id",getItemId:function(t){return t._id}};class Vc extends pr{constructor(t={}){return super(),this.id="table-"+Math.random(),this.options={...zc,...t.options?t.options:{}},this.ui={},this.data={raw:[],filtered:[],refined:[],selected:{}},this.state={pagination:{items:{count:0,from:0,to:0},pages:{count:0,from:0,to:0,current:0,list:[]}}},this.working={},this.stores=function(t,e={raw:[],filtered:[],selected:{}}){if(!lc(t)){if(!(Object.keys(e).length>0))throw new Error("store's props wasn't specified");ac[t]={},Object.keys(e).forEach((function(i){ac[t][i]=rr(e[i])}))}return ac[t]}(this.id,{raw:[],filtered:[],refined:[],selected:{},state:this.state,working:this.working}),this.stores.working.subscribe(this.onWorkingUpdate.bind(this)),this.stores.raw.subscribe(this.onRawUpdate.bind(this)),this.stores.filtered.subscribe(this.onFilteredUpdate.bind(this)),this.stores.refined.subscribe(this.onRefinedUpdate.bind(this)),this.stores.selected.subscribe(this.onSelectedUpdate.bind(this)),this.stores.state.subscribe(this.onStateUpdate.bind(this)),_r.objHas(t,"data")&&Array.isArray(t.data)&&this.stores.raw.update((function(e){return t.data})),this.setCombinedActionName(this.getOptions("interface.combinedAction",jc)),_r.objHas(this.options,"filter")?this.setFilter(this.options.filter,!0):this.resetFilter(),_r.objHas(this.options,"pager")?this.setPager(this.options.pager,!0):this.resetPager(),_r.objHas(this.options,"sorter")?this.setSorter(this.options.sorter,!0):this.resetSorter(!0),_r.objHas(this.options,"return")?this.setReturn(this.options.return):this.setReturn(),_r.objHas(this.options,"search")?this.setSearch(this.options.search,!0):this.setSearch(),this.render(),this.updateData(),this}onWorkingUpdate(t){return this.working=t,t}onRawUpdate(t){return this.data.raw=t,t}onFilteredUpdate(t){return this.data.filtered=t,this.refineFiltered(),t}onRefinedUpdate(t){return this.data.refined=t,this.clearSelected(),t}onStateUpdate(t){return this.state=t,t}onSearchChange(t){t.length>3?this.setSearch(t):this.setSearch()}onSorterChange(t){t?this.setSorter(t):this.resetSorter()}onFilterChange({filter:t,actionName:e}){0===e.indexOf(jc)&&this.setCombinedActionName(e),t?this.setFilter(t):this.resetFilter()}onSelectedUpdate(t){this.data.selected=t}clearSelected(){this.data.selected={}}getSelected(t=!1,e="refined"){let i=[];for(let r in this.data.selected)if(this.data.selected[r])if(t){let t=this.data[e].findIndex((function(t){return t._id===r}));t>-1&&i.push(this.data[e][t])}else i.push(r);return i}getItemId(t){return this.getOptions("getItemId",zc.getItemId)(t)}selectAll(){var t=this;this.stores.selected.update((function(){let e={};return t.data.filtered.forEach((function(i){e[t.getItemId(i)]=!0})),e}))}selectNone(){var t=this;this.stores.selected.update((function(){let e={};return t.data.filtered.forEach((function(i){e[t.getItemId(i)]=!1})),e}))}render(){var t=this;this.ui.table||(this.ui.table=new this.options.ui({target:this.options.targetEl,props:{filterUI:this.getOptions("filterUI",void 0),id:this.id,helpers:Object.assign({},this.getHelpers()),fields:this.getOptions("fields"),actions:this.getActions(),links:this.getLinks(),search:"",showSelect:this.getOptions("showSelect"),showSearch:this.getOptions("showSearch"),showSort:this.getOptions("showSort"),idField:this.getOptions("idField"),getItemId:this.getOptions("getItemId"),filter:this.getFilter()}})),this.ui.table.$on("searchChange",(function(e){return t.onSearchChange(e.detail)})),this.ui.table.$on("sorterChange",(function(e){return t.onSorterChange(e.detail)})),this.ui.table.$on("filterChange",(function(e){return t.onFilterChange(e.detail)})),this.ui.table.$on("goToPage",(function(e){return t.goToPage(e.detail)})),this.ui.table.$on("goToNextPage",(function(){return t.goToNext()})),this.ui.table.$on("goToPrevPage",(function(){return t.goToPrev()}))}getActions(){return this.getOptions("actions",[])}getLinks(){return this.getOptions("links",[])}getHelpers(){return this.options.helpers||{}}setWorking(t,e){var i=this;return this.stores.working.update((function(r){return br.set(t,r,i.getHelpers(),e),r})),this}getWorking(t,e){let i=br.get(t,this.working,this.getHelpers());return void 0===i?e:i}setState(t,e){var i=this;return this.stores.state.update((function(r){return br.set(t,r,i.getHelpers(),e),r})),this}getState(t,e){let i=br.get(t,this.state,this.getHelpers());return void 0===i?e:i}setOptions(t,e){return br.set(t,this.options,this.getHelpers(),e),this}getOptions(t,e){let i=br.get(t,this.options,this.getHelpers());return void 0===i?e:i}setFilter(t,e=!1){return this.setState("filter",t),e||(this.invalidateData(),this.updateData()),this}resetFilter(){return this.setState("filter",{}),this}getFilter(){return this.getState("filter")}setPager(t,e=!1){return this.setState("pager",t),e||this.updateData(),this}getDefaultPageNumber(){return isNaN(this.getOptions("pager.page"))?0:this.getOptions("pager.page")}getDefaultPageSize(){return isNaN(this.getOptions("pager.size"))?20:this.getOptions("pager.size")}resetPager(){this.setState("pager",{size:this.getDefaultPageSize(),page:this.getDefaultPageNumber()})}getPager(){return this.getState("pager")}setSorter(t,e=!1){return this.setWorking("sorter",t),e||(this.invalidateData(),this.updateData()),this}resetSorter(t=!1){let e={_id:1};return this.setSorter(e,t)}getSorter(){return this.getWorking("sorter")}getSorterDirection(){try{let t=Object.keys(this.getSorter());return this.getSorter()[t[0]]}catch{return 1}}getSearch(){return void 0!==this.getWorking("search")&&null!==this.getWorking("search")?this.getWorking("search"):""}setSearch(t="",e=!1){return this.setWorking("search",t),e||(this.invalidateData(),this.updateData()),this}getReturn(){return this.getWorking("return")}setReturn(t=Dc){return this.setWorking("return",t),this}clearFilteredData(){this.stores.filtered.update((function(t){return t.splice(0,t.length),t}))}clearRawData(){this.stores.raw.update((function(t){return t.splice(0,t.length),t}))}clearRefinedData(){this.stores.refined.update((function(t){return t.splice(0,t.length),t}))}invalidateData(){this.clearFilteredData(),this.isLive()&&this.clearRawData(),this.resetPager()}isLive(){return this.getOptions("interface")&&this.getOptions("interface.factory")}setUpdating(){this.setState("updating",!0)}setUpdated(){this.setState("updating",!1)}ifUpdating(){return this.getState("updating")}getDataInterface(){let t=this.getOptions("interface.factory");return"function"==typeof t?t({}):t}getLoadDataActionName(){return this.getOptions("interface.listAction")?this.getOptions("interface.listAction"):"list"}setCombinedActionName(t=Wc){this.setWorking("interface.combinedAction",t)}getCombinedActionName(){return this.getWorking("interface.combinedAction")?this.getWorking("interface.combinedAction"):jc}getCountActionName(){return this.getOptions("interface.countAction")?this.getOptions("interface.countAction"):Wc}loadData(){let t,e=this.getDataInterface().setFilter(this.getFilter()).setSorter(this.getSorter()).setReturn(this.getReturn()).setSearch(this.getSearch()).setPager(this.getPager());return t=this.getOptions("interface.combined",Pc)?this.getCombinedActionName():this.getLoadDataActionName(),e["$"+t]()}goToNext(){let t=isNaN(this.getState("pager.page"))?this.getDefaultPageNumber():this.getState("pager.page")+1;this.setState("pager.page",Math.min(t,this.getState("pagination.pages.to"))),this.updateData()}goToPrev(){let t=isNaN(this.getState("pager.page"))?this.getDefaultPageNumber():this.getState("pager.page")-1;this.setState("pager.page",Math.max(t,this.getState("pagination.pages.from"))),this.updateData()}goToFirst(){this.setState("pager.page",this.getState("pagination.pages.from")),this.updateData()}goToLast(){this.setState("pager.page",this.getState("pagination.pages.to")),this.updateData()}goToPage(t){this.setState("pager.page",t),this.updateData()}testDataItem(t){var e=this.getSearch().toLowerCase();for(var i in t){if(t[i].toString().toLowerCase().indexOf(e)>-1)return!0}return!1}getRowsCount(){var t=this;return this.getDataInterface().setFilter(this.getFilter())["$"+this.getCountActionName()]().then((function(e){t.updatePagination(e.count)})).catch((function(e){t.error(e)}))}updatePagination(t){var e=this;this.log("update pagination",t),this.state.pagination.pages.list.splice(0,this.state.pagination.pages.list.length);let i=(this.getPager().page-0)*this.getPager().size+1,r=t%this.getPager().size?Math.floor(t/this.getPager().size)+1:Math.round(t/this.getPager().size),n=Math.max(0,this.getPager().page-6),s=Math.min(r-1,this.getPager().page+6),o=[],a=Math.min(i+this.getPager().size-1,t);for(let t=n;t<=s;t++)o.push({index:t,active:t===this.getPager().page});this.stores.state.update((function(l){return e.log("update pagination",l),l.pagination.items.count=t,l.pagination.items.from=i,l.pagination.items.to=a,l.pagination.pages.count=r,l.pagination.pages.from=n,l.pagination.pages.to=s,l.pagination.pages.current=e.getPager().page,l.pagination.pages.list.splice(0,l.pagination.pages.list.length,...o),l}))}updateData(){var t=this;if(this.isLive()){if(this.ifUpdating())return;this.getOptions("endless",!1)||this.clearRawData(),this.setUpdating(),this.getOptions("interface.combined",Pc)?this.loadData().then((function(e){let i=_r.objHas(e,"status")&&_r.objHas(e,"result");t.stores.filtered.update((function(r){return t.getOptions("endless",!1)||t.clearFilteredData(),i?r.push(...e.result.list):_r.objHas(e,"list")&&Array.isArray(e.list)?r.push(...e.list):Array.isArray(e)&&r.push(...e),r})),t.setWorking("lastCount",i?e.result.count:e.count)})).then((function(){t.updatePagination(t.getWorking("lastCount"))})).catch(this.error.bind(this)).then(this.setUpdated.bind(this)):this.loadData().then((function(e){t.stores.filtered.update((function(t){return t.push(...e),t}))})).then(this.getRowsCount.bind(this)).catch(this.error.bind(this)).then(this.setUpdated.bind(this))}else this.setUpdating(),this.processData(),this.setUpdated()}getData(){return this.data}processData(){var t=this;let e=this.getFilter();this.log(this.getData()),null!=e&&void 0!==e.filterSearch&&null!==e.filterSearch&&e.filterSearch.length>0?this.stores.filtered.update((function(e){return e.splice(0,e.length,...t.data.raw.filter(t.testDataItem.bind(t))),e})):this.stores.filtered.update((function(e){return e.splice(0,e.length,...t.data.raw),e}));let i=this.getSorter();null!=i&&this.stores.filtered.update((function(t){return t.sort((function(t,e){let r=br.get(i.sortByField,t,{}),n=br.get(i.sortByField,e,{});return isNaN(r)?void 0!==r&&void 0!==n&&r.localeCompare?r.localeCompare()*-i.sortDirection:0:(r<n?1:-1)*i.sortDirection})),t}))}error(){this.options.logger&&this.options.logger.error(...arguments)}log(){this.options.logger&&this.options.logger.log(...arguments)}checkFieldsNames(){const t=":"+this.getOptions("idField");this.getOptions("fields",[]).forEach((function(e){t===e.path&&(e.path=e.path+Uc)}))}readFieldValue(t,e,i){if(t.indexOf(Uc)>-1){const t=":"+this.getOptions("idField");return br.get(t,e,i)}return br.get(t,e,i)}refineFiltered(){var t=this;let e=[];this.checkFieldsNames(),this.data.filtered.forEach((function(i,r){let n={};t.getOptions("idField")&&(n[t.getOptions("idField")]=i[t.getOptions("idField")]),t.getOptions("fields",[]).forEach((function(e){let s=null,o=t.readFieldValue(e.path,i,t.getOptions("helpers"));if(_r.objHas(e,Bc)){try{s=e[Bc](o,i,r)}catch(e){t.error("Error while preprocessing cell value",o,i,r),t.error(e)}br.set(e.path,n,s)}else br.set(e.path,n,o)})),e.push(n)})),this.stores.refined.update((function(t){return t.splice(0,t.length,...e),t}))}$destroy(){for(let t in this.ui)this.ui[t].$destroy&&this.ui[t].$destroy(),delete this.ui[t]}}var qc=Se("<!> <!>",1),Hc=Se("<!> <!>",1);function Kc(t,e){Zt(e,!0);let i=x(!1),r=x(!1),n=Di(e,"container",19,(()=>({}))),s=Di(e,"loaderTitle",15,"Отправка данных на сервер"),o=Di(e,"loaderActive",15,!1),a=Di(e,"loaderSize",15,"container"),l=Di(e,"successTitle",15,"OK"),c=Di(e,"successMessage",15,""),u=Di(e,"errorTitle",15,"Error"),d=Di(e,"errorMessage",15,"");var h=Hc(),g=he(h);return Wr(g,{get loading(){return o()},set loading(t){o(t)},get title(){return s()},set title(t){s(t)},get size(){return a()},set size(t){a(t)}}),Uo(ge(g,2),Ri(n,{children:(t,e)=>{var n=qc(),s=he(n);qe(s,(()=>Gt(r)),(t=>{Cl(t,{get title(){return u()},set title(t){u(t)},get message(){return d()},set message(t){d(t)}})})),qe(ge(s,2),(()=>Gt(i)),(t=>{Ll(t,{get title(){return l()},set title(t){l(t)},get message(){return c()},set message(t){c(t)}})})),Le(t,n)},$$slots:{default:!0}})),Le(t,h),te({showSuccess:function(t,e){U(r,!1),U(i,!0),null!=e&&c(e),null!=t&&l(t)},showError:function(t,e){U(i,!1),U(r,!0),null!=e&&d(e),null!=t&&u(t)},setLoading:function(){o(!0),U(i,!1),U(r,!1)},resetLoading:function(){o(!1)},hideAll:function(){o(!1),U(i,!1),U(r,!1)}})}var Gc=new WeakMap,Jc=new WeakMap;class Yc extends Pl{constructor({target:t=null,name:e="Default",options:i={},working:r={},data:n={},ui:s=Kc}){super({working:{name:`${e}ActionUI`,...r},options:i,data:n}),Vi(this,Gc,null),Vi(this,Jc,null),t&&this.setOptions("target",t),qi(Gc,this,s),this.initUI()}initUI(){try{const t=this.getTargetEl();for(;t.children.length;)t.removeChild(t.firstChild);qi(Jc,this,new(zi(Gc,this))({target:t,props:this.getOptions()}))}catch(t){this.error(t)}}setLoading(){this.emit("loading"),zi(Jc,this).setLoading()}resetLoading(){this.emit("loaded"),zi(Jc,this).resetLoading()}destroy(){this.emit("destroy"),zi(Jc,this)&&(zi(Jc,this).$destroy&&zi(Jc,this).$destroy(),zi(Jc,this).destroy&&zi(Jc,this).destroy(),qi(Jc,this,null)),this.setOptions(null),this.setWorking(null),this.setData(null)}processResult(t){return t.status===bn?(this.setFormSuccess(),!0):(this.setFormErrors(t),!1)}setFormSuccess(){zi(Jc,this).showSuccess(),this.emit("success")}setFormErrors(t){const e={form:[],fields:{}};t.message&&e.form.push(t.message),t.errors&&Object.keys(t.errors).length>0&&(e.fields={...t.errors}),zi(Jc,this).showError(e),this.emit("error",e)}getTargetEl(){const t=this.getOptions("target",".container");if(t instanceof HTMLElement)return t;if("string"==typeof t)return document.querySelector(t);throw new Error("ActionUI parent element is not defined")}}let Qc=class{static addComponent(t,e){oo.add(t,e)}static addVariants(t,e){lo.add(t,e)}static addField(t,e){ao.add(t,e)}static actionFieldsInit(t,e,i){var r=this;Array.isArray(t)?t.forEach((function(t){r.actionFieldsInit(t,e,i)})):(_r.objHas(e,"fields")||(e.fields={}),_r.objHas(e.fields,t)||(e.fields[t]={}),null!=i&&void 0!==i[t]&&null!==i[t]&&(e.fields[t].value=i[t]))}};Ki(Qc,"validator",null);const Xc={label:"",placeholder:"",enabled:!0,visible:!0,required:!0,validated:!1,valid:!1,errors:!1};function Zc(t,e={},i,r){let n={...Xc};return r.contains(t)&&(n={...n,...r.get(t)}),e&&(n={...n,...e}),_r.objHas(n,"variantsSource")&&i.contains(n.variantsSource)?n.variants=i.get(n.variantsSource):n.variants&&0!==n.variants.length||(n.variants=[]),n}function tu(t,e,i){return t[e].formErrors=[...i],t[e].validated=!0,t[e].inputStarted=!0,t[e].valid=!1,t[e].formLevelError=!0,t}function eu(t,e){return t[e].formErrors=!1,t[e].validated=!0,t[e].valid=!0,t[e].formLevelError=!1,t}function iu(t,e){return _r.objHas(t,e)&&t[e].enabled&&t[e].visible&&void 0!==t[e].value}var ru,nu,su,ou,au,lu,cu,uu,du,hu,gu,fu,pu,vu,mu,bu,yu,Ou,$u,wu,ku={fieldInit:Zc,initFormByField:function t(e={},i=[],r,n,s,o){if(Array.isArray(i))i.forEach((function(i){return t(e,i,r,n,s,o)}));else{let t={};s&&_r.objHas(s,"mutations")&&_r.objHas(s.mutations,i)&&(t=s.mutations[i]),o&&_r.objHas(o,i)&&(t.value=o[i]),e[i]=Zc(i,t,r,n),s&&s.readonly&&(e[i].readonly=!0)}return e},setFieldInvalid:function(t,e,i,r){return t[e].errors=[...r],t[e].validated=!0,t[e].valid=!1,t[e].value=i,t},setFieldValid:function(t,e,i){t[e].errors=!1,t[e].validated=!0,t[e].valid=!0,t[e].value=i;for(let i in t)if(i!==e&&(Array.isArray(t[i].errors)&&0===t[i].errors.length&&(t[i].errors=!1),!1!==t[i].errors))break;return t},isFieldValid:function(t,e){return!Array.isArray(t[e].errors)},setFormFieldInvalid:tu,setFormFieldValid:eu,updateFormValidationStatus:function({form:t,formErrors:e,validationStatus:i}){if(Array.isArray(i.form)&&i.form.length?e.splice(0,e.length,...i.form):e.splice(0,e.length),i.fields)for(let e in i.fields)Array.isArray(i.fields[e])&&i.fields[e].length?tu(t,e,i.fields[e]):eu(t,e)},fieldIsVisibleAndFilled:iu,setFieldsVisibility:function(t,e,i){return!!Array.isArray(e)&&(Object.keys(t).forEach((function(r){t[r].visible=e.includes(r)?i:!i})),!0)},setFieldValue:function(t,e,i){return!!_r.objHas(t,e)&&(t[e].value=i,!0)},collectData:function(t,e){let i={};return t.flat().forEach((function(t){iu(e,t)&&(i[t]=e[t].value)})),i}};function _u(){if(nu)return ru;nu=1;const t=t=>Object.keys(t).reduce(((t,e)=>(t[e]=[],t)),{}),e=["fields","form"];return ru=class{#t=!0;#e;constructor(t){this.#e=JSON.parse(JSON.stringify(t)),Object.keys(this.#e).forEach((t=>{e.includes(t)||delete this.#e[t]})),this.#t=0===this.#e.form.errors.length;const i=this.#i();for(let t of i)this.isFieldDirty(t)&&(this.#t=!1)}destroy(){this.#e=void 0}get clean(){return this.#t}static getDefaultResult(e){return{fields:t(e),form:{fields:t(e),errors:[],exceptions:[]}}}getReport(){return JSON.parse(JSON.stringify(this.#r()))}getDetailedReport(){return"object"==typeof this.#e?JSON.parse(JSON.stringify(this.#e)):void 0}isFieldDirty(t){return!(!Array.isArray(this.#e.fields[t])||!this.#e.fields[t].length)||!(!Array.isArray(this.#e.form.fields[t])||!this.#e.form.fields[t].length)}getCompleteResultForField(t){const e=[];return Array.isArray(this.#e.fields[t])&&e.push(...this.#e.fields[t]),Array.isArray(this.#e.form.fields[t])&&e.push(...this.#e.form.fields[t]),e}#r(){const t={clean:this.#t,fields:{},form:[]},e=this.#i();for(let i of e){const e=this.getCompleteResultForField(i);e.length&&(t.fields[i]=e)}return t.form=[...this.#e.form.errors],0===t.form.length&&delete t.form,t}#i(){const t=Object.keys(this.#e.fields),e=Object.keys(this.#e.form.fields);return[...new Set([...e,...t])]}}}function Iu(){if(lu)return au;lu=1;const t=function(){if(ou)return su;ou=1;class t extends Error{constructor(t,e={},i=null){return super(t),this.options=e,this.adopt(i),this.fill(),this.getTime(),this}adopt(t){return t instanceof Error&&(this.parent=t),this}getStack(){return this.parent?this.parent.stack:this.stack}getDetails(){let t=this;return this.parent&&(t=this.parent),{columnNumber:t.columnNumber,fileName:t.fileName,lineNumber:t.lineNumber,name:t.name,message:t.message,stack:t.stack}}getTime(){let t=new Date;return this.env.date={timestamp:t.getTime(),offset:t.getTimezoneOffset()},this.env.date}filterEnv(t,e){let i={};for(let r of e)Object.prototype.hasOwnProperty.call(t,r)&&(i[r]=t[r]);return i}fill(){return this.env={browser:!1,node:!0,versions:Object.assign({},process.versions),vars:this.filterEnv(process.env,this.options.whitelist||["NODE_ENV"])},this}}return su=t}();return au=class extends t{constructor(t,e={},i=null,r={}){return super(t,{fields:e,params:r},i),this}setFieldsErrors(t){this.options.fields=t}getFieldsErrors(){return this.options.fields}}}function Au(){if(hu)return du;hu=1;const t=_u(),e=Iu(),i=uu?cu:(uu=1,cu=async(t,e)=>{if("function"==typeof t)return"AsyncFunction"===t.constructor.name?await t(...e):t(...e)});du=async(e,i)=>{const n=t.getDefaultResult(i);return await r({validators:e,data:i,result:n}),await l({validators:e,data:i,result:n}),new t(n)};const r=async({validators:t,data:e,result:i})=>{for(let r in e)await n(r,e[r],t,i)},n=async(t,e,i,r)=>{const n=s(t,i);return await o(t,e,n,r)},s=(t,e)=>e&&e.fields&&e.fields[t]?e.fields[t]:[],o=async(t,r,n,s)=>{for(let o of n)try{await i(o.validator,[r])||a(t,o.message,s)}catch(i){i instanceof e||!o.message?a(t,i.message,s):a(t,o.message,s)}},a=(t,e,i)=>{i.fields[t].includes(e)||i.fields[t].push(e)},l=async({validators:t,data:e,result:i})=>{const r=c(t);await u(e,r,i)},c=t=>t&&t.form?t.form:[],u=async(t,e,i)=>{for(let r of e)try{await r(t)}catch(t){if(!t||"function"!=typeof t.getFieldsErrors)throw t;{const e=t.getFieldsErrors();Array.isArray(e.form)&&d(e.form,i),e.fields&&g(e.fields,i)}}},d=(t,e)=>{t.forEach((t=>{h(t,e)}))},h=(t,e)=>{e.form.errors.includes(t)||e.form.errors.push(t)},g=(t,e)=>{for(let i in t)f(i,t[i],e)},f=(t,e,i)=>{e.forEach((e=>{p(t,e,i)}))},p=(t,e,i)=>{Array.isArray(i.form.fields[t])||(i.form.fields[t]=[]),i.form.fields[t].includes(e)||i.form.fields[t].push(e)};return du}function Su(){if(vu)return pu;vu=1;const{composeFieldsValidators:t,composeFormValidators:e}=fu?gu:(fu=1,gu={composeFieldsValidators:(t,e)=>{if(e&&e.fields){const i=Object.keys(t),r={};return i.forEach((t=>{Array.isArray(e.fields[t])&&(r[t]=e.fields[t])})),r}return{}},composeFormValidators:(t,e)=>e?e.forms&&Array.isArray(e.forms[t])?e.forms[t]:Array.isArray(e.form)?e.form:[]:[]}),i=Au();return pu=r=>(n,s)=>{const o={fields:t(n,r),form:e(s,r)};return i(o,n)}}function Cu(){if(Ou)return yu;Ou=1;const t=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),{augmentFieldsValidators:e,augmentFormValidators:i}=function(){if(bu)return mu;bu=1;const t=(t,e)=>{if(t.validator&&"function"==typeof t.validator){const i=t.validator,r={...t};return delete r.validator,r.validator=t=>i(t,e()),r}return t},e=(t,e)=>i=>t(i,e());return mu={augmentFieldsValidators:(e,i)=>e.map((e=>t(e,i))),augmentFieldValidator:t,augmentFormValidators:(t,i)=>t.map((t=>e(t,i))),augmentFormValidator:e}}();yu=(e,s)=>{if(null==e)return{fields:{},forms:{}};const o={};return t(e,"fields")&&(o.fields=r(e.fields,s)),t(e,"forms")?o.forms=n(e.forms,s):t(e,"form")&&(o.form=i(e.form,s)),o};const r=(t,i)=>{const r={};for(let n in t)Array.isArray(t[n])&&(r[n]=e(t[n],i));return r},n=(t,e)=>{const r={};for(let n in t)Array.isArray(t[n])&&(r[n]=i(t[n],e));return r};return yu}var Eu=function(){if(wu)return $u;wu=1;const t=Au(),e=Su(),i=Cu(),r=_u();return $u={name:"not-validation",Session:t,Runner:e,Builder:i,Result:r}}(),Lu=Se('<div><div class="field-label is-normal"><!></div> <div class="field-body"></div></div>'),Tu=Se("<!> <!>",1),xu=Se("<div></div>");function Nu(t,e){Zt(e,!0);let i=Si(),r=Di(e,"label",3,""),n=Di(e,"name",3,"generic field"),s=Di(e,"readonly",3,!1),o=Di(e,"horizontal",3,!1),a=Di(e,"controls",19,(()=>[])),l=Di(e,"classes",3,""),c=Di(e,"addons",3,!1),u=Di(e,"addonsCentered",3,!1),d=Di(e,"addonsRight",3,!1),h=Di(e,"grouped",3,!1),g=Di(e,"groupedMultiline",3,!1),f=Di(e,"groupedRight",3,!1),p=Di(e,"groupedCentered",3,!1),v=x(""),m=x(!1),b=x(void 0);function y(t){let e=t.detail;i("change",e)}Ai((()=>{U(v,Gt(v)+" "+l()),U(v,Gt(v)+(c()?" has-addons ":"")),U(v,Gt(v)+(u()?" has-addons-centered ":"")),U(v,Gt(v)+(d()?" has-addons-right ":"")),U(v,Gt(v)+(h()?" is-grouped ":"")),U(v,Gt(v)+(g()?" is-grouped-multiline ":"")),U(v,Gt(v)+(f()?" is-grouped-right ":"")),U(v,Gt(v)+(p()?" is-grouped-centered ":"")),s()&&a().forEach((t=>{t.readonly=!0}));let t=a().filter((t=>"UIHidden"!==t.component));U(m,0===t.length);let e=a().map((t=>t.component)).join("_");U(b,`form-field-${e}-${n()}`)}));var O=Ee();qe(he(O),(()=>Gt(m)),(t=>{var e=Ee();Je(he(e),17,a,Ge,((t,e)=>{var i=Ee();const r=j((()=>oo.get(Gt(e).component)));ri(he(i),(()=>Gt(r)),((t,i)=>{i(t,Ri((()=>Gt(e)),{get fieldname(){return n()},$$events:{change:y}}))})),Le(t,i)})),Le(t,e)}),(t=>{var e=Ee();qe(he(e),o,(t=>{var e=Lu(),i=de(e),s=de(i),o=j((()=>r()||a()[0].label));ro(s,{get id(){return Gt(b)},get label(){return Gt(o)}});var l=ge(i,2);Je(l,21,a,Ge,((t,e)=>{var i=Ee();const r=j((()=>oo.get(Gt(e).component)));ri(he(i),(()=>Gt(r)),((t,i)=>{i(t,Ri((()=>Gt(e)),{get fieldname(){return n()},$$events:{change:y}}))})),Le(t,i)})),tt((()=>{ai(e,`field is-horizontal ${Gt(v)??""} ${Gt(b)??""}`),ni(l,"id",Gt(b))})),Le(t,e)}),(t=>{var e=xu();Je(e,21,a,Ge,((t,e)=>{var i=Tu();const r=j((()=>oo.get(Gt(e).component)));var s=he(i);ro(s,{get id(){return`form-field-${Gt(e).component??""}-${n()??""}`},get label(){return Gt(e).label}}),ri(ge(s,2),(()=>Gt(r)),((t,i)=>{i(t,Ri((()=>Gt(e)),{get fieldname(){return n()},$$events:{change:y}}))})),Le(t,i)})),tt((()=>ai(e,`field ${Gt(v)??""} ${Gt(b)??""}`))),Le(t,e)}),!0),Le(t,e)})),Le(t,O),te()}function Fu(t,e,i){return t&&t.preventDefault(),e("submit",i()),!1}function Mu(t,e){e("reject")}var Ru=Se('<div><span class="title"> </span></div>'),Uu=Se('<div class="notification is-success"><h3 class="form-success-message"> </h3></div>'),Du=Se('<h5 class="title is-5"> </h5>'),Pu=Se('<h6 class="subtitle is-6"> </h6>'),ju=Se("<button> </button>"),Wu=Se("<button> </button>"),Bu=Se('<div class="edit-form-error notification is-danger"> </div>'),zu=Se('<div class="buttons is-grouped is-centered"><!> <!></div> <!>',1),Vu=Se("<div><!></div>"),qu=Se('<div class="column notification is-danger"> </div>'),Hu=Se('<div class="columns"></div>'),Ku=Se('<div class="notification is-danger"> </div>'),Gu=Se("<span> </span>"),Ju=Se('<div class="edit-form-error notification is-danger"></div>'),Yu=Se("<button> </button>"),Qu=Se("<button> </button>"),Xu=Se('<!> <div class="buttons is-grouped is-centered"><!> <!></div>',1),Zu=Se("<!> <!> <!> <!> <!>",1),td=Se('<div class="form-container"><!> <!></div>');function ed(t,e){Zt(e,!0);const i=xi(),r=()=>Ti(sr,"$LOCALE",i);let n=Si(),s=x(re([])),o=x(!1),a=x(!1),l=x(!1),c=Di(e,"form",31,(()=>re({}))),u=Di(e,"loading",15,!1),d=Di(e,"loader",3,"container"),h=Di(e,"fields",19,(()=>[])),g=Di(e,"SUCCESS_TEXT",3,"Операция завершена"),f=Di(e,"WAITING_TEXT",3,"Отправка данных на сервер"),p=Di(e,"title",3,""),v=Di(e,"description",3,""),m=Di(e,"buttonsFirst",3,!1),b=Di(e,"horizontal",3,!1),y=Di(e,"submit",19,(()=>({caption:"Отправить",enabled:!0}))),O=Di(e,"cancel",19,(()=>({caption:"Назад",enabled:!0}))),$=j((()=>Gt(o)||Gt(a)));function w(){return ku.collectData(h(),c())}function k(t,e){ku.setFieldsVisibility(c(),t,e)&&c(c())}function _(t){let e=t.detail;c(c()[e.field].value=e.value,!0),c(c()),n("change",e)}var I=td(),A=de(I);return qe(A,(()=>"hidden"!==d()),(t=>{var e=Ru(),i=de(e),n=de(i);tt((()=>{ai(e,`${("page"===d()?"pageloader":"containerloader")??""} ${(u()?"is-active":"")??""}`),je(n,r()[f()])})),Le(t,e)})),qe(ge(A,2),(()=>Gt(l)),(t=>{var e=Uu(),i=de(e),n=de(i);tt((()=>je(n,r()[g()]))),Le(t,e)}),(t=>{var e=Zu(),i=he(e);qe(i,p,(t=>{var e=Du(),i=de(e);tt((()=>je(i,r()[p()]))),Le(t,e)}));var o=ge(i,2);qe(o,v,(t=>{var e=Pu(),i=de(e);tt((()=>je(i,r()[v()]))),Le(t,e)}));var a=ge(o,2);qe(a,m,(t=>{var e=zu(),i=he(e),o=de(i);qe(o,(()=>O().enabled),(t=>{var e=ju();e.__click=[Mu,n];var i=de(e);tt((()=>{ai(e,`button is-outlined ${O().classes??""}`),je(i,r()[O().caption])})),Le(t,e)})),qe(ge(o,2),(()=>y().enabled),(t=>{var e=Wu();e.__click=[Fu,n,w];var i=de(e);tt((()=>{e.disabled=Gt($),ai(e,`button is-primary is-hovered ${y().classes??""}`),je(i,r()[y().caption])})),Le(t,e)})),qe(ge(i,2),(()=>Gt(s).length>0),(t=>{var e=Bu(),i=de(e);tt((()=>je(i,Gt(s).join(", ")))),Le(t,e)})),Le(t,e)}));var l=ge(a,2);Je(l,17,h,Ge,((t,e)=>{var i=Ee();qe(he(i),(()=>Array.isArray(Gt(e))),(t=>{var i=Hu();Je(i,21,(()=>Gt(e)),Ge,((t,e)=>{var i=Ee();qe(he(i),(()=>c()[Gt(e)]&&c()[Gt(e)].component),(t=>{var i=Ee();qe(he(i),(()=>c()[Gt(e)].visible),(t=>{var i=Vu(),r=de(i),n=j((()=>[c()[Gt(e)]]));Nu(r,{get controls(){return Gt(n)},get name(){return Gt(e)},get horizontal(){return b()},get label(){return c()[Gt(e)].label},$$events:{change:_}}),tt((()=>ai(i,`column ${(c()[Gt(e)].fieldSize?"is-"+c()[Gt(e)].fieldSize:"")??""} `))),Le(t,i)})),Le(t,i)}),(t=>{var i=qu(),r=de(i);tt((()=>je(r,`Subfield '${Gt(e)??""}' is not registered`))),Le(t,i)})),Le(t,i)})),Le(t,i)}),(t=>{var i=Ee();qe(he(i),(()=>c()[Gt(e)]&&c()[Gt(e)].component),(t=>{var i=Ee();qe(he(i),(()=>c()[Gt(e)].visible),(t=>{var i=j((()=>[c()[Gt(e)]]));Nu(t,{get controls(){return Gt(i)},get name(){return Gt(e)},get horizontal(){return b()},get label(){return c()[Gt(e)].label},$$events:{change:_}})})),Le(t,i)}),(t=>{var i=Ku(),r=de(i);tt((()=>je(r,`Field '${Gt(e)??""}' is not registered`))),Le(t,i)}),!0),Le(t,i)})),Le(t,i)})),qe(ge(l,2),(()=>!m()),(t=>{var e=Xu(),i=he(e);qe(i,(()=>Gt(s).length>0),(t=>{var e=Ju();Je(e,21,(()=>Gt(s)),Ge,((t,e)=>{var i=Gu(),n=de(i);tt((()=>je(n,r()[Gt(e)]))),Le(t,i)})),Le(t,e)}));var o=de(ge(i,2));qe(o,(()=>O().enabled),(t=>{var e=Yu();e.__click=[Mu,n];var i=de(e);tt((()=>{ai(e,`button ${(O().classes?O().classes:"")??""}`),je(i,r()[O().caption])})),Le(t,e)})),qe(ge(o,2),(()=>y().enabled),(t=>{var e=Qu();e.__click=[Fu,n,w];var i=de(e);tt((()=>{e.disabled=Gt($),ai(e,`button is-primary is-hovered ${(y().classes?y().classes:"")??""}`),je(i,r()[y().caption])})),Le(t,e)})),Le(t,e)})),Le(t,e)})),Le(t,I),te({collectData:w,setFieldInvalid:function(t,e,i){c(ku.setFieldInvalid(c(),t,e,i)),U(a,!0)},setFieldValid:function(t,e){c(ku.setFieldValid(c(),t,e))},isFieldValid:function(t){return ku.isFieldValid(c(),t)},setFormFieldInvalid:function(t,e){c(ku.setFormFieldInvalid(c(),t,e)),n("field.invalid",{fieldName:t})},setFormFieldValid:function(t){c(ku.setFormFieldValid(c(),t)),n("field.valid",{fieldName:t})},updateFormValidationStatus:function(t){if(U(o,!1),U(a,!1),Array.isArray(t.form)&&t.form.length?(Gt(s).splice(0,Gt(s).length,...t.form),U(o,!0)):Gt(s).splice(0,Gt(s).length),U(s,re(Gt(s))),t.fields)for(let e of Object.keys(c()))Array.isArray(t.fields[e])&&t.fields[e].length?(ku.setFormFieldInvalid(c(),e,t.fields[e]),U(a,!0)):ku.setFormFieldValid(c(),e)},showSuccess:function(){U(l,!0)},setLoading:function(){u(!0)},resetLoading:function(){u(!1)},setFieldsVisibility:k,setVisibleFields:function(t){k(t,!0)},setInvisibleFields:function(t){k(t,!1)},setFieldValue:function(t,e){ku.setFieldValue(c(),t,e)&&_({detail:{field:t,value:e}})},updateField:function(t,e){c(c()[t]={...c()[t],...e},!0),c(c())}})}ke(["click"]);const id={notReadonly:t=>({readonly:!t}),readonly:t=>({readonly:t}),enable:t=>({disabled:!t}),disable:t=>({disabled:t})};class rd{static add(t,e){_r.objHas(Wi(rd,this,nd)._,t)||(Wi(rd,this,nd)._[t]=e)}static remove(t){_r.objHas(Wi(rd,this,nd)._,t)&&!Object.keys(id).includes(t)&&delete Wi(rd,this,nd)._[t]}static exec(t,e,i,r,n){return Wi(rd,this,nd)._[t](r,e,i,n)}}var nd={_:{...id}};var sd=new WeakMap,od=new WeakMap,ad=new WeakMap,ld=new WeakMap,cd=new WeakMap,ud=new WeakMap,dd=new WeakSet;class hd extends Pl{constructor({target:t=null,name:e="Default",options:i={},working:r={},data:n={},ui:s=ed}){super({working:{name:`${e}Form`,...r},options:i,data:n}),Hi(this,dd),Vi(this,sd,null),Vi(this,od,null),Vi(this,ad,null),Vi(this,ld,"default"),Vi(this,cd,new so),Vi(this,ud,null),qi(ud,this,new so(lo.getContent())),t&&this.setOptions("target",t),qi(sd,this,s),_r.objHas(i,"action")&&qi(ld,this,i.action),this.initForm()}initForm(){this.getOptions("autoInit",!0)&&this.initLibs(),this.getOptions("autoRender",!0)&&this.initUI()}initLibs(){this.initFields(),this.initVariants(),this.initValidator()}reInit(){this.initLibs(),this.updateUI(),this.resetLoading()}initFields(){const t=this.getFormManifest();_r.objHas(t,"fields")&&zi(cd,this).isEmpty()&&zi(cd,this).import(t.fields)}initVariants(){this.getOptions("variants")&&zi(ud,this).import(this.getOptions("variants"))}initValidator(){qi(od,this,Eu.Runner(this.getFormValidators()))}initUI(){try{const t=Wi(dd,this,md).call(this,{manifest:this.getFormManifest(),formOptions:this.getFormOptions(),data:this.getFormData(),injectedProps:this.getFormInjectedProps()}),e=this.getFormTargetEl();for(;e.children.length;)e.removeChild(e.firstChild);qi(ad,this,new(zi(sd,this))({target:e,props:t})),Wi(dd,this,gd).call(this),this.validateForm()}catch(t){this.error(t)}}updateUI(){try{const t=Wi(dd,this,md).call(this,{manifest:this.getFormManifest(),formOptions:this.getFormOptions(),data:this.getFormData(),injectedProps:this.getFormInjectedProps()});zi(ad,this).$set(t),this.validateForm()}catch(t){this.error(t)}}async validateForm(){if(!this.getOptions("readonly",!1))try{const t=await zi(od,this).call(this,zi(ad,this).collectData(),this.getFormAction());zi(ad,this).updateFormValidationStatus(t.getReport()),t.clean||this.emit("error",t.getReport())}catch(t){const e={form:[Gi.ERROR_DEFAULT,t.message]};zi(ad,this)&&zi(ad,this).updateFormValidationStatus(e),this.emit("error",e),_r.report(t)}}submit(t){this.emit("submit",t)}reject(){this.emit("reject")}$on(){zi(ad,this)&&zi(ad,this).$on(...arguments)}setLoading(){this.emit("loading"),zi(ad,this).setLoading()}resetLoading(){this.emit("loaded"),zi(ad,this).resetLoading()}destroy(){this.emit("destroy"),zi(ad,this)&&(zi(ad,this).$destroy&&zi(ad,this).$destroy(),zi(ad,this).destroy&&zi(ad,this).destroy(),qi(ad,this,null)),qi(od,this,null),qi(ld,this,null),qi(cd,this,null),qi(ud,this,null),this.setOptions(null),this.setWorking(null),this.setData(null)}getName(){return this.getWorking("name")}getFormAction(){return zi(ld,this)}setFormAction(t){t&&t!==zi(ld,this)&&(qi(ld,this,t),zi(ad,this)&&zi(ad,this).$destroy(),this.initForm())}processResult(t){return t.status===bn?(this.setFormSuccess(),!0):(this.setFormErrors(t),!1)}setFormSuccess(){zi(ad,this).showSuccess(),this.emit("success")}setFormErrors(t){if(this.getOptions("readonly",!1))return;const e={form:[],fields:{}};t.message&&e.form.push(t.message),t.errors&&Object.keys(t.errors).length>0&&(e.fields={...t.errors}),zi(ad,this).updateFormValidationStatus(e),this.emit("error",e)}getVariant(t,e){let i=zi(ud,this).get(t).find((function(t){return t.id===e}));return i||null}getFormTargetEl(){const t=this.getOptions("target",".form");if(t instanceof HTMLElement)return t;if("string"==typeof t)return document.querySelector(t);throw new Error("Form parent element is not defined")}getFormValidators(){return this.getOptions("validators")?this.getOptions("validators",{}):(Wi(dd,this,bd).call(this,"validators"),{})}getFormManifest(){const t=this.getModelName();return t&&_r.getApp()?_r.getApp().getInterfaceManifest(t):this.getOptions("manifest",void 0)?this.getOptions("manifest",{}):(Wi(dd,this,bd).call(this,"manifest"),{})}getFormData(){return this.getData()?this.getData():(Wi(dd,this,bd).call(this,"data"),{})}getFormOptions(){return this.getOptions("ui",void 0)||this.getOptions("fields",void 0)?{ui:this.getOptions("ui",{}),fields:this.getOptions("fields",{})}:(Wi(dd,this,bd).call(this,"options"),{ui:{},fields:{}})}getFormInjectedProps(){return this.getOptions("injected",{})}collectData(){if(this.getOptions("readonly",!1))return this.getData();const t=zi(ad,this).collectData();return this.setData({...t}),t}updateField(t,e){zi(ad,this).updateField(t,e)}getModel(t,e){return"string"==typeof t?this.getInterface(t)(e||{}):this.getInterface()(t||{})}getInterface(t=!1){return _r.getApp().getInterface(t||this.getModelName())}getModelName(){return this.getOptions("model")}}function gd(){var t=this;zi(ad,this).$on("change",(function(){return t.validateForm()})),zi(ad,this).$on("change",(function(e){t.emit("change",e.detail),t.emit(`change.${e.detail.field}`,e.detail.value)})),zi(ad,this).$on("submit",(function(e){return t.submit(e.detail)})),zi(ad,this).$on("reject",(function(){return t.reject()})),zi(ad,this).$on("error",(function({detail:e}){return t.emit("error",e)})),Wi(dd,this,fd).call(this)}function fd(){const t=this.getOptions("masters",!1);if(t)for(let e in t){const i=t[e];for(let t in i){const r=i[t];Wi(dd,this,pd).call(this,t,e,r)}}}function pd(t,e,i=[]){var r=this;this.on(`change.${e}`,(function(n){Wi(dd,r,vd).call(r,t,e,i,n)})),this.emit(`change.${e}`,this.getFormData()[e])}function vd(t,e,i,r){var n=this;const s=rd.exec(t,e,i,r,this);i.forEach((function(t){n.updateField(t,s)}))}function md({manifest:t,formOptions:e={ui:{},fields:{}},data:i=null,injectedProps:r={}}){const n=zi(ld,this);null==e&&(e={ui:{},fields:{}});const s=ku.initFormByField({},t.actions[n].fields,zi(ud,this),zi(cd,this),e.fields,i);return{loading:!this.getOptions("autoInit",!0),title:t.actions[n].title,description:t.actions[n].description,fields:t.actions[n].fields,form:s,...e.ui,...r}}function bd(t){this.error(`${t} for ${this.getWorking("name")} form is not defined`)}var yd=Se('<div class="block-container"><div class="form-paper"></div> <!></div>');function Od(t,e){Zt(e,!0);let i=Si(),r=Di(e,"name",3,"default-form"),n=Di(e,"showModes",3,!1),s=Di(e,"mode",15,"default"),o=Di(e,"forms",19,(()=>[]));let a=x(re([]));function l(){U(a,re(o().filter((t=>s()!==t.mode)).map((t=>({title:t.title,outlined:!0,type:"link",action(){var e;e=t.mode,s(e),i("mode",e),l()}})))))}Ai((()=>{l()}));var c=yd(),u=de(c);qe(ge(u,2),n,(t=>{dn(t,{centered:!0,get values(){return Gt(a)},set values(t){U(a,re(t))},classes:"mt-4"})})),tt((()=>{ni(c,"id",`${r()??""}-form-set`),ni(u,"id",`${r()??""}-form-set-container`)})),Le(t,c),te()}const $d="form-set";var wd=new WeakMap,kd=new WeakMap,_d=new WeakMap,Id=new WeakMap,Ad=new WeakSet;function Sd(){return{showModes:this.getOptions("showModes",!0),mode:this.getFormMode(),forms:this.getOptions("forms",[]),name:this.getOptions("name",$d)}}function Cd(t,e){return"function"!=typeof e()||(t.preventDefault(),e()(t.currentTarget.dataset.href),!1)}var Ed,Ld=Se('<li class="is-active"><a aria-current="page"> </a></li>'),Td=Se('<li class="is-plain-crumb"> </li>'),xd=Se("<li><a> </a></li>"),Nd=Se('<nav class="breadcrumb" aria-label="breadcrumbs"><ul></ul></nav>');ke(["click"]);class Fd{static render({target:t,root:e="",navigate:i}){this.remove(),Fd.UIConstructor&&(this.ui=new Fd.UIConstructor({target:t,props:{items:this.getBreadcrumbs(),root:e,go:i}}))}static setHead(t){return this.head.splice(0,this.head.length,...t),this}static setTail(t){return this.tail.splice(0,this.tail.length,...t),this}static getBreadcrumbs(){let t=[];return t.push(...this.head),t.push(...this.tail),t}static update(){this.ui&&this.ui.$set({items:this.getBreadcrumbs()})}static remove(){return this.ui&&(this.ui.$destroy(),this.ui=null),this}}Ki(Fd,"UIConstructor",null),Ki(Fd,"ui",null),Ki(Fd,"head",[]),Ki(Fd,"tail",[]),Fd.UIConstructor=function(t,e){Zt(e,!0);const i=xi(),r=()=>Ti(sr,"$LOCALE",i);let n=Di(e,"root",3,""),s=Di(e,"items",19,(()=>[])),o=Di(e,"go",3,null);var a=Nd();Je(de(a),21,s,Ge,((t,e,i)=>{var a=Ee();qe(he(a),(()=>s().length===i+1),(t=>{var i=Ld(),s=de(i),o=de(s);tt((()=>{ni(s,"href",`${n()??""}${Gt(e).url??""}`),ni(s,"data-href",Gt(e).url),je(o,r()[Gt(e).title])})),Le(t,i)}),(t=>{var i=Ee();qe(he(i),(()=>!1===Gt(e).url),(t=>{var i=Td(),n=de(i);tt((()=>je(n,r()[Gt(e).title]))),Le(t,i)}),(t=>{var i=xd(),s=de(i);s.__click=[Cd,o];var a=de(s);tt((()=>{ni(s,"href",`${n()??""}${Gt(e).url??""}`),ni(s,"data-href",Gt(e).url),je(a,r()[Gt(e).title])})),Le(t,i)})),Le(t,i)})),Le(t,a)})),Le(t,a),te()};class Md{static hide(){}static setApp(t){return this.app||(this.app=t),this}static setOptions(t){return this.options={...this.options,...t},this}static getOptionsPathTo(t){return`menu.${this.options.type}.${t}`}static isDirectNavigation(){return this.app?this.app.getOptions(this.getOptionsPathTo("directNavigation"),this.options.directNavigation):this.options.directNavigation}static getOptions(){return this.app?{brand:this.app.getOptions("brand",this.options.brand),items:this.app.getOptions(this.getOptionsPathTo("items"),this.options.items),sections:this.app.getOptions(this.getOptionsPathTo("sections"),this.options.sections),targetSelector:this.app.getOptions(this.getOptionsPathTo("targetSelector"),this.options.targetSelector),toggleSelector:this.app.getOptions(this.getOptionsPathTo("toggleSelector"),this.options.toggleSelector),open:this.app.getOptions(this.getOptionsPathTo("open"),this.options.open),directNavigation:this.app.getOptions(this.getOptionsPathTo("directNavigation"),this.options.directNavigation),root:this.app.getOptions("router.root",this.options.root),navigate:this.options.navigate.bind(this),getComponent:this.getComponent.bind(this)}:this.options}static getComponent(t){return!!oo.contains(t)&&oo.get(t)}static initField(t,e=[]){var i=this;t.forEach((function(t){e.forEach((function(e){Object.hasOwn(t,e)||(t[e]=i.DEFAULT[e])})),Object.hasOwn(t,"items")&&i.initField(t.items,e)}))}static sortList(t){var e=this;t.sort((function(t,i){return Object.hasOwn(t,"items")&&e.sortList(t.items),Object.hasOwn(i,"items")&&e.sortList(i.items),t.priority===i.priority?t.title>i.title?1:-1:t.priority<i.priority?1:-1}))}static removeDublicates(t){for(let e=0;e<t.length;e++){let i=t[e].priority;t.filter((function(i){return i.id===t[e].id})).forEach((function(e,r){0!==r&&(e.priority<i&&(i=e.priority),t.splice(t.indexOf(e),1))})),t[e].priority=i}return t}static prepareData(){let t=[];t.push(...this.getOptions().items);let e=[];e.push(...this.getOptions().sections),this.initField(e,["priority"]),this.removeDublicates(e),this.initField(t,["priority","section","type"]),this.sortList(e),e.push({id:this.DEFAULT.section,title:this.DEFAULT.sectionTitle}),this.sortList(t),this.sections=e,this.items=t}static remove(){this.menu&&(this.menu.$destroy(),this.menu=null,clearInterval(this.interval))}static updateIndicator(t,e,i){this.updateSection(t,(function(t){t.indicator.state=i})),this.updateItem(e,(function(t){t.indicator.state=i}))}static updateTag(t,e,i){this.updateSection(t,(function(t){t.tag=i})),this.updateItem(e,(function(t){t.tag=i}))}static updateSectionTag(t,e){this.updateSection(t,(function(t){t.tag={...t.tag,...e}}))}static updateItemTag(t,e){this.updateItem(t,(function(t){t.tag={...t.tag,...e}}))}static updateSection(t,e){if(this.sections&&t){for(let i in this.sections)this.sections[i].id===t&&e(this.sections[i]);this.menu&&this.menu.$set({sections:this.sections})}}static updateSectionItems(t,e){if(this.sections&&t){let i=this.items.filter((function(e){return e.section===t}));for(let t of i)this.items.splice(this.items.indexOf(t),1);this.items.push(...e(i)),this.menu&&this.menu.$set({items:this.items})}}static updateItem(t,e){t&&this.items&&(this.items.forEach((function(i){i.id===t&&e(i)})),this.menu&&this.menu.$set({items:this.items}))}static isTouch(){return Gi.isMobile(!0)}static getSectionComponent(){}}function Rd(t,e){return t.preventDefault(),e("navigate",{full:t.target.getAttribute("href"),short:t.target.dataset.href}),!1}Ed=Md,Ki(Md,"MAX_TOUCH_WIDTH",1023),Ki(Md,"DEFAULT",{section:"any",sectionTitle:"Меню",priority:0,type:"link",open:!1}),Ki(Md,"app",null),Ki(Md,"directNavigation",!1),Ki(Md,"menu",void 0),Ki(Md,"options",{directNavigation:!1,navigate:function(t){if(Ed.hide(),!Ed.isDirectNavigation()&&Ed.app){let e=Ed.app.getWorking("router");if(e)return e.navigate(t.short)}document.location.assign(t.full)}}),Ki(Md,"items",[]),Ki(Md,"sections",[]),Ki(Md,"location",void 0),Ki(Md,"interval",void 0);var Ud=Se("<li><a> <!> <!></a></li>"),Dd=Se("<li> <!> <!></li>");function Pd(t,e,i){return t&&t.preventDefault()&&t.stopPropagation(),e(!e()),i("toggle",{closed:e()}),!1}ke(["click"]);var jd=Se('<span class="icon is-small is-toggle-submenu is-pulled-right" role="button" tabindex="0"><i aria-hidden="true"></i></span>');function Wd(t,e){Zt(e,!0);const i=Si(),r="fa-angle-down",n="fa-angle-up";let s=Di(e,"icon_opened",19,(()=>r)),o=Di(e,"icon_closed",19,(()=>n)),a=Di(e,"closed",15,!1);var l=jd();l.__click=[Pd,a,i],l.__keyup=[Pd,a,i];var c=de(l);tt((()=>ai(c,`fas ${(a()?o():s())??""}`))),Le(t,l),te()}ke(["click","keyup"]);var Bd=Se('<span class="is-no-link"> </span>'),zd=Se("<!> <!> <!> <!>",1);function Vd(t,e){Zt(e,!0);const i=xi();let r=Di(e,"item",19,(()=>({})));var n=zd(),s=he(n);qe(s,(()=>r().icon),(t=>{tl(t,Ri((()=>r().icon)))}),(t=>{var e=Ee();qe(he(e),(()=>"component"===r().type&&r().component&&oo.contains(r().component)),(t=>{var e=Ee();const i=j((()=>oo.get(r().component)));ri(he(e),(()=>Gt(i)),((t,e)=>{e(t,Ri({get id(){return r().id}},(()=>r().props)))})),Le(t,e)}),(t=>{var e=Bd(),n=de(e);tt((()=>je(n,Ti(sr,"$LOCALE",i)[r().title]))),Le(t,e)}),!0),Le(t,e)}));var o=ge(s,2);qe(o,(()=>r().tag),(t=>{Er(t,Ri({get id(){return r().id}},(()=>r().tag)))}));var a=ge(o,2);qe(a,(()=>r().indicator),(t=>{Pr(t,Ri({get id(){return r().id}},(()=>r().indicator)))})),ii(ge(a,2),(()=>e.children??d)),Le(t,n),te()}function qd(t,e){return t.preventDefault(),e("navigate",{full:t.target.getAttribute("href"),short:t.target.dataset.href}),!1}var Hd=Se('<a class="has-subitems"><!></a>'),Kd=Se("<li><!> <!></li>"),Gd=Se("<ul></ul>");function Jd(t,e){Zt(e,!0);const i=Si();let r=re({}),n=Di(e,"root",3,""),s=Di(e,"items",19,(()=>[])),o=Di(e,"closed",3,!1);var a=Gd();Je(a,21,s,Ge,((t,s,o)=>{var a=Ee();qe(he(a),(()=>Gt(s).items&&Gt(s).items.length),(t=>{var a=Kd(),l=de(a);qe(l,(()=>void 0!==Gt(s).url&&!1!==Gt(s).url),(t=>{var e=Hd();e.__click=[qd,i],Vd(de(e),{get item(){return Gt(s)},children:(t,e)=>{Wd(t,{$$events:{toggle:({detail:t})=>{r[o]=t.closed}}})},$$slots:{default:!0}}),tt((()=>{ni(e,"href",`${n()??""}${Gt(s).url??""}`),ni(e,"data-href",Gt(s).url)})),Le(t,e)}),(t=>{Vd(t,{get item(){return Gt(s)},children:(t,e)=>{Wd(t,{$$events:{toggle:({detail:t})=>{r[o]=t.closed}}})},$$slots:{default:!0}})})),Jd(ge(l,2),{get root(){return n()},get items(){return Gt(s).items},get closed(){return r[o]},set closed(t){r[o]=t},$$events:{navigate(t){Ii.call(this,e,t)}}}),tt((()=>ai(a,`is-no-follow-subtitle ${Gt(s).classes??""}`))),Le(t,a)}),(t=>{!function(t,e){Zt(e,!0);const i=xi(),r=()=>Ti(sr,"$LOCALE",i),n=Si();let s=Di(e,"root",3,""),o=Di(e,"item",19,(()=>({})));var a=Ee();qe(he(a),(()=>void 0!==o().url&&!1!==o().url),(t=>{var e=Ud(),i=de(e);i.__click=[Rd,n];var a=de(i),l=ge(a);qe(l,(()=>o().tag),(t=>{Pr(t,Ri({get id(){return o().id}},(()=>o().tag)))})),qe(ge(l,2),(()=>o().indicator),(t=>{Pr(t,Ri({get id(){return o().id}},(()=>o().indicator)))})),tt((()=>{ai(e,o().classes),ni(i,"href",`${s()??""}${o().url??""}`),ni(i,"data-href",o().url),je(a,`${r()[o().title]??""} `)})),Le(t,e)}),(t=>{var e=Dd(),i=de(e),n=ge(i);qe(n,(()=>o().tag),(t=>{Pr(t,Ri({get id(){return o().id}},(()=>o().tag)))})),qe(ge(n,2),(()=>o().indicator),(t=>{Pr(t,Ri({get id(){return o().id}},(()=>o().indicator)))})),tt((()=>{ai(e,`is-no-follow-subtitle ${o().classes??""}`),je(i,`${r()[o().title]??""} `)})),Le(t,e)})),Le(t,a),te()}(t,{get root(){return n()},get item(){return Gt(s)},$$events:{navigate(t){Ii.call(this,e,t)}}})})),Le(t,a)})),tt((()=>ai(a,`menu-list ${(o()?"is-closed":"")??""}`))),Le(t,a),te()}ke(["click"]);var Yd=Se("<p><!> <!> <!></p>"),Qd=Se("<!> <!>",1);function Xd(t,e){Zt(e,!0);const i=xi();let r=Di(e,"items",19,(()=>[])),n=Di(e,"root",3,""),s=j((()=>r().filter((t=>e.section.id===t.section))));var o=Qd(),a=he(o);qe(a,(()=>e.section),(t=>{var r=Ee();qe(he(r),(()=>Gt(s).length||e.section.component||e.section.tag||e.section.indicator),(t=>{var r=Yd(),n=de(r);qe(n,(()=>"component"===e.section.type&&e.section.component&&oo.contains(e.section.component)),(t=>{var i=Ee();const r=j((()=>oo.get(e.section.component)));ri(he(i),(()=>Gt(r)),((t,i)=>{i(t,Ri({get id(){return e.section.id}},(()=>e.section.props)))})),Le(t,i)}),(t=>{var r=Ce();tt((()=>je(r,Ti(sr,"$LOCALE",i)[e.section.title]))),Le(t,r)}));var s=ge(n,2);qe(s,(()=>e.section.tag),(t=>{Pr(t,Ri({get id(){return e.section.id}},(()=>e.section.tag)))})),qe(ge(s,2),(()=>e.section.indicator),(t=>{Pr(t,Ri({get id(){return e.section.id}},(()=>e.section.indicator)))})),tt((()=>ai(r,`menu-label ${e.section.classes??""}`))),Le(t,r)})),Le(t,r)})),qe(ge(a,2),(()=>Gt(s).length),(t=>{Jd(t,{get root(){return n()},get items(){return Gt(s)},$$events:{navigate(t){Ii.call(this,e,t)}}})})),Le(t,o),te()}function Zd(t,e){Zt(e,!0);let i=Di(e,"root",3,""),r=Di(e,"items",19,(()=>[])),n=Di(e,"sections",19,(()=>[])),s=Di(e,"navigate",3,null);function o(t){"function"==typeof s()&&s()(t.detail)}var a=Ee();Je(he(a),17,n,Ge,((t,e)=>{Xd(t,{get section(){return Gt(e)},get items(){return r()},get root(){return i()},$$events:{navigate:o}})})),Le(t,a),te()}const th=rr({open:!0});var eh;const ih="side";class rh extends Md{static render(t){t&&this.setApp(t),this.prepareData(),this.menu||this.createUI()}static update(){this.menu&&(this.menu.$destroy(),this.createUI())}static createUI(){let t=document.querySelector(this.getOptions().targetSelector);t&&(this.menu=We(Zd,{target:t,props:{items:this.items,sections:this.sections,root:this.getOptions().root,navigate:this.getOptions().navigate}}),this.initSizeResponse(),this.interval=setInterval(this.updateMenuActiveItem.bind(this),200),this.bindToggle())}static itemIsActive(t){return(this.location+"/").indexOf(t+"/")>-1}static updateMenu(){var t=this;Array.from(document.querySelectorAll(this.getOptions().targetSelector+" a")).forEach((function(e){t.itemIsActive(e.getAttribute("href"))?e.classList.add("is-active"):e.classList.remove("is-active")}))}static updateMenuActiveItem(){let t=window.location.toString(),e=this.location;e?t!==e&&(this.location=t,this.updateMenu()):(this.location=t,this.updateMenu())}static initSizeResponse(){this.nav=document.querySelector("nav.navbar"),this.aside=document.querySelector("aside"),this.main=document.querySelector("main"),this.resizeAsideAndMain(this.aside,this.main,this.nav),this.resizeMain(this.main,this.aside),window.addEventListener("resize",this.resizeMain.bind(this)),this.isTouch()&&(this.getOptions().open?this.show():this.hide())}static resizeMain(){if(this.isTouch())this.aside.classList.contains("is-active")?this.main.style.display="none":(this.main.style.display="block",this.main.style.marginLeft="0px");else{let t=this.aside.getBoundingClientRect();this.main.style.display="block","0px"===this.main.style.height&&(this.main.style.height="auto"),this.main.style.marginLeft=t.width+t.left+"px"}}static resizeAside(){if("none"!==this.aside.style.display){let t=this.nav.getBoundingClientRect();this.aside.style.height=window.innerHeight-t.height+"px",this.aside.style.marginTop=t.height+"px"}}static resizeAsideAndMain(){let t=this.nav.getBoundingClientRect();this.aside.style.height=window.innerHeight-t.height+"px"}static bindToggle(){var t=this;let e=document.querySelectorAll(this.getOptions().toggleSelector);Array.from(e).forEach((function(e){e.removeEventListener("click",t.toggle.bind(t)),e.addEventListener("click",t.toggle.bind(t))}))}static toggle(t){return t&&t.preventDefault(),this.aside&&(this.isTouch()?this.aside.classList.toggle("is-active"):this.aside.classList.toggle("is-closed"),this.resizeMain()),!1}static hide(t){return t&&t.preventDefault(),this.aside&&(this.isTouch()?this.aside.classList.remove("is-active"):this.aside.classList.add("is-closed"),this.resizeMain()),th.update((function(t){return t.open=!1,t})),!1}static show(t){return t&&t.preventDefault(),this.aside&&(this.isTouch()?this.aside.classList.add("is-active"):this.aside.classList.remove("is-closed"),this.resizeMain()),th.update((function(t){return t.open=!0,t})),!1}static isOpen(){return!this.aside||(this.isTouch()?this.aside.classList.contains("is-active"):!this.aside.classList.contains("is-closed"))}}eh=rh,Ki(rh,"nav",void 0),Ki(rh,"main",void 0),Ki(rh,"aside",void 0),Ki(rh,"DEFAULT",{section:"any",sectionTitle:"Меню",priority:0,open:!0,type:"link"}),Ki(rh,"options",{directNavigation:!1,type:ih,items:[],sections:[],targetSelector:`#${ih}-menu`,toggleSelector:`.${ih}-menu-toggle`,root:"/",open:!0,navigate:function(t){if(eh.isTouch()&&(eh.hide(),eh.app&&eh.app.emit("top-navbar-burger:update",{closed:!0})),!eh.isDirectNavigation()&&eh.app){let e=eh.app.getWorking("router");if(e)return e.navigate(t.short)}document.location.assign(t.full)}});var nh=Se('<a class="navbar-item"><!> <!></a>');var sh=Se("<!> <!> <!>",1);function oh(t,e){Zt(e,!0);const i=xi();var r=sh(),n=he(r);qe(n,(()=>e.item.icon),(t=>{rl(t,Ri((()=>e.item.icon)))}),(t=>{var r=Ee();qe(he(r),(()=>"component"===e.item.type&&e.item.component&&oo.contains(e.item.component)),(t=>{var i=Ee();const r=j((()=>oo.get(e.item.component)));ri(he(i),(()=>Gt(r)),((t,i)=>{i(t,Ri({get id(){return e.item.id}},(()=>e.item.props)))})),Le(t,i)}),(t=>{var r=Ce();tt((()=>je(r,Ti(sr,"$LOCALE",i)[e.item.title]))),Le(t,r)}),!0),Le(t,r)}));var s=ge(n,2);qe(s,(()=>e.item.tag),(t=>{Er(t,Ri({top:!0,right:!0,size:"small",get id(){return e.item.id}},(()=>e.item.tag)))})),qe(ge(s,2),(()=>e.item.indicator),(t=>{Pr(t,Ri({get id(){return e.item.id}},(()=>e.item.indicator)))})),Le(t,r),te()}function ah(t,e,i){e("click",{event:t,element:i()})}var lh=Se("<hr>"),ch=Se("<a><!></a>"),uh=Se('<div role="button" tabindex="0"><!></div>'),dh=Se("<!> <!>",1);function hh(t,e){Zt(e,!0);const i=Si();let r=Di(e,"root",3,""),n=Di(e,"item",19,(()=>({}))),s=Di(e,"hidden",3,""),o=Di(e,"classes",3,"");var a=dh(),l=he(a);qe(l,(()=>n().break),(t=>{var e=lh();tt((()=>ai(e,`navbar-divider ${(s()?`is-hidden-${s()}`:"")??""} `))),Le(t,e)})),qe(ge(l,2),(()=>n().url),(t=>{var e=ch();e.__click=[ah,i,n],oh(de(e),{get item(){return n()}}),tt((()=>{ai(e,`navbar-item ${(s()?`is-hidden-${s()}`:"")??""} ${n().classes??""} ${o()??""} `),ni(e,"href",`${r()??""}${n().url??""}`),ni(e,"data-href",n().url)})),Le(t,e)}),(t=>{var e=uh();e.__click=[ah,i,n],e.__keyup=[ah,i,n],oh(de(e),{get item(){return n()}}),tt((()=>ai(e,`navbar-item ${(s()?`is-hidden-${s()}`:"")??""} ${n().classes??""} ${o()??""}`))),Le(t,e)})),Le(t,a),te()}function gh(t,e,i){e("click",{event:t,element:i()})}ke(["click","keyup"]);var fh=Se('<div><a href=""><!></a> <div></div></div>'),ph=Se("<a><!></a>"),vh=Se('<div role="button" tabindex="0"><!></div>');function mh(t,e){Zt(e,!0);const i=Si();let r=Di(e,"root",3,""),n=Di(e,"section",19,(()=>({}))),s=Di(e,"items",19,(()=>[])),o=Di(e,"hidden",3,""),a=Di(e,"hoverable",3,!0),l=Di(e,"arrowless",3,!1),c=Di(e,"right",3,!1);var u=Ee();qe(he(u),(()=>s().length),(t=>{var u=fh(),d=de(u);d.__click=[gh,i,n],oh(de(d),{get item(){return n()}});var h=ge(d,2);Je(h,21,s,(t=>t.id),((t,i)=>{hh(t,{get root(){return r()},get item(){return Gt(i)},$$events:{click(t){Ii.call(this,e,t)}}})})),tt((()=>{ai(u,`navbar-item has-dropdown ${(a()?"is-hoverable":"")??""} ${(o()?`is-hidden-${o()}`:"")??""} `),ai(d,`navbar-link ${(l()?"is-arrowless":"")??""}`),ai(h,`navbar-dropdown ${(c()?"is-right":"")??""}`)})),Le(t,u)}),(t=>{var e=Ee();qe(he(e),(()=>n().url),(t=>{var e=ph();e.__click=[gh,i,n],oh(de(e),{get item(){return n()}}),tt((()=>{ai(e,`navbar-item ${(o()?`is-hidden-${o()}`:"")??""} `),ni(e,"href",`${r()??""}${n().url??""}`),ni(e,"data-href",n().url)})),Le(t,e)}),(t=>{var e=vh();e.__click=[gh,i,n],e.__keyup=[gh,i,n],oh(de(e),{get item(){return n()}}),tt((()=>ai(e,`navbar-item ${(o()?`is-hidden-${o()}`:"")??""} `))),Le(t,e)}),!0),Le(t,e)})),Le(t,u),te()}function bh(t,e,i){return t.preventDefault(),e(!e()),i("toggle",{closed:e()}),!1}ke(["click","keyup"]);var yh=Se('<a href="" role="button" aria-label="menu" aria-expanded="false" data-target="navbar"><span aria-hidden="true"></span> <span aria-hidden="true"></span> <span aria-hidden="true"></span></a>');function Oh(t,e){Zt(e,!0);const i=Si();let r=Di(e,"events",31,(()=>re({}))),n=Di(e,"register",19,(()=>_r.registerWidgetEvents.bind(_r))),s=Di(e,"closed",15,!0),o=Di(e,"onUpdate",3,(t=>{s(t.closed)}));Ai((()=>{_r.objHas(r(),"top-navbar-burger:update")||r(r()["top-navbar-burger:update"]=o(),!0),n()(r())})),th.subscribe((t=>(s(!t.open),t)));var a=yh();a.__click=[bh,s,i],tt((()=>ai(a,`navbar-burger ${(s()?"":"is-active")??""}`))),Le(t,a),te()}ke(["click"]);var $h,wh=Se('<div class="navbar-brand"><!> <!> <!> <!></div> <div id="navbar"><div class="navbar-start"></div> <div class="navbar-end"></div></div>',1);function kh(t,e){Zt(e,!0);const i=Si();let r=Di(e,"sections",19,(()=>[])),n=Di(e,"items",19,(()=>[])),s=Di(e,"root",3,""),o=Di(e,"navigate",3,null),a=Di(e,"brand",3,!1),l=Di(e,"showBurger",3,!0),c=Di(e,"burgerControlsSidemenu",3,!0),u=x(!0);function d({detail:t}){let{event:e,element:i}=t;return Object.hasOwn(i,"action")?i.action(e,i):(e.preventDefault(),"function"==typeof o()&&o()({full:e.currentTarget.getAttribute("href"),short:e.currentTarget.dataset.href}),!1)}let h={},g={};function f({detail:t}){c()?rh.toggle():(i("toggleBurger",t),U(u,re(t.closed)))}var p=wh(),v=he(p),m=de(v);qe(m,a,(t=>{!function(t,e){let i=Di(e,"url",3,"/"),r=Di(e,"title",3,""),n=Di(e,"icon",19,(()=>({src:"https://via.placeholder.com/56x28",width:28,height:56})));var s=nh(),o=de(s);rl(o,Ri(n)),qe(ge(o,2),r,(t=>{var e=Ee();ti(he(e),(()=>`<span class="navbar-item-brand-title">${r()}</span>`)),Le(t,e)})),tt((()=>ni(s,"href",i()))),Le(t,s)}(t,Ri(a))}));var b=ge(m,2);Je(b,17,r,(t=>t.id),((t,e)=>{var i=Ee();qe(he(i),(()=>Gt(e).showOnTouch),(t=>{hh(t,{hidden:"desktop",get item(){return Gt(e)},get root(){return s()},$$events:{click:d}})})),Le(t,i)}));var y=ge(b,2);Je(y,17,n,(t=>t.id),((t,e)=>{var i=Ee();qe(he(i),(()=>Gt(e).showOnTouch),(t=>{hh(t,{hidden:"desktop",get item(){return Gt(e)},get root(){return s()},$$events:{click:d}})})),Le(t,i)})),qe(ge(y,2),l,(t=>{Oh(t,{$$events:{toggle:f}})}));var O=ge(v,2),$=de(O);Je($,21,n,Ge,((t,e)=>{var i=Ee();qe(he(i),(()=>"start"===Gt(e).place),(t=>{hh(t,{hidden:"touch",get item(){return Gt(e)},$$events:{click:d}})})),Le(t,i)})),Je(ge($,2),21,r,(t=>t.id),((t,e)=>{var i=Ee();qe(he(i),(()=>(h[Gt(e).id]||Gt(e).indicator||Gt(e).tag)&&"end"==Gt(e).place),(t=>{mh(t,{right:!0,get hidden(){return Gt(e).hidden},get root(){return s()},get section(){return Gt(e)},get items(){return g[Gt(e).id]},$$events:{click:d}})})),Le(t,i)})),tt((()=>ai(O,`navbar-menu ${(Gt(u)?"":"is-active")??""}`))),Le(t,p),te()}class _h extends Md{static render(t){if(t&&this.setApp(t),this.prepareData(),!this.menu){let t=document.querySelector(this.getOptions().targetSelector);if(!t)return;this.menu=We(kh,{target:t,props:{brand:this.getOptions().brand,items:this.items,sections:this.sections,root:this.getOptions().root,navigate:this.getOptions().navigate}}),this.interval=setInterval(this.updateMenuActiveItem.bind(this),200)}}static updateMenu(t){Array.from(document.querySelectorAll(this.getOptions().targetSelector+" aside.menu a")).forEach((function(e){e.href==t||t.href&&0==t.href.indexOf(e.href)?e.classList.add("is-active"):e.classList.remove("is-active")}))}static updateMenuActiveItem(){let t=window.location.toString(),e=this.location;e?t!==e&&(this.location=t,this.updateMenu(t)):(this.location=t,this.updateMenu(t))}static toggle(){document.querySelector(this.getOptions().targetSelector).classList.toggle("is-active")}static hide(){document.querySelector(this.getOptions().targetSelector).classList.remove("is-active")}static setBurgerState(t){this.menu.$set({menuClosed:t})}}$h=_h,Ki(_h,"DEFAULT",{section:"any",sectionTitle:"Меню",priority:0,type:"link",place:"main"}),Ki(_h,"options",{brand:!1,type:"top",items:[],sections:[],targetSelector:"#top-menu",root:"/",directNavigation:!1,navigate:function(t){if($h.hide(),!$h.isDirectNavigation()&&$h.app){let e=$h.app.getWorking("router");if(e)return e.navigate(t.short)}document.location.assign(t.full)}});const Ih=function(t){return Object.hasOwn(t,"status")&&Object.hasOwn(t,"result")?t.result:t};const Ah=["create","update","list","delete","details"];class Sh{static async preload(t,e="list"){try{if(!Ah.includes(e))return;let i=t.getOptions(`${e}.preload`,{});if(0==Object.keys(i).length&&(i=t.getOptions("preload",{})),Object.keys(i).length>0){let r=Object.keys(i),n=[];r.forEach((function(e){let r=_r.lowerFirstLetter(i[e]),s=t.make[r]({});n.push(s.$listAll())}));let s=await Promise.all(n);for(let i=0;i<r.length;i++){const n=r[i];if("ok"===s[i].status&&Array.isArray(s[i].result)){const r=s[i].result.map((function(t){return{id:t._id,title:t.title}}));t.setOptions(`variants.${e}.${n}`,r)}}}t.log("preload finished")}catch(e){t.report(e),t.showErrorMessage(e)}}}class Ch{static extractActionName(t,e){let i="list";return 1===e.length?i="create"===e[0]?"create":t.actionHandlerExists(e[0])?e[0]:"details":e.length>1&&(i="delete"===e[1]?"delete":"update"===e[1]?"update":e[1]),i}static route(t,e){try{const i=Ch.extractActionName(t,e);return t.setCurrentAction(i),t.runAction(i,e)}catch(e){t.report(e),t.showErrorMessage(e)}}}class Eh{static error(t,e,i){t.setUI("__message__",new Cl({target:t.getContainerInnerElement(),props:{title:e,message:i}}))}static success(t,e,i){t.setUI("__message__",new Ll({target:t.getContainerInnerElement(),props:{title:e,message:i}}))}}const Lh="Просмотр";class Th{static get NAVIGATION_DELAY(){return On}static get deafultBreadcrumbsTail(){return Lh}static get breadcrumbsTails(){return{preset:Lh,set:'Просмотр, "{:title}"'}}static getBreadcrumbsTail(t){return this.breadcrumbsTails?_r.select(this.breadcrumbsTails,t,this.deafultBreadcrumbsTail):""}static get ACTION(){return"details"}static get MODEL_ACTION_GET(){return"get"}static get MODEL_ACTION_PUT(){return"get"}static get UIConstructor(){return hd}static get TRANSFORMER(){return Ih}static getIdField(t){return t.getOptions(`${this.ACTION}.idField`,"_id")}static loadDataQuery(t,e){const i=this.getIdField(t);return{[i]:e[0]}}static async loadData(t,e){const i=this.loadDataQuery(t,e),r=this.getModelActionName(t);return await t.getModel(i)[`$${r}`]()}static getModelActionName(t){return t.getOptions(`${this.ACTION}.actionName`,this.MODEL_ACTION_GET)}static presetBreadcrumbs(t,e){t.setBreadcrumbs([{title:this.getBreadcrumbsTail("preset"),url:t.getModelActionURL(e[0],!1)}])}static getTitle(t,e,i){return t.getItemTitle(i.result)}static setBreadcrumbs(t,e,i){const r=this.getTitle(t,e,i),n=this.getBreadcrumbsTail("set");t.setBreadcrumbs([{title:n?Ar.format(n,{title:r}):r,url:t.getModelActionURL(e[0],!1)}])}static isResponseBad(t){return!t||"ok"!==t.status}static getValidators(t){return t.getValidators&&t.getValidators()||t.getOptions("Validators")}static prepareUIOptions(t,e){const i=this.getModelActionName(t);return{options:{target:t.getContainerInnerElement(),model:t.getModelName(),action:i,name:`${t.getName()}.${this.ACTION}Form`,fields:{readonly:!0},validators:this.getValidators(t),variants:t.getOptions(`variants.${this.ACTION}`,{}),masters:t.getOptions(`${this.ACTION}.masters`,{}),injected:t.getOptions(`${this.ACTION}.injected`,{})},data:this.TRANSFORMER(e.result)}}static getUI(t){return t.getUI(this.ACTION)}static setUI(t,e){t.setUI(this.ACTION,e)}static setUILoading(t){this.getUI(t).$set({loading:!0})}static setUILoaded(t){this.getUI(t).$set({loading:!1})}static setUIError(t,e){this.getUI(t).$set({error:e})}static bindUIEvents(t,e,i){_r.isFunc(t.goBack)&&this.bindUIEvent(t,"reject",(function(){return t.goBack()}))}static bindUIEvent(t,e,i){const r=this.getUI(t);return r.$on?r.$on(e,i):r.on?r.on(e,i):void 0}static isUIRendered(t){return!!this.getUI(t)||(t.$destroyUI(),!1)}static tweakUIOptions(t){return t}static createUI(t,e,i){return _r.isFunc(t)?We(t,this.tweakUIOptions(this.prepareUIOptions(e,response))):new t(this.tweakUIOptions(this.prepareUIOptions(e,response)))}static async run(t,e){try{if(t.emit(`before:render:${this.ACTION}`,e),this.isUIRendered(t))return;t.renderLoadingScreen&&t.renderLoadingScreen(),await t.preloadVariants(this.ACTION),this.presetBreadcrumbs(t,e);const i=await this.loadData(t,e);if(this.isResponseBad(i))return t.showErrorMessage(i);this.setBreadcrumbs(t,e,i);this.UIConstructor,this.createUI();this.setUI(t),this.bindUIEvents(t,e,i),t.emit(`after:render:${this.ACTION}`,e,i)}catch(i){t.emit(`exception:render:${this.ACTION}`,e,i),t.report(i),t.showErrorMessage(i)}finally{t.removeLoadingScreen&&t.removeLoadingScreen()}}static goBackAfterDelay(t){t.goBack(this.NAVIGATION_DELAY)}static goBack(t){t.goBack(0)}}const xh="create";class Nh extends Th{static get deafultBreadcrumbsTail(){return"Создание"}static get breadcrumbsTails(){}static get ACTION(){return xh}static get MODEL_ACTION_GET(){return xh}static get MODEL_ACTION_PUT(){return xh}static loadData(t,e){let i=t.createDefault();return i.getData&&(i=i.getData()),{status:"ok",result:i}}static getTitle(t,e,i){return t.getItemTitle(i)}static prepareUIOptions(t,e){const i=this.getModelActionName(t);return{options:{target:t.getContainerInnerElement(),model:t.getModelName(),action:i,name:`${t.getName()}.${this.ACTION}Form`,validators:this.getValidators(t),variants:t.getOptions(`variants.${this.ACTION}`,{}),masters:t.getOptions(`${this.ACTION}.masters`,{})},data:this.TRANSFORMER(e)}}static bindUIEvents(t,e,i){var r=this;_r.isFunc(t.goBack)&&this.bindUIEvent(t,"reject",(function(){return r.goBack(t)})),_r.isFunc(t.onActionSubmit)&&this.bindUIEvent(t,"submit",(async function(i){await t.onActionSubmit(r.ACTION,{...r.loadDataQuery(t,e),...i.detail})&&r.goBackAfterDelay(t)}))}}class Fh extends Th{static tweakUIOptions(t){return t.options.ui={submit:{enabled:!1}},t}static async run(t,e){try{if(t.emit(`before:render:${this.ACTION}`,e),this.isUIRendered(t))return;t.renderLoadingScreen&&t.renderLoadingScreen(),await t.preloadVariants(this.ACTION),this.presetBreadcrumbs(t,e);const i=await this.loadData(t,e);if(this.isResponseBad(i))return t.showErrorMessage(i);this.setBreadcrumbs(t,e,i);const r=this.UIConstructor;this.setUI(t,new r(this.tweakUIOptions(this.prepareUIOptions(t,i)))),this.bindUIEvents(t,e,i),t.emit(`after:render:${this.ACTION}`,e,i)}catch(i){t.emit(`exception:render:${this.ACTION}`,e,i),t.report(i),t.showErrorMessage(i)}finally{t.removeLoadingScreen&&t.removeLoadingScreen()}}}const Mh="Редактирование";class Rh extends Th{static get deafultBreadcrumbsTail(){return Mh}static get breadcrumbsTails(){return{preset:Mh,set:`${Mh}: "{:title}"`}}static get ACTION(){return"update"}static get MODEL_ACTION_GET(){return"getRaw"}static get MODEL_ACTION_PUT(){return"update"}static prepareUIOptions(t,e){return{options:{target:t.getContainerInnerElement(),model:t.getModelName(),action:this.MODEL_ACTION_PUT,name:`${t.getName()}.${this.ACTION}Form`,validators:this.getValidators(t),variants:t.getOptions(`variants.${this.ACTION}`,{}),ui:t.getOptions(`${this.ACTION}.ui`,{}),fields:t.getOptions(`${this.ACTION}.fields`,{}),masters:t.getOptions(`${this.ACTION}.masters`,{})},data:this.TRANSFORMER(_r.stripProxy(e.result))}}static bindUIEvents(t,e,i){var r=this;_r.isFunc(t.goBack)&&this.bindUIEvent(t,"reject",(function(){return r.goBack(t)})),_r.isFunc(t.onActionSubmit)&&this.bindUIEvent(t,"submit",(async function(i){await t.onActionSubmit(r.ACTION,{...r.loadDataQuery(t,e),...i.detail})&&r.goBackAfterDelay(t)}))}static isUIRendered(t){return!!this.getUI(t)||(t.$destroyUI(),!1)}static async run(t,e){try{if(t.emit(`before:render:${this.ACTION}`,[e]),this.isUIRendered(t))return;t.renderLoadingScreen&&t.renderLoadingScreen(),await t.preloadVariants(this.ACTION),this.presetBreadcrumbs(t,e);const i=await this.loadData(t,e);if(this.isResponseBad(i))return t.showErrorMessage(i);this.setBreadcrumbs(t,e,i);const r=this.UIConstructor;this.setUI(t,new r(this.tweakUIOptions(this.prepareUIOptions(t,i)))),this.bindUIEvents(t,e,i),t.emit(`after:render:${this.ACTION}`,e)}catch(i){t.emit(`exception:render:${this.ACTION}`,e,i),t.report(i),t.showErrorMessage(i)}finally{t.removeLoadingScreen&&t.removeLoadingScreen()}}}const Uh="delete";const Dh="list";class Ph{static tweakActionsList(t,e){return t.getOptions(`${Dh}.createAction`,!0)&&e.push({title:"Создать",action:function(){return t.goCreate()}}),e}static tweakUIOptions(t){return t}static createActionsButtons(t,e,i=0,r=["details","update","delete"],n=[],s=[],o=!0){const a={details:{action:function(){return t.goDetails(e,i)},...o?{icon:"circle-info"}:{title:"Подробнее"},size:"small"},update:{action:function(){return t.goUpdate(e,i)},...o?{icon:"edit"}:{title:"Изменить"},color:"warning",size:"small"},delete:{action:function(){return t.goDelete(e,i)},color:"danger",...o?{icon:"trash"}:{title:"Удалить"},size:"small",style:"outlined"}},l=[...n];return Array.isArray(r)&&r.forEach((function(t){return l.push(a[t])})),l.push(...s),l}static async run(t,e){try{if(t.renderLoadingScreen&&t.renderLoadingScreen(),await t.preloadVariants(Dh),t.setBreadcrumbs([{title:"Список",url:t.getModelURL()}]),t.ui[Dh])return;t.$destroyUI(),t.ui[Dh]=new Vc(this.tweakUIOptions(Ph.prepareOptions(t))),t.emit(`after:render:${Dh}`,e,t.ui[Dh])}catch(i){t.emit(`exception:render:${Dh}`,e,i),t.report(i),t.showErrorMessage(i)}finally{t.removeLoadingScreen&&t.removeLoadingScreen()}}static prepareOptions(t){const e={interface:t.getOptions(`${Dh}.interface`,{combined:!0,factory:t.getInterface()}),fields:void 0,showSelect:void 0,getItemId:void 0,idField:void 0,preload:{},filterUI:t.getOptions(`${Dh}.filterUI`),pager:{size:50,page:0},sorter:{id:-1},filter:void 0,ui:void 0};let i=[...t.getOptions(`${Dh}.actions`,[])];i=this.tweakActionsList(t,i);const r={options:{targetEl:t.getContainerInnerElement(),endless:!1,actions:i}};return Object.keys(e).forEach((function(i){let n=t.getOptions(`${Dh}.${i}`,e[i]);void 0!==n&&(r.options[i]=n)})),r}}var jh={create:class extends Nh{},details:class extends Fh{},update:class extends Rh{},delete:class{static async run(t,e){try{if(t.ui[Uh])return;if(t.$destroyUI(),t.ui[Uh]=new Yc({name:"CRUDDelete",target:t.getContainerInnerElement(),options:{loaderActive:!0,loaderStyle:"container",loaderTitle:"not-node:crud_delete_action_waiting",container:{id:`crud-delete-action-${e[0]}`}}}),t.setBreadcrumbs([{title:"Удаление",url:t.getModelActionURL(e[0],Uh)}]),confirm("Удалить запись?")){const i=t.getOptions(`${Uh}.actionName`,"delete");return void(await t.onActionSubmit(i,{_id:e[0]})&&t.goList())}t.goList()}catch(e){t.report(e),t.showErrorMessage(e)}}},list:Ph};const Wh=[],Bh=["title","label","id","name"],zh="loading_screen";var Vh=new WeakMap,qh=new WeakMap,Hh=new WeakMap;class Kh extends oc{static get LABELS(){return Object.freeze({plural:`${this.MODULE_NAME}:${this.MODEL_NAME}_label_plural`,single:`${this.MODULE_NAME}:${this.MODEL_NAME}_label_single`})}static getMenu(t={}){return[{section:this.MODULE_NAME,title:this.LABELS.plural,url:`/${_r.lowerFirstLetter(this.MODULE_NAME)}/${_r.lowerFirstLetter(this.MODEL_NAME)}`,...t}]}constructor(t,e,{actions:i,router:r,preloader:n}={actions:void 0,router:void 0,preloader:void 0}){return super(t,`CRUD.${e}`),Vi(this,Vh,{...jh}),Vi(this,qh,Ch),Vi(this,Hh,Sh),Ki(this,"TITLE_FIELDS_PRIORITY",Bh),Ki(this,"TOP_CLASS",["box"]),Ki(this,"MAIN_CLASS",["box"]),Ki(this,"BOTTOM_CLASS",["box"]),Ki(this,"WS_CHECK_INTERVAL",200),i&&qi(Vh,this,{...zi(Vh,this),...i}),r&&qi(qh,this,r),n&&qi(Hh,this,n),this.ui={},this.els={},this.setOptions("names",{module:"",plural:"plural",single:"single"}),this.setOptions("containerSelector",this.app?.getOptions("crud.containerSelector")),this.buildFrame(),this}setValidators(t){const e=this.getModuleName().split("-"),i=`ns${("not"===e[0]?e.splice(1):e).map(_r.capitalizeFirstLetter).join("")}Common`,r=this.app?.getService(i);this.setWorking("validators",r.augmentValidators(t))}getValidators(){return this.getWorking("validators")}start(){var t=this;let e=[];this.getModuleName()&&this.getOptions("names.module")&&e.push({title:this.getOptions("names.module"),url:!1}),e.push({title:this.getOptions("names.plural"),url:this.getModelURL()}),Wh.splice(0,Wh.length,...e),Fd.setHead(Wh).render({root:"",target:this.els.top,navigate:function(e){return t.app?.getWorking("router").navigate(e)}}),this.route(this.getOptions("params"))}startWhenWSClientReady(){var t=this;this.app?.getWSClient()?this.app?.getWSClient().isConnected()?this.start():this.app.getWSClient().once("connected",this.startWhenWSClientReady.bind(this)):setTimeout((function(){return t.startWhenWSClientReady()}),this.WS_CHECK_INTERVAL)}setBreadcrumbs(t){Fd.setTail(t).update()}backToList(){this.navigate(this.linkBackToList())}linkBackToList(){return this.getModelURL()}afterAction(t="list"){let e=this.app?.getOptions("crud.navigateBackAfter",[]);e&&Array.isArray(e)&&e.indexOf(t)>-1?window.history.back():this.backToList()}buildFrame(){var t=this;let e=document.querySelector(this.app?.getOptions("crud.containerSelector","body"));for(;e.firstChild;)e.removeChild(e.firstChild);this.els.top=document.createElement("div"),this.els.top.id="crud-top",this.getFrameClasses().TOP_CLASS.forEach((function(e){return t.els.top.classList.add(e)})),e.appendChild(this.els.top),this.els.main=document.createElement("div"),this.els.main.id="crud-main",this.getFrameClasses().MAIN_CLASS.forEach((function(e){return t.els.main.classList.add(e)})),e.appendChild(this.els.main),this.els.bottom=document.createElement("div"),this.els.bottom.id="crud-bottom",this.getFrameClasses().BOTTOM_CLASS.forEach((function(e){return t.els.bottom.classList.add(e)})),e.appendChild(this.els.bottom)}getFrameClasses(){return{TOP_CLASS:this.TOP_CLASS,MAIN_CLASS:this.MAIN_CLASS,BOTTOM_CLASS:this.BOTTOM_CLASS}}getContainerTopElement(){return this.els.top}getContainerInnerElement(){return this.els.main}getContainerBottomElement(){return this.els.bottom}async preloadVariants(t="list"){await zi(Hh,this).preload(this,t)}getTitleFromLib(t,e){const i=this.getCurrentAction();return this.debug&&this.debug("notCRUD.getTitleFromLib is obsolete, use notCRUD.getPreloadedVariantTitle(actionName, propName, id)"),this.getPreloadedVariantTitle(i,t,e)}getPreloadedVariants(t,e){return this.getOptions(`variants.${t}.${e}`,[])}getPreloadedVariantTitle(t,e,i){const r=this.getPreloadedVariants(t,e).find((function(t){return t.id===i}));return r?r.title:i}getItemTitle(t){const e=this.TITLE_FIELDS_PRIORITY.find((function(e){return _r.objHas(t,e)}));return e?t[e]:""}createDefault(){return this.getModel({}).toDefault()}route(t=[]){try{return zi(qh,this).route(this,t)}catch(t){this.report(t),this.showErrorMessage(t)}}actionHandlerExists(t){return!!Object.keys(zi(Vh,this)).includes(t)||"function"==typeof this["run"+_r.capitalizeFirstLetter(t)]}runAction(t,e){if(Object.keys(zi(Vh,this)).includes(t))return zi(Vh,this)[t].run(this,e);if("function"==typeof this["run"+_r.capitalizeFirstLetter(t)])return this["run"+_r.capitalizeFirstLetter(t)](e);throw new Error(`No such action: ${t} in contoller ${this.getWorking("name")}`)}goCreate(t=0){this.goAfterDelay(this.getModelActionURL("","create"),t)}goDetails(t,e=0){this.goAfterDelay(this.getModelActionURL(t,""),e)}goUpdate(t,e=0){this.goAfterDelay(this.getModelActionURL(t,"update"),e)}goDelete(t,e=0){this.goAfterDelay(this.getModelActionURL(t,"delete"),e)}goList(t=0){this.goAfterDelay(this.getModelURL(),t)}goAfterDelay(t,e=0){var i=this;this.navigateWithDelay(t,e,(function(){return i.$destroyUI()}))}goBack(t=0){this.goList(t)}async onActionSubmit(t,e){let i=!0;const r=this.ui[t];if(!r)throw new Error("Action UI doesnt exist");try{r.setLoading();let n=await this.getModel(e)[`$${t}`]();i=r.processResult(n)}catch(t){i=r.processResult(t)}finally{return r.resetLoading(),i}}$destroyUI(){for(let t in this.ui)this.destroyUIByName(t)}destroyUIByName(t){Object.hasOwn(this.ui,t)&&(this.ui[t].$destroy&&this.ui[t].$destroy(),this.ui[t].destroy&&this.ui[t].destroy(),delete this.ui[t])}showErrorMessage(t){this.error&&this.error(t),this.app&&this.app.emit("error",{title:"Произошла ошибка",message:t.message?t.message:Gi.ERROR_DEFAULT}),Eh.error(this,"Произошла ошибка",t.message?t.message:Gi.ERROR_DEFAULT)}showSuccessMessage(t,e){this.app&&this.app.emit("success",{title:t,message:e}),Eh.success(this,t,e)}setUI(t,e,i=!0){i&&this.$destroyUI(),this.ui[t]=e}getUI(t){return this.ui[t]}getActionUI(){return this.ui[this.getCurrentAction()]}renderLoadingScreen(){this.setUI(zh,this.createLoaderUI())}removeLoadingScreen(){this.destroyUIByName(zh)}createLoaderUI(){return We(Wr,{target:this.getContainerInnerElement(),props:{loading:!0,title:""}})}}Ki(Kh,"ERROR_DEFAULT",Gi.ERROR_DEFAULT);class Gh{static extractActionName(t){return t.length>0?t[0]:this.DEFAULT_ROUTE}static route(t,e){try{const i=this.extractActionName(e);return t.setCurrentAction(i),t.runAction(i,e)}catch(e){t.report(e),t.showErrorMessage(e)}}}Ki(Gh,"DEFAULT_ROUTE","list");const Jh=Kh;var Yh=Object.freeze({__proto__:null,COMPONENTS:oo,FIELDS:ao,UIForm:ed,VARIANTS:lo,createCRUDActionUIView:function({ACTION:t,TITLE:e,UIConstructor:i,dataProvider:r,goBack:n}){return class{static async run(s,o){try{if(s.setBreadcrumbs([{title:`Просмотр "${e}"`}]),await s.preloadVariants(t),s.ui[t])return;s.$destroyUI();let a={};r&&(a=_r.isFunc(r)?_r.isAsync(r)?await r(o):r(o):{...r});const l=s.getOptions(`${t}.transformer`,Ih);s.ui[t]=new i({target:s.getContainerInnerElement(),props:{params:o,...l(a)}}),s.emit(`after:render:${t}`),n&&_r.isFunc(n)&&s.ui[t].on("reject",(function(){return n()}))}catch(t){s.report(t),s.showErrorMessage(t)}}}},ncCRUD:Jh,notAPI:ql,notApp:rc,notBase:Pl,notBreadcrumbs:Fd,notCRUD:Kh,notCRUDRouter:Ch,notCRUDRouterPlain:Gh,notCRUDRouterSwitch:class{static get routesVariants(){return{}}static isRouteVariantValid(t){return""!==t&&_r.objHas(this.routesVariants,t)}static async determineRoute(t,e=[]){return""}static async route(t,e){try{const i=await this.determineRoute(t,e);if(!this.isRouteVariantValid(i))throw new Error(`No such action: ${i} in contoller ${t.getWorking("name")}`);{t.setCurrentAction(i);const r=this.routesVariants[i];_r.isAsync(r.run)?await r.run(t,e):r.run(t,e)}}catch(e){t.report(e),t.showErrorMessage(e)}}},notCommon:_r,notController:oc,notForm:hd,notFormHelpers:ku,notFormRules:rd,notFormSet:class extends Pl{constructor({options:t={},formComponent:e=ed,formSetComponent:i=Od}){super({options:{name:$d,mode:"default",showModes:!0,...t}}),Hi(this,Ad),Vi(this,wd,null),Vi(this,kd,null),Vi(this,_d,null),Vi(this,Id,null),qi(kd,this,e),qi(wd,this,i),this.setFormMode(this.getOptions("mode")),this.initUI()}initUI(){var t=this;const e=this.getFrameTargetEl();for(;e.children.length;)e.removeChild(e.firstChild);qi(Id,this,new(zi(wd,this))({target:e,props:Wi(Ad,this,Sd).call(this)})),zi(Id,this).$on("mode",(function(e){t.setFormMode(e.detail),t.updateForm()})),this.updateForm()}setFormMode(t){this.isModeExists(t)?this.setWorking("mode",t):(this.setWorking("mode",this.getFirstMode()),this.updateFormModeInUI())}updateFormModeInUI(){zi(Id,this)&&null!==this.getWorking("mode")&&zi(Id,this).$set({mode:this.getWorking("mode")})}getFormMode(){return this.getWorking("mode")}updateForm(){this.destroyForm(),null!==this.getWorking("mode")&&this.renderForm()}renderForm(){var t=this;const e=this.getFormTargetEl(),i=this.getFormConfig();if(!(e instanceof HTMLElement&&i))throw new Error("error while form rendering");const r=function(e){t.setFormMode(e),t.updateForm()};if(i.form){for(;e.children.length;)e.removeChild(e.firstChild);qi(_d,this,new i.form({options:{target:e,changeMode:r}}))}else i.props&&qi(_d,this,new(zi(kd,this))({target:e,...i.props,changeMode:r}))}getFormConfig(){var t=this;return this.getOptions("forms").find((function(e){return e.mode===t.getFormMode()}))}destroyForm(){const t=this.getFormTargetEl();if(t)for(;t.firstChild;)t.removeChild(t.lastChild);zi(_d,this)&&zi(_d,this).$destroy&&zi(_d,this).$destroy(),qi(_d,this,null)}destroyFrame(){zi(Id,this)&&zi(Id,this).$destroy&&zi(Id,this).$destroy(),qi(Id,this,null)}isModeExists(t){return this.getOptions("forms",[]).some((function(e){return e.mode===t}))}getFirstMode(){const t=this.getOptions("forms",[]);return t.length>0?t[0].mode:null}destroy(){qi(wd,this,null),qi(kd,this,null),this.destroyForm(),this.destroyFrame(),this.setData(null),this.setOptions(null),this.setWorking(null)}getFrameTargetEl(){const t=this.getOptions("target",".form-set");if(t instanceof HTMLElement)return t;if("string"==typeof t)return document.querySelector(t);throw new Error("form set target is not HTMLElement or string")}getFormTargetEl(){const t=this.getOptions("name",$d);return document.querySelector(`#${t}-form-set-container`)}},notFormUtils:Qc,notInterface:tc,notPath:br,notRecord:ec,notRouter:Bl,notServiceModelSearch:class{constructor(t,e){this.modelName=e,this.app=t}destroy(){delete this.app}getSearchRouteName(){return"listAndCount"}getDataLoadRouteName(){return"get"}transformSearchResult(t){var e=this;return t.list=t.list.map((function(t){return{_id:t._id,id:t[`${e.modelName}ID`],title:t.name||t.title||t.label||t.username}})),t}transformSelectedResult(t){return{_id:t._id,[`${this.modelName}ID`]:t.id,title:t.title}}async searchByTerm(t){try{if(t.value.length>2){const e=this.app.getModel(this.modelName);e.setSearch(t.value);const i=await e[`$${this.getSearchRouteName()}`]();return"ok"===i.status?this.transformSearchResult(i.result):{list:[],count:0,page:0,pages:0,skip:0}}return{list:[],count:0,page:0,pages:0,skip:0}}catch{return{list:[],count:0,page:0,pages:0,skip:0}}}openSelector(){var t=this;return new Promise((function(e,i){try{const r=We(Il,{target:document.body,props:{}});r.$on("termChange",(async function({detail:e}){const i=await t.searchByTerm(e);r.$set({results:i})})),r.$on("next",(function(){console.log("next selector results")})),r.$on("prev",(function(){console.log("prev selector results")})),r.$on("reject",(function(){Ve(r),i()})),r.$on("resolve",(function({detail:i}){Ve(r),e(t.transformSelectedResult(i))}))}catch(e){t.app.error(e),i(e)}}))}async loadData(t){try{if(t&&t.length>10){const e=this.app.getModel(this.modelName,{_id:t}),i=await e[`$${this.getDataLoadRouteName()}`]();return"ok"===i.status?i.result:null}return null}catch(t){return this.app.error(t),null}}},notSideMenu:rh,notStores:Gl,notTable:Vc,notTopMenu:_h});const Qh={LOCALE:sr,say:Sr,notLocale:Ar},Xh=Gi,{notCommon:Zh,COMPONENTS:tg,FIELDS:eg,VARIANTS:ig,notFormUtils:rg}=Yh;return Object.keys(Fl).forEach((function(t){Object.keys(Fl[t]).forEach((function(e){Qc.addComponent(e,Fl[t][e])}))})),t.COMPONENTS=tg,t.Elements=Fl,t.FIELDS=eg,t.Frame=Yh,t.LOCALE=sr,t.Locale=Qh,t.UICommon=Xh,t.VARIANTS=ig,t.notCommon=Zh,t.notFormUtils=rg,t.notLocale=Ar,t.say=Sr,t}({});
